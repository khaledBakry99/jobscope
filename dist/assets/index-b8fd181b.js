function ZZ(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var Ml=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function yx(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function XZ(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var mF={exports:{}},vt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tS=Symbol.for("react.transitional.element"),YZ=Symbol.for("react.portal"),JZ=Symbol.for("react.fragment"),QZ=Symbol.for("react.strict_mode"),eX=Symbol.for("react.profiler"),tX=Symbol.for("react.consumer"),nX=Symbol.for("react.context"),rX=Symbol.for("react.forward_ref"),sX=Symbol.for("react.suspense"),iX=Symbol.for("react.memo"),pF=Symbol.for("react.lazy"),CR=Symbol.iterator;function oX(t){return t===null||typeof t!="object"?null:(t=CR&&t[CR]||t["@@iterator"],typeof t=="function"?t:null)}var gF={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},yF=Object.assign,bF={};function zf(t,e,n){this.props=t,this.context=e,this.refs=bF,this.updater=n||gF}zf.prototype.isReactComponent={};zf.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};zf.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function vF(){}vF.prototype=zf.prototype;function nS(t,e,n){this.props=t,this.context=e,this.refs=bF,this.updater=n||gF}var rS=nS.prototype=new vF;rS.constructor=nS;yF(rS,zf.prototype);rS.isPureReactComponent=!0;var _R=Array.isArray,Mn={H:null,A:null,T:null,S:null,V:null},xF=Object.prototype.hasOwnProperty;function sS(t,e,n,r,s,i){return n=i.ref,{$$typeof:tS,type:t,key:e,ref:n!==void 0?n:null,props:i}}function aX(t,e){return sS(t.type,e,void 0,void 0,void 0,t.props)}function iS(t){return typeof t=="object"&&t!==null&&t.$$typeof===tS}function lX(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var SR=/\/+/g;function lE(t,e){return typeof t=="object"&&t!==null&&t.key!=null?lX(""+t.key):e.toString(36)}function TR(){}function cX(t){switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:switch(typeof t.status=="string"?t.then(TR,TR):(t.status="pending",t.then(function(e){t.status==="pending"&&(t.status="fulfilled",t.value=e)},function(e){t.status==="pending"&&(t.status="rejected",t.reason=e)})),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}}throw t}function dh(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"bigint":case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case tS:case YZ:o=!0;break;case pF:return o=t._init,dh(o(t._payload),e,n,r,s)}}if(o)return s=s(t),o=r===""?"."+lE(t,0):r,_R(s)?(n="",o!=null&&(n=o.replace(SR,"$&/")+"/"),dh(s,e,n,"",function(c){return c})):s!=null&&(iS(s)&&(s=aX(s,n+(s.key==null||t&&t.key===s.key?"":(""+s.key).replace(SR,"$&/")+"/")+o)),e.push(s)),1;o=0;var a=r===""?".":r+":";if(_R(t))for(var l=0;l<t.length;l++)r=t[l],i=a+lE(r,l),o+=dh(r,e,n,i,s);else if(l=oX(t),typeof l=="function")for(t=l.call(t),l=0;!(r=t.next()).done;)r=r.value,i=a+lE(r,l++),o+=dh(r,e,n,i,s);else if(i==="object"){if(typeof t.then=="function")return dh(cX(t),e,n,r,s);throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.")}return o}function rb(t,e,n){if(t==null)return t;var r=[],s=0;return dh(t,r,"","",function(i){return e.call(n,i,s++)}),r}function uX(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var $R=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function dX(){}vt.Children={map:rb,forEach:function(t,e,n){rb(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return rb(t,function(){e++}),e},toArray:function(t){return rb(t,function(e){return e})||[]},only:function(t){if(!iS(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};vt.Component=zf;vt.Fragment=JZ;vt.Profiler=eX;vt.PureComponent=nS;vt.StrictMode=QZ;vt.Suspense=sX;vt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Mn;vt.__COMPILER_RUNTIME={__proto__:null,c:function(t){return Mn.H.useMemoCache(t)}};vt.cache=function(t){return function(){return t.apply(null,arguments)}};vt.cloneElement=function(t,e,n){if(t==null)throw Error("The argument must be a React element, but you passed "+t+".");var r=yF({},t.props),s=t.key,i=void 0;if(e!=null)for(o in e.ref!==void 0&&(i=void 0),e.key!==void 0&&(s=""+e.key),e)!xF.call(e,o)||o==="key"||o==="__self"||o==="__source"||o==="ref"&&e.ref===void 0||(r[o]=e[o]);var o=arguments.length-2;if(o===1)r.children=n;else if(1<o){for(var a=Array(o),l=0;l<o;l++)a[l]=arguments[l+2];r.children=a}return sS(t.type,s,void 0,void 0,i,r)};vt.createContext=function(t){return t={$$typeof:nX,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider=t,t.Consumer={$$typeof:tX,_context:t},t};vt.createElement=function(t,e,n){var r,s={},i=null;if(e!=null)for(r in e.key!==void 0&&(i=""+e.key),e)xF.call(e,r)&&r!=="key"&&r!=="__self"&&r!=="__source"&&(s[r]=e[r]);var o=arguments.length-2;if(o===1)s.children=n;else if(1<o){for(var a=Array(o),l=0;l<o;l++)a[l]=arguments[l+2];s.children=a}if(t&&t.defaultProps)for(r in o=t.defaultProps,o)s[r]===void 0&&(s[r]=o[r]);return sS(t,i,void 0,void 0,null,s)};vt.createRef=function(){return{current:null}};vt.forwardRef=function(t){return{$$typeof:rX,render:t}};vt.isValidElement=iS;vt.lazy=function(t){return{$$typeof:pF,_payload:{_status:-1,_result:t},_init:uX}};vt.memo=function(t,e){return{$$typeof:iX,type:t,compare:e===void 0?null:e}};vt.startTransition=function(t){var e=Mn.T,n={};Mn.T=n;try{var r=t(),s=Mn.S;s!==null&&s(n,r),typeof r=="object"&&r!==null&&typeof r.then=="function"&&r.then(dX,$R)}catch(i){$R(i)}finally{Mn.T=e}};vt.unstable_useCacheRefresh=function(){return Mn.H.useCacheRefresh()};vt.use=function(t){return Mn.H.use(t)};vt.useActionState=function(t,e,n){return Mn.H.useActionState(t,e,n)};vt.useCallback=function(t,e){return Mn.H.useCallback(t,e)};vt.useContext=function(t){return Mn.H.useContext(t)};vt.useDebugValue=function(){};vt.useDeferredValue=function(t,e){return Mn.H.useDeferredValue(t,e)};vt.useEffect=function(t,e,n){var r=Mn.H;if(typeof n=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return r.useEffect(t,e)};vt.useId=function(){return Mn.H.useId()};vt.useImperativeHandle=function(t,e,n){return Mn.H.useImperativeHandle(t,e,n)};vt.useInsertionEffect=function(t,e){return Mn.H.useInsertionEffect(t,e)};vt.useLayoutEffect=function(t,e){return Mn.H.useLayoutEffect(t,e)};vt.useMemo=function(t,e){return Mn.H.useMemo(t,e)};vt.useOptimistic=function(t,e){return Mn.H.useOptimistic(t,e)};vt.useReducer=function(t,e,n){return Mn.H.useReducer(t,e,n)};vt.useRef=function(t){return Mn.H.useRef(t)};vt.useState=function(t){return Mn.H.useState(t)};vt.useSyncExternalStore=function(t,e,n){return Mn.H.useSyncExternalStore(t,e,n)};vt.useTransition=function(){return Mn.H.useTransition()};vt.version="19.1.0";mF.exports=vt;var A=mF.exports;const d=yx(A);var wF={exports:{}},bx={},EF={exports:{}},kF={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(M,U){var V=M.length;M.push(U);e:for(;0<V;){var ne=V-1>>>1,J=M[ne];if(0<s(J,U))M[ne]=U,M[V]=J,V=ne;else break e}}function n(M){return M.length===0?null:M[0]}function r(M){if(M.length===0)return null;var U=M[0],V=M.pop();if(V!==U){M[0]=V;e:for(var ne=0,J=M.length,G=J>>>1;ne<G;){var X=2*(ne+1)-1,H=M[X],W=X+1,te=M[W];if(0>s(H,V))W<J&&0>s(te,H)?(M[ne]=te,M[W]=V,ne=W):(M[ne]=H,M[X]=V,ne=X);else if(W<J&&0>s(te,V))M[ne]=te,M[W]=V,ne=W;else break e}}return U}function s(M,U){var V=M.sortIndex-U.sortIndex;return V!==0?V:M.id-U.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,h=null,m=3,p=!1,y=!1,v=!1,x=!1,b=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function N(M){for(var U=n(c);U!==null;){if(U.callback===null)r(c);else if(U.startTime<=M)r(c),U.sortIndex=U.expirationTime,e(l,U);else break;U=n(c)}}function C(M){if(v=!1,N(M),!y)if(n(l)!==null)y=!0,S||(S=!0,B());else{var U=n(c);U!==null&&q(C,U.startTime-M)}}var S=!1,T=-1,I=5,P=-1;function R(){return x?!0:!(t.unstable_now()-P<I)}function D(){if(x=!1,S){var M=t.unstable_now();P=M;var U=!0;try{e:{y=!1,v&&(v=!1,w(T),T=-1),p=!0;var V=m;try{t:{for(N(M),h=n(l);h!==null&&!(h.expirationTime>M&&R());){var ne=h.callback;if(typeof ne=="function"){h.callback=null,m=h.priorityLevel;var J=ne(h.expirationTime<=M);if(M=t.unstable_now(),typeof J=="function"){h.callback=J,N(M),U=!0;break t}h===n(l)&&r(l),N(M)}else r(l);h=n(l)}if(h!==null)U=!0;else{var G=n(c);G!==null&&q(C,G.startTime-M),U=!1}}break e}finally{h=null,m=V,p=!1}U=void 0}}finally{U?B():S=!1}}}var B;if(typeof E=="function")B=function(){E(D)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,z=Z.port2;Z.port1.onmessage=D,B=function(){z.postMessage(null)}}else B=function(){b(D,0)};function q(M,U){T=b(function(){M(t.unstable_now())},U)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(M){M.callback=null},t.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<M?Math.floor(1e3/M):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_next=function(M){switch(m){case 1:case 2:case 3:var U=3;break;default:U=m}var V=m;m=U;try{return M()}finally{m=V}},t.unstable_requestPaint=function(){x=!0},t.unstable_runWithPriority=function(M,U){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var V=m;m=M;try{return U()}finally{m=V}},t.unstable_scheduleCallback=function(M,U,V){var ne=t.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?ne+V:ne):V=ne,M){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=V+J,M={id:u++,callback:U,priorityLevel:M,startTime:V,expirationTime:J,sortIndex:-1},V>ne?(M.sortIndex=V,e(c,M),n(l)===null&&M===n(c)&&(v?(w(T),T=-1):v=!0,q(C,V-ne))):(M.sortIndex=J,e(l,M),y||p||(y=!0,S||(S=!0,B()))),M},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(M){var U=m;return function(){var V=m;m=U;try{return M.apply(this,arguments)}finally{m=V}}}})(kF);EF.exports=kF;var hX=EF.exports,NF={exports:{}},qs={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fX=A;function CF(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function ql(){}var Bs={d:{f:ql,r:function(){throw Error(CF(522))},D:ql,C:ql,L:ql,m:ql,X:ql,S:ql,M:ql},p:0,findDOMNode:null},mX=Symbol.for("react.portal");function pX(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:mX,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}var gp=fX.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function vx(t,e){if(t==="font")return"";if(typeof e=="string")return e==="use-credentials"?e:""}qs.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Bs;qs.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)throw Error(CF(299));return pX(t,e,null,n)};qs.flushSync=function(t){var e=gp.T,n=Bs.p;try{if(gp.T=null,Bs.p=2,t)return t()}finally{gp.T=e,Bs.p=n,Bs.d.f()}};qs.preconnect=function(t,e){typeof t=="string"&&(e?(e=e.crossOrigin,e=typeof e=="string"?e==="use-credentials"?e:"":void 0):e=null,Bs.d.C(t,e))};qs.prefetchDNS=function(t){typeof t=="string"&&Bs.d.D(t)};qs.preinit=function(t,e){if(typeof t=="string"&&e&&typeof e.as=="string"){var n=e.as,r=vx(n,e.crossOrigin),s=typeof e.integrity=="string"?e.integrity:void 0,i=typeof e.fetchPriority=="string"?e.fetchPriority:void 0;n==="style"?Bs.d.S(t,typeof e.precedence=="string"?e.precedence:void 0,{crossOrigin:r,integrity:s,fetchPriority:i}):n==="script"&&Bs.d.X(t,{crossOrigin:r,integrity:s,fetchPriority:i,nonce:typeof e.nonce=="string"?e.nonce:void 0})}};qs.preinitModule=function(t,e){if(typeof t=="string")if(typeof e=="object"&&e!==null){if(e.as==null||e.as==="script"){var n=vx(e.as,e.crossOrigin);Bs.d.M(t,{crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0})}}else e==null&&Bs.d.M(t)};qs.preload=function(t,e){if(typeof t=="string"&&typeof e=="object"&&e!==null&&typeof e.as=="string"){var n=e.as,r=vx(n,e.crossOrigin);Bs.d.L(t,n,{crossOrigin:r,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0,type:typeof e.type=="string"?e.type:void 0,fetchPriority:typeof e.fetchPriority=="string"?e.fetchPriority:void 0,referrerPolicy:typeof e.referrerPolicy=="string"?e.referrerPolicy:void 0,imageSrcSet:typeof e.imageSrcSet=="string"?e.imageSrcSet:void 0,imageSizes:typeof e.imageSizes=="string"?e.imageSizes:void 0,media:typeof e.media=="string"?e.media:void 0})}};qs.preloadModule=function(t,e){if(typeof t=="string")if(e){var n=vx(e.as,e.crossOrigin);Bs.d.m(t,{as:typeof e.as=="string"&&e.as!=="script"?e.as:void 0,crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0})}else Bs.d.m(t)};qs.requestFormReset=function(t){Bs.d.r(t)};qs.unstable_batchedUpdates=function(t,e){return t(e)};qs.useFormState=function(t,e,n){return gp.H.useFormState(t,e,n)};qs.useFormStatus=function(){return gp.H.useHostTransitionStatus()};qs.version="19.1.0";function _F(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(_F)}catch(t){console.error(t)}}_F(),NF.exports=qs;var gX=NF.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Or=hX,SF=A,yX=gX;function xe(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function TF(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Mg(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function $F(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function IR(t){if(Mg(t)!==t)throw Error(xe(188))}function bX(t){var e=t.alternate;if(!e){if(e=Mg(t),e===null)throw Error(xe(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return IR(s),t;if(i===r)return IR(s),e;i=i.sibling}throw Error(xe(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(xe(189))}}if(n.alternate!==r)throw Error(xe(190))}if(n.tag!==3)throw Error(xe(188));return n.stateNode.current===n?t:e}function IF(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=IF(t),e!==null)return e;t=t.sibling}return null}var Rn=Object.assign,vX=Symbol.for("react.element"),sb=Symbol.for("react.transitional.element"),ep=Symbol.for("react.portal"),wh=Symbol.for("react.fragment"),AF=Symbol.for("react.strict_mode"),oN=Symbol.for("react.profiler"),xX=Symbol.for("react.provider"),RF=Symbol.for("react.consumer"),hl=Symbol.for("react.context"),oS=Symbol.for("react.forward_ref"),aN=Symbol.for("react.suspense"),lN=Symbol.for("react.suspense_list"),aS=Symbol.for("react.memo"),nc=Symbol.for("react.lazy"),cN=Symbol.for("react.activity"),wX=Symbol.for("react.memo_cache_sentinel"),AR=Symbol.iterator;function Dm(t){return t===null||typeof t!="object"?null:(t=AR&&t[AR]||t["@@iterator"],typeof t=="function"?t:null)}var EX=Symbol.for("react.client.reference");function uN(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===EX?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case wh:return"Fragment";case oN:return"Profiler";case AF:return"StrictMode";case aN:return"Suspense";case lN:return"SuspenseList";case cN:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case ep:return"Portal";case hl:return(t.displayName||"Context")+".Provider";case RF:return(t._context.displayName||"Context")+".Consumer";case oS:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case aS:return e=t.displayName||null,e!==null?e:uN(t.type)||"Memo";case nc:e=t._payload,t=t._init;try{return uN(t(e))}catch{}}return null}var tp=Array.isArray,ot=SF.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,en=yX.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Hu={pending:!1,data:null,method:null,action:null},dN=[],Eh=-1;function Ba(t){return{current:t}}function Kr(t){0>Eh||(t.current=dN[Eh],dN[Eh]=null,Eh--)}function zn(t,e){Eh++,dN[Eh]=t.current,t.current=e}var va=Ba(null),Up=Ba(null),kc=Ba(null),zv=Ba(null);function Fv(t,e){switch(zn(kc,e),zn(Up,t),zn(va,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?LP(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=LP(e),t=Z6(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}Kr(va),zn(va,t)}function of(){Kr(va),Kr(Up),Kr(kc)}function hN(t){t.memoizedState!==null&&zn(zv,t);var e=va.current,n=Z6(e,t.type);e!==n&&(zn(Up,t),zn(va,n))}function Bv(t){Up.current===t&&(Kr(va),Kr(Up)),zv.current===t&&(Kr(zv),Qp._currentValue=Hu)}var fN=Object.prototype.hasOwnProperty,lS=Or.unstable_scheduleCallback,cE=Or.unstable_cancelCallback,kX=Or.unstable_shouldYield,NX=Or.unstable_requestPaint,xa=Or.unstable_now,CX=Or.unstable_getCurrentPriorityLevel,PF=Or.unstable_ImmediatePriority,DF=Or.unstable_UserBlockingPriority,Vv=Or.unstable_NormalPriority,_X=Or.unstable_LowPriority,OF=Or.unstable_IdlePriority,SX=Or.log,TX=Or.unstable_setDisableYieldValue,zg=null,Ti=null;function hc(t){if(typeof SX=="function"&&TX(t),Ti&&typeof Ti.setStrictMode=="function")try{Ti.setStrictMode(zg,t)}catch{}}var $i=Math.clz32?Math.clz32:AX,$X=Math.log,IX=Math.LN2;function AX(t){return t>>>=0,t===0?32:31-($X(t)/IX|0)|0}var ib=256,ob=4194304;function Nu(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function xx(t,e,n){var r=t.pendingLanes;if(r===0)return 0;var s=0,i=t.suspendedLanes,o=t.pingedLanes;t=t.warmLanes;var a=r&134217727;return a!==0?(r=a&~i,r!==0?s=Nu(r):(o&=a,o!==0?s=Nu(o):n||(n=a&~t,n!==0&&(s=Nu(n))))):(a=r&~i,a!==0?s=Nu(a):o!==0?s=Nu(o):n||(n=r&~t,n!==0&&(s=Nu(n)))),s===0?0:e!==0&&e!==s&&!(e&i)&&(i=s&-s,n=e&-e,i>=n||i===32&&(n&4194048)!==0)?e:s}function Fg(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function RX(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function LF(){var t=ib;return ib<<=1,!(ib&4194048)&&(ib=256),t}function MF(){var t=ob;return ob<<=1,!(ob&62914560)&&(ob=4194304),t}function uE(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Bg(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function PX(t,e,n,r,s,i){var o=t.pendingLanes;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=n,t.entangledLanes&=n,t.errorRecoveryDisabledLanes&=n,t.shellSuspendCounter=0;var a=t.entanglements,l=t.expirationTimes,c=t.hiddenUpdates;for(n=o&~n;0<n;){var u=31-$i(n),h=1<<u;a[u]=0,l[u]=-1;var m=c[u];if(m!==null)for(c[u]=null,u=0;u<m.length;u++){var p=m[u];p!==null&&(p.lane&=-536870913)}n&=~h}r!==0&&zF(t,r,0),i!==0&&s===0&&t.tag!==0&&(t.suspendedLanes|=i&~(o&~e))}function zF(t,e,n){t.pendingLanes|=e,t.suspendedLanes&=~e;var r=31-$i(e);t.entangledLanes|=e,t.entanglements[r]=t.entanglements[r]|1073741824|n&4194090}function FF(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-$i(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}function cS(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function uS(t){return t&=-t,2<t?8<t?t&134217727?32:268435456:8:2}function BF(){var t=en.p;return t!==0?t:(t=window.event,t===void 0?32:iB(t.type))}function DX(t,e){var n=en.p;try{return en.p=t,e()}finally{en.p=n}}var Kc=Math.random().toString(36).slice(2),Cs="__reactFiber$"+Kc,ai="__reactProps$"+Kc,Ff="__reactContainer$"+Kc,mN="__reactEvents$"+Kc,OX="__reactListeners$"+Kc,LX="__reactHandles$"+Kc,RR="__reactResources$"+Kc,Vg="__reactMarker$"+Kc;function dS(t){delete t[Cs],delete t[ai],delete t[mN],delete t[OX],delete t[LX]}function kh(t){var e=t[Cs];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ff]||n[Cs]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=FP(t);t!==null;){if(n=t[Cs])return n;t=FP(t)}return e}t=n,n=t.parentNode}return null}function Bf(t){if(t=t[Cs]||t[Ff]){var e=t.tag;if(e===5||e===6||e===13||e===26||e===27||e===3)return t}return null}function np(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(xe(33))}function Bh(t){var e=t[RR];return e||(e=t[RR]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function Hr(t){t[Vg]=!0}var VF=new Set,jF={};function Nd(t,e){af(t,e),af(t+"Capture",e)}function af(t,e){for(jF[t]=e,t=0;t<e.length;t++)VF.add(e[t])}var MX=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),PR={},DR={};function zX(t){return fN.call(DR,t)?!0:fN.call(PR,t)?!1:MX.test(t)?DR[t]=!0:(PR[t]=!0,!1)}function rv(t,e,n){if(zX(e))if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var r=e.toLowerCase().slice(0,5);if(r!=="data-"&&r!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+n)}}function ab(t,e,n){if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+n)}}function Ka(t,e,n,r){if(r===null)t.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttributeNS(e,n,""+r)}}var dE,OR;function hh(t){if(dE===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);dE=e&&e[1]||"",OR=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+dE+t+OR}var hE=!1;function fE(t,e){if(!t||hE)return"";hE=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(e){var h=function(){throw Error()};if(Object.defineProperty(h.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(h,[])}catch(p){var m=p}Reflect.construct(t,[],h)}else{try{h.call()}catch(p){m=p}t.call(h.prototype)}}else{try{throw Error()}catch(p){m=p}(h=t())&&typeof h.catch=="function"&&h.catch(function(){})}}catch(p){if(p&&m&&typeof p.stack=="string")return[p.stack,m.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var s=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");s&&s.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var i=r.DetermineComponentFrameRoot(),o=i[0],a=i[1];if(o&&a){var l=o.split(`
`),c=a.split(`
`);for(s=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;s<c.length&&!c[s].includes("DetermineComponentFrameRoot");)s++;if(r===l.length||s===c.length)for(r=l.length-1,s=c.length-1;1<=r&&0<=s&&l[r]!==c[s];)s--;for(;1<=r&&0<=s;r--,s--)if(l[r]!==c[s]){if(r!==1||s!==1)do if(r--,s--,0>s||l[r]!==c[s]){var u=`
`+l[r].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=r&&0<=s);break}}}finally{hE=!1,Error.prepareStackTrace=n}return(n=t?t.displayName||t.name:"")?hh(n):""}function FX(t){switch(t.tag){case 26:case 27:case 5:return hh(t.type);case 16:return hh("Lazy");case 13:return hh("Suspense");case 19:return hh("SuspenseList");case 0:case 15:return fE(t.type,!1);case 11:return fE(t.type.render,!1);case 1:return fE(t.type,!0);case 31:return hh("Activity");default:return""}}function LR(t){try{var e="";do e+=FX(t),t=t.return;while(t);return e}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function Qi(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function UF(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function BX(t){var e=UF(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function jv(t){t._valueTracker||(t._valueTracker=BX(t))}function HF(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=UF(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Uv(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var VX=/[\n"\\]/g;function no(t){return t.replace(VX,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function pN(t,e,n,r,s,i,o,a){t.name="",o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"?t.type=o:t.removeAttribute("type"),e!=null?o==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+Qi(e)):t.value!==""+Qi(e)&&(t.value=""+Qi(e)):o!=="submit"&&o!=="reset"||t.removeAttribute("value"),e!=null?gN(t,o,Qi(e)):n!=null?gN(t,o,Qi(n)):r!=null&&t.removeAttribute("value"),s==null&&i!=null&&(t.defaultChecked=!!i),s!=null&&(t.checked=s&&typeof s!="function"&&typeof s!="symbol"),a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"?t.name=""+Qi(a):t.removeAttribute("name")}function GF(t,e,n,r,s,i,o,a){if(i!=null&&typeof i!="function"&&typeof i!="symbol"&&typeof i!="boolean"&&(t.type=i),e!=null||n!=null){if(!(i!=="submit"&&i!=="reset"||e!=null))return;n=n!=null?""+Qi(n):"",e=e!=null?""+Qi(e):n,a||e===t.value||(t.value=e),t.defaultValue=e}r=r??s,r=typeof r!="function"&&typeof r!="symbol"&&!!r,t.checked=a?t.checked:!!r,t.defaultChecked=!!r,o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"&&(t.name=o)}function gN(t,e,n){e==="number"&&Uv(t.ownerDocument)===t||t.defaultValue===""+n||(t.defaultValue=""+n)}function Vh(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Qi(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function WF(t,e,n){if(e!=null&&(e=""+Qi(e),e!==t.value&&(t.value=e),n==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=n!=null?""+Qi(n):""}function qF(t,e,n,r){if(e==null){if(r!=null){if(n!=null)throw Error(xe(92));if(tp(r)){if(1<r.length)throw Error(xe(93));r=r[0]}n=r}n==null&&(n=""),e=n}n=Qi(e),t.defaultValue=n,r=t.textContent,r===n&&r!==""&&r!==null&&(t.value=r)}function lf(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var jX=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function MR(t,e,n){var r=e.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?r?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":r?t.setProperty(e,n):typeof n!="number"||n===0||jX.has(e)?e==="float"?t.cssFloat=n:t[e]=(""+n).trim():t[e]=n+"px"}function KF(t,e,n){if(e!=null&&typeof e!="object")throw Error(xe(62));if(t=t.style,n!=null){for(var r in n)!n.hasOwnProperty(r)||e!=null&&e.hasOwnProperty(r)||(r.indexOf("--")===0?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="");for(var s in e)r=e[s],e.hasOwnProperty(s)&&n[s]!==r&&MR(t,s,r)}else for(var i in e)e.hasOwnProperty(i)&&MR(t,i,e[i])}function hS(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var UX=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),HX=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function sv(t){return HX.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var yN=null;function fS(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Nh=null,jh=null;function zR(t){var e=Bf(t);if(e&&(t=e.stateNode)){var n=t[ai]||null;e:switch(t=e.stateNode,e.type){case"input":if(pN(t,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+no(""+e)+'"][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=r[ai]||null;if(!s)throw Error(xe(90));pN(r,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name)}}for(e=0;e<n.length;e++)r=n[e],r.form===t.form&&HF(r)}break e;case"textarea":WF(t,n.value,n.defaultValue);break e;case"select":e=n.value,e!=null&&Vh(t,!!n.multiple,e,!1)}}}var mE=!1;function ZF(t,e,n){if(mE)return t(e,n);mE=!0;try{var r=t(e);return r}finally{if(mE=!1,(Nh!==null||jh!==null)&&(Ix(),Nh&&(e=Nh,t=jh,jh=Nh=null,zR(e),t)))for(e=0;e<t.length;e++)zR(t[e])}}function Hp(t,e){var n=t.stateNode;if(n===null)return null;var r=n[ai]||null;if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(xe(231,e,typeof n));return n}var Nl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),bN=!1;if(Nl)try{var Om={};Object.defineProperty(Om,"passive",{get:function(){bN=!0}}),window.addEventListener("test",Om,Om),window.removeEventListener("test",Om,Om)}catch{bN=!1}var fc=null,mS=null,iv=null;function XF(){if(iv)return iv;var t,e=mS,n=e.length,r,s="value"in fc?fc.value:fc.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return iv=s.slice(t,1<r?1-r:void 0)}function ov(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function lb(){return!0}function FR(){return!1}function hi(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?lb:FR,this.isPropagationStopped=FR,this}return Rn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=lb)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=lb)},persist:function(){},isPersistent:lb}),e}var Cd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wx=hi(Cd),jg=Rn({},Cd,{view:0,detail:0}),GX=hi(jg),pE,gE,Lm,Ex=Rn({},jg,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pS,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Lm&&(Lm&&t.type==="mousemove"?(pE=t.screenX-Lm.screenX,gE=t.screenY-Lm.screenY):gE=pE=0,Lm=t),pE)},movementY:function(t){return"movementY"in t?t.movementY:gE}}),BR=hi(Ex),WX=Rn({},Ex,{dataTransfer:0}),qX=hi(WX),KX=Rn({},jg,{relatedTarget:0}),yE=hi(KX),ZX=Rn({},Cd,{animationName:0,elapsedTime:0,pseudoElement:0}),XX=hi(ZX),YX=Rn({},Cd,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),JX=hi(YX),QX=Rn({},Cd,{data:0}),VR=hi(QX),eY={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tY={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nY={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rY(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=nY[t])?!!e[t]:!1}function pS(){return rY}var sY=Rn({},jg,{key:function(t){if(t.key){var e=eY[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ov(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?tY[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pS,charCode:function(t){return t.type==="keypress"?ov(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ov(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),iY=hi(sY),oY=Rn({},Ex,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),jR=hi(oY),aY=Rn({},jg,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pS}),lY=hi(aY),cY=Rn({},Cd,{propertyName:0,elapsedTime:0,pseudoElement:0}),uY=hi(cY),dY=Rn({},Ex,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),hY=hi(dY),fY=Rn({},Cd,{newState:0,oldState:0}),mY=hi(fY),pY=[9,13,27,32],gS=Nl&&"CompositionEvent"in window,yp=null;Nl&&"documentMode"in document&&(yp=document.documentMode);var gY=Nl&&"TextEvent"in window&&!yp,YF=Nl&&(!gS||yp&&8<yp&&11>=yp),UR=String.fromCharCode(32),HR=!1;function JF(t,e){switch(t){case"keyup":return pY.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function QF(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ch=!1;function yY(t,e){switch(t){case"compositionend":return QF(e);case"keypress":return e.which!==32?null:(HR=!0,UR);case"textInput":return t=e.data,t===UR&&HR?null:t;default:return null}}function bY(t,e){if(Ch)return t==="compositionend"||!gS&&JF(t,e)?(t=XF(),iv=mS=fc=null,Ch=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return YF&&e.locale!=="ko"?null:e.data;default:return null}}var vY={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function GR(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!vY[t.type]:e==="textarea"}function e5(t,e,n,r){Nh?jh?jh.push(r):jh=[r]:Nh=r,e=a1(e,"onChange"),0<e.length&&(n=new wx("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var bp=null,Gp=null;function xY(t){W6(t,0)}function kx(t){var e=np(t);if(HF(e))return t}function WR(t,e){if(t==="change")return e}var t5=!1;if(Nl){var bE;if(Nl){var vE="oninput"in document;if(!vE){var qR=document.createElement("div");qR.setAttribute("oninput","return;"),vE=typeof qR.oninput=="function"}bE=vE}else bE=!1;t5=bE&&(!document.documentMode||9<document.documentMode)}function KR(){bp&&(bp.detachEvent("onpropertychange",n5),Gp=bp=null)}function n5(t){if(t.propertyName==="value"&&kx(Gp)){var e=[];e5(e,Gp,t,fS(t)),ZF(xY,e)}}function wY(t,e,n){t==="focusin"?(KR(),bp=e,Gp=n,bp.attachEvent("onpropertychange",n5)):t==="focusout"&&KR()}function EY(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return kx(Gp)}function kY(t,e){if(t==="click")return kx(e)}function NY(t,e){if(t==="input"||t==="change")return kx(e)}function CY(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Pi=typeof Object.is=="function"?Object.is:CY;function Wp(t,e){if(Pi(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!fN.call(e,s)||!Pi(t[s],e[s]))return!1}return!0}function ZR(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function XR(t,e){var n=ZR(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ZR(n)}}function r5(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?r5(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function s5(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=Uv(t.document);e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Uv(t.document)}return e}function yS(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var _Y=Nl&&"documentMode"in document&&11>=document.documentMode,_h=null,vN=null,vp=null,xN=!1;function YR(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;xN||_h==null||_h!==Uv(r)||(r=_h,"selectionStart"in r&&yS(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),vp&&Wp(vp,r)||(vp=r,r=a1(vN,"onSelect"),0<r.length&&(e=new wx("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=_h)))}function gu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Sh={animationend:gu("Animation","AnimationEnd"),animationiteration:gu("Animation","AnimationIteration"),animationstart:gu("Animation","AnimationStart"),transitionrun:gu("Transition","TransitionRun"),transitionstart:gu("Transition","TransitionStart"),transitioncancel:gu("Transition","TransitionCancel"),transitionend:gu("Transition","TransitionEnd")},xE={},i5={};Nl&&(i5=document.createElement("div").style,"AnimationEvent"in window||(delete Sh.animationend.animation,delete Sh.animationiteration.animation,delete Sh.animationstart.animation),"TransitionEvent"in window||delete Sh.transitionend.transition);function _d(t){if(xE[t])return xE[t];if(!Sh[t])return t;var e=Sh[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in i5)return xE[t]=e[n];return t}var o5=_d("animationend"),a5=_d("animationiteration"),l5=_d("animationstart"),SY=_d("transitionrun"),TY=_d("transitionstart"),$Y=_d("transitioncancel"),c5=_d("transitionend"),u5=new Map,wN="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");wN.push("scrollEnd");function Yo(t,e){u5.set(t,e),Nd(e,[t])}var JR=new WeakMap;function ro(t,e){if(typeof t=="object"&&t!==null){var n=JR.get(t);return n!==void 0?n:(e={value:t,source:e,stack:LR(e)},JR.set(t,e),e)}return{value:t,source:e,stack:LR(e)}}var Ji=[],Th=0,bS=0;function Nx(){for(var t=Th,e=bS=Th=0;e<t;){var n=Ji[e];Ji[e++]=null;var r=Ji[e];Ji[e++]=null;var s=Ji[e];Ji[e++]=null;var i=Ji[e];if(Ji[e++]=null,r!==null&&s!==null){var o=r.pending;o===null?s.next=s:(s.next=o.next,o.next=s),r.pending=s}i!==0&&d5(n,s,i)}}function Cx(t,e,n,r){Ji[Th++]=t,Ji[Th++]=e,Ji[Th++]=n,Ji[Th++]=r,bS|=r,t.lanes|=r,t=t.alternate,t!==null&&(t.lanes|=r)}function vS(t,e,n,r){return Cx(t,e,n,r),Hv(t)}function Vf(t,e){return Cx(t,null,null,e),Hv(t)}function d5(t,e,n){t.lanes|=n;var r=t.alternate;r!==null&&(r.lanes|=n);for(var s=!1,i=t.return;i!==null;)i.childLanes|=n,r=i.alternate,r!==null&&(r.childLanes|=n),i.tag===22&&(t=i.stateNode,t===null||t._visibility&1||(s=!0)),t=i,i=i.return;return t.tag===3?(i=t.stateNode,s&&e!==null&&(s=31-$i(n),t=i.hiddenUpdates,r=t[s],r===null?t[s]=[e]:r.push(e),e.lane=n|536870912),i):null}function Hv(t){if(50<$p)throw $p=0,jN=null,Error(xe(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var $h={};function IY(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ki(t,e,n,r){return new IY(t,e,n,r)}function xS(t){return t=t.prototype,!(!t||!t.isReactComponent)}function xl(t,e){var n=t.alternate;return n===null?(n=ki(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&65011712,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n.refCleanup=t.refCleanup,n}function h5(t,e){t.flags&=65011714;var n=t.alternate;return n===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,t.type=n.type,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function av(t,e,n,r,s,i){var o=0;if(r=t,typeof t=="function")xS(t)&&(o=1);else if(typeof t=="string")o=RJ(t,n,va.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case cN:return t=ki(31,n,e,s),t.elementType=cN,t.lanes=i,t;case wh:return Gu(n.children,s,i,e);case AF:o=8,s|=24;break;case oN:return t=ki(12,n,e,s|2),t.elementType=oN,t.lanes=i,t;case aN:return t=ki(13,n,e,s),t.elementType=aN,t.lanes=i,t;case lN:return t=ki(19,n,e,s),t.elementType=lN,t.lanes=i,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case xX:case hl:o=10;break e;case RF:o=9;break e;case oS:o=11;break e;case aS:o=14;break e;case nc:o=16,r=null;break e}o=29,n=Error(xe(130,t===null?"null":typeof t,"")),r=null}return e=ki(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Gu(t,e,n,r){return t=ki(7,t,r,e),t.lanes=n,t}function wE(t,e,n){return t=ki(6,t,null,e),t.lanes=n,t}function EE(t,e,n){return e=ki(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var Ih=[],Ah=0,Gv=null,Wv=0,eo=[],to=0,Wu=null,fl=1,ml="";function Cu(t,e){Ih[Ah++]=Wv,Ih[Ah++]=Gv,Gv=t,Wv=e}function f5(t,e,n){eo[to++]=fl,eo[to++]=ml,eo[to++]=Wu,Wu=t;var r=fl;t=ml;var s=32-$i(r)-1;r&=~(1<<s),n+=1;var i=32-$i(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,fl=1<<32-$i(e)+s|n<<s|r,ml=i+t}else fl=1<<i|n<<s|r,ml=t}function wS(t){t.return!==null&&(Cu(t,1),f5(t,1,0))}function ES(t){for(;t===Gv;)Gv=Ih[--Ah],Ih[Ah]=null,Wv=Ih[--Ah],Ih[Ah]=null;for(;t===Wu;)Wu=eo[--to],eo[to]=null,ml=eo[--to],eo[to]=null,fl=eo[--to],eo[to]=null}var Fs=null,Zn=null,Qt=!1,qu=null,ga=!1,EN=Error(xe(519));function nd(t){var e=Error(xe(418,""));throw qp(ro(e,t)),EN}function QR(t){var e=t.stateNode,n=t.type,r=t.memoizedProps;switch(e[Cs]=t,e[ai]=r,n){case"dialog":Rt("cancel",e),Rt("close",e);break;case"iframe":case"object":case"embed":Rt("load",e);break;case"video":case"audio":for(n=0;n<Xp.length;n++)Rt(Xp[n],e);break;case"source":Rt("error",e);break;case"img":case"image":case"link":Rt("error",e),Rt("load",e);break;case"details":Rt("toggle",e);break;case"input":Rt("invalid",e),GF(e,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),jv(e);break;case"select":Rt("invalid",e);break;case"textarea":Rt("invalid",e),qF(e,r.value,r.defaultValue,r.children),jv(e)}n=r.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||e.textContent===""+n||r.suppressHydrationWarning===!0||K6(e.textContent,n)?(r.popover!=null&&(Rt("beforetoggle",e),Rt("toggle",e)),r.onScroll!=null&&Rt("scroll",e),r.onScrollEnd!=null&&Rt("scrollend",e),r.onClick!=null&&(e.onclick=Px),e=!0):e=!1,e||nd(t)}function eP(t){for(Fs=t.return;Fs;)switch(Fs.tag){case 5:case 13:ga=!1;return;case 27:case 3:ga=!0;return;default:Fs=Fs.return}}function Mm(t){if(t!==Fs)return!1;if(!Qt)return eP(t),Qt=!0,!1;var e=t.tag,n;if((n=e!==3&&e!==27)&&((n=e===5)&&(n=t.type,n=!(n!=="form"&&n!=="button")||KN(t.type,t.memoizedProps)),n=!n),n&&Zn&&nd(t),eP(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(xe(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8)if(n=t.data,n==="/$"){if(e===0){Zn=Bo(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++;t=t.nextSibling}Zn=null}}else e===27?(e=Zn,Zc(t.type)?(t=YN,YN=null,Zn=t):Zn=e):Zn=Fs?Bo(t.stateNode.nextSibling):null;return!0}function Ug(){Zn=Fs=null,Qt=!1}function tP(){var t=qu;return t!==null&&(ei===null?ei=t:ei.push.apply(ei,t),qu=null),t}function qp(t){qu===null?qu=[t]:qu.push(t)}var kN=Ba(null),Sd=null,pl=null;function ic(t,e,n){zn(kN,e._currentValue),e._currentValue=n}function wl(t){t._currentValue=kN.current,Kr(kN)}function NN(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function CN(t,e,n,r){var s=t.child;for(s!==null&&(s.return=t);s!==null;){var i=s.dependencies;if(i!==null){var o=s.child;i=i.firstContext;e:for(;i!==null;){var a=i;i=s;for(var l=0;l<e.length;l++)if(a.context===e[l]){i.lanes|=n,a=i.alternate,a!==null&&(a.lanes|=n),NN(i.return,n,t),r||(o=null);break e}i=a.next}}else if(s.tag===18){if(o=s.return,o===null)throw Error(xe(341));o.lanes|=n,i=o.alternate,i!==null&&(i.lanes|=n),NN(o,n,t),o=null}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}}function Hg(t,e,n,r){t=null;for(var s=e,i=!1;s!==null;){if(!i){if(s.flags&524288)i=!0;else if(s.flags&262144)break}if(s.tag===10){var o=s.alternate;if(o===null)throw Error(xe(387));if(o=o.memoizedProps,o!==null){var a=s.type;Pi(s.pendingProps.value,o.value)||(t!==null?t.push(a):t=[a])}}else if(s===zv.current){if(o=s.alternate,o===null)throw Error(xe(387));o.memoizedState.memoizedState!==s.memoizedState.memoizedState&&(t!==null?t.push(Qp):t=[Qp])}s=s.return}t!==null&&CN(e,t,n,r),e.flags|=262144}function qv(t){for(t=t.firstContext;t!==null;){if(!Pi(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function rd(t){Sd=t,pl=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function _s(t){return m5(Sd,t)}function cb(t,e){return Sd===null&&rd(t),m5(t,e)}function m5(t,e){var n=e._currentValue;if(e={context:e,memoizedValue:n,next:null},pl===null){if(t===null)throw Error(xe(308));pl=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else pl=pl.next=e;return n}var AY=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(n,r){t.push(r)}};this.abort=function(){e.aborted=!0,t.forEach(function(n){return n()})}},RY=Or.unstable_scheduleCallback,PY=Or.unstable_NormalPriority,Ir={$$typeof:hl,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function kS(){return{controller:new AY,data:new Map,refCount:0}}function Gg(t){t.refCount--,t.refCount===0&&RY(PY,function(){t.controller.abort()})}var xp=null,_N=0,cf=0,Uh=null;function DY(t,e){if(xp===null){var n=xp=[];_N=0,cf=WS(),Uh={status:"pending",value:void 0,then:function(r){n.push(r)}}}return _N++,e.then(nP,nP),e}function nP(){if(--_N===0&&xp!==null){Uh!==null&&(Uh.status="fulfilled");var t=xp;xp=null,cf=0,Uh=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function OY(t,e){var n=[],r={status:"pending",value:null,reason:null,then:function(s){n.push(s)}};return t.then(function(){r.status="fulfilled",r.value=e;for(var s=0;s<n.length;s++)(0,n[s])(e)},function(s){for(r.status="rejected",r.reason=s,s=0;s<n.length;s++)(0,n[s])(void 0)}),r}var rP=ot.S;ot.S=function(t,e){typeof e=="object"&&e!==null&&typeof e.then=="function"&&DY(t,e),rP!==null&&rP(t,e)};var Ku=Ba(null);function NS(){var t=Ku.current;return t!==null?t:Cn.pooledCache}function lv(t,e){e===null?zn(Ku,Ku.current):zn(Ku,e.pool)}function p5(){var t=NS();return t===null?null:{parent:Ir._currentValue,pool:t}}var Wg=Error(xe(460)),g5=Error(xe(474)),_x=Error(xe(542)),SN={then:function(){}};function sP(t){return t=t.status,t==="fulfilled"||t==="rejected"}function ub(){}function y5(t,e,n){switch(n=t[n],n===void 0?t.push(e):n!==e&&(e.then(ub,ub),e=n),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,oP(t),t;default:if(typeof e.status=="string")e.then(ub,ub);else{if(t=Cn,t!==null&&100<t.shellSuspendCounter)throw Error(xe(482));t=e,t.status="pending",t.then(function(r){if(e.status==="pending"){var s=e;s.status="fulfilled",s.value=r}},function(r){if(e.status==="pending"){var s=e;s.status="rejected",s.reason=r}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,oP(t),t}throw wp=e,Wg}}var wp=null;function iP(){if(wp===null)throw Error(xe(459));var t=wp;return wp=null,t}function oP(t){if(t===Wg||t===_x)throw Error(xe(483))}var rc=!1;function CS(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function TN(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Nc(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Cc(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ln&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,e=Hv(t),d5(t,null,n),e}return Cx(t,r,e,n),Hv(t)}function Ep(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194048)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,FF(t,n)}}function kE(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,callbacks:r.callbacks},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}var $N=!1;function kp(){if($N){var t=Uh;if(t!==null)throw t}}function Np(t,e,n,r){$N=!1;var s=t.updateQueue;rc=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(i!==null){var h=s.baseState;o=0,u=c=l=null,a=i;do{var m=a.lane&-536870913,p=m!==a.lane;if(p?(Vt&m)===m:(r&m)===m){m!==0&&m===cf&&($N=!0),u!==null&&(u=u.next={lane:0,tag:a.tag,payload:a.payload,callback:null,next:null});e:{var y=t,v=a;m=e;var x=n;switch(v.tag){case 1:if(y=v.payload,typeof y=="function"){h=y.call(x,h,m);break e}h=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=v.payload,m=typeof y=="function"?y.call(x,h,m):y,m==null)break e;h=Rn({},h,m);break e;case 2:rc=!0}}m=a.callback,m!==null&&(t.flags|=64,p&&(t.flags|=8192),p=s.callbacks,p===null?s.callbacks=[m]:p.push(m))}else p={lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=p,l=h):u=u.next=p,o|=m;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;p=a,a=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(1);u===null&&(l=h),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,i===null&&(s.shared.lanes=0),Fc|=o,t.lanes=o,t.memoizedState=h}}function b5(t,e){if(typeof t!="function")throw Error(xe(191,t));t.call(e)}function v5(t,e){var n=t.callbacks;if(n!==null)for(t.callbacks=null,t=0;t<n.length;t++)b5(n[t],e)}var uf=Ba(null),Kv=Ba(0);function aP(t,e){t=Sl,zn(Kv,t),zn(uf,e),Sl=t|e.baseLanes}function IN(){zn(Kv,Sl),zn(uf,uf.current)}function _S(){Sl=Kv.current,Kr(uf),Kr(Kv)}var Mc=0,Ct=null,fn=null,pr=null,Zv=!1,Hh=!1,sd=!1,Xv=0,Kp=0,Gh=null,LY=0;function ir(){throw Error(xe(321))}function SS(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Pi(t[n],e[n]))return!1;return!0}function TS(t,e,n,r,s,i){return Mc=i,Ct=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ot.H=t===null||t.memoizedState===null?X5:Y5,sd=!1,i=n(r,s),sd=!1,Hh&&(i=w5(e,n,r,s)),x5(t),i}function x5(t){ot.H=Yv;var e=fn!==null&&fn.next!==null;if(Mc=0,pr=fn=Ct=null,Zv=!1,Kp=0,Gh=null,e)throw Error(xe(300));t===null||qr||(t=t.dependencies,t!==null&&qv(t)&&(qr=!0))}function w5(t,e,n,r){Ct=t;var s=0;do{if(Hh&&(Gh=null),Kp=0,Hh=!1,25<=s)throw Error(xe(301));if(s+=1,pr=fn=null,t.updateQueue!=null){var i=t.updateQueue;i.lastEffect=null,i.events=null,i.stores=null,i.memoCache!=null&&(i.memoCache.index=0)}ot.H=UY,i=e(n,r)}while(Hh);return i}function MY(){var t=ot.H,e=t.useState()[0];return e=typeof e.then=="function"?qg(e):e,t=t.useState()[0],(fn!==null?fn.memoizedState:null)!==t&&(Ct.flags|=1024),e}function $S(){var t=Xv!==0;return Xv=0,t}function IS(t,e,n){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n}function AS(t){if(Zv){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}Zv=!1}Mc=0,pr=fn=Ct=null,Hh=!1,Kp=Xv=0,Gh=null}function Js(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pr===null?Ct.memoizedState=pr=t:pr=pr.next=t,pr}function Er(){if(fn===null){var t=Ct.alternate;t=t!==null?t.memoizedState:null}else t=fn.next;var e=pr===null?Ct.memoizedState:pr.next;if(e!==null)pr=e,fn=t;else{if(t===null)throw Ct.alternate===null?Error(xe(467)):Error(xe(310));fn=t,t={memoizedState:fn.memoizedState,baseState:fn.baseState,baseQueue:fn.baseQueue,queue:fn.queue,next:null},pr===null?Ct.memoizedState=pr=t:pr=pr.next=t}return pr}function RS(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function qg(t){var e=Kp;return Kp+=1,Gh===null&&(Gh=[]),t=y5(Gh,t,e),e=Ct,(pr===null?e.memoizedState:pr.next)===null&&(e=e.alternate,ot.H=e===null||e.memoizedState===null?X5:Y5),t}function Sx(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return qg(t);if(t.$$typeof===hl)return _s(t)}throw Error(xe(438,String(t)))}function PS(t){var e=null,n=Ct.updateQueue;if(n!==null&&(e=n.memoCache),e==null){var r=Ct.alternate;r!==null&&(r=r.updateQueue,r!==null&&(r=r.memoCache,r!=null&&(e={data:r.data.map(function(s){return s.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),n===null&&(n=RS(),Ct.updateQueue=n),n.memoCache=e,n=e.data[e.index],n===void 0)for(n=e.data[e.index]=Array(t),r=0;r<t;r++)n[r]=wX;return e.index++,n}function Cl(t,e){return typeof e=="function"?e(t):e}function cv(t){var e=Er();return DS(e,fn,t)}function DS(t,e,n){var r=t.queue;if(r===null)throw Error(xe(311));r.lastRenderedReducer=n;var s=t.baseQueue,i=r.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}e.baseQueue=s=i,r.pending=null}if(i=t.baseState,s===null)t.memoizedState=i;else{e=s.next;var a=o=null,l=null,c=e,u=!1;do{var h=c.lane&-536870913;if(h!==c.lane?(Vt&h)===h:(Mc&h)===h){var m=c.revertLane;if(m===0)l!==null&&(l=l.next={lane:0,revertLane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),h===cf&&(u=!0);else if((Mc&m)===m){c=c.next,m===cf&&(u=!0);continue}else h={lane:0,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},l===null?(a=l=h,o=i):l=l.next=h,Ct.lanes|=m,Fc|=m;h=c.action,sd&&n(i,h),i=c.hasEagerState?c.eagerState:n(i,h)}else m={lane:h,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},l===null?(a=l=m,o=i):l=l.next=m,Ct.lanes|=h,Fc|=h;c=c.next}while(c!==null&&c!==e);if(l===null?o=i:l.next=a,!Pi(i,t.memoizedState)&&(qr=!0,u&&(n=Uh,n!==null)))throw n;t.memoizedState=i,t.baseState=o,t.baseQueue=l,r.lastRenderedState=i}return s===null&&(r.lanes=0),[t.memoizedState,r.dispatch]}function NE(t){var e=Er(),n=e.queue;if(n===null)throw Error(xe(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Pi(i,e.memoizedState)||(qr=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function E5(t,e,n){var r=Ct,s=Er(),i=Qt;if(i){if(n===void 0)throw Error(xe(407));n=n()}else n=e();var o=!Pi((fn||s).memoizedState,n);o&&(s.memoizedState=n,qr=!0),s=s.queue;var a=C5.bind(null,r,s,t);if(Kg(2048,8,a,[t]),s.getSnapshot!==e||o||pr!==null&&pr.memoizedState.tag&1){if(r.flags|=2048,df(9,Tx(),N5.bind(null,r,s,n,e),null),Cn===null)throw Error(xe(349));i||Mc&124||k5(r,e,n)}return n}function k5(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ct.updateQueue,e===null?(e=RS(),Ct.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function N5(t,e,n,r){e.value=n,e.getSnapshot=r,_5(e)&&S5(t)}function C5(t,e,n){return n(function(){_5(e)&&S5(t)})}function _5(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Pi(t,n)}catch{return!0}}function S5(t){var e=Vf(t,2);e!==null&&Ai(e,t,2)}function AN(t){var e=Js();if(typeof t=="function"){var n=t;if(t=n(),sd){hc(!0);try{n()}finally{hc(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cl,lastRenderedState:t},e}function T5(t,e,n,r){return t.baseState=n,DS(t,fn,typeof r=="function"?r:Cl)}function zY(t,e,n,r,s){if($x(t))throw Error(xe(485));if(t=e.action,t!==null){var i={payload:s,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(o){i.listeners.push(o)}};ot.T!==null?n(!0):i.isTransition=!1,r(i),n=e.pending,n===null?(i.next=e.pending=i,$5(e,i)):(i.next=n.next,e.pending=n.next=i)}}function $5(t,e){var n=e.action,r=e.payload,s=t.state;if(e.isTransition){var i=ot.T,o={};ot.T=o;try{var a=n(s,r),l=ot.S;l!==null&&l(o,a),lP(t,e,a)}catch(c){RN(t,e,c)}finally{ot.T=i}}else try{i=n(s,r),lP(t,e,i)}catch(c){RN(t,e,c)}}function lP(t,e,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(r){cP(t,e,r)},function(r){return RN(t,e,r)}):cP(t,e,n)}function cP(t,e,n){e.status="fulfilled",e.value=n,I5(e),t.state=n,e=t.pending,e!==null&&(n=e.next,n===e?t.pending=null:(n=n.next,e.next=n,$5(t,n)))}function RN(t,e,n){var r=t.pending;if(t.pending=null,r!==null){r=r.next;do e.status="rejected",e.reason=n,I5(e),e=e.next;while(e!==r)}t.action=null}function I5(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function A5(t,e){return e}function uP(t,e){if(Qt){var n=Cn.formState;if(n!==null){e:{var r=Ct;if(Qt){if(Zn){t:{for(var s=Zn,i=ga;s.nodeType!==8;){if(!i){s=null;break t}if(s=Bo(s.nextSibling),s===null){s=null;break t}}i=s.data,s=i==="F!"||i==="F"?s:null}if(s){Zn=Bo(s.nextSibling),r=s.data==="F!";break e}}nd(r)}r=!1}r&&(e=n[0])}}return n=Js(),n.memoizedState=n.baseState=e,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:A5,lastRenderedState:e},n.queue=r,n=q5.bind(null,Ct,r),r.dispatch=n,r=AN(!1),i=zS.bind(null,Ct,!1,r.queue),r=Js(),s={state:e,dispatch:null,action:t,pending:null},r.queue=s,n=zY.bind(null,Ct,s,i,n),s.dispatch=n,r.memoizedState=t,[e,n,!1]}function dP(t){var e=Er();return R5(e,fn,t)}function R5(t,e,n){if(e=DS(t,e,A5)[0],t=cv(Cl)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var r=qg(e)}catch(o){throw o===Wg?_x:o}else r=e;e=Er();var s=e.queue,i=s.dispatch;return n!==e.memoizedState&&(Ct.flags|=2048,df(9,Tx(),FY.bind(null,s,n),null)),[r,i,t]}function FY(t,e){t.action=e}function hP(t){var e=Er(),n=fn;if(n!==null)return R5(e,n,t);Er(),e=e.memoizedState,n=Er();var r=n.queue.dispatch;return n.memoizedState=t,[e,r,!1]}function df(t,e,n,r){return t={tag:t,create:n,deps:r,inst:e,next:null},e=Ct.updateQueue,e===null&&(e=RS(),Ct.updateQueue=e),n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t),t}function Tx(){return{destroy:void 0,resource:void 0}}function P5(){return Er().memoizedState}function uv(t,e,n,r){var s=Js();r=r===void 0?null:r,Ct.flags|=t,s.memoizedState=df(1|e,Tx(),n,r)}function Kg(t,e,n,r){var s=Er();r=r===void 0?null:r;var i=s.memoizedState.inst;fn!==null&&r!==null&&SS(r,fn.memoizedState.deps)?s.memoizedState=df(e,i,n,r):(Ct.flags|=t,s.memoizedState=df(1|e,i,n,r))}function fP(t,e){uv(8390656,8,t,e)}function D5(t,e){Kg(2048,8,t,e)}function O5(t,e){return Kg(4,2,t,e)}function L5(t,e){return Kg(4,4,t,e)}function M5(t,e){if(typeof e=="function"){t=t();var n=e(t);return function(){typeof n=="function"?n():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function z5(t,e,n){n=n!=null?n.concat([t]):null,Kg(4,4,M5.bind(null,e,t),n)}function OS(){}function F5(t,e){var n=Er();e=e===void 0?null:e;var r=n.memoizedState;return e!==null&&SS(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function B5(t,e){var n=Er();e=e===void 0?null:e;var r=n.memoizedState;if(e!==null&&SS(e,r[1]))return r[0];if(r=t(),sd){hc(!0);try{t()}finally{hc(!1)}}return n.memoizedState=[r,e],r}function LS(t,e,n){return n===void 0||Mc&1073741824?t.memoizedState=e:(t.memoizedState=n,t=I6(),Ct.lanes|=t,Fc|=t,n)}function V5(t,e,n,r){return Pi(n,e)?n:uf.current!==null?(t=LS(t,n,r),Pi(t,e)||(qr=!0),t):Mc&42?(t=I6(),Ct.lanes|=t,Fc|=t,e):(qr=!0,t.memoizedState=n)}function j5(t,e,n,r,s){var i=en.p;en.p=i!==0&&8>i?i:8;var o=ot.T,a={};ot.T=a,zS(t,!1,e,n);try{var l=s(),c=ot.S;if(c!==null&&c(a,l),l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=OY(l,r);Cp(t,e,u,Ii(t))}else Cp(t,e,r,Ii(t))}catch(h){Cp(t,e,{then:function(){},status:"rejected",reason:h},Ii())}finally{en.p=i,ot.T=o}}function BY(){}function PN(t,e,n,r){if(t.tag!==5)throw Error(xe(476));var s=U5(t).queue;j5(t,s,e,Hu,n===null?BY:function(){return H5(t),n(r)})}function U5(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:Hu,baseState:Hu,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cl,lastRenderedState:Hu},next:null};var n={};return e.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cl,lastRenderedState:n},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function H5(t){var e=U5(t).next.queue;Cp(t,e,{},Ii())}function MS(){return _s(Qp)}function G5(){return Er().memoizedState}function W5(){return Er().memoizedState}function VY(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var n=Ii();t=Nc(n);var r=Cc(e,t,n);r!==null&&(Ai(r,e,n),Ep(r,e,n)),e={cache:kS()},t.payload=e;return}e=e.return}}function jY(t,e,n){var r=Ii();n={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},$x(t)?K5(e,n):(n=vS(t,e,n,r),n!==null&&(Ai(n,t,r),Z5(n,e,r)))}function q5(t,e,n){var r=Ii();Cp(t,e,n,r)}function Cp(t,e,n,r){var s={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if($x(t))K5(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Pi(a,o))return Cx(t,e,s,0),Cn===null&&Nx(),!1}catch{}finally{}if(n=vS(t,e,s,r),n!==null)return Ai(n,t,r),Z5(n,e,r),!0}return!1}function zS(t,e,n,r){if(r={lane:2,revertLane:WS(),action:r,hasEagerState:!1,eagerState:null,next:null},$x(t)){if(e)throw Error(xe(479))}else e=vS(t,n,r,2),e!==null&&Ai(e,t,2)}function $x(t){var e=t.alternate;return t===Ct||e!==null&&e===Ct}function K5(t,e){Hh=Zv=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Z5(t,e,n){if(n&4194048){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,FF(t,n)}}var Yv={readContext:_s,use:Sx,useCallback:ir,useContext:ir,useEffect:ir,useImperativeHandle:ir,useLayoutEffect:ir,useInsertionEffect:ir,useMemo:ir,useReducer:ir,useRef:ir,useState:ir,useDebugValue:ir,useDeferredValue:ir,useTransition:ir,useSyncExternalStore:ir,useId:ir,useHostTransitionStatus:ir,useFormState:ir,useActionState:ir,useOptimistic:ir,useMemoCache:ir,useCacheRefresh:ir},X5={readContext:_s,use:Sx,useCallback:function(t,e){return Js().memoizedState=[t,e===void 0?null:e],t},useContext:_s,useEffect:fP,useImperativeHandle:function(t,e,n){n=n!=null?n.concat([t]):null,uv(4194308,4,M5.bind(null,e,t),n)},useLayoutEffect:function(t,e){return uv(4194308,4,t,e)},useInsertionEffect:function(t,e){uv(4,2,t,e)},useMemo:function(t,e){var n=Js();e=e===void 0?null:e;var r=t();if(sd){hc(!0);try{t()}finally{hc(!1)}}return n.memoizedState=[r,e],r},useReducer:function(t,e,n){var r=Js();if(n!==void 0){var s=n(e);if(sd){hc(!0);try{n(e)}finally{hc(!1)}}}else s=e;return r.memoizedState=r.baseState=s,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:s},r.queue=t,t=t.dispatch=jY.bind(null,Ct,t),[r.memoizedState,t]},useRef:function(t){var e=Js();return t={current:t},e.memoizedState=t},useState:function(t){t=AN(t);var e=t.queue,n=q5.bind(null,Ct,e);return e.dispatch=n,[t.memoizedState,n]},useDebugValue:OS,useDeferredValue:function(t,e){var n=Js();return LS(n,t,e)},useTransition:function(){var t=AN(!1);return t=j5.bind(null,Ct,t.queue,!0,!1),Js().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,n){var r=Ct,s=Js();if(Qt){if(n===void 0)throw Error(xe(407));n=n()}else{if(n=e(),Cn===null)throw Error(xe(349));Vt&124||k5(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,fP(C5.bind(null,r,i,t),[t]),r.flags|=2048,df(9,Tx(),N5.bind(null,r,i,n,e),null),n},useId:function(){var t=Js(),e=Cn.identifierPrefix;if(Qt){var n=ml,r=fl;n=(r&~(1<<32-$i(r)-1)).toString(32)+n,e=""+e+"R"+n,n=Xv++,0<n&&(e+="H"+n.toString(32)),e+=""}else n=LY++,e=""+e+"r"+n.toString(32)+"";return t.memoizedState=e},useHostTransitionStatus:MS,useFormState:uP,useActionState:uP,useOptimistic:function(t){var e=Js();e.memoizedState=e.baseState=t;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=n,e=zS.bind(null,Ct,!0,n),n.dispatch=e,[t,e]},useMemoCache:PS,useCacheRefresh:function(){return Js().memoizedState=VY.bind(null,Ct)}},Y5={readContext:_s,use:Sx,useCallback:F5,useContext:_s,useEffect:D5,useImperativeHandle:z5,useInsertionEffect:O5,useLayoutEffect:L5,useMemo:B5,useReducer:cv,useRef:P5,useState:function(){return cv(Cl)},useDebugValue:OS,useDeferredValue:function(t,e){var n=Er();return V5(n,fn.memoizedState,t,e)},useTransition:function(){var t=cv(Cl)[0],e=Er().memoizedState;return[typeof t=="boolean"?t:qg(t),e]},useSyncExternalStore:E5,useId:G5,useHostTransitionStatus:MS,useFormState:dP,useActionState:dP,useOptimistic:function(t,e){var n=Er();return T5(n,fn,t,e)},useMemoCache:PS,useCacheRefresh:W5},UY={readContext:_s,use:Sx,useCallback:F5,useContext:_s,useEffect:D5,useImperativeHandle:z5,useInsertionEffect:O5,useLayoutEffect:L5,useMemo:B5,useReducer:NE,useRef:P5,useState:function(){return NE(Cl)},useDebugValue:OS,useDeferredValue:function(t,e){var n=Er();return fn===null?LS(n,t,e):V5(n,fn.memoizedState,t,e)},useTransition:function(){var t=NE(Cl)[0],e=Er().memoizedState;return[typeof t=="boolean"?t:qg(t),e]},useSyncExternalStore:E5,useId:G5,useHostTransitionStatus:MS,useFormState:hP,useActionState:hP,useOptimistic:function(t,e){var n=Er();return fn!==null?T5(n,fn,t,e):(n.baseState=t,[t,n.queue.dispatch])},useMemoCache:PS,useCacheRefresh:W5},Wh=null,Zp=0;function db(t){var e=Zp;return Zp+=1,Wh===null&&(Wh=[]),y5(Wh,t,e)}function zm(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function hb(t,e){throw e.$$typeof===vX?Error(xe(525)):(t=Object.prototype.toString.call(e),Error(xe(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function mP(t){var e=t._init;return e(t._payload)}function J5(t){function e(b,w){if(t){var E=b.deletions;E===null?(b.deletions=[w],b.flags|=16):E.push(w)}}function n(b,w){if(!t)return null;for(;w!==null;)e(b,w),w=w.sibling;return null}function r(b){for(var w=new Map;b!==null;)b.key!==null?w.set(b.key,b):w.set(b.index,b),b=b.sibling;return w}function s(b,w){return b=xl(b,w),b.index=0,b.sibling=null,b}function i(b,w,E){return b.index=E,t?(E=b.alternate,E!==null?(E=E.index,E<w?(b.flags|=67108866,w):E):(b.flags|=67108866,w)):(b.flags|=1048576,w)}function o(b){return t&&b.alternate===null&&(b.flags|=67108866),b}function a(b,w,E,N){return w===null||w.tag!==6?(w=wE(E,b.mode,N),w.return=b,w):(w=s(w,E),w.return=b,w)}function l(b,w,E,N){var C=E.type;return C===wh?u(b,w,E.props.children,N,E.key):w!==null&&(w.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===nc&&mP(C)===w.type)?(w=s(w,E.props),zm(w,E),w.return=b,w):(w=av(E.type,E.key,E.props,null,b.mode,N),zm(w,E),w.return=b,w)}function c(b,w,E,N){return w===null||w.tag!==4||w.stateNode.containerInfo!==E.containerInfo||w.stateNode.implementation!==E.implementation?(w=EE(E,b.mode,N),w.return=b,w):(w=s(w,E.children||[]),w.return=b,w)}function u(b,w,E,N,C){return w===null||w.tag!==7?(w=Gu(E,b.mode,N,C),w.return=b,w):(w=s(w,E),w.return=b,w)}function h(b,w,E){if(typeof w=="string"&&w!==""||typeof w=="number"||typeof w=="bigint")return w=wE(""+w,b.mode,E),w.return=b,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case sb:return E=av(w.type,w.key,w.props,null,b.mode,E),zm(E,w),E.return=b,E;case ep:return w=EE(w,b.mode,E),w.return=b,w;case nc:var N=w._init;return w=N(w._payload),h(b,w,E)}if(tp(w)||Dm(w))return w=Gu(w,b.mode,E,null),w.return=b,w;if(typeof w.then=="function")return h(b,db(w),E);if(w.$$typeof===hl)return h(b,cb(b,w),E);hb(b,w)}return null}function m(b,w,E,N){var C=w!==null?w.key:null;if(typeof E=="string"&&E!==""||typeof E=="number"||typeof E=="bigint")return C!==null?null:a(b,w,""+E,N);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case sb:return E.key===C?l(b,w,E,N):null;case ep:return E.key===C?c(b,w,E,N):null;case nc:return C=E._init,E=C(E._payload),m(b,w,E,N)}if(tp(E)||Dm(E))return C!==null?null:u(b,w,E,N,null);if(typeof E.then=="function")return m(b,w,db(E),N);if(E.$$typeof===hl)return m(b,w,cb(b,E),N);hb(b,E)}return null}function p(b,w,E,N,C){if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return b=b.get(E)||null,a(w,b,""+N,C);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case sb:return b=b.get(N.key===null?E:N.key)||null,l(w,b,N,C);case ep:return b=b.get(N.key===null?E:N.key)||null,c(w,b,N,C);case nc:var S=N._init;return N=S(N._payload),p(b,w,E,N,C)}if(tp(N)||Dm(N))return b=b.get(E)||null,u(w,b,N,C,null);if(typeof N.then=="function")return p(b,w,E,db(N),C);if(N.$$typeof===hl)return p(b,w,E,cb(w,N),C);hb(w,N)}return null}function y(b,w,E,N){for(var C=null,S=null,T=w,I=w=0,P=null;T!==null&&I<E.length;I++){T.index>I?(P=T,T=null):P=T.sibling;var R=m(b,T,E[I],N);if(R===null){T===null&&(T=P);break}t&&T&&R.alternate===null&&e(b,T),w=i(R,w,I),S===null?C=R:S.sibling=R,S=R,T=P}if(I===E.length)return n(b,T),Qt&&Cu(b,I),C;if(T===null){for(;I<E.length;I++)T=h(b,E[I],N),T!==null&&(w=i(T,w,I),S===null?C=T:S.sibling=T,S=T);return Qt&&Cu(b,I),C}for(T=r(T);I<E.length;I++)P=p(T,b,I,E[I],N),P!==null&&(t&&P.alternate!==null&&T.delete(P.key===null?I:P.key),w=i(P,w,I),S===null?C=P:S.sibling=P,S=P);return t&&T.forEach(function(D){return e(b,D)}),Qt&&Cu(b,I),C}function v(b,w,E,N){if(E==null)throw Error(xe(151));for(var C=null,S=null,T=w,I=w=0,P=null,R=E.next();T!==null&&!R.done;I++,R=E.next()){T.index>I?(P=T,T=null):P=T.sibling;var D=m(b,T,R.value,N);if(D===null){T===null&&(T=P);break}t&&T&&D.alternate===null&&e(b,T),w=i(D,w,I),S===null?C=D:S.sibling=D,S=D,T=P}if(R.done)return n(b,T),Qt&&Cu(b,I),C;if(T===null){for(;!R.done;I++,R=E.next())R=h(b,R.value,N),R!==null&&(w=i(R,w,I),S===null?C=R:S.sibling=R,S=R);return Qt&&Cu(b,I),C}for(T=r(T);!R.done;I++,R=E.next())R=p(T,b,I,R.value,N),R!==null&&(t&&R.alternate!==null&&T.delete(R.key===null?I:R.key),w=i(R,w,I),S===null?C=R:S.sibling=R,S=R);return t&&T.forEach(function(B){return e(b,B)}),Qt&&Cu(b,I),C}function x(b,w,E,N){if(typeof E=="object"&&E!==null&&E.type===wh&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case sb:e:{for(var C=E.key;w!==null;){if(w.key===C){if(C=E.type,C===wh){if(w.tag===7){n(b,w.sibling),N=s(w,E.props.children),N.return=b,b=N;break e}}else if(w.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===nc&&mP(C)===w.type){n(b,w.sibling),N=s(w,E.props),zm(N,E),N.return=b,b=N;break e}n(b,w);break}else e(b,w);w=w.sibling}E.type===wh?(N=Gu(E.props.children,b.mode,N,E.key),N.return=b,b=N):(N=av(E.type,E.key,E.props,null,b.mode,N),zm(N,E),N.return=b,b=N)}return o(b);case ep:e:{for(C=E.key;w!==null;){if(w.key===C)if(w.tag===4&&w.stateNode.containerInfo===E.containerInfo&&w.stateNode.implementation===E.implementation){n(b,w.sibling),N=s(w,E.children||[]),N.return=b,b=N;break e}else{n(b,w);break}else e(b,w);w=w.sibling}N=EE(E,b.mode,N),N.return=b,b=N}return o(b);case nc:return C=E._init,E=C(E._payload),x(b,w,E,N)}if(tp(E))return y(b,w,E,N);if(Dm(E)){if(C=Dm(E),typeof C!="function")throw Error(xe(150));return E=C.call(E),v(b,w,E,N)}if(typeof E.then=="function")return x(b,w,db(E),N);if(E.$$typeof===hl)return x(b,w,cb(b,E),N);hb(b,E)}return typeof E=="string"&&E!==""||typeof E=="number"||typeof E=="bigint"?(E=""+E,w!==null&&w.tag===6?(n(b,w.sibling),N=s(w,E),N.return=b,b=N):(n(b,w),N=wE(E,b.mode,N),N.return=b,b=N),o(b)):n(b,w)}return function(b,w,E,N){try{Zp=0;var C=x(b,w,E,N);return Wh=null,C}catch(T){if(T===Wg||T===_x)throw T;var S=ki(29,T,null,b.mode);return S.lanes=N,S.return=b,S}finally{}}}var hf=J5(!0),Q5=J5(!1),mo=Ba(null),wa=null;function oc(t){var e=t.alternate;zn(Rr,Rr.current&1),zn(mo,t),wa===null&&(e===null||uf.current!==null||e.memoizedState!==null)&&(wa=t)}function e6(t){if(t.tag===22){if(zn(Rr,Rr.current),zn(mo,t),wa===null){var e=t.alternate;e!==null&&e.memoizedState!==null&&(wa=t)}}else ac()}function ac(){zn(Rr,Rr.current),zn(mo,mo.current)}function gl(t){Kr(mo),wa===t&&(wa=null),Kr(Rr)}var Rr=Ba(0);function Jv(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||XN(n)))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}function CE(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Rn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var DN={enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ii(),s=Nc(r);s.payload=e,n!=null&&(s.callback=n),e=Cc(t,s,r),e!==null&&(Ai(e,t,r),Ep(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ii(),s=Nc(r);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Cc(t,s,r),e!==null&&(Ai(e,t,r),Ep(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ii(),r=Nc(n);r.tag=2,e!=null&&(r.callback=e),e=Cc(t,r,n),e!==null&&(Ai(e,t,n),Ep(e,t,n))}};function pP(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Wp(n,r)||!Wp(s,i):!0}function gP(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&DN.enqueueReplaceState(e,e.state,null)}function id(t,e){var n=e;if("ref"in e){n={};for(var r in e)r!=="ref"&&(n[r]=e[r])}if(t=t.defaultProps){n===e&&(n=Rn({},n));for(var s in t)n[s]===void 0&&(n[s]=t[s])}return n}var Qv=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function t6(t){Qv(t)}function n6(t){console.error(t)}function r6(t){Qv(t)}function e1(t,e){try{var n=t.onUncaughtError;n(e.value,{componentStack:e.stack})}catch(r){setTimeout(function(){throw r})}}function yP(t,e,n){try{var r=t.onCaughtError;r(n.value,{componentStack:n.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(s){setTimeout(function(){throw s})}}function ON(t,e,n){return n=Nc(n),n.tag=3,n.payload={element:null},n.callback=function(){e1(t,e)},n}function s6(t){return t=Nc(t),t.tag=3,t}function i6(t,e,n,r){var s=n.type.getDerivedStateFromError;if(typeof s=="function"){var i=r.value;t.payload=function(){return s(i)},t.callback=function(){yP(e,n,r)}}var o=n.stateNode;o!==null&&typeof o.componentDidCatch=="function"&&(t.callback=function(){yP(e,n,r),typeof s!="function"&&(_c===null?_c=new Set([this]):_c.add(this));var a=r.stack;this.componentDidCatch(r.value,{componentStack:a!==null?a:""})})}function HY(t,e,n,r,s){if(n.flags|=32768,r!==null&&typeof r=="object"&&typeof r.then=="function"){if(e=n.alternate,e!==null&&Hg(e,n,s,!0),n=mo.current,n!==null){switch(n.tag){case 13:return wa===null?UN():n.alternate===null&&Xn===0&&(Xn=3),n.flags&=-257,n.flags|=65536,n.lanes=s,r===SN?n.flags|=16384:(e=n.updateQueue,e===null?n.updateQueue=new Set([r]):e.add(r),LE(t,r,s)),!1;case 22:return n.flags|=65536,r===SN?n.flags|=16384:(e=n.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=e):(n=e.retryQueue,n===null?e.retryQueue=new Set([r]):n.add(r)),LE(t,r,s)),!1}throw Error(xe(435,n.tag))}return LE(t,r,s),UN(),!1}if(Qt)return e=mo.current,e!==null?(!(e.flags&65536)&&(e.flags|=256),e.flags|=65536,e.lanes=s,r!==EN&&(t=Error(xe(422),{cause:r}),qp(ro(t,n)))):(r!==EN&&(e=Error(xe(423),{cause:r}),qp(ro(e,n))),t=t.current.alternate,t.flags|=65536,s&=-s,t.lanes|=s,r=ro(r,n),s=ON(t.stateNode,r,s),kE(t,s),Xn!==4&&(Xn=2)),!1;var i=Error(xe(520),{cause:r});if(i=ro(i,n),Tp===null?Tp=[i]:Tp.push(i),Xn!==4&&(Xn=2),e===null)return!0;r=ro(r,n),n=e;do{switch(n.tag){case 3:return n.flags|=65536,t=s&-s,n.lanes|=t,t=ON(n.stateNode,r,t),kE(n,t),!1;case 1:if(e=n.type,i=n.stateNode,(n.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||i!==null&&typeof i.componentDidCatch=="function"&&(_c===null||!_c.has(i))))return n.flags|=65536,s&=-s,n.lanes|=s,s=s6(s),i6(s,t,n,r),kE(n,s),!1}n=n.return}while(n!==null);return!1}var o6=Error(xe(461)),qr=!1;function is(t,e,n,r){e.child=t===null?Q5(e,null,n,r):hf(e,t.child,n,r)}function bP(t,e,n,r,s){n=n.render;var i=e.ref;if("ref"in r){var o={};for(var a in r)a!=="ref"&&(o[a]=r[a])}else o=r;return rd(e),r=TS(t,e,n,o,i,s),a=$S(),t!==null&&!qr?(IS(t,e,s),_l(t,e,s)):(Qt&&a&&wS(e),e.flags|=1,is(t,e,r,s),e.child)}function vP(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!xS(i)&&i.defaultProps===void 0&&n.compare===null?(e.tag=15,e.type=i,a6(t,e,i,r,s)):(t=av(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!FS(t,s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Wp,n(o,r)&&t.ref===e.ref)return _l(t,e,s)}return e.flags|=1,t=xl(i,r),t.ref=e.ref,t.return=e,e.child=t}function a6(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Wp(i,r)&&t.ref===e.ref)if(qr=!1,e.pendingProps=r=i,FS(t,s))t.flags&131072&&(qr=!0);else return e.lanes=t.lanes,_l(t,e,s)}return LN(t,e,n,r,s)}function l6(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden"){if(e.flags&128){if(r=i!==null?i.baseLanes|n:n,t!==null){for(s=e.child=t.child,i=0;s!==null;)i=i|s.lanes|s.childLanes,s=s.sibling;e.childLanes=i&~r}else e.childLanes=0,e.child=null;return xP(t,e,r,n)}if(n&536870912)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&lv(e,i!==null?i.cachePool:null),i!==null?aP(e,i):IN(),e6(e);else return e.lanes=e.childLanes=536870912,xP(t,e,i!==null?i.baseLanes|n:n,n)}else i!==null?(lv(e,i.cachePool),aP(e,i),ac(),e.memoizedState=null):(t!==null&&lv(e,null),IN(),ac());return is(t,e,s,n),e.child}function xP(t,e,n,r){var s=NS();return s=s===null?null:{parent:Ir._currentValue,pool:s},e.memoizedState={baseLanes:n,cachePool:s},t!==null&&lv(e,null),IN(),e6(e),t!==null&&Hg(t,e,r,!0),null}function dv(t,e){var n=e.ref;if(n===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(xe(284));(t===null||t.ref!==n)&&(e.flags|=4194816)}}function LN(t,e,n,r,s){return rd(e),n=TS(t,e,n,r,void 0,s),r=$S(),t!==null&&!qr?(IS(t,e,s),_l(t,e,s)):(Qt&&r&&wS(e),e.flags|=1,is(t,e,n,s),e.child)}function wP(t,e,n,r,s,i){return rd(e),e.updateQueue=null,n=w5(e,r,n,s),x5(t),r=$S(),t!==null&&!qr?(IS(t,e,i),_l(t,e,i)):(Qt&&r&&wS(e),e.flags|=1,is(t,e,n,i),e.child)}function EP(t,e,n,r,s){if(rd(e),e.stateNode===null){var i=$h,o=n.contextType;typeof o=="object"&&o!==null&&(i=_s(o)),i=new n(r,i),e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=DN,e.stateNode=i,i._reactInternals=e,i=e.stateNode,i.props=r,i.state=e.memoizedState,i.refs={},CS(e),o=n.contextType,i.context=typeof o=="object"&&o!==null?_s(o):$h,i.state=e.memoizedState,o=n.getDerivedStateFromProps,typeof o=="function"&&(CE(e,n,o,r),i.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(o=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),o!==i.state&&DN.enqueueReplaceState(i,i.state,null),Np(e,r,i,s),kp(),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308),r=!0}else if(t===null){i=e.stateNode;var a=e.memoizedProps,l=id(n,a);i.props=l;var c=i.context,u=n.contextType;o=$h,typeof u=="object"&&u!==null&&(o=_s(u));var h=n.getDerivedStateFromProps;u=typeof h=="function"||typeof i.getSnapshotBeforeUpdate=="function",a=e.pendingProps!==a,u||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a||c!==o)&&gP(e,i,r,o),rc=!1;var m=e.memoizedState;i.state=m,Np(e,r,i,s),kp(),c=e.memoizedState,a||m!==c||rc?(typeof h=="function"&&(CE(e,n,h,r),c=e.memoizedState),(l=rc||pP(e,n,l,r,m,c,o))?(u||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(e.flags|=4194308)):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),i.props=r,i.state=c,i.context=o,r=l):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{i=e.stateNode,TN(t,e),o=e.memoizedProps,u=id(n,o),i.props=u,h=e.pendingProps,m=i.context,c=n.contextType,l=$h,typeof c=="object"&&c!==null&&(l=_s(c)),a=n.getDerivedStateFromProps,(c=typeof a=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o!==h||m!==l)&&gP(e,i,r,l),rc=!1,m=e.memoizedState,i.state=m,Np(e,r,i,s),kp();var p=e.memoizedState;o!==h||m!==p||rc||t!==null&&t.dependencies!==null&&qv(t.dependencies)?(typeof a=="function"&&(CE(e,n,a,r),p=e.memoizedState),(u=rc||pP(e,n,u,r,m,p,l)||t!==null&&t.dependencies!==null&&qv(t.dependencies))?(c||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,p,l),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,p,l)),typeof i.componentDidUpdate=="function"&&(e.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof i.componentDidUpdate!="function"||o===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),i.props=r,i.state=p,i.context=l,r=u):(typeof i.componentDidUpdate!="function"||o===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return i=r,dv(t,e),r=(e.flags&128)!==0,i||r?(i=e.stateNode,n=r&&typeof n.getDerivedStateFromError!="function"?null:i.render(),e.flags|=1,t!==null&&r?(e.child=hf(e,t.child,null,s),e.child=hf(e,null,n,s)):is(t,e,n,s),e.memoizedState=i.state,t=e.child):t=_l(t,e,s),t}function kP(t,e,n,r){return Ug(),e.flags|=256,is(t,e,n,r),e.child}var _E={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function SE(t){return{baseLanes:t,cachePool:p5()}}function TE(t,e,n){return t=t!==null?t.childLanes&~n:0,e&&(t|=io),t}function c6(t,e,n){var r=e.pendingProps,s=!1,i=(e.flags&128)!==0,o;if((o=i)||(o=t!==null&&t.memoizedState===null?!1:(Rr.current&2)!==0),o&&(s=!0,e.flags&=-129),o=(e.flags&32)!==0,e.flags&=-33,t===null){if(Qt){if(s?oc(e):ac(),Qt){var a=Zn,l;if(l=a){e:{for(l=a,a=ga;l.nodeType!==8;){if(!a){a=null;break e}if(l=Bo(l.nextSibling),l===null){a=null;break e}}a=l}a!==null?(e.memoizedState={dehydrated:a,treeContext:Wu!==null?{id:fl,overflow:ml}:null,retryLane:536870912,hydrationErrors:null},l=ki(18,null,null,0),l.stateNode=a,l.return=e,e.child=l,Fs=e,Zn=null,l=!0):l=!1}l||nd(e)}if(a=e.memoizedState,a!==null&&(a=a.dehydrated,a!==null))return XN(a)?e.lanes=32:e.lanes=536870912,null;gl(e)}return a=r.children,r=r.fallback,s?(ac(),s=e.mode,a=t1({mode:"hidden",children:a},s),r=Gu(r,s,n,null),a.return=e,r.return=e,a.sibling=r,e.child=a,s=e.child,s.memoizedState=SE(n),s.childLanes=TE(t,o,n),e.memoizedState=_E,r):(oc(e),MN(e,a))}if(l=t.memoizedState,l!==null&&(a=l.dehydrated,a!==null)){if(i)e.flags&256?(oc(e),e.flags&=-257,e=$E(t,e,n)):e.memoizedState!==null?(ac(),e.child=t.child,e.flags|=128,e=null):(ac(),s=r.fallback,a=e.mode,r=t1({mode:"visible",children:r.children},a),s=Gu(s,a,n,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,hf(e,t.child,null,n),r=e.child,r.memoizedState=SE(n),r.childLanes=TE(t,o,n),e.memoizedState=_E,e=s);else if(oc(e),XN(a)){if(o=a.nextSibling&&a.nextSibling.dataset,o)var c=o.dgst;o=c,r=Error(xe(419)),r.stack="",r.digest=o,qp({value:r,source:null,stack:null}),e=$E(t,e,n)}else if(qr||Hg(t,e,n,!1),o=(n&t.childLanes)!==0,qr||o){if(o=Cn,o!==null&&(r=n&-n,r=r&42?1:cS(r),r=r&(o.suspendedLanes|n)?0:r,r!==0&&r!==l.retryLane))throw l.retryLane=r,Vf(t,r),Ai(o,t,r),o6;a.data==="$?"||UN(),e=$E(t,e,n)}else a.data==="$?"?(e.flags|=192,e.child=t.child,e=null):(t=l.treeContext,Zn=Bo(a.nextSibling),Fs=e,Qt=!0,qu=null,ga=!1,t!==null&&(eo[to++]=fl,eo[to++]=ml,eo[to++]=Wu,fl=t.id,ml=t.overflow,Wu=e),e=MN(e,r.children),e.flags|=4096);return e}return s?(ac(),s=r.fallback,a=e.mode,l=t.child,c=l.sibling,r=xl(l,{mode:"hidden",children:r.children}),r.subtreeFlags=l.subtreeFlags&65011712,c!==null?s=xl(c,s):(s=Gu(s,a,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,a=t.child.memoizedState,a===null?a=SE(n):(l=a.cachePool,l!==null?(c=Ir._currentValue,l=l.parent!==c?{parent:c,pool:c}:l):l=p5(),a={baseLanes:a.baseLanes|n,cachePool:l}),s.memoizedState=a,s.childLanes=TE(t,o,n),e.memoizedState=_E,r):(oc(e),n=t.child,t=n.sibling,n=xl(n,{mode:"visible",children:r.children}),n.return=e,n.sibling=null,t!==null&&(o=e.deletions,o===null?(e.deletions=[t],e.flags|=16):o.push(t)),e.child=n,e.memoizedState=null,n)}function MN(t,e){return e=t1({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function t1(t,e){return t=ki(22,t,null,e),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function $E(t,e,n){return hf(e,t.child,null,n),t=MN(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function NP(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),NN(t.return,e,n)}function IE(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function u6(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(is(t,e,r.children,n),r=Rr.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&NP(t,n,e);else if(t.tag===19)NP(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}switch(zn(Rr,r),s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Jv(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),IE(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Jv(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}IE(e,!0,n,null,i);break;case"together":IE(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function _l(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Fc|=e.lanes,!(n&e.childLanes))if(t!==null){if(Hg(t,e,n,!1),(n&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(xe(153));if(e.child!==null){for(t=e.child,n=xl(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=xl(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function FS(t,e){return t.lanes&e?!0:(t=t.dependencies,!!(t!==null&&qv(t)))}function GY(t,e,n){switch(e.tag){case 3:Fv(e,e.stateNode.containerInfo),ic(e,Ir,t.memoizedState.cache),Ug();break;case 27:case 5:hN(e);break;case 4:Fv(e,e.stateNode.containerInfo);break;case 10:ic(e,e.type,e.memoizedProps.value);break;case 13:var r=e.memoizedState;if(r!==null)return r.dehydrated!==null?(oc(e),e.flags|=128,null):n&e.child.childLanes?c6(t,e,n):(oc(e),t=_l(t,e,n),t!==null?t.sibling:null);oc(e);break;case 19:var s=(t.flags&128)!==0;if(r=(n&e.childLanes)!==0,r||(Hg(t,e,n,!1),r=(n&e.childLanes)!==0),s){if(r)return u6(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),zn(Rr,Rr.current),r)break;return null;case 22:case 23:return e.lanes=0,l6(t,e,n);case 24:ic(e,Ir,t.memoizedState.cache)}return _l(t,e,n)}function d6(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps)qr=!0;else{if(!FS(t,n)&&!(e.flags&128))return qr=!1,GY(t,e,n);qr=!!(t.flags&131072)}else qr=!1,Qt&&e.flags&1048576&&f5(e,Wv,e.index);switch(e.lanes=0,e.tag){case 16:e:{t=e.pendingProps;var r=e.elementType,s=r._init;if(r=s(r._payload),e.type=r,typeof r=="function")xS(r)?(t=id(r,t),e.tag=1,e=EP(null,e,r,t,n)):(e.tag=0,e=LN(null,e,r,t,n));else{if(r!=null){if(s=r.$$typeof,s===oS){e.tag=11,e=bP(null,e,r,t,n);break e}else if(s===aS){e.tag=14,e=vP(null,e,r,t,n);break e}}throw e=uN(r)||r,Error(xe(306,e,""))}}return e;case 0:return LN(t,e,e.type,e.pendingProps,n);case 1:return r=e.type,s=id(r,e.pendingProps),EP(t,e,r,s,n);case 3:e:{if(Fv(e,e.stateNode.containerInfo),t===null)throw Error(xe(387));r=e.pendingProps;var i=e.memoizedState;s=i.element,TN(t,e),Np(e,r,null,n);var o=e.memoizedState;if(r=o.cache,ic(e,Ir,r),r!==i.cache&&CN(e,[Ir],n,!0),kp(),r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){e=kP(t,e,r,n);break e}else if(r!==s){s=ro(Error(xe(424)),e),qp(s),e=kP(t,e,r,n);break e}else{switch(t=e.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Zn=Bo(t.firstChild),Fs=e,Qt=!0,qu=null,ga=!0,n=Q5(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Ug(),r===s){e=_l(t,e,n);break e}is(t,e,r,n)}e=e.child}return e;case 26:return dv(t,e),t===null?(n=VP(e.type,null,e.pendingProps,null))?e.memoizedState=n:Qt||(n=e.type,t=e.pendingProps,r=l1(kc.current).createElement(n),r[Cs]=e,r[ai]=t,as(r,n,t),Hr(r),e.stateNode=r):e.memoizedState=VP(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return hN(e),t===null&&Qt&&(r=e.stateNode=Y6(e.type,e.pendingProps,kc.current),Fs=e,ga=!0,s=Zn,Zc(e.type)?(YN=s,Zn=Bo(r.firstChild)):Zn=s),is(t,e,e.pendingProps.children,n),dv(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&Qt&&((s=r=Zn)&&(r=vJ(r,e.type,e.pendingProps,ga),r!==null?(e.stateNode=r,Fs=e,Zn=Bo(r.firstChild),ga=!1,s=!0):s=!1),s||nd(e)),hN(e),s=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,r=i.children,KN(s,i)?r=null:o!==null&&KN(s,o)&&(e.flags|=32),e.memoizedState!==null&&(s=TS(t,e,MY,null,null,n),Qp._currentValue=s),dv(t,e),is(t,e,r,n),e.child;case 6:return t===null&&Qt&&((t=n=Zn)&&(n=xJ(n,e.pendingProps,ga),n!==null?(e.stateNode=n,Fs=e,Zn=null,t=!0):t=!1),t||nd(e)),null;case 13:return c6(t,e,n);case 4:return Fv(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=hf(e,null,r,n):is(t,e,r,n),e.child;case 11:return bP(t,e,e.type,e.pendingProps,n);case 7:return is(t,e,e.pendingProps,n),e.child;case 8:return is(t,e,e.pendingProps.children,n),e.child;case 12:return is(t,e,e.pendingProps.children,n),e.child;case 10:return r=e.pendingProps,ic(e,e.type,r.value),is(t,e,r.children,n),e.child;case 9:return s=e.type._context,r=e.pendingProps.children,rd(e),s=_s(s),r=r(s),e.flags|=1,is(t,e,r,n),e.child;case 14:return vP(t,e,e.type,e.pendingProps,n);case 15:return a6(t,e,e.type,e.pendingProps,n);case 19:return u6(t,e,n);case 31:return r=e.pendingProps,n=e.mode,r={mode:r.mode,children:r.children},t===null?(n=t1(r,n),n.ref=e.ref,e.child=n,n.return=e,e=n):(n=xl(t.child,r),n.ref=e.ref,e.child=n,n.return=e,e=n),e;case 22:return l6(t,e,n);case 24:return rd(e),r=_s(Ir),t===null?(s=NS(),s===null&&(s=Cn,i=kS(),s.pooledCache=i,i.refCount++,i!==null&&(s.pooledCacheLanes|=n),s=i),e.memoizedState={parent:r,cache:s},CS(e),ic(e,Ir,s)):(t.lanes&n&&(TN(t,e),Np(e,null,null,n),kp()),s=t.memoizedState,i=e.memoizedState,s.parent!==r?(s={parent:r,cache:r},e.memoizedState=s,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=s),ic(e,Ir,r)):(r=i.cache,ic(e,Ir,r),r!==s.cache&&CN(e,[Ir],n,!0))),is(t,e,e.pendingProps.children,n),e.child;case 29:throw e.pendingProps}throw Error(xe(156,e.tag))}function Za(t){t.flags|=4}function CP(t,e){if(e.type!=="stylesheet"||e.state.loading&4)t.flags&=-16777217;else if(t.flags|=16777216,!eB(e)){if(e=mo.current,e!==null&&((Vt&4194048)===Vt?wa!==null:(Vt&62914560)!==Vt&&!(Vt&536870912)||e!==wa))throw wp=SN,g5;t.flags|=8192}}function fb(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?MF():536870912,t.lanes|=e,ff|=e)}function Fm(t,e){if(!Qt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Gn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&65011712,r|=s.flags&65011712,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function WY(t,e,n){var r=e.pendingProps;switch(ES(e),e.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gn(e),null;case 1:return Gn(e),null;case 3:return n=e.stateNode,r=null,t!==null&&(r=t.memoizedState.cache),e.memoizedState.cache!==r&&(e.flags|=2048),wl(Ir),of(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Mm(e)?Za(e):t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,tP())),Gn(e),null;case 26:return n=e.memoizedState,t===null?(Za(e),n!==null?(Gn(e),CP(e,n)):(Gn(e),e.flags&=-16777217)):n?n!==t.memoizedState?(Za(e),Gn(e),CP(e,n)):(Gn(e),e.flags&=-16777217):(t.memoizedProps!==r&&Za(e),Gn(e),e.flags&=-16777217),null;case 27:Bv(e),n=kc.current;var s=e.type;if(t!==null&&e.stateNode!=null)t.memoizedProps!==r&&Za(e);else{if(!r){if(e.stateNode===null)throw Error(xe(166));return Gn(e),null}t=va.current,Mm(e)?QR(e):(t=Y6(s,r,n),e.stateNode=t,Za(e))}return Gn(e),null;case 5:if(Bv(e),n=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==r&&Za(e);else{if(!r){if(e.stateNode===null)throw Error(xe(166));return Gn(e),null}if(t=va.current,Mm(e))QR(e);else{switch(s=l1(kc.current),t){case 1:t=s.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:t=s.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":t=s.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":t=s.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof r.is=="string"?s.createElement("select",{is:r.is}):s.createElement("select"),r.multiple?t.multiple=!0:r.size&&(t.size=r.size);break;default:t=typeof r.is=="string"?s.createElement(n,{is:r.is}):s.createElement(n)}}t[Cs]=e,t[ai]=r;e:for(s=e.child;s!==null;){if(s.tag===5||s.tag===6)t.appendChild(s.stateNode);else if(s.tag!==4&&s.tag!==27&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break e;for(;s.sibling===null;){if(s.return===null||s.return===e)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}e.stateNode=t;e:switch(as(t,n,r),n){case"button":case"input":case"select":case"textarea":t=!!r.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&Za(e)}}return Gn(e),e.flags&=-16777217,null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==r&&Za(e);else{if(typeof r!="string"&&e.stateNode===null)throw Error(xe(166));if(t=kc.current,Mm(e)){if(t=e.stateNode,n=e.memoizedProps,r=null,s=Fs,s!==null)switch(s.tag){case 27:case 5:r=s.memoizedProps}t[Cs]=e,t=!!(t.nodeValue===n||r!==null&&r.suppressHydrationWarning===!0||K6(t.nodeValue,n)),t||nd(e)}else t=l1(t).createTextNode(r),t[Cs]=e,e.stateNode=t}return Gn(e),null;case 13:if(r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(s=Mm(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(xe(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(xe(317));s[Cs]=e}else Ug(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Gn(e),s=!1}else s=tP(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=s),s=!0;if(!s)return e.flags&256?(gl(e),e):(gl(e),null)}if(gl(e),e.flags&128)return e.lanes=n,e;if(n=r!==null,t=t!==null&&t.memoizedState!==null,n){r=e.child,s=null,r.alternate!==null&&r.alternate.memoizedState!==null&&r.alternate.memoizedState.cachePool!==null&&(s=r.alternate.memoizedState.cachePool.pool);var i=null;r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(i=r.memoizedState.cachePool.pool),i!==s&&(r.flags|=2048)}return n!==t&&n&&(e.child.flags|=8192),fb(e,e.updateQueue),Gn(e),null;case 4:return of(),t===null&&qS(e.stateNode.containerInfo),Gn(e),null;case 10:return wl(e.type),Gn(e),null;case 19:if(Kr(Rr),s=e.memoizedState,s===null)return Gn(e),null;if(r=(e.flags&128)!==0,i=s.rendering,i===null)if(r)Fm(s,!1);else{if(Xn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(i=Jv(t),i!==null){for(e.flags|=128,Fm(s,!1),t=i.updateQueue,e.updateQueue=t,fb(e,t),e.subtreeFlags=0,t=n,n=e.child;n!==null;)h5(n,t),n=n.sibling;return zn(Rr,Rr.current&1|2),e.child}t=t.sibling}s.tail!==null&&xa()>r1&&(e.flags|=128,r=!0,Fm(s,!1),e.lanes=4194304)}else{if(!r)if(t=Jv(i),t!==null){if(e.flags|=128,r=!0,t=t.updateQueue,e.updateQueue=t,fb(e,t),Fm(s,!0),s.tail===null&&s.tailMode==="hidden"&&!i.alternate&&!Qt)return Gn(e),null}else 2*xa()-s.renderingStartTime>r1&&n!==536870912&&(e.flags|=128,r=!0,Fm(s,!1),e.lanes=4194304);s.isBackwards?(i.sibling=e.child,e.child=i):(t=s.last,t!==null?t.sibling=i:e.child=i,s.last=i)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=xa(),e.sibling=null,t=Rr.current,zn(Rr,r?t&1|2:t&1),e):(Gn(e),null);case 22:case 23:return gl(e),_S(),r=e.memoizedState!==null,t!==null?t.memoizedState!==null!==r&&(e.flags|=8192):r&&(e.flags|=8192),r?n&536870912&&!(e.flags&128)&&(Gn(e),e.subtreeFlags&6&&(e.flags|=8192)):Gn(e),n=e.updateQueue,n!==null&&fb(e,n.retryQueue),n=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),r=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(r=e.memoizedState.cachePool.pool),r!==n&&(e.flags|=2048),t!==null&&Kr(Ku),null;case 24:return n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),wl(Ir),Gn(e),null;case 25:return null;case 30:return null}throw Error(xe(156,e.tag))}function qY(t,e){switch(ES(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return wl(Ir),of(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return Bv(e),null;case 13:if(gl(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(xe(340));Ug()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Kr(Rr),null;case 4:return of(),null;case 10:return wl(e.type),null;case 22:case 23:return gl(e),_S(),t!==null&&Kr(Ku),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return wl(Ir),null;case 25:return null;default:return null}}function h6(t,e){switch(ES(e),e.tag){case 3:wl(Ir),of();break;case 26:case 27:case 5:Bv(e);break;case 4:of();break;case 13:gl(e);break;case 19:Kr(Rr);break;case 10:wl(e.type);break;case 22:case 23:gl(e),_S(),t!==null&&Kr(Ku);break;case 24:wl(Ir)}}function Zg(t,e){try{var n=e.updateQueue,r=n!==null?n.lastEffect:null;if(r!==null){var s=r.next;n=s;do{if((n.tag&t)===t){r=void 0;var i=n.create,o=n.inst;r=i(),o.destroy=r}n=n.next}while(n!==s)}}catch(a){vn(e,e.return,a)}}function zc(t,e,n){try{var r=e.updateQueue,s=r!==null?r.lastEffect:null;if(s!==null){var i=s.next;r=i;do{if((r.tag&t)===t){var o=r.inst,a=o.destroy;if(a!==void 0){o.destroy=void 0,s=e;var l=n,c=a;try{c()}catch(u){vn(s,l,u)}}}r=r.next}while(r!==i)}}catch(u){vn(e,e.return,u)}}function f6(t){var e=t.updateQueue;if(e!==null){var n=t.stateNode;try{v5(e,n)}catch(r){vn(t,t.return,r)}}}function m6(t,e,n){n.props=id(t.type,t.memoizedProps),n.state=t.memoizedState;try{n.componentWillUnmount()}catch(r){vn(t,e,r)}}function _p(t,e){try{var n=t.ref;if(n!==null){switch(t.tag){case 26:case 27:case 5:var r=t.stateNode;break;case 30:r=t.stateNode;break;default:r=t.stateNode}typeof n=="function"?t.refCleanup=n(r):n.current=r}}catch(s){vn(t,e,s)}}function ya(t,e){var n=t.ref,r=t.refCleanup;if(n!==null)if(typeof r=="function")try{r()}catch(s){vn(t,e,s)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(s){vn(t,e,s)}else n.current=null}function p6(t){var e=t.type,n=t.memoizedProps,r=t.stateNode;try{e:switch(e){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(s){vn(t,t.return,s)}}function AE(t,e,n){try{var r=t.stateNode;mJ(r,t.type,n,e),r[ai]=e}catch(s){vn(t,t.return,s)}}function g6(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Zc(t.type)||t.tag===4}function RE(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||g6(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Zc(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function zN(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(t,e):(e=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,e.appendChild(t),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Px));else if(r!==4&&(r===27&&Zc(t.type)&&(n=t.stateNode,e=null),t=t.child,t!==null))for(zN(t,e,n),t=t.sibling;t!==null;)zN(t,e,n),t=t.sibling}function n1(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(r===27&&Zc(t.type)&&(n=t.stateNode),t=t.child,t!==null))for(n1(t,e,n),t=t.sibling;t!==null;)n1(t,e,n),t=t.sibling}function y6(t){var e=t.stateNode,n=t.memoizedProps;try{for(var r=t.type,s=e.attributes;s.length;)e.removeAttributeNode(s[0]);as(e,r,n),e[Cs]=t,e[ai]=n}catch(i){vn(t,t.return,i)}}var ll=!1,ar=!1,PE=!1,_P=typeof WeakSet=="function"?WeakSet:Set,Ur=null;function KY(t,e){if(t=t.containerInfo,WN=h1,t=s5(t),yS(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,h=t,m=null;t:for(;;){for(var p;h!==n||s!==0&&h.nodeType!==3||(a=o+s),h!==i||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)m=h,h=p;for(;;){if(h===t)break t;if(m===n&&++c===s&&(a=o),m===i&&++u===r&&(l=o),(p=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(qN={focusedElem:t,selectionRange:n},h1=!1,Ur=e;Ur!==null;)if(e=Ur,t=e.child,(e.subtreeFlags&1024)!==0&&t!==null)t.return=e,Ur=t;else for(;Ur!==null;){switch(e=Ur,i=e.alternate,t=e.flags,e.tag){case 0:break;case 11:case 15:break;case 1:if(t&1024&&i!==null){t=void 0,n=e,s=i.memoizedProps,i=i.memoizedState,r=n.stateNode;try{var y=id(n.type,s,n.elementType===n.type);t=r.getSnapshotBeforeUpdate(y,i),r.__reactInternalSnapshotBeforeUpdate=t}catch(v){vn(n,n.return,v)}}break;case 3:if(t&1024){if(t=e.stateNode.containerInfo,n=t.nodeType,n===9)ZN(t);else if(n===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":ZN(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(t&1024)throw Error(xe(163))}if(t=e.sibling,t!==null){t.return=e.return,Ur=t;break}Ur=e.return}}function b6(t,e,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Kl(t,n),r&4&&Zg(5,n);break;case 1:if(Kl(t,n),r&4)if(t=n.stateNode,e===null)try{t.componentDidMount()}catch(o){vn(n,n.return,o)}else{var s=id(n.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(s,e,t.__reactInternalSnapshotBeforeUpdate)}catch(o){vn(n,n.return,o)}}r&64&&f6(n),r&512&&_p(n,n.return);break;case 3:if(Kl(t,n),r&64&&(t=n.updateQueue,t!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}try{v5(t,e)}catch(o){vn(n,n.return,o)}}break;case 27:e===null&&r&4&&y6(n);case 26:case 5:Kl(t,n),e===null&&r&4&&p6(n),r&512&&_p(n,n.return);break;case 12:Kl(t,n);break;case 13:Kl(t,n),r&4&&w6(t,n),r&64&&(t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(n=rJ.bind(null,n),wJ(t,n))));break;case 22:if(r=n.memoizedState!==null||ll,!r){e=e!==null&&e.memoizedState!==null||ar,s=ll;var i=ar;ll=r,(ar=e)&&!i?Ql(t,n,(n.subtreeFlags&8772)!==0):Kl(t,n),ll=s,ar=i}break;case 30:break;default:Kl(t,n)}}function v6(t){var e=t.alternate;e!==null&&(t.alternate=null,v6(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&dS(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Ln=null,Qs=!1;function Xa(t,e,n){for(n=n.child;n!==null;)x6(t,e,n),n=n.sibling}function x6(t,e,n){if(Ti&&typeof Ti.onCommitFiberUnmount=="function")try{Ti.onCommitFiberUnmount(zg,n)}catch{}switch(n.tag){case 26:ar||ya(n,e),Xa(t,e,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:ar||ya(n,e);var r=Ln,s=Qs;Zc(n.type)&&(Ln=n.stateNode,Qs=!1),Xa(t,e,n),Ip(n.stateNode),Ln=r,Qs=s;break;case 5:ar||ya(n,e);case 6:if(r=Ln,s=Qs,Ln=null,Xa(t,e,n),Ln=r,Qs=s,Ln!==null)if(Qs)try{(Ln.nodeType===9?Ln.body:Ln.nodeName==="HTML"?Ln.ownerDocument.body:Ln).removeChild(n.stateNode)}catch(i){vn(n,e,i)}else try{Ln.removeChild(n.stateNode)}catch(i){vn(n,e,i)}break;case 18:Ln!==null&&(Qs?(t=Ln,zP(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,n.stateNode),ng(t)):zP(Ln,n.stateNode));break;case 4:r=Ln,s=Qs,Ln=n.stateNode.containerInfo,Qs=!0,Xa(t,e,n),Ln=r,Qs=s;break;case 0:case 11:case 14:case 15:ar||zc(2,n,e),ar||zc(4,n,e),Xa(t,e,n);break;case 1:ar||(ya(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"&&m6(n,e,r)),Xa(t,e,n);break;case 21:Xa(t,e,n);break;case 22:ar=(r=ar)||n.memoizedState!==null,Xa(t,e,n),ar=r;break;default:Xa(t,e,n)}}function w6(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{ng(t)}catch(n){vn(e,e.return,n)}}function ZY(t){switch(t.tag){case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new _P),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new _P),e;default:throw Error(xe(435,t.tag))}}function DE(t,e){var n=ZY(t);e.forEach(function(r){var s=sJ.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}function pi(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r],i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 27:if(Zc(a.type)){Ln=a.stateNode,Qs=!1;break e}break;case 5:Ln=a.stateNode,Qs=!1;break e;case 3:case 4:Ln=a.stateNode.containerInfo,Qs=!0;break e}a=a.return}if(Ln===null)throw Error(xe(160));x6(i,o,s),Ln=null,Qs=!1,i=s.alternate,i!==null&&(i.return=null),s.return=null}if(e.subtreeFlags&13878)for(e=e.child;e!==null;)E6(e,t),e=e.sibling}var Oo=null;function E6(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:pi(e,t),gi(t),r&4&&(zc(3,t,t.return),Zg(3,t),zc(5,t,t.return));break;case 1:pi(e,t),gi(t),r&512&&(ar||n===null||ya(n,n.return)),r&64&&ll&&(t=t.updateQueue,t!==null&&(r=t.callbacks,r!==null&&(n=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=n===null?r:n.concat(r))));break;case 26:var s=Oo;if(pi(e,t),gi(t),r&512&&(ar||n===null||ya(n,n.return)),r&4){var i=n!==null?n.memoizedState:null;if(r=t.memoizedState,n===null)if(r===null)if(t.stateNode===null){e:{r=t.type,n=t.memoizedProps,s=s.ownerDocument||s;t:switch(r){case"title":i=s.getElementsByTagName("title")[0],(!i||i[Vg]||i[Cs]||i.namespaceURI==="http://www.w3.org/2000/svg"||i.hasAttribute("itemprop"))&&(i=s.createElement(r),s.head.insertBefore(i,s.querySelector("head > title"))),as(i,r,n),i[Cs]=t,Hr(i),r=i;break e;case"link":var o=UP("link","href",s).get(r+(n.href||""));if(o){for(var a=0;a<o.length;a++)if(i=o[a],i.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&i.getAttribute("rel")===(n.rel==null?null:n.rel)&&i.getAttribute("title")===(n.title==null?null:n.title)&&i.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){o.splice(a,1);break t}}i=s.createElement(r),as(i,r,n),s.head.appendChild(i);break;case"meta":if(o=UP("meta","content",s).get(r+(n.content||""))){for(a=0;a<o.length;a++)if(i=o[a],i.getAttribute("content")===(n.content==null?null:""+n.content)&&i.getAttribute("name")===(n.name==null?null:n.name)&&i.getAttribute("property")===(n.property==null?null:n.property)&&i.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&i.getAttribute("charset")===(n.charSet==null?null:n.charSet)){o.splice(a,1);break t}}i=s.createElement(r),as(i,r,n),s.head.appendChild(i);break;default:throw Error(xe(468,r))}i[Cs]=t,Hr(i),r=i}t.stateNode=r}else HP(s,t.type,t.stateNode);else t.stateNode=jP(s,r,t.memoizedProps);else i!==r?(i===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):i.count--,r===null?HP(s,t.type,t.stateNode):jP(s,r,t.memoizedProps)):r===null&&t.stateNode!==null&&AE(t,t.memoizedProps,n.memoizedProps)}break;case 27:pi(e,t),gi(t),r&512&&(ar||n===null||ya(n,n.return)),n!==null&&r&4&&AE(t,t.memoizedProps,n.memoizedProps);break;case 5:if(pi(e,t),gi(t),r&512&&(ar||n===null||ya(n,n.return)),t.flags&32){s=t.stateNode;try{lf(s,"")}catch(p){vn(t,t.return,p)}}r&4&&t.stateNode!=null&&(s=t.memoizedProps,AE(t,s,n!==null?n.memoizedProps:s)),r&1024&&(PE=!0);break;case 6:if(pi(e,t),gi(t),r&4){if(t.stateNode===null)throw Error(xe(162));r=t.memoizedProps,n=t.stateNode;try{n.nodeValue=r}catch(p){vn(t,t.return,p)}}break;case 3:if(mv=null,s=Oo,Oo=c1(e.containerInfo),pi(e,t),Oo=s,gi(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ng(e.containerInfo)}catch(p){vn(t,t.return,p)}PE&&(PE=!1,k6(t));break;case 4:r=Oo,Oo=c1(t.stateNode.containerInfo),pi(e,t),gi(t),Oo=r;break;case 12:pi(e,t),gi(t);break;case 13:pi(e,t),gi(t),t.child.flags&8192&&t.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(HS=xa()),r&4&&(r=t.updateQueue,r!==null&&(t.updateQueue=null,DE(t,r)));break;case 22:s=t.memoizedState!==null;var l=n!==null&&n.memoizedState!==null,c=ll,u=ar;if(ll=c||s,ar=u||l,pi(e,t),ar=u,ll=c,gi(t),r&8192)e:for(e=t.stateNode,e._visibility=s?e._visibility&-2:e._visibility|1,s&&(n===null||l||ll||ar||_u(t)),n=null,e=t;;){if(e.tag===5||e.tag===26){if(n===null){l=n=e;try{if(i=l.stateNode,s)o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none";else{a=l.stateNode;var h=l.memoizedProps.style,m=h!=null&&h.hasOwnProperty("display")?h.display:null;a.style.display=m==null||typeof m=="boolean"?"":(""+m).trim()}}catch(p){vn(l,l.return,p)}}}else if(e.tag===6){if(n===null){l=e;try{l.stateNode.nodeValue=s?"":l.memoizedProps}catch(p){vn(l,l.return,p)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;n===e&&(n=null),e=e.return}n===e&&(n=null),e.sibling.return=e.return,e=e.sibling}r&4&&(r=t.updateQueue,r!==null&&(n=r.retryQueue,n!==null&&(r.retryQueue=null,DE(t,n))));break;case 19:pi(e,t),gi(t),r&4&&(r=t.updateQueue,r!==null&&(t.updateQueue=null,DE(t,r)));break;case 30:break;case 21:break;default:pi(e,t),gi(t)}}function gi(t){var e=t.flags;if(e&2){try{for(var n,r=t.return;r!==null;){if(g6(r)){n=r;break}r=r.return}if(n==null)throw Error(xe(160));switch(n.tag){case 27:var s=n.stateNode,i=RE(t);n1(t,i,s);break;case 5:var o=n.stateNode;n.flags&32&&(lf(o,""),n.flags&=-33);var a=RE(t);n1(t,a,o);break;case 3:case 4:var l=n.stateNode.containerInfo,c=RE(t);zN(t,c,l);break;default:throw Error(xe(161))}}catch(u){vn(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function k6(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;k6(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function Kl(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)b6(t,e.alternate,e),e=e.sibling}function _u(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:zc(4,e,e.return),_u(e);break;case 1:ya(e,e.return);var n=e.stateNode;typeof n.componentWillUnmount=="function"&&m6(e,e.return,n),_u(e);break;case 27:Ip(e.stateNode);case 26:case 5:ya(e,e.return),_u(e);break;case 22:e.memoizedState===null&&_u(e);break;case 30:_u(e);break;default:_u(e)}t=t.sibling}}function Ql(t,e,n){for(n=n&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var r=e.alternate,s=t,i=e,o=i.flags;switch(i.tag){case 0:case 11:case 15:Ql(s,i,n),Zg(4,i);break;case 1:if(Ql(s,i,n),r=i,s=r.stateNode,typeof s.componentDidMount=="function")try{s.componentDidMount()}catch(c){vn(r,r.return,c)}if(r=i,s=r.updateQueue,s!==null){var a=r.stateNode;try{var l=s.shared.hiddenCallbacks;if(l!==null)for(s.shared.hiddenCallbacks=null,s=0;s<l.length;s++)b5(l[s],a)}catch(c){vn(r,r.return,c)}}n&&o&64&&f6(i),_p(i,i.return);break;case 27:y6(i);case 26:case 5:Ql(s,i,n),n&&r===null&&o&4&&p6(i),_p(i,i.return);break;case 12:Ql(s,i,n);break;case 13:Ql(s,i,n),n&&o&4&&w6(s,i);break;case 22:i.memoizedState===null&&Ql(s,i,n),_p(i,i.return);break;case 30:break;default:Ql(s,i,n)}e=e.sibling}}function BS(t,e){var n=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==n&&(t!=null&&t.refCount++,n!=null&&Gg(n))}function VS(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&Gg(t))}function aa(t,e,n,r){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)N6(t,e,n,r),e=e.sibling}function N6(t,e,n,r){var s=e.flags;switch(e.tag){case 0:case 11:case 15:aa(t,e,n,r),s&2048&&Zg(9,e);break;case 1:aa(t,e,n,r);break;case 3:aa(t,e,n,r),s&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&Gg(t)));break;case 12:if(s&2048){aa(t,e,n,r),t=e.stateNode;try{var i=e.memoizedProps,o=i.id,a=i.onPostCommit;typeof a=="function"&&a(o,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(l){vn(e,e.return,l)}}else aa(t,e,n,r);break;case 13:aa(t,e,n,r);break;case 23:break;case 22:i=e.stateNode,o=e.alternate,e.memoizedState!==null?i._visibility&2?aa(t,e,n,r):Sp(t,e):i._visibility&2?aa(t,e,n,r):(i._visibility|=2,fh(t,e,n,r,(e.subtreeFlags&10256)!==0)),s&2048&&BS(o,e);break;case 24:aa(t,e,n,r),s&2048&&VS(e.alternate,e);break;default:aa(t,e,n,r)}}function fh(t,e,n,r,s){for(s=s&&(e.subtreeFlags&10256)!==0,e=e.child;e!==null;){var i=t,o=e,a=n,l=r,c=o.flags;switch(o.tag){case 0:case 11:case 15:fh(i,o,a,l,s),Zg(8,o);break;case 23:break;case 22:var u=o.stateNode;o.memoizedState!==null?u._visibility&2?fh(i,o,a,l,s):Sp(i,o):(u._visibility|=2,fh(i,o,a,l,s)),s&&c&2048&&BS(o.alternate,o);break;case 24:fh(i,o,a,l,s),s&&c&2048&&VS(o.alternate,o);break;default:fh(i,o,a,l,s)}e=e.sibling}}function Sp(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var n=t,r=e,s=r.flags;switch(r.tag){case 22:Sp(n,r),s&2048&&BS(r.alternate,r);break;case 24:Sp(n,r),s&2048&&VS(r.alternate,r);break;default:Sp(n,r)}e=e.sibling}}var rp=8192;function Qd(t){if(t.subtreeFlags&rp)for(t=t.child;t!==null;)C6(t),t=t.sibling}function C6(t){switch(t.tag){case 26:Qd(t),t.flags&rp&&t.memoizedState!==null&&DJ(Oo,t.memoizedState,t.memoizedProps);break;case 5:Qd(t);break;case 3:case 4:var e=Oo;Oo=c1(t.stateNode.containerInfo),Qd(t),Oo=e;break;case 22:t.memoizedState===null&&(e=t.alternate,e!==null&&e.memoizedState!==null?(e=rp,rp=16777216,Qd(t),rp=e):Qd(t));break;default:Qd(t)}}function _6(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function Bm(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var r=e[n];Ur=r,T6(r,t)}_6(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)S6(t),t=t.sibling}function S6(t){switch(t.tag){case 0:case 11:case 15:Bm(t),t.flags&2048&&zc(9,t,t.return);break;case 3:Bm(t);break;case 12:Bm(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,hv(t)):Bm(t);break;default:Bm(t)}}function hv(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var r=e[n];Ur=r,T6(r,t)}_6(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:zc(8,e,e.return),hv(e);break;case 22:n=e.stateNode,n._visibility&2&&(n._visibility&=-3,hv(e));break;default:hv(e)}t=t.sibling}}function T6(t,e){for(;Ur!==null;){var n=Ur;switch(n.tag){case 0:case 11:case 15:zc(8,n,e);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var r=n.memoizedState.cachePool.pool;r!=null&&r.refCount++}break;case 24:Gg(n.memoizedState.cache)}if(r=n.child,r!==null)r.return=n,Ur=r;else e:for(n=t;Ur!==null;){r=Ur;var s=r.sibling,i=r.return;if(v6(r),r===n){Ur=null;break e}if(s!==null){s.return=i,Ur=s;break e}Ur=i}}}var XY={getCacheForType:function(t){var e=_s(Ir),n=e.data.get(t);return n===void 0&&(n=t(),e.data.set(t,n)),n}},YY=typeof WeakMap=="function"?WeakMap:Map,ln=0,Cn=null,Pt=null,Vt=0,an=0,wi=null,mc=!1,jf=!1,jS=!1,Sl=0,Xn=0,Fc=0,Zu=0,US=0,io=0,ff=0,Tp=null,ei=null,FN=!1,HS=0,r1=1/0,s1=null,_c=null,os=0,Sc=null,mf=null,qh=0,BN=0,VN=null,$6=null,$p=0,jN=null;function Ii(){if(ln&2&&Vt!==0)return Vt&-Vt;if(ot.T!==null){var t=cf;return t!==0?t:WS()}return BF()}function I6(){io===0&&(io=!(Vt&536870912)||Qt?LF():536870912);var t=mo.current;return t!==null&&(t.flags|=32),io}function Ai(t,e,n){(t===Cn&&(an===2||an===9)||t.cancelPendingCommit!==null)&&(pf(t,0),pc(t,Vt,io,!1)),Bg(t,n),(!(ln&2)||t!==Cn)&&(t===Cn&&(!(ln&2)&&(Zu|=n),Xn===4&&pc(t,Vt,io,!1)),Va(t))}function A6(t,e,n){if(ln&6)throw Error(xe(327));var r=!n&&(e&124)===0&&(e&t.expiredLanes)===0||Fg(t,e),s=r?eJ(t,e):OE(t,e,!0),i=r;do{if(s===0){jf&&!r&&pc(t,e,0,!1);break}else{if(n=t.current.alternate,i&&!JY(n)){s=OE(t,e,!1),i=!1;continue}if(s===2){if(i=e,t.errorRecoveryDisabledLanes&i)var o=0;else o=t.pendingLanes&-536870913,o=o!==0?o:o&536870912?536870912:0;if(o!==0){e=o;e:{var a=t;s=Tp;var l=a.current.memoizedState.isDehydrated;if(l&&(pf(a,o).flags|=256),o=OE(a,o,!1),o!==2){if(jS&&!l){a.errorRecoveryDisabledLanes|=i,Zu|=i,s=4;break e}i=ei,ei=s,i!==null&&(ei===null?ei=i:ei.push.apply(ei,i))}s=o}if(i=!1,s!==2)continue}}if(s===1){pf(t,0),pc(t,e,0,!0);break}e:{switch(r=t,i=s,i){case 0:case 1:throw Error(xe(345));case 4:if((e&4194048)!==e)break;case 6:pc(r,e,io,!mc);break e;case 2:ei=null;break;case 3:case 5:break;default:throw Error(xe(329))}if((e&62914560)===e&&(s=HS+300-xa(),10<s)){if(pc(r,e,io,!mc),xx(r,0,!0)!==0)break e;r.timeoutHandle=X6(SP.bind(null,r,n,ei,s1,FN,e,io,Zu,ff,mc,i,2,-0,0),s);break e}SP(r,n,ei,s1,FN,e,io,Zu,ff,mc,i,0,-0,0)}}break}while(1);Va(t)}function SP(t,e,n,r,s,i,o,a,l,c,u,h,m,p){if(t.timeoutHandle=-1,h=e.subtreeFlags,(h&8192||(h&16785408)===16785408)&&(Jp={stylesheets:null,count:0,unsuspend:PJ},C6(e),h=OJ(),h!==null)){t.cancelPendingCommit=h($P.bind(null,t,e,i,n,r,s,o,a,l,u,1,m,p)),pc(t,i,o,!c);return}$P(t,e,i,n,r,s,o,a,l)}function JY(t){for(var e=t;;){var n=e.tag;if((n===0||n===11||n===15)&&e.flags&16384&&(n=e.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Pi(i(),s))return!1}catch{return!1}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function pc(t,e,n,r){e&=~US,e&=~Zu,t.suspendedLanes|=e,t.pingedLanes&=~e,r&&(t.warmLanes|=e),r=t.expirationTimes;for(var s=e;0<s;){var i=31-$i(s),o=1<<i;r[i]=-1,s&=~o}n!==0&&zF(t,n,e)}function Ix(){return ln&6?!0:(Xg(0,!1),!1)}function GS(){if(Pt!==null){if(an===0)var t=Pt.return;else t=Pt,pl=Sd=null,AS(t),Wh=null,Zp=0,t=Pt;for(;t!==null;)h6(t.alternate,t),t=t.return;Pt=null}}function pf(t,e){var n=t.timeoutHandle;n!==-1&&(t.timeoutHandle=-1,gJ(n)),n=t.cancelPendingCommit,n!==null&&(t.cancelPendingCommit=null,n()),GS(),Cn=t,Pt=n=xl(t.current,null),Vt=e,an=0,wi=null,mc=!1,jf=Fg(t,e),jS=!1,ff=io=US=Zu=Fc=Xn=0,ei=Tp=null,FN=!1,e&8&&(e|=e&32);var r=t.entangledLanes;if(r!==0)for(t=t.entanglements,r&=e;0<r;){var s=31-$i(r),i=1<<s;e|=t[s],r&=~i}return Sl=e,Nx(),n}function R6(t,e){Ct=null,ot.H=Yv,e===Wg||e===_x?(e=iP(),an=3):e===g5?(e=iP(),an=4):an=e===o6?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,wi=e,Pt===null&&(Xn=1,e1(t,ro(e,t.current)))}function P6(){var t=ot.H;return ot.H=Yv,t===null?Yv:t}function D6(){var t=ot.A;return ot.A=XY,t}function UN(){Xn=4,mc||(Vt&4194048)!==Vt&&mo.current!==null||(jf=!0),!(Fc&134217727)&&!(Zu&134217727)||Cn===null||pc(Cn,Vt,io,!1)}function OE(t,e,n){var r=ln;ln|=2;var s=P6(),i=D6();(Cn!==t||Vt!==e)&&(s1=null,pf(t,e)),e=!1;var o=Xn;e:do try{if(an!==0&&Pt!==null){var a=Pt,l=wi;switch(an){case 8:GS(),o=6;break e;case 3:case 2:case 9:case 6:mo.current===null&&(e=!0);var c=an;if(an=0,wi=null,Rh(t,a,l,c),n&&jf){o=0;break e}break;default:c=an,an=0,wi=null,Rh(t,a,l,c)}}QY(),o=Xn;break}catch(u){R6(t,u)}while(1);return e&&t.shellSuspendCounter++,pl=Sd=null,ln=r,ot.H=s,ot.A=i,Pt===null&&(Cn=null,Vt=0,Nx()),o}function QY(){for(;Pt!==null;)O6(Pt)}function eJ(t,e){var n=ln;ln|=2;var r=P6(),s=D6();Cn!==t||Vt!==e?(s1=null,r1=xa()+500,pf(t,e)):jf=Fg(t,e);e:do try{if(an!==0&&Pt!==null){e=Pt;var i=wi;t:switch(an){case 1:an=0,wi=null,Rh(t,e,i,1);break;case 2:case 9:if(sP(i)){an=0,wi=null,TP(e);break}e=function(){an!==2&&an!==9||Cn!==t||(an=7),Va(t)},i.then(e,e);break e;case 3:an=7;break e;case 4:an=5;break e;case 7:sP(i)?(an=0,wi=null,TP(e)):(an=0,wi=null,Rh(t,e,i,7));break;case 5:var o=null;switch(Pt.tag){case 26:o=Pt.memoizedState;case 5:case 27:var a=Pt;if(!o||eB(o)){an=0,wi=null;var l=a.sibling;if(l!==null)Pt=l;else{var c=a.return;c!==null?(Pt=c,Ax(c)):Pt=null}break t}}an=0,wi=null,Rh(t,e,i,5);break;case 6:an=0,wi=null,Rh(t,e,i,6);break;case 8:GS(),Xn=6;break e;default:throw Error(xe(462))}}tJ();break}catch(u){R6(t,u)}while(1);return pl=Sd=null,ot.H=r,ot.A=s,ln=n,Pt!==null?0:(Cn=null,Vt=0,Nx(),Xn)}function tJ(){for(;Pt!==null&&!kX();)O6(Pt)}function O6(t){var e=d6(t.alternate,t,Sl);t.memoizedProps=t.pendingProps,e===null?Ax(t):Pt=e}function TP(t){var e=t,n=e.alternate;switch(e.tag){case 15:case 0:e=wP(n,e,e.pendingProps,e.type,void 0,Vt);break;case 11:e=wP(n,e,e.pendingProps,e.type.render,e.ref,Vt);break;case 5:AS(e);default:h6(n,e),e=Pt=h5(e,Sl),e=d6(n,e,Sl)}t.memoizedProps=t.pendingProps,e===null?Ax(t):Pt=e}function Rh(t,e,n,r){pl=Sd=null,AS(e),Wh=null,Zp=0;var s=e.return;try{if(HY(t,s,e,n,Vt)){Xn=1,e1(t,ro(n,t.current)),Pt=null;return}}catch(i){if(s!==null)throw Pt=s,i;Xn=1,e1(t,ro(n,t.current)),Pt=null;return}e.flags&32768?(Qt||r===1?t=!0:jf||Vt&536870912?t=!1:(mc=t=!0,(r===2||r===9||r===3||r===6)&&(r=mo.current,r!==null&&r.tag===13&&(r.flags|=16384))),L6(e,t)):Ax(e)}function Ax(t){var e=t;do{if(e.flags&32768){L6(e,mc);return}t=e.return;var n=WY(e.alternate,e,Sl);if(n!==null){Pt=n;return}if(e=e.sibling,e!==null){Pt=e;return}Pt=e=t}while(e!==null);Xn===0&&(Xn=5)}function L6(t,e){do{var n=qY(t.alternate,t);if(n!==null){n.flags&=32767,Pt=n;return}if(n=t.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!e&&(t=t.sibling,t!==null)){Pt=t;return}Pt=t=n}while(t!==null);Xn=6,Pt=null}function $P(t,e,n,r,s,i,o,a,l){t.cancelPendingCommit=null;do Rx();while(os!==0);if(ln&6)throw Error(xe(327));if(e!==null){if(e===t.current)throw Error(xe(177));if(i=e.lanes|e.childLanes,i|=bS,PX(t,n,i,o,a,l),t===Cn&&(Pt=Cn=null,Vt=0),mf=e,Sc=t,qh=n,BN=i,VN=s,$6=r,e.subtreeFlags&10256||e.flags&10256?(t.callbackNode=null,t.callbackPriority=0,iJ(Vv,function(){return V6(),null})):(t.callbackNode=null,t.callbackPriority=0),r=(e.flags&13878)!==0,e.subtreeFlags&13878||r){r=ot.T,ot.T=null,s=en.p,en.p=2,o=ln,ln|=4;try{KY(t,e,n)}finally{ln=o,en.p=s,ot.T=r}}os=1,M6(),z6(),F6()}}function M6(){if(os===1){os=0;var t=Sc,e=mf,n=(e.flags&13878)!==0;if(e.subtreeFlags&13878||n){n=ot.T,ot.T=null;var r=en.p;en.p=2;var s=ln;ln|=4;try{E6(e,t);var i=qN,o=s5(t.containerInfo),a=i.focusedElem,l=i.selectionRange;if(o!==a&&a&&a.ownerDocument&&r5(a.ownerDocument.documentElement,a)){if(l!==null&&yS(a)){var c=l.start,u=l.end;if(u===void 0&&(u=c),"selectionStart"in a)a.selectionStart=c,a.selectionEnd=Math.min(u,a.value.length);else{var h=a.ownerDocument||document,m=h&&h.defaultView||window;if(m.getSelection){var p=m.getSelection(),y=a.textContent.length,v=Math.min(l.start,y),x=l.end===void 0?v:Math.min(l.end,y);!p.extend&&v>x&&(o=x,x=v,v=o);var b=XR(a,v),w=XR(a,x);if(b&&w&&(p.rangeCount!==1||p.anchorNode!==b.node||p.anchorOffset!==b.offset||p.focusNode!==w.node||p.focusOffset!==w.offset)){var E=h.createRange();E.setStart(b.node,b.offset),p.removeAllRanges(),v>x?(p.addRange(E),p.extend(w.node,w.offset)):(E.setEnd(w.node,w.offset),p.addRange(E))}}}}for(h=[],p=a;p=p.parentNode;)p.nodeType===1&&h.push({element:p,left:p.scrollLeft,top:p.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<h.length;a++){var N=h[a];N.element.scrollLeft=N.left,N.element.scrollTop=N.top}}h1=!!WN,qN=WN=null}finally{ln=s,en.p=r,ot.T=n}}t.current=e,os=2}}function z6(){if(os===2){os=0;var t=Sc,e=mf,n=(e.flags&8772)!==0;if(e.subtreeFlags&8772||n){n=ot.T,ot.T=null;var r=en.p;en.p=2;var s=ln;ln|=4;try{b6(t,e.alternate,e)}finally{ln=s,en.p=r,ot.T=n}}os=3}}function F6(){if(os===4||os===3){os=0,NX();var t=Sc,e=mf,n=qh,r=$6;e.subtreeFlags&10256||e.flags&10256?os=5:(os=0,mf=Sc=null,B6(t,t.pendingLanes));var s=t.pendingLanes;if(s===0&&(_c=null),uS(n),e=e.stateNode,Ti&&typeof Ti.onCommitFiberRoot=="function")try{Ti.onCommitFiberRoot(zg,e,void 0,(e.current.flags&128)===128)}catch{}if(r!==null){e=ot.T,s=en.p,en.p=2,ot.T=null;try{for(var i=t.onRecoverableError,o=0;o<r.length;o++){var a=r[o];i(a.value,{componentStack:a.stack})}}finally{ot.T=e,en.p=s}}qh&3&&Rx(),Va(t),s=t.pendingLanes,n&4194090&&s&42?t===jN?$p++:($p=0,jN=t):$p=0,Xg(0,!1)}}function B6(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,Gg(e)))}function Rx(t){return M6(),z6(),F6(),V6()}function V6(){if(os!==5)return!1;var t=Sc,e=BN;BN=0;var n=uS(qh),r=ot.T,s=en.p;try{en.p=32>n?32:n,ot.T=null,n=VN,VN=null;var i=Sc,o=qh;if(os=0,mf=Sc=null,qh=0,ln&6)throw Error(xe(331));var a=ln;if(ln|=4,S6(i.current),N6(i,i.current,o,n),ln=a,Xg(0,!1),Ti&&typeof Ti.onPostCommitFiberRoot=="function")try{Ti.onPostCommitFiberRoot(zg,i)}catch{}return!0}finally{en.p=s,ot.T=r,B6(t,e)}}function IP(t,e,n){e=ro(n,e),e=ON(t.stateNode,e,2),t=Cc(t,e,2),t!==null&&(Bg(t,2),Va(t))}function vn(t,e,n){if(t.tag===3)IP(t,t,n);else for(;e!==null;){if(e.tag===3){IP(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(_c===null||!_c.has(r))){t=ro(n,t),n=s6(2),r=Cc(e,n,2),r!==null&&(i6(n,r,e,t),Bg(r,2),Va(r));break}}e=e.return}}function LE(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new YY;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(jS=!0,s.add(n),t=nJ.bind(null,t,e,n),e.then(t,t))}function nJ(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),t.pingedLanes|=t.suspendedLanes&n,t.warmLanes&=~n,Cn===t&&(Vt&n)===n&&(Xn===4||Xn===3&&(Vt&62914560)===Vt&&300>xa()-HS?!(ln&2)&&pf(t,0):US|=n,ff===Vt&&(ff=0)),Va(t)}function j6(t,e){e===0&&(e=MF()),t=Vf(t,e),t!==null&&(Bg(t,e),Va(t))}function rJ(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),j6(t,n)}function sJ(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;case 22:r=t.stateNode._retryCache;break;default:throw Error(xe(314))}r!==null&&r.delete(e),j6(t,n)}function iJ(t,e){return lS(t,e)}var i1=null,mh=null,HN=!1,o1=!1,ME=!1,Xu=0;function Va(t){t!==mh&&t.next===null&&(mh===null?i1=mh=t:mh=mh.next=t),o1=!0,HN||(HN=!0,aJ())}function Xg(t,e){if(!ME&&o1){ME=!0;do for(var n=!1,r=i1;r!==null;){if(!e)if(t!==0){var s=r.pendingLanes;if(s===0)var i=0;else{var o=r.suspendedLanes,a=r.pingedLanes;i=(1<<31-$i(42|t)+1)-1,i&=s&~(o&~a),i=i&201326741?i&201326741|1:i?i|2:0}i!==0&&(n=!0,AP(r,i))}else i=Vt,i=xx(r,r===Cn?i:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),!(i&3)||Fg(r,i)||(n=!0,AP(r,i));r=r.next}while(n);ME=!1}}function oJ(){U6()}function U6(){o1=HN=!1;var t=0;Xu!==0&&(pJ()&&(t=Xu),Xu=0);for(var e=xa(),n=null,r=i1;r!==null;){var s=r.next,i=H6(r,e);i===0?(r.next=null,n===null?i1=s:n.next=s,s===null&&(mh=n)):(n=r,(t!==0||i&3)&&(o1=!0)),r=s}Xg(t,!1)}function H6(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes&-62914561;0<i;){var o=31-$i(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=RX(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}if(e=Cn,n=Vt,n=xx(t,t===e?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),r=t.callbackNode,n===0||t===e&&(an===2||an===9)||t.cancelPendingCommit!==null)return r!==null&&r!==null&&cE(r),t.callbackNode=null,t.callbackPriority=0;if(!(n&3)||Fg(t,n)){if(e=n&-n,e===t.callbackPriority)return e;switch(r!==null&&cE(r),uS(n)){case 2:case 8:n=DF;break;case 32:n=Vv;break;case 268435456:n=OF;break;default:n=Vv}return r=G6.bind(null,t),n=lS(n,r),t.callbackPriority=e,t.callbackNode=n,e}return r!==null&&r!==null&&cE(r),t.callbackPriority=2,t.callbackNode=null,2}function G6(t,e){if(os!==0&&os!==5)return t.callbackNode=null,t.callbackPriority=0,null;var n=t.callbackNode;if(Rx()&&t.callbackNode!==n)return null;var r=Vt;return r=xx(t,t===Cn?r:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),r===0?null:(A6(t,r,e),H6(t,xa()),t.callbackNode!=null&&t.callbackNode===n?G6.bind(null,t):null)}function AP(t,e){if(Rx())return null;A6(t,e,!0)}function aJ(){yJ(function(){ln&6?lS(PF,oJ):U6()})}function WS(){return Xu===0&&(Xu=LF()),Xu}function RP(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:sv(""+t)}function PP(t,e){var n=e.ownerDocument.createElement("input");return n.name=e.name,n.value=e.value,t.id&&n.setAttribute("form",t.id),e.parentNode.insertBefore(n,e),t=new FormData(t),n.parentNode.removeChild(n),t}function lJ(t,e,n,r,s){if(e==="submit"&&n&&n.stateNode===s){var i=RP((s[ai]||null).action),o=r.submitter;o&&(e=(e=o[ai]||null)?RP(e.formAction):o.getAttribute("formAction"),e!==null&&(i=e,o=null));var a=new wx("action","action",null,r,s);t.push({event:a,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(Xu!==0){var l=o?PP(s,o):new FormData(s);PN(n,{pending:!0,data:l,method:s.method,action:i},null,l)}}else typeof i=="function"&&(a.preventDefault(),l=o?PP(s,o):new FormData(s),PN(n,{pending:!0,data:l,method:s.method,action:i},i,l))},currentTarget:s}]})}}for(var zE=0;zE<wN.length;zE++){var FE=wN[zE],cJ=FE.toLowerCase(),uJ=FE[0].toUpperCase()+FE.slice(1);Yo(cJ,"on"+uJ)}Yo(o5,"onAnimationEnd");Yo(a5,"onAnimationIteration");Yo(l5,"onAnimationStart");Yo("dblclick","onDoubleClick");Yo("focusin","onFocus");Yo("focusout","onBlur");Yo(SY,"onTransitionRun");Yo(TY,"onTransitionStart");Yo($Y,"onTransitionCancel");Yo(c5,"onTransitionEnd");af("onMouseEnter",["mouseout","mouseover"]);af("onMouseLeave",["mouseout","mouseover"]);af("onPointerEnter",["pointerout","pointerover"]);af("onPointerLeave",["pointerout","pointerover"]);Nd("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Nd("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Nd("onBeforeInput",["compositionend","keypress","textInput","paste"]);Nd("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Nd("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Nd("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dJ=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Xp));function W6(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;i=a,s.currentTarget=c;try{i(s)}catch(u){Qv(u)}s.currentTarget=null,i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;i=a,s.currentTarget=c;try{i(s)}catch(u){Qv(u)}s.currentTarget=null,i=l}}}}function Rt(t,e){var n=e[mN];n===void 0&&(n=e[mN]=new Set);var r=t+"__bubble";n.has(r)||(q6(e,t,2,!1),n.add(r))}function BE(t,e,n){var r=0;e&&(r|=4),q6(n,t,r,e)}var mb="_reactListening"+Math.random().toString(36).slice(2);function qS(t){if(!t[mb]){t[mb]=!0,VF.forEach(function(n){n!=="selectionchange"&&(dJ.has(n)||BE(n,!1,t),BE(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[mb]||(e[mb]=!0,BE("selectionchange",!1,e))}}function q6(t,e,n,r){switch(iB(e)){case 2:var s=zJ;break;case 8:s=FJ;break;default:s=YS}n=s.bind(null,e,n,t),s=void 0,!bN||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function VE(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&o.stateNode.containerInfo===s)return;o=o.return}for(;a!==null;){if(o=kh(a),o===null)return;if(l=o.tag,l===5||l===6||l===26||l===27){r=i=o;continue e}a=a.parentNode}}r=r.return}ZF(function(){var c=i,u=fS(n),h=[];e:{var m=u5.get(t);if(m!==void 0){var p=wx,y=t;switch(t){case"keypress":if(ov(n)===0)break e;case"keydown":case"keyup":p=iY;break;case"focusin":y="focus",p=yE;break;case"focusout":y="blur",p=yE;break;case"beforeblur":case"afterblur":p=yE;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=BR;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=qX;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=lY;break;case o5:case a5:case l5:p=XX;break;case c5:p=uY;break;case"scroll":case"scrollend":p=GX;break;case"wheel":p=hY;break;case"copy":case"cut":case"paste":p=JX;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=jR;break;case"toggle":case"beforetoggle":p=mY}var v=(e&4)!==0,x=!v&&(t==="scroll"||t==="scrollend"),b=v?m!==null?m+"Capture":null:m;v=[];for(var w=c,E;w!==null;){var N=w;if(E=N.stateNode,N=N.tag,N!==5&&N!==26&&N!==27||E===null||b===null||(N=Hp(w,b),N!=null&&v.push(Yp(w,N,E))),x)break;w=w.return}0<v.length&&(m=new p(m,y,null,n,u),h.push({event:m,listeners:v}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",m&&n!==yN&&(y=n.relatedTarget||n.fromElement)&&(kh(y)||y[Ff]))break e;if((p||m)&&(m=u.window===u?u:(m=u.ownerDocument)?m.defaultView||m.parentWindow:window,p?(y=n.relatedTarget||n.toElement,p=c,y=y?kh(y):null,y!==null&&(x=Mg(y),v=y.tag,y!==x||v!==5&&v!==27&&v!==6)&&(y=null)):(p=null,y=c),p!==y)){if(v=BR,N="onMouseLeave",b="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(v=jR,N="onPointerLeave",b="onPointerEnter",w="pointer"),x=p==null?m:np(p),E=y==null?m:np(y),m=new v(N,w+"leave",p,n,u),m.target=x,m.relatedTarget=E,N=null,kh(u)===c&&(v=new v(b,w+"enter",y,n,u),v.target=E,v.relatedTarget=x,N=v),x=N,p&&y)t:{for(v=p,b=y,w=0,E=v;E;E=eh(E))w++;for(E=0,N=b;N;N=eh(N))E++;for(;0<w-E;)v=eh(v),w--;for(;0<E-w;)b=eh(b),E--;for(;w--;){if(v===b||b!==null&&v===b.alternate)break t;v=eh(v),b=eh(b)}v=null}else v=null;p!==null&&DP(h,m,p,v,!1),y!==null&&x!==null&&DP(h,x,y,v,!0)}}e:{if(m=c?np(c):window,p=m.nodeName&&m.nodeName.toLowerCase(),p==="select"||p==="input"&&m.type==="file")var C=WR;else if(GR(m))if(t5)C=NY;else{C=EY;var S=wY}else p=m.nodeName,!p||p.toLowerCase()!=="input"||m.type!=="checkbox"&&m.type!=="radio"?c&&hS(c.elementType)&&(C=WR):C=kY;if(C&&(C=C(t,c))){e5(h,C,n,u);break e}S&&S(t,m,c),t==="focusout"&&c&&m.type==="number"&&c.memoizedProps.value!=null&&gN(m,"number",m.value)}switch(S=c?np(c):window,t){case"focusin":(GR(S)||S.contentEditable==="true")&&(_h=S,vN=c,vp=null);break;case"focusout":vp=vN=_h=null;break;case"mousedown":xN=!0;break;case"contextmenu":case"mouseup":case"dragend":xN=!1,YR(h,n,u);break;case"selectionchange":if(_Y)break;case"keydown":case"keyup":YR(h,n,u)}var T;if(gS)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else Ch?JF(t,n)&&(I="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(YF&&n.locale!=="ko"&&(Ch||I!=="onCompositionStart"?I==="onCompositionEnd"&&Ch&&(T=XF()):(fc=u,mS="value"in fc?fc.value:fc.textContent,Ch=!0)),S=a1(c,I),0<S.length&&(I=new VR(I,t,null,n,u),h.push({event:I,listeners:S}),T?I.data=T:(T=QF(n),T!==null&&(I.data=T)))),(T=gY?yY(t,n):bY(t,n))&&(I=a1(c,"onBeforeInput"),0<I.length&&(S=new VR("onBeforeInput","beforeinput",null,n,u),h.push({event:S,listeners:I}),S.data=T)),lJ(h,t,c,n,u)}W6(h,e)})}function Yp(t,e,n){return{instance:t,listener:e,currentTarget:n}}function a1(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;if(s=s.tag,s!==5&&s!==26&&s!==27||i===null||(s=Hp(t,n),s!=null&&r.unshift(Yp(t,s,i)),s=Hp(t,e),s!=null&&r.push(Yp(t,s,i))),t.tag===3)return r;t=t.return}return[]}function eh(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function DP(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(a=a.tag,l!==null&&l===r)break;a!==5&&a!==26&&a!==27||c===null||(l=c,s?(c=Hp(n,i),c!=null&&o.unshift(Yp(n,c,l))):s||(c=Hp(n,i),c!=null&&o.push(Yp(n,c,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var hJ=/\r\n?/g,fJ=/\u0000|\uFFFD/g;function OP(t){return(typeof t=="string"?t:""+t).replace(hJ,`
`).replace(fJ,"")}function K6(t,e){return e=OP(e),OP(t)===e}function Px(){}function hn(t,e,n,r,s,i){switch(n){case"children":typeof r=="string"?e==="body"||e==="textarea"&&r===""||lf(t,r):(typeof r=="number"||typeof r=="bigint")&&e!=="body"&&lf(t,""+r);break;case"className":ab(t,"class",r);break;case"tabIndex":ab(t,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":ab(t,n,r);break;case"style":KF(t,r,i);break;case"data":if(e!=="object"){ab(t,"data",r);break}case"src":case"href":if(r===""&&(e!=="a"||n!=="href")){t.removeAttribute(n);break}if(r==null||typeof r=="function"||typeof r=="symbol"||typeof r=="boolean"){t.removeAttribute(n);break}r=sv(""+r),t.setAttribute(n,r);break;case"action":case"formAction":if(typeof r=="function"){t.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof i=="function"&&(n==="formAction"?(e!=="input"&&hn(t,e,"name",s.name,s,null),hn(t,e,"formEncType",s.formEncType,s,null),hn(t,e,"formMethod",s.formMethod,s,null),hn(t,e,"formTarget",s.formTarget,s,null)):(hn(t,e,"encType",s.encType,s,null),hn(t,e,"method",s.method,s,null),hn(t,e,"target",s.target,s,null)));if(r==null||typeof r=="symbol"||typeof r=="boolean"){t.removeAttribute(n);break}r=sv(""+r),t.setAttribute(n,r);break;case"onClick":r!=null&&(t.onclick=Px);break;case"onScroll":r!=null&&Rt("scroll",t);break;case"onScrollEnd":r!=null&&Rt("scrollend",t);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(xe(61));if(n=r.__html,n!=null){if(s.children!=null)throw Error(xe(60));t.innerHTML=n}}break;case"multiple":t.multiple=r&&typeof r!="function"&&typeof r!="symbol";break;case"muted":t.muted=r&&typeof r!="function"&&typeof r!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(r==null||typeof r=="function"||typeof r=="boolean"||typeof r=="symbol"){t.removeAttribute("xlink:href");break}n=sv(""+r),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":r!=null&&typeof r!="function"&&typeof r!="symbol"?t.setAttribute(n,""+r):t.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&typeof r!="function"&&typeof r!="symbol"?t.setAttribute(n,""):t.removeAttribute(n);break;case"capture":case"download":r===!0?t.setAttribute(n,""):r!==!1&&r!=null&&typeof r!="function"&&typeof r!="symbol"?t.setAttribute(n,r):t.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":r!=null&&typeof r!="function"&&typeof r!="symbol"&&!isNaN(r)&&1<=r?t.setAttribute(n,r):t.removeAttribute(n);break;case"rowSpan":case"start":r==null||typeof r=="function"||typeof r=="symbol"||isNaN(r)?t.removeAttribute(n):t.setAttribute(n,r);break;case"popover":Rt("beforetoggle",t),Rt("toggle",t),rv(t,"popover",r);break;case"xlinkActuate":Ka(t,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":Ka(t,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":Ka(t,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":Ka(t,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":Ka(t,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":Ka(t,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":Ka(t,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":Ka(t,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":Ka(t,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":rv(t,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=UX.get(n)||n,rv(t,n,r))}}function GN(t,e,n,r,s,i){switch(n){case"style":KF(t,r,i);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(xe(61));if(n=r.__html,n!=null){if(s.children!=null)throw Error(xe(60));t.innerHTML=n}}break;case"children":typeof r=="string"?lf(t,r):(typeof r=="number"||typeof r=="bigint")&&lf(t,""+r);break;case"onScroll":r!=null&&Rt("scroll",t);break;case"onScrollEnd":r!=null&&Rt("scrollend",t);break;case"onClick":r!=null&&(t.onclick=Px);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!jF.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(s=n.endsWith("Capture"),e=n.slice(2,s?n.length-7:void 0),i=t[ai]||null,i=i!=null?i[n]:null,typeof i=="function"&&t.removeEventListener(e,i,s),typeof r=="function")){typeof i!="function"&&i!==null&&(n in t?t[n]=null:t.hasAttribute(n)&&t.removeAttribute(n)),t.addEventListener(e,r,s);break e}n in t?t[n]=r:r===!0?t.setAttribute(n,""):rv(t,n,r)}}}function as(t,e,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Rt("error",t),Rt("load",t);var r=!1,s=!1,i;for(i in n)if(n.hasOwnProperty(i)){var o=n[i];if(o!=null)switch(i){case"src":r=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(xe(137,e));default:hn(t,e,i,o,n,null)}}s&&hn(t,e,"srcSet",n.srcSet,n,null),r&&hn(t,e,"src",n.src,n,null);return;case"input":Rt("invalid",t);var a=i=o=s=null,l=null,c=null;for(r in n)if(n.hasOwnProperty(r)){var u=n[r];if(u!=null)switch(r){case"name":s=u;break;case"type":o=u;break;case"checked":l=u;break;case"defaultChecked":c=u;break;case"value":i=u;break;case"defaultValue":a=u;break;case"children":case"dangerouslySetInnerHTML":if(u!=null)throw Error(xe(137,e));break;default:hn(t,e,r,u,n,null)}}GF(t,i,a,l,c,o,s,!1),jv(t);return;case"select":Rt("invalid",t),r=o=i=null;for(s in n)if(n.hasOwnProperty(s)&&(a=n[s],a!=null))switch(s){case"value":i=a;break;case"defaultValue":o=a;break;case"multiple":r=a;default:hn(t,e,s,a,n,null)}e=i,n=o,t.multiple=!!r,e!=null?Vh(t,!!r,e,!1):n!=null&&Vh(t,!!r,n,!0);return;case"textarea":Rt("invalid",t),i=s=r=null;for(o in n)if(n.hasOwnProperty(o)&&(a=n[o],a!=null))switch(o){case"value":r=a;break;case"defaultValue":s=a;break;case"children":i=a;break;case"dangerouslySetInnerHTML":if(a!=null)throw Error(xe(91));break;default:hn(t,e,o,a,n,null)}qF(t,r,s,i),jv(t);return;case"option":for(l in n)if(n.hasOwnProperty(l)&&(r=n[l],r!=null))switch(l){case"selected":t.selected=r&&typeof r!="function"&&typeof r!="symbol";break;default:hn(t,e,l,r,n,null)}return;case"dialog":Rt("beforetoggle",t),Rt("toggle",t),Rt("cancel",t),Rt("close",t);break;case"iframe":case"object":Rt("load",t);break;case"video":case"audio":for(r=0;r<Xp.length;r++)Rt(Xp[r],t);break;case"image":Rt("error",t),Rt("load",t);break;case"details":Rt("toggle",t);break;case"embed":case"source":case"link":Rt("error",t),Rt("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(c in n)if(n.hasOwnProperty(c)&&(r=n[c],r!=null))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(xe(137,e));default:hn(t,e,c,r,n,null)}return;default:if(hS(e)){for(u in n)n.hasOwnProperty(u)&&(r=n[u],r!==void 0&&GN(t,e,u,r,n,void 0));return}}for(a in n)n.hasOwnProperty(a)&&(r=n[a],r!=null&&hn(t,e,a,r,n,null))}function mJ(t,e,n,r){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var s=null,i=null,o=null,a=null,l=null,c=null,u=null;for(p in n){var h=n[p];if(n.hasOwnProperty(p)&&h!=null)switch(p){case"checked":break;case"value":break;case"defaultValue":l=h;default:r.hasOwnProperty(p)||hn(t,e,p,null,r,h)}}for(var m in r){var p=r[m];if(h=n[m],r.hasOwnProperty(m)&&(p!=null||h!=null))switch(m){case"type":i=p;break;case"name":s=p;break;case"checked":c=p;break;case"defaultChecked":u=p;break;case"value":o=p;break;case"defaultValue":a=p;break;case"children":case"dangerouslySetInnerHTML":if(p!=null)throw Error(xe(137,e));break;default:p!==h&&hn(t,e,m,p,r,h)}}pN(t,o,a,l,c,u,i,s);return;case"select":p=o=a=m=null;for(i in n)if(l=n[i],n.hasOwnProperty(i)&&l!=null)switch(i){case"value":break;case"multiple":p=l;default:r.hasOwnProperty(i)||hn(t,e,i,null,r,l)}for(s in r)if(i=r[s],l=n[s],r.hasOwnProperty(s)&&(i!=null||l!=null))switch(s){case"value":m=i;break;case"defaultValue":a=i;break;case"multiple":o=i;default:i!==l&&hn(t,e,s,i,r,l)}e=a,n=o,r=p,m!=null?Vh(t,!!n,m,!1):!!r!=!!n&&(e!=null?Vh(t,!!n,e,!0):Vh(t,!!n,n?[]:"",!1));return;case"textarea":p=m=null;for(a in n)if(s=n[a],n.hasOwnProperty(a)&&s!=null&&!r.hasOwnProperty(a))switch(a){case"value":break;case"children":break;default:hn(t,e,a,null,r,s)}for(o in r)if(s=r[o],i=n[o],r.hasOwnProperty(o)&&(s!=null||i!=null))switch(o){case"value":m=s;break;case"defaultValue":p=s;break;case"children":break;case"dangerouslySetInnerHTML":if(s!=null)throw Error(xe(91));break;default:s!==i&&hn(t,e,o,s,r,i)}WF(t,m,p);return;case"option":for(var y in n)if(m=n[y],n.hasOwnProperty(y)&&m!=null&&!r.hasOwnProperty(y))switch(y){case"selected":t.selected=!1;break;default:hn(t,e,y,null,r,m)}for(l in r)if(m=r[l],p=n[l],r.hasOwnProperty(l)&&m!==p&&(m!=null||p!=null))switch(l){case"selected":t.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:hn(t,e,l,m,r,p)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var v in n)m=n[v],n.hasOwnProperty(v)&&m!=null&&!r.hasOwnProperty(v)&&hn(t,e,v,null,r,m);for(c in r)if(m=r[c],p=n[c],r.hasOwnProperty(c)&&m!==p&&(m!=null||p!=null))switch(c){case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(xe(137,e));break;default:hn(t,e,c,m,r,p)}return;default:if(hS(e)){for(var x in n)m=n[x],n.hasOwnProperty(x)&&m!==void 0&&!r.hasOwnProperty(x)&&GN(t,e,x,void 0,r,m);for(u in r)m=r[u],p=n[u],!r.hasOwnProperty(u)||m===p||m===void 0&&p===void 0||GN(t,e,u,m,r,p);return}}for(var b in n)m=n[b],n.hasOwnProperty(b)&&m!=null&&!r.hasOwnProperty(b)&&hn(t,e,b,null,r,m);for(h in r)m=r[h],p=n[h],!r.hasOwnProperty(h)||m===p||m==null&&p==null||hn(t,e,h,m,r,p)}var WN=null,qN=null;function l1(t){return t.nodeType===9?t:t.ownerDocument}function LP(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Z6(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function KN(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var jE=null;function pJ(){var t=window.event;return t&&t.type==="popstate"?t===jE?!1:(jE=t,!0):(jE=null,!1)}var X6=typeof setTimeout=="function"?setTimeout:void 0,gJ=typeof clearTimeout=="function"?clearTimeout:void 0,MP=typeof Promise=="function"?Promise:void 0,yJ=typeof queueMicrotask=="function"?queueMicrotask:typeof MP<"u"?function(t){return MP.resolve(null).then(t).catch(bJ)}:X6;function bJ(t){setTimeout(function(){throw t})}function Zc(t){return t==="head"}function zP(t,e){var n=e,r=0,s=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(0<r&&8>r){n=r;var o=t.ownerDocument;if(n&1&&Ip(o.documentElement),n&2&&Ip(o.body),n&4)for(n=o.head,Ip(n),o=n.firstChild;o;){var a=o.nextSibling,l=o.nodeName;o[Vg]||l==="SCRIPT"||l==="STYLE"||l==="LINK"&&o.rel.toLowerCase()==="stylesheet"||n.removeChild(o),o=a}}if(s===0){t.removeChild(i),ng(e);return}s--}else n==="$"||n==="$?"||n==="$!"?s++:r=n.charCodeAt(0)-48;else r=0;n=i}while(n);ng(e)}function ZN(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var n=e;switch(e=e.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":ZN(n),dS(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}t.removeChild(n)}}function vJ(t,e,n,r){for(;t.nodeType===1;){var s=n;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!r&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(r){if(!t[Vg])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(i=t.getAttribute("rel"),i==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(i!==s.rel||t.getAttribute("href")!==(s.href==null||s.href===""?null:s.href)||t.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin)||t.getAttribute("title")!==(s.title==null?null:s.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(i=t.getAttribute("src"),(i!==(s.src==null?null:s.src)||t.getAttribute("type")!==(s.type==null?null:s.type)||t.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin))&&i&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var i=s.name==null?null:""+s.name;if(s.type==="hidden"&&t.getAttribute("name")===i)return t}else return t;if(t=Bo(t.nextSibling),t===null)break}return null}function xJ(t,e,n){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=Bo(t.nextSibling),t===null))return null;return t}function XN(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function wJ(t,e){var n=t.ownerDocument;if(t.data!=="$?"||n.readyState==="complete")e();else{var r=function(){e(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),t._reactRetry=r}}function Bo(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="F!"||e==="F")break;if(e==="/$")return null}}return t}var YN=null;function FP(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}function Y6(t,e,n){switch(e=l1(n),t){case"html":if(t=e.documentElement,!t)throw Error(xe(452));return t;case"head":if(t=e.head,!t)throw Error(xe(453));return t;case"body":if(t=e.body,!t)throw Error(xe(454));return t;default:throw Error(xe(451))}}function Ip(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);dS(t)}var po=new Map,BP=new Set;function c1(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var zl=en.d;en.d={f:EJ,r:kJ,D:NJ,C:CJ,L:_J,m:SJ,X:$J,S:TJ,M:IJ};function EJ(){var t=zl.f(),e=Ix();return t||e}function kJ(t){var e=Bf(t);e!==null&&e.tag===5&&e.type==="form"?H5(e):zl.r(t)}var Uf=typeof document>"u"?null:document;function J6(t,e,n){var r=Uf;if(r&&typeof e=="string"&&e){var s=no(e);s='link[rel="'+t+'"][href="'+s+'"]',typeof n=="string"&&(s+='[crossorigin="'+n+'"]'),BP.has(s)||(BP.add(s),t={rel:t,crossOrigin:n,href:e},r.querySelector(s)===null&&(e=r.createElement("link"),as(e,"link",t),Hr(e),r.head.appendChild(e)))}}function NJ(t){zl.D(t),J6("dns-prefetch",t,null)}function CJ(t,e){zl.C(t,e),J6("preconnect",t,e)}function _J(t,e,n){zl.L(t,e,n);var r=Uf;if(r&&t&&e){var s='link[rel="preload"][as="'+no(e)+'"]';e==="image"&&n&&n.imageSrcSet?(s+='[imagesrcset="'+no(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(s+='[imagesizes="'+no(n.imageSizes)+'"]')):s+='[href="'+no(t)+'"]';var i=s;switch(e){case"style":i=gf(t);break;case"script":i=Hf(t)}po.has(i)||(t=Rn({rel:"preload",href:e==="image"&&n&&n.imageSrcSet?void 0:t,as:e},n),po.set(i,t),r.querySelector(s)!==null||e==="style"&&r.querySelector(Yg(i))||e==="script"&&r.querySelector(Jg(i))||(e=r.createElement("link"),as(e,"link",t),Hr(e),r.head.appendChild(e)))}}function SJ(t,e){zl.m(t,e);var n=Uf;if(n&&t){var r=e&&typeof e.as=="string"?e.as:"script",s='link[rel="modulepreload"][as="'+no(r)+'"][href="'+no(t)+'"]',i=s;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":i=Hf(t)}if(!po.has(i)&&(t=Rn({rel:"modulepreload",href:t},e),po.set(i,t),n.querySelector(s)===null)){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Jg(i)))return}r=n.createElement("link"),as(r,"link",t),Hr(r),n.head.appendChild(r)}}}function TJ(t,e,n){zl.S(t,e,n);var r=Uf;if(r&&t){var s=Bh(r).hoistableStyles,i=gf(t);e=e||"default";var o=s.get(i);if(!o){var a={loading:0,preload:null};if(o=r.querySelector(Yg(i)))a.loading=5;else{t=Rn({rel:"stylesheet",href:t,"data-precedence":e},n),(n=po.get(i))&&KS(t,n);var l=o=r.createElement("link");Hr(l),as(l,"link",t),l._p=new Promise(function(c,u){l.onload=c,l.onerror=u}),l.addEventListener("load",function(){a.loading|=1}),l.addEventListener("error",function(){a.loading|=2}),a.loading|=4,fv(o,e,r)}o={type:"stylesheet",instance:o,count:1,state:a},s.set(i,o)}}}function $J(t,e){zl.X(t,e);var n=Uf;if(n&&t){var r=Bh(n).hoistableScripts,s=Hf(t),i=r.get(s);i||(i=n.querySelector(Jg(s)),i||(t=Rn({src:t,async:!0},e),(e=po.get(s))&&ZS(t,e),i=n.createElement("script"),Hr(i),as(i,"link",t),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},r.set(s,i))}}function IJ(t,e){zl.M(t,e);var n=Uf;if(n&&t){var r=Bh(n).hoistableScripts,s=Hf(t),i=r.get(s);i||(i=n.querySelector(Jg(s)),i||(t=Rn({src:t,async:!0,type:"module"},e),(e=po.get(s))&&ZS(t,e),i=n.createElement("script"),Hr(i),as(i,"link",t),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},r.set(s,i))}}function VP(t,e,n,r){var s=(s=kc.current)?c1(s):null;if(!s)throw Error(xe(446));switch(t){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(e=gf(n.href),n=Bh(s).hoistableStyles,r=n.get(e),r||(r={type:"style",instance:null,count:0,state:null},n.set(e,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){t=gf(n.href);var i=Bh(s).hoistableStyles,o=i.get(t);if(o||(s=s.ownerDocument||s,o={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},i.set(t,o),(i=s.querySelector(Yg(t)))&&!i._p&&(o.instance=i,o.state.loading=5),po.has(t)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},po.set(t,n),i||AJ(s,t,n,o.state))),e&&r===null)throw Error(xe(528,""));return o}if(e&&r!==null)throw Error(xe(529,""));return null;case"script":return e=n.async,n=n.src,typeof n=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=Hf(n),n=Bh(s).hoistableScripts,r=n.get(e),r||(r={type:"script",instance:null,count:0,state:null},n.set(e,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(xe(444,t))}}function gf(t){return'href="'+no(t)+'"'}function Yg(t){return'link[rel="stylesheet"]['+t+"]"}function Q6(t){return Rn({},t,{"data-precedence":t.precedence,precedence:null})}function AJ(t,e,n,r){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?r.loading=1:(e=t.createElement("link"),r.preload=e,e.addEventListener("load",function(){return r.loading|=1}),e.addEventListener("error",function(){return r.loading|=2}),as(e,"link",n),Hr(e),t.head.appendChild(e))}function Hf(t){return'[src="'+no(t)+'"]'}function Jg(t){return"script[async]"+t}function jP(t,e,n){if(e.count++,e.instance===null)switch(e.type){case"style":var r=t.querySelector('style[data-href~="'+no(n.href)+'"]');if(r)return e.instance=r,Hr(r),r;var s=Rn({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return r=(t.ownerDocument||t).createElement("style"),Hr(r),as(r,"style",s),fv(r,n.precedence,t),e.instance=r;case"stylesheet":s=gf(n.href);var i=t.querySelector(Yg(s));if(i)return e.state.loading|=4,e.instance=i,Hr(i),i;r=Q6(n),(s=po.get(s))&&KS(r,s),i=(t.ownerDocument||t).createElement("link"),Hr(i);var o=i;return o._p=new Promise(function(a,l){o.onload=a,o.onerror=l}),as(i,"link",r),e.state.loading|=4,fv(i,n.precedence,t),e.instance=i;case"script":return i=Hf(n.src),(s=t.querySelector(Jg(i)))?(e.instance=s,Hr(s),s):(r=n,(s=po.get(i))&&(r=Rn({},n),ZS(r,s)),t=t.ownerDocument||t,s=t.createElement("script"),Hr(s),as(s,"link",r),t.head.appendChild(s),e.instance=s);case"void":return null;default:throw Error(xe(443,e.type))}else e.type==="stylesheet"&&!(e.state.loading&4)&&(r=e.instance,e.state.loading|=4,fv(r,n.precedence,t));return e.instance}function fv(t,e,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),s=r.length?r[r.length-1]:null,i=s,o=0;o<r.length;o++){var a=r[o];if(a.dataset.precedence===e)i=a;else if(i!==s)break}i?i.parentNode.insertBefore(t,i.nextSibling):(e=n.nodeType===9?n.head:n,e.insertBefore(t,e.firstChild))}function KS(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function ZS(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var mv=null;function UP(t,e,n){if(mv===null){var r=new Map,s=mv=new Map;s.set(n,r)}else s=mv,r=s.get(n),r||(r=new Map,s.set(n,r));if(r.has(t))return r;for(r.set(t,null),n=n.getElementsByTagName(t),s=0;s<n.length;s++){var i=n[s];if(!(i[Vg]||i[Cs]||t==="link"&&i.getAttribute("rel")==="stylesheet")&&i.namespaceURI!=="http://www.w3.org/2000/svg"){var o=i.getAttribute(e)||"";o=t+o;var a=r.get(o);a?a.push(i):r.set(o,[i])}}return r}function HP(t,e,n){t=t.ownerDocument||t,t.head.insertBefore(n,e==="title"?t.querySelector("head > title"):null)}function RJ(t,e,n){if(n===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return t=e.disabled,typeof e.precedence=="string"&&t==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function eB(t){return!(t.type==="stylesheet"&&!(t.state.loading&3))}var Jp=null;function PJ(){}function DJ(t,e,n){if(Jp===null)throw Error(xe(475));var r=Jp;if(e.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&!(e.state.loading&4)){if(e.instance===null){var s=gf(n.href),i=t.querySelector(Yg(s));if(i){t=i._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(r.count++,r=u1.bind(r),t.then(r,r)),e.state.loading|=4,e.instance=i,Hr(i);return}i=t.ownerDocument||t,n=Q6(n),(s=po.get(s))&&KS(n,s),i=i.createElement("link"),Hr(i);var o=i;o._p=new Promise(function(a,l){o.onload=a,o.onerror=l}),as(i,"link",n),e.instance=i}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(e,t),(t=e.state.preload)&&!(e.state.loading&3)&&(r.count++,e=u1.bind(r),t.addEventListener("load",e),t.addEventListener("error",e))}}function OJ(){if(Jp===null)throw Error(xe(475));var t=Jp;return t.stylesheets&&t.count===0&&JN(t,t.stylesheets),0<t.count?function(e){var n=setTimeout(function(){if(t.stylesheets&&JN(t,t.stylesheets),t.unsuspend){var r=t.unsuspend;t.unsuspend=null,r()}},6e4);return t.unsuspend=e,function(){t.unsuspend=null,clearTimeout(n)}}:null}function u1(){if(this.count--,this.count===0){if(this.stylesheets)JN(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var d1=null;function JN(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,d1=new Map,e.forEach(LJ,t),d1=null,u1.call(t))}function LJ(t,e){if(!(e.state.loading&4)){var n=d1.get(t);if(n)var r=n.get(null);else{n=new Map,d1.set(t,n);for(var s=t.querySelectorAll("link[data-precedence],style[data-precedence]"),i=0;i<s.length;i++){var o=s[i];(o.nodeName==="LINK"||o.getAttribute("media")!=="not all")&&(n.set(o.dataset.precedence,o),r=o)}r&&n.set(null,r)}s=e.instance,o=s.getAttribute("data-precedence"),i=n.get(o)||r,i===r&&n.set(null,s),n.set(o,s),this.count++,r=u1.bind(this),s.addEventListener("load",r),s.addEventListener("error",r),i?i.parentNode.insertBefore(s,i.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(s,t.firstChild)),e.state.loading|=4}}var Qp={$$typeof:hl,Provider:null,Consumer:null,_currentValue:Hu,_currentValue2:Hu,_threadCount:0};function MJ(t,e,n,r,s,i,o,a){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=uE(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=uE(0),this.hiddenUpdates=uE(null),this.identifierPrefix=r,this.onUncaughtError=s,this.onCaughtError=i,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=a,this.incompleteTransitions=new Map}function tB(t,e,n,r,s,i,o,a,l,c,u,h){return t=new MJ(t,e,n,o,a,l,c,h),e=1,i===!0&&(e|=24),i=ki(3,null,null,e),t.current=i,i.stateNode=t,e=kS(),e.refCount++,t.pooledCache=e,e.refCount++,i.memoizedState={element:r,isDehydrated:n,cache:e},CS(i),t}function nB(t){return t?(t=$h,t):$h}function rB(t,e,n,r,s,i){s=nB(s),r.context===null?r.context=s:r.pendingContext=s,r=Nc(e),r.payload={element:n},i=i===void 0?null:i,i!==null&&(r.callback=i),n=Cc(t,r,e),n!==null&&(Ai(n,t,e),Ep(n,t,e))}function GP(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function XS(t,e){GP(t,e),(t=t.alternate)&&GP(t,e)}function sB(t){if(t.tag===13){var e=Vf(t,67108864);e!==null&&Ai(e,t,67108864),XS(t,67108864)}}var h1=!0;function zJ(t,e,n,r){var s=ot.T;ot.T=null;var i=en.p;try{en.p=2,YS(t,e,n,r)}finally{en.p=i,ot.T=s}}function FJ(t,e,n,r){var s=ot.T;ot.T=null;var i=en.p;try{en.p=8,YS(t,e,n,r)}finally{en.p=i,ot.T=s}}function YS(t,e,n,r){if(h1){var s=QN(r);if(s===null)VE(t,e,r,f1,n),WP(t,r);else if(VJ(s,t,e,n,r))r.stopPropagation();else if(WP(t,r),e&4&&-1<BJ.indexOf(t)){for(;s!==null;){var i=Bf(s);if(i!==null)switch(i.tag){case 3:if(i=i.stateNode,i.current.memoizedState.isDehydrated){var o=Nu(i.pendingLanes);if(o!==0){var a=i;for(a.pendingLanes|=2,a.entangledLanes|=2;o;){var l=1<<31-$i(o);a.entanglements[1]|=l,o&=~l}Va(i),!(ln&6)&&(r1=xa()+500,Xg(0,!1))}}break;case 13:a=Vf(i,2),a!==null&&Ai(a,i,2),Ix(),XS(i,2)}if(i=QN(r),i===null&&VE(t,e,r,f1,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else VE(t,e,r,null,n)}}function QN(t){return t=fS(t),JS(t)}var f1=null;function JS(t){if(f1=null,t=kh(t),t!==null){var e=Mg(t);if(e===null)t=null;else{var n=e.tag;if(n===13){if(t=$F(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return f1=t,null}function iB(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(CX()){case PF:return 2;case DF:return 8;case Vv:case _X:return 32;case OF:return 268435456;default:return 32}default:return 32}}var eC=!1,Tc=null,$c=null,Ic=null,eg=new Map,tg=new Map,lc=[],BJ="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function WP(t,e){switch(t){case"focusin":case"focusout":Tc=null;break;case"dragenter":case"dragleave":$c=null;break;case"mouseover":case"mouseout":Ic=null;break;case"pointerover":case"pointerout":eg.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":tg.delete(e.pointerId)}}function Vm(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Bf(e),e!==null&&sB(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function VJ(t,e,n,r,s){switch(e){case"focusin":return Tc=Vm(Tc,t,e,n,r,s),!0;case"dragenter":return $c=Vm($c,t,e,n,r,s),!0;case"mouseover":return Ic=Vm(Ic,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return eg.set(i,Vm(eg.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,tg.set(i,Vm(tg.get(i)||null,t,e,n,r,s)),!0}return!1}function oB(t){var e=kh(t.target);if(e!==null){var n=Mg(e);if(n!==null){if(e=n.tag,e===13){if(e=$F(n),e!==null){t.blockedOn=e,DX(t.priority,function(){if(n.tag===13){var r=Ii();r=cS(r);var s=Vf(n,r);s!==null&&Ai(s,n,r),XS(n,r)}});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function pv(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=QN(t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);yN=r,n.target.dispatchEvent(r),yN=null}else return e=Bf(n),e!==null&&sB(e),t.blockedOn=n,!1;e.shift()}return!0}function qP(t,e,n){pv(t)&&n.delete(e)}function jJ(){eC=!1,Tc!==null&&pv(Tc)&&(Tc=null),$c!==null&&pv($c)&&($c=null),Ic!==null&&pv(Ic)&&(Ic=null),eg.forEach(qP),tg.forEach(qP)}function pb(t,e){t.blockedOn===e&&(t.blockedOn=null,eC||(eC=!0,Or.unstable_scheduleCallback(Or.unstable_NormalPriority,jJ)))}var gb=null;function KP(t){gb!==t&&(gb=t,Or.unstable_scheduleCallback(Or.unstable_NormalPriority,function(){gb===t&&(gb=null);for(var e=0;e<t.length;e+=3){var n=t[e],r=t[e+1],s=t[e+2];if(typeof r!="function"){if(JS(r||n)===null)continue;break}var i=Bf(n);i!==null&&(t.splice(e,3),e-=3,PN(i,{pending:!0,data:s,method:n.method,action:r},r,s))}}))}function ng(t){function e(l){return pb(l,t)}Tc!==null&&pb(Tc,t),$c!==null&&pb($c,t),Ic!==null&&pb(Ic,t),eg.forEach(e),tg.forEach(e);for(var n=0;n<lc.length;n++){var r=lc[n];r.blockedOn===t&&(r.blockedOn=null)}for(;0<lc.length&&(n=lc[0],n.blockedOn===null);)oB(n),n.blockedOn===null&&lc.shift();if(n=(t.ownerDocument||t).$$reactFormReplay,n!=null)for(r=0;r<n.length;r+=3){var s=n[r],i=n[r+1],o=s[ai]||null;if(typeof i=="function")o||KP(n);else if(o){var a=null;if(i&&i.hasAttribute("formAction")){if(s=i,o=i[ai]||null)a=o.formAction;else if(JS(s)!==null)continue}else a=o.action;typeof a=="function"?n[r+1]=a:(n.splice(r,3),r-=3),KP(n)}}}function QS(t){this._internalRoot=t}Dx.prototype.render=QS.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(xe(409));var n=e.current,r=Ii();rB(n,r,t,e,null,null)};Dx.prototype.unmount=QS.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;rB(t.current,2,null,t,null,null),Ix(),e[Ff]=null}};function Dx(t){this._internalRoot=t}Dx.prototype.unstable_scheduleHydration=function(t){if(t){var e=BF();t={blockedOn:null,target:t,priority:e};for(var n=0;n<lc.length&&e!==0&&e<lc[n].priority;n++);lc.splice(n,0,t),n===0&&oB(t)}};var ZP=SF.version;if(ZP!=="19.1.0")throw Error(xe(527,ZP,"19.1.0"));en.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(xe(188)):(t=Object.keys(t).join(","),Error(xe(268,t)));return t=bX(e),t=t!==null?IF(t):null,t=t===null?null:t.stateNode,t};var UJ={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:ot,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yb=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yb.isDisabled&&yb.supportsFiber)try{zg=yb.inject(UJ),Ti=yb}catch{}}bx.createRoot=function(t,e){if(!TF(t))throw Error(xe(299));var n=!1,r="",s=t6,i=n6,o=r6,a=null;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onUncaughtError!==void 0&&(s=e.onUncaughtError),e.onCaughtError!==void 0&&(i=e.onCaughtError),e.onRecoverableError!==void 0&&(o=e.onRecoverableError),e.unstable_transitionCallbacks!==void 0&&(a=e.unstable_transitionCallbacks)),e=tB(t,1,!1,null,null,n,r,s,i,o,a,null),t[Ff]=e.current,qS(t),new QS(e)};bx.hydrateRoot=function(t,e,n){if(!TF(t))throw Error(xe(299));var r=!1,s="",i=t6,o=n6,a=r6,l=null,c=null;return n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onUncaughtError!==void 0&&(i=n.onUncaughtError),n.onCaughtError!==void 0&&(o=n.onCaughtError),n.onRecoverableError!==void 0&&(a=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(l=n.unstable_transitionCallbacks),n.formState!==void 0&&(c=n.formState)),e=tB(t,1,!0,e,n??null,r,s,i,o,a,l,c),e.context=nB(null),n=e.current,r=Ii(),r=cS(r),s=Nc(r),s.callback=null,Cc(n,s,r),n=r,e.current.lanes=n,Bg(e,n),Va(e),t[Ff]=e.current,qS(t),new Dx(e)};bx.version="19.1.0";function aB(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(aB)}catch(t){console.error(t)}}aB(),wF.exports=bx;var lB=wF.exports;const HJ=yx(lB),GJ="modulepreload",WJ=function(t){return"/"+t},XP={},gv=function(e,n,r){if(!n||n.length===0)return e();const s=document.getElementsByTagName("link");return Promise.all(n.map(i=>{if(i=WJ(i),i in XP)return;XP[i]=!0;const o=i.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!r)for(let u=s.length-1;u>=0;u--){const h=s[u];if(h.href===i&&(!o||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${a}`))return;const c=document.createElement("link");if(c.rel=o?"stylesheet":GJ,o||(c.as="script",c.crossOrigin=""),c.href=i,document.head.appendChild(c),o)return new Promise((u,h)=>{c.addEventListener("load",u),c.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>e()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})};var eT={};Object.defineProperty(eT,"__esModule",{value:!0});eT.parse=QJ;eT.serialize=eQ;const qJ=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,KJ=/^[\u0021-\u003A\u003C-\u007E]*$/,ZJ=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,XJ=/^[\u0020-\u003A\u003D-\u007E]*$/,YJ=Object.prototype.toString,JJ=(()=>{const t=function(){};return t.prototype=Object.create(null),t})();function QJ(t,e){const n=new JJ,r=t.length;if(r<2)return n;const s=(e==null?void 0:e.decode)||tQ;let i=0;do{const o=t.indexOf("=",i);if(o===-1)break;const a=t.indexOf(";",i),l=a===-1?r:a;if(o>l){i=t.lastIndexOf(";",o-1)+1;continue}const c=YP(t,i,o),u=JP(t,o,c),h=t.slice(c,u);if(n[h]===void 0){let m=YP(t,o+1,l),p=JP(t,l,m);const y=s(t.slice(m,p));n[h]=y}i=l+1}while(i<r);return n}function YP(t,e,n){do{const r=t.charCodeAt(e);if(r!==32&&r!==9)return e}while(++e<n);return n}function JP(t,e,n){for(;e>n;){const r=t.charCodeAt(--e);if(r!==32&&r!==9)return e+1}return n}function eQ(t,e,n){const r=(n==null?void 0:n.encode)||encodeURIComponent;if(!qJ.test(t))throw new TypeError(`argument name is invalid: ${t}`);const s=r(e);if(!KJ.test(s))throw new TypeError(`argument val is invalid: ${e}`);let i=t+"="+s;if(!n)return i;if(n.maxAge!==void 0){if(!Number.isInteger(n.maxAge))throw new TypeError(`option maxAge is invalid: ${n.maxAge}`);i+="; Max-Age="+n.maxAge}if(n.domain){if(!ZJ.test(n.domain))throw new TypeError(`option domain is invalid: ${n.domain}`);i+="; Domain="+n.domain}if(n.path){if(!XJ.test(n.path))throw new TypeError(`option path is invalid: ${n.path}`);i+="; Path="+n.path}if(n.expires){if(!nQ(n.expires)||!Number.isFinite(n.expires.valueOf()))throw new TypeError(`option expires is invalid: ${n.expires}`);i+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(i+="; HttpOnly"),n.secure&&(i+="; Secure"),n.partitioned&&(i+="; Partitioned"),n.priority)switch(typeof n.priority=="string"?n.priority.toLowerCase():void 0){case"low":i+="; Priority=Low";break;case"medium":i+="; Priority=Medium";break;case"high":i+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${n.priority}`)}if(n.sameSite)switch(typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite){case!0:case"strict":i+="; SameSite=Strict";break;case"lax":i+="; SameSite=Lax";break;case"none":i+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${n.sameSite}`)}return i}function tQ(t){if(t.indexOf("%")===-1)return t;try{return decodeURIComponent(t)}catch{return t}}function nQ(t){return YJ.call(t)==="[object Date]"}var QP="popstate";function rQ(t={}){function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return tC("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:rg(s)}return iQ(e,n,null,t)}function Vn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Go(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function sQ(){return Math.random().toString(36).substring(2,10)}function eD(t,e){return{usr:t.state,key:t.key,idx:e}}function tC(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Gf(e):e,state:n,key:e&&e.key||r||sQ()}}function rg({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Gf(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function iQ(t,e,n,r={}){let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a="POP",l=null,c=u();c==null&&(c=0,o.replaceState({...o.state,idx:c},""));function u(){return(o.state||{idx:null}).idx}function h(){a="POP";let x=u(),b=x==null?null:x-c;c=x,l&&l({action:a,location:v.location,delta:b})}function m(x,b){a="PUSH";let w=tC(v.location,x,b);n&&n(w,x),c=u()+1;let E=eD(w,c),N=v.createHref(w);try{o.pushState(E,"",N)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;s.location.assign(N)}i&&l&&l({action:a,location:v.location,delta:1})}function p(x,b){a="REPLACE";let w=tC(v.location,x,b);n&&n(w,x),c=u();let E=eD(w,c),N=v.createHref(w);o.replaceState(E,"",N),i&&l&&l({action:a,location:v.location,delta:0})}function y(x){let b=s.location.origin!=="null"?s.location.origin:s.location.href,w=typeof x=="string"?x:rg(x);return w=w.replace(/ $/,"%20"),Vn(b,`No window.location.(origin|href) available to create URL for href: ${w}`),new URL(w,b)}let v={get action(){return a},get location(){return t(s,o)},listen(x){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(QP,h),l=x,()=>{s.removeEventListener(QP,h),l=null}},createHref(x){return e(s,x)},createURL:y,encodeLocation(x){let b=y(x);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:m,replace:p,go(x){return o.go(x)}};return v}function cB(t,e,n="/"){return oQ(t,e,n,!1)}function oQ(t,e,n,r){let s=typeof e=="string"?Gf(e):e,i=Tl(s.pathname||"/",n);if(i==null)return null;let o=uB(t);aQ(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=bQ(i);a=gQ(o[l],c,r)}return a}function uB(t,e=[],n=[],r=""){let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(Vn(l.relativePath.startsWith(r),`Absolute route path "${l.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(r.length));let c=El([r,l.relativePath]),u=n.concat(l);i.children&&i.children.length>0&&(Vn(i.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${c}".`),uB(i.children,e,u,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:mQ(c,i.index),routesMeta:u})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of dB(i.path))s(i,o,l)}),e}function dB(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=dB(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function aQ(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:pQ(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var lQ=/^:[\w-]+$/,cQ=3,uQ=2,dQ=1,hQ=10,fQ=-2,tD=t=>t==="*";function mQ(t,e){let n=t.split("/"),r=n.length;return n.some(tD)&&(r+=fQ),e&&(r+=uQ),n.filter(s=>!tD(s)).reduce((s,i)=>s+(lQ.test(i)?cQ:i===""?dQ:hQ),r)}function pQ(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function gQ(t,e,n=!1){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,u=i==="/"?e:e.slice(i.length)||"/",h=m1({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),m=l.route;if(!h&&c&&n&&!r[r.length-1].route.index&&(h=m1({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:El([i,h.pathname]),pathnameBase:EQ(El([i,h.pathnameBase])),route:m}),h.pathnameBase!=="/"&&(i=El([i,h.pathnameBase]))}return o}function m1(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=yQ(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,{paramName:u,isOptional:h},m)=>{if(u==="*"){let y=a[m]||"";o=i.slice(0,i.length-y.length).replace(/(.)\/+$/,"$1")}const p=a[m];return h&&!p?c[u]=void 0:c[u]=(p||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function yQ(t,e=!1,n=!0){Go(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function bQ(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Go(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Tl(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function vQ(t,e="/"){let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Gf(t):t;return{pathname:n?n.startsWith("/")?n:xQ(n,e):e,search:kQ(r),hash:NQ(s)}}function xQ(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function UE(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function wQ(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function tT(t){let e=wQ(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function nT(t,e,n,r=!1){let s;typeof t=="string"?s=Gf(t):(s={...t},Vn(!s.pathname||!s.pathname.includes("?"),UE("?","pathname","search",s)),Vn(!s.pathname||!s.pathname.includes("#"),UE("#","pathname","hash",s)),Vn(!s.search||!s.search.includes("#"),UE("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),h-=1;s.pathname=m.join("/")}a=h>=0?e[h]:"/"}let l=vQ(s,a),c=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}var El=t=>t.join("/").replace(/\/\/+/g,"/"),EQ=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),kQ=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,NQ=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function CQ(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var hB=["POST","PUT","PATCH","DELETE"];new Set(hB);var _Q=["GET",...hB];new Set(_Q);var Wf=A.createContext(null);Wf.displayName="DataRouter";var Ox=A.createContext(null);Ox.displayName="DataRouterState";var fB=A.createContext({isTransitioning:!1});fB.displayName="ViewTransition";var SQ=A.createContext(new Map);SQ.displayName="Fetchers";var TQ=A.createContext(null);TQ.displayName="Await";var Jo=A.createContext(null);Jo.displayName="Navigation";var Qg=A.createContext(null);Qg.displayName="Location";var vo=A.createContext({outlet:null,matches:[],isDataRoute:!1});vo.displayName="Route";var rT=A.createContext(null);rT.displayName="RouteError";function $Q(t,{relative:e}={}){Vn(qf(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=A.useContext(Jo),{hash:s,pathname:i,search:o}=e0(t,{relative:e}),a=i;return n!=="/"&&(a=i==="/"?n:El([n,i])),r.createHref({pathname:a,search:o,hash:s})}function qf(){return A.useContext(Qg)!=null}function Qo(){return Vn(qf(),"useLocation() may be used only in the context of a <Router> component."),A.useContext(Qg).location}var mB="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function pB(t){A.useContext(Jo).static||A.useLayoutEffect(t)}function Lr(){let{isDataRoute:t}=A.useContext(vo);return t?HQ():IQ()}function IQ(){Vn(qf(),"useNavigate() may be used only in the context of a <Router> component.");let t=A.useContext(Wf),{basename:e,navigator:n}=A.useContext(Jo),{matches:r}=A.useContext(vo),{pathname:s}=Qo(),i=JSON.stringify(tT(r)),o=A.useRef(!1);return pB(()=>{o.current=!0}),A.useCallback((l,c={})=>{if(Go(o.current,mB),!o.current)return;if(typeof l=="number"){n.go(l);return}let u=nT(l,JSON.parse(i),s,c.relative==="path");t==null&&e!=="/"&&(u.pathname=u.pathname==="/"?e:El([e,u.pathname])),(c.replace?n.replace:n.push)(u,c.state,c)},[e,n,i,s,t])}var AQ=A.createContext(null);function RQ(t){let e=A.useContext(vo).outlet;return e&&A.createElement(AQ.Provider,{value:t},e)}function gB(){let{matches:t}=A.useContext(vo),e=t[t.length-1];return e?e.params:{}}function e0(t,{relative:e}={}){let{matches:n}=A.useContext(vo),{pathname:r}=Qo(),s=JSON.stringify(tT(n));return A.useMemo(()=>nT(t,JSON.parse(s),r,e==="path"),[t,s,r,e])}function PQ(t,e){return yB(t,e)}function yB(t,e,n,r){var w;Vn(qf(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s,static:i}=A.useContext(Jo),{matches:o}=A.useContext(vo),a=o[o.length-1],l=a?a.params:{},c=a?a.pathname:"/",u=a?a.pathnameBase:"/",h=a&&a.route;{let E=h&&h.path||"";bB(c,!h||E.endsWith("*")||E.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${E}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${E}"> to <Route path="${E==="/"?"*":`${E}/*`}">.`)}let m=Qo(),p;if(e){let E=typeof e=="string"?Gf(e):e;Vn(u==="/"||((w=E.pathname)==null?void 0:w.startsWith(u)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${E.pathname}" was given in the \`location\` prop.`),p=E}else p=m;let y=p.pathname||"/",v=y;if(u!=="/"){let E=u.replace(/^\//,"").split("/");v="/"+y.replace(/^\//,"").split("/").slice(E.length).join("/")}let x=!i&&n&&n.matches&&n.matches.length>0?n.matches:cB(t,{pathname:v});Go(h||x!=null,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),Go(x==null||x[x.length-1].route.element!==void 0||x[x.length-1].route.Component!==void 0||x[x.length-1].route.lazy!==void 0,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let b=zQ(x&&x.map(E=>Object.assign({},E,{params:Object.assign({},l,E.params),pathname:El([u,s.encodeLocation?s.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?u:El([u,s.encodeLocation?s.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),o,n,r);return e&&b?A.createElement(Qg.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...p},navigationType:"POP"}},b):b}function DQ(){let t=UQ(),e=CQ(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},i={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=A.createElement(A.Fragment,null,A.createElement("p",null," Hey developer "),A.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",A.createElement("code",{style:i},"ErrorBoundary")," or"," ",A.createElement("code",{style:i},"errorElement")," prop on your route.")),A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},e),n?A.createElement("pre",{style:s},n):null,o)}var OQ=A.createElement(DQ,null),LQ=class extends A.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?A.createElement(vo.Provider,{value:this.props.routeContext},A.createElement(rT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function MQ({routeContext:t,match:e,children:n}){let r=A.useContext(Wf);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),A.createElement(vo.Provider,{value:t},n)}function zQ(t,e=[],n=null,r=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let s=t,i=n==null?void 0:n.errors;if(i!=null){let l=s.findIndex(c=>c.route.id&&(i==null?void 0:i[c.route.id])!==void 0);Vn(l>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(i).join(",")}`),s=s.slice(0,Math.min(s.length,l+1))}let o=!1,a=-1;if(n)for(let l=0;l<s.length;l++){let c=s[l];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(a=l),c.route.id){let{loaderData:u,errors:h}=n,m=c.route.loader&&!u.hasOwnProperty(c.route.id)&&(!h||h[c.route.id]===void 0);if(c.route.lazy||m){o=!0,a>=0?s=s.slice(0,a+1):s=[s[0]];break}}}return s.reduceRight((l,c,u)=>{let h,m=!1,p=null,y=null;n&&(h=i&&c.route.id?i[c.route.id]:void 0,p=c.route.errorElement||OQ,o&&(a<0&&u===0?(bB("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),m=!0,y=null):a===u&&(m=!0,y=c.route.hydrateFallbackElement||null)));let v=e.concat(s.slice(0,u+1)),x=()=>{let b;return h?b=p:m?b=y:c.route.Component?b=A.createElement(c.route.Component,null):c.route.element?b=c.route.element:b=l,A.createElement(MQ,{match:c,routeContext:{outlet:l,matches:v,isDataRoute:n!=null},children:b})};return n&&(c.route.ErrorBoundary||c.route.errorElement||u===0)?A.createElement(LQ,{location:n.location,revalidation:n.revalidation,component:p,error:h,children:x(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):x()},null)}function sT(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function FQ(t){let e=A.useContext(Wf);return Vn(e,sT(t)),e}function BQ(t){let e=A.useContext(Ox);return Vn(e,sT(t)),e}function VQ(t){let e=A.useContext(vo);return Vn(e,sT(t)),e}function iT(t){let e=VQ(t),n=e.matches[e.matches.length-1];return Vn(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function jQ(){return iT("useRouteId")}function UQ(){var r;let t=A.useContext(rT),e=BQ("useRouteError"),n=iT("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function HQ(){let{router:t}=FQ("useNavigate"),e=iT("useNavigate"),n=A.useRef(!1);return pB(()=>{n.current=!0}),A.useCallback(async(s,i={})=>{Go(n.current,mB),n.current&&(typeof s=="number"?t.navigate(s):await t.navigate(s,{fromRouteId:e,...i}))},[t,e])}var nD={};function bB(t,e,n){!e&&!nD[t]&&(nD[t]=!0,Go(!1,n))}A.memo(GQ);function GQ({routes:t,future:e,state:n}){return yB(t,void 0,n,e)}function WQ({to:t,replace:e,state:n,relative:r}){Vn(qf(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=A.useContext(Jo);Go(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=A.useContext(vo),{pathname:o}=Qo(),a=Lr(),l=nT(t,tT(i),o,r==="path"),c=JSON.stringify(l);return A.useEffect(()=>{a(JSON.parse(c),{replace:e,state:n,relative:r})},[a,c,r,e,n]),null}function qQ(t){return RQ(t.context)}function jr(t){Vn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function KQ({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:s,static:i=!1}){Vn(!qf(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),a=A.useMemo(()=>({basename:o,navigator:s,static:i,future:{}}),[o,s,i]);typeof n=="string"&&(n=Gf(n));let{pathname:l="/",search:c="",hash:u="",state:h=null,key:m="default"}=n,p=A.useMemo(()=>{let y=Tl(l,o);return y==null?null:{location:{pathname:y,search:c,hash:u,state:h,key:m},navigationType:r}},[o,l,c,u,h,m,r]);return Go(p!=null,`<Router basename="${o}"> is not able to match the URL "${l}${c}${u}" because it does not start with the basename, so the <Router> won't render anything.`),p==null?null:A.createElement(Jo.Provider,{value:a},A.createElement(Qg.Provider,{children:e,value:p}))}function ZQ({children:t,location:e}){return PQ(nC(t),e)}function nC(t,e=[]){let n=[];return A.Children.forEach(t,(r,s)=>{if(!A.isValidElement(r))return;let i=[...e,s];if(r.type===A.Fragment){n.push.apply(n,nC(r.props.children,i));return}Vn(r.type===jr,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Vn(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=nC(r.props.children,i)),n.push(o)}),n}var yv="get",bv="application/x-www-form-urlencoded";function Lx(t){return t!=null&&typeof t.tagName=="string"}function XQ(t){return Lx(t)&&t.tagName.toLowerCase()==="button"}function YQ(t){return Lx(t)&&t.tagName.toLowerCase()==="form"}function JQ(t){return Lx(t)&&t.tagName.toLowerCase()==="input"}function QQ(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function eee(t,e){return t.button===0&&(!e||e==="_self")&&!QQ(t)}var bb=null;function tee(){if(bb===null)try{new FormData(document.createElement("form"),0),bb=!1}catch{bb=!0}return bb}var nee=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function HE(t){return t!=null&&!nee.has(t)?(Go(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${bv}"`),null):t}function ree(t,e){let n,r,s,i,o;if(YQ(t)){let a=t.getAttribute("action");r=a?Tl(a,e):null,n=t.getAttribute("method")||yv,s=HE(t.getAttribute("enctype"))||bv,i=new FormData(t)}else if(XQ(t)||JQ(t)&&(t.type==="submit"||t.type==="image")){let a=t.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=t.getAttribute("formaction")||a.getAttribute("action");if(r=l?Tl(l,e):null,n=t.getAttribute("formmethod")||a.getAttribute("method")||yv,s=HE(t.getAttribute("formenctype"))||HE(a.getAttribute("enctype"))||bv,i=new FormData(a,t),!tee()){let{name:c,type:u,value:h}=t;if(u==="image"){let m=c?`${c}.`:"";i.append(`${m}x`,"0"),i.append(`${m}y`,"0")}else c&&i.append(c,h)}}else{if(Lx(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=yv,r=null,s=bv,o=t}return i&&s==="text/plain"&&(o=i,i=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:i,body:o}}function oT(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function see(t,e){if(t.id in e)return e[t.id];try{let n=await gv(()=>import(t.module),[]);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function iee(t){return t!=null&&typeof t.page=="string"}function oee(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function aee(t,e,n){let r=await Promise.all(t.map(async s=>{let i=e.routes[s.route.id];if(i){let o=await see(i,n);return o.links?o.links():[]}return[]}));return dee(r.flat(1).filter(oee).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function rD(t,e,n,r,s,i){let o=(l,c)=>n[c]?l.route.id!==n[c].route.id:!0,a=(l,c)=>{var u;return n[c].pathname!==l.pathname||((u=n[c].route.path)==null?void 0:u.endsWith("*"))&&n[c].params["*"]!==l.params["*"]};return i==="assets"?e.filter((l,c)=>o(l,c)||a(l,c)):i==="data"?e.filter((l,c)=>{var h;let u=r.routes[l.route.id];if(!u||!u.hasLoader)return!1;if(o(l,c)||a(l,c))return!0;if(l.route.shouldRevalidate){let m=l.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((h=n[0])==null?void 0:h.params)||{},nextUrl:new URL(t,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function lee(t,e,{includeHydrateFallback:n}={}){return cee(t.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),n&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function cee(t){return[...new Set(t)]}function uee(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function dee(t,e){let n=new Set,r=new Set(e);return t.reduce((s,i)=>{if(e&&!iee(i)&&i.as==="script"&&i.href&&r.has(i.href))return s;let a=JSON.stringify(uee(i));return n.has(a)||(n.add(a),s.push({key:a,link:i})),s},[])}var hee=new Set([100,101,204,205]);function fee(t,e){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname="_root.data":e&&Tl(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function vB(){let t=A.useContext(Wf);return oT(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function mee(){let t=A.useContext(Ox);return oT(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var aT=A.createContext(void 0);aT.displayName="FrameworkContext";function xB(){let t=A.useContext(aT);return oT(t,"You must render this element inside a <HydratedRouter> element"),t}function pee(t,e){let n=A.useContext(aT),[r,s]=A.useState(!1),[i,o]=A.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:c,onMouseLeave:u,onTouchStart:h}=e,m=A.useRef(null);A.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let v=b=>{b.forEach(w=>{o(w.isIntersecting)})},x=new IntersectionObserver(v,{threshold:.5});return m.current&&x.observe(m.current),()=>{x.disconnect()}}},[t]),A.useEffect(()=>{if(r){let v=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(v)}}},[r]);let p=()=>{s(!0)},y=()=>{s(!1),o(!1)};return n?t!=="intent"?[i,m,{}]:[i,m,{onFocus:jm(a,p),onBlur:jm(l,y),onMouseEnter:jm(c,p),onMouseLeave:jm(u,y),onTouchStart:jm(h,p)}]:[!1,m,{}]}function jm(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function gee({page:t,...e}){let{router:n}=vB(),r=A.useMemo(()=>cB(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?A.createElement(bee,{page:t,matches:r,...e}):null}function yee(t){let{manifest:e,routeModules:n}=xB(),[r,s]=A.useState([]);return A.useEffect(()=>{let i=!1;return aee(t,e,n).then(o=>{i||s(o)}),()=>{i=!0}},[t,e,n]),r}function bee({page:t,matches:e,...n}){let r=Qo(),{manifest:s,routeModules:i}=xB(),{basename:o}=vB(),{loaderData:a,matches:l}=mee(),c=A.useMemo(()=>rD(t,e,l,s,r,"data"),[t,e,l,s,r]),u=A.useMemo(()=>rD(t,e,l,s,r,"assets"),[t,e,l,s,r]),h=A.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let y=new Set,v=!1;if(e.forEach(b=>{var E;let w=s.routes[b.route.id];!w||!w.hasLoader||(!c.some(N=>N.route.id===b.route.id)&&b.route.id in a&&((E=i[b.route.id])!=null&&E.shouldRevalidate)||w.hasClientLoader?v=!0:y.add(b.route.id))}),y.size===0)return[];let x=fee(t,o);return v&&y.size>0&&x.searchParams.set("_routes",e.filter(b=>y.has(b.route.id)).map(b=>b.route.id).join(",")),[x.pathname+x.search]},[o,a,r,s,c,e,t,i]),m=A.useMemo(()=>lee(u,s),[u,s]),p=yee(u);return A.createElement(A.Fragment,null,h.map(y=>A.createElement("link",{key:y,rel:"prefetch",as:"fetch",href:y,...n})),m.map(y=>A.createElement("link",{key:y,rel:"modulepreload",href:y,...n})),p.map(({key:y,link:v})=>A.createElement("link",{key:y,...v})))}function vee(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var wB=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{wB&&(window.__reactRouterVersion="7.5.1")}catch{}function xee({basename:t,children:e,window:n}){let r=A.useRef();r.current==null&&(r.current=rQ({window:n,v5Compat:!0}));let s=r.current,[i,o]=A.useState({action:s.action,location:s.location}),a=A.useCallback(l=>{A.startTransition(()=>o(l))},[o]);return A.useLayoutEffect(()=>s.listen(a),[s,a]),A.createElement(KQ,{basename:t,children:e,location:i.location,navigationType:i.action,navigator:s})}var EB=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,at=A.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:u,viewTransition:h,...m},p){let{basename:y}=A.useContext(Jo),v=typeof c=="string"&&EB.test(c),x,b=!1;if(typeof c=="string"&&v&&(x=c,wB))try{let P=new URL(window.location.href),R=c.startsWith("//")?new URL(P.protocol+c):new URL(c),D=Tl(R.pathname,y);R.origin===P.origin&&D!=null?c=D+R.search+R.hash:b=!0}catch{Go(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let w=$Q(c,{relative:s}),[E,N,C]=pee(r,m),S=Nee(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:s,viewTransition:h});function T(P){e&&e(P),P.defaultPrevented||S(P)}let I=A.createElement("a",{...m,...C,href:x||w,onClick:b||i?e:T,ref:vee(p,N),target:l,"data-discover":!v&&n==="render"?"true":void 0});return E&&!v?A.createElement(A.Fragment,null,I,A.createElement(gee,{page:w})):I});at.displayName="Link";var wee=A.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:s=!1,style:i,to:o,viewTransition:a,children:l,...c},u){let h=e0(o,{relative:c.relative}),m=Qo(),p=A.useContext(Ox),{navigator:y,basename:v}=A.useContext(Jo),x=p!=null&&$ee(h)&&a===!0,b=y.encodeLocation?y.encodeLocation(h).pathname:h.pathname,w=m.pathname,E=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;n||(w=w.toLowerCase(),E=E?E.toLowerCase():null,b=b.toLowerCase()),E&&v&&(E=Tl(E,v)||E);const N=b!=="/"&&b.endsWith("/")?b.length-1:b.length;let C=w===b||!s&&w.startsWith(b)&&w.charAt(N)==="/",S=E!=null&&(E===b||!s&&E.startsWith(b)&&E.charAt(b.length)==="/"),T={isActive:C,isPending:S,isTransitioning:x},I=C?e:void 0,P;typeof r=="function"?P=r(T):P=[r,C?"active":null,S?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let R=typeof i=="function"?i(T):i;return A.createElement(at,{...c,"aria-current":I,className:P,ref:u,style:R,to:o,viewTransition:a},typeof l=="function"?l(T):l)});wee.displayName="NavLink";var Eee=A.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:s,state:i,method:o=yv,action:a,onSubmit:l,relative:c,preventScrollReset:u,viewTransition:h,...m},p)=>{let y=See(),v=Tee(a,{relative:c}),x=o.toLowerCase()==="get"?"get":"post",b=typeof a=="string"&&EB.test(a),w=E=>{if(l&&l(E),E.defaultPrevented)return;E.preventDefault();let N=E.nativeEvent.submitter,C=(N==null?void 0:N.getAttribute("formmethod"))||o;y(N||E.currentTarget,{fetcherKey:e,method:C,navigate:n,replace:s,state:i,relative:c,preventScrollReset:u,viewTransition:h})};return A.createElement("form",{ref:p,method:x,action:v,onSubmit:r?l:w,...m,"data-discover":!b&&t==="render"?"true":void 0})});Eee.displayName="Form";function kee(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function kB(t){let e=A.useContext(Wf);return Vn(e,kee(t)),e}function Nee(t,{target:e,replace:n,state:r,preventScrollReset:s,relative:i,viewTransition:o}={}){let a=Lr(),l=Qo(),c=e0(t,{relative:i});return A.useCallback(u=>{if(eee(u,e)){u.preventDefault();let h=n!==void 0?n:rg(l)===rg(c);a(t,{replace:h,state:r,preventScrollReset:s,relative:i,viewTransition:o})}},[l,a,c,n,r,e,t,s,i,o])}var Cee=0,_ee=()=>`__${String(++Cee)}__`;function See(){let{router:t}=kB("useSubmit"),{basename:e}=A.useContext(Jo),n=jQ();return A.useCallback(async(r,s={})=>{let{action:i,method:o,encType:a,formData:l,body:c}=ree(r,e);if(s.navigate===!1){let u=s.fetcherKey||_ee();await t.fetch(u,n,s.action||i,{preventScrollReset:s.preventScrollReset,formData:l,body:c,formMethod:s.method||o,formEncType:s.encType||a,flushSync:s.flushSync})}else await t.navigate(s.action||i,{preventScrollReset:s.preventScrollReset,formData:l,body:c,formMethod:s.method||o,formEncType:s.encType||a,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})},[t,e,n])}function Tee(t,{relative:e}={}){let{basename:n}=A.useContext(Jo),r=A.useContext(vo);Vn(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),i={...e0(t||".",{relative:e})},o=Qo();if(t==null){i.search=o.search;let a=new URLSearchParams(i.search),l=a.getAll("index");if(l.some(u=>u==="")){a.delete("index"),l.filter(h=>h).forEach(h=>a.append("index",h));let u=a.toString();i.search=u?`?${u}`:""}}return(!t||t===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(i.pathname=i.pathname==="/"?n:El([n,i.pathname])),rg(i)}function $ee(t,e={}){let n=A.useContext(fB);Vn(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=kB("useViewTransitionState"),s=e0(t,{relative:e.relative});if(!n.isTransitioning)return!1;let i=Tl(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Tl(n.nextLocation.pathname,r)||n.nextLocation.pathname;return m1(s.pathname,o)!=null||m1(s.pathname,i)!=null}new TextEncoder;[...hee];function Iee(t={}){const{nonce:e,onScriptLoadSuccess:n,onScriptLoadError:r}=t,[s,i]=A.useState(!1),o=A.useRef(n);o.current=n;const a=A.useRef(r);return a.current=r,A.useEffect(()=>{const l=document.createElement("script");return l.src="https://accounts.google.com/gsi/client",l.async=!0,l.defer=!0,l.nonce=e,l.onload=()=>{var c;i(!0),(c=o.current)===null||c===void 0||c.call(o)},l.onerror=()=>{var c;i(!1),(c=a.current)===null||c===void 0||c.call(a)},document.body.appendChild(l),()=>{document.body.removeChild(l)}},[e]),s}const NB=A.createContext(null);function Aee({clientId:t,nonce:e,onScriptLoadSuccess:n,onScriptLoadError:r,children:s}){const i=Iee({nonce:e,onScriptLoadSuccess:n,onScriptLoadError:r}),o=A.useMemo(()=>({clientId:t,scriptLoadedSuccessfully:i}),[t,i]);return d.createElement(NB.Provider,{value:o},s)}function Ree(){const t=A.useContext(NB);if(!t)throw new Error("Google OAuth components must be used within GoogleOAuthProvider");return t}function Pee(t){var e;return(e=t==null?void 0:t.clientId)!==null&&e!==void 0?e:t==null?void 0:t.client_id}const Dee={large:40,medium:32,small:20};function Oee({onSuccess:t,onError:e,useOneTap:n,promptMomentNotification:r,type:s="standard",theme:i="outline",size:o="large",text:a,shape:l,logo_alignment:c,width:u,locale:h,click_listener:m,containerProps:p,...y}){const v=A.useRef(null),{clientId:x,scriptLoadedSuccessfully:b}=Ree(),w=A.useRef(t);w.current=t;const E=A.useRef(e);E.current=e;const N=A.useRef(r);return N.current=r,A.useEffect(()=>{var C,S,T,I,P,R,D,B,Z;if(b)return(T=(S=(C=window==null?void 0:window.google)===null||C===void 0?void 0:C.accounts)===null||S===void 0?void 0:S.id)===null||T===void 0||T.initialize({client_id:x,callback:z=>{var q;if(!(z!=null&&z.credential))return(q=E.current)===null||q===void 0?void 0:q.call(E);const{credential:M,select_by:U}=z;w.current({credential:M,clientId:Pee(z),select_by:U})},...y}),(R=(P=(I=window==null?void 0:window.google)===null||I===void 0?void 0:I.accounts)===null||P===void 0?void 0:P.id)===null||R===void 0||R.renderButton(v.current,{type:s,theme:i,size:o,text:a,shape:l,logo_alignment:c,width:u,locale:h,click_listener:m}),n&&((Z=(B=(D=window==null?void 0:window.google)===null||D===void 0?void 0:D.accounts)===null||B===void 0?void 0:B.id)===null||Z===void 0||Z.prompt(N.current)),()=>{var z,q,M;n&&((M=(q=(z=window==null?void 0:window.google)===null||z===void 0?void 0:z.accounts)===null||q===void 0?void 0:q.id)===null||M===void 0||M.cancel())}},[x,b,n,s,i,o,a,l,c,u,h]),d.createElement("div",{...p,ref:v,style:{height:Dee[o],...p==null?void 0:p.style}})}const sD=t=>{let e;const n=new Set,r=(c,u)=>{const h=typeof c=="function"?c(e):c;if(!Object.is(h,e)){const m=e;e=u??(typeof h!="object"||h===null)?h:Object.assign({},e,h),n.forEach(p=>p(e,m))}},s=()=>e,a={setState:r,getState:s,getInitialState:()=>l,subscribe:c=>(n.add(c),()=>n.delete(c))},l=e=t(r,s,a);return a},Lee=t=>t?sD(t):sD,Mee=t=>t;function zee(t,e=Mee){const n=d.useSyncExternalStore(t.subscribe,()=>e(t.getState()),()=>e(t.getInitialState()));return d.useDebugValue(n),n}const iD=t=>{const e=Lee(t),n=r=>zee(e,r);return Object.assign(n,e),n},Fl=t=>t?iD(t):iD;function Fee(t,e){let n;try{n=t()}catch{return}return{getItem:s=>{var i;const o=l=>l===null?null:JSON.parse(l,e==null?void 0:e.reviver),a=(i=n.getItem(s))!=null?i:null;return a instanceof Promise?a.then(o):o(a)},setItem:(s,i)=>n.setItem(s,JSON.stringify(i,e==null?void 0:e.replacer)),removeItem:s=>n.removeItem(s)}}const rC=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return rC(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return rC(r)(n)}}}},Bee=(t,e)=>(n,r,s)=>{let i={storage:Fee(()=>localStorage),partialize:v=>v,version:0,merge:(v,x)=>({...x,...v}),...e},o=!1;const a=new Set,l=new Set;let c=i.storage;if(!c)return t((...v)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...v)},r,s);const u=()=>{const v=i.partialize({...r()});return c.setItem(i.name,{state:v,version:i.version})},h=s.setState;s.setState=(v,x)=>{h(v,x),u()};const m=t((...v)=>{n(...v),u()},r,s);s.getInitialState=()=>m;let p;const y=()=>{var v,x;if(!c)return;o=!1,a.forEach(w=>{var E;return w((E=r())!=null?E:m)});const b=((x=i.onRehydrateStorage)==null?void 0:x.call(i,(v=r())!=null?v:m))||void 0;return rC(c.getItem.bind(c))(i.name).then(w=>{if(w)if(typeof w.version=="number"&&w.version!==i.version){if(i.migrate){const E=i.migrate(w.state,w.version);return E instanceof Promise?E.then(N=>[!0,N]):[!0,E]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,w.state];return[!1,void 0]}).then(w=>{var E;const[N,C]=w;if(p=i.merge(C,(E=r())!=null?E:m),n(p,!0),N)return u()}).then(()=>{b==null||b(p,void 0),p=r(),o=!0,l.forEach(w=>w(p))}).catch(w=>{b==null||b(void 0,w)})};return s.persist={setOptions:v=>{i={...i,...v},v.storage&&(c=v.storage)},clearStorage:()=>{c==null||c.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>y(),hasHydrated:()=>o,onHydrate:v=>(a.add(v),()=>{a.delete(v)}),onFinishHydration:v=>(l.add(v),()=>{l.delete(v)})},i.skipHydration||y(),p||m},Xc=Bee,We=Fl(Xc(t=>({darkMode:!1,toggleDarkMode:()=>t(e=>{const n=!e.darkMode;return n?document.body.classList.add("dark-mode"):document.body.classList.remove("dark-mode"),{darkMode:n}}),setDarkMode:e=>t(()=>(e?document.body.classList.add("dark-mode"):document.body.classList.remove("dark-mode"),{darkMode:e}))}),{name:"jobscope-theme-storage"}));typeof window<"u"&&(We.getState().darkMode?document.body.classList.add("dark-mode"):document.body.classList.remove("dark-mode"));var CB={exports:{}},Mx={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vee=Symbol.for("react.transitional.element"),jee=Symbol.for("react.fragment");function _B(t,e,n){var r=null;if(n!==void 0&&(r=""+n),e.key!==void 0&&(r=""+e.key),"key"in e){n={};for(var s in e)s!=="key"&&(n[s]=e[s])}else n=e;return e=n.ref,{$$typeof:Vee,type:t,key:r,ref:e!==void 0?e:null,props:n}}Mx.Fragment=jee;Mx.jsx=_B;Mx.jsxs=_B;CB.exports=Mx;var sC=CB.exports;const SB=A.createContext({});function Uee(t){const e=A.useRef(null);return e.current===null&&(e.current=t()),e.current}const lT=typeof window<"u",Hee=lT?A.useLayoutEffect:A.useEffect,cT=A.createContext(null),TB=A.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function Gee(t=!0){const e=A.useContext(cT);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=e,i=A.useId();A.useEffect(()=>{if(t)return s(i)},[t]);const o=A.useCallback(()=>t&&r&&r(i),[i,r,t]);return!n&&r?[!1,o]:[!0]}function uT(t,e){t.indexOf(e)===-1&&t.push(e)}function dT(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}let $B=()=>{};const iC={skipAnimations:!1,useManualTiming:!1};function hT(t){let e;return()=>(e===void 0&&(e=t()),e)}const ho=t=>t,sg=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class fT{constructor(){this.subscriptions=[]}add(e){return uT(this.subscriptions,e),()=>dT(this.subscriptions,e)}notify(e,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,r);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Ea=t=>t*1e3,ka=t=>t/1e3;function IB(t,e){return e?t*(1e3/e):0}const Wee=hT(()=>window.ScrollTimeline!==void 0);class qee{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>e.finished))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(s=>{if(Wee()&&s.attachTimeline)return s.attachTimeline(e);if(typeof n=="function")return n(s)});return()=>{r.forEach((s,i)=>{s&&s(),this.animations[i].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class Kee extends qee{then(e,n){return this.finished.finally(e).then(()=>{})}}const oD={value:null,addProjectionMetrics:null},mT=t=>Array.isArray(t)&&typeof t[0]=="number",Zee={};function Xee(t,e){const n=hT(t);return()=>Zee[e]??n()}const ig=Xee(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),AB=(t,e,n=10)=>{let r="";const s=Math.max(Math.round(e/n),2);for(let i=0;i<s;i++)r+=t(i/(s-1))+", ";return`linear(${r.substring(0,r.length-2)})`},sp=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,oC={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:sp([0,.65,.55,1]),circOut:sp([.55,0,1,.45]),backIn:sp([.31,.01,.66,-.59]),backOut:sp([.33,1.53,.69,.99])};function RB(t,e){if(t)return typeof t=="function"&&ig()?AB(t,e):mT(t)?sp(t):Array.isArray(t)?t.map(n=>RB(n,e)||oC.easeOut):oC[t]}function Yee(t,e,n,{delay:r=0,duration:s=300,repeat:i=0,repeatType:o="loop",ease:a="easeInOut",times:l}={},c=void 0){const u={[e]:n};l&&(u.offset=l);const h=RB(a,s);return Array.isArray(h)&&(u.easing=h),t.animate(u,{delay:r,duration:s,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal",pseudoElement:c})}function pT(t){return typeof t=="function"&&"applyToOptions"in t}function gT(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const p1=2e4;function yT(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<p1;)e+=n,r=t.next(e);return e>=p1?1/0:e}function Jee(t,e=100,n){const r=n({...t,keyframes:[0,e]}),s=Math.min(yT(r),p1);return{type:"keyframes",ease:i=>r.next(s*i).value/e,duration:ka(s)}}function PB(t){return!!(typeof t=="function"&&ig()||!t||typeof t=="string"&&(t in oC||ig())||mT(t)||Array.isArray(t)&&t.every(PB))}function aD(t,e){t.timeline=e,t.onfinish=null}const vb=["read","resolveKeyframes","update","preRender","render","postRender"];function Qee(t,e){let n=new Set,r=new Set,s=!1,i=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1},l=0;function c(h){o.has(h)&&(u.schedule(h),t()),l++,h(a)}const u={schedule:(h,m=!1,p=!1)=>{const v=p&&s?n:r;return m&&o.add(h),v.has(h)||v.add(h),h},cancel:h=>{r.delete(h),o.delete(h)},process:h=>{if(a=h,s){i=!0;return}s=!0,[n,r]=[r,n],n.forEach(c),e&&oD.value&&oD.value.frameloop[e].push(l),l=0,n.clear(),s=!1,i&&(i=!1,u.process(h))}};return u}const ete=40;function DB(t,e){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=()=>n=!0,o=vb.reduce((b,w)=>(b[w]=Qee(i,e?w:void 0),b),{}),{read:a,resolveKeyframes:l,update:c,preRender:u,render:h,postRender:m}=o,p=()=>{const b=performance.now();n=!1,s.delta=r?1e3/60:Math.max(Math.min(b-s.timestamp,ete),1),s.timestamp=b,s.isProcessing=!0,a.process(s),l.process(s),c.process(s),u.process(s),h.process(s),m.process(s),s.isProcessing=!1,n&&e&&(r=!1,t(p))},y=()=>{n=!0,r=!0,s.isProcessing||t(p)};return{schedule:vb.reduce((b,w)=>{const E=o[w];return b[w]=(N,C=!1,S=!1)=>(n||y(),E.schedule(N,C,S)),b},{}),cancel:b=>{for(let w=0;w<vb.length;w++)o[vb[w]].cancel(b)},state:s,steps:o}}const{schedule:bT,cancel:gJe}=DB(queueMicrotask,!1),{schedule:_n,cancel:Bc,state:ss,steps:GE}=DB(typeof requestAnimationFrame<"u"?requestAnimationFrame:ho,!0);let vv;function tte(){vv=void 0}const Na={now:()=>(vv===void 0&&Na.set(ss.isProcessing||iC.useManualTiming?ss.timestamp:performance.now()),vv),set:t=>{vv=t,queueMicrotask(tte)}},Po={x:!1,y:!1};function OB(){return Po.x||Po.y}function nte(t){return t==="x"||t==="y"?Po[t]?null:(Po[t]=!0,()=>{Po[t]=!1}):Po.x||Po.y?null:(Po.x=Po.y=!0,()=>{Po.x=Po.y=!1})}function rte(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;e&&(r=e.current);const s=(n==null?void 0:n[t])??r.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}function LB(t,e){const n=rte(t),r=new AbortController,s={passive:!0,...e,signal:r.signal};return[n,s,()=>r.abort()]}function lD(t){return!(t.pointerType==="touch"||OB())}function ste(t,e,n={}){const[r,s,i]=LB(t,n),o=a=>{if(!lD(a))return;const{target:l}=a,c=e(l,a);if(typeof c!="function"||!l)return;const u=h=>{lD(h)&&(c(h),l.removeEventListener("pointerleave",u))};l.addEventListener("pointerleave",u,s)};return r.forEach(a=>{a.addEventListener("pointerenter",o,s)}),i}const MB=(t,e)=>e?t===e?!0:MB(t,e.parentElement):!1,vT=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,ite=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function ote(t){return ite.has(t.tagName)||t.tabIndex!==-1}const ip=new WeakSet;function cD(t){return e=>{e.key==="Enter"&&t(e)}}function WE(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const ate=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=cD(()=>{if(ip.has(n))return;WE(n,"down");const s=cD(()=>{WE(n,"up")}),i=()=>WE(n,"cancel");n.addEventListener("keyup",s,e),n.addEventListener("blur",i,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function uD(t){return vT(t)&&!OB()}function lte(t,e,n={}){const[r,s,i]=LB(t,n),o=a=>{const l=a.currentTarget;if(!uD(a)||ip.has(l))return;ip.add(l);const c=e(l,a),u=(p,y)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",m),!(!uD(p)||!ip.has(l))&&(ip.delete(l),typeof c=="function"&&c(p,{success:y}))},h=p=>{u(p,l===window||l===document||n.useGlobalTarget||MB(l,p.target))},m=p=>{u(p,!1)};window.addEventListener("pointerup",h,s),window.addEventListener("pointercancel",m,s)};return r.forEach(a=>{(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,s),a instanceof HTMLElement&&(a.addEventListener("focus",c=>ate(c,s)),!ote(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),i}const dD=30,cte=t=>!isNaN(parseFloat(t));class ute{constructor(e,n={}){this.version="12.7.4",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,s=!0)=>{const i=Na.now();this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Na.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=cte(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new fT);const r=this.events[e].add(n);return e==="change"?()=>{r(),_n.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Na.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>dD)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,dD);return IB(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function og(t,e){return new ute(t,e)}const zB=A.createContext({strict:!1}),hD={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},yf={};for(const t in hD)yf[t]={isEnabled:e=>hD[t].some(n=>!!e[n])};function dte(t){for(const e in t)yf[e]={...yf[e],...t[e]}}const hte=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function g1(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||hte.has(t)}let FB=t=>!g1(t);function fte(t){t&&(FB=e=>e.startsWith("on")?!g1(e):t(e))}try{fte(require("@emotion/is-prop-valid").default)}catch{}function mte(t,e,n){const r={};for(const s in t)s==="values"&&typeof t.values=="object"||(FB(s)||n===!0&&g1(s)||!e&&!g1(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}function pte(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,s)=>s==="create"?t:(e.has(s)||e.set(s,t(s)),e.get(s))})}const zx=A.createContext({});function Fx(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function ag(t){return typeof t=="string"||Array.isArray(t)}const xT=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],wT=["initial",...xT];function Bx(t){return Fx(t.animate)||wT.some(e=>ag(t[e]))}function BB(t){return!!(Bx(t)||t.variants)}function gte(t,e){if(Bx(t)){const{initial:n,animate:r}=t;return{initial:n===!1||ag(n)?n:void 0,animate:ag(r)?r:void 0}}return t.inherit!==!1?e:{}}function yte(t){const{initial:e,animate:n}=gte(t,A.useContext(zx));return A.useMemo(()=>({initial:e,animate:n}),[fD(e),fD(n)])}function fD(t){return Array.isArray(t)?t.join(" "):t}const bte=Symbol.for("motionComponentSymbol");function Ph(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function vte(t,e,n){return A.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Ph(n)&&(n.current=r))},[e])}const ET=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),xte="framerAppearId",VB="data-"+ET(xte),jB=A.createContext({});function wte(t,e,n,r,s){var v,x;const{visualElement:i}=A.useContext(zx),o=A.useContext(zB),a=A.useContext(cT),l=A.useContext(TB).reducedMotion,c=A.useRef(null);r=r||o.renderer,!c.current&&r&&(c.current=r(t,{visualState:e,parent:i,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:l}));const u=c.current,h=A.useContext(jB);u&&!u.projection&&s&&(u.type==="html"||u.type==="svg")&&Ete(c.current,n,s,h);const m=A.useRef(!1);A.useInsertionEffect(()=>{u&&m.current&&u.update(n,a)});const p=n[VB],y=A.useRef(!!p&&!((v=window.MotionHandoffIsComplete)!=null&&v.call(window,p))&&((x=window.MotionHasOptimisedAnimation)==null?void 0:x.call(window,p)));return Hee(()=>{u&&(m.current=!0,window.MotionIsMounted=!0,u.updateFeatures(),bT.render(u.render),y.current&&u.animationState&&u.animationState.animateChanges())}),A.useEffect(()=>{u&&(!y.current&&u.animationState&&u.animationState.animateChanges(),y.current&&(queueMicrotask(()=>{var b;(b=window.MotionHandoffMarkAsComplete)==null||b.call(window,p)}),y.current=!1))}),u}function Ete(t,e,n,r){const{layoutId:s,layout:i,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c,layoutCrossfade:u}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:UB(t.parent)),t.projection.setOptions({layoutId:s,layout:i,alwaysMeasureLayout:!!o||a&&Ph(a),visualElement:t,animationType:typeof i=="string"?i:"both",initialPromotionConfig:r,crossfade:u,layoutScroll:l,layoutRoot:c})}function UB(t){if(t)return t.options.allowProjection!==!1?t.projection:UB(t.parent)}function kte({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:s}){t&&dte(t);function i(a,l){let c;const u={...A.useContext(TB),...a,layoutId:Nte(a)},{isStatic:h}=u,m=yte(a),p=r(a,h);if(!h&&lT){Cte();const y=_te(u);c=y.MeasureLayout,m.visualElement=wte(s,p,u,e,y.ProjectionNode)}return sC.jsxs(zx.Provider,{value:m,children:[c&&m.visualElement?sC.jsx(c,{visualElement:m.visualElement,...u}):null,n(s,a,vte(p,m.visualElement,l),p,h,m.visualElement)]})}i.displayName=`motion.${typeof s=="string"?s:`create(${s.displayName??s.name??""})`}`;const o=A.forwardRef(i);return o[bte]=s,o}function Nte({layoutId:t}){const e=A.useContext(SB).id;return e&&t!==void 0?e+"-"+t:t}function Cte(t,e){A.useContext(zB).strict}function _te(t){const{drag:e,layout:n}=yf;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const HB=t=>e=>typeof e=="string"&&e.startsWith(t),kT=HB("--"),Ste=HB("var(--"),NT=t=>Ste(t)?Tte.test(t.split("/*")[0].trim()):!1,Tte=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,lg={};function $te(t){for(const e in t)lg[e]=t[e],kT(e)&&(lg[e].isCSSVariable=!0)}const Kf=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Td=new Set(Kf);function GB(t,{layout:e,layoutId:n}){return Td.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!lg[t]||t==="opacity")}const Ss=t=>!!(t&&t.getVelocity),WB=(t,e)=>e&&typeof t=="number"?e.transform(t):t,$l=(t,e,n)=>n>e?e:n<t?t:n,Zf={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},cg={...Zf,transform:t=>$l(0,1,t)},xb={...Zf,default:1},t0=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),ec=t0("deg"),Ca=t0("%"),nt=t0("px"),Ite=t0("vh"),Ate=t0("vw"),mD={...Ca,parse:t=>Ca.parse(t)/100,transform:t=>Ca.transform(t*100)},Rte={borderWidth:nt,borderTopWidth:nt,borderRightWidth:nt,borderBottomWidth:nt,borderLeftWidth:nt,borderRadius:nt,radius:nt,borderTopLeftRadius:nt,borderTopRightRadius:nt,borderBottomRightRadius:nt,borderBottomLeftRadius:nt,width:nt,maxWidth:nt,height:nt,maxHeight:nt,top:nt,right:nt,bottom:nt,left:nt,padding:nt,paddingTop:nt,paddingRight:nt,paddingBottom:nt,paddingLeft:nt,margin:nt,marginTop:nt,marginRight:nt,marginBottom:nt,marginLeft:nt,backgroundPositionX:nt,backgroundPositionY:nt},Pte={rotate:ec,rotateX:ec,rotateY:ec,rotateZ:ec,scale:xb,scaleX:xb,scaleY:xb,scaleZ:xb,skew:ec,skewX:ec,skewY:ec,distance:nt,translateX:nt,translateY:nt,translateZ:nt,x:nt,y:nt,z:nt,perspective:nt,transformPerspective:nt,opacity:cg,originX:mD,originY:mD,originZ:nt},pD={...Zf,transform:Math.round},CT={...Rte,...Pte,zIndex:pD,size:nt,fillOpacity:cg,strokeOpacity:cg,numOctaves:pD},Dte={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Ote=Kf.length;function Lte(t,e,n){let r="",s=!0;for(let i=0;i<Ote;i++){const o=Kf[i],a=t[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const c=WB(a,CT[o]);if(!l){s=!1;const u=Dte[o]||o;r+=`${u}(${c}) `}n&&(e[o]=c)}}return r=r.trim(),n?r=n(e,s?"":r):s&&(r="none"),r}function _T(t,e,n){const{style:r,vars:s,transformOrigin:i}=t;let o=!1,a=!1;for(const l in e){const c=e[l];if(Td.has(l)){o=!0;continue}else if(kT(l)){s[l]=c;continue}else{const u=WB(c,CT[l]);l.startsWith("origin")?(a=!0,i[l]=u):r[l]=u}}if(e.transform||(o||n?r.transform=Lte(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:u=0}=i;r.transformOrigin=`${l} ${c} ${u}`}}const ST=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function qB(t,e,n){for(const r in e)!Ss(e[r])&&!GB(r,n)&&(t[r]=e[r])}function Mte({transformTemplate:t},e){return A.useMemo(()=>{const n=ST();return _T(n,e,t),Object.assign({},n.vars,n.style)},[e])}function zte(t,e){const n=t.style||{},r={};return qB(r,n,t),Object.assign(r,Mte(t,e)),r}function Fte(t,e){const n={},r=zte(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const Bte=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function TT(t){return typeof t!="string"||t.includes("-")?!1:!!(Bte.indexOf(t)>-1||/[A-Z]/u.test(t))}const Vte={offset:"stroke-dashoffset",array:"stroke-dasharray"},jte={offset:"strokeDashoffset",array:"strokeDasharray"};function Ute(t,e,n=1,r=0,s=!0){t.pathLength=1;const i=s?Vte:jte;t[i.offset]=nt.transform(-r);const o=nt.transform(e),a=nt.transform(n);t[i.array]=`${o} ${a}`}function gD(t,e,n){return typeof t=="string"?t:nt.transform(e+n*t)}function Hte(t,e,n){const r=gD(e,t.x,t.width),s=gD(n,t.y,t.height);return`${r} ${s}`}function $T(t,{attrX:e,attrY:n,attrScale:r,originX:s,originY:i,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},u,h){if(_T(t,c,h),u){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:m,style:p,dimensions:y}=t;m.transform&&(y&&(p.transform=m.transform),delete m.transform),y&&(s!==void 0||i!==void 0||p.transform)&&(p.transformOrigin=Hte(y,s!==void 0?s:.5,i!==void 0?i:.5)),e!==void 0&&(m.x=e),n!==void 0&&(m.y=n),r!==void 0&&(m.scale=r),o!==void 0&&Ute(m,o,a,l,!1)}const KB=()=>({...ST(),attrs:{}}),IT=t=>typeof t=="string"&&t.toLowerCase()==="svg";function Gte(t,e,n,r){const s=A.useMemo(()=>{const i=KB();return $T(i,e,IT(r),t.transformTemplate),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};qB(i,t.style,t),s.style={...i,...s.style}}return s}function Wte(t=!1){return(n,r,s,{latestValues:i},o)=>{const l=(TT(n)?Gte:Fte)(r,i,o,n),c=mte(r,typeof n=="string",t),u=n!==A.Fragment?{...c,...l,ref:s}:{},{children:h}=r,m=A.useMemo(()=>Ss(h)?h.get():h,[h]);return A.createElement(n,{...u,children:m})}}function yD(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function AT(t,e,n,r){if(typeof e=="function"){const[s,i]=yD(r);e=e(n!==void 0?n:t.custom,s,i)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,i]=yD(r);e=e(n!==void 0?n:t.custom,s,i)}return e}const aC=t=>Array.isArray(t),qte=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),Kte=t=>aC(t)?t[t.length-1]||0:t;function xv(t){const e=Ss(t)?t.get():t;return qte(e)?e.toValue():e}function Zte({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},r,s,i){const o={latestValues:Xte(r,s,i,t),renderState:e()};return n&&(o.onMount=a=>n({props:r,current:a,...o}),o.onUpdate=a=>n(a)),o}const ZB=t=>(e,n)=>{const r=A.useContext(zx),s=A.useContext(cT),i=()=>Zte(t,e,r,s);return n?i():Uee(i)};function Xte(t,e,n,r){const s={},i=r(t,{});for(const m in i)s[m]=xv(i[m]);let{initial:o,animate:a}=t;const l=Bx(t),c=BB(t);e&&c&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let u=n?n.initial===!1:!1;u=u||o===!1;const h=u?a:o;if(h&&typeof h!="boolean"&&!Fx(h)){const m=Array.isArray(h)?h:[h];for(let p=0;p<m.length;p++){const y=AT(t,m[p]);if(y){const{transitionEnd:v,transition:x,...b}=y;for(const w in b){let E=b[w];if(Array.isArray(E)){const N=u?E.length-1:0;E=E[N]}E!==null&&(s[w]=E)}for(const w in v)s[w]=v[w]}}}return s}function RT(t,e,n){var i;const{style:r}=t,s={};for(const o in r)(Ss(r[o])||e.style&&Ss(e.style[o])||GB(o,t)||((i=n==null?void 0:n.getValue(o))==null?void 0:i.liveStyle)!==void 0)&&(s[o]=r[o]);return s}const Yte={useVisualState:ZB({scrapeMotionValuesFromProps:RT,createRenderState:ST})};function XB(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}function YB(t,{style:e,vars:n},r,s){Object.assign(t.style,e,s&&s.getProjectionStyles(r));for(const i in n)t.style.setProperty(i,n[i])}const JB=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function QB(t,e,n,r){YB(t,e,void 0,r);for(const s in e.attrs)t.setAttribute(JB.has(s)?s:ET(s),e.attrs[s])}function eV(t,e,n){const r=RT(t,e,n);for(const s in t)if(Ss(t[s])||Ss(e[s])){const i=Kf.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[i]=t[s]}return r}const bD=["x","y","width","height","cx","cy","r"],Jte={useVisualState:ZB({scrapeMotionValuesFromProps:eV,createRenderState:KB,onUpdate:({props:t,prevProps:e,current:n,renderState:r,latestValues:s})=>{if(!n)return;let i=!!t.drag;if(!i){for(const a in s)if(Td.has(a)){i=!0;break}}if(!i)return;let o=!e;if(e)for(let a=0;a<bD.length;a++){const l=bD[a];t[l]!==e[l]&&(o=!0)}o&&_n.read(()=>{XB(n,r),_n.render(()=>{$T(r,s,IT(n.tagName),t.transformTemplate),QB(n,r)})})}})};function Qte(t,e){return function(r,{forwardMotionProps:s}={forwardMotionProps:!1}){const o={...TT(r)?Jte:Yte,preloadedFeatures:t,useRender:Wte(s),createVisualElement:e,Component:r};return kte(o)}}function ug(t,e,n){const r=t.getProps();return AT(r,e,n!==void 0?n:r.custom,t)}const tV=new Set(["width","height","top","left","right","bottom",...Kf]);function ene(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,og(n))}function tne(t,e){const n=ug(t,e);let{transitionEnd:r={},transition:s={},...i}=n||{};i={...i,...r};for(const o in i){const a=Kte(i[o]);ene(t,o,a)}}function nne(t){return!!(Ss(t)&&t.add)}function lC(t,e){const n=t.getValue("willChange");if(nne(n))return n.add(e);if(!n&&iC.WillChange){const r=new iC.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function nV(t){return t.props[VB]}const rV=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,rne=1e-7,sne=12;function ine(t,e,n,r,s){let i,o,a=0;do o=e+(n-e)/2,i=rV(o,r,s)-t,i>0?n=o:e=o;while(Math.abs(i)>rne&&++a<sne);return o}function n0(t,e,n,r){if(t===e&&n===r)return ho;const s=i=>ine(i,0,1,t,n);return i=>i===0||i===1?i:rV(s(i),e,r)}const sV=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,iV=t=>e=>1-t(1-e),oV=n0(.33,1.53,.69,.99),PT=iV(oV),aV=sV(PT),lV=t=>(t*=2)<1?.5*PT(t):.5*(2-Math.pow(2,-10*(t-1))),DT=t=>1-Math.sin(Math.acos(t)),cV=iV(DT),uV=sV(DT),dV=t=>/^0[^.\s]+$/u.test(t);function one(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||dV(t):!0}const Ap=t=>Math.round(t*1e5)/1e5,OT=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function ane(t){return t==null}const lne=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,LT=(t,e)=>n=>!!(typeof n=="string"&&lne.test(n)&&n.startsWith(t)||e&&!ane(n)&&Object.prototype.hasOwnProperty.call(n,e)),hV=(t,e,n)=>r=>{if(typeof r!="string")return r;const[s,i,o,a]=r.match(OT);return{[t]:parseFloat(s),[e]:parseFloat(i),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},cne=t=>$l(0,255,t),qE={...Zf,transform:t=>Math.round(cne(t))},Du={test:LT("rgb","red"),parse:hV("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+qE.transform(t)+", "+qE.transform(e)+", "+qE.transform(n)+", "+Ap(cg.transform(r))+")"};function une(t){let e="",n="",r="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const cC={test:LT("#"),parse:une,transform:Du.transform},Dh={test:LT("hsl","hue"),parse:hV("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Ca.transform(Ap(e))+", "+Ca.transform(Ap(n))+", "+Ap(cg.transform(r))+")"},vs={test:t=>Du.test(t)||cC.test(t)||Dh.test(t),parse:t=>Du.test(t)?Du.parse(t):Dh.test(t)?Dh.parse(t):cC.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Du.transform(t):Dh.transform(t)},dne=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function hne(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(OT))==null?void 0:e.length)||0)+(((n=t.match(dne))==null?void 0:n.length)||0)>0}const fV="number",mV="color",fne="var",mne="var(",vD="${}",pne=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function dg(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},s=[];let i=0;const a=e.replace(pne,l=>(vs.test(l)?(r.color.push(i),s.push(mV),n.push(vs.parse(l))):l.startsWith(mne)?(r.var.push(i),s.push(fne),n.push(l)):(r.number.push(i),s.push(fV),n.push(parseFloat(l))),++i,vD)).split(vD);return{values:n,split:a,indexes:r,types:s}}function pV(t){return dg(t).values}function gV(t){const{split:e,types:n}=dg(t),r=e.length;return s=>{let i="";for(let o=0;o<r;o++)if(i+=e[o],s[o]!==void 0){const a=n[o];a===fV?i+=Ap(s[o]):a===mV?i+=vs.transform(s[o]):i+=s[o]}return i}}const gne=t=>typeof t=="number"?0:t;function yne(t){const e=pV(t);return gV(t)(e.map(gne))}const Vc={test:hne,parse:pV,createTransformer:gV,getAnimatableNone:yne},bne=new Set(["brightness","contrast","saturate","opacity"]);function vne(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(OT)||[];if(!r)return t;const s=n.replace(r,"");let i=bne.has(e)?1:0;return r!==n&&(i*=100),e+"("+i+s+")"}const xne=/\b([a-z-]*)\(.*?\)/gu,uC={...Vc,getAnimatableNone:t=>{const e=t.match(xne);return e?e.map(vne).join(" "):t}},wne={...CT,color:vs,backgroundColor:vs,outlineColor:vs,fill:vs,stroke:vs,borderColor:vs,borderTopColor:vs,borderRightColor:vs,borderBottomColor:vs,borderLeftColor:vs,filter:uC,WebkitFilter:uC},yV=t=>wne[t];function bV(t,e){let n=yV(t);return n!==uC&&(n=Vc),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const Ene=new Set(["auto","none","0"]);function kne(t,e,n){let r=0,s;for(;r<t.length&&!s;){const i=t[r];typeof i=="string"&&!Ene.has(i)&&dg(i).values.length&&(s=t[r]),r++}if(s&&n)for(const i of e)t[i]=bV(n,s)}const Ou=t=>t*180/Math.PI,dC=t=>{const e=Ou(Math.atan2(t[1],t[0]));return hC(e)},Nne={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:dC,rotateZ:dC,skewX:t=>Ou(Math.atan(t[1])),skewY:t=>Ou(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},hC=t=>(t=t%360,t<0&&(t+=360),t),xD=dC,wD=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),ED=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),Cne={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:wD,scaleY:ED,scale:t=>(wD(t)+ED(t))/2,rotateX:t=>hC(Ou(Math.atan2(t[6],t[5]))),rotateY:t=>hC(Ou(Math.atan2(-t[2],t[0]))),rotateZ:xD,rotate:xD,skewX:t=>Ou(Math.atan(t[4])),skewY:t=>Ou(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function kD(t){return t.includes("scale")?1:0}function fC(t,e){if(!t||t==="none")return kD(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(n)r=Cne,s=n;else{const a=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=Nne,s=a}if(!s)return kD(e);const i=r[e],o=s[1].split(",").map(Sne);return typeof i=="function"?i(o):o[i]}const _ne=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return fC(n,e)};function Sne(t){return parseFloat(t.trim())}const ND=t=>t===Zf||t===nt,Tne=new Set(["x","y","z"]),$ne=Kf.filter(t=>!Tne.has(t));function Ine(t){const e=[];return $ne.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const bf={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>fC(e,"x"),y:(t,{transform:e})=>fC(e,"y")};bf.translateX=bf.x;bf.translateY=bf.y;const Yu=new Set;let mC=!1,pC=!1;function vV(){if(pC){const t=Array.from(Yu).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const s=Ine(r);s.length&&(n.set(r,s),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([i,o])=>{var a;(a=r.getValue(i))==null||a.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}pC=!1,mC=!1,Yu.forEach(t=>t.complete()),Yu.clear()}function xV(){Yu.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(pC=!0)})}function Ane(){xV(),vV()}class MT{constructor(e,n,r,s,i,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=s,this.element=i,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Yu.add(this),mC||(mC=!0,_n.read(xV),_n.resolveKeyframes(vV))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:s}=this;for(let i=0;i<e.length;i++)if(e[i]===null)if(i===0){const o=s==null?void 0:s.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&n){const l=r.readValue(n,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),s&&o===void 0&&s.set(e[0])}else e[i]=e[i-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Yu.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Yu.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const wV=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),Rne=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Pne(t){const e=Rne.exec(t);if(!e)return[,];const[,n,r,s]=e;return[`--${n??r}`,s]}function EV(t,e,n=1){const[r,s]=Pne(t);if(!r)return;const i=window.getComputedStyle(e).getPropertyValue(r);if(i){const o=i.trim();return wV(o)?parseFloat(o):o}return NT(s)?EV(s,e,n+1):s}const kV=t=>e=>e.test(t),Dne={test:t=>t==="auto",parse:t=>t},NV=[Zf,nt,Ca,ec,Ate,Ite,Dne],CD=t=>NV.find(kV(t));class CV extends MT{constructor(e,n,r,s,i){super(e,n,r,s,i,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),NT(c))){const u=EV(c,n.current);u!==void 0&&(e[l]=u),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!tV.has(r)||e.length!==2)return;const[s,i]=e,o=CD(s),a=CD(i);if(o!==a)if(ND(o)&&ND(a))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let s=0;s<e.length;s++)one(e[s])&&r.push(s);r.length&&kne(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=bf[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){var a;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const s=e.getValue(n);s&&s.jump(this.measuredOrigin,!1);const i=r.length-1,o=r[i];r[i]=bf[n](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(a=this.removedTransforms)!=null&&a.length&&this.removedTransforms.forEach(([l,c])=>{e.getValue(l).set(c)}),this.resolveNoneKeyframes()}}const _D=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Vc.test(t)||t==="0")&&!t.startsWith("url("));function One(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function Lne(t,e,n,r){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const i=t[t.length-1],o=_D(s,e),a=_D(i,e);return!o||!a?!1:One(t)||(n==="spring"||pT(n))&&r}const Mne=t=>t!==null;function Vx(t,{repeat:e,repeatType:n="loop"},r){const s=t.filter(Mne),i=e&&n!=="loop"&&e%2===1?0:s.length-1;return!i||r===void 0?s[i]:r}const zne=40;class _V{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:i=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Na.now(),this.options={autoplay:e,delay:n,type:r,repeat:s,repeatDelay:i,repeatType:o,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>zne?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&Ane(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=Na.now(),this.hasAttemptedResolve=!0;const{name:r,type:s,velocity:i,delay:o,onComplete:a,onUpdate:l,isGenerator:c}=this.options;if(!c&&!Lne(e,r,s,i))if(o)this.options.duration=0;else{l&&l(Vx(e,this.options,n)),a&&a(),this.resolveFinishedPromise();return}const u=this.initPlayback(e,n);u!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...u},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear")}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const qn=(t,e,n)=>t+(e-t)*n;function KE(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function Fne({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let s=0,i=0,o=0;if(!e)s=i=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;s=KE(l,a,t+1/3),i=KE(l,a,t),o=KE(l,a,t-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:r}}function y1(t,e){return n=>n>0?e:t}const ZE=(t,e,n)=>{const r=t*t,s=n*(e*e-r)+r;return s<0?0:Math.sqrt(s)},Bne=[cC,Du,Dh],Vne=t=>Bne.find(e=>e.test(t));function SD(t){const e=Vne(t);if(!e)return!1;let n=e.parse(t);return e===Dh&&(n=Fne(n)),n}const TD=(t,e)=>{const n=SD(t),r=SD(e);if(!n||!r)return y1(t,e);const s={...n};return i=>(s.red=ZE(n.red,r.red,i),s.green=ZE(n.green,r.green,i),s.blue=ZE(n.blue,r.blue,i),s.alpha=qn(n.alpha,r.alpha,i),Du.transform(s))},jne=(t,e)=>n=>e(t(n)),r0=(...t)=>t.reduce(jne),gC=new Set(["none","hidden"]);function Une(t,e){return gC.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function Hne(t,e){return n=>qn(t,e,n)}function zT(t){return typeof t=="number"?Hne:typeof t=="string"?NT(t)?y1:vs.test(t)?TD:qne:Array.isArray(t)?SV:typeof t=="object"?vs.test(t)?TD:Gne:y1}function SV(t,e){const n=[...t],r=n.length,s=t.map((i,o)=>zT(i)(i,e[o]));return i=>{for(let o=0;o<r;o++)n[o]=s[o](i);return n}}function Gne(t,e){const n={...t,...e},r={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(r[s]=zT(t[s])(t[s],e[s]));return s=>{for(const i in r)n[i]=r[i](s);return n}}function Wne(t,e){const n=[],r={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const i=e.types[s],o=t.indexes[i][r[i]],a=t.values[o]??0;n[s]=a,r[i]++}return n}const qne=(t,e)=>{const n=Vc.createTransformer(e),r=dg(t),s=dg(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?gC.has(t)&&!s.values.length||gC.has(e)&&!r.values.length?Une(t,e):r0(SV(Wne(r,s),s.values),n):y1(t,e)};function TV(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?qn(t,e,n):zT(t)(t,e)}const Kne=5;function $V(t,e,n){const r=Math.max(e-Kne,0);return IB(n-t(r),e-r)}const Kn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},XE=.001;function Zne({duration:t=Kn.duration,bounce:e=Kn.bounce,velocity:n=Kn.velocity,mass:r=Kn.mass}){let s,i,o=1-e;o=$l(Kn.minDamping,Kn.maxDamping,o),t=$l(Kn.minDuration,Kn.maxDuration,ka(t)),o<1?(s=c=>{const u=c*o,h=u*t,m=u-n,p=yC(c,o),y=Math.exp(-h);return XE-m/p*y},i=c=>{const h=c*o*t,m=h*n+n,p=Math.pow(o,2)*Math.pow(c,2)*t,y=Math.exp(-h),v=yC(Math.pow(c,2),o);return(-s(c)+XE>0?-1:1)*((m-p)*y)/v}):(s=c=>{const u=Math.exp(-c*t),h=(c-n)*t+1;return-XE+u*h},i=c=>{const u=Math.exp(-c*t),h=(n-c)*(t*t);return u*h});const a=5/t,l=Yne(s,i,a);if(t=Ea(t),isNaN(l))return{stiffness:Kn.stiffness,damping:Kn.damping,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:t}}}const Xne=12;function Yne(t,e,n){let r=n;for(let s=1;s<Xne;s++)r=r-t(r)/e(r);return r}function yC(t,e){return t*Math.sqrt(1-e*e)}const Jne=["duration","bounce"],Qne=["stiffness","damping","mass"];function $D(t,e){return e.some(n=>t[n]!==void 0)}function ere(t){let e={velocity:Kn.velocity,stiffness:Kn.stiffness,damping:Kn.damping,mass:Kn.mass,isResolvedFromDuration:!1,...t};if(!$D(t,Qne)&&$D(t,Jne))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,i=2*$l(.05,1,1-(t.bounce||0))*Math.sqrt(s);e={...e,mass:Kn.mass,stiffness:s,damping:i}}else{const n=Zne(t);e={...e,...n,mass:Kn.mass},e.isResolvedFromDuration=!0}return e}function b1(t=Kn.visualDuration,e=Kn.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:s}=n;const i=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:i},{stiffness:l,damping:c,mass:u,duration:h,velocity:m,isResolvedFromDuration:p}=ere({...n,velocity:-ka(n.velocity||0)}),y=m||0,v=c/(2*Math.sqrt(l*u)),x=o-i,b=ka(Math.sqrt(l/u)),w=Math.abs(x)<5;r||(r=w?Kn.restSpeed.granular:Kn.restSpeed.default),s||(s=w?Kn.restDelta.granular:Kn.restDelta.default);let E;if(v<1){const C=yC(b,v);E=S=>{const T=Math.exp(-v*b*S);return o-T*((y+v*b*x)/C*Math.sin(C*S)+x*Math.cos(C*S))}}else if(v===1)E=C=>o-Math.exp(-b*C)*(x+(y+b*x)*C);else{const C=b*Math.sqrt(v*v-1);E=S=>{const T=Math.exp(-v*b*S),I=Math.min(C*S,300);return o-T*((y+v*b*x)*Math.sinh(I)+C*x*Math.cosh(I))/C}}const N={calculatedDuration:p&&h||null,next:C=>{const S=E(C);if(p)a.done=C>=h;else{let T=0;v<1&&(T=C===0?Ea(y):$V(E,C,S));const I=Math.abs(T)<=r,P=Math.abs(o-S)<=s;a.done=I&&P}return a.value=a.done?o:S,a},toString:()=>{const C=Math.min(yT(N),p1),S=AB(T=>N.next(C*T).value,C,30);return C+"ms "+S},toTransition:()=>{}};return N}b1.applyToOptions=t=>{const e=Jee(t,100,b1);return t.ease=ig()?e.ease:"easeOut",t.duration=Ea(e.duration),t.type="keyframes",t};function ID({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:u}){const h=t[0],m={done:!1,value:h},p=I=>a!==void 0&&I<a||l!==void 0&&I>l,y=I=>a===void 0?l:l===void 0||Math.abs(a-I)<Math.abs(l-I)?a:l;let v=n*e;const x=h+v,b=o===void 0?x:o(x);b!==x&&(v=b-h);const w=I=>-v*Math.exp(-I/r),E=I=>b+w(I),N=I=>{const P=w(I),R=E(I);m.done=Math.abs(P)<=c,m.value=m.done?b:R};let C,S;const T=I=>{p(m.value)&&(C=I,S=b1({keyframes:[m.value,y(m.value)],velocity:$V(E,I,m.value),damping:s,stiffness:i,restDelta:c,restSpeed:u}))};return T(0),{calculatedDuration:null,next:I=>{let P=!1;return!S&&C===void 0&&(P=!0,N(I),T(I)),C!==void 0&&I>=C?S.next(I-C):(!P&&N(I),m)}}}const tre=n0(.42,0,1,1),nre=n0(0,0,.58,1),IV=n0(.42,0,.58,1),rre=t=>Array.isArray(t)&&typeof t[0]!="number",sre={linear:ho,easeIn:tre,easeInOut:IV,easeOut:nre,circIn:DT,circInOut:uV,circOut:cV,backIn:PT,backInOut:aV,backOut:oV,anticipate:lV},AD=t=>{if(mT(t)){$B(t.length===4);const[e,n,r,s]=t;return n0(e,n,r,s)}else if(typeof t=="string")return sre[t];return t};function ire(t,e,n){const r=[],s=n||TV,i=t.length-1;for(let o=0;o<i;o++){let a=s(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||ho:e;a=r0(l,a)}r.push(a)}return r}function ore(t,e,{clamp:n=!0,ease:r,mixer:s}={}){const i=t.length;if($B(i===e.length),i===1)return()=>e[0];if(i===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=ire(e,r,s),l=a.length,c=u=>{if(o&&u<t[0])return e[0];let h=0;if(l>1)for(;h<t.length-2&&!(u<t[h+1]);h++);const m=sg(t[h],t[h+1],u);return a[h](m)};return n?u=>c($l(t[0],t[i-1],u)):c}function are(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const s=sg(0,e,r);t.push(qn(n,1,s))}}function lre(t){const e=[0];return are(e,t.length-1),e}function cre(t,e){return t.map(n=>n*e)}function ure(t,e){return t.map(()=>e||IV).splice(0,t.length-1)}function v1({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const s=rre(r)?r.map(AD):AD(r),i={done:!1,value:e[0]},o=cre(n&&n.length===e.length?n:lre(e),t),a=ore(o,e,{ease:Array.isArray(s)?s:ure(e,s)});return{calculatedDuration:t,next:l=>(i.value=a(l),i.done=l>=t,i)}}const dre=t=>{const e=({timestamp:n})=>t(n);return{start:()=>_n.update(e,!0),stop:()=>Bc(e),now:()=>ss.isProcessing?ss.timestamp:Na.now()}},hre={decay:ID,inertia:ID,tween:v1,keyframes:v1,spring:b1},fre=t=>t/100;class FT extends _V{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:n,motionValue:r,element:s,keyframes:i}=this.options,o=(s==null?void 0:s.KeyframeResolver)||MT,a=(l,c)=>this.onKeyframesResolved(l,c);this.resolver=new o(i,a,n,r,s),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:i,velocity:o=0}=this.options,a=pT(n)?n:hre[n]||v1;let l,c;a!==v1&&typeof e[0]!="number"&&(l=r0(fre,TV(e[0],e[1])),e=[0,100]);const u=a({...this.options,keyframes:e});i==="mirror"&&(c=a({...this.options,keyframes:[...e].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=yT(u));const{calculatedDuration:h}=u,m=h+s,p=m*(r+1)-s;return{generator:u,mirroredGenerator:c,mapPercentToKeyframes:l,calculatedDuration:h,resolvedDuration:m,totalDuration:p}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:I}=this.options;return{done:!0,value:I[I.length-1]}}const{finalKeyframe:s,generator:i,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:l,calculatedDuration:c,totalDuration:u,resolvedDuration:h}=r;if(this.startTime===null)return i.next(0);const{delay:m,repeat:p,repeatType:y,repeatDelay:v,onUpdate:x}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-u/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const b=this.currentTime-m*(this.speed>=0?1:-1),w=this.speed>=0?b<0:b>u;this.currentTime=Math.max(b,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=u);let E=this.currentTime,N=i;if(p){const I=Math.min(this.currentTime,u)/h;let P=Math.floor(I),R=I%1;!R&&I>=1&&(R=1),R===1&&P--,P=Math.min(P,p+1),!!(P%2)&&(y==="reverse"?(R=1-R,v&&(R-=v/h)):y==="mirror"&&(N=o)),E=$l(0,1,R)*h}const C=w?{done:!1,value:l[0]}:N.next(E);a&&(C.value=a(C.value));let{done:S}=C;!w&&c!==null&&(S=this.speed>=0?this.currentTime>=u:this.currentTime<=0);const T=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&S);return T&&s!==void 0&&(C.value=Vx(l,this.options,s)),x&&x(C.value),T&&this.finish(),C}get duration(){const{resolved:e}=this;return e?ka(e.calculatedDuration):0}get time(){return ka(this.currentTime)}set time(e){e=Ea(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=ka(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=dre,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),n&&n();const s=this.driver.now();this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=s):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=this.currentTime??0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}get finished(){return this.currentFinishedPromise}}const mre=new Set(["opacity","clipPath","filter","transform"]),pre=hT(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),x1=10,gre=2e4;function yre(t){return pT(t.type)||t.type==="spring"||!PB(t.ease)}function bre(t,e){const n=new FT({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const s=[];let i=0;for(;!r.done&&i<gre;)r=n.sample(i),s.push(r.value),i+=x1;return{times:void 0,keyframes:s,duration:i-x1,ease:"linear"}}const AV={anticipate:lV,backInOut:aV,circInOut:uV};function vre(t){return t in AV}class RD extends _V{constructor(e){super(e);const{name:n,motionValue:r,element:s,keyframes:i}=this.options;this.resolver=new CV(i,(o,a)=>this.onKeyframesResolved(o,a),n,r,s),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:r=300,times:s,ease:i,type:o,motionValue:a,name:l,startTime:c}=this.options;if(!a.owner||!a.owner.current)return!1;if(typeof i=="string"&&ig()&&vre(i)&&(i=AV[i]),yre(this.options)){const{onComplete:h,onUpdate:m,motionValue:p,element:y,...v}=this.options,x=bre(e,v);e=x.keyframes,e.length===1&&(e[1]=e[0]),r=x.duration,s=x.times,i=x.ease,o="keyframes"}const u=Yee(a.owner.current,l,e,{...this.options,duration:r,times:s,ease:i});return u.startTime=c??this.calcStartTime(),this.pendingTimeline?(aD(u,this.pendingTimeline),this.pendingTimeline=void 0):u.onfinish=()=>{const{onComplete:h}=this.options;a.set(Vx(e,this.options,n)),h&&h(),this.cancel(),this.resolveFinishedPromise()},{animation:u,duration:r,times:s,type:o,ease:i,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return ka(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return ka(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=Ea(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}get finished(){return this.resolved.animation.finished}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return ho;const{animation:r}=n;aD(r,e)}return ho}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:s,type:i,ease:o,times:a}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:c,onUpdate:u,onComplete:h,element:m,...p}=this.options,y=new FT({...p,keyframes:r,duration:s,type:i,ease:o,times:a,isGenerator:!0}),v=Ea(this.time);c.setWithVelocity(y.sample(v-x1).value,y.sample(v).value,x1)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:s,repeatType:i,damping:o,type:a}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=n.owner.getProps();return pre()&&r&&mre.has(r)&&(r!=="transform"||!c)&&!l&&!s&&i!=="mirror"&&o!==0&&a!=="inertia"}}const xre={type:"spring",stiffness:500,damping:25,restSpeed:10},wre=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),Ere={type:"keyframes",duration:.8},kre={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Nre=(t,{keyframes:e})=>e.length>2?Ere:Td.has(t)?t.startsWith("scale")?wre(e[1]):xre:kre;function Cre({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:a,from:l,elapsed:c,...u}){return!!Object.keys(u).length}const BT=(t,e,n,r={},s,i)=>o=>{const a=gT(r,t)||{},l=a.delay||r.delay||0;let{elapsed:c=0}=r;c=c-Ea(l);let u={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:m=>{e.set(m),a.onUpdate&&a.onUpdate(m)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:i?void 0:s};Cre(a)||(u={...u,...Nre(t,u)}),u.duration&&(u.duration=Ea(u.duration)),u.repeatDelay&&(u.repeatDelay=Ea(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let h=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(u.duration=0,u.delay===0&&(h=!0)),u.allowFlatten=!a.type&&!a.ease,h&&!i&&e.get()!==void 0){const m=Vx(u.keyframes,a);if(m!==void 0)return _n.update(()=>{u.onUpdate(m),u.onComplete()}),new Kee([])}return!i&&RD.supports(u)?new RD(u):new FT(u)};function _re({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function RV(t,e,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:i=t.getDefaultTransition(),transitionEnd:o,...a}=e;r&&(i=r);const l=[],c=s&&t.animationState&&t.animationState.getState()[s];for(const u in a){const h=t.getValue(u,t.latestValues[u]??null),m=a[u];if(m===void 0||c&&_re(c,u))continue;const p={delay:n,...gT(i||{},u)};let y=!1;if(window.MotionHandoffAnimation){const x=nV(t);if(x){const b=window.MotionHandoffAnimation(x,u,_n);b!==null&&(p.startTime=b,y=!0)}}lC(t,u),h.start(BT(u,h,m,t.shouldReduceMotion&&tV.has(u)?{type:!1}:p,t,y));const v=h.animation;v&&l.push(v)}return o&&Promise.all(l).then(()=>{_n.update(()=>{o&&tne(t,o)})}),l}function bC(t,e,n={}){var l;const r=ug(t,e,n.type==="exit"?(l=t.presenceContext)==null?void 0:l.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const i=r?()=>Promise.all(RV(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:h,staggerDirection:m}=s;return Sre(t,e,u+c,h,m,n)}:()=>Promise.resolve(),{when:a}=s;if(a){const[c,u]=a==="beforeChildren"?[i,o]:[o,i];return c().then(()=>u())}else return Promise.all([i(),o(n.delay)])}function Sre(t,e,n=0,r=0,s=1,i){const o=[],a=(t.variantChildren.size-1)*r,l=s===1?(c=0)=>c*r:(c=0)=>a-c*r;return Array.from(t.variantChildren).sort(Tre).forEach((c,u)=>{c.notify("AnimationStart",e),o.push(bC(c,e,{...i,delay:n+l(u)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function Tre(t,e){return t.sortNodePosition(e)}function $re(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(i=>bC(t,i,n));r=Promise.all(s)}else if(typeof e=="string")r=bC(t,e,n);else{const s=typeof e=="function"?ug(t,e,n.custom):e;r=Promise.all(RV(t,s,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function PV(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const Ire=wT.length;function DV(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?DV(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<Ire;n++){const r=wT[n],s=t.props[r];(ag(s)||s===!1)&&(e[r]=s)}return e}const Are=[...xT].reverse(),Rre=xT.length;function Pre(t){return e=>Promise.all(e.map(({animation:n,options:r})=>$re(t,n,r)))}function Dre(t){let e=Pre(t),n=PD(),r=!0;const s=l=>(c,u)=>{var m;const h=ug(t,u,l==="exit"?(m=t.presenceContext)==null?void 0:m.custom:void 0);if(h){const{transition:p,transitionEnd:y,...v}=h;c={...c,...v,...y}}return c};function i(l){e=l(t)}function o(l){const{props:c}=t,u=DV(t.parent)||{},h=[],m=new Set;let p={},y=1/0;for(let x=0;x<Rre;x++){const b=Are[x],w=n[b],E=c[b]!==void 0?c[b]:u[b],N=ag(E),C=b===l?w.isActive:null;C===!1&&(y=x);let S=E===u[b]&&E!==c[b]&&N;if(S&&r&&t.manuallyAnimateOnMount&&(S=!1),w.protectedKeys={...p},!w.isActive&&C===null||!E&&!w.prevProp||Fx(E)||typeof E=="boolean")continue;const T=Ore(w.prevProp,E);let I=T||b===l&&w.isActive&&!S&&N||x>y&&N,P=!1;const R=Array.isArray(E)?E:[E];let D=R.reduce(s(b),{});C===!1&&(D={});const{prevResolvedValues:B={}}=w,Z={...B,...D},z=U=>{I=!0,m.has(U)&&(P=!0,m.delete(U)),w.needsAnimating[U]=!0;const V=t.getValue(U);V&&(V.liveStyle=!1)};for(const U in Z){const V=D[U],ne=B[U];if(p.hasOwnProperty(U))continue;let J=!1;aC(V)&&aC(ne)?J=!PV(V,ne):J=V!==ne,J?V!=null?z(U):m.add(U):V!==void 0&&m.has(U)?z(U):w.protectedKeys[U]=!0}w.prevProp=E,w.prevResolvedValues=D,w.isActive&&(p={...p,...D}),r&&t.blockInitialAnimation&&(I=!1),I&&(!(S&&T)||P)&&h.push(...R.map(U=>({animation:U,options:{type:b}})))}if(m.size){const x={};if(typeof c.initial!="boolean"){const b=ug(t,Array.isArray(c.initial)?c.initial[0]:c.initial);b&&b.transition&&(x.transition=b.transition)}m.forEach(b=>{const w=t.getBaseTarget(b),E=t.getValue(b);E&&(E.liveStyle=!0),x[b]=w??null}),h.push({animation:x})}let v=!!h.length;return r&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(v=!1),r=!1,v?e(h):Promise.resolve()}function a(l,c){var h;if(n[l].isActive===c)return Promise.resolve();(h=t.variantChildren)==null||h.forEach(m=>{var p;return(p=m.animationState)==null?void 0:p.setActive(l,c)}),n[l].isActive=c;const u=o(l);for(const m in n)n[m].protectedKeys={};return u}return{animateChanges:o,setActive:a,setAnimateFunction:i,getState:()=>n,reset:()=>{n=PD(),r=!0}}}function Ore(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!PV(e,t):!1}function yu(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function PD(){return{animate:yu(!0),whileInView:yu(),whileHover:yu(),whileTap:yu(),whileDrag:yu(),whileFocus:yu(),exit:yu()}}class Yc{constructor(e){this.isMounted=!1,this.node=e}update(){}}class Lre extends Yc{constructor(e){super(e),e.animationState||(e.animationState=Dre(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Fx(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let Mre=0;class zre extends Yc{constructor(){super(...arguments),this.id=Mre++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);n&&!e&&s.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const Fre={animation:{Feature:Lre},exit:{Feature:zre}};function hg(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function s0(t){return{point:{x:t.pageX,y:t.pageY}}}const Bre=t=>e=>vT(e)&&t(e,s0(e));function Rp(t,e,n,r){return hg(t,e,Bre(n),r)}function OV({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function Vre({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function jre(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}const LV=1e-4,Ure=1-LV,Hre=1+LV,MV=.01,Gre=0-MV,Wre=0+MV;function Vs(t){return t.max-t.min}function qre(t,e,n){return Math.abs(t-e)<=n}function DD(t,e,n,r=.5){t.origin=r,t.originPoint=qn(e.min,e.max,t.origin),t.scale=Vs(n)/Vs(e),t.translate=qn(n.min,n.max,t.origin)-t.originPoint,(t.scale>=Ure&&t.scale<=Hre||isNaN(t.scale))&&(t.scale=1),(t.translate>=Gre&&t.translate<=Wre||isNaN(t.translate))&&(t.translate=0)}function Pp(t,e,n,r){DD(t.x,e.x,n.x,r?r.originX:void 0),DD(t.y,e.y,n.y,r?r.originY:void 0)}function OD(t,e,n){t.min=n.min+e.min,t.max=t.min+Vs(e)}function Kre(t,e,n){OD(t.x,e.x,n.x),OD(t.y,e.y,n.y)}function LD(t,e,n){t.min=e.min-n.min,t.max=t.min+Vs(e)}function Dp(t,e,n){LD(t.x,e.x,n.x),LD(t.y,e.y,n.y)}const MD=()=>({translate:0,scale:1,origin:0,originPoint:0}),Oh=()=>({x:MD(),y:MD()}),zD=()=>({min:0,max:0}),or=()=>({x:zD(),y:zD()});function qi(t){return[t("x"),t("y")]}function YE(t){return t===void 0||t===1}function vC({scale:t,scaleX:e,scaleY:n}){return!YE(t)||!YE(e)||!YE(n)}function Su(t){return vC(t)||zV(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function zV(t){return FD(t.x)||FD(t.y)}function FD(t){return t&&t!=="0%"}function w1(t,e,n){const r=t-n,s=e*r;return n+s}function BD(t,e,n,r,s){return s!==void 0&&(t=w1(t,s,r)),w1(t,n,r)+e}function xC(t,e=0,n=1,r,s){t.min=BD(t.min,e,n,r,s),t.max=BD(t.max,e,n,r,s)}function FV(t,{x:e,y:n}){xC(t.x,e.translate,e.scale,e.originPoint),xC(t.y,n.translate,n.scale,n.originPoint)}const VD=.999999999999,jD=1.0000000000001;function Zre(t,e,n,r=!1){const s=n.length;if(!s)return;e.x=e.y=1;let i,o;for(let a=0;a<s;a++){i=n[a],o=i.projectionDelta;const{visualElement:l}=i.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Mh(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,FV(t,o)),r&&Su(i.latestValues)&&Mh(t,i.latestValues))}e.x<jD&&e.x>VD&&(e.x=1),e.y<jD&&e.y>VD&&(e.y=1)}function Lh(t,e){t.min=t.min+e,t.max=t.max+e}function UD(t,e,n,r,s=.5){const i=qn(t.min,t.max,s);xC(t,e,n,i,r)}function Mh(t,e){UD(t.x,e.x,e.scaleX,e.scale,e.originX),UD(t.y,e.y,e.scaleY,e.scale,e.originY)}function BV(t,e){return OV(jre(t.getBoundingClientRect(),e))}function Xre(t,e,n){const r=BV(t,n),{scroll:s}=e;return s&&(Lh(r.x,s.offset.x),Lh(r.y,s.offset.y)),r}const VV=({current:t})=>t?t.ownerDocument.defaultView:null,HD=(t,e)=>Math.abs(t-e);function Yre(t,e){const n=HD(t.x,e.x),r=HD(t.y,e.y);return Math.sqrt(n**2+r**2)}class jV{constructor(e,n,{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=QE(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,p=Yre(h.offset,{x:0,y:0})>=3;if(!m&&!p)return;const{point:y}=h,{timestamp:v}=ss;this.history.push({...y,timestamp:v});const{onStart:x,onMove:b}=this.handlers;m||(x&&x(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),b&&b(this.lastMoveEvent,h)},this.handlePointerMove=(h,m)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=JE(m,this.transformPagePoint),_n.update(this.updatePoint,!0)},this.handlePointerUp=(h,m)=>{this.end();const{onEnd:p,onSessionEnd:y,resumeAnimation:v}=this.handlers;if(this.dragSnapToOrigin&&v&&v(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=QE(h.type==="pointercancel"?this.lastMoveEventInfo:JE(m,this.transformPagePoint),this.history);this.startEvent&&p&&p(h,x),y&&y(h,x)},!vT(e))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.contextWindow=s||window;const o=s0(e),a=JE(o,this.transformPagePoint),{point:l}=a,{timestamp:c}=ss;this.history=[{...l,timestamp:c}];const{onSessionStart:u}=n;u&&u(e,QE(a,this.history)),this.removeListeners=r0(Rp(this.contextWindow,"pointermove",this.handlePointerMove),Rp(this.contextWindow,"pointerup",this.handlePointerUp),Rp(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Bc(this.updatePoint)}}function JE(t,e){return e?{point:e(t.point)}:t}function GD(t,e){return{x:t.x-e.x,y:t.y-e.y}}function QE({point:t},e){return{point:t,delta:GD(t,UV(e)),offset:GD(t,Jre(e)),velocity:Qre(e,.1)}}function Jre(t){return t[0]}function UV(t){return t[t.length-1]}function Qre(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const s=UV(t);for(;n>=0&&(r=t[n],!(s.timestamp-r.timestamp>Ea(e)));)n--;if(!r)return{x:0,y:0};const i=ka(s.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const o={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function ese(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?qn(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?qn(n,t,r.max):Math.min(t,n)),t}function WD(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function tse(t,{top:e,left:n,bottom:r,right:s}){return{x:WD(t.x,n,s),y:WD(t.y,e,r)}}function qD(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function nse(t,e){return{x:qD(t.x,e.x),y:qD(t.y,e.y)}}function rse(t,e){let n=.5;const r=Vs(t),s=Vs(e);return s>r?n=sg(e.min,e.max-r,t.min):r>s&&(n=sg(t.min,t.max-s,e.min)),$l(0,1,n)}function sse(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const wC=.35;function ise(t=wC){return t===!1?t=0:t===!0&&(t=wC),{x:KD(t,"left","right"),y:KD(t,"top","bottom")}}function KD(t,e,n){return{min:ZD(t,e),max:ZD(t,n)}}function ZD(t,e){return typeof t=="number"?t:t[e]||0}const ose=new WeakMap;class ase{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=or(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=u=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(s0(u).point)},i=(u,h)=>{const{drag:m,dragPropagation:p,onDragStart:y}=this.getProps();if(m&&!p&&(this.openDragLock&&this.openDragLock(),this.openDragLock=nte(m),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),qi(x=>{let b=this.getAxisMotionValue(x).get()||0;if(Ca.test(b)){const{projection:w}=this.visualElement;if(w&&w.layout){const E=w.layout.layoutBox[x];E&&(b=Vs(E)*(parseFloat(b)/100))}}this.originPoint[x]=b}),y&&_n.postRender(()=>y(u,h)),lC(this.visualElement,"transform");const{animationState:v}=this.visualElement;v&&v.setActive("whileDrag",!0)},o=(u,h)=>{const{dragPropagation:m,dragDirectionLock:p,onDirectionLock:y,onDrag:v}=this.getProps();if(!m&&!this.openDragLock)return;const{offset:x}=h;if(p&&this.currentDirection===null){this.currentDirection=lse(x),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",h.point,x),this.updateAxis("y",h.point,x),this.visualElement.render(),v&&v(u,h)},a=(u,h)=>this.stop(u,h),l=()=>qi(u=>{var h;return this.getAnimationState(u)==="paused"&&((h=this.getAxisMotionValue(u).animation)==null?void 0:h.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new jV(e,{onSessionStart:s,onStart:i,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:VV(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=n;this.startAnimation(s);const{onDragEnd:i}=this.getProps();i&&_n.postRender(()=>i(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:s}=this.getProps();if(!r||!wb(e,s,this.currentDirection))return;const i=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=ese(o,this.constraints[e],this.elastic[e])),i.set(o)}resolveConstraints(){var i;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(i=this.visualElement.projection)==null?void 0:i.layout,s=this.constraints;e&&Ph(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=tse(r.layoutBox,e):this.constraints=!1,this.elastic=ise(n),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&qi(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=sse(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Ph(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=Xre(r,s.root,this.visualElement.getTransformPagePoint());let o=nse(s.layout.layoutBox,i);if(n){const a=n(Vre(o));this.hasMutatedConstraints=!!a,a&&(o=OV(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=qi(u=>{if(!wb(u,n,this.currentDirection))return;let h=l&&l[u]||{};o&&(h={min:0,max:0});const m=s?200:1e6,p=s?40:1e7,y={type:"inertia",velocity:r?e[u]:0,bounceStiffness:m,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...i,...h};return this.startAxisValueAnimation(u,y)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return lC(this.visualElement,e),r.start(BT(e,r,0,n,this.visualElement,!1))}stopAnimation(){qi(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){qi(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){qi(n=>{const{drag:r}=this.getProps();if(!wb(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(n);if(s&&s.layout){const{min:o,max:a}=s.layout.layoutBox[n];i.set(e[n]-qn(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Ph(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};qi(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();s[o]=rse({min:l,max:l},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),qi(o=>{if(!wb(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(qn(l,c,s[o]))})}addListeners(){if(!this.visualElement.current)return;ose.set(this.visualElement,this);const e=this.visualElement.current,n=Rp(e,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Ph(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),_n.read(r);const o=hg(window,"resize",()=>this.scalePositionWithinConstraints()),a=s.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(qi(u=>{const h=this.getAxisMotionValue(u);h&&(this.originPoint[u]+=l[u].translate,h.set(h.get()+l[u].translate))}),this.visualElement.render())});return()=>{o(),n(),i(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:o=wC,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:i,dragElastic:o,dragMomentum:a}}}function wb(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function lse(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class cse extends Yc{constructor(e){super(e),this.removeGroupControls=ho,this.removeListeners=ho,this.controls=new ase(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ho}unmount(){this.removeGroupControls(),this.removeListeners()}}const XD=t=>(e,n)=>{t&&_n.postRender(()=>t(e,n))};class use extends Yc{constructor(){super(...arguments),this.removePointerDownListener=ho}onPointerDown(e){this.session=new jV(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:VV(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:XD(e),onStart:XD(n),onMove:r,onEnd:(i,o)=>{delete this.session,s&&_n.postRender(()=>s(i,o))}}}mount(){this.removePointerDownListener=Rp(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const wv={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function YD(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Um={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(nt.test(t))t=parseFloat(t);else return t;const n=YD(t,e.target.x),r=YD(t,e.target.y);return`${n}% ${r}%`}},dse={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,s=Vc.parse(t);if(s.length>5)return r;const i=Vc.createTransformer(t),o=typeof s[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;s[0+o]/=a,s[1+o]/=l;const c=qn(a,l,.5);return typeof s[2+o]=="number"&&(s[2+o]/=c),typeof s[3+o]=="number"&&(s[3+o]/=c),i(s)}};class hse extends A.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:i}=e;$te(fse),i&&(n.group&&n.group.add(i),r&&r.register&&s&&r.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),wv.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:s,isPresent:i}=this.props,o=r.projection;return o&&(o.isPresent=i,s||e.layoutDependency!==n||n===void 0||e.isPresent!==i?o.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?o.promote():o.relegate()||_n.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),bT.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function HV(t){const[e,n]=Gee(),r=A.useContext(SB);return sC.jsx(hse,{...t,layoutGroup:r,switchLayoutGroup:A.useContext(jB),isPresent:e,safeToRemove:n})}const fse={borderRadius:{...Um,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Um,borderTopRightRadius:Um,borderBottomLeftRadius:Um,borderBottomRightRadius:Um,boxShadow:dse};function mse(t,e,n){const r=Ss(t)?t:og(t);return r.start(BT("",r,e,n)),r.animation}function pse(t){return t instanceof SVGElement&&t.tagName!=="svg"}const gse=(t,e)=>t.depth-e.depth;class yse{constructor(){this.children=[],this.isDirty=!1}add(e){uT(this.children,e),this.isDirty=!0}remove(e){dT(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(gse),this.isDirty=!1,this.children.forEach(e)}}function bse(t,e){const n=Na.now(),r=({timestamp:s})=>{const i=s-n;i>=e&&(Bc(r),t(i-e))};return _n.read(r,!0),()=>Bc(r)}const GV=["TopLeft","TopRight","BottomLeft","BottomRight"],vse=GV.length,JD=t=>typeof t=="string"?parseFloat(t):t,QD=t=>typeof t=="number"||nt.test(t);function xse(t,e,n,r,s,i){s?(t.opacity=qn(0,n.opacity??1,wse(r)),t.opacityExit=qn(e.opacity??1,0,Ese(r))):i&&(t.opacity=qn(e.opacity??1,n.opacity??1,r));for(let o=0;o<vse;o++){const a=`border${GV[o]}Radius`;let l=e4(e,a),c=e4(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||QD(l)===QD(c)?(t[a]=Math.max(qn(JD(l),JD(c),r),0),(Ca.test(c)||Ca.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=qn(e.rotate||0,n.rotate||0,r))}function e4(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const wse=WV(0,.5,cV),Ese=WV(.5,.95,ho);function WV(t,e,n){return r=>r<t?0:r>e?1:n(sg(t,e,r))}function t4(t,e){t.min=e.min,t.max=e.max}function Vi(t,e){t4(t.x,e.x),t4(t.y,e.y)}function n4(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function r4(t,e,n,r,s){return t-=e,t=w1(t,1/n,r),s!==void 0&&(t=w1(t,1/s,r)),t}function kse(t,e=0,n=1,r=.5,s,i=t,o=t){if(Ca.test(e)&&(e=parseFloat(e),e=qn(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=qn(i.min,i.max,r);t===i&&(a-=e),t.min=r4(t.min,e,n,a,s),t.max=r4(t.max,e,n,a,s)}function s4(t,e,[n,r,s],i,o){kse(t,e[n],e[r],e[s],e.scale,i,o)}const Nse=["x","scaleX","originX"],Cse=["y","scaleY","originY"];function i4(t,e,n,r){s4(t.x,e,Nse,n?n.x:void 0,r?r.x:void 0),s4(t.y,e,Cse,n?n.y:void 0,r?r.y:void 0)}function o4(t){return t.translate===0&&t.scale===1}function qV(t){return o4(t.x)&&o4(t.y)}function a4(t,e){return t.min===e.min&&t.max===e.max}function _se(t,e){return a4(t.x,e.x)&&a4(t.y,e.y)}function l4(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function KV(t,e){return l4(t.x,e.x)&&l4(t.y,e.y)}function c4(t){return Vs(t.x)/Vs(t.y)}function u4(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class Sse{constructor(){this.members=[]}add(e){uT(this.members,e),e.scheduleRender()}remove(e){if(dT(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Tse(t,e,n){let r="";const s=t.x.translate/e.x,i=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((s||i||o)&&(r=`translate3d(${s}px, ${i}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:u,rotateX:h,rotateY:m,skewX:p,skewY:y}=n;c&&(r=`perspective(${c}px) ${r}`),u&&(r+=`rotate(${u}deg) `),h&&(r+=`rotateX(${h}deg) `),m&&(r+=`rotateY(${m}deg) `),p&&(r+=`skewX(${p}deg) `),y&&(r+=`skewY(${y}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const ek=["","X","Y","Z"],$se={visibility:"hidden"},d4=1e3;let Ise=0;function tk(t,e,n,r){const{latestValues:s}=e;s[t]&&(n[t]=s[t],e.setStaticValue(t,0),r&&(r[t]=0))}function ZV(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=nV(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:i}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",_n,!(s||i))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&ZV(r)}function XV({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(o={},a=e==null?void 0:e()){this.id=Ise++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Pse),this.nodes.forEach(zse),this.nodes.forEach(Fse),this.nodes.forEach(Dse)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new yse)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new fT),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=pse(o),this.instance=o;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),t){let h;const m=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=bse(m,250),wv.hasAnimatedSinceResize&&(wv.hasAnimatedSinceResize=!1,this.nodes.forEach(f4))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:m,hasRelativeLayoutChanged:p,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const v=this.options.transition||u.getDefaultTransition()||Hse,{onLayoutAnimationStart:x,onLayoutAnimationComplete:b}=u.getProps(),w=!this.targetLayout||!KV(this.targetLayout,y),E=!m&&p;if(this.options.layoutRoot||this.resumeFrom||E||m&&(w||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,E);const N={...gT(v,"layout"),onPlay:x,onComplete:b};(u.shouldReduceMotion||this.options.layoutRoot)&&(N.delay=0,N.type=!1),this.startAnimation(N)}else m||f4(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Bc(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Bse),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&ZV(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const h=this.path[u];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(h4);return}this.isUpdating||this.nodes.forEach(Lse),this.isUpdating=!1,this.nodes.forEach(Mse),this.nodes.forEach(Ase),this.nodes.forEach(Rse),this.clearAllSnapshots();const a=Na.now();ss.delta=$l(0,1e3/60,a-ss.timestamp),ss.timestamp=a,ss.isProcessing=!0,GE.update.process(ss),GE.preRender.process(ss),GE.render.process(ss),ss.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,bT.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Ose),this.sharedNodes.forEach(Vse)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,_n.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){_n.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Vs(this.snapshot.measuredBox.x)&&!Vs(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=or(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!qV(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;o&&(a||Su(this.latestValues)||u)&&(s(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),Gse(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var c;const{visualElement:o}=this.options;if(!o)return or();const a=o.measureViewportBox();if(!(((c=this.scroll)==null?void 0:c.wasRoot)||this.path.some(Wse))){const{scroll:u}=this.root;u&&(Lh(a.x,u.offset.x),Lh(a.y,u.offset.y))}return a}removeElementScroll(o){var l;const a=or();if(Vi(a,o),(l=this.scroll)!=null&&l.wasRoot)return a;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:h,options:m}=u;u!==this.root&&h&&m.layoutScroll&&(h.wasRoot&&Vi(a,o),Lh(a.x,h.offset.x),Lh(a.y,h.offset.y))}return a}applyTransform(o,a=!1){const l=or();Vi(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];!a&&u.options.layoutScroll&&u.scroll&&u!==u.root&&Mh(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),Su(u.latestValues)&&Mh(l,u.latestValues)}return Su(this.latestValues)&&Mh(l,this.latestValues),l}removeTransform(o){const a=or();Vi(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!Su(c.latestValues))continue;vC(c.latestValues)&&c.updateSnapshot();const u=or(),h=c.measurePageBox();Vi(u,h),i4(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return Su(this.latestValues)&&i4(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ss.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var m;const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==a;if(!(o||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(m=this.parent)!=null&&m.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:u,layoutId:h}=this.options;if(!(!this.layout||!(u||h))){if(this.resolvedRelativeTargetAt=ss.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=or(),this.relativeTargetOrigin=or(),Dp(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),Vi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=or(),this.targetWithTransforms=or()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Kre(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Vi(this.target,this.layout.layoutBox),FV(this.target,this.targetDelta)):Vi(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=or(),this.relativeTargetOrigin=or(),Dp(this.relativeTargetOrigin,this.target,p.target),Vi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||vC(this.parent.latestValues)||zV(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var y;const o=this.getLead(),a=!!this.resumingFrom||this!==o;let l=!0;if((this.isProjectionDirty||(y=this.parent)!=null&&y.isProjectionDirty)&&(l=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===ss.timestamp&&(l=!1),l)return;const{layout:c,layoutId:u}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||u))return;Vi(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,m=this.treeScale.y;Zre(this.layoutCorrected,this.treeScale,this.path,a),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=or());const{target:p}=o;if(!p){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(n4(this.prevProjectionDelta.x,this.projectionDelta.x),n4(this.prevProjectionDelta.y,this.projectionDelta.y)),Pp(this.projectionDelta,this.layoutCorrected,p,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==m||!u4(this.projectionDelta.x,this.prevProjectionDelta.x)||!u4(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)==null||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Oh(),this.projectionDelta=Oh(),this.projectionDeltaWithTransform=Oh()}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},h=Oh();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const m=or(),p=l?l.source:void 0,y=this.layout?this.layout.source:void 0,v=p!==y,x=this.getStack(),b=!x||x.members.length<=1,w=!!(v&&!b&&this.options.crossfade===!0&&!this.path.some(Use));this.animationProgress=0;let E;this.mixTargetDelta=N=>{const C=N/1e3;m4(h.x,o.x,C),m4(h.y,o.y,C),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Dp(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),jse(this.relativeTarget,this.relativeTargetOrigin,m,C),E&&_se(this.relativeTarget,E)&&(this.isProjectionDirty=!1),E||(E=or()),Vi(E,this.relativeTarget)),v&&(this.animationValues=u,xse(u,c,this.latestValues,C,w,b)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=C},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Bc(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=_n.update(()=>{wv.hasAnimatedSinceResize=!0,this.currentAnimation=mse(0,d4,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(d4),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:u}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&YV(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||or();const h=Vs(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+h;const m=Vs(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+m}Vi(a,l),Mh(a,u),Pp(this.projectionDeltaWithTransform,this.layoutCorrected,a,u)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new Sse),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())==null?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())==null?void 0:a.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&tk("z",o,c,this.animationValues);for(let u=0;u<ek.length;u++)tk(`rotate${ek[u]}`,o,c,this.animationValues),tk(`skew${ek[u]}`,o,c,this.animationValues);o.render();for(const u in c)o.setStaticValue(u,c[u]),this.animationValues&&(this.animationValues[u]=c[u]);o.scheduleRender()}getProjectionStyles(o){if(!this.instance||this.isSVG)return;if(!this.isVisible)return $se;const a={visibility:""},l=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,a.opacity="",a.pointerEvents=xv(o==null?void 0:o.pointerEvents)||"",a.transform=l?l(this.latestValues,""):"none",a;const c=this.getLead();if(!this.projectionDelta||!this.layout||!c.target){const p={};return this.options.layoutId&&(p.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,p.pointerEvents=xv(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Su(this.latestValues)&&(p.transform=l?l({},""):"none",this.hasProjected=!1),p}const u=c.animationValues||c.latestValues;this.applyTransformsToTarget(),a.transform=Tse(this.projectionDeltaWithTransform,this.treeScale,u),l&&(a.transform=l(u,a.transform));const{x:h,y:m}=this.projectionDelta;a.transformOrigin=`${h.origin*100}% ${m.origin*100}% 0`,c.animationValues?a.opacity=c===this?u.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:u.opacityExit:a.opacity=c===this?u.opacity!==void 0?u.opacity:"":u.opacityExit!==void 0?u.opacityExit:0;for(const p in lg){if(u[p]===void 0)continue;const{correct:y,applyTo:v,isCSSVariable:x}=lg[p],b=a.transform==="none"?u[p]:y(u[p],c);if(v){const w=v.length;for(let E=0;E<w;E++)a[v[E]]=b}else x?this.options.visualElement.renderState.vars[p]=b:a[p]=b}return this.options.layoutId&&(a.pointerEvents=c===this?xv(o==null?void 0:o.pointerEvents)||"":"none"),a}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)==null?void 0:a.stop()}),this.root.nodes.forEach(h4),this.root.sharedNodes.clear()}}}function Ase(t){t.updateLayout()}function Rse(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=t.layout,{animationType:i}=t.options,o=e.source!==t.layout.source;i==="size"?qi(h=>{const m=o?e.measuredBox[h]:e.layoutBox[h],p=Vs(m);m.min=r[h].min,m.max=m.min+p}):YV(i,e.layoutBox,r)&&qi(h=>{const m=o?e.measuredBox[h]:e.layoutBox[h],p=Vs(r[h]);m.max=m.min+p,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+p)});const a=Oh();Pp(a,r,e.layoutBox);const l=Oh();o?Pp(l,t.applyTransform(s,!0),e.measuredBox):Pp(l,r,e.layoutBox);const c=!qV(a);let u=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:m,layout:p}=h;if(m&&p){const y=or();Dp(y,e.layoutBox,m.layoutBox);const v=or();Dp(v,r,p.layoutBox),KV(y,v)||(u=!0),h.options.layoutRoot&&(t.relativeTarget=v,t.relativeTargetOrigin=y,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeLayoutChanged:u})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function Pse(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function Dse(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Ose(t){t.clearSnapshot()}function h4(t){t.clearMeasurements()}function Lse(t){t.isLayoutDirty=!1}function Mse(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function f4(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function zse(t){t.resolveTargetDelta()}function Fse(t){t.calcProjection()}function Bse(t){t.resetSkewAndRotation()}function Vse(t){t.removeLeadSnapshot()}function m4(t,e,n){t.translate=qn(e.translate,0,n),t.scale=qn(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function p4(t,e,n,r){t.min=qn(e.min,n.min,r),t.max=qn(e.max,n.max,r)}function jse(t,e,n,r){p4(t.x,e.x,n.x,r),p4(t.y,e.y,n.y,r)}function Use(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const Hse={duration:.45,ease:[.4,0,.1,1]},g4=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),y4=g4("applewebkit/")&&!g4("chrome/")?Math.round:ho;function b4(t){t.min=y4(t.min),t.max=y4(t.max)}function Gse(t){b4(t.x),b4(t.y)}function YV(t,e,n){return t==="position"||t==="preserve-aspect"&&!qre(c4(e),c4(n),.2)}function Wse(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const qse=XV({attachResizeListener:(t,e)=>hg(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),nk={current:void 0},JV=XV({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!nk.current){const t=new qse({});t.mount(window),t.setOptions({layoutScroll:!0}),nk.current=t}return nk.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),Kse={pan:{Feature:use},drag:{Feature:cse,ProjectionNode:JV,MeasureLayout:HV}};function v4(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,i=r[s];i&&_n.postRender(()=>i(e,s0(e)))}class Zse extends Yc{mount(){const{current:e}=this.node;e&&(this.unmount=ste(e,(n,r)=>(v4(this.node,r,"Start"),s=>v4(this.node,s,"End"))))}unmount(){}}class Xse extends Yc{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=r0(hg(this.node.current,"focus",()=>this.onFocus()),hg(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function x4(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),i=r[s];i&&_n.postRender(()=>i(e,s0(e)))}class Yse extends Yc{mount(){const{current:e}=this.node;e&&(this.unmount=lte(e,(n,r)=>(x4(this.node,r,"Start"),(s,{success:i})=>x4(this.node,s,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const EC=new WeakMap,rk=new WeakMap,Jse=t=>{const e=EC.get(t.target);e&&e(t)},Qse=t=>{t.forEach(Jse)};function eie({root:t,...e}){const n=t||document;rk.has(n)||rk.set(n,{});const r=rk.get(n),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(Qse,{root:t,...e})),r[s]}function tie(t,e,n){const r=eie(e);return EC.set(t,n),r.observe(t),()=>{EC.delete(t),r.unobserve(t)}}const nie={some:0,all:1};class rie extends Yc{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:i}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:nie[s]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,i&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:h}=this.node.getProps(),m=c?u:h;m&&m(l)};return tie(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(sie(e,n))&&this.startObserver()}unmount(){}}function sie({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const iie={inView:{Feature:rie},tap:{Feature:Yse},focus:{Feature:Xse},hover:{Feature:Zse}},oie={layout:{ProjectionNode:JV,MeasureLayout:HV}},kC={current:null},QV={current:!1};function aie(){if(QV.current=!0,!!lT)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>kC.current=t.matches;t.addListener(e),e()}else kC.current=!1}const lie=[...NV,vs,Vc],cie=t=>lie.find(kV(t)),uie=new WeakMap;function die(t,e,n){for(const r in e){const s=e[r],i=n[r];if(Ss(s))t.addValue(r,s);else if(Ss(i))t.addValue(r,og(s,{owner:t}));else if(i!==s)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(s):o.hasAnimated||o.set(s)}else{const o=t.getStaticValue(r);t.addValue(r,og(o!==void 0?o:s,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const w4=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class hie{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:i,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=MT,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=Na.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,_n.render(this.render,!1,!0))};const{latestValues:l,renderState:c,onUpdate:u}=o;this.onUpdate=u,this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=a,this.blockInitialAnimation=!!i,this.isControllingVariants=Bx(n),this.isVariantNode=BB(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...m}=this.scrapeMotionValuesFromProps(n,{},this);for(const p in m){const y=m[p];l[p]!==void 0&&Ss(y)&&y.set(l[p],!1)}}mount(e){this.current=e,uie.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),QV.current||aie(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:kC.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Bc(this.notifyUpdate),Bc(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Td.has(e);r&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&_n.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),i=n.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{s(),i(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in yf){const n=yf[e];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const i=this.features[e];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):or()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<w4.length;r++){const s=w4[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i="on"+s,o=e[i];o&&(this.propEventSubscriptions[s]=this.on(s,o))}this.prevMotionValues=die(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=og(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(wV(r)||dV(r))?r=parseFloat(r):!cie(r)&&Vc.test(n)&&(r=bV(e,n)),this.setBaseTarget(e,Ss(r)?r.get():r)),Ss(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var i;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const o=AT(this.props,n,(i=this.presenceContext)==null?void 0:i.custom);o&&(r=o[e])}if(n&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Ss(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new fT),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class e8 extends hie{constructor(){super(...arguments),this.KeyframeResolver=CV}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Ss(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function fie(t){return window.getComputedStyle(t)}class mie extends e8{constructor(){super(...arguments),this.type="html",this.renderInstance=YB}readValueFromInstance(e,n){if(Td.has(n))return _ne(e,n);{const r=fie(e),s=(kT(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return BV(e,n)}build(e,n,r){_T(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return RT(e,n,r)}}class pie extends e8{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=or,this.updateDimensions=()=>{this.current&&!this.renderState.dimensions&&XB(this.current,this.renderState)}}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Td.has(n)){const r=yV(n);return r&&r.default||0}return n=JB.has(n)?n:ET(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return eV(e,n,r)}onBindTransform(){this.current&&!this.renderState.dimensions&&_n.postRender(this.updateDimensions)}build(e,n,r){$T(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,s){QB(e,n,r,s)}mount(e){this.isSVGTag=IT(e.tagName),super.mount(e)}}const gie=(t,e)=>TT(t)?new pie(e):new mie(e,{allowProjection:t!==A.Fragment}),yie=Qte({...Fre,...iie,...Kse,...oie},gie),At=pte(yie);/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bie=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),vie=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),E4=t=>{const e=vie(t);return e.charAt(0).toUpperCase()+e.slice(1)},t8=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),xie=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var wie={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eie=A.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...a},l)=>A.createElement("svg",{ref:l,...wie,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:t8("lucide",s),...!i&&!xie(a)&&{"aria-hidden":"true"},...a},[...o.map(([c,u])=>A.createElement(c,u)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const st=(t,e)=>{const n=A.forwardRef(({className:r,...s},i)=>A.createElement(Eie,{ref:i,iconNode:e,className:t8(`lucide-${bie(E4(t))}`,`lucide-${t}`,r),...s}));return n.displayName=E4(t),n};/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kie=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],i0=st("bell",kie);/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nie=[["path",{d:"M15 13a3 3 0 1 0-6 0",key:"10j68g"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}],["circle",{cx:"12",cy:"8",r:"2",key:"1822b1"}]],Cie=st("book-user",Nie);/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _ie=[["path",{d:"M12 6V2H8",key:"1155em"}],["path",{d:"m8 18-4 4V8a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2Z",key:"w2lp3e"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M9 11v2",key:"1ueba0"}],["path",{d:"M15 11v2",key:"i11awn"}],["path",{d:"M20 12h2",key:"1q8mjw"}]],Sie=st("bot-message-square",_ie);/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tie=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]],$ie=st("brain",Tie);/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iie=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],VT=st("briefcase",Iie);/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aie=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Pa=st("calendar",Aie);/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rie=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],n8=st("check",Rie);/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pie=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],fg=st("chevron-down",Pie);/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Die=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],NC=st("chevron-up",Die);/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oie=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Lie=st("circle-alert",Oie);/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mie=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],E1=st("circle-check-big",Mie);/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zie=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],r8=st("circle-help",zie);/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fie=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],jT=st("circle-x",Fie);/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bie=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]],s8=st("clipboard-check",Bie);/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vie=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],UT=st("clipboard-list",Vie);/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jie=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],jx=st("clock",jie);/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uie=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Hie=st("external-link",Uie);/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gie=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],CC=st("eye-off",Gie);/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wie=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],_C=st("eye",Wie);/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qie=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],i8=st("file-text",qie);/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kie=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],k4=st("funnel",Kie);/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zie=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Xie=st("globe",Zie);/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yie=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],HT=st("house",Yie);/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jie=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Qie=st("image",Jie);/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eoe=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],toe=st("list",eoe);/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const noe=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Ev=st("lock",noe);/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const roe=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],GT=st("log-out",roe);/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const soe=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],N4=st("mail",soe);/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ioe=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Ux=st("map-pin",ioe);/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ooe=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],aoe=st("map",ooe);/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const loe=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],o8=st("message-circle",loe);/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const coe=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],WT=st("moon",coe);/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uoe=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],vf=st("phone",uoe);/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const doe=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],C4=st("plus",doe);/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hoe=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],xf=st("search",hoe);/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const foe=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],moe=st("send",foe);/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const poe=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],qT=st("settings",poe);/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const goe=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],yoe=st("sparkles",goe);/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const boe=[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],a8=st("square-check-big",boe);/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const voe=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],l8=st("square-pen",voe);/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xoe=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],c8=st("square-x",xoe);/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const woe=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Yn=st("star",woe);/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eoe=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],u8=st("sun",Eoe);/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const koe=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],k1=st("trash-2",koe);/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Noe=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Coe=st("triangle-alert",Noe);/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _oe=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],d8=st("upload",_oe);/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Soe=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]],Toe=st("user-check",Soe);/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $oe=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Xf=st("user",$oe);/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ioe=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],Aoe=st("users",Ioe);/**
 * @license lucide-react v0.501.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Roe=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],fo=st("x",Roe),Oe=({children:t,type:e="button",variant:n="primary",className:r="",disabled:s=!1,onClick:i,fullWidth:o=!1,...a})=>{const l="btn",c={primary:"btn-primary",secondary:"btn-secondary",outline:"border border-secondary text-secondary hover:bg-secondary/10",text:"bg-transparent text-primary hover:bg-gray-100"},u=o?"w-full":"",h=s?"opacity-50 cursor-not-allowed":"";return d.createElement("button",{type:e,className:`${l} ${c[n]} ${u} ${h} ${r}`,disabled:s,onClick:i,...a},t)},Poe={clients:[{id:1,name:" ",email:"ahmed@example.com",phone:"0923456789",address:" ",profilePicture:"https://randomuser.me/api/portraits/men/1.jpg"},{id:2,name:" ",email:"sara@example.com",phone:"0934567890",address:" ",profilePicture:"https://randomuser.me/api/portraits/women/2.jpg"}],craftsmen:[{id:1,name:" ",email:"mohammad@example.com",phone:"0912345678",address:" ",professions:[""],specializations:["  "," "," "],rating:4.8,profilePicture:"https://randomuser.me/api/portraits/men/3.jpg",location:{lat:33.5138,lng:36.2765},workRadius:5,bio:"     10          .",streetsInWorkRange:[" "," "," "," "," "," "," 29 "," "],hospitalsInWorkRange:[" ","  "," "," "," ","  "," Diamond smiles"],mosquesInWorkRange:["  "," "," "," "," "],workingHours:{saturday:{isWorking:!0,from:"09:00",to:"17:00"},sunday:{isWorking:!0,from:"09:00",to:"17:00"},monday:{isWorking:!0,from:"09:00",to:"17:00"},tuesday:{isWorking:!0,from:"09:00",to:"17:00"},wednesday:{isWorking:!0,from:"09:00",to:"17:00"},thursday:{isWorking:!1,from:"09:00",to:"17:00"},friday:{isWorking:!1,from:"09:00",to:"17:00"}}},{id:2,name:" ",email:"omar@example.com",phone:"0945678901",address:" ",professions:[""],specializations:[" "," "," "],rating:4.5,profilePicture:"https://randomuser.me/api/portraits/men/4.jpg",location:{lat:34.7324,lng:36.7266},workRadius:3,bio:"    15        .",streetsInWorkRange:[" "," "," "," "," "],hospitalsInWorkRange:[" "," "," "," "],mosquesInWorkRange:["   "," "," "],workingHours:{saturday:{isWorking:!0,from:"10:00",to:"18:00"},sunday:{isWorking:!0,from:"10:00",to:"18:00"},monday:{isWorking:!0,from:"10:00",to:"18:00"},tuesday:{isWorking:!1,from:"10:00",to:"18:00"},wednesday:{isWorking:!1,from:"10:00",to:"18:00"},thursday:{isWorking:!0,from:"10:00",to:"18:00"},friday:{isWorking:!0,from:"10:00",to:"18:00"}}}]},Dt=Fl(Xc(t=>({user:Poe.craftsmen[0],isAuthenticated:!0,userType:"craftsman",rememberMe:!1,savedCredentials:null,login:(e,n,r=!1,s=null)=>t({user:e,isAuthenticated:!0,userType:n,rememberMe:r,savedCredentials:r?s:null}),logout:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("tokenExpiry"),localStorage.removeItem("jobscope-user-storage"),sessionStorage.clear(),console.log("     userStore"),t(e=>({user:null,isAuthenticated:!1,userType:null,savedCredentials:e.rememberMe?e.savedCredentials:null,rememberMe:e.rememberMe})),setTimeout(()=>{console.log("    ")},100)},updateUser:e=>t(n=>({user:{...n.user,...e}})),setRememberMe:e=>t({rememberMe:e}),setSavedCredentials:e=>t({savedCredentials:e}),clearSavedCredentials:()=>t({savedCredentials:null})}),{name:"jobscope-user-storage"}));var h8={exports:{}};(()=>{var t={296:(s,i,o)=>{var a=/^\s+|\s+$/g,l=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,u=/^0o[0-7]+$/i,h=parseInt,m=typeof o.g=="object"&&o.g&&o.g.Object===Object&&o.g,p=typeof self=="object"&&self&&self.Object===Object&&self,y=m||p||Function("return this")(),v=Object.prototype.toString,x=Math.max,b=Math.min,w=function(){return y.Date.now()};function E(C){var S=typeof C;return!!C&&(S=="object"||S=="function")}function N(C){if(typeof C=="number")return C;if(function(I){return typeof I=="symbol"||function(P){return!!P&&typeof P=="object"}(I)&&v.call(I)=="[object Symbol]"}(C))return NaN;if(E(C)){var S=typeof C.valueOf=="function"?C.valueOf():C;C=E(S)?S+"":S}if(typeof C!="string")return C===0?C:+C;C=C.replace(a,"");var T=c.test(C);return T||u.test(C)?h(C.slice(2),T?2:8):l.test(C)?NaN:+C}s.exports=function(C,S,T){var I,P,R,D,B,Z,z=0,q=!1,M=!1,U=!0;if(typeof C!="function")throw new TypeError("Expected a function");function V(H){var W=I,te=P;return I=P=void 0,z=H,D=C.apply(te,W)}function ne(H){var W=H-Z;return Z===void 0||W>=S||W<0||M&&H-z>=R}function J(){var H=w();if(ne(H))return G(H);B=setTimeout(J,function(W){var te=S-(W-Z);return M?b(te,R-(W-z)):te}(H))}function G(H){return B=void 0,U&&I?V(H):(I=P=void 0,D)}function X(){var H=w(),W=ne(H);if(I=arguments,P=this,Z=H,W){if(B===void 0)return function(te){return z=te,B=setTimeout(J,S),q?V(te):D}(Z);if(M)return B=setTimeout(J,S),V(Z)}return B===void 0&&(B=setTimeout(J,S)),D}return S=N(S)||0,E(T)&&(q=!!T.leading,R=(M="maxWait"in T)?x(N(T.maxWait)||0,S):R,U="trailing"in T?!!T.trailing:U),X.cancel=function(){B!==void 0&&clearTimeout(B),z=0,I=Z=P=B=void 0},X.flush=function(){return B===void 0?D:G(w())},X}},96:(s,i,o)=>{var a="Expected a function",l=NaN,c="[object Symbol]",u=/^\s+|\s+$/g,h=/^[-+]0x[0-9a-f]+$/i,m=/^0b[01]+$/i,p=/^0o[0-7]+$/i,y=parseInt,v=typeof o.g=="object"&&o.g&&o.g.Object===Object&&o.g,x=typeof self=="object"&&self&&self.Object===Object&&self,b=v||x||Function("return this")(),w=Object.prototype.toString,E=Math.max,N=Math.min,C=function(){return b.Date.now()};function S(I){var P=typeof I;return!!I&&(P=="object"||P=="function")}function T(I){if(typeof I=="number")return I;if(function(D){return typeof D=="symbol"||function(B){return!!B&&typeof B=="object"}(D)&&w.call(D)==c}(I))return l;if(S(I)){var P=typeof I.valueOf=="function"?I.valueOf():I;I=S(P)?P+"":P}if(typeof I!="string")return I===0?I:+I;I=I.replace(u,"");var R=m.test(I);return R||p.test(I)?y(I.slice(2),R?2:8):h.test(I)?l:+I}s.exports=function(I,P,R){var D=!0,B=!0;if(typeof I!="function")throw new TypeError(a);return S(R)&&(D="leading"in R?!!R.leading:D,B="trailing"in R?!!R.trailing:B),function(Z,z,q){var M,U,V,ne,J,G,X=0,H=!1,W=!1,te=!0;if(typeof Z!="function")throw new TypeError(a);function ae(De){var Ke=M,Je=U;return M=U=void 0,X=De,ne=Z.apply(Je,Ke)}function ve(De){var Ke=De-G;return G===void 0||Ke>=z||Ke<0||W&&De-X>=V}function Ce(){var De=C();if(ve(De))return Ie(De);J=setTimeout(Ce,function(Ke){var Je=z-(Ke-G);return W?N(Je,V-(Ke-X)):Je}(De))}function Ie(De){return J=void 0,te&&M?ae(De):(M=U=void 0,ne)}function Fe(){var De=C(),Ke=ve(De);if(M=arguments,U=this,G=De,Ke){if(J===void 0)return function(Je){return X=Je,J=setTimeout(Ce,z),H?ae(Je):ne}(G);if(W)return J=setTimeout(Ce,z),ae(G)}return J===void 0&&(J=setTimeout(Ce,z)),ne}return z=T(z)||0,S(q)&&(H=!!q.leading,V=(W="maxWait"in q)?E(T(q.maxWait)||0,z):V,te="trailing"in q?!!q.trailing:te),Fe.cancel=function(){J!==void 0&&clearTimeout(J),X=0,M=G=U=J=void 0},Fe.flush=function(){return J===void 0?ne:Ie(C())},Fe}(I,P,{leading:D,maxWait:P,trailing:B})}},703:(s,i,o)=>{var a=o(414);function l(){}function c(){}c.resetWarningCache=l,s.exports=function(){function u(p,y,v,x,b,w){if(w!==a){var E=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw E.name="Invariant Violation",E}}function h(){return u}u.isRequired=u;var m={array:u,bigint:u,bool:u,func:u,number:u,object:u,string:u,symbol:u,any:u,arrayOf:h,element:u,elementType:u,instanceOf:h,node:u,objectOf:h,oneOf:h,oneOfType:h,shape:h,exact:h,checkPropTypes:c,resetWarningCache:l};return m.PropTypes=m,m}},697:(s,i,o)=>{s.exports=o(703)()},414:s=>{s.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}},e={};function n(s){var i=e[s];if(i!==void 0)return i.exports;var o=e[s]={exports:{}};return t[s](o,o.exports,n),o.exports}n.n=s=>{var i=s&&s.__esModule?()=>s.default:()=>s;return n.d(i,{a:i}),i},n.d=(s,i)=>{for(var o in i)n.o(i,o)&&!n.o(s,o)&&Object.defineProperty(s,o,{enumerable:!0,get:i[o]})},n.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),n.o=(s,i)=>Object.prototype.hasOwnProperty.call(s,i),n.r=s=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})};var r={};(()=>{n.r(r),n.d(r,{LazyLoadComponent:()=>Ke,LazyLoadImage:()=>es,trackWindowScroll:()=>ne});const s=A;var i=n.n(s),o=n(697);function a(){return typeof window<"u"&&"IntersectionObserver"in window&&"isIntersecting"in window.IntersectionObserverEntry.prototype}function l(be){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(le){return typeof le}:function(le){return le&&typeof Symbol=="function"&&le.constructor===Symbol&&le!==Symbol.prototype?"symbol":typeof le},l(be)}function c(be,le){var Ee=Object.keys(be);if(Object.getOwnPropertySymbols){var Ne=Object.getOwnPropertySymbols(be);le&&(Ne=Ne.filter(function(Qe){return Object.getOwnPropertyDescriptor(be,Qe).enumerable})),Ee.push.apply(Ee,Ne)}return Ee}function u(be,le,Ee){return(le=m(le))in be?Object.defineProperty(be,le,{value:Ee,enumerable:!0,configurable:!0,writable:!0}):be[le]=Ee,be}function h(be,le){for(var Ee=0;Ee<le.length;Ee++){var Ne=le[Ee];Ne.enumerable=Ne.enumerable||!1,Ne.configurable=!0,"value"in Ne&&(Ne.writable=!0),Object.defineProperty(be,m(Ne.key),Ne)}}function m(be){var le=function(Ee,Ne){if(l(Ee)!=="object"||Ee===null)return Ee;var Qe=Ee[Symbol.toPrimitive];if(Qe!==void 0){var lt=Qe.call(Ee,"string");if(l(lt)!=="object")return lt;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(Ee)}(be);return l(le)==="symbol"?le:String(le)}function p(be,le){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Ee,Ne){return Ee.__proto__=Ne,Ee},p(be,le)}function y(be){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(le){return le.__proto__||Object.getPrototypeOf(le)},y(be)}var v=function(be){be.forEach(function(le){le.isIntersecting&&le.target.onVisible()})},x={},b=function(be){(function(j,Q){if(typeof Q!="function"&&Q!==null)throw new TypeError("Super expression must either be null or a function");j.prototype=Object.create(Q&&Q.prototype,{constructor:{value:j,writable:!0,configurable:!0}}),Object.defineProperty(j,"prototype",{writable:!1}),Q&&p(j,Q)})(Nt,be);var le,Ee,Ne,Qe,lt=(Ne=Nt,Qe=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var j,Q=y(Ne);if(Qe){var ge=y(this).constructor;j=Reflect.construct(Q,arguments,ge)}else j=Q.apply(this,arguments);return function(Se,$e){if($e&&(l($e)==="object"||typeof $e=="function"))return $e;if($e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(Be){if(Be===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Be}(Se)}(this,j)});function Nt(j){var Q;if(function(Se,$e){if(!(Se instanceof $e))throw new TypeError("Cannot call a class as a function")}(this,Nt),(Q=lt.call(this,j)).supportsObserver=!j.scrollPosition&&j.useIntersectionObserver&&a(),Q.supportsObserver){var ge=j.threshold;Q.observer=function(Se){return x[Se]=x[Se]||new IntersectionObserver(v,{rootMargin:Se+"px"}),x[Se]}(ge)}return Q}return le=Nt,Ee=[{key:"componentDidMount",value:function(){this.placeholder&&this.observer&&(this.placeholder.onVisible=this.props.onVisible,this.observer.observe(this.placeholder)),this.supportsObserver||this.updateVisibility()}},{key:"componentWillUnmount",value:function(){this.observer&&this.placeholder&&this.observer.unobserve(this.placeholder)}},{key:"componentDidUpdate",value:function(){this.supportsObserver||this.updateVisibility()}},{key:"getPlaceholderBoundingBox",value:function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props.scrollPosition,Q=this.placeholder.getBoundingClientRect(),ge=this.placeholder.style,Se=parseInt(ge.getPropertyValue("margin-left"),10)||0,$e=parseInt(ge.getPropertyValue("margin-top"),10)||0;return{bottom:j.y+Q.bottom+$e,left:j.x+Q.left+Se,right:j.x+Q.right+Se,top:j.y+Q.top+$e}}},{key:"isPlaceholderInViewport",value:function(){if(typeof window>"u"||!this.placeholder)return!1;var j=this.props,Q=j.scrollPosition,ge=j.threshold,Se=this.getPlaceholderBoundingBox(Q),$e=Q.y+window.innerHeight,Be=Q.x,Tt=Q.x+window.innerWidth,Ut=Q.y;return Ut-ge<=Se.bottom&&$e+ge>=Se.top&&Be-ge<=Se.right&&Tt+ge>=Se.left}},{key:"updateVisibility",value:function(){this.isPlaceholderInViewport()&&this.props.onVisible()}},{key:"render",value:function(){var j=this,Q=this.props,ge=Q.className,Se=Q.height,$e=Q.placeholder,Be=Q.style,Tt=Q.width;if($e&&typeof $e.type!="function")return i().cloneElement($e,{ref:function(Ft){return j.placeholder=Ft}});var Ut=function(Ft){for(var pn=1;pn<arguments.length;pn++){var Jt=arguments[pn]!=null?arguments[pn]:{};pn%2?c(Object(Jt),!0).forEach(function(Pn){u(Ft,Pn,Jt[Pn])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Ft,Object.getOwnPropertyDescriptors(Jt)):c(Object(Jt)).forEach(function(Pn){Object.defineProperty(Ft,Pn,Object.getOwnPropertyDescriptor(Jt,Pn))})}return Ft}({display:"inline-block"},Be);return Tt!==void 0&&(Ut.width=Tt),Se!==void 0&&(Ut.height=Se),i().createElement("span",{className:ge,ref:function(Ft){return j.placeholder=Ft},style:Ut},$e)}}],Ee&&h(le.prototype,Ee),Object.defineProperty(le,"prototype",{writable:!1}),Nt}(i().Component);b.propTypes={onVisible:o.PropTypes.func.isRequired,className:o.PropTypes.string,height:o.PropTypes.oneOfType([o.PropTypes.number,o.PropTypes.string]),placeholder:o.PropTypes.element,threshold:o.PropTypes.number,useIntersectionObserver:o.PropTypes.bool,scrollPosition:o.PropTypes.shape({x:o.PropTypes.number.isRequired,y:o.PropTypes.number.isRequired}),width:o.PropTypes.oneOfType([o.PropTypes.number,o.PropTypes.string])},b.defaultProps={className:"",placeholder:null,threshold:100,useIntersectionObserver:!0};const w=b;var E=n(296),N=n.n(E),C=n(96),S=n.n(C),T=function(be){var le=getComputedStyle(be,null);return le.getPropertyValue("overflow")+le.getPropertyValue("overflow-y")+le.getPropertyValue("overflow-x")};const I=function(be){if(!(be instanceof HTMLElement))return window;for(var le=be;le&&le instanceof HTMLElement;){if(/(scroll|auto)/.test(T(le)))return le;le=le.parentNode}return window};function P(be){return P=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(le){return typeof le}:function(le){return le&&typeof Symbol=="function"&&le.constructor===Symbol&&le!==Symbol.prototype?"symbol":typeof le},P(be)}var R=["delayMethod","delayTime"];function D(){return D=Object.assign?Object.assign.bind():function(be){for(var le=1;le<arguments.length;le++){var Ee=arguments[le];for(var Ne in Ee)Object.prototype.hasOwnProperty.call(Ee,Ne)&&(be[Ne]=Ee[Ne])}return be},D.apply(this,arguments)}function B(be,le){for(var Ee=0;Ee<le.length;Ee++){var Ne=le[Ee];Ne.enumerable=Ne.enumerable||!1,Ne.configurable=!0,"value"in Ne&&(Ne.writable=!0),Object.defineProperty(be,(Qe=function(lt,Nt){if(P(lt)!=="object"||lt===null)return lt;var j=lt[Symbol.toPrimitive];if(j!==void 0){var Q=j.call(lt,"string");if(P(Q)!=="object")return Q;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(lt)}(Ne.key),P(Qe)==="symbol"?Qe:String(Qe)),Ne)}var Qe}function Z(be,le){return Z=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Ee,Ne){return Ee.__proto__=Ne,Ee},Z(be,le)}function z(be,le){if(le&&(P(le)==="object"||typeof le=="function"))return le;if(le!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return q(be)}function q(be){if(be===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return be}function M(be){return M=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(le){return le.__proto__||Object.getPrototypeOf(le)},M(be)}var U=function(){return typeof window>"u"?0:window.scrollX||window.pageXOffset},V=function(){return typeof window>"u"?0:window.scrollY||window.pageYOffset};const ne=function(be){var le=function(Ee){(function(ge,Se){if(typeof Se!="function"&&Se!==null)throw new TypeError("Super expression must either be null or a function");ge.prototype=Object.create(Se&&Se.prototype,{constructor:{value:ge,writable:!0,configurable:!0}}),Object.defineProperty(ge,"prototype",{writable:!1}),Se&&Z(ge,Se)})(Q,Ee);var Ne,Qe,lt,Nt,j=(lt=Q,Nt=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var ge,Se=M(lt);if(Nt){var $e=M(this).constructor;ge=Reflect.construct(Se,arguments,$e)}else ge=Se.apply(this,arguments);return z(this,ge)});function Q(ge){var Se;if(function(Be,Tt){if(!(Be instanceof Tt))throw new TypeError("Cannot call a class as a function")}(this,Q),(Se=j.call(this,ge)).useIntersectionObserver=ge.useIntersectionObserver&&a(),Se.useIntersectionObserver)return z(Se);var $e=Se.onChangeScroll.bind(q(Se));return ge.delayMethod==="debounce"?Se.delayedScroll=N()($e,ge.delayTime):ge.delayMethod==="throttle"&&(Se.delayedScroll=S()($e,ge.delayTime)),Se.state={scrollPosition:{x:U(),y:V()}},Se.baseComponentRef=i().createRef(),Se}return Ne=Q,(Qe=[{key:"componentDidMount",value:function(){this.addListeners()}},{key:"componentWillUnmount",value:function(){this.removeListeners()}},{key:"componentDidUpdate",value:function(){typeof window>"u"||this.useIntersectionObserver||I(this.baseComponentRef.current)!==this.scrollElement&&(this.removeListeners(),this.addListeners())}},{key:"addListeners",value:function(){typeof window>"u"||this.useIntersectionObserver||(this.scrollElement=I(this.baseComponentRef.current),this.scrollElement.addEventListener("scroll",this.delayedScroll,{passive:!0}),window.addEventListener("resize",this.delayedScroll,{passive:!0}),this.scrollElement!==window&&window.addEventListener("scroll",this.delayedScroll,{passive:!0}))}},{key:"removeListeners",value:function(){typeof window>"u"||this.useIntersectionObserver||(this.scrollElement.removeEventListener("scroll",this.delayedScroll),window.removeEventListener("resize",this.delayedScroll),this.scrollElement!==window&&window.removeEventListener("scroll",this.delayedScroll))}},{key:"onChangeScroll",value:function(){this.useIntersectionObserver||this.setState({scrollPosition:{x:U(),y:V()}})}},{key:"render",value:function(){var ge=this.props,Se=(ge.delayMethod,ge.delayTime,function(Be,Tt){if(Be==null)return{};var Ut,Ft,pn=function(Pn,Dn){if(Pn==null)return{};var gs,$r,Hl={},zy=Object.keys(Pn);for($r=0;$r<zy.length;$r++)gs=zy[$r],Dn.indexOf(gs)>=0||(Hl[gs]=Pn[gs]);return Hl}(Be,Tt);if(Object.getOwnPropertySymbols){var Jt=Object.getOwnPropertySymbols(Be);for(Ft=0;Ft<Jt.length;Ft++)Ut=Jt[Ft],Tt.indexOf(Ut)>=0||Object.prototype.propertyIsEnumerable.call(Be,Ut)&&(pn[Ut]=Be[Ut])}return pn}(ge,R)),$e=this.useIntersectionObserver?null:this.state.scrollPosition;return i().createElement(be,D({forwardRef:this.baseComponentRef,scrollPosition:$e},Se))}}])&&B(Ne.prototype,Qe),Object.defineProperty(Ne,"prototype",{writable:!1}),Q}(i().Component);return le.propTypes={delayMethod:o.PropTypes.oneOf(["debounce","throttle"]),delayTime:o.PropTypes.number,useIntersectionObserver:o.PropTypes.bool},le.defaultProps={delayMethod:"throttle",delayTime:300,useIntersectionObserver:!0},le};function J(be){return J=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(le){return typeof le}:function(le){return le&&typeof Symbol=="function"&&le.constructor===Symbol&&le!==Symbol.prototype?"symbol":typeof le},J(be)}function G(be,le){for(var Ee=0;Ee<le.length;Ee++){var Ne=le[Ee];Ne.enumerable=Ne.enumerable||!1,Ne.configurable=!0,"value"in Ne&&(Ne.writable=!0),Object.defineProperty(be,(Qe=function(lt,Nt){if(J(lt)!=="object"||lt===null)return lt;var j=lt[Symbol.toPrimitive];if(j!==void 0){var Q=j.call(lt,"string");if(J(Q)!=="object")return Q;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(lt)}(Ne.key),J(Qe)==="symbol"?Qe:String(Qe)),Ne)}var Qe}function X(be,le){return X=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Ee,Ne){return Ee.__proto__=Ne,Ee},X(be,le)}function H(be){return H=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(le){return le.__proto__||Object.getPrototypeOf(le)},H(be)}var W=function(be){(function(j,Q){if(typeof Q!="function"&&Q!==null)throw new TypeError("Super expression must either be null or a function");j.prototype=Object.create(Q&&Q.prototype,{constructor:{value:j,writable:!0,configurable:!0}}),Object.defineProperty(j,"prototype",{writable:!1}),Q&&X(j,Q)})(Nt,be);var le,Ee,Ne,Qe,lt=(Ne=Nt,Qe=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var j,Q=H(Ne);if(Qe){var ge=H(this).constructor;j=Reflect.construct(Q,arguments,ge)}else j=Q.apply(this,arguments);return function(Se,$e){if($e&&(J($e)==="object"||typeof $e=="function"))return $e;if($e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(Be){if(Be===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Be}(Se)}(this,j)});function Nt(j){return function(Q,ge){if(!(Q instanceof ge))throw new TypeError("Cannot call a class as a function")}(this,Nt),lt.call(this,j)}return le=Nt,(Ee=[{key:"render",value:function(){return i().createElement(w,this.props)}}])&&G(le.prototype,Ee),Object.defineProperty(le,"prototype",{writable:!1}),Nt}(i().Component);const te=ne(W);function ae(be){return ae=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(le){return typeof le}:function(le){return le&&typeof Symbol=="function"&&le.constructor===Symbol&&le!==Symbol.prototype?"symbol":typeof le},ae(be)}function ve(be,le){for(var Ee=0;Ee<le.length;Ee++){var Ne=le[Ee];Ne.enumerable=Ne.enumerable||!1,Ne.configurable=!0,"value"in Ne&&(Ne.writable=!0),Object.defineProperty(be,(Qe=function(lt,Nt){if(ae(lt)!=="object"||lt===null)return lt;var j=lt[Symbol.toPrimitive];if(j!==void 0){var Q=j.call(lt,"string");if(ae(Q)!=="object")return Q;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(lt)}(Ne.key),ae(Qe)==="symbol"?Qe:String(Qe)),Ne)}var Qe}function Ce(be,le){return Ce=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Ee,Ne){return Ee.__proto__=Ne,Ee},Ce(be,le)}function Ie(be){if(be===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return be}function Fe(be){return Fe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(le){return le.__proto__||Object.getPrototypeOf(le)},Fe(be)}var De=function(be){(function(j,Q){if(typeof Q!="function"&&Q!==null)throw new TypeError("Super expression must either be null or a function");j.prototype=Object.create(Q&&Q.prototype,{constructor:{value:j,writable:!0,configurable:!0}}),Object.defineProperty(j,"prototype",{writable:!1}),Q&&Ce(j,Q)})(Nt,be);var le,Ee,Ne,Qe,lt=(Ne=Nt,Qe=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var j,Q=Fe(Ne);if(Qe){var ge=Fe(this).constructor;j=Reflect.construct(Q,arguments,ge)}else j=Q.apply(this,arguments);return function(Se,$e){if($e&&(ae($e)==="object"||typeof $e=="function"))return $e;if($e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ie(Se)}(this,j)});function Nt(j){var Q;(function(Tt,Ut){if(!(Tt instanceof Ut))throw new TypeError("Cannot call a class as a function")})(this,Nt),Q=lt.call(this,j);var ge=j.afterLoad,Se=j.beforeLoad,$e=j.scrollPosition,Be=j.visibleByDefault;return Q.state={visible:Be},Be&&(Se(),ge()),Q.onVisible=Q.onVisible.bind(Ie(Q)),Q.isScrollTracked=!!($e&&Number.isFinite($e.x)&&$e.x>=0&&Number.isFinite($e.y)&&$e.y>=0),Q}return le=Nt,(Ee=[{key:"componentDidUpdate",value:function(j,Q){Q.visible!==this.state.visible&&this.props.afterLoad()}},{key:"onVisible",value:function(){this.props.beforeLoad(),this.setState({visible:!0})}},{key:"render",value:function(){if(this.state.visible)return this.props.children;var j=this.props,Q=j.className,ge=j.delayMethod,Se=j.delayTime,$e=j.height,Be=j.placeholder,Tt=j.scrollPosition,Ut=j.style,Ft=j.threshold,pn=j.useIntersectionObserver,Jt=j.width;return this.isScrollTracked||pn&&a()?i().createElement(w,{className:Q,height:$e,onVisible:this.onVisible,placeholder:Be,scrollPosition:Tt,style:Ut,threshold:Ft,useIntersectionObserver:pn,width:Jt}):i().createElement(te,{className:Q,delayMethod:ge,delayTime:Se,height:$e,onVisible:this.onVisible,placeholder:Be,style:Ut,threshold:Ft,width:Jt})}}])&&ve(le.prototype,Ee),Object.defineProperty(le,"prototype",{writable:!1}),Nt}(i().Component);De.propTypes={afterLoad:o.PropTypes.func,beforeLoad:o.PropTypes.func,useIntersectionObserver:o.PropTypes.bool,visibleByDefault:o.PropTypes.bool},De.defaultProps={afterLoad:function(){return{}},beforeLoad:function(){return{}},useIntersectionObserver:!0,visibleByDefault:!1};const Ke=De;function Je(be){return Je=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(le){return typeof le}:function(le){return le&&typeof Symbol=="function"&&le.constructor===Symbol&&le!==Symbol.prototype?"symbol":typeof le},Je(be)}var dt=["afterLoad","beforeLoad","delayMethod","delayTime","effect","placeholder","placeholderSrc","scrollPosition","threshold","useIntersectionObserver","visibleByDefault","wrapperClassName","wrapperProps"];function Et(be,le){var Ee=Object.keys(be);if(Object.getOwnPropertySymbols){var Ne=Object.getOwnPropertySymbols(be);le&&(Ne=Ne.filter(function(Qe){return Object.getOwnPropertyDescriptor(be,Qe).enumerable})),Ee.push.apply(Ee,Ne)}return Ee}function kt(be){for(var le=1;le<arguments.length;le++){var Ee=arguments[le]!=null?arguments[le]:{};le%2?Et(Object(Ee),!0).forEach(function(Ne){Ot(be,Ne,Ee[Ne])}):Object.getOwnPropertyDescriptors?Object.defineProperties(be,Object.getOwnPropertyDescriptors(Ee)):Et(Object(Ee)).forEach(function(Ne){Object.defineProperty(be,Ne,Object.getOwnPropertyDescriptor(Ee,Ne))})}return be}function Ot(be,le,Ee){return(le=Yt(le))in be?Object.defineProperty(be,le,{value:Ee,enumerable:!0,configurable:!0,writable:!0}):be[le]=Ee,be}function St(){return St=Object.assign?Object.assign.bind():function(be){for(var le=1;le<arguments.length;le++){var Ee=arguments[le];for(var Ne in Ee)Object.prototype.hasOwnProperty.call(Ee,Ne)&&(be[Ne]=Ee[Ne])}return be},St.apply(this,arguments)}function Qr(be,le){for(var Ee=0;Ee<le.length;Ee++){var Ne=le[Ee];Ne.enumerable=Ne.enumerable||!1,Ne.configurable=!0,"value"in Ne&&(Ne.writable=!0),Object.defineProperty(be,Yt(Ne.key),Ne)}}function Yt(be){var le=function(Ee,Ne){if(Je(Ee)!=="object"||Ee===null)return Ee;var Qe=Ee[Symbol.toPrimitive];if(Qe!==void 0){var lt=Qe.call(Ee,"string");if(Je(lt)!=="object")return lt;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(Ee)}(be);return Je(le)==="symbol"?le:String(le)}function Tr(be,le){return Tr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Ee,Ne){return Ee.__proto__=Ne,Ee},Tr(be,le)}function Un(be){return Un=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(le){return le.__proto__||Object.getPrototypeOf(le)},Un(be)}var ps=function(be){(function(j,Q){if(typeof Q!="function"&&Q!==null)throw new TypeError("Super expression must either be null or a function");j.prototype=Object.create(Q&&Q.prototype,{constructor:{value:j,writable:!0,configurable:!0}}),Object.defineProperty(j,"prototype",{writable:!1}),Q&&Tr(j,Q)})(Nt,be);var le,Ee,Ne,Qe,lt=(Ne=Nt,Qe=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var j,Q=Un(Ne);if(Qe){var ge=Un(this).constructor;j=Reflect.construct(Q,arguments,ge)}else j=Q.apply(this,arguments);return function(Se,$e){if($e&&(Je($e)==="object"||typeof $e=="function"))return $e;if($e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(Be){if(Be===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Be}(Se)}(this,j)});function Nt(j){var Q;return function(ge,Se){if(!(ge instanceof Se))throw new TypeError("Cannot call a class as a function")}(this,Nt),(Q=lt.call(this,j)).state={loaded:!1},Q}return le=Nt,(Ee=[{key:"onImageLoad",value:function(){var j=this;return this.state.loaded?null:function(Q){j.props.onLoad(Q),j.props.afterLoad(),j.setState({loaded:!0})}}},{key:"getImg",value:function(){var j=this.props,Q=(j.afterLoad,j.beforeLoad,j.delayMethod,j.delayTime,j.effect,j.placeholder,j.placeholderSrc,j.scrollPosition,j.threshold,j.useIntersectionObserver,j.visibleByDefault,j.wrapperClassName,j.wrapperProps,function(ge,Se){if(ge==null)return{};var $e,Be,Tt=function(Ft,pn){if(Ft==null)return{};var Jt,Pn,Dn={},gs=Object.keys(Ft);for(Pn=0;Pn<gs.length;Pn++)Jt=gs[Pn],pn.indexOf(Jt)>=0||(Dn[Jt]=Ft[Jt]);return Dn}(ge,Se);if(Object.getOwnPropertySymbols){var Ut=Object.getOwnPropertySymbols(ge);for(Be=0;Be<Ut.length;Be++)$e=Ut[Be],Se.indexOf($e)>=0||Object.prototype.propertyIsEnumerable.call(ge,$e)&&(Tt[$e]=ge[$e])}return Tt}(j,dt));return i().createElement("img",St({},Q,{onLoad:this.onImageLoad()}))}},{key:"getLazyLoadImage",value:function(){var j=this.props,Q=j.beforeLoad,ge=j.className,Se=j.delayMethod,$e=j.delayTime,Be=j.height,Tt=j.placeholder,Ut=j.scrollPosition,Ft=j.style,pn=j.threshold,Jt=j.useIntersectionObserver,Pn=j.visibleByDefault,Dn=j.width;return i().createElement(Ke,{beforeLoad:Q,className:ge,delayMethod:Se,delayTime:$e,height:Be,placeholder:Tt,scrollPosition:Ut,style:Ft,threshold:pn,useIntersectionObserver:Jt,visibleByDefault:Pn,width:Dn},this.getImg())}},{key:"getWrappedLazyLoadImage",value:function(j){var Q=this.props,ge=Q.effect,Se=Q.height,$e=Q.placeholderSrc,Be=Q.width,Tt=Q.wrapperClassName,Ut=Q.wrapperProps,Ft=this.state.loaded,pn=Ft?" lazy-load-image-loaded":"",Jt=Ft||!$e?{}:{backgroundImage:"url(".concat($e,")"),backgroundSize:"100% 100%"};return i().createElement("span",St({className:Tt+" lazy-load-image-background "+ge+pn,style:kt(kt({},Jt),{},{color:"transparent",display:"inline-block",height:Se,width:Be})},Ut),j)}},{key:"render",value:function(){var j=this.props,Q=j.effect,ge=j.placeholderSrc,Se=j.visibleByDefault,$e=j.wrapperClassName,Be=j.wrapperProps,Tt=this.getLazyLoadImage();return(Q||ge)&&!Se||$e||Be?this.getWrappedLazyLoadImage(Tt):Tt}}])&&Qr(le.prototype,Ee),Object.defineProperty(le,"prototype",{writable:!1}),Nt}(i().Component);ps.propTypes={onLoad:o.PropTypes.func,afterLoad:o.PropTypes.func,beforeLoad:o.PropTypes.func,delayMethod:o.PropTypes.string,delayTime:o.PropTypes.number,effect:o.PropTypes.string,placeholderSrc:o.PropTypes.string,threshold:o.PropTypes.number,useIntersectionObserver:o.PropTypes.bool,visibleByDefault:o.PropTypes.bool,wrapperClassName:o.PropTypes.string,wrapperProps:o.PropTypes.object},ps.defaultProps={onLoad:function(){},afterLoad:function(){return{}},beforeLoad:function(){return{}},delayMethod:"throttle",delayTime:300,effect:"",placeholderSrc:null,threshold:100,useIntersectionObserver:!0,visibleByDefault:!1,wrapperClassName:""};const es=ps})(),h8.exports=r})();var Doe=h8.exports;const Ooe=()=>{const t=We(s=>s.darkMode),e=Lr();Dt(s=>s.user);const[n,r]=A.useState({large:"",medium:"",small:"",placeholder:""});return A.useEffect(()=>{const s={large:"https://www.raed.net/img?id=1312374",medium:"https://www.raed.net/img?id=1312376",small:"https://www.raed.net/img?id=1312377",placeholder:"https://www.raed.net/img?id=1312374"};try{const i=new URL("https://www.raed.net/img?id=1312374",self.location).href,o=new URL("https://www.raed.net/img?id=1312376",self.location).href,a=new URL("https://www.raed.net/img?id=1312377",self.location).href;r({large:i,medium:o||i,small:a||i,placeholder:a||i})}catch(i){console.error("Error loading images with import.meta.url:",i),r(s)}},[]),d.createElement("section",{className:`${t?"bg-gradient-to-r from-gray-900 to-gray-800":"bg-gradient-to-r from-indigo-900 to-blue-900"} text-white py-20 transition-colors duration-300`},d.createElement("style",{dangerouslySetInnerHTML:{__html:`
        @keyframes pulse {
          0% {
            box-shadow: 0 0 0 0 rgba(99, 102, 241, 0.4);
          }
          70% {
            box-shadow: 0 0 0 10px rgba(99, 102, 241, 0);
          }
          100% {
            box-shadow: 0 0 0 0 rgba(99, 102, 241, 0);
          }
        }
      `}}),d.createElement("div",{className:"container mx-auto px-4"},d.createElement("div",{className:"flex flex-col md:flex-row items-center justify-between"},d.createElement(At.div,{className:"md:w-1/2 mb-10 md:mb-0",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5}},d.createElement("h1",{className:`text-4xl md:text-5xl font-bold mb-4 relative ${t?"text-white":""}`},d.createElement("span",{className:"relative z-10"},"       "),d.createElement("span",{className:`absolute bottom-0 left-0 right-0 h-4 ${t?"bg-indigo-500":"bg-indigo-300"} opacity-20 transform -rotate-1 z-0`})),d.createElement("p",{className:`text-xl mb-8 ${t?"text-gray-300":""}`},"           "),d.createElement("div",{className:"flex flex-col sm:flex-row gap-4"},d.createElement(at,{to:"/login?type=craftsman"},d.createElement(Oe,{variant:"primary",className:"bg-gradient-to-r from-indigo-600 to-indigo-800 hover:from-indigo-700 hover:to-indigo-900 text-white flex items-center justify-center gap-2 shadow-md hover:shadow-lg transition-all duration-200  relative overflow-hidden group text-lg py-3",style:{animation:"pulse 2s infinite"}},d.createElement("span",{className:"relative z-10 flex items-center justify-center gap-2 font-bold text-white"},d.createElement(Toe,{size:20}),"  "),d.createElement("span",{className:"absolute inset-0 bg-white opacity-20 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-700"}))),d.createElement(Oe,{variant:"outline",className:"border-white text-white hover:bg-white/20 flex items-center justify-center gap-2 shadow-md hover:shadow-lg transition-all duration-200 relative overflow-hidden group text-lg py-3",onClick:()=>{e("/search")}},d.createElement("span",{className:"relative z-10 flex items-center justify-center gap-2 font-bold text-white"},d.createElement(xf,{size:20}),"  "),d.createElement("span",{className:"absolute inset-0 bg-white opacity-0 transform -skew-x-12 -translate-x-full group-hover:translate-x-full group-hover:opacity-20 transition-all duration-700"})))),d.createElement(At.div,{className:"md:w-1/2 flex flex-col items-center",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5,delay:.2}},d.createElement("div",{className:"flex justify-center w-full relative mb-4"},n.large&&d.createElement("picture",{className:"w-full flex justify-center"},d.createElement(Doe.LazyLoadImage,{src:n.large,srcSet:`${n.small} 500w, ${n.medium} 1000w, ${n.large} 1500w`,sizes:"(max-width: 600px) 500px, (max-width: 1200px) 1000px, 1500px",alt:"JobScope -      ",className:"w-4/5 md:w-3/4 rounded-lg shadow-lg mx-auto",effect:"blur",placeholderSrc:n.placeholder,threshold:300,onError:()=>{console.log("Image failed to load, trying fallback path"),r({large:"https://www.raed.net/img?id=1312374",medium:"https://www.raed.net/img?id=1312376",small:"https://www.raed.net/img?id=1312377",placeholder:"https://www.raed.net/img?id=1312374"})}}))),d.createElement("div",{className:`w-4/5 md:w-3/4 p-4 rounded-lg ${t?"bg-gray-800/80":"bg-white/80"} backdrop-blur-sm shadow-lg border ${t?"border-gray-700":"border-indigo-100"}`},d.createElement("h3",{className:`text-lg font-bold mb-2 ${t?"text-indigo-300":"text-indigo-700"}`}," JobScope"),d.createElement("div",{className:`grid grid-cols-1 md:grid-cols-2 gap-3 ${t?"text-indigo-200":"text-indigo-600"}`},d.createElement("div",{className:"flex items-center gap-2"},d.createElement(xf,{size:16,className:"inline-block text-indigo-500 flex-shrink-0"}),d.createElement("span",null,"   ")),d.createElement("div",{className:"flex items-center gap-2"},d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"inline-block text-indigo-500 flex-shrink-0"},d.createElement("rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2"}),d.createElement("line",{x1:"16",x2:"16",y1:"2",y2:"6"}),d.createElement("line",{x1:"8",x2:"8",y1:"2",y2:"6"}),d.createElement("line",{x1:"3",x2:"21",y1:"10",y2:"10"}),d.createElement("path",{d:"m9 16 2 2 4-4"})),d.createElement("span",null,"   ")),d.createElement("div",{className:"flex items-center gap-2"},d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"inline-block text-indigo-500 flex-shrink-0"},d.createElement("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})),d.createElement("span",null,"   ")),d.createElement("div",{className:"flex items-center gap-2"},d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"inline-block text-indigo-500 flex-shrink-0"},d.createElement("path",{d:"M12 2l2.4 7.4H22l-6 4.6 2.3 7-6.3-4.6L5.7 21l2.3-7-6-4.6h7.6L12 2z"})),d.createElement("span",null,"   ")),d.createElement("div",{className:"flex items-center gap-2 md:col-span-2"},d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"inline-block text-indigo-500 flex-shrink-0"},d.createElement("rect",{x:"3",y:"11",width:"18",height:"10",rx:"2"}),d.createElement("circle",{cx:"12",cy:"5",r:"2"}),d.createElement("path",{d:"M12 7v4"}),d.createElement("line",{x1:"8",y1:"16",x2:"8",y2:"16"}),d.createElement("line",{x1:"16",y1:"16",x2:"16",y2:"16"})),d.createElement("span",null,"     ")),d.createElement("div",{className:"flex items-center gap-2 md:col-span-2"},d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"inline-block text-indigo-500 flex-shrink-0"},d.createElement("circle",{cx:"11",cy:"11",r:"8"}),d.createElement("path",{d:"m21 21-4.3-4.3"}),d.createElement("path",{d:"m11 8v6"}),d.createElement("path",{d:"M8 11h6"})),d.createElement("span",null,"      (  )"))))))))},Loe=[{name:"",icon:""},{name:"",icon:""},{name:"",icon:""},{name:"",icon:""},{name:" ",icon:""},{name:"",icon:""},{name:"",icon:""},{name:"",icon:""}],Moe=()=>{const t=We(e=>e.darkMode);return d.createElement("section",{className:`py-16 ${t?"bg-gray-900":"bg-gradient-to-br from-blue-50 to-indigo-100"} transition-colors duration-300`},d.createElement("div",{className:"container mx-auto px-4"},d.createElement("div",{className:"text-center mb-12"},d.createElement("h2",{className:`text-3xl font-bold ${t?"text-indigo-300":"text-indigo-800"} relative inline-block transition-colors duration-300`},d.createElement("span",{className:"relative z-10"}," "),d.createElement("span",{className:`absolute bottom-0 left-0 right-0 h-3 ${t?"bg-indigo-500":"bg-indigo-300"} opacity-40 transform -rotate-1 z-0`}))),d.createElement("div",{className:"grid grid-cols-2 sm:grid-cols-4 md:grid-cols-8 gap-6"},Loe.map((e,n)=>d.createElement(At.div,{key:e.name,className:"flex flex-col items-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:n*.1}},d.createElement("div",{className:`w-16 h-16 rounded-full flex items-center justify-center text-3xl shadow-md mb-2 border transform transition-transform duration-300 hover:scale-110 ${t?"bg-gradient-to-br from-gray-800 to-gray-700 border-gray-600":"bg-gradient-to-br from-white to-indigo-50 border-indigo-100"}`},e.icon),d.createElement("span",{className:`text-center font-medium ${t?"text-gray-300":""}`},e.name))))))},zoe=()=>{const t=We(e=>e.darkMode);return d.createElement("section",{className:`py-16 ${t?"bg-gray-900":"bg-gradient-to-br from-indigo-200 to-blue-100"} transition-colors duration-300`},d.createElement("div",{className:"container mx-auto px-4 "},d.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 "},d.createElement(At.div,{className:"bg-gradient-to-br from-indigo-500 to-indigo-700 text-white p-8 rounded-lg text-center shadow-lg border border-indigo-300",whileHover:{y:-5},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3}},d.createElement("h3",{className:"text-4xl font-bold mb-2"},"+2000"),d.createElement("p",{className:"text-xl"}," ")),d.createElement(At.div,{className:"bg-gradient-to-br from-indigo-400 to-indigo-600 text-white p-8 rounded-lg text-center shadow-lg border border-indigo-300",whileHover:{y:-5},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1}},d.createElement("h3",{className:"text-4xl font-bold mb-2"},"+5000"),d.createElement("p",{className:"text-xl"}," ")),d.createElement(At.div,{className:"bg-gradient-to-br from-indigo-600 to-indigo-800 text-white p-8 rounded-lg text-center shadow-lg border border-indigo-300",whileHover:{y:-5},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.2}},d.createElement("h3",{className:"text-4xl font-bold mb-2"},"+10"),d.createElement("p",{className:"text-xl"}," ")))))},Foe=()=>{const t=We(e=>e.darkMode);return d.createElement("section",{className:`py-16 ${t?"bg-gray-900":"bg-gradient-to-br from-indigo-300 to-blue-100"} transition-colors duration-300`},d.createElement("div",{className:"container mx-auto px-4"},d.createElement("div",{className:"text-center mb-12"},d.createElement("h2",{className:`text-3xl font-bold ${t?"text-indigo-300":"text-indigo-800"} relative inline-block transition-colors duration-300`},d.createElement("span",{className:"relative z-10"},"  "),d.createElement("span",{className:`absolute bottom-0 left-0 right-0 h-3 ${t?"bg-indigo-500":"bg-indigo-300"} opacity-40 transform -rotate-1 z-0`}))),d.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8"},d.createElement(At.div,{className:`p-6 rounded-lg shadow-lg border hover:border-indigo-300 transition-all duration-300 hover:shadow-xl ${t?"bg-gradient-to-br from-indigo-900 to-indigo-800 text-gray-200 border-indigo-700 hover:border-indigo-400":"bg-gradient-to-br from-indigo-50 to-blue-50 border-indigo-100"}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3}},d.createElement("div",{className:"w-12 h-12 bg-gradient-to-br from-indigo-600 to-indigo-800 text-white rounded-full flex items-center justify-center text-xl font-bold mb-4 shadow-md"},"1"),d.createElement("h3",{className:`text-xl font-bold mb-2 ${t?"text-white":""}`}," "),d.createElement("p",{className:`${t?"text-indigo-200":"text-indigo-600"} mb-2`},"        "),d.createElement("p",{className:`${t?"text-indigo-300":"text-indigo-500"} text-sm`},"              ")),d.createElement(At.div,{className:`p-6 rounded-lg shadow-lg border hover:border-indigo-300 transition-all duration-300 hover:shadow-xl ${t?"bg-gradient-to-br from-indigo-900 to-indigo-800 text-gray-200 border-indigo-700 hover:border-indigo-400":"bg-gradient-to-br from-indigo-50 to-blue-50 border-indigo-100"}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1}},d.createElement("div",{className:"w-12 h-12 bg-gradient-to-br from-indigo-600 to-indigo-800 text-white rounded-full flex items-center justify-center text-xl font-bold mb-4 shadow-md"},"2"),d.createElement("h3",{className:"text-xl font-bold mb-2"},"  "),d.createElement("p",{className:`${t?"text-indigo-200":"text-indigo-600"} mb-2`},"        "),d.createElement("p",{className:`${t?"text-indigo-300":"text-indigo-500"} text-sm`},"              ")),d.createElement(At.div,{className:`p-6 rounded-lg shadow-lg border hover:border-indigo-300 transition-all duration-300 hover:shadow-xl ${t?"bg-gradient-to-br from-indigo-900 to-indigo-800 text-gray-200 border-indigo-700 hover:border-indigo-400":"bg-gradient-to-br from-indigo-50 to-blue-50 border-indigo-100"}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.2}},d.createElement("div",{className:"w-12 h-12 bg-gradient-to-br from-indigo-600 to-indigo-800 text-white rounded-full flex items-center justify-center text-xl font-bold mb-4 shadow-md"},"3"),d.createElement("h3",{className:"text-xl font-bold mb-2"},"  "),d.createElement("p",{className:`${t?"text-indigo-200":"text-indigo-600"} mb-2`},"         "),d.createElement("p",{className:`${t?"text-indigo-300":"text-indigo-500"} text-sm`},"              ")))))},Boe=()=>{const t=We(e=>e.darkMode);return d.createElement("section",{className:`py-20 ${t?"bg-gradient-to-r from-gray-800 to-gray-700":"bg-gradient-to-r from-indigo-600 to-blue-700"} text-white transition-colors duration-300`},d.createElement("style",{dangerouslySetInnerHTML:{__html:`
        @keyframes pulse {
          0% {
            box-shadow: 0 0 0 0 rgba(99, 102, 241, 0.4);
          }
          70% {
            box-shadow: 0 0 0 10px rgba(99, 102, 241, 0);
          }
          100% {
            box-shadow: 0 0 0 0 rgba(99, 102, 241, 0);
          }
        }
      `}}),d.createElement("div",{className:"container mx-auto px-4 text-center"},d.createElement(At.h2,{className:"text-4xl md:text-5xl font-bold mb-8 relative inline-block",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5}},d.createElement("span",{className:"relative z-10"},"   "),d.createElement("span",{className:`absolute bottom-0 left-0 right-0 h-3 ${t?"bg-indigo-500":"bg-indigo-300"} opacity-40 transform -rotate-1 z-0`})),d.createElement(At.p,{className:"text-xl mb-8 max-w-3xl mx-auto",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.2}},"                  JobScope    ."),d.createElement(At.div,{className:"flex flex-col sm:flex-row gap-4 justify-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4}},d.createElement(at,{to:"/register/craftsman"},d.createElement(Oe,{variant:"primary",className:"bg-gradient-to-r from-yellow-500 to-yellow-600 hover:from-yellow-600 hover:to-yellow-700 text-white shadow-md hover:shadow-lg transition-all duration-200 relative overflow-hidden group text-lg py-3"},d.createElement("span",{className:"relative z-10 font-bold"}," "),d.createElement("span",{className:"absolute inset-0 bg-white opacity-20 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-700"}))),d.createElement(at,{to:"/register/client"},d.createElement(Oe,{variant:"outline",className:"border-white text-white hover:bg-white/20 shadow-md hover:shadow-lg transition-all duration-200 relative overflow-hidden group text-lg py-3"},d.createElement("span",{className:"relative z-10 font-bold"},"  "),d.createElement("span",{className:"absolute inset-0 bg-white opacity-0 transform -skew-x-12 -translate-x-full group-hover:translate-x-full group-hover:opacity-20 transition-all duration-700"}))))))},Voe=()=>{const t=We(e=>e.darkMode);return d.createElement("footer",{className:`${t?"bg-gray-900":"bg-gradient-to-r from-indigo-700 to-blue-900"} text-white py-8 mt-auto shadow-[0_-10px_15px_-3px_rgba(0,0,0,0.1)] dark:shadow-[0_-10px_15px_-3px_rgba(0,0,0,0.3)] relative z-[50] transition-colors duration-300`},d.createElement("div",{className:"container mx-auto px-4"},d.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8"},d.createElement("div",null,d.createElement("h3",{className:"text-xl font-bold mb-4"},d.createElement("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-yellow-400 to-orange-500"},"Job"),d.createElement("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-indigo-400 to-blue-500"},"Scope")),d.createElement("p",{className:"text-indigo-200"},"       ")),d.createElement("div",null,d.createElement("h3",{className:"text-xl font-bold mb-4 relative inline-block"},d.createElement("span",{className:"relative z-10"}," "),d.createElement("span",{className:`absolute bottom-0 left-0 right-0 h-2 ${t?"bg-indigo-500":"bg-indigo-300"} opacity-20 transform -rotate-1 z-0`})),d.createElement("ul",{className:"space-y-2"},d.createElement("li",null,d.createElement(at,{to:"/",className:"text-indigo-200 hover:text-yellow-200 transition-colors duration-200"},"")),d.createElement("li",null,d.createElement(at,{to:"/search",className:"text-indigo-200 hover:text-yellow-200 transition-colors duration-200"},"  ")),d.createElement("li",null,d.createElement(at,{to:"/register/craftsman",className:"text-indigo-200 hover:text-yellow-200 transition-colors duration-200"}," ")),d.createElement("li",null,d.createElement(at,{to:"/register/client",className:"text-indigo-200 hover:text-yellow-200 transition-colors duration-200"},"  ")),d.createElement("li",null,d.createElement(at,{to:"/login",className:"text-indigo-200 hover:text-yellow-200 transition-colors duration-200"}," ")))),d.createElement("div",null,d.createElement("h3",{className:"text-xl font-bold mb-4 relative inline-block"},d.createElement("span",{className:"relative z-10"}," "),d.createElement("span",{className:`absolute bottom-0 left-0 right-0 h-2 ${t?"bg-indigo-500":"bg-indigo-300"} opacity-20 transform -rotate-1 z-0`})),d.createElement("p",{className:"text-indigo-200 mb-2 hover:text-yellow-200 transition-colors duration-200 inline-block mr-2"}," "),d.createElement("p",{className:"text-indigo-200 mb-2"}," :"," ",d.createElement("span",{className:"hover:text-yellow-200 transition-colors duration-200"},"info@jobscope.sy")),d.createElement("p",{className:"text-indigo-200"},":"," ",d.createElement("span",{className:"hover:text-yellow-200 transition-colors duration-200"},"+963 11 123 4567")))),d.createElement("div",{className:"border-t border-indigo-600 mt-8 pt-6 text-center"},d.createElement("p",{className:"text-indigo-200 mb-2"}," ",new Date().getFullYear()," ",d.createElement("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-yellow-400 to-orange-500"},"Job"),d.createElement("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-indigo-400 to-blue-500"},"Scope"),".   ."),d.createElement(at,{to:"/admin/login",className:"text-xs text-indigo-300 hover:text-indigo-100 transition-colors duration-300"},"   "))))},joe=()=>(We(t=>t.darkMode),d.createElement("div",{className:"min-h-screen flex flex-col"},d.createElement(Ooe,null),d.createElement(Moe,null),d.createElement(zoe,null),d.createElement(Foe,null),d.createElement(Boe,null),d.createElement(Voe,null)));class op extends Error{}op.prototype.name="InvalidTokenError";function Uoe(t){return decodeURIComponent(atob(t).replace(/(.)/g,(e,n)=>{let r=n.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r}))}function Hoe(t){let e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return Uoe(e)}catch{return atob(e)}}function Goe(t,e){if(typeof t!="string")throw new op("Invalid token specified: must be a string");e||(e={});const n=e.header===!0?0:1,r=t.split(".")[n];if(typeof r!="string")throw new op(`Invalid token specified: missing part #${n+1}`);let s;try{s=Hoe(r)}catch(i){throw new op(`Invalid token specified: invalid base64 for part #${n+1} (${i.message})`)}try{return JSON.parse(s)}catch(i){throw new op(`Invalid token specified: invalid json for part #${n+1} (${i.message})`)}}const mg=Fl(Xc(t=>({language:"ar",setLanguage:e=>t({language:e})}),{name:"jobscope-language-storage"})),f8={ar:{platformDescription:"       ",quickLinks:" ",searchForCraftsman:"  ",registerAsCraftsman:" ",darkMode:" ",lightMode:" ",home:"",search:"",profile:" ",settings:"",login:" ",register:"  ",logout:" ",save:"",cancel:"",edit:"",delete:"",back:"",next:"",submit:"",name:"",email:" ",phone:" ",address:"",password:" ",confirmPassword:"  ",loading:" ...",success:"  ",error:" ",client:"",craftsman:"",profession:"",experience:"",rating:"",workRange:" ",requests:"",newRequest:" ",myRequests:"",requestDetails:" ",requestStatus:" ",pending:" ",accepted:"",rejected:"",completed:"",today:"",yesterday:"",days:"",hours:"",minutes:"",copyright:"  ",terms:" ",privacy:" ",contact:" "},en:{platformDescription:"Syrian platform connecting service seekers with craftsmen nearest to you",quickLinks:"Quick Links",searchForCraftsman:"Search for Craftsman",registerAsCraftsman:"Register as Craftsman",darkMode:"Dark Mode",lightMode:"Light Mode",home:"Home",search:"Search",profile:"Profile",settings:"Settings",login:"Login",register:"Register",logout:"Logout",save:"Save",cancel:"Cancel",edit:"Edit",delete:"Delete",back:"Back",next:"Next",submit:"Submit",name:"Name",email:"Email",phone:"Phone",address:"Address",password:"Password",confirmPassword:"Confirm Password",loading:"Loading...",success:"Operation completed successfully",error:"An error occurred",client:"Client",craftsman:"Craftsman",profession:"Profession",experience:"Experience",rating:"Rating",workRange:"Work Range",requests:"Requests",newRequest:"New Request",myRequests:"My Requests",requestDetails:"Request Details",requestStatus:"Request Status",pending:"Pending",accepted:"Accepted",rejected:"Rejected",completed:"Completed",today:"Today",yesterday:"Yesterday",days:"days",hours:"hours",minutes:"minutes",copyright:"All Rights Reserved",terms:"Terms & Conditions",privacy:"Privacy Policy",contact:"Contact Us"}},m8={ar:{pageTitle:"",languageTitle:"",chooseLanguage:" ",languageChangeNote:"       .",notificationsTitle:"",enableNotifications:" ",notificationsNote:"          .",appearanceTitle:"",darkMode:" ",appearanceNote:"          .",securityTitle:"",changePassword:"  ",logout:" ",securityNote:"          .",accountSettingsTitle:" ",deleteAccount:" ",deleteAccountWarning:":               .",passwordModalTitle:"  ",currentPassword:"  ",newPassword:"  ",confirmNewPassword:"   ",cancel:"",currentPasswordRequired:"   ",newPasswordRequired:"   ",passwordMinLength:"     8   ",confirmPasswordRequired:"   ",passwordsNotMatch:"   ",passwordChangeSuccess:"    "},en:{pageTitle:"Settings",languageTitle:"Language",chooseLanguage:"Choose Language",languageChangeNote:"The application language will change after reloading the page.",notificationsTitle:"Notifications",enableNotifications:"Enable Notifications",notificationsNote:"When notifications are enabled, you will receive alerts for new requests or updates.",appearanceTitle:"Appearance",darkMode:"Dark Mode",appearanceNote:"Change the application appearance to dark mode for eye comfort in low light.",securityTitle:"Security",changePassword:"Change Password",logout:"Logout",securityNote:"Make sure to use a strong password and not share it with anyone.",accountSettingsTitle:"Account Settings",deleteAccount:"Delete Account",deleteAccountWarning:"Warning: Deleting your account will permanently lose all your data and this action cannot be undone.",passwordModalTitle:"Change Password",currentPassword:"Current Password",newPassword:"New Password",confirmNewPassword:"Confirm New Password",cancel:"Cancel",currentPasswordRequired:"Current password is required",newPasswordRequired:"New password is required",passwordMinLength:"Password must be at least 8 characters long",confirmPasswordRequired:"Password confirmation is required",passwordsNotMatch:"Passwords do not match",passwordChangeSuccess:"Password changed successfully"}},Woe={common:f8,settings:m8},p8=(t="common")=>{const e=mg(i=>i.language),n=A.useMemo(()=>Woe[t]||f8,[t]),r=A.useMemo(()=>n[e]||n.ar,[n,e]);return{t:i=>r[i]||i,language:e,isRTL:e==="ar",isLTR:e==="en"}},Lu=Fl(Xc((t,e)=>({notifications:[],unreadCount:0,addNotification:n=>{const r={id:Date.now(),timestamp:new Date().toISOString(),read:!1,...n};return t(s=>({notifications:[r,...s.notifications],unreadCount:s.unreadCount+1})),r},markAsRead:n=>{t(r=>{const s=r.notifications.map(o=>o.id===n?{...o,read:!0}:o),i=s.filter(o=>!o.read).length;return{notifications:s,unreadCount:i}})},markAllAsRead:()=>{t(n=>({notifications:n.notifications.map(r=>({...r,read:!0})),unreadCount:0}))},deleteNotification:n=>{t(r=>{const s=r.notifications.filter(o=>o.id!==n),i=s.filter(o=>!o.read).length;return{notifications:s,unreadCount:i}})},clearAllNotifications:()=>{t({notifications:[],unreadCount:0})}}),{name:"jobscope-notifications"})),qoe=({onClick:t})=>{const e=Lu(r=>r.unreadCount),n=We(r=>r.darkMode);return d.createElement("button",{onClick:t,className:`relative p-2 rounded-full transition-all duration-200 ${n?"hover:bg-indigo-700/50 text-yellow-300 hover:text-yellow-200":"hover:bg-yellow-50 text-white hover:text-yellow-300"} transform hover:scale-105`,"aria-label":""},d.createElement(i0,{size:20,className:"transition-colors duration-200"}),e>0&&d.createElement("span",{className:"notification-badge "},e>9?"9+":e))},Os={BOOKING_CREATED:"booking_created",BOOKING_ACCEPTED:"booking_accepted",BOOKING_REJECTED:"booking_rejected",BOOKING_COMPLETED:"booking_completed",BOOKING_CANCELLED:"booking_cancelled",REVIEW_RECEIVED:"review_received",SYSTEM:"system"},da={createBookingNotification:(t,e)=>{const n=Lu.getState();return e==="craftsman"?n.addNotification({type:Os.BOOKING_CREATED,title:"  ",message:`     ${t.clientName}`,data:{bookingId:t.id},icon:"clipboard-list"}):n.addNotification({type:Os.BOOKING_CREATED,title:"   ",message:`      ${t.craftsmanName}`,data:{bookingId:t.id},icon:"clipboard-check"})},createStatusChangeNotification:(t,e,n)=>{const r=Lu.getState();if(n==="craftsman"&&e==="accepted"||n==="client"&&e==="cancelled")return null;let s,i,o,a;switch(e){case"accepted":s=Os.BOOKING_ACCEPTED,i="   ",o=`      ${t.craftsmanName}`,a="check-circle";break;case"rejected":s=Os.BOOKING_REJECTED,i="   ",o=`      ${t.craftsmanName}`,a="x-circle";break;case"completed":s=Os.BOOKING_COMPLETED,i="  ",o=n==="client"?`     ${t.craftsmanName}`:`     ${t.clientName}`,a="check-square";break;case"cancelled":s=Os.BOOKING_CANCELLED,i="   ",o=n==="craftsman"?`      ${t.clientName}`:"   ",a="x-square";break;default:return null}return r.addNotification({type:s,title:i,message:o,data:{bookingId:t.id},icon:a})},createReviewNotification:(t,e)=>Lu.getState().addNotification({type:Os.REVIEW_RECEIVED,title:" ",message:`   (${t.rating}/5)  ${e.clientName}`,data:{bookingId:e.id,reviewId:t.id},icon:"star"}),createSystemNotification:(t,e)=>Lu.getState().addNotification({type:Os.SYSTEM,title:t,message:e,icon:"bell"})},Koe=({notification:t,onRead:e,darkMode:n})=>{const r=Lr(),s=()=>{switch(t.icon){case"check-circle":return d.createElement(E1,{size:16,className:"text-green-500"});case"x-circle":return d.createElement(jT,{size:16,className:"text-red-500"});case"check-square":return d.createElement(a8,{size:16,className:"text-green-500"});case"x-square":return d.createElement(c8,{size:16,className:"text-red-500"});case"clipboard-list":return d.createElement(UT,{size:16,className:"text-indigo-500"});case"clipboard-check":return d.createElement(s8,{size:16,className:"text-indigo-500"});case"star":return d.createElement(Yn,{size:16,className:"text-yellow-500"});default:return d.createElement(i0,{size:16,className:"text-indigo-500"})}},i=()=>{var a;e(t.id),(a=t.data)!=null&&a.bookingId&&r(`/booking/${t.data.bookingId}`)},o=a=>new Date(a).toLocaleDateString("ar-SY",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"});return d.createElement("div",{onClick:i,className:`p-3 border-b last:border-b-0 cursor-pointer transition-all duration-200 ${t.read?n?"bg-gray-800":"bg-white":n?"bg-indigo-900/30 border-r-2 border-indigo-500":"bg-indigo-50 border-r-2 border-indigo-500"} hover:${n?"bg-indigo-900/20":"bg-indigo-50/80"}`},d.createElement("div",{className:"flex items-start"},d.createElement("div",{className:"ml-3 mt-1"},s()),d.createElement("div",{className:"flex-1"},d.createElement("h4",{className:`font-bold text-sm ${n?"text-indigo-300":"text-indigo-700"}`},t.title),d.createElement("p",{className:`text-sm ${n?"text-gray-300":"text-gray-600"}`},t.message),d.createElement("span",{className:`text-xs ${n?"text-indigo-400/70":"text-indigo-500/70"} mt-1 block`},o(t.timestamp))),!t.read&&d.createElement("div",{className:`w-2 h-2 rounded-full mt-2 ${n?"bg-indigo-500 animate-pulse":"bg-indigo-600 animate-pulse"}`})))},Zoe=({isOpen:t,onClose:e})=>{const n=Lr(),r=We(a=>a.darkMode),{notifications:s,markAsRead:i,markAllAsRead:o}=Lu();return t?d.createElement("div",{className:`absolute left-0 mt-2 w-80 rounded-md shadow-xl z-50 ${r?"bg-gray-800 border border-indigo-700/50":"bg-white border border-indigo-200"} overflow-hidden transition-all duration-300`},d.createElement("div",{className:`p-3 border-b flex justify-between items-center ${r?"border-indigo-700/30 bg-gradient-to-r from-indigo-900/50 to-gray-800":"border-indigo-100 bg-gradient-to-r from-indigo-50 to-white"}`},d.createElement("h3",{className:`font-bold ${r?"text-indigo-300":"text-indigo-700"}`},""),d.createElement("div",{className:"flex gap-2"},d.createElement("button",{onClick:o,className:`text-xs px-2 py-1 rounded transition-all duration-200 ${r?"bg-indigo-700/50 text-indigo-300 hover:bg-indigo-700/70 hover:text-indigo-200":"bg-indigo-100 text-indigo-600 hover:bg-indigo-200 hover:text-indigo-700"}`},"  "),d.createElement("button",{onClick:()=>{e(),n("/notifications")},className:`text-xs px-2 py-1 rounded transition-all duration-200 ${r?"bg-gradient-to-r from-indigo-700 to-purple-800 text-white hover:from-indigo-800 hover:to-purple-900":"bg-gradient-to-r from-indigo-500 to-indigo-600 text-white hover:from-indigo-600 hover:to-indigo-700"} shadow-sm hover:shadow-md`}," "))),d.createElement("div",{className:"max-h-96 overflow-y-auto"},s.length>0?s.slice(0,5).map(a=>d.createElement(Koe,{key:a.id,notification:a,onRead:i,darkMode:r})):d.createElement("div",{className:`p-6 text-center ${r?"text-indigo-400":"text-indigo-500"}`},d.createElement("div",{className:"flex flex-col items-center"},d.createElement(i0,{size:24,className:"mb-2 opacity-50"}),d.createElement("p",null,"   "))))):null},Xoe=({user:t,onLogout:e})=>{const n=We(m=>m.darkMode),r=We(m=>m.toggleDarkMode),s=Qo(),i=Lr(),o=!!t,{t:a,isRTL:l}=p8(),[c,u]=A.useState(!1),h=A.useRef(null);return A.useEffect(()=>{const m=p=>{h.current&&!h.current.contains(p.target)&&u(!1)};return c&&document.addEventListener("mousedown",m),()=>{document.removeEventListener("mousedown",m)}},[c]),d.createElement("header",{className:`${n?"bg-gray-900":"bg-gradient-to-r from-indigo-700 to-blue-900"} text-white py-4 shadow-xl shadow-black/20 dark:shadow-black/40 relative z-[100] transition-colors duration-300`},d.createElement("style",null,`
        @keyframes pulse {
          0% {
            box-shadow: 0 0 0 0 rgba(99, 102, 241, 0.4);
          }
          70% {
            box-shadow: 0 0 0 10px rgba(99, 102, 241, 0);
          }
          100% {
            box-shadow: 0 0 0 0 rgba(99, 102, 241, 0);
          }
        }
      `),d.createElement("div",{className:"container mx-auto px-4 flex justify-between items-center"},d.createElement("div",{className:"flex items-center gap-4"},d.createElement(at,{to:"/",className:"flex items-center text-2xl font-bold relative group"},d.createElement("div",null,d.createElement("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-yellow-400 to-orange-500"},"Job"),d.createElement("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-indigo-400 to-blue-500"},"Scope"),d.createElement("span",{className:"absolute -bottom-1 left-0 w-0 h-0.5 bg-gradient-to-r from-yellow-400 to-blue-500 transition-all duration-300 group-hover:w-full"})))),d.createElement("nav",{className:"hidden md:flex items-center space-x-6 space-x-reverse"},d.createElement("button",{onClick:r,className:`flex items-center justify-center gap-1 px-3 py-1.5 rounded-full ${n?"bg-yellow-500/20 text-yellow-300 hover:bg-yellow-500/30":"bg-indigo-500/20 text-indigo-100 hover:bg-indigo-500/30"} transition-colors duration-200`,"aria-label":a(n?"lightMode":"darkMode")},n?d.createElement(d.Fragment,null,d.createElement(u8,{size:18,className:"animate-spin-slow"}),d.createElement("span",{className:"text-sm font-medium"},a("lightMode"))):d.createElement(d.Fragment,null,d.createElement(WT,{size:18,className:"animate-pulse"}),d.createElement("span",{className:"text-sm font-medium"},a("darkMode")))),o?d.createElement(d.Fragment,null,d.createElement(at,{to:"/home",className:`flex items-center gap-1 transition-colors duration-200 ${s.pathname==="/home"?"text-yellow-300 font-medium":"text-white hover:text-yellow-200"}`},d.createElement(HT,{size:18}),d.createElement("span",null,a("home"))),d.createElement(at,{to:"/search",className:`flex items-center gap-1 transition-colors duration-200 ${s.pathname==="/search"?"text-yellow-300 font-medium":"text-white hover:text-yellow-200"}`},d.createElement(xf,{size:18}),d.createElement("span",null,a("search"))),d.createElement(at,{to:"/profile/my",className:`flex items-center gap-1 transition-colors duration-200 ${s.pathname==="/profile/my"?"text-yellow-300 font-medium":"text-white hover:text-yellow-200"}`},d.createElement(Xf,{size:18}),d.createElement("span",null,a("profile"))),d.createElement(at,{to:"/bookings",className:`flex items-center gap-1 transition-colors duration-200 ${s.pathname==="/bookings"?"text-yellow-300 font-medium":"text-white hover:text-yellow-200"}`},d.createElement(Cie,{size:18}),d.createElement("span",null,a("myRequests"))),d.createElement(at,{to:"/settings",className:`flex items-center gap-1 transition-colors duration-200 ${s.pathname==="/settings"?"text-yellow-300 font-medium":"text-white hover:text-yellow-200"}`},d.createElement(qT,{size:18}),d.createElement("span",null,a("settings"))),d.createElement("div",{className:"relative",ref:h},d.createElement(qoe,{onClick:()=>u(!c)}),d.createElement(Zoe,{isOpen:c,onClose:()=>u(!1)})),d.createElement("button",{onClick:()=>{e(),i("/logout-redirect")},className:"flex items-center gap-1 text-white hover:text-white transition-all duration-200 hover:scale-105 transform border border-transparent bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 px-3 py-2 rounded-md relative overflow-hidden group shadow-md hover:shadow-lg"},d.createElement("span",{className:"relative z-10 flex items-center gap-1"},d.createElement(GT,{size:18}),d.createElement("span",null,a("logout"))),d.createElement("span",{className:"absolute inset-0 bg-white opacity-20 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-700"}))):d.createElement(d.Fragment,null,d.createElement(at,{to:"/login",className:"bg-gradient-to-r from-indigo-500 to-indigo-700 text-white px-4 py-2 rounded-md hover:from-indigo-600 hover:to-indigo-800 transition-all duration-200 hover:shadow-md relative overflow-hidden group",style:{animation:"pulse 2s infinite"}},d.createElement("span",{className:"relative text-white z-10"}," "),d.createElement("span",{className:"absolute inset-0 bg-white opacity-20 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-700"})),d.createElement(at,{to:"/register/craftsman",className:"bg-gradient-to-r from-yellow-400 to-orange-500 text-white px-4 py-2 rounded-md hover:from-yellow-600 hover:to-orange-600 transition-all duration-200 hover:shadow-md relative overflow-hidden group",style:{animation:"pulse 2s infinite"}},d.createElement("span",{className:"relative text-white z-10"}," "),d.createElement("span",{className:"absolute inset-0 bg-white opacity-20 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-700"})))),d.createElement("div",{className:"md:hidden"},d.createElement("button",{className:"text-white hover:text-yellow-300 transition-colors duration-200 p-2 rounded-md hover:bg-indigo-800/50"},d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},d.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"}))))))},Yoe=()=>{const t=We(n=>n.darkMode),{t:e}=p8();return d.createElement("footer",{className:`${t?"bg-gray-900":"bg-gradient-to-r from-indigo-700 to-blue-900"} text-white py-8 mt-auto shadow-[0_-10px_15px_-3px_rgba(0,0,0,0.1)] dark:shadow-[0_-10px_15px_-3px_rgba(0,0,0,0.3)] relative z-[50] transition-colors duration-300`},d.createElement("div",{className:"container mx-auto px-4"},d.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8"},d.createElement("div",null,d.createElement("h3",{className:"text-xl font-bold mb-4"},d.createElement("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-yellow-400 to-orange-500"},"Job"),d.createElement("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-indigo-400 to-blue-500"},"Scope")),d.createElement("p",{className:"text-indigo-200"},e("platformDescription")||"       ")),d.createElement("div",null,d.createElement("h3",{className:"text-xl font-bold mb-4 relative inline-block"},d.createElement("span",{className:"relative z-10"},e("quickLinks")||" "),d.createElement("span",{className:`absolute bottom-0 left-0 right-0 h-2 ${t?"bg-indigo-500":"bg-indigo-300"} opacity-20 transform -rotate-1 z-0`})),d.createElement("ul",{className:"space-y-2"},d.createElement("li",null,d.createElement(at,{to:"/",className:"text-indigo-200 hover:text-yellow-200 transition-colors duration-200"},e("home"))),d.createElement("li",null,d.createElement(at,{to:"/search",className:"text-indigo-200 hover:text-yellow-200 transition-colors duration-200"},e("searchForCraftsman")||"  ")),d.createElement("li",null,d.createElement(at,{to:"/register/craftsman",className:"text-indigo-200 hover:text-yellow-200 transition-colors duration-200"},e("registerAsCraftsman")||" ")),d.createElement("li",null,d.createElement(at,{to:"/login",className:"text-indigo-200 hover:text-yellow-200 transition-colors duration-200"},e("login"))))),d.createElement("div",null,d.createElement("h3",{className:"text-xl font-bold mb-4 relative inline-block"},d.createElement("span",{className:"relative  z-10"},e("contact")),d.createElement("span",{className:`absolute bottom-0 left-0 right-0 h-2 ${t?"bg-indigo-500":"bg-indigo-300"} opacity-20 transform -rotate-1 z-0`})),d.createElement("p",{className:"text-indigo-200 hover:text-yellow-200 transition-colors duration-200 inline-block mr-2 "},e("address")||" "),d.createElement("p",{className:"text-indigo-200 mb-2"},e("email"),":"," ",d.createElement("span",{className:"hover:text-yellow-200 transition-colors duration-200"},"info@jobscope.sy")),d.createElement("p",{className:"text-indigo-200"},e("phone"),":"," ",d.createElement("span",{className:"hover:text-yellow-200 transition-colors duration-200"},"+963 11 123 4567")))),d.createElement("div",{className:"border-t border-indigo-600 mt-8 pt-6 text-center"},d.createElement("p",{className:"text-indigo-200"}," ",new Date().getFullYear()," ",d.createElement("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-yellow-400 to-orange-500"},"Job"),d.createElement("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-indigo-400 to-blue-500"},"Scope"),". ",e("copyright")))))};let Joe={one:{},two:{},three:{},four:{}},Qoe={one:{},two:{},three:{}},eae={},tae=[];const SC={methods:Joe,model:Qoe,compute:eae,hooks:tae},nae=t=>Object.prototype.toString.call(t)==="[object Array]",rae={compute:function(t){const{world:e}=this,n=e.compute;return typeof t=="string"&&n.hasOwnProperty(t)?n[t](this):nae(t)?t.forEach(r=>{e.compute.hasOwnProperty(r)?n[r](this):console.warn("no compute:",t)}):typeof t=="function"?t(this):console.warn("no compute:",t),this}},sae=rae,iae=function(t){return this.fullPointer.forEach((n,r)=>{let s=this.update([n]);t(s,r)}),this},oae=function(t,e){let r=this.fullPointer.map((i,o)=>{let a=this.update([i]),l=t(a,o);return l===void 0?this.none():l});if(r.length===0)return e||this.update([]);if(r[0]!==void 0&&(typeof r[0]=="string"||typeof r[0]=="object"&&(r[0]===null||!r[0].isView)))return r;let s=[];return r.forEach(i=>{s=s.concat(i.fullPointer)}),this.toView(s)},aae=function(t){let e=this.fullPointer;return e=e.filter((r,s)=>{let i=this.update([r]);return t(i,s)}),this.update(e)},lae=function(t){let n=this.fullPointer.find((r,s)=>{let i=this.update([r]);return t(i,s)});return this.update([n])},cae=function(t){return this.fullPointer.some((n,r)=>{let s=this.update([n]);return t(s,r)})},uae=function(t=1){let e=this.fullPointer,n=Math.floor(Math.random()*e.length);return n+t>this.length&&(n=this.length-t,n=n<0?0:n),e=e.slice(n,n+t),this.update(e)},dae={forEach:iae,map:oae,filter:aae,find:lae,some:cae,random:uae},Wo={termList:function(){return this.methods.one.termList(this.docs)},terms:function(t){let e=this.match(".");return typeof t=="number"?e.eq(t):e},groups:function(t){if(t||t===0)return this.update(this._groups[t]||[]);let e={};return Object.keys(this._groups).forEach(n=>{e[n]=this.update(this._groups[n])}),e},eq:function(t){let e=this.pointer;return e||(e=this.docs.map((n,r)=>[r])),e[t]?this.update([e[t]]):this.none()},first:function(){return this.eq(0)},last:function(){let t=this.fullPointer.length-1;return this.eq(t)},firstTerms:function(){return this.match("^.")},lastTerms:function(){return this.match(".$")},slice:function(t,e){let n=this.pointer||this.docs.map((r,s)=>[s]);return n=n.slice(t,e),this.update(n)},all:function(){return this.update().toView()},fullSentences:function(){let t=this.fullPointer.map(e=>[e[0]]);return this.update(t).toView()},none:function(){return this.update([])},isDoc:function(t){if(!t||!t.isView)return!1;let e=this.fullPointer,n=t.fullPointer;return!e.length===n.length?!1:e.every((r,s)=>n[s]?r[0]===n[s][0]&&r[1]===n[s][1]&&r[2]===n[s][2]:!1)},wordCount:function(){return this.docs.reduce((t,e)=>(t+=e.filter(n=>n.text!=="").length,t),0)},isFull:function(){let t=this.pointer;if(!t)return!0;if(t.length===0||t[0][0]!==0)return!1;let e=0,n=0;return this.document.forEach(r=>e+=r.length),this.docs.forEach(r=>n+=r.length),e===n},getNth:function(t){return typeof t=="number"?this.eq(t):typeof t=="string"?this.if(t):this}};Wo.group=Wo.groups;Wo.fullSentence=Wo.fullSentences;Wo.sentence=Wo.fullSentences;Wo.lastTerm=Wo.lastTerms;Wo.firstTerm=Wo.firstTerms;const hae=Wo,TC=Object.assign({},hae,sae,dae);TC.get=TC.eq;const fae=TC;class Kh{constructor(e,n,r={}){[["document",e],["world",SC],["_groups",r],["_cache",null],["viewType","View"]].forEach(i=>{Object.defineProperty(this,i[0],{value:i[1],writable:!0})}),this.ptrs=n}get docs(){let e=this.document;return this.ptrs&&(e=SC.methods.one.getDoc(this.ptrs,this.document)),e}get pointer(){return this.ptrs}get methods(){return this.world.methods}get model(){return this.world.model}get hooks(){return this.world.hooks}get isView(){return!0}get found(){return this.docs.length>0}get length(){return this.docs.length}get fullPointer(){let{docs:e,ptrs:n,document:r}=this;return(n||e.map((i,o)=>[o])).map(i=>{let[o,a,l,c,u]=i;return a=a||0,l=l||(r[o]||[]).length,r[o]&&r[o][a]&&(c=c||r[o][a].id,r[o][l-1]&&(u=u||r[o][l-1].id)),[o,a,l,c,u]})}update(e){let n=new Kh(this.document,e);if(this._cache&&e&&e.length>0){let r=[];e.forEach((s,i)=>{let[o,a,l]=s;s.length===1?r[i]=this._cache[o]:a===0&&this.document[o].length===l&&(r[i]=this._cache[o])}),r.length>0&&(n._cache=r)}return n.world=this.world,n}toView(e){return new Kh(this.document,e||this.pointer)}fromText(e){const{methods:n}=this;let r=n.one.tokenize.fromString(e,this.world),s=new Kh(r);return s.world=this.world,s.compute(["normal","freeze","lexicon"]),this.world.compute.preTagger&&s.compute("preTagger"),s.compute("unfreeze"),s}clone(){let e=this.document.slice(0);e=e.map(r=>r.map(s=>(s=Object.assign({},s),s.tags=new Set(s.tags),s)));let n=this.update(this.pointer);return n.document=e,n._cache=this._cache,n}}Object.assign(Kh.prototype,fae);const KT=Kh,mae="14.14.4",_4=function(t){return t&&typeof t=="object"&&!Array.isArray(t)};function g8(t,e){if(_4(e))for(const n in e)_4(e[n])?(t[n]||Object.assign(t,{[n]:{}}),g8(t[n],e[n])):Object.assign(t,{[n]:e[n]});return t}function pae(t,e){for(const n in e)t[n]=t[n]||{},Object.assign(t[n],e[n]);return t}const gae=function(t,e){let n=t.two.models||{};Object.keys(e).forEach(r=>{e[r].pastTense&&(n.toPast&&(n.toPast.ex[r]=e[r].pastTense),n.fromPast&&(n.fromPast.ex[e[r].pastTense]=r)),e[r].presentTense&&(n.toPresent&&(n.toPresent.ex[r]=e[r].presentTense),n.fromPresent&&(n.fromPresent.ex[e[r].presentTense]=r)),e[r].gerund&&(n.toGerund&&(n.toGerund.ex[r]=e[r].gerund),n.fromGerund&&(n.fromGerund.ex[e[r].gerund]=r)),e[r].comparative&&(n.toComparative&&(n.toComparative.ex[r]=e[r].comparative),n.fromComparative&&(n.fromComparative.ex[e[r].comparative]=r)),e[r].superlative&&(n.toSuperlative&&(n.toSuperlative.ex[r]=e[r].superlative),n.fromSuperlative&&(n.fromSuperlative.ex[e[r].superlative]=r))})},yae=function(t,e,n,r){const{methods:s,model:i,compute:o,hooks:a}=e;t.methods&&pae(s,t.methods),t.model&&g8(i,t.model),t.irregulars&&gae(i,t.irregulars),t.compute&&Object.assign(o,t.compute),a&&(e.hooks=a.concat(t.hooks||[])),t.api&&t.api(n),t.lib&&Object.keys(t.lib).forEach(l=>r[l]=t.lib[l]),t.tags&&r.addTags(t.tags),t.words&&r.addWords(t.words),t.frozen&&r.addWords(t.frozen,!0),t.mutate&&t.mutate(e,r)},bae=yae,vae=function(t){const e=typeof process>"u"||!process.env?self.env||{}:process.env;return e.DEBUG_TAGS=t==="tagger"||t===!0?!0:"",e.DEBUG_MATCH=t==="match"||t===!0?!0:"",e.DEBUG_CHUNKS=t==="chunker"||t===!0?!0:"",this},xae=t=>Object.prototype.toString.call(t)==="[object Object]",$C=function(t){return Object.prototype.toString.call(t)==="[object Array]"},wae=function(t){return t.map(e=>e.terms.map(n=>($C(n.tags)&&(n.tags=new Set(n.tags)),n)))},Eae=function(t){return t.map(e=>e.map(n=>({text:n,normal:n,pre:"",post:" ",tags:new Set})))},kae=function(t,e,n){const{methods:r}=n;let s=new e([]);if(s.world=n,typeof t=="number"&&(t=String(t)),!t)return s;if(typeof t=="string"){let i=r.one.tokenize.fromString(t,n);return new e(i)}if(xae(t)&&t.isView)return new e(t.document,t.ptrs);if($C(t)){if($C(t[0])){let o=Eae(t);return new e(o)}let i=wae(t);return new e(i)}return s},y8=kae;let N1=Object.assign({},SC);const li=function(t,e){e&&li.addWords(e);let n=y8(t,KT,N1);return t&&n.compute(N1.hooks),n};Object.defineProperty(li,"_world",{value:N1,writable:!0});li.tokenize=function(t,e){const{compute:n}=this._world;e&&li.addWords(e);let r=y8(t,KT,N1);return n.contractions&&r.compute(["alias","normal","machine","contractions"]),r};li.plugin=function(t){return bae(t,this._world,KT,this),this};li.extend=li.plugin;li.world=function(){return this._world};li.model=function(){return this._world.model};li.methods=function(){return this._world.methods};li.hooks=function(){return this._world.hooks};li.verbose=vae;li.version=mae;const Xt=li,Nae=function(t){return t.map(n=>{let r=new Set;return n.forEach(s=>{s.normal!==""&&r.add(s.normal),s.switch&&r.add(`%${s.switch}%`),s.implicit&&r.add(s.implicit),s.machine&&r.add(s.machine),s.root&&r.add(s.root),s.alias&&s.alias.forEach(o=>r.add(o));let i=Array.from(s.tags);for(let o=0;o<i.length;o+=1)r.add("#"+i[o])}),r})},Cae=Nae,_ae={one:{cacheDoc:Cae}},Sae={cache:function(){return this._cache=this.methods.one.cacheDoc(this.document),this},uncache:function(){return this._cache=null,this}},Tae=function(t){Object.assign(t.prototype,Sae)},$ae=Tae,Iae={cache:function(t){t._cache=t.methods.one.cacheDoc(t.document)}},Aae={api:$ae,compute:Iae,methods:_ae},Rae={toLowerCase:function(){return this.termList().forEach(t=>{t.text=t.text.toLowerCase()}),this},toUpperCase:function(){return this.termList().forEach(t=>{t.text=t.text.toUpperCase()}),this},toTitleCase:function(){return this.termList().forEach(t=>{t.text=t.text.replace(/^ *[a-z\u00C0-\u00FF]/,e=>e.toUpperCase())}),this},toCamelCase:function(){return this.docs.forEach(t=>{t.forEach((e,n)=>{n!==0&&(e.text=e.text.replace(/^ *[a-z\u00C0-\u00FF]/,r=>r.toUpperCase())),n!==t.length-1&&(e.post="")})}),this}},S4=t=>/^\p{Lu}[\p{Ll}']/u.test(t)||/^\p{Lu}$/u.test(t),Pae=t=>t.replace(/^\p{Ll}/u,e=>e.toUpperCase()),Dae=t=>t.replace(/^\p{Lu}/u,e=>e.toLowerCase()),b8=(t,e,n)=>{if(n.forEach(r=>r.dirty=!0),t){let r=[e,0].concat(n);Array.prototype.splice.apply(t,r)}return t},zh=function(t){const e=/ $/,n=/[-]/;let r=t[t.length-1];r&&!e.test(r.post)&&!n.test(r.post)&&(r.post+=" ")},T4=(t,e,n)=>{const r=/[-.?!,;:)'"]/g;let s=t[e-1];if(!s)return;let i=s.post;if(r.test(i)){let o=i.match(r).join(""),a=n[n.length-1];a.post=o+a.post,s.post=s.post.replace(r,"")}},Oae=function(t,e,n){let r=t[e];if(e!==0||!S4(r.text))return;n[0].text=Pae(n[0].text);let s=t[e];s.tags.has("ProperNoun")||s.tags.has("Acronym")||S4(s.text)&&s.text.length>1&&(s.text=Dae(s.text))},Lae=function(t,e,n,r){let[s,i,o]=e;i===0||o===r[s].length?zh(n):(zh(n),zh([t[e[1]]])),Oae(t,i,n),b8(t,i,n)},Mae=function(t,e,n,r){let[s,,i]=e,o=(r[s]||[]).length;i<o?(T4(t,i,n),zh(n)):o===i&&(zh(t),T4(t,i,n),r[s+1]&&(n[n.length-1].post+=" ")),b8(t,e[2],n),e[4]=n[n.length-1].id};let Hm=0;const $4=t=>(t=t.length<3?"0"+t:t,t.length<3?"0"+t:t),zae=function(t){let[e,n]=t.index||[0,0];Hm+=1,Hm=Hm>46655?0:Hm,e=e>46655?0:e,n=n>1294?0:n;let r=$4(Hm.toString(36));r+=$4(e.toString(36));let s=n.toString(36);s=s.length<2?"0"+s:s,r+=s;let i=parseInt(Math.random()*36,10);return r+=i.toString(36),t.normal+"|"+r.toUpperCase()},v8=zae,I4=function(t){t.has("@hasContraction")&&typeof t.contractions=="function"&&t.grow("@hasContraction").contractions().expand()},A4=t=>Object.prototype.toString.call(t)==="[object Array]",Fae=function(t){return t=t.map(e=>(e.id=v8(e),e)),t},Bae=function(t,e){const{methods:n}=e;return typeof t=="string"?n.one.tokenize.fromString(t,e)[0]:typeof t=="object"&&t.isView?t.clone().docs[0]||[]:A4(t)?A4(t[0])?t[0]:t:[]},R4=function(t,e,n){const{document:r,world:s}=e;e.uncache();let i=e.fullPointer,o=e.fullPointer;e.forEach((l,c)=>{let u=l.fullPointer[0],[h]=u,m=r[h],p=Bae(t,s);p.length!==0&&(p=Fae(p),n?(I4(e.update([u]).firstTerm()),Lae(m,u,p,r)):(I4(e.update([u]).lastTerm()),Mae(m,u,p,r)),r[h]&&r[h][u[1]]&&(u[3]=r[h][u[1]].id),o[c]=u,u[2]+=p.length,i[c]=u)});let a=e.toView(i);return e.ptrs=o,a.compute(["id","index","freeze","lexicon"]),a.world.compute.preTagger&&a.compute("preTagger"),a.compute("unfreeze"),a},od={insertAfter:function(t){return R4(t,this,!1)},insertBefore:function(t){return R4(t,this,!0)}};od.append=od.insertAfter;od.prepend=od.insertBefore;od.insert=od.insertAfter;const Vae=od,jae=/\$[0-9a-z]+/g,ZT={},Uae=t=>/^\p{Lu}[\p{Ll}']/u.test(t)||/^\p{Lu}$/u.test(t),Hae=t=>t.replace(/^\p{Ll}/u,e=>e.toUpperCase()),Gae=t=>t.replace(/^\p{Lu}/u,e=>e.toLowerCase()),Wae=function(t,e,n){return t.forEach(r=>{let s=e(r);r.replaceWith(s,n)}),t},qae=function(t,e){if(typeof t!="string")return t;let n=e.groups();return t=t.replace(jae,r=>{let s=r.replace(/\$/,"");return n.hasOwnProperty(s)?n[s].text():r}),t};ZT.replaceWith=function(t,e={}){let n=this.fullPointer,r=this;if(this.uncache(),typeof t=="function")return Wae(r,t,e);let s=r.docs[0];if(!s)return r;let i=e.possessives&&s[s.length-1].tags.has("Possessive"),o=e.case&&Uae(s[0].text);t=qae(t,r);let a=this.update(n);n=n.map(m=>m.slice(0,3));let l=(a.docs[0]||[]).map(m=>Array.from(m.tags)),c=a.docs[0][0].pre,u=a.docs[0][a.docs[0].length-1].post;if(typeof t=="string"&&(t=this.fromText(t).compute("id")),r.insertAfter(t),a.has("@hasContraction")&&r.contractions&&r.grow("@hasContraction+").contractions().expand(),r.delete(a),i){let m=r.docs[0],p=m[m.length-1];p.tags.has("Possessive")||(p.text+="'s",p.normal+="'s",p.tags.add("Possessive"))}if(c&&r.docs[0]&&(r.docs[0][0].pre=c),u&&r.docs[0]){let m=r.docs[0][r.docs[0].length-1];m.post.trim()||(m.post=u)}let h=r.toView(n).compute(["index","freeze","lexicon"]);if(h.world.compute.preTagger&&h.compute("preTagger"),h.compute("unfreeze"),e.tags&&h.terms().forEach((m,p)=>{m.tagSafe(l[p])}),!h.docs[0]||!h.docs[0][0])return h;if(e.case){let m=o?Hae:Gae;h.docs[0][0].text=m(h.docs[0][0].text)}return h};ZT.replace=function(t,e,n){if(t&&!e)return this.replaceWith(t,n);let r=this.match(t);return r.found?(this.soften(),r.replaceWith(e,n)):this};const Kae=ZT,Zae=function(t,e){let n=t.length-1,r=t[n],s=t[n-e];s&&r&&(s.post+=r.post,s.post=s.post.replace(/ +([.?!,;:])/,"$1"),s.post=s.post.replace(/[,;:]+([.?!])/,"$1"))},Xae=function(t,e){e.forEach(n=>{let[r,s,i]=n,o=i-s;t[r]&&(i===t[r].length&&i>1&&Zae(t[r],o),t[r].splice(s,o))});for(let n=t.length-1;n>=0;n-=1)if(t[n].length===0&&(t.splice(n,1),n===t.length&&t[n-1])){let r=t[n-1],s=r[r.length-1];s&&(s.post=s.post.trimEnd())}return t},Yae=Xae,Jae=function(t,e){return t=t.map(n=>{let[r]=n;return e[r]&&e[r].forEach(s=>{let i=s[2]-s[1];n[1]<=s[1]&&n[2]>=s[2]&&(n[2]-=i)}),n}),t.forEach((n,r)=>{if(n[1]===0&&n[2]==0)for(let s=r+1;s<t.length;s+=1)t[s][0]-=1,t[s][0]<0&&(t[s][0]=0)}),t=t.filter(n=>n[2]-n[1]>0),t=t.map(n=>(n[3]=null,n[4]=null,n)),t},IC={remove:function(t){const{indexN:e}=this.methods.one.pointer;this.uncache();let n=this.all(),r=this;t&&(n=this,r=this.match(t));let s=!n.ptrs;r.has("@hasContraction")&&r.contractions&&r.grow("@hasContraction").contractions().expand();let i=n.fullPointer,o=r.fullPointer.reverse(),a=Yae(this.document,o),l=e(o);return i=Jae(i,l),n.ptrs=i,n.document=a,n.compute("index"),s&&(n.ptrs=void 0),t?n.toView(i):(this.ptrs=[],n.none())}};IC.delete=IC.remove;const Qae=IC,pg={pre:function(t,e){return t===void 0&&this.found?this.docs[0][0].pre:(this.docs.forEach(n=>{let r=n[0];e===!0?r.pre+=t:r.pre=t}),this)},post:function(t,e){if(t===void 0){let n=this.docs[this.docs.length-1];return n[n.length-1].post}return this.docs.forEach(n=>{let r=n[n.length-1];e===!0?r.post+=t:r.post=t}),this},trim:function(){if(!this.found)return this;let t=this.docs,e=t[0][0];e.pre=e.pre.trimStart();let n=t[t.length-1],r=n[n.length-1];return r.post=r.post.trimEnd(),this},hyphenate:function(){return this.docs.forEach(t=>{t.forEach((e,n)=>{n!==0&&(e.pre=""),t[n+1]&&(e.post="-")})}),this},dehyphenate:function(){const t=/[-]/;return this.docs.forEach(e=>{e.forEach(n=>{t.test(n.post)&&(n.post=" ")})}),this},toQuotations:function(t,e){return t=t||'"',e=e||'"',this.docs.forEach(n=>{n[0].pre=t+n[0].pre;let r=n[n.length-1];r.post=e+r.post}),this},toParentheses:function(t,e){return t=t||"(",e=e||")",this.docs.forEach(n=>{n[0].pre=t+n[0].pre;let r=n[n.length-1];r.post=e+r.post}),this}};pg.deHyphenate=pg.dehyphenate;pg.toQuotation=pg.toQuotations;const ele=pg,tle=(t,e)=>t.normal<e.normal?-1:t.normal>e.normal?1:0,nle=(t,e)=>{let n=t.normal.trim().length,r=e.normal.trim().length;return n<r?1:n>r?-1:0},rle=(t,e)=>t.words<e.words?1:t.words>e.words?-1:0,sle=(t,e)=>t[0]<e[0]?1:t[0]>e[0]?-1:t[1]>e[1]?1:-1,ile=function(t){let e={};return t.forEach(n=>{e[n.normal]=e[n.normal]||0,e[n.normal]+=1}),t.sort((n,r)=>{let s=e[n.normal],i=e[r.normal];return s<i?1:s>i?-1:0}),t},sk={alpha:tle,length:nle,wordCount:rle,sequential:sle,byFreq:ile},ole=new Set(["index","sequence","seq","sequential","chron","chronological"]),ale=new Set(["freq","frequency","topk","repeats"]),lle=new Set(["alpha","alphabetical"]),cle=function(t,e){let n=t.fullPointer;return n=n.sort((r,s)=>(r=t.update([r]),s=t.update([s]),e(r,s))),t.ptrs=n,t},ule=function(t){let{docs:e,pointer:n}=this;if(this.uncache(),typeof t=="function")return cle(this,t);t=t||"alpha";let r=n||e.map((i,o)=>[o]),s=e.map((i,o)=>({index:o,words:i.length,normal:i.map(a=>a.machine||a.normal||"").join(" "),pointer:r[o]}));return ole.has(t)&&(t="sequential"),lle.has(t)&&(t="alpha"),ale.has(t)?(s=sk.byFreq(s),this.update(s.map(i=>i.pointer))):typeof sk[t]=="function"?(s=s.sort(sk[t]),this.update(s.map(i=>i.pointer))):this},dle=function(){let t=this.pointer||this.docs.map((e,n)=>[n]);return t=[].concat(t),t=t.reverse(),this._cache&&(this._cache=this._cache.reverse()),this.update(t)},hle=function(){let t=new Set;return this.filter(n=>{let r=n.text("machine");return t.has(r)?!1:(t.add(r),!0)})},fle={unique:hle,reverse:dle,sort:ule},mle=t=>Object.prototype.toString.call(t)==="[object Array]",x8=function(t,e){if(t.length>0){let n=t[t.length-1],r=n[n.length-1];/ /.test(r.post)===!1&&(r.post+=" ")}return t=t.concat(e),t},ple=function(t,e){if(t.document===e.document){let r=t.fullPointer.concat(e.fullPointer);return t.toView(r).compute("index")}return e.fullPointer.forEach(r=>{r[0]+=t.document.length}),t.document=x8(t.document,e.docs),t.all()},gle={concat:function(t){if(typeof t=="string"){let e=this.fromText(t);if(!this.found||!this.ptrs)this.document=this.document.concat(e.document);else{let n=this.fullPointer,r=n[n.length-1][0];this.document.splice(r,0,...e.document)}return this.all().compute("index")}if(typeof t=="object"&&t.isView)return ple(this,t);if(mle(t)){let e=x8(this.document,t);return this.document=e,this.all()}return this}},yle=function(){return this.ptrs=this.fullPointer,this},ble=function(){let t=this.ptrs;return!t||t.length<1?this:(t=t.map(e=>e.slice(0,3)),this.ptrs=t,this)},vle={harden:yle,soften:ble},xle=Object.assign({},Rae,Vae,Kae,Qae,ele,fle,gle,vle),wle=function(t){Object.assign(t.prototype,xle)},Ele=wle,kle={id:function(t){let e=t.docs;for(let n=0;n<e.length;n+=1)for(let r=0;r<e[n].length;r+=1){let s=e[n][r];s.id=s.id||v8(s)}}},Nle=kle,Cle={api:Ele,compute:Nle},_le=[{word:"@",out:["at"]},{word:"arent",out:["are","not"]},{word:"alot",out:["a","lot"]},{word:"brb",out:["be","right","back"]},{word:"cannot",out:["can","not"]},{word:"dun",out:["do","not"]},{word:"can't",out:["can","not"]},{word:"shan't",out:["should","not"]},{word:"won't",out:["will","not"]},{word:"that's",out:["that","is"]},{word:"what's",out:["what","is"]},{word:"let's",out:["let","us"]},{word:"dunno",out:["do","not","know"]},{word:"gonna",out:["going","to"]},{word:"gotta",out:["have","got","to"]},{word:"gimme",out:["give","me"]},{word:"outta",out:["out","of"]},{word:"tryna",out:["trying","to"]},{word:"gtg",out:["got","to","go"]},{word:"im",out:["i","am"]},{word:"imma",out:["I","will"]},{word:"imo",out:["in","my","opinion"]},{word:"irl",out:["in","real","life"]},{word:"ive",out:["i","have"]},{word:"rn",out:["right","now"]},{word:"tbh",out:["to","be","honest"]},{word:"wanna",out:["want","to"]},{word:"c'mere",out:["come","here"]},{word:"c'mon",out:["come","on"]},{word:"shoulda",out:["should","have"]},{word:"coulda",out:["coulda","have"]},{word:"woulda",out:["woulda","have"]},{word:"musta",out:["must","have"]},{word:"tis",out:["it","is"]},{word:"twas",out:["it","was"]},{word:"y'know",out:["you","know"]},{word:"ne'er",out:["never"]},{word:"o'er",out:["over"]},{after:"ll",out:["will"]},{after:"ve",out:["have"]},{after:"re",out:["are"]},{after:"m",out:["am"]},{before:"c",out:["ce"]},{before:"m",out:["me"]},{before:"n",out:["ne"]},{before:"qu",out:["que"]},{before:"s",out:["se"]},{before:"t",out:["tu"]},{word:"shouldnt",out:["should","not"]},{word:"couldnt",out:["could","not"]},{word:"wouldnt",out:["would","not"]},{word:"hasnt",out:["has","not"]},{word:"wasnt",out:["was","not"]},{word:"isnt",out:["is","not"]},{word:"cant",out:["can","not"]},{word:"dont",out:["do","not"]},{word:"wont",out:["will","not"]},{word:"howd",out:["how","did"]},{word:"whatd",out:["what","did"]},{word:"whend",out:["when","did"]},{word:"whered",out:["where","did"]}],yi=!0,Sle={st:yi,nd:yi,rd:yi,th:yi,am:yi,pm:yi,max:yi,"":yi,s:yi,e:yi,er:yi,re:yi,me:yi},Tle={one:{contractions:_le,numberSuffixes:Sle}},$le=function(t,e,n){let[r,s]=e;!n||n.length===0||(n=n.map((i,o)=>(i.implicit=i.text,i.machine=i.text,i.pre="",i.post="",i.text="",i.normal="",i.index=[r,s+o],i)),n[0]&&(n[0].pre=t[r][s].pre,n[n.length-1].post=t[r][s].post,n[0].text=t[r][s].text,n[0].normal=t[r][s].normal),t[r].splice(s,1,...n))},ik=$le,Ile=/'/,Ale=new Set(["what","how","when","where","why"]),Rle=new Set(["be","go","start","think","need"]),Ple=new Set(["been","gone"]),Dle=function(t,e){let n=t[e].normal.split(Ile)[0];if(Ale.has(n))return[n,"did"];if(t[e+1]){if(Ple.has(t[e+1].normal))return[n,"had"];if(Rle.has(t[e+1].normal))return[n,"would"]}return null},Ole=Dle,Lle=function(t,e){return t[e].normal==="ain't"||t[e].normal==="aint"?null:[t[e].normal.replace(/n't/,""),"not"]},Mle=Lle,XT=/'/,zle=/(e||aison|sion|tion)$/,Fle=/(age|isme|acle|ege|oire)$/,Ble=(t,e)=>{let n=t[e].normal.split(XT)[1];return n&&n.endsWith("e")?["la",n]:["le",n]},Vle=(t,e)=>{let n=t[e].normal.split(XT)[1];return n&&zle.test(n)&&!Fle.test(n)?["du",n]:n&&n.endsWith("s")?["des",n]:["de",n]},jle=(t,e)=>["je",t[e].normal.split(XT)[1]],ok={preJ:jle,preL:Ble,preD:Vle},Ule=/^([0-9.]{1,4}[a-z]{0,2}) ?[-] ?([0-9]{1,4}[a-z]{0,2})$/i,Hle=/^([0-9]{1,2}(:[0-9][0-9])?(am|pm)?) ?[-] ?([0-9]{1,2}(:[0-9][0-9])?(am|pm)?)$/i,Gle=/^[0-9]{3}-[0-9]{4}$/,Wle=function(t,e){let n=t[e],r=n.text.match(Ule);return r!==null?n.tags.has("PhoneNumber")===!0||Gle.test(n.text)?null:[r[1],"to",r[2]]:(r=n.text.match(Hle),r!==null?[r[1],"to",r[4]]:null)},qle=Wle,Kle=/^([+-]?[0-9][.,0-9]*)([a-z/]+)$/,Zle=function(t,e,n){const r=n.model.one.numberSuffixes||{};let i=t[e].text.match(Kle);if(i!==null){let o=i[2].toLowerCase().trim();return r.hasOwnProperty(o)?null:[i[1],o]}return null},Xle=Zle,P4=/'/,Yle=/^[0-9][^-]*[-].*?[0-9]/,D4=function(t,e,n,r){let s=e.update();s.document=[t];let i=n+r;n>0&&(n-=1),t[i]&&(i+=1),s.ptrs=[[0,n,i]]},O4={t:(t,e)=>Mle(t,e),d:(t,e)=>Ole(t,e)},L4={j:(t,e)=>ok.preJ(t,e),l:(t,e)=>ok.preL(t,e),d:(t,e)=>ok.preD(t,e)},Jle=function(t,e,n,r){for(let s=0;s<t.length;s+=1){let i=t[s];if(i.word===e.normal)return i.out;if(r!==null&&r===i.after)return[n].concat(i.out);if(n!==null&&n===i.before&&r&&r.length>2)return i.out.concat(r)}return null},ak=function(t,e){let n=e.fromText(t.join(" "));return n.compute(["id","alias"]),n.docs[0]},Qle=function(t,e){for(let n=e+1;n<5&&t[n];n+=1)if(t[n].normal==="been")return["there","has"];return["there","is"]},ece=t=>{let{world:e,document:n}=t;const{model:r,methods:s}=e;let i=r.one.contractions||[];n.forEach((o,a)=>{for(let l=o.length-1;l>=0;l-=1){let c=null,u=null;if(P4.test(o[l].normal)===!0){let m=o[l].normal.split(P4);c=m[0],u=m[1]}let h=Jle(i,o[l],c,u);if(!h&&O4.hasOwnProperty(u)&&(h=O4[u](o,l,e)),!h&&L4.hasOwnProperty(c)&&(h=L4[c](o,l)),c==="there"&&u==="s"&&(h=Qle(o,l)),h){h=ak(h,t),ik(n,[a,l],h),D4(n[a],t,l,h.length);continue}if(Yle.test(o[l].normal)){h=qle(o,l),h&&(h=ak(h,t),ik(n,[a,l],h),s.one.setTag(h,"NumberRange",e),h[2]&&h[2].tags.has("Time")&&s.one.setTag([h[0]],"Time",e,null,"time-range"),D4(n[a],t,l,h.length));continue}h=Xle(o,l,e),h&&(h=ak(h,t),ik(n,[a,l],h),s.one.setTag([h[1]],"Unit",e,null,"contraction-unit"))}})},tce=ece,nce={contractions:tce},rce={model:Tle,compute:nce,hooks:["contractions"]},sce=rce,M4=function(t){const e=t.world,{model:n,methods:r}=t.world,s=r.one.setTag,{frozenLex:i}=n.one,o=n.one._multiCache||{};t.docs.forEach(a=>{for(let l=0;l<a.length;l+=1){let c=a[l],u=c.machine||c.normal;if(o[u]!==void 0&&a[l+1]){let h=l+o[u]-1;for(let m=h;m>l;m-=1){let p=a.slice(l,m+1),y=p.map(v=>v.machine||v.normal).join(" ");if(i.hasOwnProperty(y)===!0){s(p,i[y],e,!1,"1-frozen-multi-lexicon"),p.forEach(v=>v.frozen=!0);continue}}}if(i[u]!==void 0&&i.hasOwnProperty(u)){s([c],i[u],e,!1,"1-freeze-lexicon"),c.frozen=!0;continue}}})},ice=function(t){return t.docs.forEach(e=>{e.forEach(n=>{delete n.frozen})}),t},oce={frozen:M4,freeze:M4,unfreeze:ice},z4=t=>"\x1B[34m"+t+"\x1B[0m",F4=t=>"\x1B[3m\x1B[2m"+t+"\x1B[0m",ace=function(t){t.docs.forEach(e=>{console.log(z4(`
  `)),e.forEach(n=>{let r=`  ${F4("")}  `,s=n.implicit||n.text||"-";n.frozen===!0?r+=`${z4(s)} `:r+=F4(s),console.log(r)})})},B4=ace,lce={compute:oce,mutate:t=>{const e=t.methods.one;e.termMethods.isFrozen=n=>n.frozen===!0,e.debug.freeze=B4,e.debug.frozen=B4},api:function(t){t.prototype.freeze=function(){return this.docs.forEach(e=>{e.forEach(n=>{n.frozen=!0})}),this},t.prototype.unfreeze=function(){this.compute("unfreeze")},t.prototype.isFrozen=function(){return this.match("@isFrozen+")}},hooks:["freeze"]},cce=function(t,e,n){const{model:r,methods:s}=n,i=s.one.setTag,o=r.one._multiCache||{},{lexicon:a}=r.one||{};let l=t[e],c=l.machine||l.normal;if(o[c]!==void 0&&t[e+1]){let u=e+o[c]-1;for(let h=u;h>e;h-=1){let m=t.slice(e,h+1);if(m.length<=1)return!1;let p=m.map(y=>y.machine||y.normal).join(" ");if(a.hasOwnProperty(p)===!0){let y=a[p];return i(m,y,n,!1,"1-multi-lexicon"),y&&y.length===2&&(y[0]==="PhrasalVerb"||y[1]==="PhrasalVerb")&&i([m[1]],"Particle",n,!1,"1-phrasal-particle"),!0}}return!1}return null},uce=cce,V4=/^(under|over|mis|re|un|dis|semi|pre|post)-?/,dce=new Set(["Verb","Infinitive","PastTense","Gerund","PresentTense","Adjective","Participle"]),hce=function(t,e,n){const{model:r,methods:s}=n,i=s.one.setTag,{lexicon:o}=r.one;let a=t[e],l=a.machine||a.normal;if(o[l]!==void 0&&o.hasOwnProperty(l))return i([a],o[l],n,!1,"1-lexicon"),!0;if(a.alias){let c=a.alias.find(u=>o.hasOwnProperty(u));if(c)return i([a],o[c],n,!1,"1-lexicon-alias"),!0}if(V4.test(l)===!0){let c=l.replace(V4,"");if(o.hasOwnProperty(c)&&c.length>3&&dce.has(o[c]))return i([a],o[c],n,!1,"1-lexicon-prefix"),!0}return null},fce=hce,mce=function(t){const e=t.world;t.docs.forEach(n=>{for(let r=0;r<n.length;r+=1)if(n[r].tags.size===0){let s=null;s=s||uce(n,r,e),s=s||fce(n,r,e)}})},pce={lexicon:mce},gce=function(t){let e={},n={};return Object.keys(t).forEach(r=>{let s=t[r];r=r.toLowerCase().trim(),r=r.replace(/'s\b/,"");let i=r.split(/ /);i.length>1&&(n[i[0]]===void 0||i.length>n[i[0]])&&(n[i[0]]=i.length),e[r]=e[r]||s}),delete e[""],delete e[null],delete e[" "],{lex:e,_multi:n}},yce=gce,bce={one:{expandLexicon:yce}},vce=function(t,e=!1){const n=this.world(),{methods:r,model:s}=n;if(!t)return;if(Object.keys(t).forEach(a=>{typeof t[a]=="string"&&t[a].startsWith("#")&&(t[a]=t[a].replace(/^#/,""))}),e===!0){let{lex:a,_multi:l}=r.one.expandLexicon(t,n);Object.assign(s.one._multiCache,l),Object.assign(s.one.frozenLex,a);return}if(r.two.expandLexicon){let{lex:a,_multi:l}=r.two.expandLexicon(t,n);Object.assign(s.one.lexicon,a),Object.assign(s.one._multiCache,l)}let{lex:i,_multi:o}=r.one.expandLexicon(t,n);Object.assign(s.one.lexicon,i),Object.assign(s.one._multiCache,o)},xce={addWords:vce},wce={one:{lexicon:{},_multiCache:{},frozenLex:{}}},Ece={model:wce,methods:bce,compute:pce,lib:xce,hooks:["lexicon"]},kce=function(t,e){const{methods:n,model:r}=e;return n.one.tokenize.splitTerms(t,r).map(i=>n.one.tokenize.splitWhitespace(i,r)).map(i=>i.text.toLowerCase())},Nce=function(t,e){let n=[{}],r=[null],s=[0],i=[],o=0;t.forEach(function(a){let l=0,c=kce(a,e);for(let u=0;u<c.length;u++){let h=c[u];n[l]&&n[l].hasOwnProperty(h)?l=n[l][h]:(o++,n[l][h]=o,n[o]={},l=o,r[o]=null)}r[l]=[c.length]});for(let a in n[0])o=n[0][a],s[o]=0,i.push(o);for(;i.length;){let a=i.shift(),l=Object.keys(n[a]);for(let c=0;c<l.length;c+=1){let u=l[c],h=n[a][u];for(i.push(h),o=s[a];o>0&&!n[o].hasOwnProperty(u);)o=s[o];if(n.hasOwnProperty(o)){let m=n[o][u];s[h]=m,r[m]&&(r[h]=r[h]||[],r[h]=r[h].concat(r[m]))}else s[h]=0}}return{goNext:n,endAs:r,failTo:s}},w8=Nce,Cce=function(t,e,n){let r=0,s=[];for(let i=0;i<t.length;i++){let o=t[i][n.form]||t[i].normal;for(;r>0&&(e.goNext[r]===void 0||!e.goNext[r].hasOwnProperty(o));)r=e.failTo[r]||0;if(e.goNext[r].hasOwnProperty(o)&&(r=e.goNext[r][o],e.endAs[r])){let a=e.endAs[r];for(let l=0;l<a.length;l++){let c=a[l],u=t[i-c+1],[h,m]=u.index;s.push([h,m,m+c,u.id])}}}return s},_ce=function(t,e){for(let n=0;n<t.length;n+=1)if(e.has(t[n])===!0)return!1;return!0},Sce=function(t,e,n){let r=[];n.form=n.form||"normal";let s=t.docs;if(!e.goNext||!e.goNext[0])return console.error("Compromise invalid lookup trie"),t.none();let i=Object.keys(e.goNext[0]);for(let o=0;o<s.length;o++){if(t._cache&&t._cache[o]&&_ce(i,t._cache[o])===!0)continue;let a=s[o],l=Cce(a,e,n);l.length>0&&(r=r.concat(l))}return t.update(r)},Tce=Sce,$ce=t=>Object.prototype.toString.call(t)==="[object Object]";function Ice(t){t.prototype.lookup=function(e,n={}){if(!e)return this.none();typeof e=="string"&&(e=[e]);let r=$ce(e)?e:w8(e,this.world),s=Tce(this,r,n);return s=s.settle(),s}}const lk=(t,e)=>{for(let n=t.length-1;n>=0;n-=1)if(t[n]!==e)return t=t.slice(0,n+1),t;return t},Ace=function(t){return t.goNext=t.goNext.map(e=>{if(Object.keys(e).length!==0)return e}),t.goNext=lk(t.goNext,void 0),t.failTo=lk(t.failTo,0),t.endAs=lk(t.endAs,null),t},Rce=Ace,AC={buildTrie:function(t){const e=w8(t,this.world());return Rce(e)}};AC.compile=AC.buildTrie;const Pce={api:Ice,lib:AC},j4=function(t,e){return e&&t.forEach(n=>{let r=n[0];e[r]&&(n[0]=e[r][0],n[1]+=e[r][1],n[2]+=e[r][1])}),t},E8=function(t,e){let{ptrs:n,byGroup:r}=t;return n=j4(n,e),Object.keys(r).forEach(s=>{r[s]=j4(r[s],e)}),{ptrs:n,byGroup:r}},o0=function(t,e,n){const r=n.methods.one;return typeof t=="number"&&(t=String(t)),typeof t=="string"&&(t=r.killUnicode(t,n),t=r.parseMatch(t,e,n)),t},k8=t=>Object.prototype.toString.call(t)==="[object Object]",a0=t=>t&&k8(t)&&t.isView===!0,l0=t=>t&&k8(t)&&t.isNet===!0,Dce=function(t,e,n){const r=this.methods.one;if(a0(t))return this.intersection(t);if(l0(t))return this.sweep(t,{tagger:!1}).view.settle();t=o0(t,n,this.world);let s={regs:t,group:e},i=r.match(this.docs,s,this._cache),{ptrs:o,byGroup:a}=E8(i,this.fullPointer),l=this.toView(o);return l._groups=a,l},Oce=function(t,e,n){const r=this.methods.one;if(a0(t))return this.intersection(t).eq(0);if(l0(t))return this.sweep(t,{tagger:!1,matchOne:!0}).view;t=o0(t,n,this.world);let s={regs:t,group:e,justOne:!0},i=r.match(this.docs,s,this._cache),{ptrs:o,byGroup:a}=E8(i,this.fullPointer),l=this.toView(o);return l._groups=a,l},Lce=function(t,e,n){const r=this.methods.one;if(a0(t))return this.intersection(t).fullPointer.length>0;if(l0(t))return this.sweep(t,{tagger:!1}).view.found;t=o0(t,n,this.world);let s={regs:t,group:e,justOne:!0};return r.match(this.docs,s,this._cache).ptrs.length>0},Mce=function(t,e,n){const r=this.methods.one;if(a0(t))return this.filter(l=>l.intersection(t).found);if(l0(t)){let l=this.sweep(t,{tagger:!1}).view.settle();return this.if(l)}t=o0(t,n,this.world);let s={regs:t,group:e,justOne:!0},i=this.fullPointer,o=this._cache||[];i=i.filter((l,c)=>{let u=this.update([l]);return r.match(u.docs,s,o[c]).ptrs.length>0});let a=this.update(i);return this._cache&&(a._cache=i.map(l=>o[l[0]])),a},zce=function(t,e,n){const{methods:r}=this,s=r.one;if(a0(t))return this.filter(a=>!a.intersection(t).found);if(l0(t)){let a=this.sweep(t,{tagger:!1}).view.settle();return this.ifNo(a)}t=o0(t,n,this.world);let i=this._cache||[],o=this.filter((a,l)=>{let c={regs:t,group:e,justOne:!0};return s.match(a.docs,c,i[l]).ptrs.length===0});return this._cache&&(o._cache=o.ptrs.map(a=>i[a[0]])),o},Fce={matchOne:Oce,match:Dce,has:Lce,if:Mce,ifNo:zce},Bce=function(t,e,n){const{indexN:r}=this.methods.one.pointer;let s=[],i=r(this.fullPointer);Object.keys(i).forEach(a=>{let l=i[a].sort((c,u)=>c[1]>u[1]?1:-1)[0];l[1]>0&&s.push([l[0],0,l[1]])});let o=this.toView(s);return t?o.match(t,e,n):o},Vce=function(t,e,n){const{indexN:r}=this.methods.one.pointer;let s=[],i=r(this.fullPointer),o=this.document;Object.keys(i).forEach(l=>{let c=i[l].sort((m,p)=>m[1]>p[1]?-1:1)[0],[u,,h]=c;h<o[u].length&&s.push([u,h,o[u].length])});let a=this.toView(s);return t?a.match(t,e,n):a},jce=function(t,e,n){typeof t=="string"&&(t=this.world.methods.one.parseMatch(t,n,this.world)),t[t.length-1].end=!0;let r=this.fullPointer;return this.forEach((s,i)=>{let o=s.before(t,e);if(o.found){let a=o.terms();r[i][1]-=a.length,r[i][3]=a.docs[0][0].id}}),this.update(r)},Uce=function(t,e,n){typeof t=="string"&&(t=this.world.methods.one.parseMatch(t,n,this.world)),t[0].start=!0;let r=this.fullPointer;return this.forEach((s,i)=>{let o=s.after(t,e);if(o.found){let a=o.terms();r[i][2]+=a.length,r[i][4]=null}}),this.update(r)},Hce=function(t,e,n){return this.growRight(t,e,n).growLeft(t,e,n)},Gce={before:Bce,after:Vce,growLeft:jce,growRight:Uce,grow:Hce},N8=function(t,e){return[t[0],t[1],e[2]]},Wce=function(t){return Object.prototype.toString.call(t)==="[object Array]"},YT=(t,e,n)=>typeof t=="string"||Wce(t)?e.match(t,n):t||e.none(),JT=function(t,e){let[n,r,s]=t;return e.document[n]&&e.document[n][r]&&(t[3]=t[3]||e.document[n][r].id,e.document[n][s-1]&&(t[4]=t[4]||e.document[n][s-1].id)),t},wf={};wf.splitOn=function(t,e){const{splitAll:n}=this.methods.one.pointer;let r=YT(t,this,e).fullPointer,s=n(this.fullPointer,r),i=[];return s.forEach(o=>{i.push(o.passthrough),i.push(o.before),i.push(o.match),i.push(o.after)}),i=i.filter(o=>o),i=i.map(o=>JT(o,this)),this.update(i)};wf.splitBefore=function(t,e){const{splitAll:n}=this.methods.one.pointer;let r=YT(t,this,e).fullPointer,s=n(this.fullPointer,r);for(let o=0;o<s.length;o+=1)!s[o].after&&s[o+1]&&s[o+1].before&&s[o].match&&s[o].match[0]===s[o+1].before[0]&&(s[o].after=s[o+1].before,delete s[o+1].before);let i=[];return s.forEach(o=>{i.push(o.passthrough),i.push(o.before),o.match&&o.after?i.push(N8(o.match,o.after)):i.push(o.match)}),i=i.filter(o=>o),i=i.map(o=>JT(o,this)),this.update(i)};wf.splitAfter=function(t,e){const{splitAll:n}=this.methods.one.pointer;let r=YT(t,this,e).fullPointer,s=n(this.fullPointer,r),i=[];return s.forEach(o=>{i.push(o.passthrough),o.before&&o.match?i.push(N8(o.before,o.match)):(i.push(o.before),i.push(o.match)),i.push(o.after)}),i=i.filter(o=>o),i=i.map(o=>JT(o,this)),this.update(i)};wf.split=wf.splitAfter;const qce=wf,Kce=function(t,e){return!t||!e||t[0]!==e[0]?!1:t[2]===e[1]},U4=function(t,e,n){const r=t.world,s=r.methods.one.parseMatch;e=e||".$",n=n||"^.";let i=s(e,{},r),o=s(n,{},r);i[i.length-1].end=!0,o[0].start=!0;let a=t.fullPointer,l=[a[0]];for(let c=1;c<a.length;c+=1){let u=l[l.length-1],h=a[c],m=t.update([u]),p=t.update([h]);Kce(u,h)&&m.has(i)&&p.has(o)?l[l.length-1]=[u[0],u[1],h[2],u[3],h[4]]:l.push(h)}return t.update(l)},Zce={joinIf:function(t,e){return U4(this,t,e)},join:function(){return U4(this)}},Xce=Zce,qo=Object.assign({},Fce,Gce,qce,Xce);qo.lookBehind=qo.before;qo.lookBefore=qo.before;qo.lookAhead=qo.after;qo.lookAfter=qo.after;qo.notIf=qo.ifNo;const Yce=function(t){Object.assign(t.prototype,qo)},Jce=Yce,Qce=/(?:^|\s)([![^]*(?:<[^<]*>)?\/.*?[^\\/]\/[?\]+*$~]*)(?:\s|$)/,eue=/([!~[^]*(?:<[^<]*>)?\([^)]+[^\\)]\)[?\]+*$~]*)(?:\s|$)/,tue=/ /g,nue=t=>/^[![^]*(<[^<]*>)?\(/.test(t)&&/\)[?\]+*$~]*$/.test(t),H4=t=>/^[![^]*(<[^<]*>)?\//.test(t)&&/\/[?\]+*$~]*$/.test(t),G4=function(t){return t=t.map(e=>e.trim()),t=t.filter(e=>e),t},rue=function(t){let e=t.split(Qce),n=[];e.forEach(s=>{if(H4(s)){n.push(s);return}n=n.concat(s.split(eue))}),n=G4(n);let r=[];return n.forEach(s=>{nue(s)||H4(s)?r.push(s):r=r.concat(s.split(tue))}),r=G4(r),r},sue=rue,W4=/\{([0-9]+)?(, *[0-9]*)?\}/,q4=/&&/,iue=new RegExp(/^<\s*(\S+)\s*>/),K4=t=>t.charAt(0).toUpperCase()+t.substring(1),ji=t=>t.charAt(t.length-1),bi=t=>t.charAt(0),ph=t=>t.substring(1),gh=t=>t.substring(0,t.length-1),Gm=function(t){return t=ph(t),t=gh(t),t},C8=function(t,e){let n={};for(let r=0;r<2;r+=1){if(ji(t)==="$"&&(n.end=!0,t=gh(t)),bi(t)==="^"&&(n.start=!0,t=ph(t)),ji(t)==="?"&&(n.optional=!0,t=gh(t)),(bi(t)==="["||ji(t)==="]")&&(n.group=null,bi(t)==="["&&(n.groupStart=!0),ji(t)==="]"&&(n.groupEnd=!0),t=t.replace(/^\[/,""),t=t.replace(/\]$/,""),bi(t)==="<")){const s=iue.exec(t);s.length>=2&&(n.group=s[1],t=t.replace(s[0],""))}if(ji(t)==="+"&&(n.greedy=!0,t=gh(t)),t!=="*"&&ji(t)==="*"&&t!=="\\*"&&(n.greedy=!0,t=gh(t)),bi(t)==="!"&&(n.negative=!0,t=ph(t)),bi(t)==="~"&&ji(t)==="~"&&t.length>2&&(t=Gm(t),n.fuzzy=!0,n.min=e.fuzzy||.85,/\(/.test(t)===!1))return n.word=t,n;if(bi(t)==="/"&&ji(t)==="/")return t=Gm(t),e.caseSensitive&&(n.use="text"),n.regex=new RegExp(t),n;if(W4.test(t)===!0&&(t=t.replace(W4,(s,i,o)=>(o===void 0?(n.min=Number(i),n.max=Number(i)):(o=o.replace(/, */,""),i===void 0?(n.min=0,n.max=Number(o)):(n.min=Number(i),n.max=Number(o||999))),n.greedy=!0,n.min||(n.optional=!0),""))),bi(t)==="("&&ji(t)===")"){q4.test(t)?(n.choices=t.split(q4),n.operator="and"):(n.choices=t.split("|"),n.operator="or"),n.choices[0]=ph(n.choices[0]);let s=n.choices.length-1;n.choices[s]=gh(n.choices[s]),n.choices=n.choices.map(i=>i.trim()),n.choices=n.choices.filter(i=>i),n.choices=n.choices.map(i=>i.split(/ /g).map(o=>C8(o,e))),t=""}if(bi(t)==="{"&&ji(t)==="}"){if(t=Gm(t),n.root=t,/\//.test(t)){let s=n.root.split(/\//);n.root=s[0],n.pos=s[1],n.pos==="adj"&&(n.pos="Adjective"),n.pos=n.pos.charAt(0).toUpperCase()+n.pos.substr(1).toLowerCase(),s[2]!==void 0&&(n.sense=s[2])}return n}if(bi(t)==="<"&&ji(t)===">")return t=Gm(t),n.chunk=K4(t),n.greedy=!0,n;if(bi(t)==="%"&&ji(t)==="%")return t=Gm(t),n.switch=t,n}return bi(t)==="#"?(n.tag=ph(t),n.tag=K4(n.tag),n):bi(t)==="@"?(n.method=ph(t),n):t==="."?(n.anything=!0,n):t==="*"?(n.anything=!0,n.greedy=!0,n.optional=!0,n):(t&&(t=t.replace("\\*","*"),t=t.replace("\\.","."),e.caseSensitive?n.use="text":t=t.toLowerCase(),n.word=t),n)},oue=C8,aue=/[a-z0-9][-][a-z]/i,lue=function(t,e){let n=e.model.one.prefixes;for(let r=t.length-1;r>=0;r-=1){let s=t[r];if(s.word&&aue.test(s.word)){let i=s.word.split(/[-]/g);if(n.hasOwnProperty(i[0]))continue;i=i.filter(o=>o).reverse(),t.splice(r,1),i.forEach(o=>{let a=Object.assign({},s);a.word=o,t.splice(r,0,a)})}}return t},cue=lue,Z4=function(t,e){let{all:n}=e.methods.two.transform.verb||{},r=t.root;return n?n(r,e.model):[]},X4=function(t,e){let{all:n}=e.methods.two.transform.noun||{};return n?n(t.root,e.model):[t.root]},Y4=function(t,e){let{all:n}=e.methods.two.transform.adjective||{};return n?n(t.root,e.model):[t.root]},uue=function(t,e){return t=t.map(n=>{if(n.root)if(e.methods.two&&e.methods.two.transform){let r=[];n.pos?n.pos==="Verb"?r=r.concat(Z4(n,e)):n.pos==="Noun"?r=r.concat(X4(n,e)):n.pos==="Adjective"&&(r=r.concat(Y4(n,e))):(r=r.concat(Z4(n,e)),r=r.concat(X4(n,e)),r=r.concat(Y4(n,e))),r=r.filter(s=>s),r.length>0&&(n.operator="or",n.fastOr=new Set(r))}else n.machine=n.root,delete n.id,delete n.root;return n}),t},due=uue,hue=function(t){let e=0,n=null;for(let r=0;r<t.length;r++){const s=t[r];s.groupStart===!0&&(n=s.group,n===null&&(n=String(e),e+=1)),n!==null&&(s.group=n),s.groupEnd===!0&&(n=null)}return t},fue=function(t){return t.map(e=>{if(e.choices!==void 0){if(e.operator!=="or"||e.fuzzy===!0)return e;e.choices.every(r=>{if(r.length!==1)return!1;let s=r[0];return s.fuzzy===!0||s.start||s.end?!1:s.word!==void 0&&s.negative!==!0&&s.optional!==!0&&s.method!==!0})===!0&&(e.fastOr=new Set,e.choices.forEach(r=>{e.fastOr.add(r[0].word)}),delete e.choices)}return e})},mue=function(t){return t.map(e=>(e.fuzzy&&e.choices&&e.choices.forEach(n=>{n.length===1&&n[0].word&&(n[0].fuzzy=!0,n[0].min=e.min)}),e))},pue=function(t){return t=hue(t),t=fue(t),t=mue(t),t},gue=pue,yue=function(t,e,n){if(t==null||t==="")return[];e=e||{},typeof t=="number"&&(t=String(t));let r=sue(t);return r=r.map(s=>oue(s,e)),r=cue(r,n),r=due(r,n),r=gue(r),r},bue=yue,vue=function(t,e){for(let n of e)if(t.has(n))return!0;return!1},xue=function(t,e){for(let n=0;n<t.length;n+=1){let r=t[n];if(!(r.optional===!0||r.negative===!0||r.fuzzy===!0)){if(r.word!==void 0&&e.has(r.word)===!1||r.tag!==void 0&&e.has("#"+r.tag)===!1)return!0;if(r.fastOr&&vue(r.fastOr,e)===!1)return!1}}return!1},wue=xue,Eue=function(t,e){let n=t.length,r=e.length;if(n===0)return r;if(r===0)return n;let s=(r>n?r:n)+1;if(Math.abs(n-r)>(s||100))return s||100;let i=[];for(let m=0;m<s;m++)i[m]=[m],i[m].length=s;for(let m=0;m<s;m++)i[0][m]=m;let o,a,l,c,u,h;for(let m=1;m<=n;++m)for(a=t[m-1],o=1;o<=r;++o){if(m===o&&i[m][o]>4)return n;l=e[o-1],c=a===l?0:1,u=i[m-1][o]+1,(h=i[m][o-1]+1)<u&&(u=h),(h=i[m-1][o-1]+c)<u&&(u=h),m>1&&o>1&&a===e[o-2]&&t[m-2]===l&&(h=i[m-2][o-2]+c)<u?i[m][o]=h:i[m][o]=u}return i[n][r]},kue=function(t,e,n=3){if(t===e)return 1;if(t.length<n||e.length<n)return 0;const r=Eue(t,e);let s=Math.max(t.length,e.length);return 1-(s===0?0:r/s)},Nue=kue,Cue=/([\u0022\uFF02\u0027\u201C\u2018\u201F\u201B\u201E\u2E42\u201A\u00AB\u2039\u2035\u2036\u2037\u301D\u0060\u301F])/,_ue=/([\u0022\uFF02\u0027\u201D\u2019\u00BB\u203A\u2032\u2033\u2034\u301E\u00B4])/,J4=/^[-]$/,Q4=/ [-]{1,3} /,la=(t,e)=>t.post.indexOf(e)!==-1,RC={hasQuote:t=>Cue.test(t.pre)||_ue.test(t.post),hasComma:t=>la(t,","),hasPeriod:t=>la(t,".")===!0&&la(t,"...")===!1,hasExclamation:t=>la(t,"!"),hasQuestionMark:t=>la(t,"?")||la(t,""),hasEllipses:t=>la(t,"..")||la(t,""),hasSemicolon:t=>la(t,";"),hasColon:t=>la(t,":"),hasSlash:t=>/\//.test(t.text),hasHyphen:t=>J4.test(t.post)||J4.test(t.pre),hasDash:t=>Q4.test(t.post)||Q4.test(t.pre),hasContraction:t=>!!t.implicit,isAcronym:t=>t.tags.has("Acronym"),isKnown:t=>t.tags.size>0,isTitleCase:t=>/^\p{Lu}[a-z'\u00C0-\u00FF]/u.test(t.text),isUpperCase:t=>/^\p{Lu}+$/u.test(t.text)};RC.hasQuotation=RC.hasQuote;const PC=RC;let C1=function(){};const Sue=function(t,e,n,r){if(e.anything===!0)return!0;if(e.start===!0&&n!==0||e.end===!0&&n!==r-1)return!1;if(e.id!==void 0&&e.id===t.id)return!0;if(e.word!==void 0)return e.use?e.word===t[e.use]:t.machine!==null&&t.machine===e.word||t.alias!==void 0&&t.alias.hasOwnProperty(e.word)||e.fuzzy===!0&&(e.word===t.root||Nue(e.word,t.normal)>=e.min)||t.alias&&t.alias.some(s=>s===e.word)?!0:e.word===t.text||e.word===t.normal;if(e.tag!==void 0)return t.tags.has(e.tag)===!0;if(e.method!==void 0)return typeof PC[e.method]=="function"&&PC[e.method](t)===!0;if(e.pre!==void 0)return t.pre&&t.pre.includes(e.pre);if(e.post!==void 0)return t.post&&t.post.includes(e.post);if(e.regex!==void 0){let s=t.normal;return e.use&&(s=t[e.use]),e.regex.test(s)}if(e.chunk!==void 0)return t.chunk===e.chunk;if(e.switch!==void 0)return t.switch===e.switch;if(e.machine!==void 0)return t.normal===e.machine||t.machine===e.machine||t.root===e.machine;if(e.sense!==void 0)return t.sense===e.sense;if(e.fastOr!==void 0){if(e.pos&&!t.tags.has(e.pos))return null;let s=t.root||t.implicit||t.machine||t.normal;return e.fastOr.has(s)||e.fastOr.has(t.text)}return e.choices!==void 0?e.operator==="and"?e.choices.every(s=>C1(t,s,n,r)):e.choices.some(s=>C1(t,s,n,r)):!1};C1=function(t,e,n,r){let s=Sue(t,e,n,r);return e.negative===!0?!s:s};const js=C1,Tue=function(t,e){let n=Object.assign({},t.regs[t.r],{start:!1,end:!1}),r=t.t;for(;t.t<t.terms.length;t.t+=1){if(e&&js(t.terms[t.t],e,t.start_i+t.t,t.phrase_length))return t.t;let s=t.t-r+1;if(n.max!==void 0&&s===n.max)return t.t;if(js(t.terms[t.t],n,t.start_i+t.t,t.phrase_length)===!1)return n.min!==void 0&&s<n.min?null:t.t}return t.t},$ue=function(t,e){let n=t.t;if(!e)return t.terms.length;for(;n<t.terms.length;n+=1)if(js(t.terms[n],e,t.start_i+n,t.phrase_length)===!0)return n;return null},Iue=function(t,e){if(t.end===!0&&t.greedy===!0&&e.start_i+e.t<e.phrase_length-1){let n=Object.assign({},t,{end:!1});if(js(e.terms[e.t],n,e.start_i+e.t,e.phrase_length)===!0)return!0}return!1},Hx=function(t,e){return t.groups[t.inGroup]||(t.groups[t.inGroup]={start:e,length:0}),t.groups[t.inGroup]},Aue=function(t){let{regs:e}=t,n=e[t.r],r=$ue(t,e[t.r+1]);if(r===null||r===0||n.min!==void 0&&r-t.t<n.min)return null;if(n.max!==void 0&&r-t.t>n.max)return t.t=t.t+n.max,!0;if(t.hasGroup===!0){const s=Hx(t,t.t);s.length=r-t.t}return t.t=r,!0},Rue=Aue,Pue=function(t){return Object.prototype.toString.call(t)==="[object Array]"},_8=function(t,e=0){let n=t.regs[t.r],r=!1;for(let s=0;s<n.choices.length;s+=1){let i=n.choices[s];if(!Pue(i))return!1;if(r=i.every((o,a)=>{let l=0,c=t.t+a+e+l;if(t.terms[c]===void 0)return!1;let u=js(t.terms[c],o,c+t.start_i,t.phrase_length);if(u===!0&&o.greedy===!0)for(let h=1;h<t.terms.length;h+=1){let m=t.terms[c+h];if(m)if(js(m,o,t.start_i+h,t.phrase_length)===!0)l+=1;else break}return e+=l,u}),r){e+=i.length;break}}return r&&n.greedy===!0?_8(t,e):e},Due=function(t){let e=0;return t.regs[t.r].choices.every(s=>{let i=s.every((o,a)=>{let l=t.t+a;return t.terms[l]===void 0?!1:js(t.terms[l],o,l,t.phrase_length)});return i===!0&&s.length>e&&(e=s.length),i})===!0?e:!1},Oue=function(t){const{regs:e}=t;let n=e[t.r],r=_8(t);if(r){if(n.negative===!0)return null;if(t.hasGroup===!0){const s=Hx(t,t.t);s.length+=r}if(n.end===!0){let s=t.phrase_length;if(t.t+t.start_i+r!==s)return null}return t.t+=r,!0}else if(!n.optional)return null;return!0},Lue=Oue,Mue=function(t){const{regs:e}=t;let n=e[t.r],r=Due(t);if(r){if(n.negative===!0)return null;if(t.hasGroup===!0){const s=Hx(t,t.t);s.length+=r}if(n.end===!0){let s=t.phrase_length-1;if(t.t+t.start_i!==s)return null}return t.t+=r,!0}else if(!n.optional)return null;return!0},zue=Mue,Fue=function(t,e,n){let r=0;for(let s=t.t;s<t.terms.length;s+=1){let i=js(t.terms[s],e,t.start_i+t.t,t.phrase_length);if(i||n&&(i=js(t.terms[s],n,t.start_i+t.t,t.phrase_length),i)||(r+=1,e.max!==void 0&&r===e.max))break}return r===0||e.min&&e.min>r?!1:(t.t+=r,!0)},Bue=Fue,Vue=function(t){const{regs:e}=t;let n=e[t.r],r=Object.assign({},n);if(r.negative=!1,js(t.terms[t.t],r,t.start_i+t.t,t.phrase_length))return!1;if(n.optional){let i=e[t.r+1];i&&(js(t.terms[t.t],i,t.start_i+t.t,t.phrase_length)?t.r+=1:i.optional&&e[t.r+2]&&js(t.terms[t.t],e[t.r+2],t.start_i+t.t,t.phrase_length)&&(t.r+=2))}return n.greedy?Bue(t,r,e[t.r+1]):(t.t+=1,!0)},jue=Vue,Uue=function(t){const{regs:e}=t;let n=e[t.r],r=t.terms[t.t],s=js(r,e[t.r+1],t.start_i+t.t,t.phrase_length);if(n.negative||s){let i=t.terms[t.t+1];(!i||!js(i,e[t.r+1],t.start_i+t.t,t.phrase_length))&&(t.r+=1)}},Hue=Uue,Gue=function(t){const{regs:e,phrase_length:n}=t;let r=e[t.r];return t.t=Tue(t,e[t.r+1]),t.t===null||r.min&&r.min>t.t||r.end===!0&&t.start_i+t.t!==n?null:!0},Wue=Gue,que=function(t){let e=t.terms[t.t],n=t.regs[t.r];if(e.implicit&&t.terms[t.t+1]){if(!t.terms[t.t+1].implicit)return;n.word===e.normal&&(t.t+=1),n.method==="hasContraction"&&(t.t+=1)}},Kue=que,Zue=function(t,e){let n=t.regs[t.r];const r=Hx(t,e);t.t>1&&n.greedy?r.length+=t.t-e:r.length++},Xue=function(t){const{regs:e}=t;let n=e[t.r],r=t.terms[t.t],s=t.t;return n.optional&&e[t.r+1]&&n.negative?!0:(n.optional&&e[t.r+1]&&Hue(t),r.implicit&&t.terms[t.t+1]&&Kue(t),t.t+=1,n.end===!0&&t.t!==t.terms.length&&n.greedy!==!0||n.greedy===!0&&!Wue(t)?null:(t.hasGroup===!0&&Zue(t,s),!0))},ck=Xue,Yue=function(t,e,n,r){if(t.length===0||e.length===0)return null;let s={t:0,terms:t,r:0,regs:e,groups:{},start_i:n,phrase_length:r,inGroup:null};for(;s.r<e.length;s.r+=1){let a=e[s.r];if(s.hasGroup=!!a.group,s.hasGroup===!0?s.inGroup=a.group:s.inGroup=null,!s.terms[s.t]){if(e.slice(s.r).some(u=>!u.optional)===!1)break;return null}if(a.anything===!0&&a.greedy===!0){if(!Rue(s))return null;continue}if(a.choices!==void 0&&a.operator==="or"){if(!Lue(s))return null;continue}if(a.choices!==void 0&&a.operator==="and"){if(!zue(s))return null;continue}if(a.anything===!0){if(a.negative&&a.anything||!ck(s))return null;continue}if(Iue(a,s)===!0){if(!ck(s))return null;continue}if(a.negative){if(!jue(s))return null;continue}if(js(s.terms[s.t],a,s.start_i+s.t,s.phrase_length)===!0){if(!ck(s))return null;continue}if(a.optional!==!0)return null}let i=[null,n,s.t+n];if(i[1]===i[2])return null;let o={};return Object.keys(s.groups).forEach(a=>{let l=s.groups[a],c=n+l.start;o[a]=[null,c,c+l.length]}),{pointer:i,groups:o}},QT=Yue,Jue=function(t,e){let n=[],r={};return t.length===0?{ptrs:n,byGroup:r}:(typeof e=="number"&&(e=String(e)),e?t.forEach(s=>{s.groups[e]&&n.push(s.groups[e])}):t.forEach(s=>{n.push(s.pointer),Object.keys(s.groups).forEach(i=>{r[i]=r[i]||[],r[i].push(s.groups[i])})}),{ptrs:n,byGroup:r})},Que=Jue,ede=function(t,e,n){return t=t.filter(r=>{let[s,i,o]=r.pointer,a=n[s].slice(i,o);for(let l=0;l<a.length;l+=1){let c=a.slice(l);if(QT(c,e,l,a.length)!==null)return!1}return!0}),t},tde=ede,S8=function(t,e){return t.pointer[0]=e,Object.keys(t.groups).forEach(n=>{t.groups[n][0]=e}),t},nde=function(t,e,n){let r=QT(t,e,0,t.length);return r?(r=S8(r,n),r):null},rde=function(t,e,n){n=n||[];let{regs:r,group:s,justOne:i}=e,o=[];if(!r||r.length===0)return{ptrs:[],byGroup:{}};const a=r.filter(l=>l.optional!==!0&&l.negative!==!0).length;e:for(let l=0;l<t.length;l+=1){let c=t[l];if(!(n[l]&&wue(r,n[l]))){if(r[0].start===!0){let u=nde(c,r,l);u&&o.push(u);continue}for(let u=0;u<c.length;u+=1){let h=c.slice(u);if(h.length<a)break;let m=QT(h,r,u,c.length);if(m){if(m=S8(m,l),o.push(m),i===!0)break e;let p=m.pointer[2];Math.abs(p-1)>u&&(u=Math.abs(p-1))}}}}return r[r.length-1].end===!0&&(o=o.filter(l=>{let c=l.pointer[0];return t[c].length===l.pointer[2]})),e.notIf&&(o=tde(o,e.notIf,t)),o=Que(o,s),o.ptrs.forEach(l=>{let[c,u,h]=l;l[3]=t[c][u].id,l[4]=t[c][h-1].id}),o},sde=rde,ide={one:{termMethods:PC,parseMatch:bue,match:sde}},ode=ide,ade={parseMatch:function(t,e){const n=this.world();let r=n.methods.one.killUnicode;return r&&(t=r(t,n)),n.methods.one.parseMatch(t,e,n)}},lde={api:Jce,methods:ode,lib:ade},cde=/^\../,ude=/^#./,dde=t=>(t=t.replace(/&/g,"&amp;"),t=t.replace(/</g,"&lt;"),t=t.replace(/>/g,"&gt;"),t=t.replace(/"/g,"&quot;"),t=t.replace(/'/g,"&apos;"),t),hde=function(t){let e="",n="</span>";return t=dde(t),cde.test(t)?e=`<span class="${t.replace(/^\./,"")}"`:ude.test(t)?e=`<span id="${t.replace(/^#/,"")}"`:(e=`<${t}`,n=`</${t}>`),e+=">",{start:e,end:n}},fde=function(t,e){let n={},r={};return Object.keys(e).forEach(s=>{let i=e[s],o=hde(s);typeof i=="string"&&(i=t.match(i)),i.docs.forEach(a=>{if(a.every(u=>u.implicit))return;let l=a[0].id;n[l]=n[l]||[],n[l].push(o.start);let c=a[a.length-1].id;r[c]=r[c]||[],r[c].push(o.end)})}),{starts:n,ends:r}},mde=function(t){let{starts:e,ends:n}=fde(this,t),r="";return this.docs.forEach(s=>{for(let i=0;i<s.length;i+=1){let o=s[i];e.hasOwnProperty(o.id)&&(r+=e[o.id].join("")),r+=o.pre||"",r+=o.text||"",n.hasOwnProperty(o.id)&&(r+=n[o.id].join("")),r+=o.post||""}}),r},pde={html:mde},T8=/[,:;)\]*.?~!\u0022\uFF02\u201D\u2019\u00BB\u203A\u2032\u2033\u2034\u301E\u00B4-]+$/,DC=/^[(['"*~\uFF02\u201C\u2018\u201F\u201B\u201E\u2E42\u201A\u00AB\u2039\u2035\u2036\u2037\u301D\u0060\u301F]+/,gde=/[,:;)('"\u201D\]]/,yde=/^[-]$/,bde=/ /,Tu=function(t,e,n=!0){let r="";return t.forEach(s=>{let i=s.pre||"",o=s.post||"";e.punctuation==="some"&&(i=i.replace(DC,""),yde.test(o)&&(o=" "),o=o.replace(gde,""),o=o.replace(/\?!+/,"?"),o=o.replace(/!+/,"!"),o=o.replace(/\?+/,"?"),o=o.replace(/\.{2,}/,""),s.tags.has("Abbreviation")&&(o=o.replace(/\./,""))),e.whitespace==="some"&&(i=i.replace(/\s/,""),o=o.replace(/\s+/," ")),e.keepPunct||(i=i.replace(DC,""),o==="-"?o=" ":o=o.replace(T8,""));let a=s[e.form||"text"]||s.normal||"";e.form==="implicit"&&(a=s.implicit||s.text),e.form==="root"&&s.implicit&&(a=s.root||s.implicit||s.normal),(e.form==="machine"||e.form==="implicit"||e.form==="root")&&s.implicit&&(!o||!bde.test(o))&&(o+=" "),r+=i+a+o}),n===!1&&(r=r.trim()),e.lowerCase===!0&&(r=r.toLowerCase()),r},vde=function(t,e){let n="";if(!t||!t[0]||!t[0][0])return n;for(let r=0;r<t.length;r+=1)n+=Tu(t[r],e,!0);if(e.keepSpace||(n=n.trim()),e.keepEndPunct===!1){t[0][0].tags.has("Emoticon")||(n=n.replace(DC,""));let r=t[t.length-1];r[r.length-1].tags.has("Emoticon")||(n=n.replace(T8,"")),n.endsWith("'")&&!n.endsWith("s'")&&(n=n.replace(/'/,""))}return e.cleanWhitespace===!0&&(n=n.trim()),n},gg={text:{form:"text"},normal:{whitespace:"some",punctuation:"some",case:"some",unicode:"some",form:"normal"},machine:{keepSpace:!1,whitespace:"some",punctuation:"some",case:"none",unicode:"some",form:"machine"},root:{keepSpace:!1,whitespace:"some",punctuation:"some",case:"some",unicode:"some",form:"root"},implicit:{form:"implicit"}};gg.clean=gg.normal;gg.reduced=gg.root;const _1=gg;let $8=[],Mu=0;for(;Mu<64;)$8[Mu]=0|Math.sin(++Mu%Math.PI)*4294967296;const xde=function(t){let e,n,r,s=[e=1732584193,n=4023233417,~e,~n],i=[],o=decodeURI(encodeURI(t))+"",a=o.length;for(t=--a/4+2|15,i[--t]=a*8;~a;)i[a>>2]|=o.charCodeAt(a)<<8*a--;for(Mu=o=0;Mu<t;Mu+=16){for(a=s;o<64;a=[r=a[3],e+((r=a[0]+[e&n|~e&r,r&e|~r&n,e^n^r,n^(e|~r)][a=o>>4]+$8[o]+~~i[Mu|[o,5*o+1,3*o+5,7*o][a]&15])<<(a=[7,12,17,22,5,9,14,20,4,11,16,23,6,10,15,21][4*a+o++%4])|r>>>-a),e,n])e=a[1]|0,n=a[2];for(o=4;o;)s[--o]+=a[o]}for(t="";o<32;)t+=(s[o>>3]>>(1^o++)*4&15).toString(16);return t},e$=xde,wde={text:!0,terms:!0};let eO={case:"none",unicode:"some",form:"machine",punctuation:"some"};const uk=function(t,e){return Object.assign({},t,e)},Il={text:t=>Tu(t,{keepPunct:!0},!1),normal:t=>Tu(t,uk(_1.normal,{keepPunct:!0}),!1),implicit:t=>Tu(t,uk(_1.implicit,{keepPunct:!0}),!1),machine:t=>Tu(t,eO,!1),root:t=>Tu(t,uk(eO,{form:"root"}),!1),hash:t=>e$(Tu(t,{keepPunct:!0},!1)),offset:t=>{let e=Il.text(t).length;return{index:t[0].offset.index,start:t[0].offset.start,length:e}},terms:t=>t.map(e=>{let n=Object.assign({},e);return n.tags=Array.from(e.tags),n}),confidence:(t,e,n)=>e.eq(n).confidence(),syllables:(t,e,n)=>e.eq(n).syllables(),sentence:(t,e,n)=>e.eq(n).fullSentence().text(),dirty:t=>t.some(e=>e.dirty===!0)};Il.sentences=Il.sentence;Il.clean=Il.normal;Il.reduced=Il.root;const Ede=function(t,e){return e=e||{},typeof e=="string"&&(e={}),e=Object.assign({},wde,e),e.offset&&t.compute("offset"),t.docs.map((n,r)=>{let s={};return Object.keys(e).forEach(i=>{e[i]&&Il[i]&&(s[i]=Il[i](n,t,r))}),s})},OC={json:function(t){let e=Ede(this,t);return typeof t=="number"?e[t]:e}};OC.data=OC.json;const kde=OC,Nde=()=>typeof window<"u"&&window.document,Cde=function(t){let e=this.methods.one.debug||{};return t&&e.hasOwnProperty(t)?(e[t](this),this):Nde()?(e.clientSide(this),this):(e.tags(this),this)},_de=Cde,Sde=function(t){let e=t.pre||"",n=t.post||"";return e+t.text+n},Tde=function(t,e){let n={};return Object.keys(e).forEach(r=>{t.match(r).fullPointer.forEach(i=>{n[i[3]]={fn:e[r],end:i[2]}})}),n},$de=function(t,e){let n=Tde(t,e),r="";return t.docs.forEach((s,i)=>{for(let o=0;o<s.length;o+=1){let a=s[o];if(n.hasOwnProperty(a.id)){let{fn:l,end:c}=n[a.id],u=t.update([[i,o,c]]);r+=s[o].pre||"",r+=l(u),o=c-1,r+=s[o].post||""}else r+=Sde(a)}}),r},I8=$de,Ide=t=>Object.prototype.toString.call(t)==="[object Object]",Ade=function(t){let e={};return t.forEach(r=>{e[r]=e[r]||0,e[r]+=1}),Object.keys(e).map(r=>({normal:r,count:e[r]})).sort((r,s)=>r.count>s.count?-1:0)},Rde=function(t){if(Ide(t))return I8(this,t);if(t==="text")return this.text();if(t==="normal")return this.text("normal");if(t==="root")return this.text("root");if(t==="machine"||t==="reduced")return this.text("machine");if(t==="hash"||t==="md5")return e$(this.text());if(t==="json")return this.json();if(t==="offset"||t==="offsets")return this.compute("offset"),this.json({offset:!0});if(t==="array")return this.docs.map(n=>n.reduce((r,s)=>r+s.pre+s.text+s.post,"").trim()).filter(n=>n);if(t==="freq"||t==="frequency"||t==="topk")return Ade(this.json({normal:!0}).map(e=>e.normal));if(t==="terms"){let e=[];return this.docs.forEach(n=>{let r=n.map(s=>s.text);r=r.filter(s=>s),e=e.concat(r)}),e}return t==="tags"?this.docs.map(e=>e.reduce((n,r)=>(n[r.implicit||r.normal]=Array.from(r.tags),n),{})):t==="debug"?this.debug():this.text()},Pde={debug:_de,out:Rde,wrap:function(t){return I8(this,t)}},Dde=Pde,Ode=t=>Object.prototype.toString.call(t)==="[object Object]",Lde={text:function(t){let e={};if(t&&typeof t=="string"&&_1.hasOwnProperty(t)?e=Object.assign({},_1[t]):t&&Ode(t)&&(e=Object.assign({},t)),e.keepSpace===void 0&&!this.isFull()&&(e.keepSpace=!1),e.keepEndPunct===void 0&&this.pointer){let n=this.pointer[0];n&&n[1]?e.keepEndPunct=!1:e.keepEndPunct=!0}return e.keepPunct===void 0&&(e.keepPunct=!0),e.keepSpace===void 0&&(e.keepSpace=!0),vde(this.docs,e)}},Mde=Object.assign({},Dde,Lde,kde,pde),zde=function(t){Object.assign(t.prototype,Mde)},Fde=zde,Bde=function(t){console.log("%c -=-=- ","background-color:#6699cc;"),t.forEach(e=>{console.groupCollapsed(e.text());let r=e.docs[0].map(s=>{let i=s.text||"-";s.implicit&&(i="["+s.implicit+"]");let o="["+Array.from(s.tags).join(", ")+"]";return{text:i,tags:o}});console.table(r,["text","tags"]),console.groupEnd()})},Vde=Bde,Ya="\x1B[0m",jde={green:t=>"\x1B[32m"+t+Ya,red:t=>"\x1B[31m"+t+Ya,blue:t=>"\x1B[34m"+t+Ya,magenta:t=>"\x1B[35m"+t+Ya,cyan:t=>"\x1B[36m"+t+Ya,yellow:t=>"\x1B[33m"+t+Ya,black:t=>"\x1B[30m"+t+Ya,dim:t=>"\x1B[2m"+t+Ya,i:t=>"\x1B[3m"+t+Ya},Ei=jde,Ude=function(t,e){return e.one.tagSet&&(t=t.map(n=>{if(!e.one.tagSet.hasOwnProperty(n))return n;const r=e.one.tagSet[n].color||"blue";return Ei[r](n)})),t.join(", ")},Hde=function(t){let{docs:e,model:n}=t;e.length===0&&console.log(Ei.blue(`
     `)),e.forEach(r=>{console.log(Ei.blue(`
  `)),r.forEach(s=>{let i=[...s.tags||[]],o=s.text||"-";s.sense&&(o=`{${s.normal}/${s.sense}}`),s.implicit&&(o="["+s.implicit+"]"),o=Ei.yellow(o);let a="'"+o+"'";if(s.reference){let c=t.update([s.reference]).text("normal");a+=` - ${Ei.dim(Ei.i("["+c+"]"))}`}a=a.padEnd(18);let l=Ei.blue("   ")+Ei.i(a)+"  - "+Ude(i,n);console.log(l)})}),console.log(`
`)},Gde=Hde,Wde=function(t){let{docs:e}=t;console.log(""),e.forEach(n=>{let r=[];n.forEach(s=>{s.chunk==="Noun"?r.push(Ei.blue(s.implicit||s.normal)):s.chunk==="Verb"?r.push(Ei.green(s.implicit||s.normal)):s.chunk==="Adjective"?r.push(Ei.yellow(s.implicit||s.normal)):s.chunk==="Pivot"?r.push(Ei.red(s.implicit||s.normal)):r.push(s.implicit||s.normal)}),console.log(r.join(" "),`
`)}),console.log(`
`)},qde=Wde,Kde=(t,e,n)=>{let r=n*9,s=e.start+r,i=s+e.length,o=t.substring(0,s),a=t.substring(s,i),l=t.substring(i,t.length);return[o,a,l]},Zde=function(t,e,n){let r=Kde(t,e,n);return`${r[0]}${Ei.blue(r[1])}${r[2]}`},Xde=function(t){if(!t.found)return;let e={};t.fullPointer.forEach(n=>{e[n[0]]=e[n[0]]||[],e[n[0]].push(n)}),Object.keys(e).forEach(n=>{let s=t.update([[Number(n)]]).text();t.update(e[n]).json({offset:!0}).forEach((a,l)=>{s=Zde(s,a.offset,l)}),console.log(s)}),console.log(`
`)},Yde=Xde,Jde={tags:Gde,clientSide:Vde,chunks:qde,highlight:Yde},Qde=Jde,ehe={api:Fde,methods:{one:{hash:e$,debug:Qde}}},A8=function(t,e){if(t[0]!==e[0])return!1;let[,n,r]=t,[,s,i]=e;return n<=s&&r>s||s<=n&&i>n},the=function(t){let e=t[0][1],n=t[0][2];return t.forEach(r=>{r[1]<e&&(e=r[1]),r[2]>n&&(n=r[2])}),[t[0][0],e,n]},Gx=function(t){let e={};return t.forEach(n=>{e[n[0]]=e[n[0]]||[],e[n[0]].push(n)}),e},nhe=function(t){let e={};for(let n=0;n<t.length;n+=1)e[t[n].join(",")]=t[n];return Object.values(e)},rhe=function(t,e){let[n,r]=t,s=e[1],i=e[2],o={};if(r<s){let a=s<t[2]?s:t[2];o.before=[n,r,a]}return o.match=e,t[2]>i&&(o.after=[n,i,t[2]]),o},she=function(t,e){return t[1]<=e[1]&&e[2]<=t[2]},ihe=function(t,e){let n=Gx(e),r=[];return t.forEach(s=>{let[i]=s,o=n[i]||[];if(o=o.filter(l=>she(s,l)),o.length===0){r.push({passthrough:s});return}o=o.sort((l,c)=>l[1]-c[1]);let a=s;o.forEach((l,c)=>{let u=rhe(a,l);o[c+1]?(r.push({before:u.before,match:u.match}),u.after&&(a=u.after)):r.push(u)})}),r},R8=ihe,ohe=20,ahe=function(t,e,n){for(let r=0;r<ohe;r+=1){if(e[n-r]){let s=e[n-r].findIndex(i=>i.id===t);if(s!==-1)return[n-r,s]}if(e[n+r]){let s=e[n+r].findIndex(i=>i.id===t);if(s!==-1)return[n+r,s]}}return null},lhe=function(t,e){let[n,r,,,s]=t,i=e[n],o=i.findIndex(a=>a.id===s);return o===-1?(t[2]=e[n].length,t[4]=i.length?i[i.length-1].id:null):t[2]=o,e[n].slice(r,t[2]+1)},che=function(t,e){let n=[];return t.forEach((r,s)=>{if(!r)return;let[i,o,a,l,c]=r,u=e[i]||[];if(o===void 0&&(o=0),a===void 0&&(a=u.length),l&&(!u[o]||u[o].id!==l)){let h=ahe(l,e,i);if(h!==null){let m=a-o;u=e[h[0]].slice(h[1],h[1]+m);let p=u[0]?u[0].id:null;t[s]=[h[0],h[1],h[1]+m,p]}}else u=u.slice(o,a);u.length!==0&&o!==a&&(c&&u[u.length-1].id!==c&&(u=lhe(r,e)),n.push(u))}),n=n.filter(r=>r.length>0),n},uhe=che,dhe=function(t){let e=[];for(let n=0;n<t.length;n+=1)for(let r=0;r<t[n].length;r+=1)e.push(t[n][r]);return e},hhe={one:{termList:dhe,getDoc:uhe,pointer:{indexN:Gx,splitAll:R8}}},fhe=function(t,e){let n=t.concat(e),r=Gx(n),s=[];return n.forEach(i=>{let[o]=i;if(r[o].length===1){s.push(i);return}let a=r[o].filter(c=>A8(i,c));a.push(i);let l=the(a);s.push(l)}),s=nhe(s),s},P8=fhe,mhe=function(t,e){let n=[];return R8(t,e).forEach(s=>{s.passthrough&&n.push(s.passthrough),s.before&&n.push(s.before),s.after&&n.push(s.after)}),n},D8=mhe,phe=function(t,e){let n=t[1]<e[1]?e[1]:t[1],r=t[2]>e[2]?e[2]:t[2];return n<r?[t[0],n,r]:null},ghe=function(t,e){let n=Gx(e),r=[];return t.forEach(s=>{let i=n[s[0]]||[];i=i.filter(o=>A8(s,o)),i.length!==0&&i.forEach(o=>{let a=phe(s,o);a&&r.push(a)})}),r},yhe=ghe,bhe=function(t){return Object.prototype.toString.call(t)==="[object Array]"},t$=(t,e)=>typeof t=="string"||bhe(t)?e.match(t):t||e.none(),c0=function(t,e){return t.map(n=>{let[r,s]=n;return e[r]&&e[r][s]&&(n[3]=e[r][s].id),n})},Da={};Da.union=function(t){t=t$(t,this);let e=P8(this.fullPointer,t.fullPointer);return e=c0(e,this.document),this.toView(e)};Da.and=Da.union;Da.intersection=function(t){t=t$(t,this);let e=yhe(this.fullPointer,t.fullPointer);return e=c0(e,this.document),this.toView(e)};Da.not=function(t){t=t$(t,this);let e=D8(this.fullPointer,t.fullPointer);return e=c0(e,this.document),this.toView(e)};Da.difference=Da.not;Da.complement=function(){let t=this.all(),e=D8(t.fullPointer,this.fullPointer);return e=c0(e,this.document),this.toView(e)};Da.settle=function(){let t=this.fullPointer;return t.forEach(e=>{t=P8(t,[e])}),t=c0(t,this.document),this.update(t)};const vhe=function(t){Object.assign(t.prototype,Da)},xhe=vhe,whe={methods:hhe,api:xhe},Ehe={buildNet:function(t){let n=this.methods().one.buildNet(t,this.world());return n.isNet=!0,n}},khe=function(t){t.prototype.sweep=function(e,n={}){const{world:r,docs:s}=this,{methods:i}=r;let o=i.one.bulkMatch(s,e,this.methods,n);n.tagger!==!1&&i.one.bulkTagger(o,s,this.world),o=o.map(l=>{let c=l.pointer,u=s[c[0]][c[1]],h=c[2]-c[1];return u.index&&(l.pointer=[u.index[0],u.index[1],c[1]+h]),l});let a=o.map(l=>l.pointer);return o=o.map(l=>(l.view=this.update([l.pointer]),delete l.regs,delete l.needs,delete l.pointer,delete l._expanded,l)),{view:this.update(a),found:o}}},Nhe=khe,LC=function(t){return t.optional===!0||t.negative===!0?null:t.tag?"#"+t.tag:t.word?t.word:t.switch?`%${t.switch}%`:null},Che=function(t){let e=[];return t.forEach(n=>{e.push(LC(n)),n.operator==="and"&&n.choices&&n.choices.forEach(r=>{r.forEach(s=>{e.push(LC(s))})})}),e.filter(n=>n)},_he=function(t){let e=[],n=0;return t.forEach(r=>{r.operator==="or"&&!r.optional&&!r.negative&&(r.fastOr&&Array.from(r.fastOr).forEach(s=>{e.push(s)}),r.choices&&r.choices.forEach(s=>{s.forEach(i=>{let o=LC(i);o&&e.push(o)})}),n+=1)}),{wants:e,count:n}},She=function(t,e){const n=e.methods.one.parseMatch;return t.forEach(r=>{r.regs=n(r.match,{},e),typeof r.ifNo=="string"&&(r.ifNo=[r.ifNo]),r.notIf&&(r.notIf=n(r.notIf,{},e)),r.needs=Che(r.regs);let{wants:s,count:i}=_he(r.regs);r.wants=s,r.minWant=i,r.minWords=r.regs.filter(o=>!o.optional).length}),t},The=She,$he=function(t,e){t=The(t,e);let n={};t.forEach(s=>{s.needs.forEach(i=>{n[i]=Array.isArray(n[i])?n[i]:[],n[i].push(s)}),s.wants.forEach(i=>{n[i]=Array.isArray(n[i])?n[i]:[],n[i].push(s)})}),Object.keys(n).forEach(s=>{let i={};n[s]=n[s].filter(o=>typeof i[o.match]=="boolean"?!1:(i[o.match]=!0,!0))});let r=t.filter(s=>s.needs.length===0&&s.wants.length===0);return{hooks:n,always:r}},Ihe=$he,Ahe=function(t,e){return t.map((n,r)=>{let s=[];Object.keys(e).forEach(o=>{t[r].has(o)&&(s=s.concat(e[o]))});let i={};return s=s.filter(o=>typeof i[o.match]=="boolean"?!1:(i[o.match]=!0,!0)),s})},Rhe=Ahe,Phe=function(t,e){return t.map((n,r)=>{let s=e[r];return n=n.filter(i=>i.needs.every(o=>s.has(o))),n=n.filter(i=>!(i.ifNo!==void 0&&i.ifNo.some(o=>s.has(o))===!0)),n=n.filter(i=>i.wants.length===0?!0:i.wants.filter(a=>s.has(a)).length>=i.minWant),n})},Dhe=Phe,Ohe=function(t,e,n,r,s){let i=[];for(let o=0;o<t.length;o+=1)for(let a=0;a<t[o].length;a+=1){let l=t[o][a],c=r.one.match([e[o]],l);if(c.ptrs.length>0&&(c.ptrs.forEach(u=>{u[0]=o;let h=Object.assign({},l,{pointer:u});l.unTag!==void 0&&(h.unTag=l.unTag),i.push(h)}),s.matchOne===!0))return[i[0]]}return i},Lhe=Ohe,Mhe=function(t,e){return t.map((n,r)=>{let s=e[r].length;return n=n.filter(i=>s>=i.minWords),n})},zhe=function(t,e,n,r={}){let s=n.one.cacheDoc(t),i=Rhe(s,e.hooks);return i=Dhe(i,s),e.always.length>0&&(i=i.map(a=>a.concat(e.always))),i=Mhe(i,t),Lhe(i,t,s,n,r)},Fhe=zhe,Bhe=function(t,e,n){let r=n.one.tagSet;if(!r.hasOwnProperty(e))return!0;let s=r[e].not||[];for(let i=0;i<t.length;i+=1){let o=t[i];for(let a=0;a<s.length;a+=1)if(o.tags.has(s[a])===!0)return!1}return!0},Vhe=Bhe,jhe=function(t,e,n){const{model:r,methods:s}=n,{getDoc:i,setTag:o,unTag:a}=s.one,l=s.two.looksPlural;return t.length===0?t:((typeof process>"u"||!process.env?self.env||{}:process.env).DEBUG_TAGS&&console.log(`

  \x1B[32m ${t.length} post-tagger:\x1B[0m`),t.map(u=>{if(!u.tag&&!u.chunk&&!u.unTag)return;let h=u.reason||u.match,m=i([u.pointer],e)[0];if(!(u.safe===!0&&(Vhe(m,u.tag,r)===!1||m[m.length-1].post==="-"))){if(u.tag!==void 0){if(o(m,u.tag,n,u.safe,`[post] '${h}'`),u.tag==="Noun"&&l){let p=m[m.length-1];l(p.text)?o([p],"Plural",n,u.safe,"quick-plural"):o([p],"Singular",n,u.safe,"quick-singular")}u.freeze===!0&&m.forEach(p=>p.frozen=!0)}u.unTag!==void 0&&a(m,u.unTag,n,u.safe,h),u.chunk&&m.forEach(p=>p.chunk=u.chunk)}}))},Uhe=jhe,Hhe={buildNet:Ihe,bulkMatch:Fhe,bulkTagger:Uhe},Ghe={lib:Ehe,api:Nhe,methods:{one:Hhe}},O8=/ /,tO=function(t,e){e==="Noun"&&(t.chunk=e),e==="Verb"&&(t.chunk=e)},L8=function(t,e,n,r){if(t.tags.has(e)===!0||e===".")return null;t.frozen===!0&&(r=!0);let s=n[e];if(s){if(s.not&&s.not.length>0)for(let i=0;i<s.not.length;i+=1){if(r===!0&&t.tags.has(s.not[i]))return null;t.tags.delete(s.not[i])}if(s.parents&&s.parents.length>0)for(let i=0;i<s.parents.length;i+=1)t.tags.add(s.parents[i]),tO(t,s.parents[i])}return t.tags.add(e),t.dirty=!0,tO(t,e),!0},Whe=function(t,e,n,r){let s=e.split(O8);t.forEach((i,o)=>{let a=s[o];a&&(a=a.replace(/^#/,""),L8(i,a,n,r))})},qhe=function(t){return Object.prototype.toString.call(t)==="[object Array]"},Khe=(t,e,n="")=>{const r=o=>"\x1B[33m\x1B[3m"+o+"\x1B[0m",s=o=>"\x1B[3m"+o+"\x1B[0m";let i=t.map(o=>o.text||"["+o.implicit+"]").join(" ");typeof e!="string"&&e.length>2&&(e=e.slice(0,2).join(", #")+" +"),e=typeof e!="string"?e.join(", #"):e,console.log(` ${r(i).padEnd(24)} \x1B[32m\x1B[0m #${e.padEnd(22)}  ${s(n)}`)},M8=function(t,e,n={},r,s){const i=n.model.one.tagSet||{};if(!e)return;const o=typeof process>"u"||!process.env?self.env||{}:process.env;if(o&&o.DEBUG_TAGS&&Khe(t,e,s),qhe(e)===!0){e.forEach(a=>M8(t,a,n,r));return}if(typeof e!="string"){console.warn(`compromise: Invalid tag '${e}'`);return}if(e=e.trim(),O8.test(e)){Whe(t,e,i,r);return}e=e.replace(/^#/,"");for(let a=0;a<t.length;a+=1)L8(t[a],e,i,r)},Zhe=M8,Xhe=function(t,e,n){e=e.trim().replace(/^#/,"");for(let r=0;r<t.length;r+=1){let s=t[r];if(s.frozen===!0)continue;if(e==="*"){s.tags.clear();continue}let i=n[e];if(i&&i.children.length>0)for(let o=0;o<i.children.length;o+=1)s.tags.delete(i.children[o]);s.tags.delete(e)}},Yhe=Xhe,Jhe=function(t,e,n){if(!n.hasOwnProperty(e))return!0;let r=n[e].not||[];for(let s=0;s<r.length;s+=1)if(t.tags.has(r[s]))return!1;return!0},Qhe=Jhe,gc=function(t){return t.children=t.children||[],t._cache=t._cache||{},t.props=t.props||{},t._cache.parents=t._cache.parents||[],t._cache.children=t._cache.children||[],t},efe=/^ *(#|\/\/)/,tfe=function(t){let e=t.trim().split(/->/),n=[];e.forEach(s=>{n=n.concat(function(i){if(!(i=i.trim()))return null;if(/^\[/.test(i)&&/\]$/.test(i)){let o=(i=(i=i.replace(/^\[/,"")).replace(/\]$/,"")).split(/,/);return o=o.map(a=>a.trim()).filter(a=>a),o=o.map(a=>gc({id:a})),o}return[gc({id:i})]}(s))}),n=n.filter(s=>s);let r=n[0];for(let s=1;s<n.length;s+=1)r.children.push(n[s]),r=n[s];return n[0]},cl=(t,e)=>{let n=[],r=[t];for(;r.length>0;){let s=r.pop();n.push(s),s.children&&s.children.forEach(i=>{e&&e(s,i),r.push(i)})}return n},n$=t=>Object.prototype.toString.call(t)==="[object Array]",Eb=t=>(t=t||"").trim(),nfe=function(t=[]){return typeof t=="string"?function(n){let r=n.split(/\r?\n/),s=[];r.forEach(o=>{if(!o.trim()||efe.test(o))return;let a=(l=>{const c=/^( {2}|\t)/;let u=0;for(;c.test(l);)l=l.replace(c,""),u+=1;return u})(o);s.push({indent:a,node:tfe(o)})});let i=function(o){let a={children:[]};return o.forEach((l,c)=>{l.indent===0?a.children=a.children.concat(l.node):o[c-1]&&function(u,h){let m=u[h].indent;for(;h>=0;h-=1)if(u[h].indent<m)return u[h];return u[0]}(o,c).node.children.push(l.node)}),a}(s);return i=gc(i),i}(t):n$(t)?function(n){let r={};n.forEach(i=>{r[i.id]=i});let s=gc({});return n.forEach(i=>{if((i=gc(i)).parent)if(r.hasOwnProperty(i.parent)){let o=r[i.parent];delete i.parent,o.children.push(i)}else console.warn(`[Grad] - missing node '${i.parent}'`);else s.children.push(i)}),s}(t):(cl(e=t).forEach(gc),e);var e},rfe=t=>"\x1B[31m"+t+"\x1B[0m",sfe=t=>"\x1B[2m"+t+"\x1B[0m",MC=function(t,e){let n="-> ";e&&(n=sfe(" "));let r="";return cl(t).forEach((s,i)=>{let o=s.id||"";if(e&&(o=rfe(o)),i===0&&!s.id)return;let a=s._cache.parents.length;r+="    ".repeat(a)+n+o+`
`}),r},nO=function(t){let e=cl(t);e.forEach(r=>{delete(r=Object.assign({},r)).children});let n=e[0];return n&&!n.id&&Object.keys(n.props).length===0&&e.shift(),e},rO={text:MC,txt:MC,array:nO,flat:nO},sO=function(t,e){return e==="nested"||e==="json"?t:e==="debug"?(console.log(MC(t,!0)),null):rO.hasOwnProperty(e)?rO[e](t):t},dk=t=>{cl(t,(e,n)=>{e.id&&(e._cache.parents=e._cache.parents||[],n._cache.parents=e._cache.parents.concat([e.id]))})},ife=(t,e)=>(Object.keys(e).forEach(n=>{if(e[n]instanceof Set){let r=t[n]||new Set;t[n]=new Set([...r,...e[n]])}else if((r=>r&&typeof r=="object"&&!Array.isArray(r))(e[n])){let r=t[n]||{};t[n]=Object.assign({},e[n],r)}else n$(e[n])?t[n]=e[n].concat(t[n]||[]):t[n]===void 0&&(t[n]=e[n])}),t),ofe=/\//;let afe=class kv{constructor(e={}){Object.defineProperty(this,"json",{enumerable:!1,value:e,writable:!0})}get children(){return this.json.children}get id(){return this.json.id}get found(){return this.json.id||this.json.children.length>0}props(e={}){let n=this.json.props||{};return typeof e=="string"&&(n[e]=!0),this.json.props=Object.assign(n,e),this}get(e){if(e=Eb(e),!ofe.test(e)){let r=this.json.children.find(s=>s.id===e);return new kv(r)}let n=((r,s)=>{let i=(o=>typeof o!="string"?o:(o=o.replace(/^\//,"")).split(/\//))(s=s||"");for(let o=0;o<i.length;o+=1){let a=r.children.find(l=>l.id===i[o]);if(!a)return null;r=a}return r})(this.json,e)||gc({});return new kv(n)}add(e,n={}){if(n$(e))return e.forEach(s=>this.add(Eb(s),n)),this;e=Eb(e);let r=gc({id:e,props:n});return this.json.children.push(r),new kv(r)}remove(e){return e=Eb(e),this.json.children=this.json.children.filter(n=>n.id!==e),this}nodes(){return cl(this.json).map(e=>(delete(e=Object.assign({},e)).children,e))}cache(){return(e=>{let n=cl(e,(s,i)=>{s.id&&(s._cache.parents=s._cache.parents||[],s._cache.children=s._cache.children||[],i._cache.parents=s._cache.parents.concat([s.id]))}),r={};n.forEach(s=>{s.id&&(r[s.id]=s)}),n.forEach(s=>{s._cache.parents.forEach(i=>{r.hasOwnProperty(i)&&r[i]._cache.children.push(s.id)})}),e._cache.children=Object.keys(r)})(this.json),this}list(){return cl(this.json)}fillDown(){var e;return e=this.json,cl(e,(n,r)=>{r.props=ife(r.props,n.props)}),this}depth(){dk(this.json);let e=cl(this.json),n=e.length>1?1:0;return e.forEach(r=>{if(r._cache.parents.length===0)return;let s=r._cache.parents.length+1;s>n&&(n=s)}),n}out(e){return dk(this.json),sO(this.json,e)}debug(){return dk(this.json),sO(this.json,"debug"),this}};const z8=function(t){let e=nfe(t);return new afe(e)};z8.prototype.plugin=function(t){t(this)};const lfe={Noun:"blue",Verb:"green",Negative:"green",Date:"red",Value:"red",Adjective:"magenta",Preposition:"cyan",Conjunction:"cyan",Determiner:"cyan",Hyphenated:"cyan",Adverb:"cyan"},th=lfe,cfe=function(t){if(th.hasOwnProperty(t.id))return th[t.id];if(th.hasOwnProperty(t.is))return th[t.is];let e=t._cache.parents.find(n=>th[n]);return th[e]},ufe=function(t){const e={};return t.forEach(n=>{let{not:r,also:s,is:i,novel:o}=n.props,a=n._cache.parents;s&&(a=a.concat(s)),e[n.id]={is:i,not:r,novel:o,also:s,parents:a,children:n._cache.children,color:cfe(n)}}),Object.keys(e).forEach(n=>{let r=new Set(e[n].not);e[n].not.forEach(s=>{e[s]&&e[s].children.forEach(i=>r.add(i))}),e[n].not=Array.from(r)}),e},dfe=ufe,iO=function(t){return t?typeof t=="string"?[t]:t:[]},hfe=function(t,e){return Object.keys(t).forEach(n=>{t[n].isA&&(t[n].is=t[n].isA),t[n].notA&&(t[n].not=t[n].notA),t[n].is&&typeof t[n].is=="string"&&!e.hasOwnProperty(t[n].is)&&!t.hasOwnProperty(t[n].is)&&(t[t[n].is]={}),t[n].not&&typeof t[n].not=="string"&&!t.hasOwnProperty(t[n].not)&&!e.hasOwnProperty(t[n].not)&&!t.hasOwnProperty(t[n].not)&&(t[t[n].not]={})}),t},ffe=function(t,e){return t=hfe(t,e),Object.keys(t).forEach(n=>{t[n].children=iO(t[n].children),t[n].not=iO(t[n].not)}),Object.keys(t).forEach(n=>{(t[n].not||[]).forEach(s=>{t[s]&&t[s].not&&t[s].not.push(n)})}),t},mfe=ffe,pfe=function(t){const e=Object.keys(t).map(r=>{let s=t[r];const i={not:new Set(s.not),also:s.also,is:s.is,novel:s.novel};return{id:r,parent:s.is,props:i,children:[]}});return z8(e).cache().fillDown().out("array")},gfe=function(t){return Object.keys(t).forEach(e=>{t[e]=Object.assign({},t[e]),t[e].novel=!0}),t},yfe=function(t,e){Object.keys(e).length>0&&(t=gfe(t)),t=mfe(t,e);let n=Object.assign({},e,t);const r=pfe(n);return dfe(r)},bfe=yfe,vfe={one:{setTag:Zhe,unTag:Yhe,addTags:bfe,canBe:Qhe}},oO=function(t){return Object.prototype.toString.call(t)==="[object Array]"},xfe={tag:function(t,e="",n){if(!this.found||!t)return this;let r=this.termList();if(r.length===0)return this;const{methods:s,verbose:i,world:o}=this;return i===!0&&console.log(" +  ",t,e||""),oO(t)?t.forEach(a=>s.one.setTag(r,a,o,n,e)):s.one.setTag(r,t,o,n,e),this.uncache(),this},tagSafe:function(t,e=""){return this.tag(t,e,!0)},unTag:function(t,e){if(!this.found||!t)return this;let n=this.termList();if(n.length===0)return this;const{methods:r,verbose:s,model:i}=this;s===!0&&console.log(" -  ",t,e||"");let o=i.one.tagSet;return oO(t)?t.forEach(a=>r.one.unTag(n,a,o)):r.one.unTag(n,t,o),this.uncache(),this},canBe:function(t){t=t.replace(/^#/,"");let e=this.model.one.tagSet,n=this.methods.one.canBe,r=[];this.document.forEach((i,o)=>{i.forEach((a,l)=>{n(a,t,e)||r.push([o,l,l+1])})});let s=this.update(r);return this.difference(s)}},wfe=xfe,Efe=function(t){Object.assign(t.prototype,wfe)},kfe=Efe,Nfe=function(t){const{model:e,methods:n}=this.world(),r=e.one.tagSet,s=n.one.addTags;let i=s(t,r);return e.one.tagSet=i,this},Cfe={addTags:Nfe},aO=new Set(["Auxiliary","Possessive"]),_fe=function(t,e){return t=t.sort((n,r)=>{if(aO.has(n)||!e.hasOwnProperty(r))return 1;if(aO.has(r)||!e.hasOwnProperty(n))return-1;let s=e[n].children||[],i=s.length;s=e[r].children||[];let o=s.length;return i-o}),t},Sfe=function(t){const{document:e,world:n}=t,r=n.model.one.tagSet;e.forEach(s=>{s.forEach(i=>{let o=Array.from(i.tags);i.tagRank=_fe(o,r)})})},Tfe=Sfe,$fe={model:{one:{tagSet:{}}},compute:{tagRank:Tfe},methods:vfe,api:kfe,lib:Cfe},Ife=/([.!?\u203D\u2E18\u203C\u2047-\u2049\u3002]+\s)/g,Afe=/^[.!?\u203D\u2E18\u203C\u2047-\u2049\u3002]+\s$/,Rfe=/((?:\r?\n|\r)+)/,Pfe=function(t){let e=[],n=t.split(Rfe);for(let r=0;r<n.length;r++){let s=n[r].split(Ife);for(let i=0;i<s.length;i++)s[i+1]&&Afe.test(s[i+1])===!0&&(s[i]+=s[i+1],s[i+1]=""),s[i]!==""&&e.push(s[i])}return e},Dfe=Pfe,Ofe=/[a-z0-9\u00C0-\u00FF\u00a9\u00ae\u2000-\u3300\ud000-\udfff]/i,Lfe=/\S/,Mfe=function(t){let e=[];for(let n=0;n<t.length;n++){let r=t[n];if(!(r===void 0||r==="")){if(Lfe.test(r)===!1||Ofe.test(r)===!1){if(e[e.length-1]){e[e.length-1]+=r;continue}else if(t[n+1]){t[n+1]=r+t[n+1];continue}}e.push(r)}}return e},zfe=Mfe,Ffe=function(t,e){const n=e.methods.one.tokenize.isSentence,r=e.model.one.abbreviations||new Set;let s=[];for(let i=0;i<t.length;i++){let o=t[i];t[i+1]&&n(o,r)===!1?t[i+1]=o+(t[i+1]||""):o&&o.length>0&&(s.push(o),t[i]="")}return s},Bfe=Ffe,lO=280,F8={'"':'"',"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},Vfe=RegExp("["+Object.keys(F8).join("")+"]","g"),jfe=RegExp("["+Object.values(F8).join("")+"]","g"),cO=function(t){if(!t)return!1;let e=t.match(jfe);return e!==null&&e.length===1},Ufe=function(t){let e=[];for(let n=0;n<t.length;n+=1){let s=t[n].match(Vfe);if(s!==null&&s.length===1){if(cO(t[n+1])&&t[n+1].length<lO){t[n]+=t[n+1],e.push(t[n]),t[n+1]="",n+=1;continue}if(cO(t[n+2])){let i=t[n+1]+t[n+2];if(i.length<lO){t[n]+=i,e.push(t[n]),t[n+1]="",t[n+2]="",n+=2;continue}}}e.push(t[n])}return e},Hfe=Ufe,Gfe=250,uO=/\(/g,Wfe=/\)/g,qfe=function(t){let e=[];for(let n=0;n<t.length;n+=1){let s=t[n].match(uO);if(s!==null&&s.length===1&&t[n+1]&&t[n+1].length<Gfe&&t[n+1].match(Wfe)!==null&&s.length===1&&!uO.test(t[n+1])){t[n]+=t[n+1],e.push(t[n]),t[n+1]="",n+=1;continue}e.push(t[n])}return e},Kfe=qfe,Zfe=/\S/,dO=/^\s+/,Xfe=function(t,e){if(t=t||"",t=String(t),!t||typeof t!="string"||Zfe.test(t)===!1)return[];t=t.replace(""," ");let n=Dfe(t),r=zfe(n);if(r=Bfe(r,e),r=Hfe(r),r=Kfe(r),r.length===0)return[t];for(let s=1;s<r.length;s+=1){let i=r[s].match(dO);i!==null&&(r[s-1]+=i[0],r[s]=r[s].replace(dO,""))}return r},Yfe=Xfe,Jfe=function(t,e){let n=t.split(/[-]/);if(n.length<=1)return!1;const{prefixes:r,suffixes:s}=e.one;return n[0].length===1&&/[a-z]/i.test(n[0])||r.hasOwnProperty(n[0])||(n[1]=n[1].trim().replace(/[.?!]$/,""),s.hasOwnProperty(n[1]))?!1:/^([a-z\u00C0-\u00FF`"'/]+)[-]([a-z0-9\u00C0-\u00FF].*)/i.test(t)===!0||/^[('"]?([0-9]{1,4})[-]([a-z\u00C0-\u00FF`"'/-]+[)'"]?$)/i.test(t)===!0},Qfe=function(t){let e=[];const n=t.split(/[-]/);let r="-",s=t.match(/[-]/);s&&s[0]&&(r=s);for(let i=0;i<n.length;i++)i===n.length-1?e.push(n[i]):e.push(n[i]+r);return e},eme=function(t){const e=/^[0-9]{1,4}(:[0-9][0-9])?([a-z]{1,2})? ?[-] ?$/,n=/^[0-9]{1,4}([a-z]{1,2})? ?$/;for(let r=0;r<t.length-1;r+=1)t[r+1]&&e.test(t[r])&&n.test(t[r+1])&&(t[r]=t[r]+t[r+1],t[r+1]=null);return t},tme=eme,nme=/\p{L} ?\/ ?\p{L}+$/u,rme=function(t){for(let e=1;e<t.length-1;e++)nme.test(t[e])&&(t[e-1]+=t[e]+t[e+1],t[e]=null,t[e+1]=null);return t},sme=rme,ime=/\S/,ome=/^[!?.]+$/,ame=/(\S+)/;let zC=[".","?","!",":",";","-","","","--","...","(",")","[","]",'"',"'","`","","","*",""];zC=zC.reduce((t,e)=>(t[e]=!0,t),{});const lme=function(t){return Object.prototype.toString.call(t)==="[object Array]"},cme=function(t,e){let n=[],r=[];if(t=t||"",typeof t=="number"&&(t=String(t)),lme(t))return t;const s=t.split(ame);for(let o=0;o<s.length;o++){if(Jfe(s[o],e)===!0){r=r.concat(Qfe(s[o]));continue}r.push(s[o])}let i="";for(let o=0;o<r.length;o++){let a=r[o];ime.test(a)===!0&&zC.hasOwnProperty(a)===!1&&ome.test(a)===!1?(n.length>0?(n[n.length-1]+=i,n.push(a)):n.push(i+a),i=""):i+=a}return i&&(n.length===0&&(n[0]=""),n[n.length-1]+=i),n=sme(n),n=tme(n),n=n.filter(o=>o),n},ume=cme,hO=/\p{Letter}/u,kb=/[\p{Number}\p{Currency_Symbol}]/u,dme=/^[a-z]\.([a-z]\.)+/i,hme=/[sn][']$/,fme=function(t,e){let{prePunctuation:n,postPunctuation:r,emoticons:s}=e.one,i=t,o="",a="",l=Array.from(t);if(s.hasOwnProperty(t.trim()))return{str:t.trim(),pre:o,post:" "};let c=l.length;for(let u=0;u<c;u+=1){let h=l[0];if(n[h]!==!0){if((h==="+"||h==="-")&&kb.test(l[1])||h==="'"&&h.length===3&&kb.test(l[1])||hO.test(h)||kb.test(h))break;o+=l.shift()}}c=l.length;for(let u=0;u<c;u+=1){let h=l[l.length-1];if(r[h]!==!0){if(hO.test(h)||kb.test(h))break;h==="."&&dme.test(i)===!0||h==="'"&&hme.test(i)===!0||(a=l.pop()+a)}}return t=l.join(""),t===""&&(i=i.replace(/ *$/,u=>(a=u||"","")),t=i,o=""),{str:t,pre:o,post:a}},mme=fme,pme=(t,e)=>{let{str:n,pre:r,post:s}=mme(t,e);return{text:n,pre:r,post:s,tags:new Set}},gme=pme,yme=function(t,e){const n=e.model.one.unicode||{};t=t||"";let r=t.split("");return r.forEach((s,i)=>{n[s]&&(r[i]=n[s])}),r.join("")},bme=yme,vme=function(t){t=t||"",t=t.toLowerCase(),t=t.trim();let e=t;return t=t.replace(/[,;.!?]+$/,""),t=t.replace(/\u2026/g,"..."),t=t.replace(/\u2013/g,"-"),/^[:;]/.test(t)===!1&&(t=t.replace(/\.{3,}$/g,""),t=t.replace(/[",.!:;?)]+$/g,""),t=t.replace(/^['"(]+/g,"")),t=t.replace(/[\u200B-\u200D\uFEFF]/g,""),t=t.trim(),t===""&&(t=e),t=t.replace(/([0-9]),([0-9])/g,"$1$2"),t},xme=vme,wme=/([A-Z]\.)+[A-Z]?,?$/,Eme=/^[A-Z]\.,?$/,kme=/[A-Z]{2,}('s|,)?$/,Nme=/([a-z]\.)+[a-z]\.?$/,Cme=function(t){return wme.test(t)===!0||Nme.test(t)===!0||Eme.test(t)===!0||kme.test(t)===!0},_me=function(t){return Cme(t)&&(t=t.replace(/\./g,"")),t},Sme=_me,Tme=function(t,e){const n=e.methods.one.killUnicode;let r=t.text||"";r=xme(r),r=n(r,e),r=Sme(r),t.normal=r},B8=Tme,$me=function(t,e){const{methods:n,model:r}=e,{splitSentences:s,splitTerms:i,splitWhitespace:o}=n.one.tokenize;return t=t||"",t=s(t,e).map(l=>{let c=i(l,r);return c=c.map(u=>o(u,r)),c.forEach(u=>{B8(u,e)}),c}),t},Ime=$me,Ame=/[ .][A-Z]\.? *$/i,Rme=/(?:\u2026|\.{2,}) *$/,Pme=/\p{L}/u,Dme=/\. *$/,Ome=/^[A-Z]\. $/,Lme=function(t,e){if(Pme.test(t)===!1||Ame.test(t)===!0||t.length===3&&Ome.test(t)||Rme.test(t)===!0)return!1;let r=t.replace(/[.!?\u203D\u2E18\u203C\u2047-\u2049] *$/,"").split(" "),s=r[r.length-1].toLowerCase();return!(e.hasOwnProperty(s)===!0&&Dme.test(t)===!0)},Mme=Lme,zme={one:{killUnicode:bme,tokenize:{splitSentences:Yfe,isSentence:Mme,splitTerms:ume,splitWhitespace:gme,fromString:Ime}}},Fme={"&":"and","@":"at","%":"percent",plz:"please",bein:"being"},Bme=Fme,Vme=["approx","apt","bc","cyn","eg","esp","est","etc","ex","exp","prob","pron","gal","min","pseud","fig","jd","lat","lng","vol","fm","def","misc","plz","ea","ps","sec","pt","pref","pl","pp","qt","fr","sq","nee","ss","tel","temp","vet","ver","fem","masc","eng","adj","vb","rb","inf","situ","vivo","vitro","wr"],jme=["adj","adm","adv","asst","atty","bldg","brig","capt","cmdr","comdr","cpl","det","dr","esq","gen","gov","hon","jr","llb","lt","maj","messrs","mlle","mme","mr","mrs","ms","mstr","phd","prof","pvt","rep","reps","res","rev","sen","sens","sfc","sgt","sir","sr","supt","surg"],Ume=["jan","feb","mar","apr","jun","jul","aug","sep","sept","oct","nov","dec"],Hme=["ad","al","arc","ba","bl","ca","cca","col","corp","ft","fy","ie","lit","ma","md","pd","tce"],Gme=["dept","univ","assn","bros","inc","ltd","co"],Wme=["rd","st","dist","mt","ave","blvd","cl","cres","hwy","ariz","cal","calif","colo","conn","fla","fl","ga","ida","ia","kan","kans","minn","neb","nebr","okla","penna","penn","pa","dak","tenn","tex","ut","vt","va","wis","wisc","wy","wyo","usafa","alta","ont","que","sask"],qme=["dl","ml","gal","qt","pt","tbl","tsp","tbsp","km","dm","cm","mm","mi","td","hr","hrs","kg","hg","dg","cg","mg","g","lb","oz","sq ft","hz","mps","mph","kmph","kb","mb","tb","lx","lm","fl oz","yb"];let Kme=[[Vme],[qme,"Unit"],[Hme,"Noun"],[jme,"Honorific"],[Ume,"Month"],[Gme,"Organization"],[Wme,"Place"]],V8={},Nv={};Kme.forEach(t=>{t[0].forEach(e=>{V8[e]=!0,Nv[e]="Abbreviation",t[1]!==void 0&&(Nv[e]=[Nv[e],t[1]])})});const Zme=["anti","bi","co","contra","de","extra","infra","inter","intra","macro","micro","mis","mono","multi","peri","pre","pro","proto","pseudo","re","sub","supra","trans","tri","un","out","ex"].reduce((t,e)=>(t[e]=!0,t),{}),Xme={like:!0,ish:!0,less:!0,able:!0,elect:!0,type:!0,designate:!0};let fO={"!":"","?":"",'"':'"',"'":"","-":"",a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",I:"",i:"i",j:"",k:"",l:"",m:"",n:"",o:"",p:"",q:"",r:"",s:"",t:"",u:"",v:"",w:"",x:"",y:"",z:""},j8={};Object.keys(fO).forEach(function(t){fO[t].split("").forEach(function(e){j8[e]=t})});const Yme=j8,Jme={"#":!0,"@":!0,_:!0,"":!0,"":!0,"":!0,"":!0,"\uFEFF":!0},Qme={"%":!0,_:!0,"":!0,"":!0,"":!0,"":!0,"\uFEFF":!0},epe={"<3":!0,"</3":!0,"<\\3":!0,":^P":!0,":^p":!0,":^O":!0,":^3":!0},tpe={one:{aliases:Bme,abbreviations:V8,prefixes:Zme,suffixes:Xme,prePunctuation:Jme,postPunctuation:Qme,lexicon:Nv,unicode:Yme,emoticons:epe}},mO=/\//,npe=/[a-z]\.[a-z]/i,rpe=/[0-9]/,spe=function(t,e){let n=t.normal||t.text||t.machine;const r=e.model.one.aliases;if(r.hasOwnProperty(n)&&(t.alias=t.alias||[],t.alias.push(r[n])),mO.test(n)&&!npe.test(n)&&!rpe.test(n)){let s=n.split(mO);s.length<=3&&s.forEach(i=>{i=i.trim(),i!==""&&(t.alias=t.alias||[],t.alias.push(i))})}return t},ipe=spe,ope=/^\p{Letter}+-\p{Letter}+$/u,ape=function(t){let e=t.implicit||t.normal||t.text;e=e.replace(/[']s$/,""),e=e.replace(/s[']$/,"s"),e=e.replace(/([aeiou][ktrp])in'$/,"$1ing"),ope.test(e)&&(e=e.replace(/-/g,"")),e=e.replace(/^[#@]/,""),e!==t.normal&&(t.machine=e)},lpe=ape,cpe=function(t){let e=t.docs,n={};for(let r=0;r<e.length;r+=1)for(let s=0;s<e[r].length;s+=1){let i=e[r][s],o=i.machine||i.normal;n[o]=n[o]||0,n[o]+=1}for(let r=0;r<e.length;r+=1)for(let s=0;s<e[r].length;s+=1){let i=e[r][s],o=i.machine||i.normal;i.freq=n[o]}},upe=cpe,dpe=function(t){let e=0,n=0,r=t.document;for(let s=0;s<r.length;s+=1)for(let i=0;i<r[s].length;i+=1){let o=r[s][i];o.offset={index:n,start:e+o.pre.length,length:o.text.length},e+=o.pre.length+o.text.length+o.post.length,n+=1}},hpe=dpe,fpe=function(t){let e=t.document;for(let n=0;n<e.length;n+=1)for(let r=0;r<e[n].length;r+=1)e[n][r].index=[n,r]},mpe=fpe,ppe=function(t){let e=0,n=t.docs;for(let r=0;r<n.length;r+=1)for(let s=0;s<n[r].length;s+=1)n[r][s].normal!==""&&(e+=1,n[r][s].wordCount=e)},gpe=ppe,hk=function(t,e){let n=t.docs;for(let r=0;r<n.length;r+=1)for(let s=0;s<n[r].length;s+=1)e(n[r][s],t.world)},ype={alias:t=>hk(t,ipe),machine:t=>hk(t,lpe),normal:t=>hk(t,B8),freq:upe,offset:hpe,index:mpe,wordCount:gpe},bpe=ype,vpe={compute:bpe,methods:zme,model:tpe,hooks:["alias","machine","index","id"]},xpe=function(t){const e=t.model.one.typeahead,n=t.docs;if(n.length===0||Object.keys(e).length===0)return;let r=n[n.length-1]||[],s=r[r.length-1];if(!s.post&&e.hasOwnProperty(s.normal)){let i=e[s.normal];s.implicit=i,s.machine=i,s.typeahead=!0,t.compute.preTagger&&t.last().unTag("*").compute(["lexicon","preTagger"])}},wpe={typeahead:xpe},Epe=function(){const t=this.docs;if(t.length===0)return this;let e=t[t.length-1]||[],n=e[e.length-1];return n.typeahead===!0&&n.machine&&(n.text=n.machine,n.normal=n.machine),this},kpe=function(t){t.prototype.autoFill=Epe},Npe=kpe,Cpe=function(t,e,n){let r={},s=[],i=n.prefixes||{};return t.forEach(o=>{o=o.toLowerCase().trim();let a=o.length;e.max&&a>e.max&&(a=e.max);for(let l=e.min;l<a;l+=1){let c=o.substring(0,l);if(!(e.safe&&n.model.one.lexicon.hasOwnProperty(c))){if(i.hasOwnProperty(c)===!0){s.push(c);continue}if(r.hasOwnProperty(c)===!0){s.push(c);continue}r[c]=o}}}),r=Object.assign({},i,r),s.forEach(o=>{delete r[o]}),r},_pe=Cpe,Spe=t=>Object.prototype.toString.call(t)==="[object Object]",Tpe={safe:!0,min:3},$pe=function(t=[],e={}){let n=this.model();e=Object.assign({},Tpe,e),Spe(t)&&(Object.assign(n.one.lexicon,t),t=Object.keys(t));let r=_pe(t,e,this.world());return Object.keys(r).forEach(s=>{if(n.one.typeahead.hasOwnProperty(s)){delete n.one.typeahead[s];return}n.one.typeahead[s]=r[s]}),this},Ipe={typeahead:$pe},Ape={one:{typeahead:{}}},Rpe={model:Ape,api:Npe,lib:Ipe,compute:wpe,hooks:["typeahead"]};Xt.extend(Cle);Xt.extend(ehe);Xt.extend(lde);Xt.extend(whe);Xt.extend($fe);Xt.plugin(sce);Xt.extend(vpe);Xt.extend(lce);Xt.plugin(Aae);Xt.extend(Pce);Xt.extend(Rpe);Xt.extend(Ece);Xt.extend(Ghe);const U8={addendum:"addenda",corpus:"corpora",criterion:"criteria",curriculum:"curricula",genus:"genera",memorandum:"memoranda",opus:"opera",ovum:"ova",phenomenon:"phenomena",referendum:"referenda",alga:"algae",alumna:"alumnae",antenna:"antennae",formula:"formulae",larva:"larvae",nebula:"nebulae",vertebra:"vertebrae",analysis:"analyses",axis:"axes",diagnosis:"diagnoses",parenthesis:"parentheses",prognosis:"prognoses",synopsis:"synopses",thesis:"theses",neurosis:"neuroses",appendix:"appendices",index:"indices",matrix:"matrices",ox:"oxen",sex:"sexes",alumnus:"alumni",bacillus:"bacilli",cactus:"cacti",fungus:"fungi",hippopotamus:"hippopotami",libretto:"libretti",modulus:"moduli",nucleus:"nuclei",octopus:"octopi",radius:"radii",stimulus:"stimuli",syllabus:"syllabi",cookie:"cookies",calorie:"calories",auntie:"aunties",movie:"movies",pie:"pies",rookie:"rookies",tie:"ties",zombie:"zombies",leaf:"leaves",loaf:"loaves",thief:"thieves",foot:"feet",goose:"geese",tooth:"teeth",beau:"beaux",chateau:"chateaux",tableau:"tableaux",bus:"buses",gas:"gases",circus:"circuses",crisis:"crises",virus:"viruses",database:"databases",excuse:"excuses",abuse:"abuses",avocado:"avocados",barracks:"barracks",child:"children",clothes:"clothes",echo:"echoes",embargo:"embargoes",epoch:"epochs",deer:"deer",halo:"halos",man:"men",woman:"women",mosquito:"mosquitoes",mouse:"mice",person:"people",quiz:"quizzes",rodeo:"rodeos",shoe:"shoes",sombrero:"sombreros",stomach:"stomachs",tornado:"tornados",tuxedo:"tuxedos",volcano:"volcanoes"},pO={Comparative:"truebett1f0;arth0ew0in0;er",Superlative:"trueearlier",PresentTense:"truebests,sounds",Condition:"truelest,unless",PastTense:"truebegan,came,d4had,kneel3l2m0sa4we1;ea0sg2;nt;eap0i0;ed;id",Participle:"true0:09;a06b01cZdXeat0fSgQhPoJprov0rHs7t6u4w1;ak0ithdra02o2r1;i02uY;k0v0;nd1pr04;ergoJoJ;ak0hHo3;e9h7lain,o6p5t4un3w1;o1um;rn;g,k;ol0reS;iQok0;ught,wn;ak0o1runk;ne,wn;en,wn;ewriNi1uJ;dd0s0;ut3ver1;do4se0t1;ak0h2;do2g1;roG;ne;ast0i7;iv0o1;ne,tt0;all0loBor1;bi3g2s1;ak0e0;iv0o9;dd0;ove,r1;a5eamt,iv0;hos0lu1;ng;e4i3lo2ui1;lt;wn;tt0;at0en,gun;r2w1;ak0ok0;is0;en",Gerund:"trueaccord0be0doin,go0result0stain0;ing",Expression:"truea0Yb0Uc0Sd0Oe0Mfarew0Lg0FhZjeez,lWmVnToOpLsJtIuFvEw7y0;a5e3i1u0;ck,p;k04p0;ee,pee;a0p,s;!h;!a,h,y;a5h2o1t0;af,f;rd up,w;atsoever,e1o0;a,ops;e,w;hoo,t;ery w06oi0L;gh,h0;! 0h,m;huh,oh;here nPsk,ut tut;h0ic;eesh,hh,it,oo;ff,h1l0ow,sst;ease,s,z;ew,ooey;h1i,mg,o0uch,w,y;h,o,ps;! 0h;hTmy go0wT;d,sh;a7evertheless,o0;!pe;eh,mm;ah,eh,m1ol0;!s;ao,fao;aCeBi9o2u0;h,mph,rra0zzC;h,y;l1o0;r6y9;la,y0;! 0;c1moCsmok0;es;ow;!p hip hoor0;ay;ck,e,llo,y;ha1i,lleluj0;ah;!ha;ah,ee4o1r0;eat scott,r;l1od0sh; grief,bye;ly;! whiz;ell;e0h,t cetera,ureka,ww,xcuse me;k,p;'oh,a0rat,uh;m0ng;mit,n0;!it;mon,o0;ngratulations,wabunga;a2oo1r0tw,ye;avo,r;!ya;h,m; 1h0ka,las,men,rgh,ye;!a,em,h,oy;la",Negative:"truen0;ever,o0;n,t",QuestionWord:"truehow3wh0;at,e1ich,o0y;!m,se;n,re; come,'s",Reflexive:"trueh4it5my5o1the0your2;ir1m1;ne3ur0;sel0;f,ves;er0im0;self",Plural:"truedick0gre0ones,records;ens","Unit|Noun":"truecEfDgChBinchAk9lb,m6newt5oz,p4qt,t1y0;ardEd;able1b0ea1sp;!l,sp;spo1;a,t,x;on9;!b,g,i1l,m,p0;h,s;!les;!b,elvin,g,m;!es;g,z;al,b;eet,oot,t;m,up0;!s",Value:"truea few",Imperative:"truebewa0come he0;re","Plural|Verb":"trueleaves",Demonym:"true0:15;1:12;a0Vb0Oc0Dd0Ce08f07g04h02iYjVkTlPmLnIomHpEqatari,rCs7t5u4v3welAz2;am0Gimbabwe0;enezuel0ietnam0I;gAkrai1;aiwTex0hai,rinida0Ju2;ni0Prkmen;a5cotti4e3ingapoOlovak,oma0Spaniard,udRw2y0W;ede,iss;negal0Cr09;sh;mo0uT;o5us0Jw2;and0;a2eru0Fhilippi0Nortugu07uerto r0S;kist3lesti1na2raguay0;ma1;ani;ami00i2orweP;caragu0geri2;an,en;a3ex0Lo2;ngo0Drocc0;cedo1la2;gasy,y07;a4eb9i2;b2thua1;e0Cy0;o,t01;azakh,eny0o2uwaiI;re0;a2orda1;ma0Ap2;anO;celandic,nd4r2sraeli,ta01vo05;a2iB;ni0qi;i0oneU;aiAin2ondur0unO;di;amEe2hanai0reek,uatemal0;or2rm0;gi0;ilipino,ren8;cuadoVgyp4mira3ngli2sto1thiopi0urope0;shm0;ti;ti0;aPominUut3;a9h6o4roat3ub0ze2;ch;!i0;lom2ngol5;bi0;a6i2;le0n2;ese;lifor1m2na3;bo2eroo1;di0;angladeshi,el6o4r3ul2;gaE;azi9it;li2s1;vi0;aru2gi0;si0;fAl7merBngol0r5si0us2;sie,tr2;a2i0;li0;genti2me1;ne;ba1ge2;ri0;ni0;gh0r2;ic0;an",Organization:"true0:4Q;a3Tb3Bc2Od2He2Df27g1Zh1Ti1Pj1Nk1Ll1Gm12n0Po0Mp0Cqu0Br02sTtHuCv9w3xiaomi,y1;amaha,m1Bou1w1B;gov,tu3C;a4e2iki1orld trade organizati33;leaRped0O;lls fargo,st1;fie2Hinghou2R;l1rner br3U;gree3Jl street journ2Im1E;an halOeriz2Xisa,o1;dafo2Yl1;kswagMvo;b4kip,n2ps,s1;a tod3Aps;es3Mi1;lev3Fted natio3C;er,s; mobi32aco beRd bOe9gi frida3Lh3im horto3Amz,o1witt3D;shi49y1;ota,s r 05;e 1in lizzy;b3carpen3Jdaily ma3Dguess w2holli0s1w2;mashing pumpki35uprem0;ho;ea1lack eyed pe3Xyr0Q;ch bo3Dtl0;l2n3Qs1xas instrumen1U;co,la m1F;efoni0Kus;a8cientology,e5ieme2Ymirnoff,np,o3pice gir6quare0Ata1ubaru;rbuc1to34;ks;ny,undgard1;en;a2x pisto1;ls;g1Wrs;few2Minsbur31lesfor03msu2E;adiohead,b8e4o1yana3C;man empi1Xyal 1;b1dutch she4;ank;a3d 1max,vl20;bu1c2Ahot chili peppe2Ylobst2N;ll;ders dige1Ll madrid;c,s;ant3Aizn2Q;a8bs,e5fiz2Ihilip4i3r1;emier 1udenti1D;leagTo2K;nk floyd,zza hut; morrBs;psi2tro1uge0E;br33chi0Tn33;!co;lant2Un1yp16; 2ason27da2P;ld navy,pec,range juli2xf1;am;us;aAb9e6fl,h5i4o1sa,vid3wa;k2tre dame,vart1;is;ia;ke,ntendo,ss0QvZ;l,s;c,st1Otflix,w1; 1sweek;kids on the block,york0D;a,c;nd22s2t1;ional aca2Po,we0U;a,c02d0S;aDcdonalCe9i6lb,o3tv,y1;spa1;ce;b1Tnsanto,ody blu0t1;ley cr1or0T;ue;c2t1;as,subisO;helin,rosoft;dica2rcedes benz,talli1;ca;id,re;ds;cs milk,tt19z24;a3e1g,ittle caesa1P; ore09novo,x1;is,mark,us; 1bour party;pres0Dz boy;atv,fc,kk,lm,m1od1O;art;iffy lu0Roy divisi0Jpmorgan1sa;! cha09;bm,hop,k3n1tv;g,te1;l,rpol;ea;a5ewlett pack1Vi3o1sbc,yundai;me dep1n1P;ot;tac1zbollah;hi;lliburt08sbro;eneral 6hq,ithub,l5mb,o2reen d0Ou1;cci,ns n ros0;ldman sachs,o1;dye1g0H;ar;axo smith kli04encoW;electr0Nm1;oto0Z;a5bi,c barcelo4da,edex,i2leetwood m03o1rito l0G;rd,xcY;at,fa,nancial1restoZ; tim0;na;cebook,nnie mae;b0Asa,u3xxon1; m1m1;ob0J;!rosceptics;aiml0De5isney,o4u1;nkin donu2po0Zran dur1;an;ts;j,w jon0;a,f lepp12ll,peche mode,r spieg02stiny's chi1;ld;aJbc,hFiDloudflaCnn,o3r1;aigsli5eedence clearwater reviv1ossra09;al;c7inba6l4m1o0Est09;ca2p1;aq;st;dplSg1;ate;se;a c1o chanQ;ola;re;a,sco1tigroup;! systems;ev2i1;ck fil a,na daily;r1y;on;d2pital o1rls jr;ne;bury,ill1;ac;aEbc,eBf9l5mw,ni,o1p,rexiteeU;ei3mbardiIston 1;glo1pizza;be;ng;o2ue c1;roV;ckbuster video,omingda1;le; g1g1;oodriL;cht2e ge0rkshire hathaw1;ay;el;cardi,idu,nana republ3s1xt5y5;f,kin robbi1;ns;ic;bYcTdidSerosmith,iRlKmEnheuser busDol,ppleAr6s4u3v2y1;er;is,on;di,todesk;hland o1sociated E;il;b3g2m1;co;os;ys; compu1be0;te1;rs;ch;c,d,erican3t1;!r1;ak; ex1;pre1;ss; 5catel2ta1;ir;! lu1;ce1;nt;jazeera,qae1;da;g,rbnb;as;/dc,a3er,tivision1;! blizz1;ard;demy of scienc0;es;ba",Possessive:"trueits,my,our0thy;!s","Noun|Verb":"true0:9W;1:AA;2:96;3:A3;4:9R;5:A2;6:9K;7:8N;8:7L;9:A8;A:93;B:8D;C:8X;a9Ob8Qc7Id6Re6Gf5Sg5Hh55i4Xj4Uk4Rl4Em40n3Vo3Sp2Squ2Rr21s0Jt02u00vVwGyFzD;ip,oD;ne,om;awn,e6Fie68;aOeMhJiHoErD;ap,e9Oink2;nd0rDuC;kDry,sh5Hth;!shop;ck,nDpe,re,sh;!d,g;e86iD;p,sD;k,p0t2;aDed,lco8W;r,th0;it,lk,rEsDt4ve,x;h,te;!ehou1ra9;aGen5FiFoD;iDmAte,w;ce,d;be,ew,sA;cuum,l4B;pDr7;da5gra6Elo6A;aReQhrPiOoMrGuEwiDy5Z;n,st;nDrn;e,n7O;aGeFiEoDu6;t,ub2;bu5ck4Jgg0m,p;at,k,nd;ck,de,in,nsDp,v7J;f0i8R;ll,ne,p,r4Yss,t94uD;ch,r;ck,de,e,le,me,p,re;e5Wow,u6;ar,e,ll,mp0st,xt;g,lDng2rg7Ps5x;k,ly;a0Sc0Ne0Kh0Fi0Dk0Cl0Am08n06o05pXquaBtKuFwD;ea88iD;ng,pe,t4;bGit,m,ppErD;fa3ge,pri1v2U;lDo6S;e6Py;!je8;aMeLiKoHrEuDy2;dy,ff,mb2;a85eEiDo5Pugg2;ke,ng;am,ss,t4;ckEop,p,rD;e,m;ing,pi2;ck,nk,t4;er,m,p;ck,ff,ge,in,ke,lEmp,nd,p2rDte,y;!e,t;k,l;aJeIiHlGoFrDur,y;ay,e56inDu3;g,k2;ns8Bt;a5Qit;ll,n,r87te;ed,ll;m,n,rk;b,uC;aDee1Tow;ke,p;a5Je4FiDo53;le,rk;eep,iDou4;ce,p,t;ateboa7Ii;de,gnDl2Vnk,p,ze;!al;aGeFiEoDuff2;ck,p,re,w;ft,p,v0;d,i3Ylt0;ck,de,pe,re,ve;aEed,nDrv1It;se,t2N;l,r4t;aGhedu2oBrD;aEeDibb2o3Z;en,w;pe,t4;le,n,r2M;cDfegua72il,mp2;k,rifi3;aZeHhy6LiGoEuD;b,in,le,n,s5X;a6ck,ll,oDpe,u5;f,t;de,ng,ot,p,s1W;aTcSdo,el,fQgPje8lOmMnLo17pJque6sFturn,vDwa6V;eDi27;al,r1;er74oFpe8tEuD;lt,me;!a55;l71rt;air,eaDly,o53;l,t;dezvo2Zt;aDedy;ke,rk;ea1i4G;a6Iist0r5N;act6Yer1Vo71uD;nd,se;a38o6F;ch,s6G;c1Dge,iEke,lly,nDp1Wt1W;ge,k,t;n,se;es6Biv0;a04e00hYiXlToNrEsy4uD;mp,n4rcha1sh;aKeIiHoDu4O;be,ceFdu3fi2grDje8mi1p,te6;amDe6W;!me;ed,ss;ce,de,nt;sDy;er6Cs;cti3i1;iHlFoEp,re,sDuCw0;e,i5Yt;l,p;iDl;ce,sh;nt,s5V;aEce,e32uD;g,mp,n7;ce,nDy;!t;ck,le,n17pe,tNvot;a1oD;ne,tograph;ak,eFnErDt;fu55mA;!c32;!l,r;ckJiInHrFsEtDu1y;ch,e9;s,te;k,tD;!y;!ic;nt,r,se;!a7;bje8ff0il,oErDutli3Qver4B;bAd0ie9;ze;a4ReFoDur1;d,tD;e,i3;ed,gle8tD;!work;aMeKiIoEuD;rd0;ck,d3Rld,nEp,uDve;nt,th;it5EkD;ey;lk,n4Brr5CsDx;s,ta2B;asuBn4UrDss;ge,it;il,nFp,rk3WsEtD;ch,t0;h,k,t0;da5n0oeuvB;aLeJiHoEuD;mp,st;aEbby,ck,g,oDve;k,t;d,n;cDe,ft,mAnIst;en1k;aDc0Pe4vK;ch,d,k,p,se;bFcEnd,p,t4uD;gh,n4;e,k;el,o2U;eEiDno4E;ck,d,ll,ss;el,y;aEo1OuD;i3mp;m,zz;mpJnEr46ssD;ue;c1Rdex,fluGha2k,se2HteDvoi3;nt,rD;e6fa3viD;ew;en3;a8le2A;aJeHiGoEuD;g,nt;l3Ano2Dok,pDr1u1;!e;ghli1Fke,nt,re,t;aDd7lp;d,t;ck,mGndFrEsh,tDu9;ch,e;bo3Xm,ne4Eve6;!le;!m0;aMear,ift,lKossJrFuD;arDe4Alp,n;antee,d;aFiEoDumb2;uCwth;ll,nd,p;de,sp;ip;aBoDue;ss,w;g,in,me,ng,s,te,ze;aZeWiRlNoJrFuD;ck,el,nDss,zz;c38d;aEoDy;st,wn;cDgme,me,nchi1;tuB;cFg,il,ld,rD;ce,e29mDwa31;!at;us;aFe0Vip,oDy;at,ck,od,wD;!er;g,ke,me,re,sh,vo1E;eGgFlEnDre,sh,t,x;an3i0Q;e,m,t0;ht,uB;ld;aEeDn3;d,l;r,tuB;ce,il,ll,rm,vo2W;cho,d7ffe8nMsKxFyeD;!baD;ll;cGerci1hFpDtra8;eriDo0W;en3me9;au6ibA;el,han7u1;caDtima5;pe;count0d,vy;a01eSiMoJrEuDye;b,el,mp,pli2X;aGeFiEoD;ne,p;ft,ll,nk,p,ve;am,ss;ft,g,in;cEd7ubt,wnloD;ad;k,u0E;ge6p,sFt4vD;e,iDor3;de;char7gui1h,liEpD;at4lay,u5;ke;al,bKcJfeIlGmaCposAsEtaD;il;e07iD;gn,re;ay,ega5iD;ght;at,ct;li04rea1;a5ut;b,ma7n3rDte;e,t;a0Eent0Dh06irc2l03oKrFuD;be,e,rDt;b,e,l,ve;aGeFoEuDy;sh;p,ss,wd;dAep;ck,ft,sh;at,de,in,lTmMnFordina5py,re,st,uDv0;gh,nDp2rt;s01t;ceHdu8fli8glomeIsFtDveN;a8rD;a6ol;e9tru8;ct;ntDrn;ra5;bHfoGmFpD;leDouCromi1;me9;aCe9it,u5;rt;at,iD;ne;lap1oD;r,ur;aEiDoud,ub;ck,p;im,w;aEeDip;at,ck,er;iGllen7nErD;ge,m,t;ge,nD;el;n,r;er,re;ke,ll,mp,noe,pGrXsFtEuDve;se,ti0I;alog,ch;h,t;!tuB;re;a03eZiXlToPrHuEyD;pa11;bb2ck2dgEff0mp,rDst,zz;den,n;et;anJeHiFoadEuD;i1sh;ca6;be,d7;ge;aDed;ch,k;ch,d;aFg,mb,nEoDrd0tt2x,ycott;k,st,t;d,e;rd,st;aFeCiDoYur;nk,tz;nd;me;as,d,ke,nd,opsy,tD;!ch,e;aFef,lt,nDt;d,efA;it;r,t;ck,il,lan3nIrFsEtt2;le;e,h;!gDk;aDe;in;!d,g,k;bu1c05dZge,iYlVnTppQrLsIttGucEwaD;rd;tiD;on;aDempt;ck;k,sD;i6ocia5;st;chFmD;!oD;ur;!iD;ve;eEroa4;ch;al;chDg0sw0;or;aEt0;er;rm;d,m,r;dreHvD;an3oD;ca5;te;ce;ss;cDe,he,t;eFoD;rd,u9;nt;nt,ss;se",Actor:"true0:7B;1:7G;2:6A;3:7F;4:7O;5:7K;a6Nb62c4Ud4Be41f3Sg3Bh30i2Uj2Qkin2Pl2Km26n1Zo1Sp0Vqu0Tr0JsQtJuHvEw8yo6;gi,ut6;h,ub0;aAe9i8o7r6;estl0it0;m2rk0;fe,nn0t2Bza2H;atherm2ld0;ge earn0it0nder0rri1;eter7i6oyF;ll5Qp,s3Z;an,ina2U;n6s0;c6Uder03;aoisea23e9herapi5iktok0o8r6ut1yco6S;a6endseLo43;d0mp,nscri0Bvel0;ddl0u1G;a0Qchn7en6na4st0;ag0;i3Oo0D;aiXcUeRhPiMki0mu26oJpGquaFtBu7wee6;p0theart;lt2per7r6;f0ge6Iviv1;h6inten0Ist5Ivis1;ero,um2;a8ep7r6;ang0eam0;bro2Nc2Ofa2Nmo2Nsi20;ff0tesm2;tt0;ec7ir2Do6;kesp59u0M;ia5Jt3;l7me6An,rcere6ul;r,ss;di0oi5;n7s6;sy,t0;g0n0;am2ephe1Iow6;girl,m2r2Q;cretInior cit3Fr6;gea4v6;a4it1;hol4Xi7reen6ulpt1;wr2C;e01on;l1nt;aEe9o8u6;l0nn6;er up,ingE;g40le mod3Zof0;a4Zc8fug2Ppo32searQv6;ere4Uolution6;ary;e6luYru22;ptio3T;bbi,dic5Vpp0;arter6e2Z;back;aYeWhSiRlOoKr8sycho7u6;nk,p31;logi5;aGeDiBo6;d9fess1g7ph47s6;pe2Ktitu51;en6ramm0;it1y;igy,uc0;est4Nme mini0Unce6s3E;!ss;a7si6;de4;ch0;ctiti39nk0P;dca0Oet,li6pula50rnst42;c2Itic6;al scie6i2;nti5;a6umb0;nn0y6;er,ma4Lwright;lgrim,one0;a8iloso7otogra7ra6ysi1V;se;ph0;ntom,rmaci5;r6ssi1T;form0s4O;i3El,nel3Yr8st1tr6wn;i6on;arWot;ent4Wi42tn0;ccupa4ffBp8r7ut6;ca5l0B;ac4Iganiz0ig2Fph2;er3t6;i1Jomet6;ri5;ic0spring;aBe9ie4Xo7u6;n,rser3J;b6mad,vi4V;le2Vo4D;i6mesis,phew;ce,ghb1;nny,rr3t1X;aEeDiAo7u6yst1Y;m8si16;der3gul,m7n6th0;arDk;!my;ni7s6;f02s0Jt0;on,st0;chan1Qnt1rcha4;gi9k0n8rtyr,t6y1;e,riar6;ch;ag0iac;ci2stra3I;a7e2Aieutena4o6;rd,s0v0;bor0d7ndlo6ss,urea3Fwy0ym2;rd;!y;!s28;e8o7u6;ggl0;gg0urna2U;st0;c3Hdol,llu3Ummigra4n6; l9c1Qfa4habi42nov3s7ve6;nt1stig3;pe0Nt6;a1Fig3ru0M;aw;airFeBistoAo8u6ygie1K;man6sba2H;!ita8;bo,st6usekN;age,e3P;ri2;ir,r6;m7o6;!ine;it;dress0sty2C;aLeIhostGirl26ladi3oCrand7u6;e5ru;c9daug0Jfa8m7pa6s2Y;!re4;a,o6;th0;hi1B;al7d6lf0;!de3A;ie,k6te26;eep0;!wr6;it0;isha,n6;i6tl04;us;mbl0rden0;aDella,iAo7r6;eela2Nie1P;e,re6ster pare4;be1Hm2r6st0;unn0;an2ZgZlmm17nanci0r6tt0;e6st la2H; marsh2OfigXm2;rm0th0;conoEdDlectriCm8n7x6;amin0cellency,i2A;emy,trepreneur,vironmenta1J;c8p6;er1loye6;e,r;ee;ci2;it1;mi5;aKeBi8ork,ri7u6we02;de,tche2H;ft0v0;ct3eti7plom2Hre6va;ct1;ci2ti2;aDcor3fencCi0InAput9s7tectLvel6;op0;ce1Ge6ign0;rt0;ee,y;iz6;en;em2;c1Ml0;d8nc0redev7ug6;ht0;il;!dy;a06e04fo,hXitizenWlToBr9u6;r3stomer6;! representat6;ive;e3it6;ic;lJmGnAord9rpor1Nu7w6;boy,ork0;n6ri0;ciTte1Q;in3;fidantAgressSs9t6;e0Kr6;ibut1o6;ll0;tab13ul1O;!e;edi2m6pos0rade;a0EeQissi6;on0;leag8on7um6;ni5;el;ue;e6own;an0r6;ic,k;!s;a9e7i6um;ld;erle6f;ad0;ir7nce6plFract0;ll1;m2wI;lebri6o;ty;dBptAr6shi0;e7pe6;nt0;r,t6;ak0;ain;et;aMeLiJlogg0oErBu6;dd0Fild0rgl9siness6;m2p7w6;om2;ers05;ar;i7o6;!k0th0;cklay0de,gadi0;hemi2oge8y6;!frie6;nd;ym2;an;cyc6sR;li5;atbox0ings;by,nk0r6;b0on7te6;nd0;!e07;c04dWge4nQpLrHsFtAu7yatull6;ah;nt7t6;h1oG;!ie;h8t6;e6orney;nda4;ie5le6;te;sis00tron6;aut,om0;chbis8isto7tis6;an,t;crU;hop;ost9p6;ari6rentiS;ti6;on;le;a9cest1im3nou8y6;bo6;dy;nc0;ly5rc6;hi5;mi8v6;entur0is1;er;ni7r6;al;str3;at1;or;counBquaintanArob9t6;ivi5or,re6;ss;st;at;ce;ta4;nt","Adj|Noun":"true0:16;a1Db17c0Ud0Re0Mf0Dg0Ah08i06ju05l02mWnUoSpNrIsBt7u4v1watershed;a1ision0Z;gabo4nilla,ria1;b0Vnt;ndergr1pstairs;adua14ou1;nd;a3e1oken,ri0;en,r1;min0rori13;boo,n;age,e5ilv0Flack,o3quat,ta2u1well;bordina0Xper5;b0Lndard;ciali0Yl1vereign;e,ve16;cret,n1ri0;ior;a4e2ou1ubbiL;nd,tiY;ar,bBl0Wnt0p1side11;resent0Vublican;ci0Qsh;a4eriodic0last0Zotenti0r1;emi2incip0o1;!fession0;er,um;rall4st,tie0U;ff1pposi0Hv0;ens0Oi0C;agg01ov1uts;el;a5e3iniatJo1;bi01der07r1;al,t0;di1tr0N;an,um;le,riG;attOi2u1;sh;ber0ght,qC;stice,veniT;de0mpressioYn1;cumbe0Edividu0no0Dsta0Eterim;alf,o1umdrum;bby,melF;en2old,ra1;ph0Bve;er0ious;a7e5i4l3u1;git03t1;ure;uid;ne;llow,m1;aFiL;ir,t,vo1;riOuriO;l3p00x1;c1ecutUpeV;ess;d1iK;er;ar2e1;mographUrivO;k,l2;hiGlassSo2rude,unn1;ing;m5n1operK;creCstitueOte2vertab1;le;mpor1nt;ary;ic,m2p1;anion,lex;er2u1;ni8;ci0;al;e5lank,o4r1;i2u1;te;ef;ttom,urgeois;st;cadem9d6l2ntarct9r1;ab,ct8;e3tern1;at1;ive;rt;oles1ult;ce1;nt;ic","Adj|Past":"true0:4Q;1:4C;2:4H;3:4E;a44b3Tc36d2Je29f20g1Wh1Si1Jj1Gkno1Fl1Am15n12o0Xp0Mqu0Kr08sLtEuAv9w4yellow0;a7ea6o4rinkl0;r4u3Y;n,ri0;k31th3;rp0sh0tZ;ari0e1O;n5p4s0;d1li1Rset;cov3derstood,i4;fi0t0;a8e3Rhr7i6ouTr4urn0wi4C;a4imm0ou2G;ck0in0pp0;ed,r0;eat2Qi37;m0nn0r4;get0ni2T;aOcKeIhGimFm0Hoak0pDt7u4;bsid3Ogge44s4;pe4ta2Y;ct0nd0;a8e7i2Eok0r5u4;ff0mp0nn0;ength2Hip4;ed,p0;am0reotyp0;in0t0;eci4ik0oH;al3Efi0;pRul1;a4ock0ut;d0r0;a4c1Jle2t31;l0s3Ut0;a6or5r4;at4e25;ch0;r0tt3;t4ut0;is2Mur1;aEe5o4;tt0;cAdJf2Bg9je2l8m0Knew0p7qu6s4;eTpe2t4;or0ri2;e3Dir0;e1lac0;at0e2Q;i0Rul1;eiv0o4ycl0;mme2Lrd0v3;in0lli0ti2A;a4ot0;li28;aCer30iBlAo9r5u4;mp0zzl0;e6i2Oo4;ce2Fd4lo1Anou30pos0te2v0;uc0;fe1CocCp0Iss0;i2Kli1L;ann0e2CuS;ck0erc0ss0;ck0i2Hr4st0;allLk0;bse7c6pp13rgan2Dver4;lo4whelm0;ok0;cupi0;rv0;aJe5o4;t0uri1A;ed0gle2;a6e5ix0o4ut0ys1N;di1Nt15u26;as0Clt0;n4rk0;ag0ufact0A;e6i5o4;ad0ck0st,v0;cens0m04st0;ft,v4;el0;tt0wn;a5o15u4;dg0s1B;gg0;llumSmpAn4sol1;br0cre1Ldebt0f8jZspir0t5v4;it0olv0;e4ox0Y;gr1n4re23;d0si15;e2l1o1Wuri1;li0o01r4;ov0;a6e1o4um03;ok0r4;ri0Z;mm3rm0;i6r5u4;a1Bid0;a0Ui0Rown;ft0;aAe9i8l6oc0Ir4;a4i0oz0Y;ctHg19m0;avo0Ju4;st3;ni08tt0x0;ar0;d0il0sc4;in1;dCl1mBn9quipp0s8x4;agger1c6p4te0T;a0Se4os0;ct0rie1D;it0;cap0tabliZ;cha0XgFha1As4;ur0;a0Zbarra0N;i0Buc1;aMeDi5r4;a01i0;gni08miniSre2s4;a9c6grun0Ft4;o4re0Hu17;rt0;iplWou4;nt0r4;ag0;bl0;cBdRf9l8p7ra6t5v4;elop0ot0;ail0ermQ;ng0;re07;ay0ight0;e4in0o0M;rr0;ay0enTor1;m5t0z4;ed,zl0;ag0p4;en0;aPeLhIlHo9r6u4;lt4r0stom03;iv1;a5owd0u4;sh0;ck0mp0;d0loAm7n4ok0v3;centr1f5s4troC;id3olid1;us0;b5pl4;ic1;in0;r0ur0;assi9os0utt3;ar5i4;ll0;g0m0;lebr1n6r4;ti4;fi0;tralJ;g0lcul1;aDewild3iCl9o7r5urn4;ed,t;ok4uis0;en;il0r0t4und;tl0;e5i4;nd0;ss0;as0;ffl0k0laMs0tt3;bPcNdKfIg0lFmaz0nDppBrm0ss9u5wa4;rd0;g5thor4;iz0;me4;nt0;o6u4;m0r0;li0re4;ci1;im1ticip1;at0;a5leg0t3;er0;rm0;fe2;ct0;ju5o7va4;nc0;st0;ce4knowledg0;pt0;and5so4;rb0;on0;ed",Singular:"true0:5J;1:5H;2:4W;3:4S;4:52;5:57;6:5L;7:56;8:5B;a52b4Lc3Nd35e2Xf2Og2Jh28in24j23k22l1Um1Ln1Ho1Bp0Rqu0Qr0FsZtMuHvCw9x r58yo yo;a9ha3Po3Q;f3i4Rt0Gy9;! arou39;arCeAideo ga2Qo9;cabu4Jl5C;gOr9t;di4Zt1Y;iety,ni4P;nBp30rAs 9;do43s5E;bani1in0;coordinat3Ader9;estima1to24we41; rex,aKeJhHiFoErBuAv9;! show;m2On2rntLto1D;agedy,ib9o4E;e,u9;n0ta46;ni1p2rq3L;c,er,m9;etF;ing9ree26;!y;am,mp3F;ct2le6x return;aNcMeKhor4QiJkHoGpin off,tDuBy9;ll9ner7st4T;ab2X;b9i1n28per bowl,rro1X;st3Ltot0;atAipe2Go1Lrate7udent9;! lo0I;i39u1;ft ser4Lmeo1I;elet5i9;ll,r3V;b38gn2Tte;ab2Jc9min3B;t,urity gua2N;e6ho2Y;bbatic0la3Jndwi0Qpi5;av5eDhetor2iAo9;de6om,w;tAv9;erb2C;e,u0;bDcBf9publ2r10spi1;er9orm3;e6r0;i9ord label;p2Ht0;a1u46;estion mark,ot2F;aPeMhoLiIlGoErAu9yram1F;ddi3HpErpo1Js3J;eBo9;bl3Zs9;pe3Jta1;dic1Rmi1Fp1Qroga8ss relea1F;p9rt0;py;a9ebisci1;q2Dte;cn2eAg9;!gy;!r;ne call,tocoK;anut,dAr9t0yo1;cen3Jsp3K;al,est0;nop4rAt9;e,hog5;adi11i2V;atme0bj3FcBpia1rde0thers,utspok5ve9wn3;n,r9;ti0Pview;cuAe9;an;pi3;arBitAot9umb3;a2Fhi2R;e,ra1;cot2ra8;aFeCiAo9ur0;nopo4p18rni2Nsq1Rti36uld;c,li11n0As9tt5;chief,si34;dAnu,t9;al,i3;al,ic;gna1mm0nd15rsupi0te9yf4;ri0;aDegCiBu9;ddi1n9;ch;me,p09; Be0M;bor14y9; 9er;up;eyno1itt5;el4ourn0;cBdices,itia8ni25sAtel0Lvert9;eb1J;e28titu1;en8i2T;aIeEighDoAu9;man right,s22;me9rmoFsp1Ftb0K;! r9;un; scho0YriY;a9i1N;d9v5; start,pho9;ne;ndful,sh brown,v5ze;aBelat0Ilaci3r9ul4yp1S;an9enadi3id;a1Cd slam,ny;df4r9;l2ni1I;aGeti1HiFlu1oCrAun9;er0;ee market,i9onti3;ga1;l4ur9;so9;me;ePref4;br2mi4;conoFffi7gg,lecto0Rmbas1EnCpidem2s1Zth2venBxAyel9;id;ampZempl0Nte6;i19t;er7terp9;ri9;se;my;eLiEoBr9ump tru0U;agonf4i9;er,ve thru;cAg7i4or,ssi3wn9;side;to0EumenE;aEgniDnn3sAvide9;nd;conte6incen8p9tri11;osi9;ti0C;ta0H;le0X;athBcAf9ni0terre6;ault 05err0;al,im0;!b9;ed;aWeThMiLlJoDr9;edit caBuc9;ib9;le;rd;efficDke,lCmmuniqLnsApi3rr0t0Xus9yo1;in;erv9uI;ato02;ic,lQ;ie6;er7i9oth;e6n2;ty,vil wM;aDeqCick5ocoBr9;istmas car9ysanthemum;ol;la1;ue;ndeli3racteri9;st2;iAllEr9;e0tifica1;liZ;hi3nFpErCt9ucus;erpi9hedr0;ll9;ar;!bohyd9ri3;ra1;it0;aAe,nib0t9;on;l,ry;aMeLiop2leJoHrDu9;nny,r9tterf4;g9i0;la9;ry;eakAi9;ck;fa9throB;st;dy,ro9wl;ugh;mi9;sh;an,l4;nkiArri3;er;ng;cSdMlInFppeti1rDsBtt2utop9;sy;ic;ce6pe9;ct;r9sen0;ay;ecAoma4tiA;ly;do1;i5l9;er7y;gy;en; hominDjAvan9;tage;ec8;ti9;ve;em;cCeAqui9;tt0;ta1;te;iAru0;al;de6;nt","Person|Noun":"truea0Eb07c03dWeUfQgOhLjHkiGlFmCnBolive,p7r4s3trini06v1wa0;ng,rd,tts;an,enus,iol0;a,et;ky,onPumm09;ay,e1o0uby;bin,d,se;ed,x;a2e1o0;l,tt04;aLnJ;dYge,tR;at,orm;a0eloW;t0x,ya;!s;a9eo,iH;ng,tP;a2e1o0;lGy;an,w3;de,smi4y;a0erb,iOolBuntR;ll,z0;el;ail,e0iLuy;ne;a1ern,i0lo;elds,nn;ith,n0;ny;a0dEmir,ula,ve;rl;a4e3i1j,ol0;ly;ck,x0;ie;an,ja;i0wn;sy;am,h0liff,rystal;a0in,ristian;mbers,ri0;ty;a4e3i2o,r0ud;an0ook;dy;ll;nedict,rg;k0nks;er;l0rt;fredo,ma","Actor|Verb":"trueaCb8c5doctor,engineAfool,g3host,judge,m2nerd,p1recruit,scout,ushAvolunteAwi0;mp,tneA;arent,ilot;an,ime;eek,oof,r0uide;adu8oom;ha1o0;ach,nscript,ok;mpion,uffeur;o2u0;lly,tch0;er;ss;ddi1ffili0rchite1;ate;ct",MaleName:"true0:H6;1:FZ;2:DS;3:GQ;4:CZ;5:FV;6:GM;7:FP;8:GW;9:ET;A:C2;B:GD;aF8bE1cCQdBMeASfA1g8Yh88i7Uj6Sk6Bl5Mm48n3So3Ip33qu31r26s1Et0Ru0Ov0CwTxSyHzC;aCor0;cChC1karia,nAT;!hDkC;!aF6;!ar7CeF5;aJevgenBSoEuC;en,rFVsCu3FvEF;if,uf;nDs6OusC;ouf,s6N;aCg;s,tC;an,h0;hli,nCrosE1ss09;is,nC;!iBU;avi2ho5;aPeNiDoCyaEL;jcieBJlfgang,odrFutR;lFnC;f8TsC;lCt1;ow;bGey,frEhe4QlC;aE5iCy;am,e,s;ed8iC;d,ed;eAur;i,ndeD2rn2sC;!l9t1;lDyC;l1ne;lDtC;!er;aCHy;aKernDAiFladDoC;jteB0lodymyr;!iC;mFQsDB;cFha0ktBZnceDrgCOvC;a0ek;!nC;t,zo;!e4StBV;lCnC7sily;!entC;in9J;ghE2lCm70nax,ri,sm0;riCyss87;ch,k;aWeRhNiLoGrEuDyC;!l2roEDs1;n6r6E;avD0eCist0oy,um0;ntCRvBKy;bFdAWmCny;!asDmCoharu;aFFie,y;!z;iA6y;mCt4;!my,othy;adEeoDia0SomC;!as;!dor91;!de4;dFrC;enBKrC;anBJeCy;ll,nBI;!dy;dgh,ha,iCnn2req,tsu5V;cDAka;aYcotWeThPiMlobod0oKpenc2tEurDvenAEyCzym1;ed,lvest2;aj,e9V;anFeDuC;!aA;fan17phEQvCwaA;e77ie;!islaCl9;v,w;lom1rBuC;leymaDHta;dDgmu9UlCm1yabonga;as,v8B;!dhart8Yn9;aEeClo75;lCrm0;d1t1;h9Jne,qu1Jun,wn,yne;aDbastiEDk2Yl5Mpp,rgCth,ymoCU;e1Dio;m4n;!tC;!ie,y;eDPlFmEnCq67tosCMul;dCj2UtiA5;e01ro;!iATkeB6mC4u5;!ik,vato9K;aZeUheC8iRoGuDyC;an,ou;b99dDf4peAssC;!elEG;ol00y;an,bLc7MdJel,geIh0lHmGnEry,sDyC;!ce;ar7Ocoe,s;!aCnBU;ld,n;an,eo;a7Ef;l7Jr;e3Eg2n9olfo,riC;go;bBNeDH;cCl9;ar87c86h54kCo;!ey,ie,y;cFeA3gDid,ubByCza;an8Ln06;g85iC;naC6s;ep;ch8Kfa5hHin2je8HlGmFndEoHpha5sDul,wi36yC;an,mo8O;h9Im4;alDSol3O;iD0on;f,ph;ul;e9CinC;cy,t1;aOeLhilJiFrCyoG;aDeC;m,st1;ka85v2O;eDoC;tr;r8GtC;er,ro;!ipCl6H;!p6U;dCLrcy,tC;ar,e9JrC;!o7;b9Udra8So9UscAHtri62ulCv8I;!ie,o7;ctav6Ji2lImHndrBRrGsDtCum6wB;is,to;aDc6k6m0vCwaBE;al79;ma;i,vR;ar,er;aDeksandr,ivC;er,i2;f,v;aNeLguyBiFoCu3O;aDel,j4l0ma0rC;beAm0;h,m;cFels,g5i9EkDlC;es,s;!au,h96l78olaC;!i,y;hCkCol76;ol75;al,d,il,ls1vC;ilAF;hom,tC;e,hC;anCy;!a5i5;aYeViLoGuDyC;l4Nr1;hamDr84staC;fa,p6E;ed,mG;di10e,hamEis4JntDritz,sCussa;es,he;e,y;ad,ed,mC;ad,ed;cGgu5hai,kFlEnDtchC;!e8O;a9Pik;house,o7t1;ae73eC3ha8Iolaj;ah,hDkC;!ey,y;aDeC;al,l;el,l;hDlv3rC;le,ri8Ev4T;di,met;ay0c00gn4hWjd,ks2NlTmadZnSrKsXtDuric7VxC;imilBKwe8B;eHhEi69tCus,y69;!eo,hCia7;ew,i67;eDiC;as,eu,s;us,w;j,o;cHiGkFlEqu8Qsha83tCv3;iCy;!m,n;in,on;el,o7us;a6Yo7us;!elCin,o7us;!l8o;frAEi5Zny,u5;achDcoCik;lm;ai,y;amDdi,e5VmC;oud;adCm6W;ou;aulCi9P;ay;aWeOiMloyd,oJuDyC;le,nd1;cFdEiDkCth2uk;a7e;gi,s,z;ov7Cv6Hw6H;!as,iC;a6Een;g0nn52renDuCvA4we7D;!iS;!zo;am,n4oC;n5r;a9Yevi,la5KnHoFst2thaEvC;eCi;nte;bo;nCpo8V;!a82el,id;!nC;aAy;mEnd1rDsz73urenCwr6K;ce,t;ry,s;ar,beAont;aOeIhalHiFla4onr63rDu5SylC;e,s;istCzysztof;i0oph2;er0ngsl9p,rC;ilA9k,ollos;ed,id;en0iGnDrmCv4Z;it;!dDnCt1;e2Ny;ri4Z;r,th;cp2j4mEna8BrDsp6them,uC;ri;im,l;al,il;a03eXiVoFuC;an,lCst3;en,iC;an,en,o,us;aQeOhKkub4AnIrGsDzC;ef;eDhCi9Wue;!ua;!f,ph;dCge;i,on;!aCny;h,s,th6J;anDnC;!ath6Hie,n72;!nC;!es;!l,sCy;ph;o,qu3;an,mC;!i,m6V;d,ffFns,rCs4;a7JemDmai7QoCry;me,ni1H;i9Dy;!e73rC;ey,y;cKdBkImHrEsDvi2yC;dBs1;on,p2;ed,oDrCv67;e6Qod;d,s61;al,es5Wis1;a,e,oCub;b,v;ob,qu13;aTbNchiMgLke53lija,nuKonut,rIsEtCv0;ai,suC;ki;aDha0i8XmaCsac;el,il;ac,iaC;h,s;a,vinCw3;!g;k,nngu6X;nac1Xor;ka;ai,rahC;im;aReLoIuCyd6;beAgGmFsC;eyDsC;a3e3;in,n;ber5W;h,o;m2raDsse3wC;a5Pie;c49t1K;a0Qct3XiGnDrC;beAman08;dr7VrC;iCy2N;!k,q1R;n0Tt3S;bKlJmza,nIo,rEsDyC;a5KdB;an,s0;lEo67r2IuCv9;hi5Hki,tC;a,o;an,ey;k,s;!im;ib;a08e00iUlenToQrMuCyorgy;iHnFsC;!taC;f,vC;!e,o;n6tC;er,h2;do,lC;herDlC;auCerQ;me;aEegCov2;!g,orC;!io,y;dy,h7C;dfr9nza3XrDttfC;ri6C;an,d47;!n;acoGlEno,oCuseppe;rgiCvan6O;!o,s;be6Ies,lC;es;mo;oFrC;aDha4HrC;it,y;ld,rd8;ffErgC;!e7iCy;!os;!r9;bElBrCv3;eCla1Nr4Hth,y;th;e,rC;e3YielC;!i4;aXeSiQlOorrest,rCyod2E;aHedFiC;edDtC;s,z;ri18;!d42eri11riC;ck,k;nCs2;cEkC;ie,lC;in,yn;esLisC;!co,z3M;etch2oC;ri0yd;d5lConn;ip;deriFliEng,rC;dinaCg4nan0B;nd8;pe,x;co;bCdi,hd;iEriC;ce,zC;io;an,en,o;benez2dZfrYit0lTmMnJo3rFsteb0th0ugenEvCymBzra;an,eCge4D;ns,re3K;!e;gi,iDnCrol,v3w3;est8ie,st;cCk;!h,k;o0DriCzo;co,qC;ue;aHerGiDmC;aGe3A;lCrh0;!iC;a10o,s;s1y;nu5;beAd1iEliDm2t1viCwood;n,s;ot28s;!as,j5Hot,sC;ha;a3en;!dGg6mFoDua2QwC;a2Pin;arC;do;oZuZ;ie;a04eTiOmitrNoFrag0uEwDylC;an,l0;ay3Hig4D;a3Gdl9nc0st3;minFnDri0ugCvydGy2S;!lF;!a36nCov0;e1Eie,y;go,iDykC;as;cCk;!k;i,y;armuFetDll1mitri7neCon,rk;sh;er,m6riC;ch;id;andLepak,j0lbeAmetri4nIon,rGsEvDwCxt2;ay30ey;en,in;hawn,moC;nd;ek,riC;ck;is,nC;is,y;rt;re;an,le,mKnIrEvC;e,iC;!d;en,iEne0PrCyl;eCin,yl;l45n;n,o,us;!iCny;el,lo;iCon;an,en,on;a0Fe0Ch03iar0lRoJrFuDyrC;il,us;rtC;!is;aEistC;iaCob12;no;ig;dy,lInErC;ey,neliCy;s,us;nEor,rDstaC;nt3;ad;or;by,e,in,l3t1;aHeEiCyde;fCnt,ve;fo0Xt1;menDt4;us;s,t;rFuDyC;!t1;dCs;e,io;enC;ce;aHeGrisC;!toC;phCs;!eC;!r;st2t;d,rCs;b5leC;s,y;cDdrCs6;ic;il;lHmFrC;ey,lDroCy;ll;!o7t1;er1iC;lo;!eb,v3;a09eZiVjorn,laUoSrEuCyr1;ddy,rtKst2;er;aKeFiEuDyC;an,ce,on;ce,no;an,ce;nDtC;!t;dDtC;!on;an,on;dFnC;dDisC;lav;en,on;!foOl9y;bby,gd0rCyd;is;i0Lke;bElDshC;al;al,lL;ek;nIrCshoi;at,nEtC;!raC;m,nd;aDhaCie;rd;rd8;!iDjam3nCs1;ie,y;to;kaMlazs,nHrC;n9rDtC;!holomew;eCy;tt;ey;dCeD;ar,iC;le;ar1Nb1Dd16fon15gust3hm12i0Zja0Yl0Bm07nTputsiSrGsaFugustEveDyCziz;a0kh0;ry;o,us;hi;aMchiKiJjun,mHnEon,tCy0;em,hCie,ur8;ur;aDoC;!ld;ud,v;aCin;an,nd8;!el,ki;baCe;ld;ta;aq;aMdHgel8tCw6;hoFoC;iDnC;!i8y;ne;ny;er7rCy;eDzC;ej;!as,i,j,s,w;!s;s,tolC;iCy;!y;ar,iEmaCos;nu5r;el;ne,r,t;aVbSdBeJfHiGl01onFphonsEt1vC;aPin;on;e,o;so,zo;!sR;!onZrC;ed;c,jaHksFssaHxC;!andC;er,rC;e,os,u;andCei;ar,er,r;ndC;ro;en;eDrecC;ht;rt8;dd3in,n,sC;taC;ir;ni;dDm6;ar;an,en;ad,eC;d,t;in;so;aGi,olErDvC;ik;ian8;f8ph;!o;mCn;!a;dGeFraDuC;!bakr,lfazl;hCm;am;!l;allFel,oulaye,ulC;!lDrahm0;an;ah,o;ah;av,on",Uncountable:"true0:2E;1:2L;2:33;a2Ub2Lc29d22e1Rf1Ng1Eh16i11j0Yk0Wl0Rm0Hn0Do0Cp03rZsLt9uran2Jv7w3you gu0E;a5his17i4oo3;d,l;ldlife,ne;rm8t1;apor,ernacul29i3;neg28ol1Otae;eDhBiAo8r4un3yranny;a,gst1B;aff2Oea1Ko4ue nor3;th;o08u3;bleshoot2Ose1Tt;night,othpas1Vwn3;foEsfoE;me off,n;er3und1;e,mod2S;a,nnis;aDcCeBhAi9ki8o7p6t4u3weepstak0;g1Unshi2Hshi;ati08e3;am,el;ace2Keci0;ap,cc1meth2C;n,ttl0;lk;eep,ingl0or1C;lf,na1Gri0;ene1Kisso1C;d0Wfe2l4nd,t3;i0Iurn;m1Ut;abi0e4ic3;e,ke15;c3i01laxa11search;ogni10rea10;a9e8hys7luto,o5re3ut2;amble,mis0s3ten20;en1Zs0L;l3rk;i28l0EyH; 16i28;a24tr0F;nt3ti0M;i0s;bstetri24vercrowd1Qxyg09;a5e4owada3utella;ys;ptu1Ows;il poliZtional securi2;aAe8o5u3;m3s1H;ps;n3o1K;ey,o3;gamy;a3cha0Elancholy,rchandi1Htallurgy;sl0t;chine3g1Aj1Hrs,thema1Q; learn1Cry;aught1e6i5ogi4u3;ck,g12;c,s1M;ce,ghtn18nguis1LteratWv1;ath1isVss;ara0EindergartPn3;icke0Aowled0Y;e3upit1;a3llyfiGwel0G;ns;ce,gnor6mp5n3;forma00ter3;net,sta07;atiSort3rov;an18;a7e6isto09o3ung1;ckey,mework,ne4o3rseradi8spitali2use arrest;ky;s2y;adquarteXre;ir,libut,ppiHs3;hi3te;sh;ene8l6o5r3um,ymnas11;a3eZ;niUss;lf,re;ut3yce0F;en; 3ti0W;edit0Hpo3;ol;aNicFlour,o4urnit3;ure;od,rgive3uri1wl;ness;arCcono0LducaBlectr9n7quip8thi0Pvery6x3;ist4per3;ti0B;en0J;body,o08th07;joy3tertain3;ment;ici2o3;ni0H;tiS;nings,th;emi02i6o4raugh3ynas2;ts;pe,wnstai3;rs;abet0ce,s3;honZrepu3;te;aDelciChAivi07l8o3urrency;al,ld w6mmenta5n3ral,ttIuscoB;fusiHt 3;ed;ry;ar;assi01oth0;es;aos,e3;eMwK;us;d,rO;a8i6lood,owlHread5u3;ntGtt1;er;!th;lliarJs3;on;g3ss;ga3;ge;cKdviJeroGirFmBn6ppeal court,r4spi3thleL;rin;ithmet3sen3;ic;i6y3;o4th3;ing;ne;se;en5n3;es2;ty;ds;craft;bi8d3nau7;yna3;mi6;ce;id,ous3;ti3;cs",Infinitive:"true0:9G;1:9T;2:AD;3:90;4:9Z;5:84;6:AH;7:A9;8:92;9:A0;A:AG;B:AI;C:9V;D:8R;E:8O;F:97;G:6H;H:7D;a94b8Hc7Jd68e4Zf4Mg4Gh4Ai3Qj3Nk3Kl3Bm34nou48o2Vp2Equ2Dr1Es0CtZuTvRwI;aOeNiLors5rI;eJiI;ng,te;ak,st3;d5e8TthI;draw,er;a2d,ep;i2ke,nIrn;d1t;aIie;liADniAry;nJpI;ho8Llift;cov1dJear8Hfound8DlIplug,rav82tie,ve94;eaAo3X;erIo;cut,go,staAFvalA3w2G;aSeQhNoMrIu73;aIe72;ffi3Smp3nsI;aBfo7CpI;i8oD;pp3ugh5;aJiJrIwaD;eat5i2;nk;aImA0;ch,se;ck3ilor,keImp1r8L;! paD;a0Ic0He0Fh0Bi0Al08mugg3n07o05p02qu01tUuLwI;aJeeIim;p,t5;ll7Wy;bNccMffLggeCmmKppJrI;mouFpa6Zvi2;o0re6Y;ari0on;er,i4;e7Numb;li9KmJsiIveD;de,st;er9it;aMe8MiKrI;ang3eIi2;ng27w;fIng;f5le;b,gg1rI;t3ve;a4AiA;a4UeJit,l7DoI;il,of;ak,nd;lIot7Kw;icEve;atGeak,i0O;aIi6;m,y;ft,ng,t;aKi6CoJriIun;nk,v6Q;ot,rt5;ke,rp5tt1;eIll,nd,que8Gv1w;!k,m;aven9ul8W;dd5tis1Iy;a0FeKiJoI;am,t,ut;d,p5;a0Ab08c06d05f01group,hea00iZjoi4lXmWnVpTq3MsOtMup,vI;amp,eJiIo3B;sEve;l,rI;e,t;i8rI;ie2ofE;eLiKpo8PtIurfa4;o24rI;aHiBuctu8;de,gn,st;mb3nt;el,hra0lIreseF;a4e71;d1ew,o07;aHe3Fo2;a7eFiIo6Jy;e2nq41ve;mbur0nf38;r0t;inKleBocus,rJuI;el,rbiA;aBeA;an4e;aBu4;ei2k8Bla43oIyc3;gni39nci3up,v1;oot,uI;ff;ct,d,liIp;se,ze;tt3viA;aAenGit,o7;aWerUinpoiFlumm1LoTrLuI;b47ke,niArIt;poDsuI;aFe;eMoI;cKd,fe4XhibEmo7noJpo0sp1tru6vI;e,i6o5L;un4;la3Nu8;aGclu6dJf1occupy,sup0JvI;a6BeF;etermi4TiB;aGllu7rtr5Ksse4Q;cei2fo4NiAmea7plex,sIva6;eve8iCua6;mp1rItrol,ve;a6It6E;bOccuNmEpMutLverIwe;l07sJtu6Yu0wI;helm;ee,h1F;gr5Cnu2Cpa4;era7i4Ipo0;py,r;ey,seItaH;r2ss;aMe0ViJoIultiply;leCu6Pw;micJnIspla4;ce,g3us;!k;iIke,na9;m,ntaH;aPeLiIo0u3N;ke,ng1quIv5;eIi6S;fy;aKnIss5;d,gI;th5;rn,ve;ng2Gu1N;eep,idnJnI;e4Cow;ap;oHuI;gg3xtaI;po0;gno8mVnIrk;cTdRfQgeChPitia7ju8q1CsNtKun6EvI;a6eIo11;nt,rt,st;erJimi6BoxiPrI;odu4u6;aBn,pr03ru6C;iCpi8tIu8;all,il,ruB;abEibE;eCo3Eu0;iIul9;ca7;i7lu6;b5Xmer0pI;aLer4Uin9ly,oJrI;e3Ais6Bo2;rt,se,veI;riA;le,rt;aLeKiIoiCuD;de,jaInd1;ck;ar,iT;mp1ng,pp5raIve;ng5Mss;ath1et,iMle27oLrI;aJeIow;et;b,pp3ze;!ve5A;gg3ve;aTer45i5RlSorMrJuI;lf4Cndrai0r48;eJiIolic;ght5;e0Qsh5;b3XeLfeEgJsI;a3Dee;eIi2;!t;clo0go,shIwa4Z;ad3F;att1ee,i36;lt1st5;a0OdEl0Mm0FnXquip,rWsVtGvTxI;aRcPeDhOiNpJtIu6;ing0Yol;eKi8lIo0un9;aHoI;it,re;ct,di7l;st,t;a3oDu3B;e30lI;a10u6;lt,mi28;alua7oI;ke,l2;chew,pou0tab19;a0u4U;aYcVdTfSgQhan4joy,lPqOrNsuMtKvI;e0YisI;a9i50;er,i4rI;aHenGuC;e,re;iGol0F;ui8;ar9iC;a9eIra2ulf;nd1;or4;ang1oIu8;r0w;irc3lo0ou0ErJuI;mb1;oaGy4D;b3ct;bKer9pI;hasiIow1;ze;aKody,rI;a4oiI;d1l;lm,rk;ap0eBuI;ci40de;rIt;ma0Rn;a0Re04iKo,rIwind3;aw,ed9oI;wn;agno0e,ff1g,mi2Kne,sLvI;eIul9;rIst;ge,t;aWbVcQlod9mant3pNru3TsMtI;iIoDu37;lJngI;uiA;!l;ol2ua6;eJlIo0ro2;a4ea0;n0r0;a2Xe36lKoIu0S;uIv1;ra9;aIo0;im;a3Kur0;b3rm;af5b01cVduBep5fUliTmQnOpMrLsiCtaGvI;eIol2;lop;ch;a20i2;aDiBloIoD;re,y;oIy;te,un4;eJoI;liA;an;mEv1;a4i0Ao06raud,y;ei2iMla8oKrI;ee,yI;!pt;de,mIup3;missi34po0;de,ma7ph1;aJrief,uI;g,nk;rk;mp5rk5uF;a0Dea0h0Ai09l08oKrIurta1G;a2ea7ipp3uI;mb3;ales4e04habEinci6ll03m00nIrro6;cXdUfQju8no7qu1sLtKvI;eIin4;ne,r9y;aHin2Bribu7;er2iLoli2Epi8tJuI;lt,me;itu7raH;in;d1st;eKiJoIroFu0;rm;de,gu8rm;ss;eJoI;ne;mn,n0;eIlu6ur;al,i2;buCe,men4pI;eIi3ly;l,te;eBi6u6;r4xiC;ean0iT;rcumveFte;eJirp,oI;o0p;riAw;ncIre5t1ulk;el;a02eSi6lQoPrKuI;iXrIy;st,y;aLeaKiJoad5;en;ng;stfeLtX;ke;il,l11mba0WrrMth1;eIow;ed;!coQfrie1LgPhMliLqueaKstJtrIwild1;ay;ow;th;e2tt3;a2eJoI;ld;ad;!in,ui3;me;bysEckfi8ff3tI;he;b15c0Rd0Iff0Ggree,l0Cm09n03ppZrXsQttOuMvJwaE;it;eDoI;id;rt;gIto0X;meF;aIeCraB;ch,in;pi8sJtoI;niA;aKeIi04u8;mb3rt,ss;le;il;re;g0Hi0ou0rI;an9i2;eaKly,oiFrI;ai0o2;nt;r,se;aMi0GnJtI;icipa7;eJoIul;un4y;al;ly0;aJu0;se;lga08ze;iKlI;e9oIu6;t,w;gn;ix,oI;rd;a03jNmiKoJsoI;rb;pt,rn;niIt;st1;er;ouJuC;st;rn;cLhie2knowled9quiItiva7;es4re;ce;ge;eQliOoKrJusI;e,tom;ue;mIst;moJpI;any,liA;da7;ma7;te;pt;andPduBet,i6oKsI;coKol2;ve;liArt,uI;nd;sh;de;ct;on",Person:"true0:1Q;a29b1Zc1Md1Ee18f15g13h0Ri0Qj0Nk0Jl0Gm09n06o05p00rPsItCusain bolt,v9w4xzibit,y1;anni,oko on2uji,v1;an,es;en,o;a3ednesday adams,i2o1;lfram,o0Q;ll ferrell,z khalifa;lt disn1Qr1;hol,r0G;a2i1oltai06;n dies0Zrginia wo17;lentino rossi,n goG;a4h3i2ripp,u1yra banks;lZpac shakur;ger woods,mba07;eresa may,or;kashi,t1ylor;um,ya1B;a5carlett johanss0h4i3lobodan milosevic,no2ocr1Lpider1uperm0Fwami; m0Em0E;op dogg,w whi1H;egfried,nbad;akespeaTerlock holm1Sia labeouf;ddam hussa16nt1;a cla11ig9;aAe6i5o3u1za;mi,n dmc,paul,sh limbau1;gh;bin hood,d stew16nald1thko;in0Mo;han0Yngo starr,valdo;ese witherspo0i1mbrandt;ll2nh1;old;ey,y;chmaninoff,ffi,iJshid,y roma1H;a4e3i2la16o1uff daddy;cahont0Ie;lar,p19;le,rZ;lm17ris hilt0;leg,prah winfr0Sra;a2e1iles cra1Bostradam0J; yo,l5tt06wmQ;pole0s;a5e4i2o1ubar03;by,lie5net,rriss0N;randa ju1tt romn0M;ly;rl0GssiaB;cklemo1rkov,s0ta hari,ya angelou;re;ady gaga,e1ibera0Pu;bron jam0Xch wale1e;sa;anye west,e3i1obe bryant;d cudi,efer suther1;la0P;ats,sha;a2effers0fk,k rowling,rr tolki1;en;ck the ripp0Mwaharlal nehru,y z;liTnez,ron m7;a7e5i3u1;lk hog5mphrey1sa01;! bog05;l1tl0H;de; m1dwig,nry 4;an;ile selassFlle ber4m3rrison1;! 1;ford;id,mo09;ry;ast0iannis,o1;odwPtye;ergus0lorence nightinga08r1;an1ederic chopN;s,z;ff5m2nya,ustaXzeki1;el;eril lagasse,i1;le zatop1nem;ek;ie;a6e4i2octor w1rake;ho;ck w1ego maradoC;olf;g1mi lovaOnzel washingt0;as;l1nHrth vadR;ai lNt0;a8h5lint0o1thulhu;n1olio;an,fuci1;us;on;aucKop2ristian baMy1;na;in;millo,ptain beefhe4r1;dinal wols2son1;! palmF;ey;art;a8e5hatt,i3oHro1;ck,n1;te;ll g1ng crosby;atB;ck,nazir bhut2rtil,yon1;ce;to;nksy,rack ob1;ama;l 6r3shton kutch2vril lavig8yn ra1;nd;er;chimed2istot1;le;es;capo2paci1;no;ne",Adjective:"true0:AI;1:BS;2:BI;3:BA;4:A8;5:84;6:AV;7:AN;8:AF;9:7H;A:BQ;B:AY;C:BC;D:BH;E:9Y;aA2b9Ec8Fd7We79f6Ng6Eh61i4Xj4Wk4Tl4Im41n3Po36p2Oquart7Pr2Ds1Dt14uSvOwFye29;aMeKhIiHoF;man5oFrth7G;dADzy;despreB1n w97s86;acked1UoleF;!sa6;ather1PeFll o70ste1D;!k5;nt1Ist6Ate4;aHeGiFola5T;bBUce versa,gi3Lle;ng67rsa5R;ca1gBSluAV;lt0PnLpHrGsFttermoBL;ef9Ku3;b96ge1; Hb32pGsFtiAH;ca6ide d4R;er,i85;f52to da2;a0Fbeco0Hc0Bd04e02f01gu1XheaBGiXkn4OmUnTopp06pRrNsJtHus0wF;aFiel3K;nt0rra0P;app0eXoF;ld,uS;eHi37o5ApGuF;perv06spec39;e1ok9O;en,ttl0;eFu5;cogn06gul2RlGqu84sF;erv0olv0;at0en33;aFrecede0E;id,rallel0;am0otic0;aFet;rri0tF;ch0;nFq26vers3;sur0terFv7U;eFrupt0;st0;air,inish0orese98;mploy0n7Ov97xpF;ect0lain0;eHisFocume01ue;clFput0;os0;cid0rF;!a8Scov9ha8Jlyi8nea8Gprivileg0sMwF;aFei9I;t9y;hGircumcFonvin2U;is0;aFeck0;lleng0rt0;b20ppea85ssuGttend0uthorF;iz0;mi8;i4Ara;aLeIhoHip 25oGrF;anspare1encha1i2;geth9leADp notch,rpB;rny,ugh6H;ena8DmpGrFs6U;r49tia4;eCo8P;leFst4M;nt0;a0Dc09e07h06i04ki03l01mug,nobbi4XoVpRqueami4XtKuFymb94;bHccinAi generis,pFr5;erFre7N;! dup9b,vi70;du0li7Lp6IsFurb7J;eq9Atanda9X;aKeJi16o2QrGubboFy4Q;rn;aightFin5GungS; fFfF;or7V;adfa9Pri6;lwa6Ftu82;arHeGir6NlendBot Fry;on;c3Qe1S;k5se; call0lImb9phistic16rHuFviV;ndFth1B;proof;dBry;dFub6; o2A;e60ipF;pe4shod;ll0n d7R;g2HnF;ceEg6ist9;am3Se9;co1Zem5lfFn6Are7; suf4Xi43;aGholFient3A;ar5;rlFt4A;et;cr0me,tisfac7F;aOeIheumatoBiGoF;bu8Ztt7Gy3;ghtFv3; 1Sf6X;cJdu8PlInown0pro69sGtF;ard0;is47oF;lu2na1;e1Suc45;alcit8Xe1ondi2;bBci3mpa1;aSePicayu7laOoNrGuF;bl7Tnjabi;eKiIoF;b7VfGmi49pFxi2M;er,ort81;a7uD;maFor,sti7va2;!ry;ciDexis0Ima2CpaB;in55puli8G;cBid;ac2Ynt 3IrFti2;ma40tFv7W;!i3Z;i2YrFss7R;anoBtF; 5XiF;al,s5V;bSffQkPld OnMrLth9utKverF;!aIbMdHhGni75seas,t,wF;ei74rou74;a63e7A;ue;ll;do1Ger,si6A;d3Qg2Aotu5Z; bFbFe on o7g3Uli7;oa80;fashion0school;!ay; gua7XbFha5Uli7;eat;eHligGsF;ce7er0So1C;at0;diFse;a1e1;aOeNiMoGuF;anc0de; moEnHrthFt6V;!eFwe7L;a7Krn;chaGdescri7Iprof30sF;top;la1;ght5;arby,cessa4ighbor5wlyw0xt;k0usiaFv3;ti8;aQeNiLoHuF;dIltiF;facet0p6;deHlGnFot,rbBst;ochro4Xth5;dy;rn,st;ddle ag0nF;dbloZi,or;ag9diocEga,naGrFtropolit4Q;e,ry;ci8;cIgenta,inHj0Fkeshift,mmGnFri4Oscu61ver18;da5Dy;ali4Lo4U;!stream;abEho;aOeLiIoFumberi8;ngFuti1R;stan3RtF;erm,i4H;ghtGteraF;l,ry,te;heart0wei5O;ft JgFss9th3;al,eFi0M;nda4;nguBps0te5;apGind5noF;wi8;ut;ad0itte4uniW;ce co0Hgno6Mll0Cm04nHpso 2UrF;a2releF;va1; ZaYcoWdReQfOgrNhibi4Ri05nMoLsHtFvalu5M;aAeF;nDrdepe2K;a7iGolFuboI;ub6ve1;de,gF;nifica1;rdi5N;a2er;own;eriIiLluenVrF;ar0eq5H;pt,rt;eHiGoFul1O;or;e,reA;fiFpe26termi5E;ni2;mpFnsideCrreA;le2;ccuCdeq5Ene,ppr4J;fFsitu,vitro;ro1;mJpF;arHeGl15oFrop9;li2r11;n2LrfeA;ti3;aGeFi18;d4BnD;tuE;egGiF;c0YteC;al,iF;tiF;ma2;ld;aOelNiLoFuma7;a4meInHrrGsFur5;ti6;if4E;e58o3U; ma3GsF;ick;ghfalut2HspF;an49;li00pf33;i4llow0ndGrdFtM; 05coEworki8;sy,y;aLener44iga3Blob3oKrGuF;il1Nng ho;aFea1Fizzl0;cGtF;ef2Vis;ef2U;ld3Aod;iFuc2D;nf2R;aVeSiQlOoJrF;aGeFil5ug3;q43tf2O;gFnt3S;i6ra1;lk13oHrF; keeps,eFge0Vm9tu41;g0Ei2Ds3R;liF;sh;ag4Mowe4uF;e1or45;e4nF;al,i2;d Gmini7rF;ti6ve1;up;bl0lDmIr Fst pac0ux;oGreacF;hi8;ff;ed,ili0R;aXfVlTmQnOqu3rMthere3veryday,xF;aApIquisi2traHuF;be48lF;ta1;!va2L;edRlF;icF;it;eAstF;whi6; Famor0ough,tiE;rou2sui2;erGiF;ne1;ge1;dFe2Aoq34;er5;ficF;ie1;g9sF;t,ygF;oi8;er;aWeMiHoGrFue;ea4owY;ci6mina1ne,r31ti8ubQ;dact2Jfficult,m,sGverF;ge1se;creGePjoi1paCtF;a1inA;et,te; Nadp0WceMfiLgeneCliJmuEpeIreliAsGvoF;id,ut;pFtitu2ul1L;eCoF;nde1;ca2ghF;tf13;a1ni2;as0;facto;i5ngero0I;ar0Ce09h07i06l05oOrIuF;rmudgeon5stoma4teF;sy;ly;aIeHu1EystalF; cleFli7;ar;epy;fFv17z0;ty;erUgTloSmPnGrpoCunterclVveFy;rt;cLdJgr21jIsHtrF;aFi2;dic0Yry;eq1Yta1;oi1ug3;escenFuN;di8;a1QeFiD;it0;atoDmensuCpF;ass1SulF;so4;ni3ss3;e1niza1;ci1J;ockwiD;rcumspeAvil;eFintzy;e4wy;leGrtaF;in;ba2;diac,ef00;a00ePiLliJoGrFuck nak0;and new,isk,on22;gGldface,naF; fi05fi05;us;nd,tF;he;gGpartisFzarE;an;tiF;me;autifOhiNlLnHsFyoN;iWtselF;li8;eGiFt;gn;aFfi03;th;at0oF;v0w;nd;ul;ckwards,rF;e,rT; priori,b13c0Zd0Tf0Ng0Ihe0Hl09mp6nt06pZrTsQttracti0MuLvIwF;aGkF;wa1B;ke,re;ant garGeraF;ge;de;diIsteEtF;heFoimmu7;nt07;re;to4;hGlFtu2;eep;en;bitIchiv3roHtF;ifiFsy;ci3;ga1;ra4;ry;pFt;aHetizi8rF;oprF;ia2;llFre1;ed,i8;ng;iquFsy;at0e;ed;cohKiJkaHl,oGriFterX;ght;ne,of;li7;ne;ke,ve;olF;ic;ad;ain07gressiIi6rF;eeF;ab6;le;ve;fGraB;id;ectGlF;ue1;ioF;na2; JaIeGvF;erD;pt,qF;ua2;ma1;hoc,infinitum;cuCquiGtu3u2;al;esce1;ra2;erSjeAlPoNrKsGuF;nda1;e1olu2trF;aAuD;se;te;eaGuF;pt;st;aFve;rd;aFe;ze;ct;ra1;nt",Pronoun:"trueelle,h3i2me,she,th0us,we,you;e0ou;e,m,y;!l,t;e,im",Preposition:"trueaPbMcLdKexcept,fIinGmid,notwithstandiWoDpXqua,sCt7u4v2w0;/o,hereSith0;! whHin,oW;ersus,i0;a,s a vis;n1p0;!on;like,til;h1ill,oward0;!s;an,ereby,r0;ough0u;!oM;ans,ince,o that,uch G;f1n0ut;!to;!f;! 0to;effect,part;or,r0;om;espite,own,u3;hez,irca;ar1e0oBy;sides,tween;ri7;bo8cross,ft7lo6m4propos,round,s1t0;!op;! 0;a whole,long 0;as;id0ong0;!st;ng;er;ut",SportsTeam:"true0:18;1:1E;2:1D;3:14;a1Db15c0Sd0Kfc dallas,g0Ihouston 0Hindiana0Gjacksonville jagua0k0El0Am01new UoRpKqueens parkJreal salt lake,sBt6utah jazz,vancouver whitecaps,w4yW;ashington 4h10;natio1Mredski2wizar0W;ampa bay 7e6o4;ronto 4ttenham hotspur;blue ja0Mrapto0;nnessee tita2xasD;buccanee0ra0K;a8eattle 6porting kansas0Wt4; louis 4oke0V;c1Drams;marine0s4;eah13ounH;cramento Rn 4;antonio spu0diego 4francisco gJjose earthquak1;char08paB; ran07;a9h6ittsburgh 5ortland t4;imbe0rail blaze0;pirat1steele0;il4oenix su2;adelphia 4li1;eagl1philNunE;dr1;akland 4klahoma city thunder,rlando magic;athle0Lrai4;de0;england 8orleans 7york 4;g5je3knYme3red bul0Xy4;anke1;ian3;pelica2sain3;patrio3revolut4;ion;anchEeAi4ontreal impact;ami 8lwaukee b7nnesota 4;t5vi4;kings;imberwolv1wi2;rewe0uc0J;dolphi2heat,marli2;mphis grizz4ts;li1;a6eic5os angeles 4;clippe0dodFlaB;esterV; galaxy,ke0;ansas city 4nF;chiefs,roya0D; pace0polis col3;astr05dynamo,rocke3texa2;olden state warrio0reen bay pac4;ke0;allas 8e4i04od6;nver 6troit 4;lio2pisto2ti4;ge0;broncYnugge3;cowbo5maver4;icZ;ys;arEelLhAincinnati 8leveland 6ol4;orado r4umbus crew sc;api7ocki1;brow2cavalie0guar4in4;dia2;bengaVre4;ds;arlotte horAicago 4;b5cubs,fire,wh4;iteB;ea0ulQ;diff4olina panthe0; city;altimore Alackburn rove0oston 6rooklyn 4uffalo bilN;ne3;ts;cel5red4; sox;tics;rs;oriol1rave2;rizona Ast8tlanta 4;brav1falco2h4;awA;ns;es;on villa,r4;os;c6di4;amondbac4;ks;ardi4;na4;ls",Unit:"truea07b04cXdWexVfTgRhePinYjoule0BkMlJmDnan08oCp9quart0Bsq ft,t7volts,w6y2ze310;g,s;c,f,n;dVear1o0;ttR; 0s 0;old;att,b;erNon0;!ne02;ascals,e1i0;cXnt00;rcent,tJ;hms,unceY;/s,e4i0m,,;/h,cro2l0;e0liK;!;grLsR;gCtJ;it1u0;menQx;erPreP;b5elvins,ilo1m0notO;/h,ph,;!byGgrEmCs;ct0rtzL;aJogrC;allonJb0ig3rB;ps;a0emtEl oz,t4;hrenheit,radG;aby9;eci3m1;aratDe1m0oulombD;,;lsius,nti0;gr2lit1m0;et0;er8;am7;b1y0;te5;l,ps;c2tt0;os0;econd1;re0;!s","Noun|Gerund":"true0:3O;1:3M;2:3N;3:3D;4:32;5:2V;6:3E;7:3K;8:36;9:3J;A:3B;a3Pb37c2Jd27e23f1Vg1Sh1Mi1Ij1Gk1Dl18m13n11o0Wp0Pques0Sr0EsTtNunderMvKwFyDzB;eroi0oB;ni0o3P;aw2eB;ar2l3;aEed4hispe5i5oCrB;ap8est3i1;n0ErB;ki0r31;i1r2s9tc9;isualizi0oB;lunt1Vti0;stan4ta6;aFeDhin6iCraBy8;c6di0i2vel1M;mi0p8;aBs1;c9si0;l6n2s1;aUcReQhOiMkatKl2Wmo6nowJpeItFuCwB;ea5im37;b35f0FrB;fi0vB;e2Mi2J;aAoryt1KrCuB;d2KfS;etc9ugg3;l3n4;bCi0;ebBi0;oar4;gnBnAt1;a3i0;ip8oB;p8rte2u1;a1r27t1;hCo5reBulp1;a2Qe2;edu3oo3;i3yi0;aKeEi4oCuB;li0n2;oBwi0;fi0;aFcEhear7laxi0nDpor1sB;pon4tructB;r2Iu5;de5;or4yc3;di0so2;p8ti0;aFeacek20laEoCrBublis9;a1Teten4in1oces7;iso2siB;tio2;n2yi0;ckaAin1rB;ki0t1O;fEpeDrganiCvB;erco24ula1;si0zi0;ni0ra1;fe5;avi0QeBur7;gotia1twor6;aDeCi2oB;de3nito5;a2dita1e1ssaA;int0XnBrke1;ifUufactu5;aEeaDiBodAyi0;cen7f1mi1stB;e2i0;r2si0;n4ug9;iCnB;ea4it1;c6l3;ogAuB;dAgg3stif12;ci0llust0VmDnBro2;nova1sp0NterBven1;ac1vie02;agi2plo4;aDea1iCoBun1;l4w3;ki0ri0;nd3rB;roWvB;es1;aCene0Lli4rBui4;ee1ie0N;rde2the5;aHeGiDlCorBros1un4;e0Pmat1;ir1oo4;gh1lCnBs9;anZdi0;i0li0;e3nX;r0Zscina1;a1du01nCxB;erci7plo5;chan1di0ginB;ee5;aLeHiGoub1rCum8wB;el3;aDeCiB;bb3n6vi0;a0Qs7;wi0;rTscoDvi0;ba1coZlBvelo8;eCiB;ve5;ga1;nGti0;aVelebUhSlPoDrBur3yc3;aBos7yi0;f1w3;aLdi0lJmFnBo6pi0ve5;dDsCvinB;ci0;trBul1;uc1;muniDpB;lBo7;ai2;ca1;lBo5;ec1;c9ti0;ap8eaCimToBubT;ni0t9;ni0ri0;aBee5;n1t1;ra1;m8rCs1te5;ri0;vi0;aPeNitMlLoGrDuB;dge1il4llBr8;yi0;an4eat9oadB;cas1;di0;a1mEokB;i0kB;ee8;pi0;bi0;es7oa1;c9i0;gin2lonAt1;gi0;bysit1c6ki0tt3;li0;ki0;bando2cGdverti7gi0pproac9rgDssuCtB;trac1;mi0;ui0;hi0;si0;coun1ti0;ti0;ni0;ng",PhrasalVerb:"true0:92;1:96;2:8H;3:8V;4:8A;5:83;6:85;7:98;8:90;9:8G;A:8X;B:8R;C:8U;D:8S;E:70;F:97;G:8Y;H:81;I:7H;J:79;a9Fb7Uc6Rd6Le6Jf5Ig50h4Biron0j47k40l3Em31n2Yo2Wp2Cquiet Hr1Xs0KtZuXvacuu6QwNyammerBzK;ero Dip LonK;e0k0;by,ov9up;aQeMhLiKor0Mrit19;mp0n3Fpe0r5s5;ackAeel Di0S;aLiKn33;gh 3Wrd0;n Dr K;do1in,oJ;it 79k5lk Lrm 69sh Kt83v60;aw3do1o7up;aw3in,oC;rgeBsK;e 2herE;a00eYhViRoQrMuKypP;ckErn K;do1in,oJup;aLiKot0y 30;ckl7Zp F;ck HdK;e 5Y;n7Wp 3Es5K;ck MdLe Kghten 6me0p o0Rre0;aw3ba4do1in,up;e Iy 2;by,oG;ink Lrow K;aw3ba4in,up;ba4ov9up;aKe 77ll62;m 2r 5M;ckBke Llk K;ov9shit,u47;aKba4do1in,leave,o4Dup;ba4ft9pa69w3;a0Vc0Te0Mh0Ii0Fl09m08n07o06p01quar5GtQuOwK;earMiK;ngLtch K;aw3ba4o8K; by;cKi6Bm 2ss0;k 64;aReQiPoNrKud35;aigh2Det75iK;ke 7Sng K;al6Yup;p Krm2F;by,in,oG;c3Ln3Lr 2tc4O;p F;c3Jmp0nd LrKveAy 2O;e Ht 2L;ba4do1up;ar3GeNiMlLrKurB;ead0ingBuc5;a49it 6H;c5ll o3Cn 2;ak Fe1Xll0;a3Bber 2rt0und like;ap 5Vow Duggl5;ash 6Noke0;eep NiKow 6;cLp K;o6Dup;e 68;in,oK;ff,v9;de19gn 4NnKt 6Gz5;gKkE; al6Ale0;aMoKu5W;ot Kut0w 7M;aw3ba4f48oC;c2WdeEk6EveA;e Pll1Nnd Orv5tK; Ktl5J;do1foLin,o7upK;!on;ot,r5Z;aw3ba4do1in,o33up;oCto;al66out0rK;ap65ew 6J;ilAv5;aXeUiSoOuK;b 5Yle0n Kstl5;aLba4do1inKo2Ith4Nu5P;!to;c2Xr8w3;ll Mot LpeAuK;g3Ind17;a2Wf3Po7;ar8in,o7up;ng 68p oKs5;ff,p18;aKelAinEnt0;c6Hd K;o4Dup;c27t0;aZeYiWlToQrOsyc35uK;ll Mn5Kt K;aKba4do1in,oJto47up;pa4Dw3;a3Jdo1in,o21to45up;attleBess KiNop 2;ah2Fon;iLp Kr4Zu1Gwer 6N;do1in,o6Nup;nt0;aLuK;gEmp 6;ce u20y 6D;ck Kg0le 4An 6p5B;oJup;el 5NncilE;c53ir 39n0ss MtLy K;ba4oG; Hc2R;aw3ba4in,oJ;pKw4Y;e4Xt D;aLerd0oK;dAt53;il Hrrow H;aTeQiPoLuK;ddl5ll I;c1FnkeyMp 6uthAve K;aKdo1in,o4Lup;l4Nw3; wi4K;ss0x 2;asur5e3SlLss K;a21up;t 6;ke Ln 6rKs2Ax0;k 6ryA;do,fun,oCsure,up;a02eViQoLuK;ck0st I;aNc4Fg MoKse0;k Kse4D;aft9ba4do1forw37in56o0Zu46;in,oJ;d 6;e NghtMnLsKve 00;ten F;e 2k 2; 2e46;ar8do1in;aMt LvelK; oC;do1go,in,o7up;nEve K;in,oK;pKut;en;c5p 2sh LtchBughAy K;do1o59;in4Po7;eMick Lnock K;do1oCup;oCup;eLy K;in,up;l Ip K;aw3ba4do1f04in,oJto,up;aMoLuK;ic5mpE;ke3St H;c43zz 2;a01eWiToPuK;nLrrKsh 6;y 2;keLt K;ar8do1;r H;lKneErse3K;d Ke 2;ba4dKfast,o0Cup;ear,o1;de Lt K;ba4on,up;aw3o7;aKlp0;d Ml Ir Kt 2;fKof;rom;f11in,o03uW;cPm 2nLsh0ve Kz2P;at,it,to;d Lg KkerP;do1in,o2Tup;do1in,oK;ut,v9;k 2;aZeTive Rloss IoMrLunK; f0S;ab hold,in43ow 2U; Kof 2I;aMb1Mit,oLr8th1IuK;nd9;ff,n,v9;bo7ft9hQw3;aw3bKdo1in,oJrise,up,w3;a4ir2H;ar 6ek0t K;aLb1Fdo1in,oKr8up;ff,n,ut,v9;cLhKl2Fr8t,w3;ead;ross;d aKng 2;bo7;a0Ee07iYlUoQrMuK;ck Ke2N;ar8up;eLighten KownBy 2;aw3oG;eKshe27; 2z5;g 2lMol Krk I;aKwi20;bo7r8;d 6low 2;aLeKip0;sh0;g 6ke0mKrKtten H;e F;gRlPnNrLsKzzle0;h F;e Km 2;aw3ba4up;d0isK;h 2;e Kl 1T;aw3fPin,o7;ht ba4ure0;ePnLsK;s 2;cMd K;fKoG;or;e D;d04l 2;cNll Krm0t1G;aLbKdo1in,o09sho0Eth08victim;a4ehi2O;pa0C;e K;do1oGup;at Kdge0nd 12y5;in,o7up;aOi1HoNrK;aLess 6op KuN;aw3b03in,oC;gBwB; Ile0ubl1B;m 2;a0Ah05l02oOrLut K;aw3ba4do1oCup;ackBeep LoKy0;ss Dwd0;by,do1in,o0Uup;me NoLuntK; o2A;k 6l K;do1oG;aRbQforOin,oNtKu0O;hLoKrue;geth9;rough;ff,ut,v9;th,wK;ard;a4y;paKr8w3;rt;eaLose K;in,oCup;n 6r F;aNeLiK;ll0pE;ck Der Kw F;on,up;t 2;lRncel0rOsMtch LveE; in;o1Nup;h Dt K;doubt,oG;ry LvK;e 08;aw3oJ;l Km H;aLba4do1oJup;ff,n,ut;r8w3;a0Ve0MiteAl0Fo04rQuK;bblNckl05il0Dlk 6ndl05rLsKtMy FzzA;t 00;n 0HsK;t D;e I;ov9;anWeaUiLush K;oGup;ghQng K;aNba4do1forMin,oLuK;nd9p;n,ut;th;bo7lKr8w3;ong;teK;n 2;k K;do1in,o7up;ch0;arTg 6iRn5oPrNssMttlLunce Kx D;aw3ba4;e 6; ar8;e H;do1;k Dt 2;e 2;l 6;do1up;d 2;aPeed0oKurt0;cMw K;aw3ba4do1o7up;ck;k K;in,oC;ck0nk0stA; oQaNef 2lt0nd K;do1ov9up;er;up;r Lt K;do1in,oCup;do1o7;ff,nK;to;ck Pil0nMrgLsK;h D;ainBe D;g DkB; on;in,o7;aw3do1in,oCup;ff,ut;ay;ct FdQir0sk MuctionA; oG;ff;ar8o7;ouK;nd; o7;d K;do1oKup;ff,n;wn;o7up;ut",ProperNoun:"trueaIbDc8dalhousHe7f5gosford,h4iron maiden,kirby,landsdowne,m2nis,r1s0wembF;herwood,paldiB;iel,othwe1;cgi0ercedes,issy;ll;intBudsB;airview,lorence,ra0;mpt9nco;lmo,uro;a1h0;arlt6es5risti;rl0talina;et4i0;ng;arb3e0;et1nt0rke0;ley;on;ie;bid,jax","Person|Place":"truea8d6h4jordan,k3orlando,s1vi0;ctor9rgin9;a0ydney;lvador,mara,ntia4;ent,obe;amil0ous0;ton;arw2ie0;go;lexandr1ust0;in;ia",LastName:"true0:BR;1:BF;2:B5;3:BH;4:AX;5:9Y;6:B6;7:BK;8:B0;9:AV;A:AL;B:8Q;C:8G;D:7K;E:BM;F:AH;aBDb9Zc8Wd88e81f7Kg6Wh64i60j5Lk4Vl4Dm39n2Wo2Op25quispe,r1Ls0Pt0Ev03wTxSyKzG;aIhGimmerm6A;aGou,u;ng,o;khar5ytsE;aKeun9BiHoGun;koya32shiBU;!lG;diGmaz;rim,z;maGng;da,g52mo83sGzaC;aChiBV;iao,u;aLeJiHoGright,u;jcA5lff,ng;lGmm0nkl0sniewsC;kiB1liams33s3;bGiss,lt0;b,er,st0;a6Vgn0lHtG;anabe,s3;k0sh,tG;e2Non;aLeKiHoGukD;gt,lk5roby5;dHllalGnogr3Kr1Css0val3S;ba,ob1W;al,ov4;lasHsel8W;lJn dIrgBEsHzG;qu7;ilyEqu7siljE;en b6Aijk,yk;enzueAIverde;aPeix1VhKi2j8ka43oJrIsui,uG;om5UrG;c2n0un1;an,emblA7ynisC;dorAMlst3Km4rrAth;atch0i8UoG;mHrG;are84laci79;ps3sG;en,on;hirDkah9Mnaka,te,varA;a06ch01eYhUiRmOoMtIuHvGzabo;en9Jobod3N;ar7bot4lliv2zuC;aIeHoG;i7Bj4AyanAB;ele,in2FpheBvens25;l8rm0;kol5lovy5re7Tsa,to,uG;ng,sa;iGy72;rn5tG;!h;l71mHnGrbu;at9cla9Egh;moBo7M;aIeGimizu;hu,vchG;en8Luk;la,r1G;gu9infe5YmGoh,pulveA7rra5P;jGyG;on5;evi6iltz,miHneid0roed0uGwarz;be3Elz;dHtG;!t,z;!t;ar4Th8ito,ka4OlJnGr4saCto,unde19v4;ch7dHtGz;a5Le,os;b53e16;as,ihDm4Po0Y;aVeSiPoJuHyG;a6oo,u;bio,iz,sG;so,u;bKc8Fdrigue67ge10j9YmJosevelt,sItHux,wG;e,li6;a9Ch;enb4Usi;a54e4L;erts15i93;bei4JcHes,vGzzo;as,e9;ci,hards12;ag2es,iHut0yG;es,nol5N;s,t0;dImHnGsmu97v6C;tan1;ir7os;ic,u;aUeOhMiJoHrGut8;asad,if6Zochazk27;lishc2GpGrti72u10we76;e3Aov51;cHe45nG;as,to;as70hl0;aGillips;k,m,n6I;a3Hde3Wete0Bna,rJtG;ersHrovGters54;!a,ic;!en,on;eGic,kiBss3;i9ra,tz,z;h86k,padopoulIrk0tHvG;ic,l4N;el,te39;os;bMconn2Ag2TlJnei6PrHsbor6XweBzG;dem7Rturk;ella4DtGwe6N;ega,iz;iGof7Hs8I;vGyn1R;ei9;aSri1;aPeNiJoGune50ym2;rHvGwak;ak4Qik5otn66;odahl,r4S;cholsZeHkolGls4Jx3;ic,ov84;ls1miG;!n1;ils3mG;co4Xec;gy,kaGray2sh,var38;jiGmu9shiG;ma;a07c04eZiWoMuHyeG;rs;lJnIrGssoli6S;atGp03r7C;i,ov4;oz,te58;d0l0;h2lOnNo0RrHsGza1A;er,s;aKeJiIoz5risHtG;e56on;!on;!n7K;au,i9no,t5J;!lA;r1Btgome59;i3El0;cracFhhail5kkeHlG;l0os64;ls1;hmeJiIj30lHn3Krci0ssiGyer2N;!er;n0Po;er,j0;dDti;cartHlG;aughl8e2;hy;dQe7Egnu68i0jer3TkPmNnMrItHyG;er,r;ei,ic,su21thews;iHkDquAroqu8tinG;ez,s;a5Xc,nG;!o;ci5Vn;a5UmG;ad5;ar5e6Kin1;rig77s1;aVeOiLoJuHyG;!nch;k4nGo;d,gu;mbarGpe3Fvr4we;di;!nGu,yana2B;coln,dG;b21holm,strom;bedEfeKhIitn0kaHn8rGw35;oy;!j;m11tG;in1on1;bvGvG;re;iGmmy,ng,rs2Qu,voie,ws3;ne,t1F;aZeYh2iWlUnez50oNrJuHvar2woG;k,n;cerGmar68znets5;a,o34;aHem0isGyeziu;h23t3O;m0sni4Fus3KvG;ch4O;bay57ch,rh0Usk16vaIwalGzl5;czGsC;yk;cIlG;!cGen4K;huk;!ev4ic,s;e8uiveG;rt;eff0kGl4mu9nnun1;ucF;ll0nnedy;hn,llKminsCne,pIrHstra3Qto,ur,yGzl5;a,s0;j0Rls22;l2oG;or;oe;aPenOha6im14oHuG;ng,r4;e32hInHrge32u6vG;anD;es,ss3;anHnsG;en,on,t3;nesGs1R;en,s1;kiBnings,s1;cJkob4EnGrv0E;kDsG;en,sG;en0Ion;ks3obs2A;brahimDglesi5Nke5Fl0Qno07oneIshikHto,vanoG;u,v54;awa;scu;aVeOiNjaltal8oIrist50uG;!aGb0ghAynh;m2ng;a6dz4fIjgaa3Hk,lHpUrGwe,x3X;ak1Gvat;mAt;er,fm3WmG;ann;ggiBtchcock;iJmingw4BnHrGss;nand7re9;deGriks1;rs3;kkiHnG;on1;la,n1;dz4g1lvoQmOns0ZqNrMsJuIwHyG;asFes;kiB;g1ng;anHhiG;mo14;i,ov0J;di6p0r10t;ue;alaG;in1;rs1;aVeorgUheorghe,iSjonRoLrJuGw3;errGnnar3Co,staf3Ctierr7zm2;a,eG;ro;ayli6ee2Lg4iffithGub0;!s;lIme0UnHodGrbachE;e,m2;calvAzale0S;dGubE;bGs0E;erg;aj,i;bs3l,mGordaO;en7;iev3U;gnMlJmaIndFo,rGsFuthi0;cGdn0za;ia;ge;eaHlG;agh0i,o;no;e,on;aVerQiLjeldsted,lKoIrHuG;chs,entAji41ll0;eem2iedm2;ntaGrt8urni0wl0;na;emi6orA;lipIsHtzgeraG;ld;ch0h0;ovG;!ic;hatDnanIrG;arGei9;a,i;deY;ov4;b0rre1D;dKinsJriksIsGvaB;cob3GpGtra3D;inoza,osiQ;en,s3;te8;er,is3warG;ds;aXePiNjurhuMoKrisco15uHvorakG;!oT;arte,boHmitru,nn,rGt3C;and,ic;is;g2he0Omingu7nErd1ItG;to;us;aGcki2Hmitr2Ossanayake,x3;s,z; JbnaIlHmirGrvisFvi,w2;!ov4;gado,ic;th;bo0groot,jo6lHsilGvriA;va;a cruz,e3uG;ca;hl,mcevsCnIt2WviG;dGes,s;ov,s3;ielsGku22;!en;ki;a0Be06hRiobQlarkPoIrGunningh1H;awfo0RivGuz;elli;h1lKntJoIrGs2Nx;byn,reG;a,ia;ke,p0;i,rer2K;em2liB;ns;!e;anu;aOeMiu,oIristGu6we;eGiaG;ns1;i,ng,p9uHwGy;!dH;dGng;huJ;!n,onGu6;!g;kJnIpm2ttHudhGv7;ry;erjee,o14;!d,g;ma,raboG;rty;bJl0Cng4rG;eghetHnG;a,y;ti;an,ota1C;cerAlder3mpbeLrIstGvadi0B;iGro;llo;doHl0Er,t0uGvalho;so;so,zo;ll;a0Fe01hYiXlUoNrKuIyG;rLtyG;qi;chan2rG;ke,ns;ank5iem,oGyant;oks,wG;ne;gdan5nIruya,su,uchaHyKziG;c,n5;rd;darGik;enG;ko;ov;aGond15;nco,zG;ev4;ancFshw16;a08oGuiy2;umGwmG;ik;ckRethov1gu,ktPnNrG;gJisInG;ascoGds1;ni;ha;er,mG;anG;!n;gtGit7nP;ss3;asF;hi;er,hG;am;b4ch,ez,hRiley,kk0ldw8nMrIshHtAu0;es;ir;bInHtlGua;ett;es,i0;ieYosa;dGik;a9yoG;padhyG;ay;ra;k,ng;ic;bb0Acos09d07g04kht05lZnPrLsl2tJyG;aHd8;in;la;chis3kiG;ns3;aImstro6sl2;an;ng;ujo,ya;dJgelHsaG;ri;ovG;!a;ersJov,reG;aGjEws;ss1;en;en,on,s3;on;eksejEiyEmeiIvG;ar7es;ez;da;ev;arwHuilG;ar;al;ams,l0;er;ta;as",Ordinal:"trueeBf7nin5s3t0zeroE;enDhir1we0;lfCn7;d,t3;e0ixt8;cond,vent7;et0th;e6ie7;i2o0;r0urt3;tie4;ft1rst;ight0lev1;e0h,ie1;en0;th",Cardinal:"truebEeBf5mEnine7one,s4t0zero;en,h2rDw0;e0o;lve,n5;irt6ousands,ree;even2ix2;i3o0;r1ur0;!t2;ty;ft0ve;e2y;ight0lev1;!e0y;en;illions",Multiple:"trueb3hundred,m3qu2se1t0;housand,r2;pt1xt1;adr0int0;illion",City:"true0:74;1:61;2:6G;3:6J;4:5S;a68b53c4Id48e44f3Wg3Hh39i31j2Wk2Fl23m1Mn1Co19p0Wq0Ur0Os05tRuQvLwDxiBy9z5;a7h5i4Muri4O;a5e5ongsh0;ng3H;greb,nzib5G;ang2e5okoha3Sunfu;katerin3Hrev0;a5n0Q;m5Hn;arsBeAi6roclBu5;h0xi,zh5P;c7n5;d5nipeg,terth4;hoek,s1L;hi5Zkl3A;l63xford;aw;a8e6i5ladivost5Molgogr6L;en3lni6S;ni22r5;o3saill4N;lenc4Wncouv3Sr3ughn;lan bat1Crumqi,trecht;aFbilisi,eEheDiBo9r7u5;l21n63r5;in,ku;i5ondh62;es51poli;kyo,m2Zron1Pulo5;n,uS;an5jua3l2Tmisoa6Bra3;j4Tshui; hag62ssaloni2H;gucigal26hr0l av1U;briz,i6llinn,mpe56ng5rtu,shk2R;i3Esh0;an,chu1n0p2Eyu0;aEeDh8kopje,owe1Gt7u5;ra5zh4X;ba0Ht;aten is55ockholm,rasbou67uttga2V;an8e6i5;jiazhua1llo1m5Xy0;f50n5;ya1zh4H;gh3Kt4Q;att45o1Vv44;cramen16int ClBn5o paulo,ppo3Rrajevo; 7aa,t5;a 5o domin3E;a3fe,m1M;antonio,die3Cfrancisco,j5ped3Nsalvad0J;o5u0;se;em,t lake ci5Fz25;lou58peters24;a9e8i6o5;me,t59;ga,o5yadh;! de janei3F;cife,ims,nn3Jykjavik;b4Sip4lei2Inc2Pwalpindi;ingdao,u5;ez2i0Q;aFeEhDiCo9r7u6yong5;ya1;eb59ya1;a5etor3M;g52to;rt5zn0; 5la4Co;au prin0Melizabe24sa03;ls3Prae5Atts26;iladelph3Gnom pe1Aoenix;ki1tah tik3E;dua,lerYnaji,r4Ot5;na,r32;ak44des0Km1Mr6s5ttawa;a3Vlo;an,d06;a7ew5ing2Fovosibir1Jyc; 5cast36;del24orlea44taip14;g8iro4Wn5pl2Wshv33v0;ch6ji1t5;es,o1;a1o1;a6o5p4;ya;no,sa0W;aEeCi9o6u5;mb2Ani26sc3Y;gadishu,nt6s5;c13ul;evideo,pelli1Rre2Z;ami,l6n14s5;kolc,sissauga;an,waukee;cca,d5lbour2Mmph41ndo1Cssi3;an,ell2Xi3;cau,drAkass2Sl9n8r5shh4A;aca6ib5rakesh,se2L;or;i1Sy;a4EchFdal0Zi47;mo;id;aDeAi8o6u5vSy2;anMckn0Odhia3;n5s angel26;d2g bea1N;brev2Be3Lma5nz,sb2verpo28;!ss27; ma39i5;c5pzig;est16; p6g5ho2Wn0Cusan24;os;az,la33;aHharFiClaipeBo9rak0Du7y5;iv,o5;to;ala lump4n5;mi1sh0;hi0Hlka2Xpavog4si5wlo2;ce;da;ev,n5rkuk;gst2sha5;sa;k5toum;iv;bHdu3llakuric0Qmpa3Fn6ohsiu1ra5un1Iwaguc0Q;c0Pj;d5o,p4;ah1Ty;a7e6i5ohannesV;l1Vn0;dd36rusalem;ip4k5;ar2H;bad0mph1OnArkutUs7taXz5;mir,tapala5;pa;fah0l6tanb5;ul;am2Zi2H;che2d5;ianap2Mo20;aAe7o5yder2W; chi mi5ms,nolulu;nh;f6lsin5rakli2;ki;ei;ifa,lifax,mCn5rb1Dva3;g8nov01oi;aFdanEenDhCiPlasgBo9raz,u5;a5jr23;dal6ng5yaquil;zh1J;aja2Oupe;ld coa1Bthen5;bu2S;ow;ent;e0Uoa;sk;lw7n5za;dhi5gt1E;nag0U;ay;aisal29es,o8r6ukuya5;ma;ankfu5esno;rt;rt5sh0; wor6ale5;za;th;d5indhov0Pl paso;in5mont2;bur5;gh;aBe8ha0Xisp4o7resd0Lu5;b5esseldorf,nkirk,rb0shanbe;ai,l0I;ha,nggu0rtmu13;hradSl6nv5troit;er;hi;donghIe6k09l5masc1Zr es sala1KugavpiY;i0lU;gu,je2;aJebu,hAleve0Vo5raio02uriti1Q;lo7n6penhag0Ar5;do1Ok;akKst0V;gUm5;bo;aBen8i6ongqi1ristchur5;ch;ang m7ca5ttago1;go;g6n5;ai;du,zho1;ng5ttogr14;ch8sha,zh07;gliari,i9lga8mayenJn6pe town,r5tanO;acCdiff;ber1Ac5;un;ry;ro;aWeNhKirmingh0WoJr9u5;chareTdapeTenos air7r5s0tu0;g5sa;as;es;a9is6usse5;ls;ba6t5;ol;ne;sil8tisla7zzav5;il5;le;va;ia;goZst2;op6ubaneshw5;ar;al;iCl9ng8r5;g6l5n;in;en;aluru,hazi;fa6grade,o horizon5;te;st;ji1rut;ghd0BkFn9ot8r7s6yan n4;ur;el,r07;celo3i,ranquil09;ou;du1g6ja lu5;ka;alo6k5;ok;re;ng;ers5u;field;a05b02cc01ddis aba00gartaZhmedXizawl,lSmPnHqa00rEsBt7uck5;la5;nd;he7l5;an5;ta;ns;h5unci2;dod,gab5;at;li5;ngt2;on;a8c5kaOtwerp;hora6o3;na;ge;h7p5;ol5;is;eim;aravati,m0s5;terd5;am; 7buquerq6eppo,giers,ma5;ty;ue;basrah al qadim5mawsil al jadid5;ah;ab5;ad;la;ba;ra;idj0u dha5;bi;an;lbo6rh5;us;rg",Region:"true0:2O;1:2L;2:2U;3:2F;a2Sb2Fc21d1Wes1Vf1Tg1Oh1Ki1Fj1Bk16l13m0Sn09o07pYqVrSsJtEuBverAw6y4zacatec2W;akut0o0Fu4;cat1k09;a5est 4isconsin,yomi1O;bengal,virgin0;rwick3shington4;! dc;acruz,mont;dmurt0t4;ah,tar4; 2Pa12;a6e5laxca1Vripu21u4;scaEva;langa2nnessee,x2J;bas10m4smQtar29;aulip2Hil nadu;a9elang07i7o5taf16u4ylh1J;ff02rr09s1E;me1Gno1Uuth 4;cZdY;ber0c4kkim,naloa;hu1ily;n5rawak,skatchew1xo4;ny; luis potosi,ta catari2;a4hodeA;j4ngp0C;asth1shahi;ingh29u4;e4intana roo;bec,en6retaro;aAe6rince edward4unjab; i4;sl0G;i,n5r4;ak,nambu0F;a0Rnsylv4;an0;ha0Pra4;!na;axa0Zdisha,h4klaho21ntar4reg7ss0Dx0I;io;aLeEo6u4;evo le4nav0X;on;r4tt18va scot0;f9mandy,th4; 4ampton3;c6d5yo4;rk3;ako1O;aroli2;olk;bras1Nva0Dw4; 6foundland4;! and labrad4;or;brunswick,hamp3jers5mexiTyork4;! state;ey;galPyarit;aAeghala0Mi6o4;nta2r4;dov0elos;ch6dlanDn5ss4zor11;issippi,ouri;as geraPneso18;ig1oac1;dhy12harasht0Gine,lac07ni5r4ssachusetts;anhao,i el,ylG;p4toba;ur;anca3e4incoln3ouisI;e4iR;ds;a6e5h4omi;aka06ul2;dah,lant1ntucky,ra01;bardino,lmyk0ns0Qr4;achay,el0nata0X;alis6har4iangxi;kh4;and;co;daho,llino7n4owa;d5gush4;et0;ia2;is;a6ert5i4un1;dalFm0D;ford3;mp3rya2waii;ansu,eorg0lou7oa,u4;an4izhou,jarat;ajuato,gdo4;ng;cester3;lori4uji1;da;sex;ageUe7o5uran4;go;rs4;et;lawaMrby3;aFeaEh9o4rim08umbr0;ahui7l6nnectic5rsi4ventry;ca;ut;i03orado;la;e5hattisgarh,i4uvash0;apRhuahua;chn5rke4;ss0;ya;ra;lGm4;bridge3peche;a9ihar,r8u4;ck4ryat0;ingham3;shi4;re;emen,itish columb0;h0ja cal8lk7s4v7;hkorto4que;st1;an;ar0;iforn0;ia;dygHguascalientes,lBndhr9r5ss4;am;izo2kans5un4;achal 7;as;na;a 4;pradesh;a6ber5t4;ai;ta;ba5s4;ka;ma;ea",Place:"true0:4T;1:4V;2:44;3:4B;4:3I;a4Eb3Gc2Td2Ge26f25g1Vh1Ji1Fk1Cl14m0Vn0No0Jp08r04sTtNuLvJw7y5;a5o0Syz;kut1Bngtze;aDeChitBi9o5upatki,ycom2P;ki26o5;d5l1B;b3Ps5;i4to3Y;c0SllowbroCn5;c2Qgh2;by,chur1P;ed0ntw3Gs22;ke6r3St5;erf1f1; is0Gf3V;auxha3Mirgin is0Jost5;ok;laanbaatar,pto5xb3E;n,wn;a9eotihuac43h7ive49o6ru2Nsarskoe selo,u5;l2Dzigo47;nto,rquay,tt2J;am3e 5orn3E;bronx,hamptons;hiti,j mah0Iu1N;aEcotts bluff,eCfo,herbroQoApring9t7u5yd2F;dbu1Wn5;der03set3B;aff1ock2Nr5;atf1oud;hi37w24;ho,uth5; 1Iam1Zwo3E;a5i2O;f2Tt0;int lawrence riv3Pkhal2D;ayleigh,ed7i5oc1Z;chmo1Eo gran4ver5;be1Dfr09si4; s39cliffe,hi2Y;aCe9h8i5ompeii,utn2;c6ne5tcai2T; 2Pc0G;keri13t0;l,x;k,lh2mbr6n5r2J;n1Hzance;oke;cif38pahanaumokuak30r5;k5then0;si4w1K;ak7r6x5;f1l2X;ange county,d,f1inoco;mTw1G;e8i1Uo5;r5tt2N;th5wi0E; 0Sam19;uschwanste1Pw5; eng6a5h2market,po36;rk;la0P;a8co,e6i5uc;dt1Yll0Z;adow5ko0H;lands;chu picchu,gad2Ridsto1Ql8n7ple6r5;kh2; g1Cw11;hatt2Osf2B;ibu,t0ve1Z;a8e7gw,hr,in5owlOynd02;coln memori5dl2C;al;asi4w3;kefr7mbe1On5s,x;ca2Ig5si05;f1l27t0;ont;azan kreml14e6itchen2Gosrae,rasnoyar5ul;sk;ns0Hs1U;ax,cn,lf1n6ps5st;wiN;d5glew0Lverness;ian27ochina;aDeBi6kg,nd,ov5unti2H;d,enweep;gh6llc5;reL;bu03l5;and5;!s;r5yw0C;ef1tf1;libu24mp6r5stings;f1lem,row;stead,t0;aDodavari,r5uelph;avenAe5imsS;at 8en5; 6f1Fwi5;ch;acr3vall1H;brita0Flak3;hur5;st;ng3y villa0W;airhavHco,ra;aAgli9nf17ppi8u7ver6x5;et1Lf1;glad3t0;rope,st0;ng;nt0;rls1Ls5;t 5;e5si4;nd;aCe9fw,ig8o7ryd6u5xb;mfri3nstab00rh2tt0;en;nca18rcKv19wnt0B;by;n6r5vonpo1D;ry;!h2;nu8r5;l6t5;f1moor;ingt0;be;aLdg,eIgk,hClBo5royd0;l6m5rnwa0B;pt0;c7lingw6osse5;um;ood;he0S;earwat0St;a8el6i5uuk;chen itza,mney ro07natSricahua;m0Zt5;enh2;mor5rlottetPth2;ro;dar 5ntervilA;breaks,faZg5;rove;ld9m8r5versh2;lis6rizo pla5;in;le;bLpbellf1;weQ;aZcn,eNingl01kk,lackLolt0r5uckV;aGiAo5;ckt0ok5wns cany0;lyn,s5;i4to5;ne;de;dge6gh5;am,t0;n6t5;own;or5;th;ceb6m5;lNpt0;rid5;ge;bu5pool,wa8;rn;aconsfEdf1lBr9verly7x5;hi5;ll; hi5;lls;wi5;ck; air,l5;ingh2;am;ie5;ld;ltimore,rnsl6tters5;ea;ey;bLct0driadic,frica,ginJlGmFn9rc8s7tl6yleOzor3;es;!ant8;hcroft,ia; de triomphe,t6;adyr,ca8dov9tarct5;ic5; oce5;an;st5;er;ericas,s;be6dersh5hambra,list0;ot;rt0;cou5;rt;bot7i5;ngd0;on;sf1;ord",Country:"true0:38;1:2L;2:3B;a2Xb2Ec22d1Ye1Sf1Mg1Ch1Ai14j12k0Zl0Um0Gn05om2pZqat1KrXsKtCu7v5wal4yemTz3;a25imbabwe;es,lis and futu2Y;a3enezue32ietnam;nuatu,tican city;gTk6nited 4ruXs3zbeE; 2Ca,sr;arab emirat0Kkingdom,states3;! of am2Y;!raiV;a8haCimor les0Co7rinidad 5u3;nis0rk3valu;ey,me2Zs and caic1V;and t3t3;oba1L;go,kel10nga;iw2ji3nz2T;ki2V;aDcotl1eCi9lov8o6pa2Dri lanka,u5w3yr0;az3edAitzerl1;il1;d2riname;lomon1Xmal0uth 3;afr2KkMsud2;ak0en0;erra leoFn3;gapo1Yt maart3;en;negLrb0ychellZ;int 3moa,n marino,udi arab0;hele26luc0mart21;epublic of ir0Eom2Euss0w3;an27;a4eIhilippinUitcairn1Mo3uerto riN;l1rtugF;ki2Dl4nama,pua new0Vra3;gu7;au,esti3;ne;aBe9i7or3;folk1Ith4w3;ay; k3ern mariana1D;or0O;caragua,ger3ue;!ia;p3ther1Aw zeal1;al;mib0u3;ru;a7exi6icro0Bo3yanm06;ldova,n3roc5zambA;a4gol0t3;enegro,serrat;co;cAdagasc01l7r5urit4yot3;te;an0i16;shall0Xtin3;ique;a4div3i,ta;es;wi,ys0;ao,ed02;a6e5i3uxembourg;b3echtenste12thu1G;er0ya;ban0Isotho;os,tv0;azakh1Fe4iriba04o3uwait,yrgyz1F;rXsovo;eling0Knya;a3erG;ma16p2;c7nd6r4s3taly,vory coast;le of m2rael;a3el1;n,q;ia,oJ;el1;aiTon3ungary;dur0Ng kong;aBermany,ha0QibraltAre8u3;a6ern5inea3ya0P;! biss3;au;sey;deloupe,m,tema0Q;e3na0N;ce,nl1;ar;bUmb0;a7i6r3;ance,ench 3;guia0Epoly3;nes0;ji,nl1;lklandUroeU;ast tim7cu6gypt,l salv6ngl1quatorial4ritr5st3thiop0;on0; guin3;ea;ad3;or;enmark,jibou5ominica4r con3;go;!n C;ti;aBentral african Ah8o5roat0u4yprRzech3; 9ia;ba,racao;c4lo3morQngo brazzaville,okGsta r04te de ivoiL;mb0;osE;i3ristmasG;le,na;republic;m3naUpe verde,ymanA;bod0ero3;on;aGeDhut2o9r5u3;lgar0r3;kina faso,ma,undi;azil,itish 3unei;virgin3; is3;lands;liv0nai5snia and herzegoviHtswaHuvet3; isl1;and;re;l3n8rmuG;ar3gium,ize;us;h4ngladesh,rbad3;os;am4ra3;in;as;fghaGlDmBn6r4ustr3zerbaij2;al0ia;genti3men0uba;na;dorra,g5t3;arct7igua and barbu3;da;o3uil3;la;er3;ica;b3ger0;an0;ia;ni3;st2;an",FirstName:"trueaTblair,cQdOfrancoZgabMhinaLilya,jHkClBm6ni4quinn,re3s0;h0umit,yd;ay,e0iloh;a,lby;g9ne;co,ko0;!s;a1el0ina,org6;!okuhF;ds,naia,r1tt0xiB;i,y;ion,lo;ashawn,eif,uca;a3e1ir0rM;an;lsFn0rry;dall,yat5;i,sD;a0essIie,ude;i1m0;ie,mG;me;ta;rie0y;le;arcy,ev0;an,on;as1h0;arl8eyenne;ey,sidy;drien,kira,l4nd1ubr0vi;ey;i,r0;a,e0;a,y;ex2f1o0;is;ie;ei,is",WeekDay:"truefri2mon2s1t0wednesd3;hurs1ues1;aturd1und1;!d0;ay0;!s",Month:"truedec0february,july,nov0octo1sept0;em0;ber",Date:"trueago,on4som4t1week0yesterd5; end,ends;mr1o0;d2morrow;!w;ed0;ay",Duration:"truecenturAd8h7m5q4se3w1y0;ear8r8;eek0k7;!end,s;ason,c5;tr,uarter;i0onth3;llisecond2nute2;our1r1;ay0ecade0;!s;ies,y",FemaleName:"true0:J7;1:JB;2:IJ;3:IK;4:J1;5:IO;6:JS;7:JO;8:HB;9:JK;A:H4;B:I2;C:IT;D:JH;E:IX;F:BA;G:I4;aGTbFLcDRdD0eBMfB4gADh9Ti9Gj8Dk7Cl5Wm48n3Lo3Hp33qu32r29s15t0Eu0Cv02wVxiTyOzH;aLeIineb,oHsof3;e3Sf3la,ra;h2iKlIna,ynH;ab,ep;da,ma;da,h2iHra;nab;aKeJi0FolB7uIvH;et8onDP;i0na;le0sen3;el,gm3Hn,rGLs8W;aoHme0nyi;m5XyAD;aMendDZhiDGiH;dele9lJnH;if48niHo0;e,f47;a,helmi0lHma;a,ow;ka0nB;aNeKiHusa5;ck84kIl8oleAviH;anFenJ4;ky,toriBK;da,lA8rHs0;a,nHoniH9;a,iFR;leHnesH9;nILrH;i1y;g9rHs6xHA;su5te;aYeUhRiNoLrIuHy2;i,la;acJ3iHu0J;c3na,sH;hFta;nHr0F;iFya;aJffaEOnHs6;a,gtiH;ng;!nFSra;aIeHomasi0;a,l9Oo8Ares1;l3ndolwethu;g9Fo88rIssH;!a,ie;eHi,ri7;sa,za;bOlMmKnIrHs6tia0wa0;a60yn;iHya;a,ka,s6;arFe2iHm77ra;!ka;a,iH;a,t6;at6it6;a0Ecarlett,e0AhWiSkye,neza0oQri,tNuIyH;bIGlvi1;ha,mayIJniAsIzH;an3Net8ie,y;anHi7;!a,e,nH;aCe;aIeH;fan4l5Dphan6E;cI5r5;b3fiAAm0LnHphi1;d2ia,ja,ya;er2lJmon1nIobh8QtH;a,i;dy;lETv3;aMeIirHo0risFDy5;a,lDM;ba,e0i5lJrH;iHr6Jyl;!d8Ifa;ia,lDZ;hd,iMki2nJrIu0w0yH;la,ma,na;i,le9on,ron,yn;aIda,ia,nHon;a,on;!ya;k6mH;!aa;lJrItaye82vH;da,inj;e0ife;en1i0ma;anA9bLd5Oh1SiBkKlJmInd2rHs6vannaC;aCi0;ant6i2;lDOma,ome;ee0in8Tu2;in1ri0;a05eZhXiUoHuthDM;bScRghQl8LnPsJwIxH;anB3ie,y;an,e0;aIeHie,lD;ann7ll1marDGtA;!lHnn1;iHyn;e,nH;a,dF;da,i,na;ayy8G;hel67io;bDRerAyn;a,cIkHmas,nFta,ya;ki,o;h8Xki;ea,iannGMoH;da,n1P;an0bJemFgi0iInHta,y0;a8Bee;han86na;a,eH;cHkaC;a,ca;bi0chIe,i0mo0nHquETy0;di,ia;aERelHiB;!e,le;een4ia0;aPeOhMiLoJrHute6A;iHudenCV;scil3LyamvaB;lHrt3;i0ly;a,paluk;ilome0oebe,ylH;is,lis;ggy,nelope,r5t2;ige,m0VnKo5rvaDMtIulH;a,et8in1;ricHt4T;a,e,ia;do2i07;ctav3dIfD3is6ksa0lHphD3umC5yunbileg;a,ga,iv3;eHvAF;l3t8;aWeUiMoIurHy5;!ay,ul;a,eJor,rIuH;f,r;aCeEma;ll1mi;aNcLhariBQkKlaJna,sHta,vi;anHha;ur;!y;a,iDZki;hoGk9YolH;a,e4P;!mh;hir,lHna,risDEsreE;!a,lBV;asuMdLh3i6Dl5nKomi7rgEVtH;aHhal4;lHs6;i1ya;cy,et8;e9iF0ya;nngu2X;a0Ackenz4e02iMoJrignayani,uriDJyH;a,rH;a,iOlNna,tG;bi0i2llBJnH;a,iH;ca,ka,qD9;a,cUdo4ZkaTlOmi,nMrItzi,yH;ar;aJiIlH;anET;am;!l,nB;dy,eHh,n4;nhGrva;aKdJe0iCUlH;iHy;cent,e;red;!gros;!e5;ae5hH;ae5el3Z;ag5DgNi,lKrH;edi7AiIjem,on,yH;em,l;em,sCG;an4iHliCF;nHsCJ;a,da;!an,han;b09cASd07e,g05ha,i04ja,l02n00rLsoum5YtKuIv84xBKyHz4;bell,ra,soBB;d7rH;a,eE;h8Gild1t4;a,cUgQiKjor4l7Un4s6tJwa,yH;!aHbe6Xja9lAE;m,nBL;a,ha,in1;!aJbCGeIja,lDna,sHt63;!a,ol,sa;!l1D;!h,mInH;!a,e,n1;!awit,i;arJeIie,oHr48ueri8;!t;!ry;et46i3B;el4Xi7Cy;dHon,ue5;akranAy;ak,en,iHlo3S;a,ka,nB;a,re,s4te;daHg4;!l3E;alDd4elHge,isDJon0;ei9in1yn;el,le;a0Ne0CiXoQuLyH;d3la,nH;!a,dIe2OnHsCT;!a,e2N;a,sCR;aD4cJel0Pis1lIna,pHz;e,iA;a,u,wa;iHy;a0Se,ja,l2NnB;is,l1UrItt1LuHvel4;el5is1;aKeIi7na,rH;aADi7;lHn1tA;ei;!in1;aTbb9HdSepa,lNnKsJvIzH;!a,be5Ret8z4;!ia;a,et8;!a,dH;a,sHy;ay,ey,i,y;a,iJja,lH;iHy;aA8e;!aH;!nF;ia,ya;!nH;!a,ne;aPda,e0iNjYla,nMoKsJtHx93y5;iHt4;c3t3;e2PlCO;la,nHra;a,ie,o2;a,or1;a,gh,laH;!ni;!h,nH;a,d2e,n5V;cOdon9DiNkes6mi9Gna,rMtJurIvHxmi,y5;ern1in3;a,e5Aie,yn;as6iIoH;nya,ya;fa,s6;a,isA9;a,la;ey,ie,y;a04eZhXiOlASoNrJyH;lHra;a,ee,ie;istHy6I;a,en,iIyH;!na;!e,n5F;nul,ri,urtnB8;aOerNlB7mJrHzzy;a,stH;en,in;!berlImernH;aq;eHi,y;e,y;a,stE;!na,ra;aHei2ongordzol;dij1w5;el7UiKjsi,lJnIrH;a,i,ri;d2na,za;ey,i,lBLs4y;ra,s6;biAcARdiat7MeBAiSlQmPnyakuma1DrNss6NtKviAyH;!e,lH;a,eH;e,i8T;!a6HeIhHi4TlDri0y;ar8Her8Hie,leErBAy;!lyn8Ori0;a,en,iHl5Xoli0yn;!ma,nFs95;a5il1;ei8Mi,lH;e,ie;a,tl6O;a0AeZiWoOuH;anMdLlHst88;es,iH;a8NeHs8X;!n9tH;!a,te;e5Mi3My;a,iA;!anNcelDdMelGhan7VleLni,sIva0yH;a,ce;eHie;fHlDph7Y;a,in1;en,n1;i7y;!a,e,n45;lHng;!i1DlH;!i1C;anNle0nKrJsH;i8JsH;!e,i8I;i,ri;!a,elGif2CnH;a,et8iHy;!e,f2A;a,eJiInH;a,eIiH;e,n1;!t8;cMda,mi,nIque4YsminFvie2y9zH;min7;a7eIiH;ce,e,n1s;!lHs82t0F;e,le;inIk6HlDquelH;in1yn;da,ta;da,lRmPnOo0rNsIvaHwo0zaro;!a0lu,na;aJiIlaHob89;!n9R;do2;belHdo2;!a,e,l3B;a7Ben1i0ma;di2es,gr72ji;a9elBogH;en1;a,e9iHo0se;a0na;aSeOiJoHus7Kyacin2C;da,ll4rten24snH;a,i9U;lImaH;ri;aIdHlaI;a,egard;ry;ath1BiJlInrietArmi9sH;sa,t1A;en2Uga,mi;di;bi2Fil8MlNnMrJsItHwa,yl8M;i5Tt4;n60ti;iHmo51ri53;etH;!te;aCnaC;a,ey,l4;a02eWiRlPoNrKunJwH;enHyne1R;!dolD;ay,el;acieIetHiselB;a,chE;!la;ld1CogooH;sh;adys,enHor3yn2K;a,da,na;aKgi,lIna,ov8EselHta;a,e,le;da,liH;an;!n0;mLnJorgIrH;ald5Si,m3Etrud7;et8i4X;a,eHna;s29vieve;ma;bIle,mHrnet,yG;al5Si5;iIrielH;a,l1;!ja;aTeQiPlorOoz3rH;anJeIiH;da,eB;da,ja;!cH;esIiHoi0P;n1s66;!ca;a,enc3;en,o0;lIn0rnH;anB;ec3ic3;jr,nArKtHy7;emIiHma,oumaA;ha,ma,n;eh;ah,iBrah,za0;cr4Rd0Re0Qi0Pk0Ol07mXn54rUsOtNuMvHwa;aKelIiH;!e,ta;inFyn;!a;!ngel4V;geni1ni47;h5Yien9ta;mLperanKtH;eIhHrel5;er;l31r7;za;a,eralB;iHma,ne4Lyn;cHka,n;a,ka;aPeNiKmH;aHe21ie,y;!li9nuH;elG;lHn1;e7iHy;a,e,ja;lHrald;da,y;!nue5;aWeUiNlMma,no2oKsJvH;a,iH;na,ra;a,ie;iHuiH;se;a,en,ie,y;a0c3da,e,f,nMsJzaH;!betHveA;e,h;aHe,ka;!beH;th;!a,or;anor,nH;!a,i;!in1na;ate1Rta;leEs6;vi;eIiHna,wi0;e,th;l,n;aYeMh3iLjeneKoH;lor5Vminiq4Ln3FrHtt4;a,eEis,la,othHthy;ea,y;ba;an09naCon9ya;anQbPde,eOiMlJmetr3nHsir5M;a,iH;ce,se;a,iIla,orHphi9;es,is;a,l6F;dHrdH;re;!d5Ena;!b2ForaCraC;a,d2nH;!a,e;hl3i0l0GmNnLphn1rIvi1WyH;le,na;a,by,cIia,lH;a,en1;ey,ie;a,et8iH;!ca,el1Aka,z;arHia;is;a0Re0Nh04i02lUoJristIynH;di,th3;al,i0;lPnMrIurH;tn1D;aJd2OiHn2Ori9;!nH;a,e,n1;!l4;cepci5Cn4sH;tanHuelo;ce,za;eHleE;en,t8;aJeoIotH;il54;!pat2;ir7rJudH;et8iH;a,ne;a,e,iH;ce,sZ;a2er2ndH;i,y;aReNloe,rH;isJyH;stH;al;sy,tH;a1Sen,iHy;an1e,n1;deJlseIrH;!i7yl;a,y;li9;nMrH;isKlImH;ai9;a,eHot8;n1t8;!sa;d2elGtH;al,elG;cIlH;es8i47;el3ilH;e,ia,y;itlYlXmilWndVrMsKtHy5;aIeIhHri0;er1IleErDy;ri0;a38sH;a37ie;a,iOlLmeJolIrH;ie,ol;!e,in1yn;lHn;!a,la;a,eIie,otHy;a,ta;ne,y;na,s1X;a0Ii0I;a,e,l1;isAl4;in,yn;a0Ke02iZlXoUrH;andi7eRiJoIyH;an0nn;nwDoke;an3HdgMgiLtH;n31tH;!aInH;ey,i,y;ny;d,t8;etH;!t7;an0e,nH;da,na;bbi7glarIlo07nH;iAn4;ka;ancHythe;a,he;an1Clja0nHsm3M;iAtH;ou;aWcVlinUniArPssOtJulaCvH;!erlH;ey,y;hJsy,tH;e,iHy7;e,na;!anH;ie,y;!ie;nItHyl;ha,ie;adIiH;ce;et8i9;ay,da;ca,ky;!triH;ce,z;rbJyaH;rmH;aa;a2o2ra;a2Ub2Od25g21i1Sj5l18m0Zn0Boi,r06sWtVuPvOwa,yIzH;ra,u0;aKes6gJlIn,seH;!l;in;un;!nH;a,na;a,i2K;drLguJrIsteH;ja;el3;stH;in1;a,ey,i,y;aahua,he0;hIi2Gja,miAs2DtrH;id;aMlIraqHt21;at;eIi7yH;!n;e,iHy;gh;!nH;ti;iJleIo6piA;ta;en,n1t8;aHelG;!n1J;a01dje5eZgViTjRnKohito,toHya;inet8nH;el5ia;te;!aKeIiHmJ;e,ka;!mHtt7;ar4;!belIliHmU;sa;!l1;a,eliH;ca;ka,sHta;a,sa;elHie;a,iH;a,ca,n1qH;ue;!tH;a,te;!bImHstasiMya;ar3;el;aLberKeliJiHy;e,l3naH;!ta;a,ja;!ly;hGiIl3nB;da;a,ra;le;aWba,ePiMlKthJyH;a,c3sH;a,on,sa;ea;iHys0N;e,s0M;a,cIn1sHza;a,e,ha,on,sa;e,ia,ja;c3is6jaKksaKna,sJxH;aHia;!nd2;ia,saH;nd2;ra;ia;i0nIyH;ah,na;a,is,naCoud;la;c6da,leEmNnLsH;haClH;inHyY;g,n;!h;a,o,slH;ey;ee;en;at6g4nIusH;ti0;es;ie;aWdiTelMrH;eJiH;anMenH;a,e,ne;an0;na;!aLeKiIyH;nn;a,n1;a,e;!ne;!iH;de;e,lDsH;on;yn;!lH;i9yn;ne;aKbIiHrL;!e,gaK;ey,i7y;!e;gaH;il;dKliyJradhIs6;ha;ya;ah;a,ya",Honorific:"truedirector1field marsh2lieutenant1rear0sergeant major,vice0; admir1; gener0;al","Adj|Gerund":"true0:3F;1:3H;2:31;3:2X;4:35;5:33;6:3C;7:2Z;8:36;9:29;a33b2Tc2Bd1Te1If19g12h0Zi0Rl0Nm0Gnu0Fo0Ap04rYsKtEuBvAw1Ayiel3;ar6e08;nBpA;l1Rs0B;fol3n1Zsett2;aEeDhrBi4ouc7rAwis0;e0Bif2oub2us0yi1;ea1SiA;l2vi1;l2mp0rr1J;nt1Vxi1;aMcreec7enten2NhLkyrocke0lo0Vmi2oJpHtDuBweA;e0Ul2;pp2ArA;gi1pri5roun3;aBea8iAri2Hun9;mula0r4;gge4rA;t2vi1;ark2eAraw2;e3llb2F;aAot7;ki1ri1;i9oc29;dYtisf6;aEeBive0oAus7;a4l2;assu4defi9fres7ig9juve07mai9s0vAwar3;ea2italiAol1G;si1zi1;gi1ll6mb2vi1;a6eDier23lun1VrAun2C;eBoA;mi5vo1Z;ce3s5vai2;n3rpleA;xi1;ffCpWutBverAwi1;arc7lap04p0Pri3whel8;goi1l6st1J;en3sA;et0;m2Jrtu4;aEeDiCoBuAyst0L;mb2;t1Jvi1;s5tiga0;an1Rl0n3smeri26;dAtu4;de9;aCeaBiAo0U;fesa0Tvi1;di1ni1;c1Fg19s0;llumiGmFnArri0R;cDfurHsCtBviA;go23ti1;e1Oimi21oxica0rig0V;pi4ul0;orpo20r0K;po5;na0;eaBorr02umilA;ia0;li1rtwar8;lFrA;atiDipCoBuelA;i1li1;undbrea10wi1;pi1;f6ng;a4ea8;a3etc7it0lEoCrBulfA;il2;ee1FighXust1L;rAun3;ebo3thco8;aCoA;a0wA;e4i1;mi1tte4;lectrJmHnExA;aCci0hBis0pA;an3lo3;aOila1B;c0spe1A;ab2coura0CdBergi13ga0Clive9ric7s02tA;hral2i0J;ea4u4;barras5er09pA;owe4;if6;aQeIiBrA;if0;sAzz6;aEgDhearCsen0tA;rAur11;ac0es5;te9;us0;ppoin0r8;biliGcDfi9gra3ligh0mBpres5sAvasG;erE;an3ea9orA;ali0L;a6eiBli9rA;ea5;vi1;ta0;maPri1s7un0zz2;aPhMlo5oAripp2ut0;mGnArrespon3;cer9fDspi4tA;inBrA;as0ibu0ol2;ui1;lic0u5;ni1;fDmCpA;eAromi5;l2ti1;an3;or0;aAil2;llenAnAr8;gi1;l8ptAri1;iva0;aff2eGin3lFoDrBuA;d3st2;eathtaAui5;ki1;gg2i2o8ri1unA;ci1;in3;co8wiA;lAtc7;de4;bsorVcOgonMlJmHnno6ppea2rFsA;pi4su4toA;nBun3;di1;is7;hi1;res0;li1;aFu5;si1;ar8lu4;ri1;mi1;iAzi1;zi1;cAhi1;eleDomA;moBpan6;yi1;da0;ra0;ti1;bi1;ng",Comparable:"true0:3C;1:3Q;2:3F;a3Tb3Cc33d2Te2Mf2Ag1Wh1Li1Fj1Ek1Bl13m0Xn0So0Rp0Iqu0Gr07sHtCug0vAw4y3za0Q;el10ouN;ary,e6hi5i3ry;ck0Cde,l3n1ry,se;d,y;ny,te;a3i3R;k,ry;a3erda2ulgar;gue,in,st;a6en2Xhi5i4ouZr3;anqu2Cen1ue;dy,g36me0ny;ck,rs28;ll,me,rt,wd3I;aRcaPeOhMiLkin0BlImGoEpDt6u4w3;eet,ift;b3dd0Wperfi21rre28;sta26t21;a8e7iff,r4u3;pUr1;a4ict,o3;ng;ig2Vn0N;a1ep,rn;le,rk,te0;e1Si2Vright0;ci1Yft,l3on,re;emn,id;a3el0;ll,rt;e4i3y;g2Mm0Z;ek,nd2T;ck24l0mp1L;a3iRrill,y;dy,l01rp;ve0Jxy;n1Jr3;ce,y;d,fe,int0l1Hv0V;a8e6i5o3ude;mantic,o19sy,u3;gh;pe,t1P;a3d,mo0A;dy,l;gg4iFndom,p3re,w;id;ed;ai2i3;ck,et;hoAi1Fl9o8r5u3;ny,r3;e,p11;egna2ic4o3;fouSud;ey,k0;liXor;ain,easa2;ny;dd,i0ld,ranL;aive,e5i4o3u14;b0Sisy,rm0Ysy;bb0ce,mb0R;a3r1w;r,t;ad,e5ild,o4u3;nda12te;ist,o1;a4ek,l3;low;s0ty;a8e7i6o3ucky;f0Jn4o15u3ve0w10y0N;d,sy;e0g;ke0l,mp,tt0Eve0;e1Qwd;me,r3te;ge;e4i3;nd;en;ol0ui19;cy,ll,n3;secu6t3;e3ima4;llege2rmedia3;te;re;aAe7i6o5u3;ge,m3ng1C;bYid;me0t;gh,l0;a3fXsita2;dy,rWv3;en0y;nd13ppy,r3;d3sh;!y;aFenEhCiBlAoofy,r3;a8e6i5o3ue0Z;o3ss;vy;m,s0;at,e3y;dy,n;nd,y;ad,ib,ooD;a2d1;a3o3;st0;tDuiS;u1y;aCeebBi9l8o6r5u3;ll,n3r0N;!ny;aCesh,iend0;a3nd,rmD;my;at,ir7;erce,nan3;ci9;le;r,ul3;ty;a6erie,sse4v3xtre0B;il;nti3;al;r4s3;tern,y;ly,th0;appZe9i5ru4u3;mb;nk;r5vi4z3;zy;ne;e,ty;a3ep,n9;d3f,r;!ly;agey,h8l7o5r4u3;dd0r0te;isp,uel;ar3ld,mmon,st0ward0zy;se;evKou1;e3il0;ap,e3;sy;aHiFlCoAr5u3;ff,r0sy;ly;a6i3oad;g4llia2;nt;ht;sh,ve;ld,un3;cy;a4o3ue;nd,o1;ck,nd;g,tt3;er;d,ld,w1;dy;bsu6ng5we3;so3;me;ry;rd",Adverb:"truea08b05d00eYfSheQinPjustOkinda,likewiZmMnJoEpCquite,r9s5t2u0very,well;ltima01p0; to,wards5;h1iny bit,o0wiO;o,t6;en,us;eldom,o0uch;!me1rt0; of;how,times,w0C;a1e0;alS;ndomRth05;ar excellenEer0oint blank; Lhaps;f3n0utright;ce0ly;! 0;ag05moX; courGten;ewJo0; longWt 0;onHwithstand9;aybe,eanwhiNore0;!ovT;! aboX;deed,steY;lla,n0;ce;or3u0;ck1l9rther0;!moK;ing; 0evK;exampCgood,suH;n mas0vI;se;e0irect2; 2fini0;te0;ly;juAtrop;ackward,y 0;far,no0; means,w; GbroFd nauseam,gEl7ny5part,s4t 2w0;ay,hi0;le;be7l0mo7wor7;arge,ea6; soon,i4;mo0way;re;l 3mo2ongsi1ready,so,togeth0ways;er;de;st;b1t0;hat;ut;ain;ad;lot,posteriori",Conjunction:"trueaXbTcReNhowMiEjust00noBo9p8supposing,t5wh0yet;e1il0o3;e,st;n1re0thN; if,by,vM;evL;h0il,o;erefOo0;!uU;lus,rovided th9;r0therwiM;! not; mattEr,w0;! 0;since,th4w7;f4n0; 0asmuch;as mIcaForder t0;h0o;at;! 0;only,t0w0;hen;!ev3;ith2ven0;! 0;if,tB;er;o0uz;s,z;e0ut,y the time;cau1f0;ore;se;lt3nd,s 0;far1if,m0soon1t2;uch0; as;hou0;gh",Currency:"true$,aud,bQcOdJeurIfHgbp,hkd,iGjpy,kElDp8r7s3usd,x2y1z0,,,,,,,,,,,;lotyQ;en,uanP;af,of;h0t5;e0il5;k0q0;elK;oubleJp,upeeJ;e2ound st0;er0;lingG;n0soF;ceEnies;empi7i7;n,r0wanzaCyatC;!onaBw;ls,nr;ori7ranc9;!os;en3i2kk,o0;b0ll2;ra5;me4n0rham4;ar3;e0ny;nt1;aht,itcoin0;!s",Determiner:"trueaBboth,d9e6few,le5mu8neiDplenty,s4th2various,wh0;at0ich0;evC;a0e4is,ose;!t;everal,ome;!ast,s;a1l0very;!se;ch;e0u;!s;!n0;!o0y;th0;er","Adj|Present":"truea07b04cVdQeNfJhollIidRlEmCnarrIoBp9qua8r7s3t2uttFw0;aKet,ro0;ng,u08;endChin;e2hort,l1mooth,our,pa9tray,u0;re,speU;i2ow;cu6da02leSpaN;eplica01i02;ck;aHerfePr0;eseUime,omV;bscu1pen,wn;atu0e3odeH;re;a2e1ive,ow0;er;an;st,y;ow;a2i1oul,r0;ee,inge;rm;iIke,ncy,st;l1mpty,x0;emHpress;abo4ic7;amp,e2i1oub0ry,ull;le;ffu9re6;fu8libe0;raE;alm,l5o0;mpleCn3ol,rr1unterfe0;it;e0u7;ct;juga8sum7;ea1o0;se;n,r;ankru1lu0;nt;pt;li2pproxi0rticula1;ma0;te;ght","Person|Adj":"trueb3du2earnest,frank,mi2r0san1woo1;an0ich,u1;dy;sty;ella,rown",Modal:"truec5lets,m4ought3sh1w0;ill,o5;a0o4;ll,nt;! to,a;ight,ust;an,o0;uld",Verb:"trueborn,cannot,gonna,has,keep tabs,msg","Person|Verb":"trueb8ch7dr6foster,gra5ja9lan4ma2ni9ollie,p1rob,s0wade;kip,pike,t5ue;at,eg,ier2;ck,r0;k,shal;ce;ce,nt;ew;ase,u1;iff,l1ob,u0;ck;aze,ossom","Person|Date":"truea2j0sep;an0une;!uary;p0ugust,v0;ril"},zu=36,FC="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",gO=FC.split("").reduce(function(t,e,n){return t[e]=n,t},{}),Ppe=function(t){if(FC[t]!==void 0)return FC[t];let e=1,n=zu,r="";for(;t>=n;t-=n,e++,n*=zu);for(;e--;){const s=t%zu;r=String.fromCharCode((s<10?48:55)+s)+r,t=(t-s)/zu}return r},Dpe=function(t){if(gO[t]!==void 0)return gO[t];let e=0,n=1,r=zu,s=1;for(;n<t.length;e+=r,n++,r*=zu);for(let i=t.length-1;i>=0;i--,s*=zu){let o=t.charCodeAt(i)-48;o>10&&(o-=7),e+=o*s}return e},BC={toAlphaCode:Ppe,fromAlphaCode:Dpe},Ope=function(t){const e=new RegExp("([0-9A-Z]+):([0-9A-Z]+)");for(let n=0;n<t.nodes.length;n++){const r=e.exec(t.nodes[n]);if(!r){t.symCount=n;break}t.syms[BC.fromAlphaCode(r[1])]=BC.fromAlphaCode(r[2])}t.nodes=t.nodes.slice(t.symCount,t.nodes.length)},Lpe=Ope,Mpe=function(t,e,n){const r=BC.fromAlphaCode(e);return r<t.symCount?t.syms[r]:n+r+1-t.symCount},zpe=function(t){const e=[],n=(r,s)=>{let i=t.nodes[r];i[0]==="!"&&(e.push(s),i=i.slice(1));const o=i.split(/([A-Z0-9,]+)/g);for(let a=0;a<o.length;a+=2){const l=o[a],c=o[a+1];if(!l)continue;const u=s+l;if(c===","||c===void 0){e.push(u);continue}const h=Mpe(t,c,r);n(h,u)}};return n(0,""),e},Fpe=function(t){const e={nodes:t.split(";"),syms:[],symCount:0};return t.match(":")&&Lpe(e),zpe(e)},Bpe=Fpe,Vpe=function(t){if(!t)return{};const e=t.split("|").reduce((r,s)=>{const i=s.split("");return r[i[0]]=i[1],r},{}),n={};return Object.keys(e).forEach(function(r){const s=Bpe(e[r]);r==="true"&&(r=!0);for(let i=0;i<s.length;i++){const o=s[i];n.hasOwnProperty(o)===!0?Array.isArray(n[o])===!1?n[o]=[n[o],r]:n[o].push(r):n[o]=r}}),n},jpe=Vpe,_o=["Possessive","Pronoun"];let Upe={"20th century fox":"Organization","7 eleven":"Organization","motel 6":"Organization",g8:"Organization",vh1:"Organization","76ers":"SportsTeam","49ers":"SportsTeam",q1:"Date",q2:"Date",q3:"Date",q4:"Date",km2:"Unit",m2:"Unit",dm2:"Unit",cm2:"Unit",mm2:"Unit",mile2:"Unit",in2:"Unit",yd2:"Unit",ft2:"Unit",m3:"Unit",dm3:"Unit",cm3:"Unit",in3:"Unit",ft3:"Unit",yd3:"Unit","at&t":"Organization","black & decker":"Organization","h & m":"Organization","johnson & johnson":"Organization","procter & gamble":"Organization","ben & jerry's":"Organization","&":"Conjunction",i:["Pronoun","Singular"],he:["Pronoun","Singular"],she:["Pronoun","Singular"],it:["Pronoun","Singular"],they:["Pronoun","Plural"],we:["Pronoun","Plural"],was:["Copula","PastTense"],is:["Copula","PresentTense"],are:["Copula","PresentTense"],am:["Copula","PresentTense"],were:["Copula","PastTense"],her:_o,his:_o,hers:_o,their:_o,theirs:_o,themselves:_o,your:_o,our:_o,ours:_o,my:_o,its:_o,vs:["Conjunction","Abbreviation"],if:["Condition","Preposition"],closer:"Comparative",closest:"Superlative",much:"Adverb",may:"Modal",babysat:"PastTense",blew:"PastTense",drank:"PastTense",drove:"PastTense",forgave:"PastTense",skiied:"PastTense",spilt:"PastTense",stung:"PastTense",swam:"PastTense",swung:"PastTense",guaranteed:"PastTense",shrunk:"PastTense",nears:"PresentTense",nearing:"Gerund",neared:"PastTense",no:["Negative","Expression"]};const Hpe=Upe,Gpe={"20th century fox":"Organization","7 eleven":"Organization","motel 6":"Organization","excuse me":"Expression","financial times":"Organization","guns n roses":"Organization","la z boy":"Organization","labour party":"Organization","new kids on the block":"Organization","new york times":"Organization","the guess who":"Organization","thin lizzy":"Organization","prime minister":"Actor","free market":"Singular","lay up":"Singular","living room":"Singular","living rooms":"Plural","spin off":"Singular","appeal court":"Uncountable","cold war":"Uncountable","gene pool":"Uncountable","machine learning":"Uncountable","nail polish":"Uncountable","time off":"Uncountable","take part":"Infinitive","bill gates":"Person","doctor who":"Person","dr who":"Person","he man":"Person","iron man":"Person","kid cudi":"Person","run dmc":"Person","rush limbaugh":"Person","snow white":"Person","tiger woods":"Person","brand new":"Adjective","en route":"Adjective","left wing":"Adjective","off guard":"Adjective","on board":"Adjective","part time":"Adjective","right wing":"Adjective","so called":"Adjective","spot on":"Adjective","straight forward":"Adjective","super duper":"Adjective","tip top":"Adjective","top notch":"Adjective","up to date":"Adjective","win win":"Adjective","brooklyn nets":"SportsTeam","chicago bears":"SportsTeam","houston astros":"SportsTeam","houston dynamo":"SportsTeam","houston rockets":"SportsTeam","houston texans":"SportsTeam","minnesota twins":"SportsTeam","orlando magic":"SportsTeam","san antonio spurs":"SportsTeam","san diego chargers":"SportsTeam","san diego padres":"SportsTeam","iron maiden":"ProperNoun","isle of man":"Country","united states":"Country","united states of america":"Country","prince edward island":"Region","cedar breaks":"Place","cedar falls":"Place","point blank":"Adverb","tiny bit":"Adverb","by the time":"Conjunction","no matter":"Conjunction","civil wars":"Plural","credit cards":"Plural","default rates":"Plural","free markets":"Plural","head starts":"Plural","home runs":"Plural","lay ups":"Plural","phone calls":"Plural","press releases":"Plural","record labels":"Plural","soft serves":"Plural","student loans":"Plural","tax returns":"Plural","tv shows":"Plural","video games":"Plural","took part":"PastTense","takes part":"PresentTense","taking part":"Gerund","taken part":"Participle","light bulb":"Noun","rush hour":"Noun","fluid ounce":"Unit","the rolling stones":"Organization"},Wpe=[":(",":)",":P",":p",":O",";(",";)",";P",";p",";O",":3",":|",":/",":\\",":$",":*",":@",":-(",":-)",":-P",":-p",":-O",":-3",":-|",":-/",":-\\",":-$",":-*",":-@",":^(",":^)",":^P",":^p",":^O",":^3",":^|",":^/",":^\\",":^$",":^*",":^@","):","(:","$:","*:",")-:","(-:","$-:","*-:",")^:","(^:","$^:","*^:","<3","</3","<\\3","=("],qpe={a:[[/(antenn|formul|nebul|vertebr|vit)a$/i,"$1ae"],[/ia$/i,"ia"]],e:[[/(kn|l|w)ife$/i,"$1ives"],[/(hive)$/i,"$1s"],[/([m|l])ouse$/i,"$1ice"],[/([m|l])ice$/i,"$1ice"]],f:[[/^(dwar|handkerchie|hoo|scar|whar)f$/i,"$1ves"],[/^((?:ca|e|ha|(?:our|them|your)?se|she|wo)l|lea|loa|shea|thie)f$/i,"$1ves"]],i:[[/(octop|vir)i$/i,"$1i"]],m:[[/([ti])um$/i,"$1a"]],n:[[/^(oxen)$/i,"$1"]],o:[[/(al|ad|at|er|et|ed)o$/i,"$1oes"]],s:[[/(ax|test)is$/i,"$1es"],[/(alias|status)$/i,"$1es"],[/sis$/i,"ses"],[/(bu)s$/i,"$1ses"],[/(sis)$/i,"ses"],[/^(?!talis|.*hu)(.*)man$/i,"$1men"],[/(octop|vir|radi|nucle|fung|cact|stimul)us$/i,"$1i"]],x:[[/(matr|vert|ind|cort)(ix|ex)$/i,"$1ices"],[/^(ox)$/i,"$1en"]],y:[[/([^aeiouy]|qu)y$/i,"$1ies"]],z:[[/(quiz)$/i,"$1zes"]]},Nb=qpe,Kpe=/([xsz]|ch|sh)$/,Zpe=function(t){let e=t[t.length-1];if(Nb.hasOwnProperty(e)===!0)for(let n=0;n<Nb[e].length;n+=1){let r=Nb[e][n][0];if(r.test(t)===!0)return t.replace(r,Nb[e][n][1])}return null},Xpe=function(t="",e){let{irregularPlurals:n,uncountable:r}=e.two;if(r.hasOwnProperty(t))return t;if(n.hasOwnProperty(t))return n[t];let s=Zpe(t);return s!==null?s:Kpe.test(t)?t+"es":t+"s"},Wx=Xpe,Ype=/\|/;let Yf=Hpe,VC={};const Jpe={two:{irregularPlurals:U8,uncountable:{}}};Object.keys(pO).forEach(t=>{let e=jpe(pO[t]);if(!Ype.test(t)){Object.keys(e).forEach(n=>{Yf[n]=t});return}Object.keys(e).forEach(n=>{if(VC[n]=t,t==="Noun|Verb"){let r=Wx(n,Jpe);VC[r]="Plural|Verb"}})});Wpe.forEach(t=>Yf[t]="Emoticon");delete Yf[""];delete Yf[null];delete Yf[" "];const ye="Singular",Fn={beforeTags:{Determiner:ye,Possessive:ye,Acronym:ye,Noun:ye,Adjective:ye,PresentTense:ye,Gerund:ye,PastTense:ye,Infinitive:ye,Date:ye,Ordinal:ye,Demonym:ye},afterTags:{Value:ye,Modal:ye,Copula:ye,PresentTense:ye,PastTense:ye,Demonym:ye,Actor:ye},beforeWords:{the:ye,with:ye,without:ye,of:ye,for:ye,any:ye,all:ye,on:ye,cut:ye,cuts:ye,increase:ye,decrease:ye,raise:ye,drop:ye,save:ye,saved:ye,saves:ye,make:ye,makes:ye,made:ye,minus:ye,plus:ye,than:ye,another:ye,versus:ye,neither:ye,about:ye,favorite:ye,best:ye,daily:ye,weekly:ye,linear:ye,binary:ye,mobile:ye,lexical:ye,technical:ye,computer:ye,scientific:ye,security:ye,government:ye,popular:ye,formal:ye,no:ye,more:ye,one:ye,let:ye,her:ye,his:ye,their:ye,our:ye,us:ye,sheer:ye,monthly:ye,yearly:ye,current:ye,previous:ye,upcoming:ye,last:ye,next:ye,main:ye,initial:ye,final:ye,beginning:ye,end:ye,top:ye,bottom:ye,future:ye,past:ye,major:ye,minor:ye,side:ye,central:ye,peripheral:ye,public:ye,private:ye},afterWords:{of:ye,system:ye,aid:ye,method:ye,utility:ye,tool:ye,reform:ye,therapy:ye,philosophy:ye,room:ye,authority:ye,says:ye,said:ye,wants:ye,wanted:ye,is:ye,did:ye,do:ye,can:ye,wise:ye}},Te="Infinitive",Ts={beforeTags:{Modal:Te,Adverb:Te,Negative:Te,Plural:Te},afterTags:{Determiner:Te,Adverb:Te,Possessive:Te,Reflexive:Te,Preposition:Te,Cardinal:Te,Comparative:Te,Superlative:Te},beforeWords:{i:Te,we:Te,you:Te,they:Te,to:Te,please:Te,will:Te,have:Te,had:Te,would:Te,could:Te,should:Te,do:Te,did:Te,does:Te,can:Te,must:Te,us:Te,me:Te,let:Te,even:Te,when:Te,help:Te,he:Te,she:Te,it:Te,being:Te,bi:Te,co:Te,contra:Te,de:Te,inter:Te,intra:Te,mis:Te,pre:Te,out:Te,counter:Te,nobody:Te,somebody:Te,anybody:Te,everybody:Te},afterWords:{the:Te,me:Te,you:Te,him:Te,us:Te,her:Te,his:Te,them:Te,they:Te,it:Te,himself:Te,herself:Te,itself:Te,myself:Te,ourselves:Te,themselves:Te,something:Te,anything:Te,a:Te,an:Te,up:Te,down:Te,by:Te,out:Te,off:Te,under:Te,what:Te,all:Te,to:Te,because:Te,although:Te,how:Te,otherwise:Te,together:Te,though:Te,into:Te,yet:Te,more:Te,here:Te,there:Te,away:Te}},Qpe={beforeTags:Object.assign({},Ts.beforeTags,Fn.beforeTags,{}),afterTags:Object.assign({},Ts.afterTags,Fn.afterTags,{}),beforeWords:Object.assign({},Ts.beforeWords,Fn.beforeWords,{}),afterWords:Object.assign({},Ts.afterWords,Fn.afterWords,{})},ege=Qpe,Re="Adjective",br={beforeTags:{Determiner:Re,Possessive:Re,Hyphenated:Re},afterTags:{Adjective:Re},beforeWords:{seem:Re,seemed:Re,seems:Re,feel:Re,feels:Re,felt:Re,stay:Re,appear:Re,appears:Re,appeared:Re,also:Re,over:Re,under:Re,too:Re,it:Re,but:Re,still:Re,really:Re,quite:Re,well:Re,very:Re,truly:Re,how:Re,deeply:Re,hella:Re,profoundly:Re,extremely:Re,so:Re,badly:Re,mostly:Re,totally:Re,awfully:Re,rather:Re,nothing:Re,something:Re,anything:Re,not:Re,me:Re,is:Re,face:Re,faces:Re,faced:Re,look:Re,looks:Re,looked:Re,reveal:Re,reveals:Re,revealed:Re,sound:Re,sounded:Re,sounds:Re,remains:Re,remained:Re,prove:Re,proves:Re,proved:Re,becomes:Re,stays:Re,tastes:Re,taste:Re,smells:Re,smell:Re,gets:Re,grows:Re,as:Re,rings:Re,radiates:Re,conveys:Re,convey:Re,conveyed:Re,of:Re},afterWords:{too:Re,also:Re,or:Re,enough:Re,as:Re}},tt="Gerund",yc={beforeTags:{Adverb:tt,Preposition:tt,Conjunction:tt},afterTags:{Adverb:tt,Possessive:tt,Person:tt,Pronoun:tt,Determiner:tt,Copula:tt,Preposition:tt,Conjunction:tt,Comparative:tt},beforeWords:{been:tt,keep:tt,continue:tt,stop:tt,am:tt,be:tt,me:tt,began:tt,start:tt,starts:tt,started:tt,stops:tt,stopped:tt,help:tt,helps:tt,avoid:tt,avoids:tt,love:tt,loves:tt,loved:tt,hate:tt,hates:tt,hated:tt},afterWords:{you:tt,me:tt,her:tt,him:tt,his:tt,them:tt,their:tt,it:tt,this:tt,there:tt,on:tt,about:tt,for:tt,up:tt,down:tt}},Wt="Gerund",Zl="Adjective",tge={beforeTags:Object.assign({},br.beforeTags,yc.beforeTags,{Imperative:Wt,Infinitive:Zl,Plural:Wt}),afterTags:Object.assign({},br.afterTags,yc.afterTags,{Noun:Zl}),beforeWords:Object.assign({},br.beforeWords,yc.beforeWords,{is:Zl,are:Wt,was:Zl,of:Zl,suggest:Wt,suggests:Wt,suggested:Wt,recommend:Wt,recommends:Wt,recommended:Wt,imagine:Wt,imagines:Wt,imagined:Wt,consider:Wt,considered:Wt,considering:Wt,resist:Wt,resists:Wt,resisted:Wt,avoid:Wt,avoided:Wt,avoiding:Wt,except:Zl,accept:Zl,assess:Wt,explore:Wt,fear:Wt,fears:Wt,appreciate:Wt,question:Wt,help:Wt,embrace:Wt,with:Zl}),afterWords:Object.assign({},br.afterWords,yc.afterWords,{to:Wt,not:Wt,the:Wt})},nge=tge,yO={beforeTags:{Determiner:void 0,Cardinal:"Noun",PhrasalVerb:"Adjective"},afterTags:{}},rge={beforeTags:Object.assign({},br.beforeTags,Fn.beforeTags,yO.beforeTags),afterTags:Object.assign({},br.afterTags,Fn.afterTags,yO.afterTags),beforeWords:Object.assign({},br.beforeWords,Fn.beforeWords,{are:"Adjective",is:"Adjective",was:"Adjective",be:"Adjective",off:"Adjective",out:"Adjective"}),afterWords:Object.assign({},br.afterWords,Fn.afterWords)},sge=rge;let ct="PastTense",Wm="Adjective";const Cb={beforeTags:{Adverb:ct,Pronoun:ct,ProperNoun:ct,Auxiliary:ct,Noun:ct},afterTags:{Possessive:ct,Pronoun:ct,Determiner:ct,Adverb:ct,Comparative:ct,Date:ct,Gerund:ct},beforeWords:{be:ct,who:ct,get:Wm,had:ct,has:ct,have:ct,been:ct,it:ct,as:ct,for:Wm,more:Wm,always:Wm},afterWords:{by:ct,back:ct,out:ct,in:ct,up:ct,down:ct,before:ct,after:ct,for:ct,the:ct,with:ct,as:ct,on:ct,at:ct,between:ct,to:ct,into:ct,us:ct,them:ct,his:ct,her:ct,their:ct,our:ct,me:ct,about:Wm}},ige={beforeTags:Object.assign({},br.beforeTags,Cb.beforeTags),afterTags:Object.assign({},br.afterTags,Cb.afterTags),beforeWords:Object.assign({},br.beforeWords,Cb.beforeWords),afterWords:Object.assign({},br.afterWords,Cb.afterWords)},oge={afterTags:{Noun:"Adjective",Conjunction:void 0}},age={beforeTags:Object.assign({},br.beforeTags,Ts.beforeTags,{Adverb:void 0,Negative:void 0}),afterTags:Object.assign({},br.afterTags,Ts.afterTags,oge.afterTags),beforeWords:Object.assign({},br.beforeWords,Ts.beforeWords,{have:void 0,had:void 0,not:void 0,went:"Adjective",goes:"Adjective",got:"Adjective",be:"Adjective"}),afterWords:Object.assign({},br.afterWords,Ts.afterWords,{to:void 0,as:"Adjective"})},lge=age,_b={beforeTags:{Copula:"Gerund",PastTense:"Gerund",PresentTense:"Gerund",Infinitive:"Gerund"},afterTags:{Value:"Gerund"},beforeWords:{are:"Gerund",were:"Gerund",be:"Gerund",no:"Gerund",without:"Gerund",you:"Gerund",we:"Gerund",they:"Gerund",he:"Gerund",she:"Gerund",us:"Gerund",them:"Gerund"},afterWords:{the:"Gerund",this:"Gerund",that:"Gerund",me:"Gerund",us:"Gerund",them:"Gerund"}},cge={beforeTags:Object.assign({},yc.beforeTags,Fn.beforeTags,_b.beforeTags),afterTags:Object.assign({},yc.afterTags,Fn.afterTags,_b.afterTags),beforeWords:Object.assign({},yc.beforeWords,Fn.beforeWords,_b.beforeWords),afterWords:Object.assign({},yc.afterWords,Fn.afterWords,_b.afterWords)},uge=cge,nh="Singular",bu="Infinitive",dge={beforeTags:Object.assign({},Ts.beforeTags,Fn.beforeTags,{Adjective:nh,Particle:nh}),afterTags:Object.assign({},Ts.afterTags,Fn.afterTags,{ProperNoun:bu,Gerund:bu,Adjective:bu,Copula:nh}),beforeWords:Object.assign({},Ts.beforeWords,Fn.beforeWords,{is:nh,was:nh,of:nh,have:null}),afterWords:Object.assign({},Ts.afterWords,Fn.afterWords,{instead:bu,about:bu,his:bu,her:bu,to:null,by:null,in:null})},hge=dge,tn="Person",vr={beforeTags:{Honorific:tn,Person:tn},afterTags:{Person:tn,ProperNoun:tn,Verb:tn},ownTags:{ProperNoun:tn},beforeWords:{hi:tn,hey:tn,yo:tn,dear:tn,hello:tn},afterWords:{said:tn,says:tn,told:tn,tells:tn,feels:tn,felt:tn,seems:tn,thinks:tn,thought:tn,spends:tn,spendt:tn,plays:tn,played:tn,sing:tn,sang:tn,learn:tn,learned:tn,wants:tn,wanted:tn}},$n="Month",fge="Person",Sb={beforeTags:{Date:$n,Value:$n},afterTags:{Date:$n,Value:$n},beforeWords:{by:$n,in:$n,on:$n,during:$n,after:$n,before:$n,between:$n,until:$n,til:$n,sometime:$n,of:$n,this:$n,next:$n,last:$n,previous:$n,following:$n,with:fge},afterWords:{sometime:$n,in:$n,of:$n,until:$n,the:$n}},mge={beforeTags:Object.assign({},vr.beforeTags,Sb.beforeTags),afterTags:Object.assign({},vr.afterTags,Sb.afterTags),beforeWords:Object.assign({},vr.beforeWords,Sb.beforeWords),afterWords:Object.assign({},vr.afterWords,Sb.afterWords)},pge={beforeTags:Object.assign({},Fn.beforeTags,vr.beforeTags),afterTags:Object.assign({},Fn.afterTags,vr.afterTags),beforeWords:Object.assign({},Fn.beforeWords,vr.beforeWords,{i:"Infinitive",we:"Infinitive"}),afterWords:Object.assign({},Fn.afterWords,vr.afterWords)},gge=pge,yge={beforeTags:Object.assign({},Fn.beforeTags,vr.beforeTags,Ts.beforeTags),afterTags:Object.assign({},Fn.afterTags,vr.afterTags,Ts.afterTags),beforeWords:Object.assign({},Fn.beforeWords,vr.beforeWords,Ts.beforeWords),afterWords:Object.assign({},Fn.afterWords,vr.afterWords,Ts.afterWords)},bge=yge,ns="Place",Tb={beforeTags:{Place:ns},afterTags:{Place:ns,Abbreviation:ns},beforeWords:{in:ns,by:ns,near:ns,from:ns,to:ns},afterWords:{in:ns,by:ns,near:ns,from:ns,to:ns,government:ns,council:ns,region:ns,city:ns}},vge={beforeTags:Object.assign({},Tb.beforeTags,vr.beforeTags),afterTags:Object.assign({},Tb.afterTags,vr.afterTags),beforeWords:Object.assign({},Tb.beforeWords,vr.beforeWords),afterWords:Object.assign({},Tb.afterWords,vr.afterWords)},xge=vge,wge={beforeTags:Object.assign({},vr.beforeTags,br.beforeTags),afterTags:Object.assign({},vr.afterTags,br.afterTags),beforeWords:Object.assign({},vr.beforeWords,br.beforeWords),afterWords:Object.assign({},vr.afterWords,br.afterWords)},Ege=wge;let Ui="Unit";const kge={beforeTags:{Value:Ui},afterTags:{},beforeWords:{per:Ui,every:Ui,each:Ui,square:Ui,cubic:Ui,sq:Ui,metric:Ui},afterWords:{per:Ui,squared:Ui,cubed:Ui,long:Ui}},Nge=kge,yh={"Actor|Verb":ege,"Adj|Gerund":nge,"Adj|Noun":sge,"Adj|Past":ige,"Adj|Present":lge,"Noun|Verb":hge,"Noun|Gerund":uge,"Person|Noun":gge,"Person|Date":mge,"Person|Verb":bge,"Person|Place":xge,"Person|Adj":Ege,"Unit|Noun":Nge},$b=(t,e)=>{let n=Object.keys(t).reduce((r,s)=>(r[s]=t[s]==="Infinitive"?"PresentTense":"Plural",r),{});return Object.assign(n,e)};yh["Plural|Verb"]={beforeWords:$b(yh["Noun|Verb"].beforeWords,{had:"Plural",have:"Plural"}),afterWords:$b(yh["Noun|Verb"].afterWords,{his:"PresentTense",her:"PresentTense",its:"PresentTense",in:null,to:null,is:"PresentTense",by:"PresentTense"}),beforeTags:$b(yh["Noun|Verb"].beforeTags,{Conjunction:"PresentTense",Noun:void 0,ProperNoun:"PresentTense"}),afterTags:$b(yh["Noun|Verb"].afterTags,{Gerund:"Plural",Noun:"PresentTense",Value:"PresentTense"})};const Cge=yh,nn="Adjective",Fr="Infinitive",vu="PresentTense",gt="Singular",Br="PastTense",rh="Adverb",vi="Plural",Wn="Actor",Ib="Verb",ys="Noun",_ge="ProperNoun",So="LastName",bO="Modal",un="Place",fk="Participle",Sge=[null,null,{ea:gt,ia:ys,ic:nn,ly:rh,"'n":Ib,"'t":Ib},{oed:Br,ued:Br,xed:Br," so":rh,"'ll":bO,"'re":"Copula",azy:nn,eer:ys,end:Ib,ped:Br,ffy:nn,ify:Fr,ing:"Gerund",ize:Fr,ibe:Fr,lar:nn,mum:nn,nes:vu,nny:nn,ous:nn,que:nn,ger:ys,ber:ys,rol:gt,sis:gt,ogy:gt,oid:gt,ian:gt,zes:vu,eld:Br,ken:fk,ven:fk,ten:fk,ect:Fr,ict:Fr,ign:Fr,oze:Fr,ful:nn,bal:nn,ton:ys,pur:un},{amed:Br,aped:Br,ched:Br,lked:Br,rked:Br,reed:Br,nded:Br,mned:nn,cted:Br,dged:Br,ield:gt,akis:So,cede:Fr,chuk:So,czyk:So,ects:vu,iend:gt,ends:Ib,enko:So,ette:gt,iary:gt,wner:gt,fies:vu,fore:rh,gate:Fr,gone:nn,ices:vi,ints:vi,ruct:Fr,ines:vi,ions:vi,ners:vi,pers:vi,lers:vi,less:nn,llen:nn,made:nn,nsen:So,oses:vu,ould:bO,some:nn,sson:So,ians:vi,tion:gt,tage:ys,ique:gt,tive:nn,tors:ys,vice:gt,lier:gt,fier:gt,wned:Br,gent:gt,tist:Wn,pist:Wn,rist:Wn,mist:Wn,yist:Wn,vist:Wn,ists:Wn,lite:gt,site:gt,rite:gt,mite:gt,bite:gt,mate:gt,date:gt,ndal:gt,vent:gt,uist:Wn,gist:Wn,note:gt,cide:gt,ence:gt,wide:nn,vide:Fr,ract:Fr,duce:Fr,pose:Fr,eive:Fr,lyze:Fr,lyse:Fr,iant:nn,nary:nn,ghty:nn,uent:nn,erer:Wn,bury:un,dorf:ys,esty:ys,wych:un,dale:un,folk:un,vale:un,abad:un,sham:un,wick:un,view:un},{elist:Wn,holic:gt,phite:gt,tized:Br,urned:Br,eased:Br,ances:vi,bound:nn,ettes:vi,fully:rh,ishes:vu,ities:vi,marek:So,nssen:So,ology:ys,osome:gt,tment:gt,ports:vi,rough:nn,tches:vu,tieth:"Ordinal",tures:vi,wards:rh,where:rh,archy:ys,pathy:ys,opoly:ys,embly:ys,phate:ys,ndent:gt,scent:gt,onist:Wn,anist:Wn,alist:Wn,olist:Wn,icist:Wn,ounce:Fr,iable:nn,borne:nn,gnant:nn,inant:nn,igent:nn,atory:nn,rient:gt,dient:gt,maker:Wn,burgh:un,mouth:un,ceter:un,ville:un,hurst:un,stead:un,endon:un,brook:un,shire:un,worth:ys,field:_ge,ridge:un},{auskas:So,parent:gt,cedent:gt,ionary:gt,cklist:gt,brooke:un,keeper:Wn,logist:Wn,teenth:"Value",worker:Wn,master:Wn,writer:Wn,brough:un,cester:un,ington:un,cliffe:un,ingham:un},{chester:un,logists:Wn,opoulos:So,borough:un,sdottir:So}],xi="Adjective",dn="Noun",qm="Verb",Tge=[null,null,{},{neo:dn,bio:dn,"de-":qm,"re-":qm,"un-":qm,"ex-":dn},{anti:dn,auto:dn,faux:xi,hexa:dn,kilo:dn,mono:dn,nano:dn,octa:dn,poly:dn,semi:xi,tele:dn,"pro-":xi,"mis-":qm,"dis-":qm,"pre-":xi},{anglo:dn,centi:dn,ethno:dn,ferro:dn,grand:dn,hepta:dn,hydro:dn,intro:dn,macro:dn,micro:dn,milli:dn,nitro:dn,penta:dn,quasi:xi,radio:dn,tetra:dn,"omni-":xi,"post-":xi},{pseudo:xi,"extra-":xi,"hyper-":xi,"inter-":xi,"intra-":xi,"deca-":xi},{electro:dn}],On="Adjective",Ab="Infinitive",Rb="PresentTense",Ja="Singular",Ps="PastTense",vO="Adverb",Qa="Expression",xO="Actor",wO="Verb",EO="Noun",Pb="LastName",$ge={a:[[/.[aeiou]na$/,EO,"tuna"],[/.[oau][wvl]ska$/,Pb],[/.[^aeiou]ica$/,Ja,"harmonica"],[/^([hyj]a+)+$/,Qa,"haha"]],c:[[/.[^aeiou]ic$/,On]],d:[[/[aeiou](pp|ll|ss|ff|gg|tt|rr|bb|nn|mm)ed$/,Ps,"popped"],[/.[aeo]{2}[bdgmnprvz]ed$/,Ps,"rammed"],[/.[aeiou][sg]hed$/,Ps,"gushed"],[/.[aeiou]red$/,Ps,"hired"],[/.[aeiou]r?ried$/,Ps,"hurried"],[/[^aeiou]ard$/,Ja,"steward"],[/[aeiou][^aeiou]id$/,On,""],[/.[vrl]id$/,On,"livid"],[/..led$/,Ps,"hurled"],[/.[iao]sed$/,Ps,""],[/[aeiou]n?[cs]ed$/,Ps,""],[/[aeiou][rl]?[mnf]ed$/,Ps,""],[/[aeiou][ns]?c?ked$/,Ps,"bunked"],[/[aeiou]gned$/,Ps],[/[aeiou][nl]?ged$/,Ps],[/.[tdbwxyz]ed$/,Ps],[/[^aeiou][aeiou][tvx]ed$/,Ps],[/.[cdflmnprstv]ied$/,Ps,"emptied"]],e:[[/.[lnr]ize$/,Ab,"antagonize"],[/.[^aeiou]ise$/,Ab,"antagonise"],[/.[aeiou]te$/,Ab,"bite"],[/.[^aeiou][ai]ble$/,On,"fixable"],[/.[^aeiou]eable$/,On,"maleable"],[/.[ts]ive$/,On,"festive"],[/[a-z]-like$/,On,"woman-like"]],h:[[/.[^aeiouf]ish$/,On,"cornish"],[/.v[iy]ch$/,Pb,"..ovich"],[/^ug?h+$/,Qa,"ughh"],[/^uh[ -]?oh$/,Qa,"uhoh"],[/[a-z]-ish$/,On,"cartoon-ish"]],i:[[/.[oau][wvl]ski$/,Pb,"polish-male"]],k:[[/^(k){2}$/,Qa,"kkkk"]],l:[[/.[gl]ial$/,On,"familial"],[/.[^aeiou]ful$/,On,"fitful"],[/.[nrtumcd]al$/,On,"natal"],[/.[^aeiou][ei]al$/,On,"familial"]],m:[[/.[^aeiou]ium$/,Ja,"magnesium"],[/[^aeiou]ism$/,Ja,"schism"],[/^[hu]m+$/,Qa,"hmm"],[/^\d+ ?[ap]m$/,"Date","3am"]],n:[[/.[lsrnpb]ian$/,On,"republican"],[/[^aeiou]ician$/,xO,"musician"],[/[aeiou][ktrp]in'$/,"Gerund","cookin'"]],o:[[/^no+$/,Qa,"noooo"],[/^(yo)+$/,Qa,"yoo"],[/^wo{2,}[pt]?$/,Qa,"woop"]],r:[[/.[bdfklmst]ler$/,"Noun"],[/[aeiou][pns]er$/,Ja],[/[^i]fer$/,Ab],[/.[^aeiou][ao]pher$/,xO],[/.[lk]er$/,"Noun"],[/.ier$/,"Comparative"]],t:[[/.[di]est$/,"Superlative"],[/.[icldtgrv]ent$/,On],[/[aeiou].*ist$/,On],[/^[a-z]et$/,wO]],s:[[/.[^aeiou]ises$/,Rb],[/.[rln]ates$/,Rb],[/.[^z]ens$/,wO],[/.[lstrn]us$/,Ja],[/.[aeiou]sks$/,Rb],[/.[aeiou]kes$/,Rb],[/[aeiou][^aeiou]is$/,Ja],[/[a-z]'s$/,EO],[/^yes+$/,Qa]],v:[[/.[^aeiou][ai][kln]ov$/,Pb]],y:[[/.[cts]hy$/,On],[/.[st]ty$/,On],[/.[tnl]ary$/,On],[/.[oe]ry$/,Ja],[/[rdntkbhs]ly$/,vO],[/.(gg|bb|zz)ly$/,On],[/...lly$/,vO],[/.[gk]y$/,On],[/[bszmp]{2}y$/,On],[/.[ai]my$/,On],[/[ea]{2}zy$/,On],[/.[^aeiou]ity$/,Ja]]},bs="Verb",En="Noun",Ige={leftTags:[["Adjective",En],["Possessive",En],["Determiner",En],["Adverb",bs],["Pronoun",bs],["Value",En],["Ordinal",En],["Modal",bs],["Superlative",En],["Demonym",En],["Honorific","Person"]],leftWords:[["i",bs],["first",En],["it",bs],["there",bs],["not",bs],["because",En],["if",En],["but",En],["who",bs],["this",En],["his",En],["when",En],["you",bs],["very","Adjective"],["old",En],["never",bs],["before",En],["a",En],["the",En],["been",bs]],rightTags:[["Copula",En],["PastTense",En],["Conjunction",En],["Modal",En]],rightWords:[["there",bs],["me",bs],["man","Adjective"],["him",bs],["it",bs],["were",En],["took",En],["himself",bs],["went",En],["who",En],["jr","Person"]]},$d={Comparative:{fwd:"3:ser,ier1er:h,t,f,l,n1r:e2er:ss,or,om",both:"3er:ver,ear,alm3ner:hin3ter:lat2mer:im2er:ng,rm,mb2ber:ib2ger:ig1er:w,p,k,dier:y",rev:"1:tter,yer2:uer,ver,ffer,oner,eler,ller,iler,ster,cer,uler,sher,ener,gher,aner,adder,nter,eter,rter,hter,rner,fter3:oser,ooler,eafer,user,airer,bler,maler,tler,eater,uger,rger,ainer,urer,ealer,icher,pler,emner,icter,nser,iser4:arser,viner,ucher,rosser,somer,ndomer,moter,oother,uarer,hiter5:nuiner,esser,emierar:urther",ex:"worse:badbetter:good4er:fair,gray,poor1urther:far3ter:fat,hot,wet3der:mad,sad3er:shy,fun4der:glad:4r:cute,dire,fake,fine,free,lame,late,pale,rare,ripe,rude,safe,sore,tame,wide5r:eerie,stale"},Gerund:{fwd:"1:nning,tting,rring,pping,eing,mming,gging,dding,bbing,kking2:eking,oling,eling,eming3:velling,siting,uiting,fiting,loting,geting,ialing,celling4:graming",both:"1:aing,iing,fing,xing,ying,oing,hing,wing2:tzing,rping,izzing,bting,mning,sping,wling,rling,wding,rbing,uping,lming,wning,mping,oning,lting,mbing,lking,fting,hting,sking,gning,pting,cking,ening,nking,iling,eping,ering,rting,rming,cting,lping,ssing,nting,nding,lding,sting,rning,rding,rking3:belling,siping,toming,yaking,uaking,oaning,auling,ooping,aiding,naping,euring,tolling,uzzing,ganing,haning,ualing,halling,iasing,auding,ieting,ceting,ouling,voring,ralling,garing,joring,oaming,oaking,roring,nelling,ooring,uelling,eaming,ooding,eaping,eeting,ooting,ooming,xiting,keting,ooking,ulling,airing,oaring,biting,outing,oiting,earing,naling,oading,eeding,ouring,eaking,aiming,illing,oining,eaning,onging,ealing,aining,eading4:thoming,melling,aboring,ivoting,weating,dfilling,onoring,eriting,imiting,tialling,rgining,otoring,linging,winging,lleting,louding,spelling,mpelling,heating,feating,opelling,choring,welling,ymaking,ctoring,calling,peating,iloring,laiting,utoring,uditing,mmaking,loating,iciting,waiting,mbating,voiding,otalling,nsoring,nselling,ocusing,itoring,eloping5:rselling,umpeting,atrolling,treating,tselling,rpreting,pringing,ummeting,ossoming,elmaking,eselling,rediting,totyping,onmaking,rfeiting,ntrolling5e:chmaking,dkeeping,severing,erouting,ecreting,ephoning,uthoring,ravening,reathing,pediting,erfering,eotyping,fringing,entoring,ombining,ompeting4e:emaking,eething,twining,rruling,chuting,xciting,rseding,scoping,edoring,pinging,lunging,agining,craping,pleting,eleting,nciting,nfining,ncoding,tponing,ecoding,writing,esaling,nvening,gnoring,evoting,mpeding,rvening,dhering,mpiling,storing,nviting,ploring3e:tining,nuring,saking,miring,haling,ceding,xuding,rining,nuting,laring,caring,miling,riding,hoking,piring,lading,curing,uading,noting,taping,futing,paring,hading,loding,siring,guring,vading,voking,during,niting,laning,caping,luting,muting,ruding,ciding,juring,laming,caling,hining,uoting,liding,ciling,duling,tuting,puting,cuting,coring,uiding,tiring,turing,siding,rading,enging,haping,buting,lining,taking,anging,haring,uiring,coming,mining,moting,suring,viding,luding2e:tring,zling,uging,oging,gling,iging,vring,fling,lging,obing,psing,pling,ubing,cling,dling,wsing,iking,rsing,dging,kling,ysing,tling,rging,eging,nsing,uning,osing,uming,using,ibing,bling,aging,ising,asing,ating2ie:rlying1e:zing,uing,cing,ving",rev:"ying:ie1ing:se,ke,te,we,ne,re,de,pe,me,le,c,he2ing:ll,ng,dd,ee,ye,oe,rg,us2ning:un2ging:og,ag,ug,ig,eg2ming:um2bing:ub,ab,eb,ob3ning:lan,can,hin,pin,win3ring:cur,lur,tir,tar,pur,car3ing:ait,del,eel,fin,eat,oat,eem,lel,ool,ein,uin3ping:rop,rap,top,uip,wap,hip,hop,lap,rip,cap3ming:tem,wim,rim,kim,lim3ting:mat,cut,pot,lit,lot,hat,set,pit,put3ding:hed,bed,bid3king:rek3ling:cil,pel3bing:rib4ning:egin4ing:isit,ruit,ilot,nsit,dget,rkel,ival,rcel4ring:efer,nfer4ting:rmit,mmit,ysit,dmit,emit,bmit,tfit,gret4ling:evel,xcel,ivel4ding:hred5ing:arget,posit,rofit5ring:nsfer5ting:nsmit,orget,cquit5ling:ancel,istil",ex:"3:adding,eating,aiming,aiding,airing,outing,gassing,setting,getting,putting,cutting,winning,sitting,betting,mapping,tapping,letting,bidding,hitting,tanning,netting,popping,fitting,capping,lapping,barring,banning,vetting,topping,rotting,tipping,potting,wetting,pitting,dipping,budding,hemming,pinning,jetting,kidding,padding,podding,sipping,wedding,bedding,donning,warring,penning,gutting,cueing,wadding,petting,ripping,napping,matting,tinning,binning,dimming,hopping,mopping,nodding,panning,rapping,ridding,sinning4:selling,falling,calling,waiting,editing,telling,rolling,heating,boating,hanging,beating,coating,singing,tolling,felling,polling,discing,seating,voiding,gelling,yelling,baiting,reining,ruining,seeking,spanning,stepping,knitting,emitting,slipping,quitting,dialing,omitting,clipping,shutting,skinning,abutting,flipping,trotting,cramming,fretting,suiting5:bringing,treating,spelling,stalling,trolling,expelling,rivaling,wringing,deterring,singeing,befitting,refitting6:enrolling,distilling,scrolling,strolling,caucusing,travelling7:installing,redefining,stencilling,recharging,overeating,benefiting,unraveling,programing9:reprogrammingis:being2e:using,aging,owing3e:making,taking,coming,noting,hiring,filing,coding,citing,doping,baking,coping,hoping,lading,caring,naming,voting,riding,mining,curing,lining,ruling,typing,boring,dining,firing,hiding,piling,taping,waning,baling,boning,faring,honing,wiping,luring,timing,wading,piping,fading,biting,zoning,daring,waking,gaming,raking,ceding,tiring,coking,wining,joking,paring,gaping,poking,pining,coring,liming,toting,roping,wiring,aching4e:writing,storing,eroding,framing,smoking,tasting,wasting,phoning,shaking,abiding,braking,flaking,pasting,priming,shoring,sloping,withing,hinging5e:defining,refining,renaming,swathing,fringing,reciting1ie:dying,tying,lying,vying7e:sunbathing"},Participle:{fwd:"1:mt2:llen3:iven,aken:ney:in",both:"1:wn2:me,aten3:seen,bidden,isen4:roven,asten3l:pilt3d:uilt2e:itten1im:wum1eak:poken1ine:hone1ose:osen1in:gun1ake:wokenear:orneal:oleneeze:ozenet:ottenink:unking:ung",rev:"2:unoken:eakought:eekoven:eave1ne:o1own:ly1den:de1in:ay2t:am2n:ee3en:all4n:rive,sake,take5n:rgive",ex:"2:been3:seen,run4:given,taken5:shaken2eak:broken1ive:dove2y:flown3e:hidden,ridden1eek:sought1ake:woken1eave:woven"},PastTense:{fwd:"1:tted,wed,gged,nned,een,rred,pped,yed,bbed,oed,dded,rd,wn,mmed2:eed,nded,et,hted,st,oled,ut,emed,eled,lded,ken,rt,nked,apt,ant,eped,eked3:eared,eat,eaded,nelled,ealt,eeded,ooted,eaked,eaned,eeted,mited,bid,uit,ead,uited,ealed,geted,velled,ialed,belled4:ebuted,hined,comedy:iedome:ameear:oreind:ounding:ung,angep:ptink:ank,unkig:ugall:ellee:awive:aveeeze:ozeold:eldave:ftake:ookell:oldite:oteide:odeine:onein:un,oneal:oleim:amie:ayand:ood1ise:rose1eak:roke1ing:rought1ive:rove1el:elt1id:bade1et:got1y:aid1it:sat3e:lid3d:pent",both:"1:aed,fed,xed,hed2:sged,xted,wled,rped,lked,kied,lmed,lped,uped,bted,rbed,rked,wned,rled,mped,fted,mned,mbed,zzed,omed,ened,cked,gned,lted,sked,ued,zed,nted,ered,rted,rmed,ced,sted,rned,ssed,rded,pted,ved,cted3:cled,eined,siped,ooned,uked,ymed,jored,ouded,ioted,oaned,lged,asped,iged,mured,oided,eiled,yped,taled,moned,yled,lit,kled,oaked,gled,naled,fled,uined,oared,valled,koned,soned,aided,obed,ibed,meted,nicked,rored,micked,keted,vred,ooped,oaded,rited,aired,auled,filled,ouled,ooded,ceted,tolled,oited,bited,aped,tled,vored,dled,eamed,nsed,rsed,sited,owded,pled,sored,rged,osed,pelled,oured,psed,oated,loned,aimed,illed,eured,tred,ioned,celled,bled,wsed,ooked,oiled,itzed,iked,iased,onged,ased,ailed,uned,umed,ained,auded,nulled,ysed,eged,ised,aged,oined,ated,used,dged,doned4:ntied,efited,uaked,caded,fired,roped,halled,roked,himed,culed,tared,lared,tuted,uared,routed,pited,naked,miled,houted,helled,hared,cored,caled,tired,peated,futed,ciled,called,tined,moted,filed,sided,poned,iloted,honed,lleted,huted,ruled,cured,named,preted,vaded,sured,talled,haled,peded,gined,nited,uided,ramed,feited,laked,gured,ctored,unged,pired,cuted,voked,eloped,ralled,rined,coded,icited,vided,uaded,voted,mined,sired,noted,lined,nselled,luted,jured,fided,puted,piled,pared,olored,cided,hoked,enged,tured,geoned,cotted,lamed,uiled,waited,udited,anged,luded,mired,uired,raded5:modelled,izzled,eleted,umpeted,ailored,rseded,treated,eduled,ecited,rammed,eceded,atrolled,nitored,basted,twined,itialled,ncited,gnored,ploded,xcited,nrolled,namelled,plored,efeated,redited,ntrolled,nfined,pleted,llided,lcined,eathed,ibuted,lloted,dhered,cceded3ad:sled2aw:drew2ot:hot2ke:made2ow:hrew,grew2ose:hose2d:ilt2in:egan1un:ran1ink:hought1ick:tuck1ike:ruck1eak:poke,nuck1it:pat1o:did1ow:new1ake:wokego:went",rev:"3:rst,hed,hut,cut,set4:tbid5:dcast,eread,pread,erbidought:uy,eek1ied:ny,ly,dy,ry,fy,py,vy,by,ty,cy1ung:ling,ting,wing1pt:eep1ank:rink1ore:bear,wear1ave:give1oze:reeze1ound:rind,wind1ook:take,hake1aw:see1old:sell1ote:rite1ole:teal1unk:tink1am:wim1ay:lie1ood:tand1eld:hold2d:he,ge,re,le,leed,ne,reed,be,ye,lee,pe,we2ed:dd,oy,or,ey,gg,rr,us,ew,to2ame:ecome,rcome2ped:ap2ged:ag,og,ug,eg2bed:ub,ab,ib,ob2lt:neel2id:pay2ang:pring2ove:trive2med:um2ode:rride2at:ysit3ted:mit,hat,mat,lat,pot,rot,bat3ed:low,end,tow,und,ond,eem,lay,cho,dow,xit,eld,ald,uld,law,lel,eat,oll,ray,ank,fin,oam,out,how,iek,tay,haw,ait,vet,say,cay,bow3d:ste,ede,ode,ete,ree,ude,ame,oke,ote,ime,ute,ade3red:lur,cur,pur,car3ped:hop,rop,uip,rip,lip,tep,top3ded:bed,rod,kid3ade:orbid3led:uel3ned:lan,can,kin,pan,tun3med:rim,lim4ted:quit,llot4ed:pear,rrow,rand,lean,mand,anel,pand,reet,link,abel,evel,imit,ceed,ruit,mind,peal,veal,hool,head,pell,well,mell,uell,band,hear,weak4led:nnel,qual,ebel,ivel4red:nfer,efer,sfer4n:sake,trew4d:ntee4ded:hred4ned:rpin5ed:light,nceal,right,ndear,arget,hread,eight,rtial,eboot5d:edite,nvite5ted:egret5led:ravel",ex:"2:been,upped3:added,aged,aided,aimed,aired,bid,died,dyed,egged,erred,eyed,fit,gassed,hit,lied,owed,pent,pied,tied,used,vied,oiled,outed,banned,barred,bet,canned,cut,dipped,donned,ended,feed,inked,jarred,let,manned,mowed,netted,padded,panned,pitted,popped,potted,put,set,sewn,sowed,tanned,tipped,topped,vowed,weed,bowed,jammed,binned,dimmed,hopped,mopped,nodded,pinned,rigged,sinned,towed,vetted4:ached,baked,baled,boned,bored,called,caned,cared,ceded,cited,coded,cored,cubed,cured,dared,dined,edited,exited,faked,fared,filed,fined,fired,fuelled,gamed,gelled,hired,hoped,joked,lined,mined,named,noted,piled,poked,polled,pored,pulled,reaped,roamed,rolled,ruled,seated,shed,sided,timed,tolled,toned,voted,waited,walled,waned,winged,wiped,wired,zoned,yelled,tamed,lubed,roped,faded,mired,caked,honed,banged,culled,heated,raked,welled,banded,beat,cast,cooled,cost,dealt,feared,folded,footed,handed,headed,heard,hurt,knitted,landed,leaked,leapt,linked,meant,minded,molded,neared,needed,peaked,plodded,plotted,pooled,quit,read,rooted,sealed,seeded,seeped,shipped,shunned,skimmed,slammed,sparred,stemmed,stirred,suited,thinned,twinned,swayed,winked,dialed,abutted,blotted,fretted,healed,heeded,peeled,reeled5:basted,cheated,equalled,eroded,exiled,focused,opined,pleated,primed,quoted,scouted,shored,sloped,smoked,sniped,spelled,spouted,routed,staked,stored,swelled,tasted,treated,wasted,smelled,dwelled,honored,prided,quelled,eloped,scared,coveted,sweated,breaded,cleared,debuted,deterred,freaked,modeled,pleaded,rebutted,speeded6:anchored,defined,endured,impaled,invited,refined,revered,strolled,cringed,recast,thrust,unfolded7:authored,combined,competed,conceded,convened,excreted,extruded,redefined,restored,secreted,rescinded,welcomed8:expedited,infringed9:interfered,intervened,persevered10:contravenedeat:ateis:wasgo:wentare:were3d:bent,lent,rent,sent3e:bit,fled,hid,lost3ed:bled,bred2ow:blew,grew1uy:bought2tch:caught1o:did1ive:dove,gave2aw:drew2ed:fed2y:flew,laid,paid,said1ight:fought1et:got2ve:had1ang:hung2ad:led2ght:lit2ke:made2et:met1un:ran1ise:rose1it:sat1eek:sought1each:taught1ake:woke,took1eave:wove2ise:arose1ear:bore,tore,wore1ind:bound,found,wound2eak:broke2ing:brought,wrung1ome:came2ive:drove1ig:dug1all:fell2el:felt4et:forgot1old:held2ave:left1ing:rang,sang1ide:rode1ink:sank1ee:saw2ine:shone4e:slid1ell:sold,told4d:spent2in:spun1in:won"},PresentTense:{fwd:"1:oes1ve:as",both:"1:xes2:zzes,ches,shes,sses3:iases2y:llies,plies1y:cies,bies,ties,vies,nies,pies,dies,ries,fies:s",rev:"1ies:ly2es:us,go,do3es:cho,eto",ex:"2:does,goes3:gasses5:focusesis:are3y:relies2y:flies2ve:has"},Superlative:{fwd:"1st:e1est:l,m,f,s1iest:cey2est:or,ir3est:ver",both:"4:east5:hwest5lest:erful4est:weet,lgar,tter,oung4most:uter3est:ger,der,rey,iet,ong,ear3test:lat3most:ner2est:pt,ft,nt,ct,rt,ht2test:it2gest:ig1est:b,k,n,p,h,d,wiest:y",rev:"1:ttest,nnest,yest2:sest,stest,rmest,cest,vest,lmest,olest,ilest,ulest,ssest,imest,uest3:rgest,eatest,oorest,plest,allest,urest,iefest,uelest,blest,ugest,amest,yalest,ealest,illest,tlest,itest4:cerest,eriest,somest,rmalest,ndomest,motest,uarest,tiffest5:leverest,rangestar:urthest3ey:riciest",ex:"best:goodworst:bad5est:great4est:fast,full,fair,dull3test:hot,wet,fat4nest:thin1urthest:far3est:gay,shy,ill4test:neat4st:late,wide,fine,safe,cute,fake,pale,rare,rude,sore,ripe,dire6st:severe"},AdjToNoun:{fwd:"1:tistic,eable,lful,sful,ting,tty2:onate,rtable,geous,ced,seful,ctful3:ortive,entedarity:eary:eticfulness:begone1ity:re1y:tiful,gic2ity:ile,imous,ilous,ime2ion:ated2eness:iving2y:trious2ation:iring2tion:vant3ion:ect3ce:mant,mantic3tion:irable3y:est,estic3m:mistic,listic3ess:ning4n:utious4on:rative,native,vative,ective4ce:erant",both:"1:king,wing2:alous,ltuous,oyful,rdous3:gorous,ectable,werful,amatic4:oised,usical,agical,raceful,ocused,lined,ightful5ness:stful,lding,itous,nuous,ulous,otous,nable,gious,ayful,rvous,ntous,lsive,peful,entle,ciful,osive,leful,isive,ncise,reful,mious5ty:ivacious5ties:ubtle5ce:ilient,adiant,atient5cy:icient5sm:gmatic5on:sessive,dictive5ity:pular,sonal,eative,entic5sity:uminous5ism:conic5nce:mperate5ility:mitable5ment:xcited5n:bitious4cy:brant,etent,curate4ility:erable,acable,icable,ptable4ty:nacious,aive,oyal,dacious4n:icious4ce:vient,erent,stent,ndent,dient,quent,ident4ness:adic,ound,hing,pant,sant,oing,oist,tute4icity:imple4ment:fined,mused4ism:otic4ry:dantic4ity:tund,eral4edness:hand4on:uitive4lity:pitable4sm:eroic,namic4sity:nerous3th:arm3ility:pable,bable,dable,iable3cy:hant,nant,icate3ness:red,hin,nse,ict,iet,ite,oud,ind,ied,rce3ion:lute3ity:ual,gal,volous,ial3ce:sent,fensive,lant,gant,gent,lent,dant3on:asive3m:fist,sistic,iastic3y:terious,xurious,ronic,tastic3ur:amorous3e:tunate3ation:mined3sy:rteous3ty:ain3ry:ave3ment:azed2ness:de,on,ue,rn,ur,ft,rp,pe,om,ge,rd,od,ay,ss,er,ll,oy,ap,ht,ld,ad,rt2inousness:umous2ity:neous,ene,id,ane2cy:bate,late2ation:ized2ility:oble,ible2y:odic2e:oving,aring2s:ost2itude:pt2dom:ee2ance:uring2tion:reet2ion:oted2sion:ending2liness:an2or:rdent1th:ung1e:uable1ness:w,h,k,f1ility:mble1or:vent1ement:ging1tiquity:ncient1ment:hedverty:orength:ongeat:otpth:epiness:y",rev:"",ex:"5:forceful,humorous8:charismatic13:understanding5ity:active11ness:adventurous,inquisitive,resourceful8on:aggressive,automatic,perceptive7ness:amorous,fatuous,furtive,ominous,serious5ness:ample,sweet12ness:apprehensive,cantankerous,contemptuous,ostentatious13ness:argumentative,conscientious9ness:assertive,facetious,imperious,inventive,oblivious,rapacious,receptive,seditious,whimsical10ness:attractive,expressive,impressive,loquacious,salubrious,thoughtful3edom:boring4ness:calm,fast,keen,tame8ness:cheerful,gracious,specious,spurious,timorous,unctuous5sity:curious9ion:deliberate8ion:desperate6e:expensive7ce:fragrant3y:furious9ility:ineluctable6ism:mystical8ity:physical,proactive,sensitive,vertical5cy:pliant7ity:positive9ity:practical12ism:professional6ce:prudent3ness:red6cy:vagrant3dom:wise"}},Age=function(t,e={}){return e.hasOwnProperty(t)?e[t]:null},Rge=function(t,e=[]){for(let n=0;n<e.length;n+=1)if(t.endsWith(e[n]))return t;return null},Pge=function(t,e,n={}){e=e||{};let r=t.length-1;for(let s=r;s>=1;s-=1){let i=t.length-s,o=t.substring(i,t.length);if(e.hasOwnProperty(o)===!0)return t.slice(0,i)+e[o];if(n.hasOwnProperty(o)===!0)return t.slice(0,i)+n[o]}return e.hasOwnProperty("")?t+=e[""]:n.hasOwnProperty("")?t+=n[""]:null},Dge=function(t="",e={}){let n=Age(t,e.ex);return n=n||Rge(t,e.same),n=n||Pge(t,e.fwd,e.both),n=n||t,n},_i=Dge,kO=function(t){return Object.entries(t).reduce((e,n)=>(e[n[1]]=n[0],e),{})},Oge=function(t={}){return{reversed:!0,both:kO(t.both),ex:kO(t.ex),fwd:t.rev||{}}},Jf=Oge,NO=/^([0-9]+)/,Lge=function(t){let e={};return t.split("").forEach(n=>{let[r,s]=n.split(":");s=(s||"").split(","),s.forEach(i=>{e[i]=r})}),e},Mge=function(t="",e=""){e=String(e);let n=e.match(NO);if(n===null)return e;let r=Number(n[1])||0;return t.substring(0,r)+e.replace(NO,"")},Db=function(t){let e=Lge(t);return Object.keys(e).reduce((n,r)=>(n[r]=Mge(r,e[r]),n),{})},zge=function(t={}){return typeof t=="string"&&(t=JSON.parse(t)),t.fwd=Db(t.fwd||""),t.both=Db(t.both||""),t.rev=Db(t.rev||""),t.ex=Db(t.ex||""),t},Id=zge,H8=Id($d.PastTense),G8=Id($d.PresentTense),W8=Id($d.Gerund),q8=Id($d.Participle),Fge=Jf(H8),Bge=Jf(G8),Vge=Jf(W8),jge=Jf(q8),K8=Id($d.Comparative),Z8=Id($d.Superlative),Uge=Jf(K8),Hge=Jf(Z8),Gge=Id($d.AdjToNoun),X8={fromPast:H8,fromPresent:G8,fromGerund:W8,fromParticiple:q8,toPast:Fge,toPresent:Bge,toGerund:Vge,toParticiple:jge,toComparative:K8,toSuperlative:Z8,fromComparative:Uge,fromSuperlative:Hge,adjToNoun:Gge},Wge=[[/^[\w.]+@[\w.]+\.[a-z]{2,3}$/,"Email"],[/^(https?:\/\/|www\.)+\w+\.[a-z]{2,3}/,"Url","http.."],[/^[a-z0-9./].+\.(com|net|gov|org|ly|edu|info|biz|dev|ru|jp|de|in|uk|br|io|ai)/,"Url",".com"],[/^[PMCE]ST$/,"Timezone","EST"],[/^ma?c'[a-z]{3}/,"LastName","mc'neil"],[/^o'[a-z]{3}/,"LastName","o'connor"],[/^ma?cd[aeiou][a-z]{3}/,"LastName","mcdonald"],[/^(lol)+[sz]$/,"Expression","lol"],[/^wo{2,}a*h?$/,"Expression","wooah"],[/^(hee?){2,}h?$/,"Expression","hehe"],[/^(un|de|re)\\-[a-z\u00C0-\u00FF]{2}/,"Verb","un-vite"],[/^(m|k|cm|km)\/(s|h|hr)$/,"Unit","5 k/m"],[/^(ug|ng|mg)\/(l|m3|ft3)$/,"Unit","ug/L"],[/[^:/]\/\p{Letter}/u,"SlashedTerm","love/hate"]],qge=[[/^#[\p{Number}_]*\p{Letter}/u,"HashTag"],[/^@\w{2,}$/,"AtMention"],[/^([A-Z]\.){2}[A-Z]?/i,["Acronym","Noun"],"F.B.I"],[/.{3}[lkmnp]in['`]$/,"Gerund","chillin'"],[/.{4}s['`]$/,"Possessive","flanders'"],[/^[\p{Emoji_Presentation}\p{Extended_Pictographic}]/u,"Emoji","emoji-class"]],Kge=[[/^@1?[0-9](am|pm)$/i,"Time","3pm"],[/^@1?[0-9]:[0-9]{2}(am|pm)?$/i,"Time","3:30pm"],[/^'[0-9]{2}$/,"Year"],[/^[012]?[0-9](:[0-5][0-9])(:[0-5][0-9])$/,"Time","3:12:31"],[/^[012]?[0-9](:[0-5][0-9])?(:[0-5][0-9])? ?(am|pm)$/i,"Time","1:12pm"],[/^[012]?[0-9](:[0-5][0-9])(:[0-5][0-9])? ?(am|pm)?$/i,"Time","1:12:31pm"],[/^[0-9]{4}-[0-9]{2}-[0-9]{2}T[0-9]{2}:[0-9]{2}/i,"Date","iso-date"],[/^[0-9]{1,4}-[0-9]{1,2}-[0-9]{1,4}$/,"Date","iso-dash"],[/^[0-9]{1,4}\/[0-9]{1,2}\/([0-9]{4}|[0-9]{2})$/,"Date","iso-slash"],[/^[0-9]{1,4}\.[0-9]{1,2}\.[0-9]{1,4}$/,"Date","iso-dot"],[/^[0-9]{1,4}-[a-z]{2,9}-[0-9]{1,4}$/i,"Date","12-dec-2019"],[/^utc ?[+-]?[0-9]+$/,"Timezone","utc-9"],[/^(gmt|utc)[+-][0-9]{1,2}$/i,"Timezone","gmt-3"],[/^[0-9]{3}-[0-9]{4}$/,"PhoneNumber","421-0029"],[/^(\+?[0-9][ -])?[0-9]{3}[ -]?[0-9]{3}-[0-9]{4}$/,"PhoneNumber","1-800-"],[/^[-+]?\p{Currency_Symbol}[-+]?[0-9]+(,[0-9]{3})*(\.[0-9]+)?([kmb]|bn)?\+?$/u,["Money","Value"],"$5.30"],[/^[-+]?[0-9]+(,[0-9]{3})*(\.[0-9]+)?\p{Currency_Symbol}\+?$/u,["Money","Value"],"5.30"],[/^[-+]?[$]?[0-9]([0-9,.])+(usd|eur|jpy|gbp|cad|aud|chf|cny|hkd|nzd|kr|rub)$/i,["Money","Value"],"$400usd"],[/^[-+]?[0-9]+(,[0-9]{3})*(\.[0-9]+)?\+?$/,["Cardinal","NumericValue"],"5,999"],[/^[-+]?[0-9]+(,[0-9]{3})*(\.[0-9]+)?(st|nd|rd|r?th)$/,["Ordinal","NumericValue"],"53rd"],[/^\.[0-9]+\+?$/,["Cardinal","NumericValue"],".73th"],[/^[-+]?[0-9]+(,[0-9]{3})*(\.[0-9]+)?%\+?$/,["Percent","Cardinal","NumericValue"],"-4%"],[/^\.[0-9]+%$/,["Percent","Cardinal","NumericValue"],".3%"],[/^[0-9]{1,4}\/[0-9]{1,4}(st|nd|rd|th)?s?$/,["Fraction","NumericValue"],"2/3rds"],[/^[0-9.]{1,3}[a-z]{0,2}[-][0-9]{1,3}[a-z]{0,2}$/,["Value","NumberRange"],"3-4"],[/^[0-9]{1,2}(:[0-9][0-9])?(am|pm)? ?[-] ?[0-9]{1,2}(:[0-9][0-9])?(am|pm)$/,["Time","NumberRange"],"3-4pm"],[/^[0-9.]+([a-z]{1,4})$/,"NumericValue","9km"]],Zge=["academy","administration","agence","agences","agencies","agency","airlines","airways","army","assoc","associates","association","assurance","authority","autorite","aviation","bank","banque","board","boys","brands","brewery","brotherhood","brothers","bureau","cafe","co","caisse","capital","care","cathedral","center","centre","chemicals","choir","chronicle","church","circus","clinic","clinique","club","co","coalition","coffee","collective","college","commission","committee","communications","community","company","comprehensive","computers","confederation","conference","conseil","consulting","containers","corporation","corps","corp","council","crew","data","departement","department","departments","design","development","directorate","division","drilling","education","eglise","electric","electricity","energy","ensemble","enterprise","enterprises","entertainment","estate","etat","faculty","faction","federation","financial","fm","foundation","fund","gas","gazette","girls","government","group","guild","herald","holdings","hospital","hotel","hotels","inc","industries","institut","institute","institutes","insurance","international","interstate","investment","investments","investors","journal","laboratory","labs","llc","ltd","limited","machines","magazine","management","marine","marketing","markets","media","memorial","ministere","ministry","military","mobile","motor","motors","musee","museum","news","observatory","office","oil","optical","orchestra","organization","partners","partnership","petrol","petroleum","pharmacare","pharmaceutical","pharmaceuticals","pizza","plc","police","politburo","polytechnic","post","power","press","productions","quartet","radio","reserve","resources","restaurant","restaurants","savings","school","securities","service","services","societe","subsidiary","society","sons","subcommittee","syndicat","systems","telecommunications","telegraph","television","times","tribunal","tv","union","university","utilities","workers"].reduce((t,e)=>(t[e]=!0,t),{}),Xge=["atoll","basin","bay","beach","bluff","bog","camp","canyon","canyons","cape","cave","caves","cliffs","coast","cove","coves","crater","crossing","creek","desert","dune","dunes","downs","estates","escarpment","estuary","falls","fjord","fjords","forest","forests","glacier","gorge","gorges","grove","gulf","gully","highland","heights","hollow","hill","hills","inlet","island","islands","isthmus","junction","knoll","lagoon","lake","lakeshore","marsh","marshes","mount","mountain","mountains","narrows","peninsula","plains","plateau","pond","rapids","ravine","reef","reefs","ridge","river","rivers","sandhill","shoal","shore","shoreline","shores","strait","straits","springs","stream","swamp","tombolo","trail","trails","trench","valley","vallies","village","volcano","waterfall","watershed","wetland","woods","acres","burough","county","district","municipality","prefecture","province","region","reservation","state","territory","borough","metropolis","downtown","uptown","midtown","city","town","township","hamlet","country","kingdom","enclave","neighbourhood","neighborhood","kingdom","ward","zone","airport","amphitheater","arch","arena","auditorium","bar","barn","basilica","battlefield","bridge","building","castle","centre","coliseum","cineplex","complex","dam","farm","field","fort","garden","gardens","gymnasium","hall","house","levee","library","manor","memorial","monument","museum","gallery","palace","pillar","pits","plantation","playhouse","quarry","sportsfield","sportsplex","stadium","terrace","terraces","theater","tower","park","parks","site","ranch","raceway","sportsplex","ave","st","street","rd","road","lane","landing","crescent","cr","way","tr","terrace","avenue"].reduce((t,e)=>(t[e]=!0,t),{}),Ob=[[/([^v])ies$/i,"$1y"],[/(ise)s$/i,"$1"],[/(kn|[^o]l|w)ives$/i,"$1ife"],[/^((?:ca|e|ha|(?:our|them|your)?se|she|wo)l|lea|loa|shea|thie)ves$/i,"$1f"],[/^(dwar|handkerchie|hoo|scar|whar)ves$/i,"$1f"],[/(antenn|formul|nebul|vertebr|vit)ae$/i,"$1a"],[/(octop|vir|radi|nucle|fung|cact|stimul)(i)$/i,"$1us"],[/(buffal|tomat|tornad)(oes)$/i,"$1o"],[/(ause)s$/i,"$1"],[/(ease)s$/i,"$1"],[/(ious)es$/i,"$1"],[/(ouse)s$/i,"$1"],[/(ose)s$/i,"$1"],[/(..ase)s$/i,"$1"],[/(..[aeiu]s)es$/i,"$1"],[/(vert|ind|cort)(ices)$/i,"$1ex"],[/(matr|append)(ices)$/i,"$1ix"],[/([xo]|ch|ss|sh)es$/i,"$1"],[/men$/i,"man"],[/(n)ews$/i,"$1ews"],[/([ti])a$/i,"$1um"],[/([^aeiouy]|qu)ies$/i,"$1y"],[/(s)eries$/i,"$1eries"],[/(m)ovies$/i,"$1ovie"],[/(cris|ax|test)es$/i,"$1is"],[/(alias|status)es$/i,"$1"],[/(ss)$/i,"$1"],[/(ic)s$/i,"$1"],[/s$/i,""]],Yge=function(t){return Object.keys(t).reduce((e,n)=>(e[t[n]]=n,e),{})},Jge=function(t,e){const{irregularPlurals:n}=e.two;let r=Yge(n);if(r.hasOwnProperty(t))return r[t];for(let s=0;s<Ob.length;s++)if(Ob[s][0].test(t)===!0)return t=t.replace(Ob[s][0],Ob[s][1]),t;return t},Y8=Jge,Qge=function(t,e){let n=[t],r=Wx(t,e);r!==t&&n.push(r);let s=Y8(t,e);return s!==t&&n.push(s),n},e0e={toPlural:Wx,toSingular:Y8,all:Qge};let Cv={Gerund:["ing"],Actor:["erer"],Infinitive:["ate","ize","tion","rify","then","ress","ify","age","nce","ect","ise","ine","ish","ace","ash","ure","tch","end","ack","and","ute","ade","ock","ite","ase","ose","use","ive","int","nge","lay","est","ain","ant","ent","eed","er","le","unk","ung","upt","en"],PastTense:["ept","ed","lt","nt","ew","ld"],PresentTense:["rks","cks","nks","ngs","mps","tes","zes","ers","les","acks","ends","ands","ocks","lays","eads","lls","els","ils","ows","nds","ays","ams","ars","ops","ffs","als","urs","lds","ews","ips","es","ts","ns"],Participle:["ken","wn"]};Cv=Object.keys(Cv).reduce((t,e)=>(Cv[e].forEach(n=>t[n]=e),t),{});const Lb=Cv,t0e=function(t){let e=t.substring(t.length-3);if(Lb.hasOwnProperty(e)===!0)return Lb[e];let n=t.substring(t.length-2);return Lb.hasOwnProperty(n)===!0?Lb[n]:t.substring(t.length-1)==="s"?"PresentTense":null},J8=t0e,n0e=function(t,e){let n="",r={};e.one&&e.one.prefixes&&(r=e.one.prefixes);let[s,i]=t.split(/ /);return i&&r[s]===!0&&(n=s,s=i,i=""),{prefix:n,verb:s,particle:i}},CO={are:"be",were:"be",been:"be",is:"be",am:"be",was:"be",be:"be",being:"be"},r0e=function(t,e,n){const{fromPast:r,fromPresent:s,fromGerund:i,fromParticiple:o}=e.two.models;let{prefix:a,verb:l,particle:c}=n0e(t,e),u="";if(n||(n=J8(t)),CO.hasOwnProperty(t))u=CO[t];else if(n==="Participle")u=_i(l,o);else if(n==="PastTense")u=_i(l,r);else if(n==="PresentTense")u=_i(l,s);else if(n==="Gerund")u=_i(l,i);else return t;return c&&(u+=" "+c),a&&(u=a+" "+u),u},jC=r0e,s0e=t=>/ /.test(t)?t.split(/ /):[t,""],i0e=function(t,e){const{toPast:n,toPresent:r,toGerund:s,toParticiple:i}=e.two.models;if(t==="be")return{Infinitive:t,Gerund:"being",PastTense:"was",PresentTense:"is"};let[o,a]=s0e(t),l={Infinitive:o,PastTense:_i(o,n),PresentTense:_i(o,r),Gerund:_i(o,s),FutureTense:"will "+o},c=_i(o,i);if(c!==t&&c!==l.PastTense){let u=e.one.lexicon||{};(u[c]==="Participle"||u[c]==="Adjective")&&(t==="play"&&(c="played"),l.Participle=c)}return a&&Object.keys(l).forEach(u=>{l[u]+=" "+a}),l},r$=i0e,o0e=function(t,e){let n=r$(t,e);return delete n.FutureTense,Object.values(n).filter(r=>r)},a0e={toInfinitive:jC,conjugate:r$,all:o0e},s$=function(t,e){const n=e.two.models.toSuperlative;return _i(t,n)},i$=function(t,e){const n=e.two.models.toComparative;return _i(t,n)},l0e=function(t,e){const n=e.two.models.fromComparative;return _i(t,n)},c0e=function(t,e){const n=e.two.models.fromSuperlative;return _i(t,n)},u0e=function(t,e){const n=e.two.models.adjToNoun;return _i(t,n)},d0e=function(t="",e=[]){const n=t.length;let r=n<=6?n-1:6;for(let s=r;s>=1;s-=1){let i=t.substring(n-s,t.length);if(e[i.length].hasOwnProperty(i)===!0){let o=t.slice(0,n-s),a=e[i.length][i];return o+a}}return null},Q8=d0e,Ht="ically",h0e=new Set(["analyt"+Ht,"chem"+Ht,"class"+Ht,"clin"+Ht,"crit"+Ht,"ecolog"+Ht,"electr"+Ht,"empir"+Ht,"frant"+Ht,"grammat"+Ht,"ident"+Ht,"ideolog"+Ht,"log"+Ht,"mag"+Ht,"mathemat"+Ht,"mechan"+Ht,"med"+Ht,"method"+Ht,"method"+Ht,"mus"+Ht,"phys"+Ht,"phys"+Ht,"polit"+Ht,"pract"+Ht,"rad"+Ht,"satir"+Ht,"statist"+Ht,"techn"+Ht,"technolog"+Ht,"theoret"+Ht,"typ"+Ht,"vert"+Ht,"whims"+Ht]),f0e=[null,{},{ly:""},{ily:"y",bly:"ble",ply:"ple"},{ally:"al",rply:"rp"},{ually:"ual",ially:"ial",cally:"cal",eally:"eal",rally:"ral",nally:"nal",mally:"mal",eeply:"eep",eaply:"eap"},{ically:"ic"}],m0e=new Set(["early","only","hourly","daily","weekly","monthly","yearly","mostly","duly","unduly","especially","undoubtedly","conversely","namely","exceedingly","presumably","accordingly","overly","best","latter","little","long","low"]),_O={wholly:"whole",fully:"full",truly:"true",gently:"gentle",singly:"single",customarily:"customary",idly:"idle",publically:"public",quickly:"quick",superbly:"superb",cynically:"cynical",well:"good"},p0e=function(t){return t.endsWith("ly")?h0e.has(t)?t.replace(/ically/,"ical"):m0e.has(t)?null:_O.hasOwnProperty(t)?_O[t]:Q8(t,f0e)||t:null},g0e=p0e,y0e=[null,{y:"ily"},{ly:"ly",ic:"ically"},{ial:"ially",ual:"ually",tle:"tly",ble:"bly",ple:"ply",ary:"arily"},{},{},{}],SO={cool:"cooly",whole:"wholly",full:"fully",good:"well",idle:"idly",public:"publicly",single:"singly",special:"especially"},b0e=function(t){if(SO.hasOwnProperty(t))return SO[t];let e=Q8(t,y0e);return e||(e=t+"ly"),e},ej=b0e,v0e=function(t,e){let n=[t];return n.push(s$(t,e)),n.push(i$(t,e)),n.push(ej(t)),n=n.filter(r=>r),n=new Set(n),Array.from(n)},x0e={toSuperlative:s$,toComparative:i$,toAdverb:ej,toNoun:u0e,fromAdverb:g0e,fromSuperlative:c0e,fromComparative:l0e,all:v0e},w0e={noun:e0e,verb:a0e,adjective:x0e},TO={Singular:(t,e,n,r)=>{let s=r.one.lexicon,i=n.two.transform.noun.toPlural(t,r);s[i]||(e[i]=e[i]||"Plural")},Actor:(t,e,n,r)=>{let s=r.one.lexicon,i=n.two.transform.noun.toPlural(t,r);s[i]||(e[i]=e[i]||["Plural","Actor"])},Comparable:(t,e,n,r)=>{let s=r.one.lexicon,{toSuperlative:i,toComparative:o}=n.two.transform.adjective,a=i(t,r);s[a]||(e[a]=e[a]||"Superlative");let l=o(t,r);s[l]||(e[l]=e[l]||"Comparative"),e[t]="Adjective"},Demonym:(t,e,n,r)=>{let s=n.two.transform.noun.toPlural(t,r);e[s]=e[s]||["Demonym","Plural"]},Infinitive:(t,e,n,r)=>{let s=r.one.lexicon,i=n.two.transform.verb.conjugate(t,r);Object.entries(i).forEach(o=>{!s[o[1]]&&!e[o[1]]&&o[0]!=="FutureTense"&&(e[o[1]]=o[0])})},PhrasalVerb:(t,e,n,r)=>{let s=r.one.lexicon;e[t]=["PhrasalVerb","Infinitive"];let i=r.one._multiCache,[o,a]=t.split(" ");s[o]||(e[o]=e[o]||"Infinitive");let l=n.two.transform.verb.conjugate(o,r);delete l.FutureTense,Object.entries(l).forEach(c=>{if(c[0]==="Actor"||c[1]==="")return;!e[c[1]]&&!s[c[1]]&&(e[c[1]]=c[0]),i[c[1]]=2;let u=c[1]+" "+a;e[u]=e[u]||[c[0],"PhrasalVerb"]})},Multiple:(t,e)=>{e[t]=["Multiple","Cardinal"],e[t+"th"]=["Multiple","Ordinal"],e[t+"ths"]=["Multiple","Fraction"]},Cardinal:(t,e)=>{e[t]=["TextValue","Cardinal"]},Ordinal:(t,e)=>{e[t]=["TextValue","Ordinal"],e[t+"s"]=["TextValue","Fraction"]},Place:(t,e)=>{e[t]=["Place","ProperNoun"]},Region:(t,e)=>{e[t]=["Region","ProperNoun"]}},E0e=function(t,e){const{methods:n,model:r}=e;let s={},i={};return Object.keys(t).forEach(o=>{let a=t[o];o=o.toLowerCase().trim(),o=o.replace(/'s\b/,"");let l=o.split(/ /);l.length>1&&(i[l[0]]===void 0||l.length>i[l[0]])&&(i[l[0]]=l.length),TO.hasOwnProperty(a)===!0&&TO[a](o,s,n,r),s[o]=s[o]||a}),delete s[""],delete s[null],delete s[" "],{lex:s,_multi:i}},k0e=E0e,N0e=function(t,e){const n=/^[0-9]+$/;let r=t[e];if(!r)return!1;const s=new Set(["may","april","august","jan"]);if(r.normal==="like"||s.has(r.normal)||r.tags.has("Place")||r.tags.has("Date"))return!1;if(t[e-1]){let o=t[e-1];if(o.tags.has("Date")||s.has(o.normal)||o.tags.has("Adjective")||r.tags.has("Adjective"))return!1}let i=r.normal;return!((i.length===1||i.length===2||i.length===4)&&n.test(i))},C0e=function(t){const e=/[,:;]/;let n=[];return t.forEach(r=>{let s=0;r.forEach((i,o)=>{e.test(i.post)&&N0e(r,o+1)&&(n.push(r.slice(s,o+1)),s=o+1)}),s<r.length&&n.push(r.slice(s,r.length))}),n},_0e=C0e,$O={e:["mice","louse","antennae","formulae","nebulae","vertebrae","vitae"],i:["tia","octopi","viri","radii","nuclei","fungi","cacti","stimuli"],n:["men"],t:["feet"]},S0e=new Set(["israelis","menus","logos"]),T0e=["bus","mas","was","ias","xas","vas","cis","lis","nis","ois","ris","sis","tis","xis","aus","cus","eus","fus","gus","ius","lus","nus","das","ous","pus","rus","sus","tus","xus","aos","igos","ados","ogos","'s","ss"],$0e=function(t){if(!t||t.length<=3)return!1;if(S0e.has(t))return!0;let e=t[t.length-1];return $O.hasOwnProperty(e)?$O[e].find(n=>t.endsWith(n)):!(e!=="s"||T0e.find(n=>t.endsWith(n)))},tj=$0e,UC={two:{quickSplit:_0e,expandLexicon:k0e,transform:w0e,looksPlural:tj}},I0e=function(t){const{irregularPlurals:e}=t.two,{lexicon:n}=t.one;return Object.entries(e).forEach(r=>{n[r[0]]=n[r[0]]||"Singular",n[r[1]]=n[r[1]]||"Plural"}),t},A0e=I0e;let HC={one:{lexicon:{}},two:{models:X8}};const R0e={"Actor|Verb":"Actor","Adj|Gerund":"Adjective","Adj|Noun":"Adjective","Adj|Past":"Adjective","Adj|Present":"Adjective","Noun|Verb":"Singular","Noun|Gerund":"Gerund","Person|Noun":"Noun","Person|Date":"Month","Person|Verb":"FirstName","Person|Place":"Person","Person|Adj":"Comparative","Plural|Verb":"Plural","Unit|Noun":"Noun"},nj=function(t,e){const n={model:e,methods:UC};let{lex:r,_multi:s}=UC.two.expandLexicon(t,n);return Object.assign(e.one.lexicon,r),Object.assign(e.one._multiCache,s),e},P0e=function(t,e){return Object.keys(t).forEach(n=>{t[n]==="Uncountable"&&(e.two.uncountable[n]=!0,t[n]="Uncountable")}),e},IO=function(t,e,n){let r=r$(t,HC);e[r.PastTense]=e[r.PastTense]||"PastTense",e[r.Gerund]=e[r.Gerund]||"Gerund",n===!0&&(e[r.PresentTense]=e[r.PresentTense]||"PresentTense")},AO=function(t,e,n){let r=s$(t,n);e[r]=e[r]||"Superlative";let s=i$(t,n);e[s]=e[s]||"Comparative"},D0e=function(t,e,n){let r=Wx(t,n);e[r]=e[r]||"Plural"},O0e=function(t,e){let n={};const r=e.one.lexicon;return Object.keys(t).forEach(s=>{const i=t[s];if(n[s]=R0e[i],(i==="Noun|Verb"||i==="Person|Verb"||i==="Actor|Verb")&&IO(s,r,!1),i==="Adj|Present"&&(IO(s,r,!0),AO(s,r,e)),i==="Person|Adj"&&AO(s,r,e),i==="Adj|Gerund"||i==="Noun|Gerund"){let o=jC(s,HC,"Gerund");r[o]||(n[o]="Infinitive")}if((i==="Noun|Gerund"||i==="Adj|Noun"||i==="Person|Noun")&&D0e(s,r,e),i==="Adj|Past"){let o=jC(s,HC,"PastTense");r[o]||(n[o]="Infinitive")}}),e=nj(n,e),e},L0e=function(t){return t=nj(t.one.lexicon,t),t=P0e(t.one.lexicon,t),t=O0e(t.two.switches,t),t=A0e(t),t},M0e=L0e;let GC={one:{_multiCache:{},lexicon:Yf,frozenLex:Gpe},two:{irregularPlurals:U8,models:X8,suffixPatterns:Sge,prefixPatterns:Tge,endsWith:$ge,neighbours:Ige,regexNormal:Wge,regexText:qge,regexNumbers:Kge,switches:VC,clues:Cge,uncountable:{},orgWords:Zge,placeWords:Xge}};GC=M0e(GC);const z0e=GC,F0e=function(t,e,n,r){const s=r.methods.one.setTag;if(e===0&&t.length>=3){const i=/:/;if(t[0].post.match(i)){let a=t[1];if(a.tags.has("Value")||a.tags.has("Email")||a.tags.has("PhoneNumber"))return;s([t[0]],"Expression",r,null,"2-punct-colon''")}}},B0e=F0e,V0e=function(t,e,n,r){const s=r.methods.one.setTag;t[e].post==="-"&&t[e+1]&&s([t[e],t[e+1]],"Hyphenated",r,null,"1-punct-hyphen''")},j0e=V0e,RO=/^(under|over|mis|re|un|dis|semi)-?/,U0e=function(t,e,n){const r=n.two.switches;let s=t[e];if(r.hasOwnProperty(s.normal)){s.switch=r[s.normal];return}if(RO.test(s.normal)){let i=s.normal.replace(RO,"");i.length>3&&r.hasOwnProperty(i)&&(s.switch=r[i])}},H0e=U0e,G0e=(t,e,n="")=>{const r=o=>"\x1B[33m\x1B[3m"+o+"\x1B[0m",s=o=>"\x1B[3m"+o+"\x1B[0m";let i=t.text||"["+t.implicit+"]";typeof e!="string"&&e.length>2&&(e=e.slice(0,2).join(", #")+" +"),e=typeof e!="string"?e.join(", #"):e,console.log(` ${r(i).padEnd(24)} \x1B[32m\x1B[0m #${e.padEnd(22)}  ${s(n)}`)},W0e=function(t,e,n){if(!e||e.length===0||t.frozen===!0)return;const r=typeof process>"u"||!process.env?self.env||{}:process.env;r&&r.DEBUG_TAGS&&G0e(t,e,n),t.tags=t.tags||new Set,typeof e=="string"?t.tags.add(e):e.forEach(s=>t.tags.add(s))},lr=W0e,q0e=["Acronym","Abbreviation","ProperNoun","Uncountable","Possessive","Pronoun","Activity","Honorific","Month"],K0e=function(t){!t.tags.has("Noun")||t.tags.has("Plural")||t.tags.has("Singular")||q0e.find(e=>t.tags.has(e))||(tj(t.normal)?lr(t,"Plural","3-plural-guess"):lr(t,"Singular","3-singular-guess"))},Z0e=function(t){let e=t.tags;if(e.has("Verb")&&e.size===1){let n=J8(t.normal);n&&lr(t,n,"3-verb-tense-guess")}},X0e=function(t,e,n){let r=t[e],s=Array.from(r.tags);for(let i=0;i<s.length;i+=1)if(n.one.tagSet[s[i]]){let o=n.one.tagSet[s[i]].parents;lr(r,o,` -inferred by #${s[i]}`)}K0e(r),Z0e(r)},u0=X0e,Y0e=/^\p{Lu}[\p{Ll}']/u,J0e=/[0-9]/,Q0e=["Date","Month","WeekDay","Unit","Expression"],eye=/[IVX]/,tye=/^[IVXLCDM]{2,}$/,nye=/^M{0,4}(CM|CD|D?C{0,3})(XC|XL|L?X{0,3})(IX|IV|V?I{0,3})$/,rye={li:!0,dc:!0,md:!0,dm:!0,ml:!0},sye=function(t,e,n){let r=t[e];r.index=r.index||[0,0];let s=r.index[1],i=r.text||"";return s!==0&&Y0e.test(i)===!0&&J0e.test(i)===!1?Q0e.find(o=>r.tags.has(o))||r.pre.match(/["']$/)||r.normal==="the"?null:(u0(t,e,n),!r.tags.has("Noun")&&!r.frozen&&r.tags.clear(),lr(r,"ProperNoun","2-titlecase"),!0):i.length>=2&&tye.test(i)&&eye.test(i)&&nye.test(i)&&!rye[r.normal]?(lr(r,"RomanNumeral","2-xvii"),!0):null},iye=sye,PO=function(t="",e=[]){const n=t.length;let r=7;n<=r&&(r=n-1);for(let s=r;s>1;s-=1){let i=t.substring(n-s,n);if(e[i.length].hasOwnProperty(i)===!0)return e[i.length][i]}return null},oye=function(t,e,n){let r=t[e];if(r.tags.size===0){let s=PO(r.normal,n.two.suffixPatterns);if(s!==null)return lr(r,s,"2-suffix"),r.confidence=.7,!0;if(r.implicit&&(s=PO(r.implicit,n.two.suffixPatterns),s!==null))return lr(r,s,"2-implicit-suffix"),r.confidence=.7,!0}return null},aye=oye,DO=/['`]/,mk=function(t,e){for(let n=0;n<e.length;n+=1)if(e[n][0].test(t)===!0)return e[n];return null},lye=function(t="",e){let n=t[t.length-1];if(e.hasOwnProperty(n)===!0){let r=e[n]||[];for(let s=0;s<r.length;s+=1)if(r[s][0].test(t)===!0)return r[s]}return null},cye=function(t,e,n,r){const s=r.methods.one.setTag;let{regexText:i,regexNormal:o,regexNumbers:a,endsWith:l}=n.two,c=t[e],u=c.machine||c.normal,h=c.text;DO.test(c.post)&&!DO.test(c.pre)&&(h+=c.post.trim());let m=mk(h,i)||mk(u,o);return!m&&/[0-9]/.test(u)&&(m=mk(u,a)),!m&&c.tags.size===0&&(m=lye(u,l)),m?(s([c],m[1],r,null,`2-regex-'${m[2]||m[0]}'`),c.confidence=.6,!0):null},uye=cye,dye=function(t="",e=[]){const n=t.length;let r=7;r>n-3&&(r=n-3);for(let s=r;s>2;s-=1){let i=t.substring(0,s);if(e[i.length].hasOwnProperty(i)===!0)return e[i.length][i]}return null},hye=function(t,e,n){let r=t[e];if(r.tags.size===0){let s=dye(r.normal,n.two.prefixPatterns);if(s!==null)return lr(r,s,"2-prefix"),r.confidence=.5,!0}return null},fye=hye,mye=1400,pye=2100,gye=new Set(["in","on","by","until","for","to","during","throughout","through","within","before","after","of","this","next","last","circa","around","post","pre","budget","classic","plan","may"]),OO=function(t){if(!t)return!1;let e=t.normal||t.implicit;return!!(gye.has(e)||t.tags.has("Date")||t.tags.has("Month")||t.tags.has("WeekDay")||t.tags.has("Year")||t.tags.has("ProperNoun"))},LO=function(t){return t?!!(t.tags.has("Ordinal")||t.tags.has("Cardinal")&&t.normal.length<3||t.normal==="is"||t.normal==="was"):!1},MO=function(t){return t&&(t.tags.has("Date")||t.tags.has("Month")||t.tags.has("WeekDay")||t.tags.has("Year"))},yye=function(t,e){const n=t[e];if(n.tags.has("NumericValue")&&n.tags.has("Cardinal")&&n.normal.length===4){let r=Number(n.normal);if(r&&!isNaN(r)&&r>mye&&r<pye){let s=t[e-1],i=t[e+1];if(OO(s)||OO(i))return lr(n,"Year","2-tagYear");if(r>=1920&&r<2025){if(LO(s)||LO(i))return lr(n,"Year","2-tagYear-close");if(MO(t[e-2])||MO(t[e+2]))return lr(n,"Year","2-tagYear-far");if(s&&(s.tags.has("Determiner")||s.tags.has("Possessive"))&&i&&i.tags.has("Noun")&&!i.tags.has("Plural"))return lr(n,"Year","2-tagYear-noun")}}}return null},bye=yye,vye=function(t,e,n,r){const s=r.methods.one.setTag,i=t[e],o=["PastTense","PresentTense","Auxiliary","Modal","Particle"];i.tags.has("Verb")&&(o.find(l=>i.tags.has(l))||s([i],"Infinitive",r,null,"2-verb-type''"))},xye=vye,rj=/^[A-Z]('s|,)?$/,sj=/^[A-Z-]+$/,ij=/^[A-Z]+s$/,wye=/([A-Z]\.)+[A-Z]?,?$/,Eye=/[A-Z]{2,}('s|,)?$/,kye=/([a-z]\.)+[a-z]\.?$/,oj={I:!0,A:!0},Nye={la:!0,ny:!0,us:!0,dc:!0,gb:!0},Cye=function(t,e){let n=t.text;if(sj.test(n)===!1)if(n.length>3&&ij.test(n)===!0)n=n.replace(/s$/,"");else return!1;return n.length>5||oj.hasOwnProperty(n)||e.one.lexicon.hasOwnProperty(t.normal)?!1:wye.test(n)===!0||kye.test(n)===!0||rj.test(n)===!0||Eye.test(n)===!0},_ye=function(t,e,n){let r=t[e];return r.tags.has("RomanNumeral")||r.tags.has("Acronym")||r.frozen?null:Cye(r,n)?(r.tags.clear(),lr(r,["Acronym","Noun"],"3-no-period-acronym"),Nye[r.normal]===!0&&lr(r,"Place","3-place-acronym"),ij.test(r.text)===!0&&lr(r,"Plural","3-plural-acronym"),!0):!oj.hasOwnProperty(r.text)&&rj.test(r.text)?(r.tags.clear(),lr(r,["Acronym","Noun"],"3-one-letter-acronym"),!0):r.tags.has("Organization")&&r.text.length<=3?(lr(r,"Acronym","3-org-acronym"),!0):r.tags.has("Organization")&&sj.test(r.text)&&r.text.length<=6?(lr(r,"Acronym","3-titlecase-acronym"),!0):null},Sye=_ye,zO=function(t,e){if(!t)return null;let n=e.find(r=>t.normal===r[0]);return n?n[1]:null},FO=function(t,e){if(!t)return null;let n=e.find(r=>t.tags.has(r[0]));return n?n[1]:null},Tye=function(t,e,n){const{leftTags:r,leftWords:s,rightWords:i,rightTags:o}=n.two.neighbours;let a=t[e];if(a.tags.size===0){let l=null;if(l=l||zO(t[e-1],s),l=l||zO(t[e+1],i),l=l||FO(t[e-1],r),l=l||FO(t[e+1],o),l)return lr(a,l,"3-[neighbour]"),u0(t,e,n),t[e].confidence=.2,!0}return null},$ye=Tye,Iye=t=>/^\p{Lu}[\p{Ll}']/u.test(t),BO=function(t,e,n){return!t||t.tags.has("FirstName")||t.tags.has("Place")?!1:t.tags.has("ProperNoun")||t.tags.has("Organization")||t.tags.has("Acronym")?!0:!n&&Iye(t.text)?e===0?t.tags.has("Singular"):!0:!1},Aye=function(t,e,n,r){const s=n.model.two.orgWords,i=n.methods.one.setTag;let o=t[e],a=o.machine||o.normal;if(s[a]===!0&&BO(t[e-1],e-1,r)){i([t[e]],"Organization",n,null,"3-[org-word]");for(let l=e;l>=0&&BO(t[l],l,r);l-=1)i([t[l]],"Organization",n,null,"3-[org-word]")}return null},Rye=Aye,Pye=t=>/^\p{Lu}[\p{Ll}']/u.test(t),Dye=/'s$/,VO=new Set(["athletic","city","community","eastern","federal","financial","great","historic","historical","local","memorial","municipal","national","northern","provincial","southern","state","western","spring","pine","sunset","view","oak","maple","spruce","cedar","willow"]),Oye=new Set(["center","centre","way","range","bar","bridge","field","pit"]),jO=function(t,e,n){if(!t)return!1;let r=t.tags;return r.has("Organization")||r.has("Possessive")||Dye.test(t.normal)?!1:r.has("ProperNoun")||r.has("Place")?!0:!n&&Pye(t.text)?e===0?r.has("Singular"):!0:!1},Lye=function(t,e,n,r){const s=n.model.two.placeWords,i=n.methods.one.setTag;let o=t[e],a=o.machine||o.normal;if(s[a]===!0){for(let l=e-1;l>=0;l-=1)if(!VO.has(t[l].normal)){if(jO(t[l],l,r)){i(t.slice(l,e+1),"Place",n,null,"3-[place-of-foo]");continue}break}if(Oye.has(a))return!1;for(let l=e+1;l<t.length;l+=1){if(jO(t[l],l,r))return i(t.slice(e,l+1),"Place",n,null,"3-[foo-place]"),!0;if(!(t[l].normal==="of"||VO.has(t[l].normal)))break}}return null},Mye=Lye,zye=function(t,e,n){let r=!1,s=t[e].tags;(s.size===0||s.size===1&&(s.has("Hyphenated")||s.has("HashTag")||s.has("Prefix")||s.has("SlashedTerm")))&&(r=!0),r&&(lr(t[e],"Noun","3-[fallback]"),u0(t,e,n),t[e].confidence=.1)},Fye=zye,Bye=/^[A-Z][a-z]/,To=(t,e)=>t[e].tags.has("ProperNoun")&&Bye.test(t[e].text)?"Noun":null,UO=(t,e,n)=>e===0&&!t[1]?n:null,Vye=function(t,e){return!t[e+1]&&t[e-1]&&t[e-1].tags.has("Determiner")?"Noun":null},jye=function(t,e,n){return e===0&&t.length>3?n:null},Uye={"Adj|Gerund":(t,e)=>To(t,e),"Adj|Noun":(t,e)=>To(t,e)||Vye(t,e),"Actor|Verb":(t,e)=>To(t,e),"Adj|Past":(t,e)=>To(t,e),"Adj|Present":(t,e)=>To(t,e),"Noun|Gerund":(t,e)=>To(t,e),"Noun|Verb":(t,e)=>e>0&&To(t,e)||UO(t,e,"Infinitive"),"Plural|Verb":(t,e)=>To(t,e)||UO(t,e,"PresentTense")||jye(t,e,"Plural"),"Person|Noun":(t,e)=>To(t,e),"Person|Verb":(t,e)=>e!==0?To(t,e):null,"Person|Adj":(t,e)=>e===0&&t.length>1||To(t,e)?"Person":null},HO=Uye,o$=typeof process>"u"||!process.env?self.env||{}:process.env,GO=/^(under|over|mis|re|un|dis|semi)-?/,WO=(t,e)=>{if(!t||!e)return null;let n=t.normal||t.implicit,r=null;return e.hasOwnProperty(n)&&(r=e[n]),r&&o$.DEBUG_TAGS&&console.log(`
  \x1B[2m\x1B[3m      - '${n}' \x1B[0m`),r},qO=(t,e={},n)=>{if(!t||!e)return null;let s=Array.from(t.tags).sort((i,o)=>{let a=n[i]?n[i].parents.length:0,l=n[o]?n[o].parents.length:0;return a>l?-1:1}).find(i=>e[i]);return s&&o$.DEBUG_TAGS&&console.log(`  \x1B[2m\x1B[3m       - '${t.normal||t.implicit}' (#${s})  \x1B[0m`),s=e[s],s},Hye=function(t,e,n,r){var a;if(!n)return null;const s=((a=t[e-1])==null?void 0:a.text)!=="also"?e-1:Math.max(0,e-2),i=r.one.tagSet;let o=WO(t[e+1],n.afterWords);return o=o||WO(t[s],n.beforeWords),o=o||qO(t[s],n.beforeTags,i),o=o||qO(t[e+1],n.afterTags,i),o},Gye=function(t,e,n){const r=n.model,s=n.methods.one.setTag,{switches:i,clues:o}=r.two,a=t[e];let l=a.normal||a.implicit||"";if(GO.test(l)&&!i[l]&&(l=l.replace(GO,"")),a.switch){let c=a.switch;if(a.tags.has("Acronym")||a.tags.has("PhrasalVerb"))return;let u=Hye(t,e,o[c],r);HO[c]&&(u=HO[c](t,e)||u),u?(s([a],u,n,null,`3-[switch] (${c})`),u0(t,e,r)):o$.DEBUG_TAGS&&console.log(`
 -> X  - '${l}'  : (${c})  `)}},Wye=Gye,qye={there:!0,this:!0,it:!0,him:!0,her:!0,us:!0},Kye=function(t,e){const n=e.methods.one.setTag,r=e.model.one._multiCache||{};let s=t[0];if((s.switch==="Noun|Verb"||s.tags.has("Infinitive"))&&t.length>=2){if(t.length<4&&!qye[t[1].normal]||!s.tags.has("PhrasalVerb")&&r.hasOwnProperty(s.normal))return;(t[1].tags.has("Noun")||t[1].tags.has("Determiner"))&&(!t.slice(1,3).some(l=>l.tags.has("Verb"))||s.tags.has("#PhrasalVerb"))&&n([s],"Imperative",e,null,"3-[imperative]")}},Zye=Kye,Xye=function(t){if(t.filter(n=>!n.tags.has("ProperNoun")).length<=3)return!1;const e=/^[a-z]/;return t.every(n=>!e.test(n.text))},Yye=function(t,e,n){t.forEach(r=>{B0e(r,0,e,n)})},Jye=function(t,e,n,r){for(let s=0;s<t.length;s+=1)t[s].frozen!==!0&&(H0e(t,s,e),r===!1&&iye(t,s,e),aye(t,s,e),uye(t,s,e,n),fye(t,s,e),bye(t,s))},Qye=function(t,e,n,r){for(let s=0;s<t.length;s+=1){let i=Sye(t,s,e);u0(t,s,e),i=i||$ye(t,s,e),i=i||Fye(t,s,e)}for(let s=0;s<t.length;s+=1)t[s].frozen!==!0&&(Rye(t,s,n,r),Mye(t,s,n,r),Wye(t,s,n),xye(t,s,e,n),j0e(t,s,e,n));Zye(t,n)},ebe=function(t){const{methods:e,model:n,world:r}=t;let s=t.docs;Yye(s,n,r);let i=e.two.quickSplit(s);for(let o=0;o<i.length;o+=1){let a=i[o];const l=Xye(a);Jye(a,n,r,l),Qye(a,n,r,l)}return i},tbe=ebe,KO={Possessive:t=>{let e=t.machine||t.normal||t.text;return e=e.replace(/'s$/,""),e},Plural:(t,e)=>{let n=t.machine||t.normal||t.text;return e.methods.two.transform.noun.toSingular(n,e.model)},Copula:()=>"is",PastTense:(t,e)=>{let n=t.machine||t.normal||t.text;return e.methods.two.transform.verb.toInfinitive(n,e.model,"PastTense")},Gerund:(t,e)=>{let n=t.machine||t.normal||t.text;return e.methods.two.transform.verb.toInfinitive(n,e.model,"Gerund")},PresentTense:(t,e)=>{let n=t.machine||t.normal||t.text;return t.tags.has("Infinitive")?n:e.methods.two.transform.verb.toInfinitive(n,e.model,"PresentTense")},Comparative:(t,e)=>{let n=t.machine||t.normal||t.text;return e.methods.two.transform.adjective.fromComparative(n,e.model)},Superlative:(t,e)=>{let n=t.machine||t.normal||t.text;return e.methods.two.transform.adjective.fromSuperlative(n,e.model)},Adverb:(t,e)=>{const{fromAdverb:n}=e.methods.two.transform.adjective;let r=t.machine||t.normal||t.text;return n(r)}},nbe=function(t){const e=t.world,n=Object.keys(KO);t.docs.forEach(r=>{for(let s=0;s<r.length;s+=1){const i=r[s];for(let o=0;o<n.length;o+=1)if(i.tags.has(n[o])){const a=KO[n[o]];let l=a(i,e);i.normal!==l&&(i.root=l);break}}})},rbe=nbe,ZO={Adverb:"RB",Comparative:"JJR",Superlative:"JJS",Adjective:"JJ",TO:"Conjunction",Modal:"MD",Auxiliary:"MD",Gerund:"VBG",PastTense:"VBD",Participle:"VBN",PresentTense:"VBZ",Infinitive:"VB",Particle:"RP",Verb:"VB",Pronoun:"PRP",Cardinal:"CD",Conjunction:"CC",Determiner:"DT",Preposition:"IN",QuestionWord:"WP",Expression:"UH",Possessive:"POS",ProperNoun:"NNP",Person:"NNP",Place:"NNP",Organization:"NNP",Singular:"NN",Plural:"NNS",Noun:"NN",There:"EX"},sbe=function(t){if(t.tags.has("ProperNoun")&&t.tags.has("Plural"))return"NNPS";if(t.tags.has("Possessive")&&t.tags.has("Pronoun"))return"PRP$";if(t.normal==="there")return"EX";if(t.normal==="to")return"TO";let e=t.tagRank||[];for(let n=0;n<e.length;n+=1)if(ZO.hasOwnProperty(e[n]))return ZO[e[n]];return null},ibe=function(t){t.compute("tagRank"),t.docs.forEach(e=>{e.forEach(n=>{n.penn=sbe(n)})})},obe=ibe,abe={preTagger:tbe,root:rbe,penn:obe},pk=["Person","Place","Organization"],lbe={Noun:{not:["Verb","Adjective","Adverb","Value","Determiner"]},Singular:{is:"Noun",not:["Plural","Uncountable"]},ProperNoun:{is:"Noun"},Person:{is:"Singular",also:["ProperNoun"],not:["Place","Organization","Date"]},FirstName:{is:"Person"},MaleName:{is:"FirstName",not:["FemaleName","LastName"]},FemaleName:{is:"FirstName",not:["MaleName","LastName"]},LastName:{is:"Person",not:["FirstName"]},Honorific:{is:"Person",not:["FirstName","LastName","Value"]},Place:{is:"Singular",not:["Person","Organization"]},Country:{is:"Place",also:["ProperNoun"],not:["City"]},City:{is:"Place",also:["ProperNoun"],not:["Country"]},Region:{is:"Place",also:["ProperNoun"]},Address:{},Organization:{is:"ProperNoun",not:["Person","Place"]},SportsTeam:{is:"Organization"},School:{is:"Organization"},Company:{is:"Organization"},Plural:{is:"Noun",not:["Singular","Uncountable"]},Uncountable:{is:"Noun"},Pronoun:{is:"Noun",not:pk},Actor:{is:"Noun",not:["Place","Organization"]},Activity:{is:"Noun",not:["Person","Place"]},Unit:{is:"Noun",not:pk},Demonym:{is:"Noun",also:["ProperNoun"],not:pk},Possessive:{is:"Noun"},Reflexive:{is:"Pronoun"}},cbe={Verb:{not:["Noun","Adjective","Adverb","Value","Expression"]},PresentTense:{is:"Verb",not:["PastTense","FutureTense"]},Infinitive:{is:"PresentTense",not:["Gerund"]},Imperative:{is:"Verb",not:["PastTense","Gerund","Copula"]},Gerund:{is:"PresentTense",not:["Copula"]},PastTense:{is:"Verb",not:["PresentTense","Gerund","FutureTense"]},FutureTense:{is:"Verb",not:["PresentTense","PastTense"]},Copula:{is:"Verb"},Modal:{is:"Verb",not:["Infinitive"]},Participle:{is:"PastTense"},Auxiliary:{is:"Verb",not:["PastTense","PresentTense","Gerund","Conjunction"]},PhrasalVerb:{is:"Verb"},Particle:{is:"PhrasalVerb",not:["PastTense","PresentTense","Copula","Gerund"]},Passive:{is:"Verb"}},ube={Value:{not:["Verb","Adjective","Adverb"]},Ordinal:{is:"Value",not:["Cardinal"]},Cardinal:{is:"Value",not:["Ordinal"]},Fraction:{is:"Value",not:["Noun"]},Multiple:{is:"TextValue"},RomanNumeral:{is:"Cardinal",not:["TextValue"]},TextValue:{is:"Value",not:["NumericValue"]},NumericValue:{is:"Value",not:["TextValue"]},Money:{is:"Cardinal"},Percent:{is:"Value"}},dbe={Date:{not:["Verb","Adverb","Adjective"]},Month:{is:"Date",also:["Noun"],not:["Year","WeekDay","Time"]},WeekDay:{is:"Date",also:["Noun"]},Year:{is:"Date",not:["RomanNumeral"]},FinancialQuarter:{is:"Date",not:"Fraction"},Holiday:{is:"Date",also:["Noun"]},Season:{is:"Date"},Timezone:{is:"Date",also:["Noun"],not:["ProperNoun"]},Time:{is:"Date",not:["AtMention"]},Duration:{is:"Date",also:["Noun"]}},hbe=["Noun","Verb","Adjective","Adverb","Value","QuestionWord"],fbe={Adjective:{not:["Noun","Verb","Adverb","Value"]},Comparable:{is:"Adjective"},Comparative:{is:"Adjective"},Superlative:{is:"Adjective",not:["Comparative"]},NumberRange:{},Adverb:{not:["Noun","Verb","Adjective","Value"]},Determiner:{not:["Noun","Verb","Adjective","Adverb","QuestionWord","Conjunction"]},Conjunction:{not:hbe},Preposition:{not:["Noun","Verb","Adjective","Adverb","QuestionWord","Determiner"]},QuestionWord:{not:["Determiner"]},Currency:{is:"Noun"},Expression:{not:["Noun","Adjective","Verb","Adverb"]},Abbreviation:{},Url:{not:["HashTag","PhoneNumber","Verb","Adjective","Value","AtMention","Email","SlashedTerm"]},PhoneNumber:{not:["HashTag","Verb","Adjective","Value","AtMention","Email"]},HashTag:{},AtMention:{is:"Noun",not:["HashTag","Email"]},Emoji:{not:["HashTag","Verb","Adjective","Value","AtMention"]},Emoticon:{not:["HashTag","Verb","Adjective","Value","AtMention","SlashedTerm"]},SlashedTerm:{not:["Emoticon","Url","Value"]},Email:{not:["HashTag","Verb","Adjective","Value","AtMention"]},Acronym:{not:["Plural","RomanNumeral","Pronoun","Date"]},Negative:{not:["Noun","Adjective","Value","Expression"]},Condition:{not:["Verb","Adjective","Noun","Value"]},There:{not:["Verb","Adjective","Noun","Value","Conjunction","Preposition"]},Prefix:{not:["Abbreviation","Acronym","ProperNoun"]},Hyphenated:{}};let mbe=Object.assign({},lbe,cbe,ube,dbe,fbe);const pbe=mbe,gbe={compute:abe,methods:UC,model:z0e,tags:pbe,hooks:["preTagger"]},ybe=/[,)"';:\-.]/,el=function(t,e){if(!t.found)return;let n=t.termList();for(let r=0;r<n.length-1;r++){const s=n[r];if(ybe.test(s.post))return}n[0].implicit=n[0].normal,n[0].text+=e,n[0].normal+=e,n.slice(1).forEach(r=>{r.implicit=r.normal,r.text="",r.normal=""});for(let r=0;r<n.length-1;r++)n[r].post=n[r].post.replace(/ /,"")},bbe=function(){let t=this.not("@hasContraction"),e=t.match("(we|they|you) are");return el(e,"'re"),e=t.match("(he|she|they|it|we|you) will"),el(e,"'ll"),e=t.match("(he|she|they|it|we) is"),el(e,"'s"),e=t.match("#Person is"),el(e,"'s"),e=t.match("#Person would"),el(e,"'d"),e=t.match("(is|was|had|would|should|could|do|does|have|has|can) not"),el(e,"n't"),e=t.match("(i|we|they) have"),el(e,"'ve"),e=t.match("(would|should|could) have"),el(e,"'ve"),e=t.match("i am"),el(e,"'m"),e=t.match("going to"),this},vbe=bbe,xbe=/^\p{Lu}[\p{Ll}']/u,wbe=function(t=""){return t=t.replace(/^ *[a-z\u00C0-\u00FF]/,e=>e.toUpperCase()),t},Ebe=function(t){class e extends t{constructor(r,s,i){super(r,s,i),this.viewType="Contraction"}expand(){return this.docs.forEach(r=>{let s=xbe.test(r[0].text);r.forEach((i,o)=>{i.text=i.implicit||"",delete i.implicit,o<r.length-1&&i.post===""&&(i.post+=" "),i.dirty=!0}),s&&(r[0].text=wbe(r[0].text))}),this.compute("normal"),this}}t.prototype.contractions=function(){let n=this.match("@hasContraction+");return new e(this.document,n.pointer)},t.prototype.contract=vbe},kbe=Ebe,Nbe=function(t,e,n){let[r,s]=e;!n||n.length===0||(n=n.map((i,o)=>(i.implicit=i.text,i.machine=i.text,i.pre="",i.post="",i.text="",i.normal="",i.index=[r,s+o],i)),n[0]&&(n[0].pre=t[r][s].pre,n[n.length-1].post=t[r][s].post,n[0].text=t[r][s].text,n[0].normal=t[r][s].normal),t[r].splice(s,1,...n))},Cbe=Nbe,_be=/'/,Sbe=new Set(["been","become"]),Tbe=new Set(["what","how","when","if","too"]);let $be=new Set(["too","also","enough"]);const Ibe=(t,e)=>{for(let n=e+1;n<t.length;n+=1){let r=t[n];if(Sbe.has(r.normal))return"has";if(Tbe.has(r.normal)||r.tags.has("Gerund")||r.tags.has("Determiner")||r.tags.has("Adjective")||r.switch==="Adj|Past"&&t[n+1]&&($be.has(t[n+1].normal)||t[n+1].tags.has("Preposition")))return"is";if(r.tags.has("PastTense"))return t[n+1]&&t[n+1].normal==="for"?"is":"has"}return"is"},Abe=function(t,e){let n=t[e].normal.split(_be)[0];if(n==="let")return[n,"us"];if(n==="there"){let r=t[e+1];if(r&&r.tags.has("Plural"))return[n,"are"]}return Ibe(t,e)==="has"?[n,"has"]:[n,"is"]},Rbe=Abe,Pbe=/'/,Dbe=new Set(["better","done","before","it","had"]),Obe=new Set(["have","be"]),Lbe=(t,e)=>{for(let n=e+1;n<t.length;n+=1){let r=t[n];if(Dbe.has(r.normal))return"had";if(Obe.has(r.normal))return"would";if(r.tags.has("PastTense")||r.switch==="Adj|Past")return"had";if(r.tags.has("PresentTense")||r.tags.has("Infinitive"))return"would";if(r.tags.has("#Determiner"))return"had";if(r.tags.has("Adjective"))return"would"}return!1},Mbe=function(t,e){let n=t[e].normal.split(Pbe)[0];return n==="how"||n==="what"?[n,"did"]:Lbe(t,e)==="had"?[n,"had"]:[n,"would"]},zbe=Mbe,Fbe=function(t,e){for(let n=e-1;n>=0;n-=1)if(t[n].tags.has("Noun")||t[n].tags.has("Pronoun")||t[n].tags.has("Plural")||t[n].tags.has("Singular"))return t[n];return null},Bbe=function(t,e){if(t[e].normal==="ain't"||t[e].normal==="aint"){if(t[e+1]&&t[e+1].normal==="never")return["have"];let r=Fbe(t,e);if(r){if(r.normal==="we"||r.normal==="they")return["are","not"];if(r.normal==="i")return["am","not"];if(r.tags&&r.tags.has("Plural"))return["are","not"]}return["is","not"]}return[t[e].normal.replace(/n't/,""),"not"]},Vbe=Bbe,jbe={that:!0,there:!0,let:!0,here:!0,everywhere:!0},Ube={in:!0,by:!0,for:!0};let Hbe=new Set(["too","also","enough","about"]),Gbe=new Set(["is","are","did","were","could","should","must","had","have"]);const Wbe=(t,e)=>{let n=t[e];if(jbe.hasOwnProperty(n.machine||n.normal))return!1;if(n.tags.has("Possessive"))return!0;if(n.tags.has("QuestionWord")||n.normal==="he's"||n.normal==="she's")return!1;let r=t[e+1];if(!r)return!0;if(n.normal==="it's")return!!r.tags.has("#Noun");if(r.switch=="Noun|Gerund"){let s=t[e+2];return s?s.tags.has("Copula")?!0:(s.normal==="on"||s.normal==="in",!1):!!(n.tags.has("Actor")||n.tags.has("ProperNoun"))}if(r.tags.has("Verb"))return r.tags.has("Infinitive")?!0:r.tags.has("Gerund")?!1:!!r.tags.has("PresentTense");if(r.switch==="Adj|Noun"){let s=t[e+2];if(!s)return!1;if(Gbe.has(s.normal))return!0;if(Hbe.has(s.normal))return!1}if(r.tags.has("Noun")){let s=r.machine||r.normal;return!(s==="here"||s==="there"||s==="everywhere"||r.tags.has("Possessive")||r.tags.has("ProperNoun")&&!n.tags.has("ProperNoun"))}if(t[e-1]&&Ube[t[e-1].normal]===!0)return!0;if(r.tags.has("Adjective")){let s=t[e+2];if(!s)return!1;if(s.tags.has("Noun")&&!s.tags.has("Pronoun")){let i=r.normal;return!(i==="above"||i==="below"||i==="behind")}return s.switch==="Noun|Verb"}return!!r.tags.has("Value")},qbe=Wbe,XO=/'/,Kbe=function(t){t.forEach((e,n)=>{e.index&&(e.index[1]=n)})},Zbe=function(t,e,n,r){let s=e.update();s.document=[t];let i=n+r;n>0&&(n-=1),t[i]&&(i+=1),s.ptrs=[[0,n,i]],s.compute(["freeze","lexicon","preTagger","unfreeze"]),Kbe(t)},YO={d:(t,e)=>zbe(t,e),t:(t,e)=>Vbe(t,e),s:(t,e,n)=>qbe(t,e)?n.methods.one.setTag([t[e]],"Possessive",n,null,"2-contraction"):Rbe(t,e)},Xbe=function(t,e){let n=e.fromText(t.join(" "));return n.compute("id"),n.docs[0]},Ybe=t=>{let{world:e,document:n}=t;n.forEach((r,s)=>{for(let i=r.length-1;i>=0;i-=1){if(r[i].implicit)continue;let o=null;XO.test(r[i].normal)===!0&&(o=r[i].normal.split(XO)[1]);let a=null;if(YO.hasOwnProperty(o)&&(a=YO[o](r,i,e)),a){a=Xbe(a,t),Cbe(n,[s,i],a),Zbe(n[s],t,i,a.length);continue}}})},Jbe={contractionTwo:Ybe},Qbe={compute:Jbe,api:kbe,hooks:["contractionTwo"]},eve=[{match:"[(all|both)] #Determiner #Noun",group:0,tag:"Noun",reason:"all-noun"},{match:"#Copula [(just|alone)]$",group:0,tag:"Adjective",reason:"not-adverb"},{match:"#Singular is #Adverb? [#PastTense$]",group:0,tag:"Adjective",reason:"is-filled"},{match:"[#PastTense] #Singular is",group:0,tag:"Adjective",reason:"smoked-poutine"},{match:"[#PastTense] #Plural are",group:0,tag:"Adjective",reason:"baked-onions"},{match:"well [#PastTense]",group:0,tag:"Adjective",reason:"well-made"},{match:"#Copula [fucked up?]",group:0,tag:"Adjective",reason:"swears-adjective"},{match:"#Singular (seems|appears) #Adverb? [#PastTense$]",group:0,tag:"Adjective",reason:"seems-filled"},{match:"#Copula #Adjective? [(out|in|through)]$",group:0,tag:"Adjective",reason:"still-out"},{match:"^[#Adjective] (the|your) #Noun",group:0,notIf:"(all|even)",tag:"Infinitive",reason:"shut-the"},{match:"the [said] #Noun",group:0,tag:"Adjective",reason:"the-said-card"},{match:"[#Hyphenated (#Hyphenated && #PastTense)] (#Noun|#Conjunction)",group:0,tag:"Adjective",notIf:"#Adverb",reason:"faith-based"},{match:"[#Hyphenated (#Hyphenated && #Gerund)] (#Noun|#Conjunction)",group:0,tag:"Adjective",notIf:"#Adverb",reason:"self-driving"},{match:"[#PastTense (#Hyphenated && #PhrasalVerb)] (#Noun|#Conjunction)",group:0,tag:"Adjective",reason:"dammed-up"},{match:"(#Hyphenated && #Value) fold",tag:"Adjective",reason:"two-fold"},{match:"must (#Hyphenated && #Infinitive)",tag:"Adjective",reason:"must-win"},{match:"(#Hyphenated && #Infinitive) #Hyphenated",tag:"Adjective",notIf:"#PhrasalVerb",reason:"vacuum-sealed"},{match:"too much",tag:"Adverb Adjective",reason:"bit-4"},{match:"a bit much",tag:"Determiner Adverb Adjective",reason:"bit-3"},{match:"[(un|contra|extra|inter|intra|macro|micro|mid|mis|mono|multi|pre|sub|tri|ex)] #Adjective",group:0,tag:["Adjective","Prefix"],reason:"un-skilled"}],tve="(dark|bright|flat|light|soft|pale|dead|dim|faux|little|wee|sheer|most|near|good|extra|all)",JO="(hard|fast|late|early|high|right|deep|close|direct)",nve=[{match:"#Adverb [#Adverb] (and|or|then)",group:0,tag:"Adjective",reason:"kinda-sparkly-and"},{match:`[${tve}] #Adjective`,group:0,tag:"Adverb",reason:"dark-green"},{match:"#Copula [far too] #Adjective",group:0,tag:"Adverb",reason:"far-too"},{match:"#Copula [still] (in|#Gerund|#Adjective)",group:0,tag:"Adverb",reason:"was-still-walking"},{match:`#Plural ${JO}`,tag:"#PresentTense #Adverb",reason:"studies-hard"},{match:`#Verb [${JO}] !#Noun?`,group:0,notIf:"(#Copula|get|got|getting|become|became|becoming|feel|feels|feeling|#Determiner|#Preposition)",tag:"Adverb",reason:"shops-direct"},{match:"[#Plural] a lot",tag:"PresentTense",reason:"studies-a-lot"}],rve=[{match:"as [#Gerund] as",group:0,tag:"Adjective",reason:"as-gerund-as"},{match:"more [#Gerund] than",group:0,tag:"Adjective",reason:"more-gerund-than"},{match:"(so|very|extremely) [#Gerund]",group:0,tag:"Adjective",reason:"so-gerund"},{match:"(found|found) it #Adverb? [#Gerund]",group:0,tag:"Adjective",reason:"found-it-gerund"},{match:"a (little|bit|wee) bit? [#Gerund]",group:0,tag:"Adjective",reason:"a-bit-gerund"},{match:"#Gerund [#Gerund]",group:0,tag:"Adjective",notIf:"(impersonating|practicing|considering|assuming)",reason:"looking-annoying"},{match:"(looked|look|looks) #Adverb? [%Adj|Gerund%]",group:0,tag:"Adjective",notIf:"(impersonating|practicing|considering|assuming)",reason:"looked-amazing"},{match:"[%Adj|Gerund%] #Determiner",group:0,tag:"Gerund",reason:"developing-a"},{match:"#Possessive [%Adj|Gerund%] #Noun",group:0,tag:"Adjective",reason:"leading-manufacturer"},{match:"%Noun|Gerund% %Adj|Gerund%",tag:"Gerund #Adjective",reason:"meaning-alluring"},{match:"(face|embrace|reveal|stop|start|resume) %Adj|Gerund%",tag:"#PresentTense #Adjective",reason:"face-shocking"},{match:"(are|were) [%Adj|Gerund%] #Plural",group:0,tag:"Adjective",reason:"are-enduring-symbols"}],sve=[{match:"#Determiner [#Adjective] #Copula",group:0,tag:"Noun",reason:"the-adj-is"},{match:"#Adjective [#Adjective] #Copula",group:0,tag:"Noun",reason:"adj-adj-is"},{match:"(his|its) [%Adj|Noun%]",group:0,tag:"Noun",notIf:"#Hyphenated",reason:"his-fine"},{match:"#Copula #Adverb? [all]",group:0,tag:"Noun",reason:"is-all"},{match:"(have|had) [#Adjective] #Preposition .",group:0,tag:"Noun",reason:"have-fun"},{match:"#Gerund (giant|capital|center|zone|application)",tag:"Noun",reason:"brewing-giant"},{match:"#Preposition (a|an) [#Adjective]$",group:0,tag:"Noun",reason:"an-instant"},{match:"no [#Adjective] #Modal",group:0,tag:"Noun",reason:"no-golden"},{match:"[brand #Gerund?] new",group:0,tag:"Adverb",reason:"brand-new"},{match:"(#Determiner|#Comparative|new|different) [kind]",group:0,tag:"Noun",reason:"some-kind"},{match:"#Possessive [%Adj|Noun%] #Noun",group:0,tag:"Adjective",reason:"her-favourite"},{match:"must && #Hyphenated .",tag:"Adjective",reason:"must-win"},{match:"#Determiner [#Adjective]$",tag:"Noun",notIf:"(this|that|#Comparative|#Superlative)",reason:"the-south"},{match:"(#Noun && #Hyphenated) (#Adjective && #Hyphenated)",tag:"Adjective",notIf:"(this|that|#Comparative|#Superlative)",reason:"company-wide"},{match:"#Determiner [#Adjective] (#Copula|#Determiner)",notIf:"(#Comparative|#Superlative)",group:0,tag:"Noun",reason:"the-poor"},{match:"[%Adj|Noun%] #Noun",notIf:"(#Pronoun|#ProperNoun)",group:0,tag:"Adjective",reason:"stable-foundations"}],ive=[{match:"(slowly|quickly) [#Adjective]",group:0,tag:"Verb",reason:"slowly-adj"},{match:"does (#Adverb|not)? [#Adjective]",group:0,tag:"PresentTense",reason:"does-mean"},{match:"[(fine|okay|cool|ok)] by me",group:0,tag:"Adjective",reason:"okay-by-me"},{match:"i (#Adverb|do)? not? [mean]",group:0,tag:"PresentTense",reason:"i-mean"},{match:"will #Adjective",tag:"Auxiliary Infinitive",reason:"will-adj"},{match:"#Pronoun [#Adjective] #Determiner #Adjective? #Noun",group:0,tag:"Verb",reason:"he-adj-the"},{match:"#Copula [%Adj|Present%] to #Verb",group:0,tag:"Verb",reason:"adj-to"},{match:"#Copula [#Adjective] (well|badly|quickly|slowly)",group:0,tag:"Verb",reason:"done-well"},{match:"#Adjective and [#Gerund] !#Preposition?",group:0,tag:"Adjective",reason:"rude-and-x"},{match:"#Copula #Adverb? (over|under) [#PastTense]",group:0,tag:"Adjective",reason:"over-cooked"},{match:"#Copula #Adjective+ (and|or) [#PastTense]$",group:0,tag:"Adjective",reason:"bland-and-overcooked"},{match:"got #Adverb? [#PastTense] of",group:0,tag:"Adjective",reason:"got-tired-of"},{match:"(seem|seems|seemed|appear|appeared|appears|feel|feels|felt|sound|sounds|sounded) (#Adverb|#Adjective)? [#PastTense]",group:0,tag:"Adjective",reason:"felt-loved"},{match:"(seem|feel|seemed|felt) [#PastTense #Particle?]",group:0,tag:"Adjective",reason:"seem-confused"},{match:"a (bit|little|tad) [#PastTense #Particle?]",group:0,tag:"Adjective",reason:"a-bit-confused"},{match:"not be [%Adj|Past% #Particle?]",group:0,tag:"Adjective",reason:"do-not-be-confused"},{match:"#Copula just [%Adj|Past% #Particle?]",group:0,tag:"Adjective",reason:"is-just-right"},{match:"as [#Infinitive] as",group:0,tag:"Adjective",reason:"as-pale-as"},{match:"[%Adj|Past%] and #Adjective",group:0,tag:"Adjective",reason:"faled-and-oppressive"},{match:"or [#PastTense] #Noun",group:0,tag:"Adjective",notIf:"(#Copula|#Pronoun)",reason:"or-heightened-emotion"},{match:"(become|became|becoming|becomes) [#Verb]",group:0,tag:"Adjective",reason:"become-verb"},{match:"#Possessive [#PastTense] #Noun",group:0,tag:"Adjective",reason:"declared-intentions"},{match:"#Copula #Pronoun [%Adj|Present%]",group:0,tag:"Adjective",reason:"is-he-cool"},{match:"#Copula [%Adj|Past%] with",group:0,tag:"Adjective",notIf:"(associated|worn|baked|aged|armed|bound|fried|loaded|mixed|packed|pumped|filled|sealed)",reason:"is-crowded-with"},{match:"#Copula #Adverb? [%Adj|Present%]$",group:0,tag:"Adjective",reason:"was-empty$"}],ove=[{match:"[still] #Adjective",group:0,tag:"Adverb",reason:"still-advb"},{match:"[still] #Verb",group:0,tag:"Adverb",reason:"still-verb"},{match:"[so] #Adjective",group:0,tag:"Adverb",reason:"so-adv"},{match:"[way] #Comparative",group:0,tag:"Adverb",reason:"way-adj"},{match:"[way] #Adverb #Adjective",group:0,tag:"Adverb",reason:"way-too-adj"},{match:"[all] #Verb",group:0,tag:"Adverb",reason:"all-verb"},{match:"#Verb  [like]",group:0,notIf:"(#Modal|#PhrasalVerb)",tag:"Adverb",reason:"verb-like"},{match:"(barely|hardly) even",tag:"Adverb",reason:"barely-even"},{match:"[even] #Verb",group:0,tag:"Adverb",reason:"even-walk"},{match:"[even] #Comparative",group:0,tag:"Adverb",reason:"even-worse"},{match:"[even] (#Determiner|#Possessive)",group:0,tag:"#Adverb",reason:"even-the"},{match:"even left",tag:"#Adverb #Verb",reason:"even-left"},{match:"[way] #Adjective",group:0,tag:"#Adverb",reason:"way-over"},{match:"#PresentTense [(hard|quick|bright|slow|fast|backwards|forwards)]",notIf:"#Copula",group:0,tag:"Adverb",reason:"lazy-ly"},{match:"[much] #Adjective",group:0,tag:"Adverb",reason:"bit-1"},{match:"#Copula [#Adverb]$",group:0,tag:"Adjective",reason:"is-well"},{match:"a [(little|bit|wee) bit?] #Adjective",group:0,tag:"Adverb",reason:"a-bit-cold"},{match:"[(super|pretty)] #Adjective",group:0,tag:"Adverb",reason:"super-strong"},{match:"(become|fall|grow) #Adverb? [#PastTense]",group:0,tag:"Adjective",reason:"overly-weakened"},{match:"(a|an) #Adverb [#Participle] #Noun",group:0,tag:"Adjective",reason:"completely-beaten"},{match:"#Determiner #Adverb? [close]",group:0,tag:"Adjective",reason:"a-close"},{match:"#Gerund #Adverb? [close]",group:0,tag:"Adverb",notIf:"(getting|becoming|feeling)",reason:"being-close"},{match:"(the|those|these|a|an) [#Participle] #Noun",group:0,tag:"Adjective",reason:"blown-motor"},{match:"(#PresentTense|#PastTense) [back]",group:0,tag:"Adverb",notIf:"(#PhrasalVerb|#Copula)",reason:"charge-back"},{match:"#Verb [around]",group:0,tag:"Adverb",notIf:"#PhrasalVerb",reason:"send-around"},{match:"[later] #PresentTense",group:0,tag:"Adverb",reason:"later-say"},{match:"#Determiner [well] !#PastTense?",group:0,tag:"Noun",reason:"the-well"},{match:"#Adjective [enough]",group:0,tag:"Adverb",reason:"high-enough"}],ave=[{match:"#Holiday (day|eve)",tag:"Holiday",reason:"holiday-day"},{match:"#Value of #Month",tag:"Date",reason:"value-of-month"},{match:"#Cardinal #Month",tag:"Date",reason:"cardinal-month"},{match:"#Month #Value to #Value",tag:"Date",reason:"value-to-value"},{match:"#Month the #Value",tag:"Date",reason:"month-the-value"},{match:"(#WeekDay|#Month) #Value",tag:"Date",reason:"date-value"},{match:"#Value (#WeekDay|#Month)",tag:"Date",reason:"value-date"},{match:"(#TextValue && #Date) #TextValue",tag:"Date",reason:"textvalue-date"},{match:"#Month #NumberRange",tag:"Date",reason:"aug 20-21"},{match:"#WeekDay #Month #Ordinal",tag:"Date",reason:"week mm-dd"},{match:"#Month #Ordinal #Cardinal",tag:"Date",reason:"mm-dd-yyy"},{match:"(#Place|#Demonmym|#Time) (standard|daylight|central|mountain)? time",tag:"Timezone",reason:"std-time"},{match:"(eastern|mountain|pacific|central|atlantic) (standard|daylight|summer)? time",tag:"Timezone",reason:"eastern-time"},{match:"#Time [(eastern|mountain|pacific|central|est|pst|gmt)]",group:0,tag:"Timezone",reason:"5pm-central"},{match:"(central|western|eastern) european time",tag:"Timezone",reason:"cet"}],lve=[{match:"[sun] the #Ordinal",tag:"WeekDay",reason:"sun-the-5th"},{match:"[sun] #Date",group:0,tag:"WeekDay",reason:"sun-feb"},{match:"#Date (on|this|next|last|during)? [sun]",group:0,tag:"WeekDay",reason:"1pm-sun"},{match:"(in|by|before|during|on|until|after|of|within|all) [sat]",group:0,tag:"WeekDay",reason:"sat"},{match:"(in|by|before|during|on|until|after|of|within|all) [wed]",group:0,tag:"WeekDay",reason:"wed"},{match:"(in|by|before|during|on|until|after|of|within|all) [march]",group:0,tag:"Month",reason:"march"},{match:"[sat] #Date",group:0,tag:"WeekDay",reason:"sat-feb"},{match:"#Preposition [(march|may)]",group:0,tag:"Month",reason:"in-month"},{match:"(this|next|last) (march|may) !#Infinitive?",tag:"#Date #Month",reason:"this-month"},{match:"(march|may) the? #Value",tag:"#Month #Date #Date",reason:"march-5th"},{match:"#Value of? (march|may)",tag:"#Date #Date #Month",reason:"5th-of-march"},{match:"[(march|may)] .? #Date",group:0,tag:"Month",reason:"march-and-feb"},{match:"#Date .? [(march|may)]",group:0,tag:"Month",reason:"feb-and-march"},{match:"#Adverb [(march|may)]",group:0,tag:"Verb",reason:"quickly-march"},{match:"[(march|may)] #Adverb",group:0,tag:"Verb",reason:"march-quickly"},{match:"#Value (am|pm)",tag:"Time",reason:"2-am"}],cve="(feel|sense|process|rush|side|bomb|bully|challenge|cover|crush|dump|exchange|flow|function|issue|lecture|limit|march|process)",uve=[{match:"(the|any) [more]",group:0,tag:"Singular",reason:"more-noun"},{match:"[more] #Noun",group:0,tag:"Adjective",reason:"more-noun"},{match:"(right|rights) of .",tag:"Noun",reason:"right-of"},{match:"a [bit]",group:0,tag:"Singular",reason:"bit-2"},{match:"a [must]",group:0,tag:"Singular",reason:"must-2"},{match:"(we|us) [all]",group:0,tag:"Noun",reason:"we all"},{match:"due to [#Verb]",group:0,tag:"Noun",reason:"due-to"},{match:"some [#Verb] #Plural",group:0,tag:"Noun",reason:"determiner6"},{match:"#Possessive #Ordinal [#PastTense]",group:0,tag:"Noun",reason:"first-thought"},{match:"(the|this|those|these) #Adjective [%Verb|Noun%]",group:0,tag:"Noun",notIf:"#Copula",reason:"the-adj-verb"},{match:"(the|this|those|these) #Adverb #Adjective [#Verb]",group:0,tag:"Noun",reason:"determiner4"},{match:"the [#Verb] #Preposition .",group:0,tag:"Noun",reason:"determiner1"},{match:"(a|an|the) [#Verb] of",group:0,tag:"Noun",reason:"the-verb-of"},{match:"#Determiner #Noun of [#Verb]",group:0,tag:"Noun",notIf:"#Gerund",reason:"noun-of-noun"},{match:"#PastTense #Preposition [#PresentTense]",group:0,notIf:"#Gerund",tag:"Noun",reason:"ended-in-ruins"},{match:"#Conjunction [u]",group:0,tag:"Pronoun",reason:"u-pronoun-2"},{match:"[u] #Verb",group:0,tag:"Pronoun",reason:"u-pronoun-1"},{match:"#Determiner [(western|eastern|northern|southern|central)] #Noun",group:0,tag:"Noun",reason:"western-line"},{match:"(#Singular && @hasHyphen) #PresentTense",tag:"Noun",reason:"hyphen-verb"},{match:"is no [#Verb]",group:0,tag:"Noun",reason:"is-no-verb"},{match:"do [so]",group:0,tag:"Noun",reason:"so-noun"},{match:"#Determiner [(shit|damn|hell)]",group:0,tag:"Noun",reason:"swears-noun"},{match:"to [(shit|hell)]",group:0,tag:"Noun",reason:"to-swears"},{match:"(the|these) [#Singular] (were|are)",group:0,tag:"Plural",reason:"singular-were"},{match:"a #Noun+ or #Adverb+? [#Verb]",group:0,tag:"Noun",reason:"noun-or-noun"},{match:"(the|those|these|a|an) #Adjective? [#PresentTense #Particle?]",group:0,tag:"Noun",notIf:"(seem|appear|include|#Gerund|#Copula)",reason:"det-inf"},{match:"#Noun #Actor",tag:"Actor",notIf:"(#Person|#Pronoun)",reason:"thing-doer"},{match:"#Gerund #Actor",tag:"Actor",reason:"gerund-doer"},{match:"co #Singular",tag:"Actor",reason:"co-noun"},{match:"[#Noun+] #Actor",group:0,tag:"Actor",notIf:"(#Honorific|#Pronoun|#Possessive)",reason:"air-traffic-controller"},{match:"(urban|cardiac|cardiovascular|respiratory|medical|clinical|visual|graphic|creative|dental|exotic|fine|certified|registered|technical|virtual|professional|amateur|junior|senior|special|pharmaceutical|theoretical)+ #Noun? #Actor",tag:"Actor",reason:"fine-artist"},{match:"#Noun+ (coach|chef|king|engineer|fellow|personality|boy|girl|man|woman|master)",tag:"Actor",reason:"dance-coach"},{match:"chief . officer",tag:"Actor",reason:"chief-x-officer"},{match:"chief of #Noun+",tag:"Actor",reason:"chief-of-police"},{match:"senior? vice? president of #Noun+",tag:"Actor",reason:"president-of"},{match:"#Determiner [sun]",group:0,tag:"Singular",reason:"the-sun"},{match:"#Verb (a|an) [#Value]$",group:0,tag:"Singular",reason:"did-a-value"},{match:"the [(can|will|may)]",group:0,tag:"Singular",reason:"the can"},{match:"#FirstName #Acronym? (#Possessive && #LastName)",tag:"Possessive",reason:"name-poss"},{match:"#Organization+ #Possessive",tag:"Possessive",reason:"org-possessive"},{match:"#Place+ #Possessive",tag:"Possessive",reason:"place-possessive"},{match:"#Possessive #PresentTense #Particle?",notIf:"(#Gerund|her)",tag:"Noun",reason:"possessive-verb"},{match:"(my|our|their|her|his|its) [(#Plural && #Actor)] #Noun",tag:"Possessive",reason:"my-dads"},{match:"#Value of a [second]",group:0,unTag:"Value",tag:"Singular",reason:"10th-of-a-second"},{match:"#Value [seconds]",group:0,unTag:"Value",tag:"Plural",reason:"10-seconds"},{match:"in [#Infinitive]",group:0,tag:"Singular",reason:"in-age"},{match:"a [#Adjective] #Preposition",group:0,tag:"Noun",reason:"a-minor-in"},{match:"#Determiner [#Singular] said",group:0,tag:"Actor",reason:"the-actor-said"},{match:`#Determiner #Noun [${cve}] !(#Preposition|to|#Adverb)?`,group:0,tag:"Noun",reason:"the-noun-sense"},{match:"[#PresentTense] (of|by|for) (a|an|the) #Noun #Copula",group:0,tag:"Plural",reason:"photographs-of"},{match:"#Infinitive and [%Noun|Verb%]",group:0,tag:"Infinitive",reason:"fight and win"},{match:"#Noun and [#Verb] and #Noun",group:0,tag:"Noun",reason:"peace-and-flowers"},{match:"the #Cardinal [%Adj|Noun%]",group:0,tag:"Noun",reason:"the-1992-classic"},{match:"#Copula the [%Adj|Noun%] #Noun",group:0,tag:"Adjective",reason:"the-premier-university"},{match:"i #Verb [me] #Noun",group:0,tag:"Possessive",reason:"scottish-me"},{match:"[#PresentTense] (music|class|lesson|night|party|festival|league|ceremony)",group:0,tag:"Noun",reason:"dance-music"},{match:"[wit] (me|it)",group:0,tag:"Presposition",reason:"wit-me"},{match:"#PastTense #Possessive [#Verb]",group:0,tag:"Noun",notIf:"(saw|made)",reason:"left-her-boots"},{match:"#Value [%Plural|Verb%]",group:0,tag:"Plural",notIf:"(one|1|a|an)",reason:"35-signs"},{match:"had [#PresentTense]",group:0,tag:"Noun",notIf:"(#Gerund|come|become)",reason:"had-time"},{match:"%Adj|Noun% %Noun|Verb%",tag:"#Adjective #Noun",notIf:"#ProperNoun #Noun",reason:"instant-access"},{match:"#Determiner [%Adj|Noun%] #Conjunction",group:0,tag:"Noun",reason:"a-rep-to"},{match:"#Adjective #Noun [%Plural|Verb%]$",group:0,tag:"Plural",notIf:"#Pronoun",reason:"near-death-experiences"},{match:"#Possessive #Noun [%Plural|Verb%]$",group:0,tag:"Plural",reason:"your-guild-colors"}],dve=[{match:"(this|that|the|a|an) [#Gerund #Infinitive]",group:0,tag:"Singular",reason:"the-planning-process"},{match:"(that|the) [#Gerund #PresentTense]",group:0,ifNo:"#Copula",tag:"Plural",reason:"the-paving-stones"},{match:"#Determiner [#Gerund] #Noun",group:0,tag:"Adjective",reason:"the-gerund-noun"},{match:"#Pronoun #Infinitive [#Gerund] #PresentTense",group:0,tag:"Noun",reason:"tipping-sucks"},{match:"#Adjective [#Gerund]",group:0,tag:"Noun",notIf:"(still|even|just)",reason:"early-warning"},{match:"[#Gerund] #Adverb? not? #Copula",group:0,tag:"Activity",reason:"gerund-copula"},{match:"#Copula [(#Gerund|#Activity)] #Copula",group:0,tag:"Gerund",reason:"are-doing-is"},{match:"[#Gerund] #Modal",group:0,tag:"Activity",reason:"gerund-modal"},{match:"#Singular for [%Noun|Gerund%]",group:0,tag:"Gerund",reason:"noun-for-gerund"},{match:"#Comparative (for|at) [%Noun|Gerund%]",group:0,tag:"Gerund",reason:"better-for-gerund"},{match:"#PresentTense the [#Gerund]",group:0,tag:"Noun",reason:"keep-the-touching"}],hve=[{match:"#Infinitive (this|that|the) [#Infinitive]",group:0,tag:"Noun",reason:"do-this-dance"},{match:"#Gerund #Determiner [#Infinitive]",group:0,tag:"Noun",reason:"running-a-show"},{match:"#Determiner (only|further|just|more|backward) [#Infinitive]",group:0,tag:"Noun",reason:"the-only-reason"},{match:"(the|this|a|an) [#Infinitive] #Adverb? #Verb",group:0,tag:"Noun",reason:"determiner5"},{match:"#Determiner #Adjective #Adjective? [#Infinitive]",group:0,tag:"Noun",reason:"a-nice-inf"},{match:"#Determiner #Demonym [#PresentTense]",group:0,tag:"Noun",reason:"mexican-train"},{match:"#Adjective #Noun+ [#Infinitive] #Copula",group:0,tag:"Noun",reason:"career-move"},{match:"at some [#Infinitive]",group:0,tag:"Noun",reason:"at-some-inf"},{match:"(go|goes|went) to [#Infinitive]",group:0,tag:"Noun",reason:"goes-to-verb"},{match:"(a|an) #Adjective? #Noun [#Infinitive] (#Preposition|#Noun)",group:0,notIf:"from",tag:"Noun",reason:"a-noun-inf"},{match:"(a|an) #Noun [#Infinitive]$",group:0,tag:"Noun",reason:"a-noun-inf2"},{match:"#Gerund #Adjective? for [#Infinitive]",group:0,tag:"Noun",reason:"running-for"},{match:"about [#Infinitive]",group:0,tag:"Singular",reason:"about-love"},{match:"#Plural on [#Infinitive]",group:0,tag:"Noun",reason:"on-stage"},{match:"any [#Infinitive]",group:0,tag:"Noun",reason:"any-charge"},{match:"no [#Infinitive]",group:0,tag:"Noun",reason:"no-doubt"},{match:"number of [#PresentTense]",group:0,tag:"Noun",reason:"number-of-x"},{match:"(taught|teaches|learns|learned) [#PresentTense]",group:0,tag:"Noun",reason:"teaches-x"},{match:"(try|use|attempt|build|make) [#Verb #Particle?]",notIf:"(#Copula|#Noun|sure|fun|up)",group:0,tag:"Noun",reason:"do-verb"},{match:"^[#Infinitive] (is|was)",group:0,tag:"Noun",reason:"checkmate-is"},{match:"#Infinitive much [#Infinitive]",group:0,tag:"Noun",reason:"get-much"},{match:"[cause] #Pronoun #Verb",group:0,tag:"Conjunction",reason:"cause-cuz"},{match:"the #Singular [#Infinitive] #Noun",group:0,tag:"Noun",notIf:"#Pronoun",reason:"cardio-dance"},{match:"#Determiner #Modal [#Noun]",group:0,tag:"PresentTense",reason:"should-smoke"},{match:"this [#Plural]",group:0,tag:"PresentTense",notIf:"(#Preposition|#Date)",reason:"this-verbs"},{match:"#Noun that [#Plural]",group:0,tag:"PresentTense",notIf:"(#Preposition|#Pronoun|way)",reason:"voice-that-rocks"},{match:"that [#Plural] to",group:0,tag:"PresentTense",notIf:"#Preposition",reason:"that-leads-to"},{match:"(let|make|made) (him|her|it|#Person|#Place|#Organization)+ [#Singular] (a|an|the|it)",group:0,tag:"Infinitive",reason:"let-him-glue"},{match:"#Verb (all|every|each|most|some|no) [#PresentTense]",notIf:"#Modal",group:0,tag:"Noun",reason:"all-presentTense"},{match:"(had|have|#PastTense) #Adjective [#PresentTense]",group:0,tag:"Noun",notIf:"better",reason:"adj-presentTense"},{match:"#Value #Adjective [#PresentTense]",group:0,tag:"Noun",notIf:"#Copula",reason:"one-big-reason"},{match:"#PastTense #Adjective+ [#PresentTense]",group:0,tag:"Noun",notIf:"(#Copula|better)",reason:"won-wide-support"},{match:"(many|few|several|couple) [#PresentTense]",group:0,tag:"Noun",notIf:"#Copula",reason:"many-poses"},{match:"#Determiner #Adverb #Adjective [%Noun|Verb%]",group:0,tag:"Noun",notIf:"#Copula",reason:"very-big-dream"},{match:"from #Noun to [%Noun|Verb%]",group:0,tag:"Noun",reason:"start-to-finish"},{match:"(for|with|of) #Noun (and|or|not) [%Noun|Verb%]",group:0,tag:"Noun",notIf:"#Pronoun",reason:"for-food-and-gas"},{match:"#Adjective #Adjective [#PresentTense]",group:0,tag:"Noun",notIf:"#Copula",reason:"adorable-little-store"},{match:"#Gerund #Adverb? #Comparative [#PresentTense]",group:0,tag:"Noun",notIf:"#Copula",reason:"higher-costs"},{match:"(#Noun && @hasComma) #Noun (and|or) [#PresentTense]",group:0,tag:"Noun",notIf:"#Copula",reason:"noun-list"},{match:"(many|any|some|several) [#PresentTense] for",group:0,tag:"Noun",reason:"any-verbs-for"},{match:"to #PresentTense #Noun [#PresentTense] #Preposition",group:0,tag:"Noun",reason:"gas-exchange"},{match:"#PastTense (until|as|through|without) [#PresentTense]",group:0,tag:"Noun",reason:"waited-until-release"},{match:"#Gerund like #Adjective? [#PresentTense]",group:0,tag:"Plural",reason:"like-hot-cakes"},{match:"some #Adjective [#PresentTense]",group:0,tag:"Noun",reason:"some-reason"},{match:"for some [#PresentTense]",group:0,tag:"Noun",reason:"for-some-reason"},{match:"(same|some|the|that|a) kind of [#PresentTense]",group:0,tag:"Noun",reason:"some-kind-of"},{match:"(same|some|the|that|a) type of [#PresentTense]",group:0,tag:"Noun",reason:"some-type-of"},{match:"#Gerund #Adjective #Preposition [#PresentTense]",group:0,tag:"Noun",reason:"doing-better-for-x"},{match:"(get|got|have) #Comparative [#PresentTense]",group:0,tag:"Noun",reason:"got-better-aim"},{match:"whose [#PresentTense] #Copula",group:0,tag:"Noun",reason:"whos-name-was"},{match:"#PhrasalVerb #Particle #Preposition [#PresentTense]",group:0,tag:"Noun",reason:"given-up-on-x"},{match:"there (are|were) #Adjective? [#PresentTense]",group:0,tag:"Plural",reason:"there-are"},{match:"#Value [#PresentTense] of",group:0,notIf:"(one|1|#Copula|#Infinitive)",tag:"Plural",reason:"2-trains"},{match:"[#PresentTense] (are|were) #Adjective",group:0,tag:"Plural",reason:"compromises-are-possible"},{match:"^[(hope|guess|thought|think)] #Pronoun #Verb",group:0,tag:"Infinitive",reason:"suppose-i"},{match:"#Possessive #Adjective [#Verb]",group:0,tag:"Noun",notIf:"#Copula",reason:"our-full-support"},{match:"[(tastes|smells)] #Adverb? #Adjective",group:0,tag:"PresentTense",reason:"tastes-good"},{match:"#Copula #Gerund [#PresentTense] !by?",group:0,tag:"Noun",notIf:"going",reason:"ignoring-commute"},{match:"#Determiner #Adjective? [(shed|thought|rose|bid|saw|spelt)]",group:0,tag:"Noun",reason:"noun-past"},{match:"how to [%Noun|Verb%]",group:0,tag:"Infinitive",reason:"how-to-noun"},{match:"which [%Noun|Verb%] #Noun",group:0,tag:"Infinitive",reason:"which-boost-it"},{match:"#Gerund [%Plural|Verb%]",group:0,tag:"Plural",reason:"asking-questions"},{match:"(ready|available|difficult|hard|easy|made|attempt|try) to [%Noun|Verb%]",group:0,tag:"Infinitive",reason:"ready-to-noun"},{match:"(bring|went|go|drive|run|bike) to [%Noun|Verb%]",group:0,tag:"Noun",reason:"bring-to-noun"},{match:"#Modal #Noun [%Noun|Verb%]",group:0,tag:"Infinitive",reason:"would-you-look"},{match:"#Copula just [#Infinitive]",group:0,tag:"Noun",reason:"is-just-spam"},{match:"^%Noun|Verb% %Plural|Verb%",tag:"Imperative #Plural",reason:"request-copies"},{match:"#Adjective #Plural and [%Plural|Verb%]",group:0,tag:"#Plural",reason:"pickles-and-drinks"},{match:"#Determiner #Year [#Verb]",group:0,tag:"Noun",reason:"the-1968-film"},{match:"#Determiner [#PhrasalVerb #Particle]",group:0,tag:"Noun",reason:"the-break-up"},{match:"#Determiner [%Adj|Noun%] #Noun",group:0,tag:"Adjective",notIf:"(#Pronoun|#Possessive|#ProperNoun)",reason:"the-individual-goals"},{match:"[%Noun|Verb%] or #Infinitive",group:0,tag:"Infinitive",reason:"work-or-prepare"},{match:"to #Infinitive [#PresentTense]",group:0,tag:"Noun",notIf:"(#Gerund|#Copula|help)",reason:"to-give-thanks"},{match:"[#Noun] me",group:0,tag:"Verb",reason:"kills-me"},{match:"%Plural|Verb% %Plural|Verb%",tag:"#PresentTense #Plural",reason:"removes-wrinkles"}],fve=[{match:"#Money and #Money #Currency?",tag:"Money",reason:"money-and-money"},{match:"#Value #Currency [and] #Value (cents|ore|centavos|sens)",group:0,tag:"money",reason:"and-5-cents"},{match:"#Value (mark|rand|won|rub|ore)",tag:"#Money #Currency",reason:"4-mark"},{match:"a pound",tag:"#Money #Unit",reason:"a-pound"},{match:"#Value (pound|pounds)",tag:"#Money #Unit",reason:"4-pounds"}],mve=[{match:"[(half|quarter)] of? (a|an)",group:0,tag:"Fraction",reason:"millionth"},{match:"#Adverb [half]",group:0,tag:"Fraction",reason:"nearly-half"},{match:"[half] the",group:0,tag:"Fraction",reason:"half-the"},{match:"#Cardinal and a half",tag:"Fraction",reason:"and-a-half"},{match:"#Value (halves|halfs|quarters)",tag:"Fraction",reason:"two-halves"},{match:"a #Ordinal",tag:"Fraction",reason:"a-quarter"},{match:"[#Cardinal+] (#Fraction && /s$/)",tag:"Fraction",reason:"seven-fifths"},{match:"[#Cardinal+ #Ordinal] of .",group:0,tag:"Fraction",reason:"ordinal-of"},{match:"[(#NumericValue && #Ordinal)] of .",group:0,tag:"Fraction",reason:"num-ordinal-of"},{match:"(a|one) #Cardinal?+ #Ordinal",tag:"Fraction",reason:"a-ordinal"},{match:"#Cardinal+ out? of every? #Cardinal",tag:"Fraction",reason:"out-of"}],pve=[{match:"#Cardinal [second]",tag:"Unit",reason:"one-second"},{match:"!once? [(a|an)] (#Duration|hundred|thousand|million|billion|trillion)",group:0,tag:"Value",reason:"a-is-one"},{match:"1 #Value #PhoneNumber",tag:"PhoneNumber",reason:"1-800-Value"},{match:"#NumericValue #PhoneNumber",tag:"PhoneNumber",reason:"(800) PhoneNumber"},{match:"#Demonym #Currency",tag:"Currency",reason:"demonym-currency"},{match:"#Value [(buck|bucks|grand)]",group:0,tag:"Currency",reason:"value-bucks"},{match:"[#Value+] #Currency",group:0,tag:"Money",reason:"15 usd"},{match:"[second] #Noun",group:0,tag:"Ordinal",reason:"second-noun"},{match:"#Value+ [#Currency]",group:0,tag:"Unit",reason:"5-yan"},{match:"#Value [(foot|feet)]",group:0,tag:"Unit",reason:"foot-unit"},{match:"#Value [#Abbreviation]",group:0,tag:"Unit",reason:"value-abbr"},{match:"#Value [k]",group:0,tag:"Unit",reason:"value-k"},{match:"#Unit an hour",tag:"Unit",reason:"unit-an-hour"},{match:"(minus|negative) #Value",tag:"Value",reason:"minus-value"},{match:"#Value (point|decimal) #Value",tag:"Value",reason:"value-point-value"},{match:"#Determiner [(half|quarter)] #Ordinal",group:0,tag:"Value",reason:"half-ordinal"},{match:"#Multiple+ and #Value",tag:"Value",reason:"magnitude-and-value"},{match:"#Value #Unit [(per|an) (hr|hour|sec|second|min|minute)]",group:0,tag:"Unit",reason:"12-miles-per-second"},{match:"#Value [(square|cubic)] #Unit",group:0,tag:"Unit",reason:"square-miles"}],gve=[{match:"#Copula [(#Noun|#PresentTense)] #LastName",group:0,tag:"FirstName",reason:"copula-noun-lastname"},{match:"(sister|pope|brother|father|aunt|uncle|grandpa|grandfather|grandma) #ProperNoun",tag:"Person",reason:"lady-titlecase",safe:!0},{match:"#FirstName [#Determiner #Noun] #LastName",group:0,tag:"Person",reason:"first-noun-last"},{match:"#ProperNoun (b|c|d|e|f|g|h|j|k|l|m|n|o|p|q|r|s|t|u|v|w|x|y|z) #ProperNoun",tag:"Person",reason:"titlecase-acronym-titlecase",safe:!0},{match:"#Acronym #LastName",tag:"Person",reason:"acronym-lastname",safe:!0},{match:"#Person (jr|sr|md)",tag:"Person",reason:"person-honorific"},{match:"#Honorific #Acronym",tag:"Person",reason:"Honorific-TitleCase"},{match:"#Person #Person the? #RomanNumeral",tag:"Person",reason:"roman-numeral"},{match:"#FirstName [/^[^aiurck]$/]",group:0,tag:["Acronym","Person"],reason:"john-e"},{match:"#Noun van der? #Noun",tag:"Person",reason:"van der noun",safe:!0},{match:"(king|queen|prince|saint|lady) of #Noun",tag:"Person",reason:"king-of-noun",safe:!0},{match:"(prince|lady) #Place",tag:"Person",reason:"lady-place"},{match:"(king|queen|prince|saint) #ProperNoun",tag:"Person",notIf:"#Place",reason:"saint-foo"},{match:"al (#Person|#ProperNoun)",tag:"Person",reason:"al-borlen",safe:!0},{match:"#FirstName de #Noun",tag:"Person",reason:"bill-de-noun"},{match:"#FirstName (bin|al) #Noun",tag:"Person",reason:"bill-al-noun"},{match:"#FirstName #Acronym #ProperNoun",tag:"Person",reason:"bill-acronym-title"},{match:"#FirstName #FirstName #ProperNoun",tag:"Person",reason:"bill-firstname-title"},{match:"#Honorific #FirstName? #ProperNoun",tag:"Person",reason:"dr-john-Title"},{match:"#FirstName the #Adjective",tag:"Person",reason:"name-the-great"},{match:"#ProperNoun (van|al|bin) #ProperNoun",tag:"Person",reason:"title-van-title",safe:!0},{match:"#ProperNoun (de|du) la? #ProperNoun",tag:"Person",notIf:"#Place",reason:"title-de-title"},{match:"#Singular #Acronym #LastName",tag:"#FirstName #Person .",reason:"title-acro-noun",safe:!0},{match:"[#ProperNoun] #Person",group:0,tag:"Person",reason:"proper-person",safe:!0},{match:"#Person [#ProperNoun #ProperNoun]",group:0,tag:"Person",notIf:"#Possessive",reason:"three-name-person",safe:!0},{match:"#FirstName #Acronym? [#ProperNoun]",group:0,tag:"LastName",notIf:"#Possessive",reason:"firstname-titlecase"},{match:"#FirstName [#FirstName]",group:0,tag:"LastName",reason:"firstname-firstname"},{match:"#FirstName #Acronym #Noun",tag:"Person",reason:"n-acro-noun",safe:!0},{match:"#FirstName [(de|di|du|van|von)] #Person",group:0,tag:"LastName",reason:"de-firstname"},{match:"[(lieutenant|corporal|sergeant|captain|qeen|king|admiral|major|colonel|marshal|president|queen|king)+] #ProperNoun",group:0,tag:"Honorific",reason:"seargeant-john"},{match:"[(private|general|major|rear|prime|field|count|miss)] #Honorific? #Person",group:0,tag:["Honorific","Person"],reason:"ambg-honorifics"},{match:"#Honorific #FirstName [#Singular]",group:0,tag:"LastName",notIf:"#Possessive",reason:"dr-john-foo",safe:!0},{match:"[(his|her) (majesty|honour|worship|excellency|honorable)] #Person",group:0,tag:"Honorific",reason:"his-excellency"},{match:"#Honorific #Actor",tag:"Honorific",reason:"Lieutenant colonel"},{match:"(first|second|third|1st|2nd|3rd) #Actor",tag:"Honorific",reason:"first lady"},{match:"#Person #RomanNumeral",tag:"Person",reason:"louis-IV"}],yve=[{match:"#FirstName #Noun$",tag:". #LastName",notIf:"(#Possessive|#Organization|#Place|#Pronoun|@hasTitleCase)",reason:"firstname-noun"},{match:"%Person|Date% #Acronym? #ProperNoun",tag:"Person",reason:"jan-thierson"},{match:"%Person|Noun% #Acronym? #ProperNoun",tag:"Person",reason:"switch-person",safe:!0},{match:"%Person|Noun% #Organization",tag:"Organization",reason:"olive-garden"},{match:"%Person|Verb% #Acronym? #ProperNoun",tag:"Person",reason:"verb-propernoun",ifNo:"#Actor"},{match:"[%Person|Verb%] (will|had|has|said|says|told|did|learned|wants|wanted)",group:0,tag:"Person",reason:"person-said"},{match:"[%Person|Place%] (harbor|harbour|pier|town|city|place|dump|landfill)",group:0,tag:"Place",reason:"sydney-harbour"},{match:"(west|east|north|south) [%Person|Place%]",group:0,tag:"Place",reason:"east-sydney"},{match:"#Modal [%Person|Verb%]",group:0,tag:"Verb",reason:"would-mark"},{match:"#Adverb [%Person|Verb%]",group:0,tag:"Verb",reason:"really-mark"},{match:"[%Person|Verb%] (#Adverb|#Comparative)",group:0,tag:"Verb",reason:"drew-closer"},{match:"%Person|Verb% #Person",tag:"Person",reason:"rob-smith"},{match:"%Person|Verb% #Acronym #ProperNoun",tag:"Person",reason:"rob-a-smith"},{match:"[will] #Verb",group:0,tag:"Modal",reason:"will-verb"},{match:"(will && @isTitleCase) #ProperNoun",tag:"Person",reason:"will-name"},{match:"(#FirstName && !#Possessive) [#Singular] #Verb",group:0,safe:!0,tag:"LastName",reason:"jack-layton"},{match:"^[#Singular] #Person #Verb",group:0,safe:!0,tag:"Person",reason:"sherwood-anderson"},{match:"(a|an) [#Person]$",group:0,unTag:"Person",reason:"a-warhol"}],bve=[{match:"#Copula (pretty|dead|full|well|sure) (#Adjective|#Noun)",tag:"#Copula #Adverb #Adjective",reason:"sometimes-adverb"},{match:"(#Pronoun|#Person) (had|#Adverb)? [better] #PresentTense",group:0,tag:"Modal",reason:"i-better"},{match:"(#Modal|i|they|we|do) not? [like]",group:0,tag:"PresentTense",reason:"modal-like"},{match:"#Noun #Adverb? [left]",group:0,tag:"PastTense",reason:"left-verb"},{match:"will #Adverb? not? #Adverb? [be] #Gerund",group:0,tag:"Copula",reason:"will-be-copula"},{match:"will #Adverb? not? #Adverb? [be] #Adjective",group:0,tag:"Copula",reason:"be-copula"},{match:"[march] (up|down|back|toward)",notIf:"#Date",group:0,tag:"Infinitive",reason:"march-to"},{match:"#Modal [march]",group:0,tag:"Infinitive",reason:"must-march"},{match:"[may] be",group:0,tag:"Verb",reason:"may-be"},{match:"[(subject|subjects|subjected)] to",group:0,tag:"Verb",reason:"subject to"},{match:"[home] to",group:0,tag:"PresentTense",reason:"home to"},{match:"[open] #Determiner",group:0,tag:"Infinitive",reason:"open-the"},{match:"(were|was) being [#PresentTense]",group:0,tag:"PastTense",reason:"was-being"},{match:"(had|has|have) [been /en$/]",group:0,tag:"Auxiliary Participle",reason:"had-been-broken"},{match:"(had|has|have) [been /ed$/]",group:0,tag:"Auxiliary PastTense",reason:"had-been-smoked"},{match:"(had|has) #Adverb? [been] #Adverb? #PastTense",group:0,tag:"Auxiliary",reason:"had-been-adj"},{match:"(had|has) to [#Noun] (#Determiner|#Possessive)",group:0,tag:"Infinitive",reason:"had-to-noun"},{match:"have [#PresentTense]",group:0,tag:"PastTense",notIf:"(come|gotten)",reason:"have-read"},{match:"(does|will|#Modal) that [work]",group:0,tag:"PastTense",reason:"does-that-work"},{match:"[(sound|sounds)] #Adjective",group:0,tag:"PresentTense",reason:"sounds-fun"},{match:"[(look|looks)] #Adjective",group:0,tag:"PresentTense",reason:"looks-good"},{match:"[(start|starts|stop|stops|begin|begins)] #Gerund",group:0,tag:"Verb",reason:"starts-thinking"},{match:"(have|had) read",tag:"Modal #PastTense",reason:"read-read"},{match:"(is|was|were) [(under|over) #PastTense]",group:0,tag:"Adverb Adjective",reason:"was-under-cooked"},{match:"[shit] (#Determiner|#Possessive|them)",group:0,tag:"Verb",reason:"swear1-verb"},{match:"[damn] (#Determiner|#Possessive|them)",group:0,tag:"Verb",reason:"swear2-verb"},{match:"[fuck] (#Determiner|#Possessive|them)",group:0,tag:"Verb",reason:"swear3-verb"},{match:"#Plural that %Noun|Verb%",tag:". #Preposition #Infinitive",reason:"jobs-that-work"},{match:"[works] for me",group:0,tag:"PresentTense",reason:"works-for-me"},{match:"as #Pronoun [please]",group:0,tag:"Infinitive",reason:"as-we-please"},{match:"[(co|mis|de|inter|intra|pre|re|un|out|under|over|counter)] #Verb",group:0,tag:["Verb","Prefix"],notIf:"(#Copula|#PhrasalVerb)",reason:"co-write"},{match:"#PastTense and [%Adj|Past%]",group:0,tag:"PastTense",reason:"dressed-and-left"},{match:"[%Adj|Past%] and #PastTense",group:0,tag:"PastTense",reason:"dressed-and-left"},{match:"#Copula #Pronoun [%Adj|Past%]",group:0,tag:"Adjective",reason:"is-he-stoked"},{match:"to [%Noun|Verb%] #Preposition",group:0,tag:"Infinitive",reason:"to-dream-of"}],vve=[{match:"will (#Adverb|not)+? [have] (#Adverb|not)+? #Verb",group:0,tag:"Auxiliary",reason:"will-have-vb"},{match:"[#Copula] (#Adverb|not)+? (#Gerund|#PastTense)",group:0,tag:"Auxiliary",reason:"copula-walking"},{match:"[(#Modal|did)+] (#Adverb|not)+? #Verb",group:0,tag:"Auxiliary",reason:"modal-verb"},{match:"#Modal (#Adverb|not)+? [have] (#Adverb|not)+? [had] (#Adverb|not)+? #Verb",group:0,tag:"Auxiliary",reason:"would-have"},{match:"[(has|had)] (#Adverb|not)+? #PastTense",group:0,tag:"Auxiliary",reason:"had-walked"},{match:"[(do|does|did|will|have|had|has|got)] (not|#Adverb)+? #Verb",group:0,tag:"Auxiliary",reason:"have-had"},{match:"[about to] #Adverb? #Verb",group:0,tag:["Auxiliary","Verb"],reason:"about-to"},{match:"#Modal (#Adverb|not)+? [be] (#Adverb|not)+? #Verb",group:0,tag:"Auxiliary",reason:"would-be"},{match:"[(#Modal|had|has)] (#Adverb|not)+? [been] (#Adverb|not)+? #Verb",group:0,tag:"Auxiliary",reason:"had-been"},{match:"[(be|being|been)] #Participle",group:0,tag:"Auxiliary",reason:"being-driven"},{match:"[may] #Adverb? #Infinitive",group:0,tag:"Auxiliary",reason:"may-want"},{match:"#Copula (#Adverb|not)+? [(be|being|been)] #Adverb+? #PastTense",group:0,tag:"Auxiliary",reason:"being-walked"},{match:"will [be] #PastTense",group:0,tag:"Auxiliary",reason:"will-be-x"},{match:"[(be|been)] (#Adverb|not)+? #Gerund",group:0,tag:"Auxiliary",reason:"been-walking"},{match:"[used to] #PresentTense",group:0,tag:"Auxiliary",reason:"used-to-walk"},{match:"#Copula (#Adverb|not)+? [going to] #Adverb+? #PresentTense",group:0,tag:"Auxiliary",reason:"going-to-walk"},{match:"#Imperative [(me|him|her)]",group:0,tag:"Reflexive",reason:"tell-him"},{match:"(is|was) #Adverb? [no]",group:0,tag:"Negative",reason:"is-no"},{match:"[(been|had|became|came)] #PastTense",group:0,notIf:"#PhrasalVerb",tag:"Auxiliary",reason:"been-told"},{match:"[(being|having|getting)] #Verb",group:0,tag:"Auxiliary",reason:"being-born"},{match:"[be] #Gerund",group:0,tag:"Auxiliary",reason:"be-walking"},{match:"[better] #PresentTense",group:0,tag:"Modal",notIf:"(#Copula|#Gerund)",reason:"better-go"},{match:"even better",tag:"Adverb #Comparative",reason:"even-better"}],xve=[{match:"(#Verb && @hasHyphen) up",tag:"PhrasalVerb",reason:"foo-up"},{match:"(#Verb && @hasHyphen) off",tag:"PhrasalVerb",reason:"foo-off"},{match:"(#Verb && @hasHyphen) over",tag:"PhrasalVerb",reason:"foo-over"},{match:"(#Verb && @hasHyphen) out",tag:"PhrasalVerb",reason:"foo-out"},{match:"[#Verb (in|out|up|down|off|back)] (on|in)",notIf:"#Copula",tag:"PhrasalVerb Particle",reason:"walk-in-on"},{match:"(lived|went|crept|go) [on] for",group:0,tag:"PhrasalVerb",reason:"went-on"},{match:"#Verb (up|down|in|on|for)$",tag:"PhrasalVerb #Particle",notIf:"#PhrasalVerb",reason:"come-down$"},{match:"help [(stop|end|make|start)]",group:0,tag:"Infinitive",reason:"help-stop"},{match:"#PhrasalVerb (in && #Particle) #Determiner",tag:"#Verb #Preposition #Determiner",unTag:"PhrasalVerb",reason:"work-in-the"},{match:"[(stop|start|finish|help)] #Gerund",group:0,tag:"Infinitive",reason:"start-listening"},{match:"#Verb (him|her|it|us|himself|herself|itself|everything|something) [(up|down)]",group:0,tag:"Adverb",reason:"phrasal-pronoun-advb"}],gk="(i|we|they)",wve=[{match:"^do not? [#Infinitive #Particle?]",notIf:gk,group:0,tag:"Imperative",reason:"do-eat"},{match:"^please do? not? [#Infinitive #Particle?]",group:0,tag:"Imperative",reason:"please-go"},{match:"^just do? not? [#Infinitive #Particle?]",group:0,tag:"Imperative",reason:"just-go"},{match:"^[#Infinitive] it #Comparative",notIf:gk,group:0,tag:"Imperative",reason:"do-it-better"},{match:"^[#Infinitive] it (please|now|again|plz)",notIf:gk,group:0,tag:"Imperative",reason:"do-it-please"},{match:"^[#Infinitive] (#Adjective|#Adverb)$",group:0,tag:"Imperative",notIf:"(so|such|rather|enough)",reason:"go-quickly"},{match:"^[#Infinitive] (up|down|over) #Determiner",group:0,tag:"Imperative",reason:"turn-down"},{match:"^[#Infinitive] (your|my|the|a|an|any|each|every|some|more|with|on)",group:0,notIf:"like",tag:"Imperative",reason:"eat-my-shorts"},{match:"^[#Infinitive] (him|her|it|us|me|there)",group:0,tag:"Imperative",reason:"tell-him"},{match:"^[#Infinitive] #Adjective #Noun$",group:0,tag:"Imperative",reason:"avoid-loud-noises"},{match:"^[#Infinitive] (#Adjective|#Adverb)? and #Infinitive",group:0,tag:"Imperative",reason:"call-and-reserve"},{match:"^(go|stop|wait|hurry) please?$",tag:"Imperative",reason:"go"},{match:"^(somebody|everybody) [#Infinitive]",group:0,tag:"Imperative",reason:"somebody-call"},{match:"^let (us|me) [#Infinitive]",group:0,tag:"Imperative",reason:"lets-leave"},{match:"^[(shut|close|open|start|stop|end|keep)] #Determiner #Noun",group:0,tag:"Imperative",reason:"shut-the-door"},{match:"^[#PhrasalVerb #Particle] #Determiner #Noun",group:0,tag:"Imperative",reason:"turn-off-the-light"},{match:"^[go] to .",group:0,tag:"Imperative",reason:"go-to-toronto"},{match:"^#Modal you [#Infinitive]",group:0,tag:"Imperative",reason:"would-you-"},{match:"^never [#Infinitive]",group:0,tag:"Imperative",reason:"never-stop"},{match:"^come #Infinitive",tag:"Imperative",notIf:"on",reason:"come-have"},{match:"^come and? #Infinitive",tag:"Imperative . Imperative",notIf:"#PhrasalVerb",reason:"come-and-have"},{match:"^stay (out|away|back)",tag:"Imperative",reason:"stay-away"},{match:"^[(stay|be|keep)] #Adjective",group:0,tag:"Imperative",reason:"stay-cool"},{match:"^[keep it] #Adjective",group:0,tag:"Imperative",reason:"keep-it-cool"},{match:"^do not [#Infinitive]",group:0,tag:"Imperative",reason:"do-not-be"},{match:"[#Infinitive] (yourself|yourselves)",group:0,tag:"Imperative",reason:"allow-yourself"},{match:"[#Infinitive] what .",group:0,tag:"Imperative",reason:"look-what"},{match:"^[#Infinitive] #Gerund",group:0,tag:"Imperative",reason:"keep-playing"},{match:"^[#Infinitive] (to|for|into|toward|here|there)",group:0,tag:"Imperative",reason:"go-to"},{match:"^[#Infinitive] (and|or) #Infinitive",group:0,tag:"Imperative",reason:"inf-and-inf"},{match:"^[%Noun|Verb%] to",group:0,tag:"Imperative",reason:"commit-to"},{match:"^[#Infinitive] #Adjective? #Singular #Singular",group:0,tag:"Imperative",reason:"maintain-eye-contact"},{match:"do not (forget|omit|neglect) to [#Infinitive]",group:0,tag:"Imperative",reason:"do-not-forget"},{match:"^[(ask|wear|pay|look|help|show|watch|act|fix|kill|stop|start|turn|try|win)] #Noun",group:0,tag:"Imperative",reason:"pay-attention"}],Eve=[{match:"(that|which) were [%Adj|Gerund%]",group:0,tag:"Gerund",reason:"that-were-growing"},{match:"#Gerund [#Gerund] #Plural",group:0,tag:"Adjective",reason:"hard-working-fam"}],kve=[{match:"(got|were|was|is|are|am) (#PastTense|#Participle)",tag:"Passive",reason:"got-walked"},{match:"(was|were|is|are|am) being (#PastTense|#Participle)",tag:"Passive",reason:"was-being"},{match:"(had|have|has) been (#PastTense|#Participle)",tag:"Passive",reason:"had-been"},{match:"will be being? (#PastTense|#Participle)",tag:"Passive",reason:"will-be-cleaned"},{match:"#Noun [(#PastTense|#Participle)] by (the|a) #Noun",group:0,tag:"Passive",reason:"suffered-by"}];let Nve=[{match:"u r",tag:"#Pronoun #Copula",reason:"u r"},{match:"#Noun [(who|whom)]",group:0,tag:"Determiner",reason:"captain-who"},{match:"[had] #Noun+ #PastTense",group:0,tag:"Condition",reason:"had-he"},{match:"[were] #Noun+ to #Infinitive",group:0,tag:"Condition",reason:"were-he"},{match:"some sort of",tag:"Adjective Noun Conjunction",reason:"some-sort-of"},{match:"of some sort",tag:"Conjunction Adjective Noun",reason:"of-some-sort"},{match:"[such] (a|an|is)? #Noun",group:0,tag:"Determiner",reason:"such-skill"},{match:"[right] (before|after|in|into|to|toward)",group:0,tag:"#Adverb",reason:"right-into"},{match:"#Preposition [about]",group:0,tag:"Adjective",reason:"at-about"},{match:"(are|#Modal|see|do|for) [ya]",group:0,tag:"Pronoun",reason:"are-ya"},{match:"[long live] .",group:0,tag:"#Adjective #Infinitive",reason:"long-live"},{match:"[plenty] of",group:0,tag:"#Uncountable",reason:"plenty-of"},{match:"(always|nearly|barely|practically) [there]",group:0,tag:"Adjective",reason:"always-there"},{match:"[there] (#Adverb|#Pronoun)? #Copula",group:0,tag:"There",reason:"there-is"},{match:"#Copula [there] .",group:0,tag:"There",reason:"is-there"},{match:"#Modal #Adverb? [there]",group:0,tag:"There",reason:"should-there"},{match:"^[do] (you|we|they)",group:0,tag:"QuestionWord",reason:"do-you"},{match:"^[does] (he|she|it|#ProperNoun)",group:0,tag:"QuestionWord",reason:"does-he"},{match:"#Determiner #Noun+ [who] #Verb",group:0,tag:"Preposition",reason:"the-x-who"},{match:"#Determiner #Noun+ [which] #Verb",group:0,tag:"Preposition",reason:"the-x-which"},{match:"a [while]",group:0,tag:"Noun",reason:"a-while"},{match:"guess who",tag:"#Infinitive #QuestionWord",reason:"guess-who"},{match:"[fucking] !#Verb",group:0,tag:"#Gerund",reason:"f-as-gerund"}];const Cve=Nve,_ve=[{match:"university of #Place",tag:"Organization",reason:"university-of-Foo"},{match:"#Noun (&|n) #Noun",tag:"Organization",reason:"Noun-&-Noun"},{match:"#Organization of the? #ProperNoun",tag:"Organization",reason:"org-of-place",safe:!0},{match:"#Organization #Country",tag:"Organization",reason:"org-country"},{match:"#ProperNoun #Organization",tag:"Organization",notIf:"#FirstName",reason:"titlecase-org"},{match:"#ProperNoun (ltd|co|inc|dept|assn|bros)",tag:"Organization",reason:"org-abbrv"},{match:"the [#Acronym]",group:0,tag:"Organization",reason:"the-acronym",safe:!0},{match:"government of the? [#Place+]",tag:"Organization",reason:"government-of-x"},{match:"(health|school|commerce) board",tag:"Organization",reason:"school-board"},{match:"(nominating|special|conference|executive|steering|central|congressional) committee",tag:"Organization",reason:"special-comittee"},{match:"(world|global|international|national|#Demonym) #Organization",tag:"Organization",reason:"global-org"},{match:"#Noun+ (public|private) school",tag:"School",reason:"noun-public-school"},{match:"#Place+ #SportsTeam",tag:"SportsTeam",reason:"place-sportsteam"},{match:"(dc|atlanta|minnesota|manchester|newcastle|sheffield) united",tag:"SportsTeam",reason:"united-sportsteam"},{match:"#Place+ fc",tag:"SportsTeam",reason:"fc-sportsteam"},{match:"#Place+ #Noun{0,2} (club|society|group|team|committee|commission|association|guild|crew)",tag:"Organization",reason:"place-noun-society"}],Sve=[{match:"(west|north|south|east|western|northern|southern|eastern)+ #Place",tag:"Region",reason:"west-norfolk"},{match:"#City [(al|ak|az|ar|ca|ct|dc|fl|ga|id|il|nv|nh|nj|ny|oh|pa|sc|tn|tx|ut|vt|pr)]",group:0,tag:"Region",reason:"us-state"},{match:"portland [or]",group:0,tag:"Region",reason:"portland-or"},{match:"#ProperNoun+ (cliff|place|range|pit|place|point|room|grounds|ruins)",tag:"Place",reason:"foo-point"},{match:"in [#ProperNoun] #Place",group:0,tag:"Place",reason:"propernoun-place"},{match:"#Value #Noun (st|street|rd|road|crescent|cr|way|tr|terrace|avenue|ave)",tag:"Address",reason:"address-st"},{match:"(port|mount|mt) #ProperName",tag:"Place",reason:"port-name"}],Tve=[{match:"[so] #Noun",group:0,tag:"Conjunction",reason:"so-conj"},{match:"[(who|what|where|why|how|when)] #Noun #Copula #Adverb? (#Verb|#Adjective)",group:0,tag:"Conjunction",reason:"how-he-is-x"},{match:"#Copula [(who|what|where|why|how|when)] #Noun",group:0,tag:"Conjunction",reason:"when-he"},{match:"#Verb [that] #Pronoun",group:0,tag:"Conjunction",reason:"said-that-he"},{match:"#Noun [that] #Copula",group:0,tag:"Conjunction",reason:"that-are"},{match:"#Noun [that] #Verb #Adjective",group:0,tag:"Conjunction",reason:"that-seem"},{match:"#Noun #Copula not? [that] #Adjective",group:0,tag:"Adverb",reason:"that-adj"},{match:"#Verb #Adverb? #Noun [(that|which)]",group:0,tag:"Preposition",reason:"that-prep"},{match:"@hasComma [which] (#Pronoun|#Verb)",group:0,tag:"Preposition",reason:"which-copula"},{match:"#Noun [like] #Noun",group:0,tag:"Preposition",reason:"noun-like"},{match:"^[like] #Determiner",group:0,tag:"Preposition",reason:"like-the"},{match:"a #Noun [like] (#Noun|#Determiner)",group:0,tag:"Preposition",reason:"a-noun-like"},{match:"#Adverb [like]",group:0,tag:"Verb",reason:"really-like"},{match:"(not|nothing|never) [like]",group:0,tag:"Preposition",reason:"nothing-like"},{match:"#Infinitive #Pronoun [like]",group:0,tag:"Preposition",reason:"treat-them-like"},{match:"[#QuestionWord] (#Pronoun|#Determiner)",group:0,tag:"Preposition",reason:"how-he"},{match:"[#QuestionWord] #Participle",group:0,tag:"Preposition",reason:"when-stolen"},{match:"[how] (#Determiner|#Copula|#Modal|#PastTense)",group:0,tag:"QuestionWord",reason:"how-is"},{match:"#Plural [(who|which|when)] .",group:0,tag:"Preposition",reason:"people-who"}],$ve=[{match:"holy (shit|fuck|hell)",tag:"Expression",reason:"swears-expression"},{match:"^[(well|so|okay|now)] !#Adjective?",group:0,tag:"Expression",reason:"well-"},{match:"^come on",tag:"Expression",reason:"come-on"},{match:"(say|says|said) [sorry]",group:0,tag:"Expression",reason:"say-sorry"},{match:"^(ok|alright|shoot|hell|anyways)",tag:"Expression",reason:"ok-"},{match:"^(say && @hasComma)",tag:"Expression",reason:"say-"},{match:"^(like && @hasComma)",tag:"Expression",reason:"like-"},{match:"^[(dude|man|girl)] #Pronoun",group:0,tag:"Expression",reason:"dude-i"}];let Ive=[].concat(kve,eve,nve,rve,sve,ove,lve,ave,uve,dve,hve,fve,mve,pve,gve,yve,bve,ive,vve,xve,wve,Eve,Cve,_ve,Sve,Tve,$ve);const Ave={two:{matches:Ive}};let yk=null;const Rve=function(t){const{world:e}=t,{model:n,methods:r}=e;yk=yk||r.one.buildNet(n.two.matches,e);let i=r.two.quickSplit(t.document).map(a=>{let l=a[0];return[l.index[0],l.index[1],l.index[1]+a.length]}),o=t.update(i);return o.cache(),o.sweep(yk),t.uncache(),t.unfreeze(),t},Pve=t=>t.compute(["freeze","lexicon","preTagger","postTagger","unfreeze"]),Dve={postTagger:Rve,tagger:Pve},Ove=t=>Math.round(t*100)/100;function Lve(t){t.prototype.confidence=function(){let e=0,n=0;return this.docs.forEach(r=>{r.forEach(s=>{n+=1,e+=s.confidence||1})}),n===0?1:Ove(e/n)},t.prototype.tagger=function(){return this.compute(["tagger"])}}const Mve={api:Lve,compute:Dve,model:Ave,hooks:["postTagger"]},zve=Mve,Fve=function(t){return Object.keys(t.hooks).filter(e=>!e.startsWith("#")&&!e.startsWith("%"))},Bve=function(t,e){let n=Fve(e);if(n.length===0)return t;t._cache||t.cache();let r=t._cache;return t.filter((s,i)=>n.some(o=>r[i].has(o)))},Vve=Bve,jve=function(t,e){let n=e;typeof e=="string"&&(n=this.buildNet([{match:e}]));let r=this.tokenize(t),s=Vve(r,n);return s.found?(s.compute(["index","tagger"]),s.match(e)):r.none()},Uve=jve,Hve={lib:{lazy:Uve}},Gve=function(t,e){const n=t.methods.two.transform.verb.conjugate;let r=n(e,t.model);return t.has("#Gerund")?r.Gerund:t.has("#PastTense")?r.PastTense:t.has("#PresentTense")?r.PresentTense:t.has("#Gerund")?r.Gerund:e},Wve=function(t,e){let n=e;return t.forEach(r=>{r.has("#Infinitive")||(n=Gve(r,e)),r.replaceWith(n)}),t},qve=Wve,Kve=function(t,e){let n=e;if(t.has("#Plural")){const r=t.methods.two.transform.noun.toPlural;n=r(e,t.model)}t.replaceWith(n,{possessives:!0})},Zve=function(t,e){const{toAdverb:n}=t.methods.two.transform.adjective;let s=n(e);s&&t.replaceWith(s)},Xve=function(t,e){const{toComparative:n,toSuperlative:r}=t.methods.two.transform.adjective;let s=e;t.has("#Comparative")?s=n(s,t.model):t.has("#Superlative")&&(s=r(s,t.model)),s&&t.replaceWith(s)},Yve=function(t,e,n){let r=t.split(/ /g).map(i=>i.toLowerCase().trim());r=r.filter(i=>i),r=r.map(i=>`{${i}}`).join(" ");let s=this.match(r);return n&&(s=s.if(n)),s.has("#Verb")?qve(s,e):s.has("#Noun")?Kve(s,e):s.has("#Adverb")?Zve(s,e):s.has("#Adjective")?Xve(s,e):this},Jve=Yve,Qve=function(t){t.prototype.swap=Jve},e1e={api:Qve};Xt.plugin(gbe);Xt.plugin(Qbe);Xt.plugin(zve);Xt.plugin(Hve);Xt.plugin(e1e);const sh=function(t){const{fromComparative:e,fromSuperlative:n}=t.methods.two.transform.adjective;let r=t.text("normal");return t.has("#Comparative")?e(r,t.model):t.has("#Superlative")?n(r,t.model):r},t1e=function(t){class e extends t{constructor(r,s,i){super(r,s,i),this.viewType="Adjectives"}json(r={}){const{toAdverb:s,toNoun:i,toSuperlative:o,toComparative:a}=this.methods.two.transform.adjective;return r.normal=!0,this.map(l=>{let c=l.toView().json(r)[0]||{},u=sh(l);return c.adjective={adverb:s(u,this.model),noun:i(u,this.model),superlative:o(u,this.model),comparative:a(u,this.model)},c},[])}adverbs(){return this.before("#Adverb+$").concat(this.after("^#Adverb+"))}conjugate(r){const{toComparative:s,toSuperlative:i,toNoun:o,toAdverb:a}=this.methods.two.transform.adjective;return this.getNth(r).map(l=>{let c=sh(l);return{Adjective:c,Comparative:s(c,this.model),Superlative:i(c,this.model),Noun:o(c,this.model),Adverb:a(c,this.model)}},[])}toComparative(r){const{toComparative:s}=this.methods.two.transform.adjective;return this.getNth(r).map(i=>{let o=sh(i),a=s(o,this.model);return i.replaceWith(a)})}toSuperlative(r){const{toSuperlative:s}=this.methods.two.transform.adjective;return this.getNth(r).map(i=>{let o=sh(i),a=s(o,this.model);return i.replaceWith(a)})}toAdverb(r){const{toAdverb:s}=this.methods.two.transform.adjective;return this.getNth(r).map(i=>{let o=sh(i),a=s(o,this.model);return i.replaceWith(a)})}toNoun(r){const{toNoun:s}=this.methods.two.transform.adjective;return this.getNth(r).map(i=>{let o=sh(i),a=s(o,this.model);return i.replaceWith(a)})}}t.prototype.adjectives=function(n){let r=this.match("#Adjective");return r=r.getNth(n),new e(r.document,r.pointer)},t.prototype.superlatives=function(n){let r=this.match("#Superlative");return r=r.getNth(n),new e(r.document,r.pointer)},t.prototype.comparatives=function(n){let r=this.match("#Comparative");return r=r.getNth(n),new e(r.document,r.pointer)}},n1e={api:t1e},r1e=function(t){return t.compute("root").text("root")},s1e=function(t){class e extends t{constructor(r,s,i){super(r,s,i),this.viewType="Adverbs"}conjugate(r){return this.getNth(r).map(s=>{let i=r1e(s);return{Adverb:s.text("normal"),Adjective:i}},[])}json(r={}){const s=this.methods.two.transform.adjective.fromAdverb;return r.normal=!0,this.map(i=>{let o=i.toView().json(r)[0]||{};return o.adverb={adjective:s(o.normal)},o},[])}}t.prototype.adverbs=function(n){let r=this.match("#Adverb");return r=r.getNth(n),new e(r.document,r.pointer)}},i1e={api:s1e},o1e=function(t){let e=t.match("@hasComma");return e=e.filter(n=>{if(n.growLeft(".").wordCount()===1||n.growRight(". .").wordCount()===1)return!1;let r=n.grow(".");return r=r.ifNo("@hasComma @hasComma"),r=r.ifNo("@hasComma (and|or) ."),r=r.ifNo("(#City && @hasComma) #Country"),r=r.ifNo("(#WeekDay && @hasComma) #Date"),r=r.ifNo("(#Date+ && @hasComma) #Value"),r=r.ifNo("(#Adjective && @hasComma) #Adjective"),r.found}),t.splitAfter(e)},a1e=function(t){let e=t.parentheses();return e=e.filter(n=>n.wordCount()>=3&&n.has("#Verb")&&n.has("#Noun")),t.splitOn(e)},l1e=function(t){let e=t.quotations();return e=e.filter(n=>n.wordCount()>=3&&n.has("#Verb")&&n.has("#Noun")),t.splitOn(e)},c1e=function(t){let e=this;e=a1e(e),e=l1e(e),e=o1e(e),e=e.splitAfter("(@hasEllipses|@hasSemicolon|@hasDash|@hasColon)"),e=e.splitAfter("^#Pronoun (said|says)"),e=e.splitBefore("(said|says) #ProperNoun$"),e=e.splitBefore(". . if .{4}"),e=e.splitBefore("and while"),e=e.splitBefore("now that"),e=e.splitBefore("ever since"),e=e.splitBefore("(supposing|although)"),e=e.splitBefore("even (while|if|though)"),e=e.splitBefore("(whereas|whose)"),e=e.splitBefore("as (though|if)"),e=e.splitBefore("(til|until)");let n=e.match("#Verb .* [but] .* #Verb",0);n.found&&(e=e.splitBefore(n));let r=e.if("if .{2,9} then .").match("then");return e=e.splitBefore(r),typeof t=="number"&&(e=e.get(t)),e},u1e=c1e,d1e=function(t){let e=[],n=null;return t.clauses().docs.forEach(i=>{i.forEach(o=>{!o.chunk||o.chunk!==n?(n=o.chunk,e.push([o.index[0],o.index[1],o.index[1]+1])):e[e.length-1][2]=o.index[1]+1}),n=null}),t.update(e)},h1e=d1e,f1e=function(t){class e extends t{constructor(r,s,i){super(r,s,i),this.viewType="Chunks"}isVerb(){return this.filter(r=>r.has("<Verb>"))}isNoun(){return this.filter(r=>r.has("<Noun>"))}isAdjective(){return this.filter(r=>r.has("<Adjective>"))}isPivot(){return this.filter(r=>r.has("<Pivot>"))}debug(){return this.toView().debug("chunks"),this}update(r){let s=new e(this.document,r);return s._cache=this._cache,s}}t.prototype.chunks=function(n){let r=h1e(this);return r=r.getNth(n),new e(this.document,r.pointer)},t.prototype.clauses=u1e},m1e=f1e,QO={this:"Noun",then:"Pivot"},p1e=function(t){for(let e=0;e<t.length;e+=1)for(let n=0;n<t[e].length;n+=1){let r=t[e][n];if(QO.hasOwnProperty(r.normal)===!0){r.chunk=QO[r.normal];continue}if(r.tags.has("Verb")){r.chunk="Verb";continue}if(r.tags.has("Noun")||r.tags.has("Determiner")){r.chunk="Noun";continue}if(r.tags.has("Value")){r.chunk="Noun";continue}if(r.tags.has("QuestionWord")){r.chunk="Pivot";continue}}},g1e=p1e,y1e=function(t){for(let e=0;e<t.length;e+=1)for(let n=0;n<t[e].length;n+=1){let r=t[e][n];if(r.chunk)continue;let s=t[e][n+1],i=t[e][n-1];if(r.tags.has("Adjective")){if(i&&i.tags.has("Copula")){r.chunk="Adjective";continue}if(i&&i.tags.has("Determiner")){r.chunk="Noun";continue}if(s&&s.tags.has("Noun")){r.chunk="Noun";continue}continue}if(r.tags.has("Adverb")||r.tags.has("Negative")){if(i&&i.tags.has("Adjective")){r.chunk="Adjective";continue}if(i&&i.tags.has("Verb")){r.chunk="Verb";continue}if(s&&s.tags.has("Adjective")){r.chunk="Adjective";continue}if(s&&s.tags.has("Verb")){r.chunk="Verb";continue}}}},b1e=y1e,v1e=[{match:"[that] #Determiner #Noun",group:0,chunk:"Pivot"},{match:"#PastTense [that]",group:0,chunk:"Pivot"},{match:"[so] #Determiner",group:0,chunk:"Pivot"},{match:"#Copula #Adverb+? [#Adjective]",group:0,chunk:"Adjective"},{match:"#Adjective and #Adjective",chunk:"Adjective"},{match:"#Adverb+ and #Adverb #Verb",chunk:"Verb"},{match:"#Gerund #Adjective$",chunk:"Verb"},{match:"#Gerund to #Verb",chunk:"Verb"},{match:"#PresentTense and #PresentTense",chunk:"Verb"},{match:"#Adverb #Negative",chunk:"Verb"},{match:"(want|wants|wanted) to #Infinitive",chunk:"Verb"},{match:"#Verb #Reflexive",chunk:"Verb"},{match:"#Verb [to] #Adverb? #Infinitive",group:0,chunk:"Verb"},{match:"[#Preposition] #Gerund",group:0,chunk:"Verb"},{match:"#Infinitive [that] <Noun>",group:0,chunk:"Verb"},{match:"#Noun of #Determiner? #Noun",chunk:"Noun"},{match:"#Value+ #Adverb? #Adjective",chunk:"Noun"},{match:"the [#Adjective] #Noun",chunk:"Noun"},{match:"#Singular in #Determiner? #Singular",chunk:"Noun"},{match:"#Plural [in] #Determiner? #Noun",group:0,chunk:"Pivot"},{match:"#Noun and #Determiner? #Noun",notIf:"(#Possessive|#Pronoun)",chunk:"Noun"}];let bk=null;const x1e=function(t,e,n){const{methods:r}=n;bk=bk||r.one.buildNet(v1e,n),t.sweep(bk)},w1e=x1e,vk=function(t,e){if((typeof process>"u"||!process.env?self.env||{}:process.env).DEBUG_CHUNKS){let r=(t.normal+"'").padEnd(8);console.log(`  | '${r}    \x1B[34m${e.padEnd(12)}\x1B[0m \x1B[2m -fallback- \x1B[0m`)}t.chunk=e},E1e=function(t){for(let e=0;e<t.length;e+=1)for(let n=0;n<t[e].length;n+=1){let r=t[e][n];r.chunk===void 0&&(r.tags.has("Conjunction")||r.tags.has("Preposition")?vk(r,"Pivot"):r.tags.has("Adverb")?vk(r,"Verb"):r.chunk="Noun")}},k1e=E1e,N1e=function(t){let e=[],n=null;t.forEach(r=>{for(let s=0;s<r.length;s+=1){let i=r[s];n&&i.chunk===n?e[e.length-1].terms.push(i):(e.push({chunk:i.chunk,terms:[i]}),n=i.chunk)}}),e.forEach(r=>{r.chunk==="Verb"&&(r.terms.find(i=>i.tags.has("Verb"))||r.terms.forEach(i=>i.chunk=null))})},C1e=N1e,_1e=function(t){const{document:e,world:n}=t;g1e(e),b1e(e),w1e(t,e,n),k1e(e),C1e(e)},S1e={chunks:_1e},T1e={compute:S1e,api:m1e,hooks:["chunks"]},Mb=/\./g,$1e=function(t){class e extends t{constructor(r,s,i){super(r,s,i),this.viewType="Acronyms"}strip(){return this.docs.forEach(r=>{r.forEach(s=>{s.text=s.text.replace(Mb,""),s.normal=s.normal.replace(Mb,"")})}),this}addPeriods(){return this.docs.forEach(r=>{r.forEach(s=>{s.text=s.text.replace(Mb,""),s.normal=s.normal.replace(Mb,""),s.text=s.text.split("").join(".")+".",s.normal=s.normal.split("").join(".")+"."})}),this}}t.prototype.acronyms=function(n){let r=this.match("#Acronym");return r=r.getNth(n),new e(r.document,r.pointer)}},I1e=$1e,aj=/\(/,lj=/\)/,A1e=function(t,e){for(;e<t.length;e+=1)if(t[e].post&&lj.test(t[e].post)){let[,n]=t[e].index;return n=n||0,n}return null},R1e=function(t){let e=[];return t.docs.forEach(n=>{for(let r=0;r<n.length;r+=1){let s=n[r];if(s.pre&&aj.test(s.pre)){let i=A1e(n,r);if(i!==null){let[o,a]=n[r].index;e.push([o,a,i+1,n[r].id]),r=i}}}}),t.update(e)},P1e=function(t){return t.docs.forEach(e=>{e[0].pre=e[0].pre.replace(aj,"");let n=e[e.length-1];n.post=n.post.replace(lj,"")}),t},D1e=function(t){class e extends t{constructor(r,s,i){super(r,s,i),this.viewType="Possessives"}strip(){return P1e(this)}}t.prototype.parentheses=function(n){let r=R1e(this);return r=r.getNth(n),new e(r.document,r.pointer)}},O1e=D1e,eL=/'s$/,L1e=function(t){let e=t.match("#Possessive+");return e.has("#Person")&&(e=e.growLeft("#Person+")),e.has("#Place")&&(e=e.growLeft("#Place+")),e.has("#Organization")&&(e=e.growLeft("#Organization+")),e},M1e=function(t){class e extends t{constructor(r,s,i){super(r,s,i),this.viewType="Possessives"}strip(){return this.docs.forEach(r=>{r.forEach(s=>{s.text=s.text.replace(eL,""),s.normal=s.normal.replace(eL,"")})}),this}}t.prototype.possessives=function(n){let r=L1e(this);return r=r.getNth(n),new e(r.document,r.pointer)}},z1e=M1e,S1={'"':'"',"":"","'":"'","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","`":"","":""},a$=RegExp("["+Object.keys(S1).join("")+"]"),F1e=RegExp("["+Object.values(S1).join("")+"]"),B1e=function(t,e){const n=t[e].pre.match(a$)[0]||"";if(!n||!S1[n])return null;const r=S1[n];for(;e<t.length;e+=1)if(t[e].post&&t[e].post.match(r))return e;return null},V1e=function(t){let e=[];return t.docs.forEach(n=>{for(let r=0;r<n.length;r+=1){let s=n[r];if(s.pre&&a$.test(s.pre)){let i=B1e(n,r);if(i!==null){let[o,a]=n[r].index;e.push([o,a,i+1,n[r].id]),r=i}}}}),t.update(e)},j1e=function(t){t.docs.forEach(e=>{e[0].pre=e[0].pre.replace(a$,"");let n=e[e.length-1];n.post=n.post.replace(F1e,"")})},U1e=function(t){class e extends t{constructor(r,s,i){super(r,s,i),this.viewType="Possessives"}strip(){return j1e(this)}}t.prototype.quotations=function(n){let r=V1e(this);return r=r.getNth(n),new e(r.document,r.pointer)}},H1e=U1e,G1e=function(t){let e=this.splitAfter("@hasComma");return e=e.match("#PhoneNumber+"),e=e.getNth(t),e},W1e=[["hyphenated","@hasHyphen ."],["hashTags","#HashTag"],["emails","#Email"],["emoji","#Emoji"],["emoticons","#Emoticon"],["atMentions","#AtMention"],["urls","#Url"],["conjunctions","#Conjunction"],["prepositions","#Preposition"],["abbreviations","#Abbreviation"],["honorifics","#Honorific"]];let q1e=[["emojis","emoji"],["atmentions","atMentions"]];const K1e=function(t){W1e.forEach(e=>{t.prototype[e[0]]=function(n){let r=this.match(e[1]);return typeof n=="number"?r.get(n):r}}),t.prototype.phoneNumbers=G1e,q1e.forEach(e=>{t.prototype[e[0]]=t.prototype[e[1]]})},Z1e=K1e,X1e=/\//,Y1e=function(t){class e extends t{constructor(r,s,i){super(r,s,i),this.viewType="Slashes"}split(){return this.map(r=>{let i=r.text().split(X1e);return r=r.replaceWith(i.join(" ")),r.growRight("("+i.join("|")+")+")})}}t.prototype.slashes=function(n){let r=this.match("#SlashedTerm");return r=r.getNth(n),new e(r.document,r.pointer)}},J1e=Y1e,Q1e={api:function(t){I1e(t),O1e(t),z1e(t),H1e(t),Z1e(t),J1e(t)}},zb=function(t,e){t.docs.forEach(n=>{n.forEach(e)})},tL={case:t=>{zb(t,e=>{e.text=e.text.toLowerCase()})},unicode:t=>{const e=t.world,n=e.methods.one.killUnicode;zb(t,r=>r.text=n(r.text,e))},whitespace:t=>{zb(t,e=>{e.post=e.post.replace(/\s+/g," "),e.post=e.post.replace(/\s([.,?!:;])/g,"$1"),e.pre=e.pre.replace(/\s+/g,"")})},punctuation:t=>{zb(t,r=>{r.post=r.post.replace(/[-]/g," "),r.post=r.post.replace(/[,:;]/g,""),r.post=r.post.replace(/\.{2,}/g,""),r.post=r.post.replace(/\?{2,}/g,"?"),r.post=r.post.replace(/!{2,}/g,"!"),r.post=r.post.replace(/\?!+/g,"?")});let e=t.docs,n=e[e.length-1];if(n&&n.length>0){let r=n[n.length-1];r.post=r.post.replace(/ /g,"")}},contractions:t=>{t.contractions().expand()},acronyms:t=>{t.acronyms().strip()},parentheses:t=>{t.parentheses().strip()},possessives:t=>{t.possessives().strip()},quotations:t=>{t.quotations().strip()},emoji:t=>{t.emojis().remove()},honorifics:t=>{t.match("#Honorific+ #Person").honorifics().remove()},adverbs:t=>{t.adverbs().remove()},nouns:t=>{t.nouns().toSingular()},verbs:t=>{t.verbs().toInfinitive()},numbers:t=>{t.numbers().toNumber()},debullet:t=>{const e=/^\s*([-*])\s*$/;return t.docs.forEach(n=>{e.test(n[0].pre)&&(n[0].pre=n[0].pre.replace(e,""))}),t}},xk=t=>t.split("|").reduce((e,n)=>(e[n]=!0,e),{}),wk="unicode|punctuation|whitespace|acronyms",nL="|case|contractions|parentheses|quotations|emoji|honorifics|debullet",exe="|possessives|adverbs|nouns|verbs",txe={light:xk(wk),medium:xk(wk+nL),heavy:xk(wk+nL+exe)};function nxe(t){t.prototype.normalize=function(e="light"){return typeof e=="string"&&(e=txe[e]),Object.keys(e).forEach(n=>{tL.hasOwnProperty(n)&&tL[n](this,e[n])}),this}}const rxe={api:nxe},sxe=function(t){let e=t.clauses().match("<Noun>"),n=e.match("@hasComma");return n=n.not("#Place"),n.found&&(e=e.splitAfter(n)),e=e.splitOn("#Expression"),e=e.splitOn("(he|she|we|you|they|i)"),e=e.splitOn("(#Noun|#Adjective) [(he|him|she|it)]",0),e=e.splitOn("[(he|him|she|it)] (#Determiner|#Value)",0),e=e.splitBefore("#Noun [(the|a|an)] #Adjective? #Noun",0),e=e.splitOn("[(here|there)] #Noun",0),e=e.splitOn("[#Noun] (here|there)",0),e=e.splitBefore("(our|my|their|your)"),e=e.splitOn("#Noun [#Determiner]",0),e=e.if("#Noun"),e},ixe=sxe,rL=["after","although","as if","as long as","as","because","before","even if","even though","ever since","if","in order that","provided that","since","so that","than","that","though","unless","until","what","whatever","when","whenever","where","whereas","wherever","whether","which","whichever","who","whoever","whom","whomever","whose"],oxe=function(t){if(t.before("#Preposition$").found)return!0;if(!t.before().found)return!1;for(let n=0;n<rL.length;n+=1)if(t.has(rL[n]))return!0;return!1},axe=oxe,lxe="(#Pronoun|#Place|#Value|#Person|#Uncountable|#Month|#WeekDay|#Holiday|#Possessive)",cxe=function(t,e){if(t.has("#Plural")||t.has("#Noun and #Noun")||t.has("(we|they)"))return!0;if(e.has(lxe)===!0||t.has("#Singular"))return!1;let n=e.text("normal");return n.length>3&&n.endsWith("s")&&!n.endsWith("ss")},uxe=cxe,dxe=function(t){let e=t.clone();return e=e.match("#Noun+"),e=e.remove("(#Adjective|#Preposition|#Determiner|#Value)"),e=e.not("#Possessive"),e=e.first(),e.found?e:t},hxe=function(t){let e=dxe(t);return{determiner:t.match("#Determiner").eq(0),adjectives:t.match("#Adjective"),number:t.values(),isPlural:uxe(t,e),isSubordinate:axe(t),root:e}},tc=hxe,sL=t=>t.text(),fxe=t=>t.json({terms:!1,normal:!0}).map(e=>e.normal),mxe=function(t){let e=null;if(!t.found)return e;let n=t.values(0);return n.found?(n.parse()[0]||{}).num:e},pxe=function(t){let e=tc(t);return{root:sL(e.root),number:mxe(e.number),determiner:sL(e.determiner),adjectives:fxe(e.adjectives),isPlural:e.isPlural,isSubordinate:e.isSubordinate}},gxe=pxe,yxe=function(t){return!t.has("^(#Uncountable|#ProperNoun|#Place|#Pronoun|#Acronym)+$")},cj=yxe,bxe={tags:!0},vxe=function(t,e){if(e.isPlural===!0||(e.root.has("#Possessive")&&(e.root=e.root.possessives().strip()),!cj(e.root)))return t;const{methods:n,model:r}=t.world,{toPlural:s}=n.two.transform.noun;let i=e.root.text({keepPunct:!1}),o=s(i,r);t.match(e.root).replaceWith(o,bxe).tag("Plural","toPlural"),e.determiner.has("(a|an)")&&t.remove(e.determiner);let a=e.root.after("not? #Adverb+? [#Copula]",0);return a.found&&(a.has("is")?t.replace(a,"are"):a.has("was")&&t.replace(a,"were")),t},xxe=vxe,wxe={tags:!0},Exe=function(t,e){if(e.isPlural===!1)return t;const{methods:n,model:r}=t.world,{toSingular:s}=n.two.transform.noun;let i=e.root.text("normal"),o=s(i,r);return t.replace(e.root,o,wxe).tag("Singular","toPlural"),t},kxe=Exe,Nxe=function(t){class e extends t{constructor(r,s,i){super(r,s,i),this.viewType="Nouns"}parse(r){return this.getNth(r).map(tc)}json(r){let s=typeof r=="object"?r:{};return this.getNth(r).map(i=>{let o=i.toView().json(s)[0]||{};return s&&s.noun!==!1&&(o.noun=gxe(i)),o},[])}conjugate(r){const s=this.world.methods.two.transform.noun;return this.getNth(r).map(i=>{let o=tc(i),a=o.root.compute("root").text("root"),l={Singular:a};return cj(o.root)&&(l.Plural=s.toPlural(a,this.model)),l.Singular===l.Plural&&delete l.Plural,l},[])}isPlural(r){return this.filter(i=>tc(i).isPlural).getNth(r)}isSingular(r){return this.filter(i=>!tc(i).isPlural).getNth(r)}adjectives(r){let s=this.update([]);return this.forEach(i=>{let o=tc(i).adjectives;o.found&&(s=s.concat(o))}),s.getNth(r)}toPlural(r){return this.getNth(r).map(s=>xxe(s,tc(s)))}toSingular(r){return this.getNth(r).map(s=>{let i=tc(s);return kxe(s,i)})}update(r){let s=new e(this.document,r);return s._cache=this._cache,s}}t.prototype.nouns=function(n){let r=ixe(this);return r=r.getNth(n),new e(this.document,r.pointer)}},Cxe=Nxe,_xe={api:Cxe},Sxe=function(t,e){let n=t.match("#Fraction+");return n=n.filter(r=>!r.lookBehind("#Value and$").found),n=n.notIf("#Value seconds"),typeof e=="number"&&(n=n.eq(e)),n},Txe=Sxe,$xe=t=>{const e=[{reg:/^(minus|negative)[\s-]/i,mult:-1},{reg:/^(a\s)?half[\s-](of\s)?/i,mult:.5}];for(let n=0;n<e.length;n++)if(e[n].reg.test(t)===!0)return{amount:e[n].mult,str:t.replace(e[n].reg,"")};return{amount:1,str:t}},Ixe=$xe,fr={ones:{zeroth:0,first:1,second:2,third:3,fourth:4,fifth:5,sixth:6,seventh:7,eighth:8,ninth:9,zero:0,one:1,two:2,three:3,four:4,five:5,six:6,seven:7,eight:8,nine:9},teens:{tenth:10,eleventh:11,twelfth:12,thirteenth:13,fourteenth:14,fifteenth:15,sixteenth:16,seventeenth:17,eighteenth:18,nineteenth:19,ten:10,eleven:11,twelve:12,thirteen:13,fourteen:14,fifteen:15,sixteen:16,seventeen:17,eighteen:18,nineteen:19},tens:{twentieth:20,thirtieth:30,fortieth:40,fourtieth:40,fiftieth:50,sixtieth:60,seventieth:70,eightieth:80,ninetieth:90,twenty:20,thirty:30,forty:40,fourty:40,fifty:50,sixty:60,seventy:70,eighty:80,ninety:90},multiples:{hundredth:100,thousandth:1e3,millionth:1e6,billionth:1e9,trillionth:1e12,quadrillionth:1e15,quintillionth:1e18,sextillionth:1e21,septillionth:1e24,hundred:100,thousand:1e3,million:1e6,billion:1e9,trillion:1e12,quadrillion:1e15,quintillion:1e18,sextillion:1e21,septillion:1e24,grand:1e3}},Axe=(t,e)=>{if(fr.ones.hasOwnProperty(t)){if(e.ones||e.teens)return!1}else if(fr.teens.hasOwnProperty(t)){if(e.ones||e.teens||e.tens)return!1}else if(fr.tens.hasOwnProperty(t)&&(e.ones||e.teens||e.tens))return!1;return!0},Rxe=Axe,Pxe=function(t){let e="0.";for(let n=0;n<t.length;n++){let r=t[n];if(fr.ones.hasOwnProperty(r)===!0)e+=fr.ones[r];else if(fr.teens.hasOwnProperty(r)===!0)e+=fr.teens[r];else if(fr.tens.hasOwnProperty(r)===!0)e+=fr.tens[r];else if(/^[0-9]$/.test(r)===!0)e+=r;else return 0}return parseFloat(e)},Dxe=Pxe,Oxe=t=>(t=t.replace(/1st$/,"1"),t=t.replace(/2nd$/,"2"),t=t.replace(/3rd$/,"3"),t=t.replace(/([4567890])r?th$/,"$1"),t=t.replace(/^[$]/,""),t=t.replace(/[%$]$/,""),t=t.replace(/,/g,""),t=t.replace(/([0-9])([a-z\u00C0-\u00FF]{1,2})$/,"$1"),t),Lxe=Oxe,Mxe=/^([0-9,. ]+)\/([0-9,. ]+)$/,iL={"a few":3,"a couple":2,"a dozen":12,"two dozen":24,zero:0},Fb=t=>Object.keys(t).reduce((e,n)=>(e+=t[n],e),0),zxe=function(t){if(iL.hasOwnProperty(t)===!0)return iL[t];if(t==="a"||t==="an")return 1;const e=Ixe(t);t=e.str;let n=null,r={},s=0,i=!1;const o=t.split(/[ -]/);for(let a=0;a<o.length;a++){let l=o[a];if(l=Lxe(l),!l||l==="and")continue;if(l==="-"||l==="negative"){i=!0;continue}if(l.charAt(0)==="-"&&(i=!0,l=l.substring(1)),l==="point")return s+=Fb(r),s+=Dxe(o.slice(a+1,o.length)),s*=e.amount,s;const c=l.match(Mxe);if(c){const u=parseFloat(c[1].replace(/[, ]/g,"")),h=parseFloat(c[2].replace(/[, ]/g,""));h&&(s+=u/h||0);continue}if(fr.tens.hasOwnProperty(l)&&r.ones&&Object.keys(r).length===1&&(s=r.ones*100,r={}),Rxe(l,r)===!1)return null;if(/^[0-9.]+$/.test(l))r.ones=parseFloat(l);else if(fr.ones.hasOwnProperty(l)===!0)r.ones=fr.ones[l];else if(fr.teens.hasOwnProperty(l)===!0)r.teens=fr.teens[l];else if(fr.tens.hasOwnProperty(l)===!0)r.tens=fr.tens[l];else if(fr.multiples.hasOwnProperty(l)===!0){let u=fr.multiples[l];if(u===n)return null;if(u===100&&o[a+1]!==void 0){const h=o[a+1];fr.multiples[h]&&(u*=fr.multiples[h],a+=1)}n===null||u<n?(s+=(Fb(r)||1)*u,n=u,r={}):(s+=Fb(r),n=u,s=(s||1)*u,r={})}}return s+=Fb(r),s*=e.amount,s*=i?-1:1,s===0&&Object.keys(r).length===0?null:s},WC=zxe,oL=/s$/,yg=function(t){let e=t.text("reduced");return WC(e)};let T1={half:2,halve:2,quarter:4};const Fxe=function(t){let n=t.text("reduced").match(/^([-+]?[0-9]+)\/([-+]?[0-9]+)(st|nd|rd|th)?s?$/);return n&&n[1]&&n[0]?{numerator:Number(n[1]),denominator:Number(n[2])}:null},Bxe=function(t){let e=t.match("[<num>#Value+] out of every? [<den>#Value+]");if(e.found!==!0)return null;let{num:n,den:r}=e.groups();return!n||!r||(n=yg(n),r=yg(r),!n||!r)?null:typeof n=="number"&&typeof r=="number"?{numerator:n,denominator:r}:null},Vxe=function(t){let e=t.match("[<num>(#Cardinal|a)+] [<den>#Fraction+]");if(e.found!==!0)return null;let{num:n,den:r}=e.groups();n.has("a")?n=1:n=yg(n);let s=r.text("reduced");return oL.test(s)&&(s=s.replace(oL,""),r=r.replaceWith(s)),T1.hasOwnProperty(s)?r=T1[s]:r=yg(r),typeof n=="number"&&typeof r=="number"?{numerator:n,denominator:r}:null},jxe=function(t){let e=t.match("^#Ordinal$");return e.found!==!0?null:t.lookAhead("^of .")?{numerator:1,denominator:yg(e)}:null},Uxe=function(t){let e=t.text("reduced");return T1.hasOwnProperty(e)?{numerator:1,denominator:T1[e]}:null},Hxe=t=>{let e=Math.round(t*1e3)/1e3;return e===0&&t!==0?t:e},Gxe=function(t){t=t.clone();let e=Uxe(t)||Fxe(t)||Bxe(t)||Vxe(t)||jxe(t)||null;return e!==null&&e.numerator&&e.denominator&&(e.decimal=e.numerator/e.denominator,e.decimal=Hxe(e.decimal)),e},nl=Gxe,Wxe=function(t){if(t<1e6)return String(t);let e;return typeof t=="number"?e=t.toFixed(0):e=t,e.indexOf("e+")===-1?e:e.replace(".","").split("e+").reduce(function(n,r){return n+Array(r-n.length+2).join(0)})},l$=Wxe,Bb=[["ninety",90],["eighty",80],["seventy",70],["sixty",60],["fifty",50],["forty",40],["thirty",30],["twenty",20]],aL=["","one","two","three","four","five","six","seven","eight","nine","ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen","eighteen","nineteen"],qxe=[[1e24,"septillion"],[1e20,"hundred sextillion"],[1e21,"sextillion"],[1e20,"hundred quintillion"],[1e18,"quintillion"],[1e17,"hundred quadrillion"],[1e15,"quadrillion"],[1e14,"hundred trillion"],[1e12,"trillion"],[1e11,"hundred billion"],[1e9,"billion"],[1e8,"hundred million"],[1e6,"million"],[1e5,"hundred thousand"],[1e3,"thousand"],[100,"hundred"],[1,"one"]],Kxe=function(t){let e=t,n=[];return qxe.forEach(r=>{if(t>=r[0]){let s=Math.floor(e/r[0]);e-=s*r[0],s&&n.push({unit:r[1],count:s})}}),n},Zxe=function(t){let e=[];if(t>100)return e;for(let n=0;n<Bb.length;n++)t>=Bb[n][1]&&(t-=Bb[n][1],e.push(Bb[n][0]));return aL[t]&&e.push(aL[t]),e},Xxe=t=>{const e=["zero","one","two","three","four","five","six","seven","eight","nine"];let n=[],s=l$(t).match(/\.([0-9]+)/);if(!s||!s[0])return n;n.push("point");let i=s[0].split("");for(let o=0;o<i.length;o++)n.push(e[i[o]]);return n},Yxe=function(t){let e=t.num;if(e===0||e==="0")return"zero";e>1e21&&(e=l$(e));let n=[];e<0&&(n.push("minus"),e=Math.abs(e));let r=Kxe(e);for(let s=0;s<r.length;s++){let i=r[s].unit;i==="one"&&(i="",n.length>1&&n.push("and")),n=n.concat(Zxe(r[s].count)),n.push(i)}return n=n.concat(Xxe(e)),n=n.filter(s=>s),n.length===0&&(n[0]=""),n.join(" ")},bg=Yxe,Jxe=function(t){if(!t.numerator||!t.denominator)return"";let e=bg({num:t.numerator}),n=bg({num:t.denominator});return`${e} out of ${n}`},Qxe=Jxe,lL={one:"first",two:"second",three:"third",five:"fifth",eight:"eighth",nine:"ninth",twelve:"twelfth",twenty:"twentieth",thirty:"thirtieth",forty:"fortieth",fourty:"fourtieth",fifty:"fiftieth",sixty:"sixtieth",seventy:"seventieth",eighty:"eightieth",ninety:"ninetieth"},ewe=t=>{let e=bg(t).split(" "),n=e[e.length-1];return lL.hasOwnProperty(n)?e[e.length-1]=lL[n]:e[e.length-1]=n.replace(/y$/,"i")+"th",e.join(" ")},uj=ewe,twe=function(t){if(!t.numerator||!t.denominator)return"";let e=bg({num:t.numerator}),n=uj({num:t.denominator});return t.denominator===2&&(n="half"),e&&n?(t.numerator!==1&&(n+="s"),`${e} ${n}`):""},nwe=twe,rwe=function(t){class e extends t{constructor(r,s,i){super(r,s,i),this.viewType="Fractions"}parse(r){return this.getNth(r).map(nl)}get(r){return this.getNth(r).map(nl)}json(r){return this.getNth(r).map(s=>{let i=s.toView().json(r)[0],o=nl(s);return i.fraction=o,i},[])}toDecimal(r){return this.getNth(r).forEach(s=>{let{decimal:i}=nl(s);s=s.replaceWith(String(i),!0),s.tag("NumericValue"),s.unTag("Fraction")}),this}toFraction(r){return this.getNth(r).forEach(s=>{let i=nl(s);if(i&&typeof i.numerator=="number"&&typeof i.denominator=="number"){let o=`${i.numerator}/${i.denominator}`;this.replace(s,o)}}),this}toOrdinal(r){return this.getNth(r).forEach(s=>{let i=nl(s),o=nwe(i);s.after("^#Noun").found&&(o+=" of"),s.replaceWith(o)}),this}toCardinal(r){return this.getNth(r).forEach(s=>{let i=nl(s),o=Qxe(i);s.replaceWith(o)}),this}toPercentage(r){return this.getNth(r).forEach(s=>{let{decimal:i}=nl(s),o=i*100;o=Math.round(o*100)/100,s.replaceWith(`${o}%`)}),this}}t.prototype.fractions=function(n){let r=Txe(this);return r=r.getNth(n),new e(this.document,r.pointer)}},swe=rwe,iwe="one|two|three|four|five|six|seven|eight|nine",Xl="twenty|thirty|forty|fifty|sixty|seventy|eighty|ninety|fourty",owe="eleven|twelve|thirteen|fourteen|fifteen|sixteen|seventeen|eighteen|nineteen",awe=function(t){let e=t.match("#Value+");if(e.has("#NumericValue #NumericValue")&&(e.has("#Value @hasComma #Value")?e.splitAfter("@hasComma"):e.has("#NumericValue #Fraction")?e.splitAfter("#NumericValue #Fraction"):e=e.splitAfter("#NumericValue")),e.has("#Value #Value #Value")&&!e.has("#Multiple")&&e.has("("+Xl+") #Cardinal #Cardinal")&&(e=e.splitAfter("("+Xl+") #Cardinal")),e.has("#Value #Value")){e.has("#NumericValue #NumericValue")&&(e=e.splitOn("#Year")),e.has("("+Xl+") ("+owe+")")&&(e=e.splitAfter("("+Xl+")"));let n=e.match("#Cardinal #Cardinal");if(n.found&&!e.has("(point|decimal|#Fraction)")&&!n.has("#Cardinal (#Multiple|point|decimal)")){let r=e.has(`(${iwe}) (${Xl})`),s=n.has("("+Xl+") #Cardinal"),i=n.has("#Multiple #Value");!r&&!s&&!i&&n.terms().forEach(o=>{e=e.splitOn(o)})}e.match("#Ordinal #Ordinal").match("#TextValue").found&&!e.has("#Multiple")&&(e.has("("+Xl+") #Ordinal")||(e=e.splitAfter("#Ordinal"))),e=e.splitBefore("#Ordinal [#Cardinal]",0),e.has("#TextValue #NumericValue")&&!e.has("("+Xl+"|#Multiple)")&&(e=e.splitBefore("#TextValue #NumericValue"))}return e=e.splitAfter("#NumberRange"),e=e.splitBefore("#Year"),e},Ek=awe,lwe=function(t,e){t=t.replace(/,/g,"");let n=t.split(/([0-9.,]*)/),[r,s]=n,i=n.slice(2).join("");return s!==""&&e.length<2?(s=Number(s||t),typeof s!="number"&&(s=null),i=i||"",(i==="st"||i==="nd"||i==="rd"||i==="th")&&(i=""),{prefix:r||"",num:s,suffix:i}):null},cwe=function(t){if(typeof t=="string")return{num:WC(t)};let e=t.text("reduced"),n=t.growRight("#Unit").match("#Unit$").text("machine"),r=/[0-9],[0-9]/.test(t.text("text"));if(t.terms().length===1&&!t.has("#Multiple")){let a=lwe(e,t);if(a!==null)return a.hasComma=r,a.unit=n,a}let s=t.match("#Fraction{2,}$");s=s.found===!1?t.match("^#Fraction$"):s;let i=null;s.found&&(s.has("#Value and #Value #Fraction")&&(s=s.match("and #Value #Fraction")),i=nl(s),t=t.not(s),t=t.not("and$"),e=t.text("reduced"));let o=0;return e&&(o=WC(e)||0),i&&i.decimal&&(o+=i.decimal),{hasComma:r,prefix:"",num:o,suffix:"",isOrdinal:t.has("#Ordinal"),isText:t.has("#TextValue"),isFraction:t.has("#Fraction"),isMoney:t.has("#Money"),unit:n}},rs=cwe,uwe=function(t){let e=t.num;if(!e&&e!==0)return null;let n=e%100;if(n>10&&n<20)return String(e)+"th";const r={0:"th",1:"st",2:"nd",3:"rd"};let s=l$(e),i=s.slice(s.length-1,s.length);return r[i]?s+=r[i]:s+="th",s},dwe=uwe,cL={"":"cents",$:"dollars","":"pounds","":"yen","":"euros","":"coln","":"baht","":"kip","":"won","":"rupees","":"ruble","":"liras"},uL={"%":"percent","":"degrees"},hwe=function(t){let e={suffix:"",prefix:t.prefix};return cL.hasOwnProperty(t.prefix)&&(e.suffix+=" "+cL[t.prefix],e.prefix=""),uL.hasOwnProperty(t.suffix)&&(e.suffix+=" "+uL[t.suffix]),e.suffix&&t.num===1&&(e.suffix=e.suffix.replace(/s$/,"")),!e.suffix&&t.suffix&&(e.suffix+=" "+t.suffix),e},dL=hwe,fwe=function(t,e){if(e==="TextOrdinal"){let{prefix:r,suffix:s}=dL(t);return r+uj(t)+s}if(e==="Ordinal")return t.prefix+dwe(t)+t.suffix;if(e==="TextCardinal"){let{prefix:r,suffix:s}=dL(t);return r+bg(t)+s}let n=t.num;return t.hasComma&&(n=n.toLocaleString()),t.prefix+String(n)+t.suffix},xu=fwe,mwe=t=>Object.prototype.toString.call(t)==="[object Array]",pwe=function(t){if(typeof t=="string"||typeof t=="number"){let e={};return e[t]=!0,e}return mwe(t)?t.reduce((e,n)=>(e[n]=!0,e),{}):t||{}},gwe=function(t,e={}){return e=pwe(e),t.filter(n=>{let{unit:r}=rs(n);return!!(r&&e[r]===!0)})},ywe=gwe,bwe=function(t){class e extends t{constructor(r,s,i){super(r,s,i),this.viewType="Numbers"}parse(r){return this.getNth(r).map(rs)}get(r){return this.getNth(r).map(rs).map(s=>s.num)}json(r){let s=typeof r=="object"?r:{};return this.getNth(r).map(i=>{let o=i.toView().json(s)[0],a=rs(i);return o.number={prefix:a.prefix,num:a.num,suffix:a.suffix,hasComma:a.hasComma,unit:a.unit},o},[])}units(){return this.growRight("#Unit").match("#Unit$")}isUnit(r){return ywe(this,r)}isOrdinal(){return this.if("#Ordinal")}isCardinal(){return this.if("#Cardinal")}toNumber(){let r=this.map(s=>{if(!this.has("#TextValue"))return s;let i=rs(s);if(i.num===null)return s;let o=s.has("#Ordinal")?"Ordinal":"Cardinal",a=xu(i,o);return s.replaceWith(a,{tags:!0}),s.tag("NumericValue")});return new e(r.document,r.pointer)}toLocaleString(){return this.forEach(s=>{let i=rs(s);if(i.num===null)return;let o=i.num.toLocaleString();if(s.has("#Ordinal")){let l=xu(i,"Ordinal").match(/[a-z]+$/);l&&(o+=l[0]||"")}s.replaceWith(o,{tags:!0})}),this}toText(){let s=this.map(i=>{if(i.has("#TextValue"))return i;let o=rs(i);if(o.num===null)return i;let a=i.has("#Ordinal")?"TextOrdinal":"TextCardinal",l=xu(o,a);return i.replaceWith(l,{tags:!0}),i.tag("TextValue"),i});return new e(s.document,s.pointer)}toCardinal(){let s=this.map(i=>{if(!i.has("#Ordinal"))return i;let o=rs(i);if(o.num===null)return i;let a=i.has("#TextValue")?"TextCardinal":"Cardinal",l=xu(o,a);return i.replaceWith(l,{tags:!0}),i.tag("Cardinal"),i});return new e(s.document,s.pointer)}toOrdinal(){let s=this.map(i=>{if(i.has("#Ordinal"))return i;let o=rs(i);if(o.num===null)return i;let a=i.has("#TextValue")?"TextOrdinal":"Ordinal",l=xu(o,a);return i.replaceWith(l,{tags:!0}),i.tag("Ordinal"),i});return new e(s.document,s.pointer)}isEqual(r){return this.filter(s=>rs(s).num===r)}greaterThan(r){return this.filter(s=>rs(s).num>r)}lessThan(r){return this.filter(s=>rs(s).num<r)}between(r,s){return this.filter(i=>{let o=rs(i).num;return o>r&&o<s})}set(r){if(r===void 0)return this;typeof r=="string"&&(r=rs(r).num);let i=this.map(o=>{let a=rs(o);if(a.num=r,a.num===null)return o;let l=o.has("#Ordinal")?"Ordinal":"Cardinal";o.has("#TextValue")&&(l=o.has("#Ordinal")?"TextOrdinal":"TextCardinal");let c=xu(a,l);return a.hasComma&&l==="Cardinal"&&(c=Number(c).toLocaleString()),o=o.not("#Currency"),o.replaceWith(c,{tags:!0}),o});return new e(i.document,i.pointer)}add(r){if(!r)return this;typeof r=="string"&&(r=rs(r).num);let i=this.map(o=>{let a=rs(o);if(a.num===null)return o;a.num+=r;let l=o.has("#Ordinal")?"Ordinal":"Cardinal";a.isText&&(l=o.has("#Ordinal")?"TextOrdinal":"TextCardinal");let c=xu(a,l);return o.replaceWith(c,{tags:!0}),o});return new e(i.document,i.pointer)}subtract(r,s){return this.add(r*-1,s)}increment(r){return this.add(1,r)}decrement(r){return this.add(-1,r)}update(r){let s=new e(this.document,r);return s._cache=this._cache,s}}e.prototype.toNice=e.prototype.toLocaleString,e.prototype.isBetween=e.prototype.between,e.prototype.minus=e.prototype.subtract,e.prototype.plus=e.prototype.add,e.prototype.equals=e.prototype.isEqual,t.prototype.numbers=function(n){let r=Ek(this);return r=r.getNth(n),new e(this.document,r.pointer)},t.prototype.percentages=function(n){let r=Ek(this);return r=r.filter(s=>s.has("#Percent")||s.after("^percent")),r=r.getNth(n),new e(this.document,r.pointer)},t.prototype.money=function(n){let r=Ek(this);return r=r.filter(s=>s.has("#Money")||s.after("^#Currency")),r=r.getNth(n),new e(this.document,r.pointer)},t.prototype.values=t.prototype.numbers},vwe=bwe,xwe=function(t){swe(t),vwe(t)},wwe={api:xwe},Ewe={people:!0,emails:!0,phoneNumbers:!0,places:!0},kwe=function(t={}){return t=Object.assign({},Ewe,t),t.people!==!1&&this.people().replaceWith(""),t.emails!==!1&&this.emails().replaceWith(""),t.places!==!1&&this.places().replaceWith(""),t.phoneNumbers!==!1&&this.phoneNumbers().replaceWith(""),this},Nwe={api:function(t){t.prototype.redact=kwe}},Cwe=Nwe,_we=function(t){let e=t.clauses();return/\.\.$/.test(t.out("text"))||t.has("^#QuestionWord")&&t.has("@hasComma")?!1:!!(t.has("or not$")||t.has("^#QuestionWord")||t.has("^(do|does|did|is|was|can|could|will|would|may) #Noun")||t.has("^(have|must) you")||e.has("(do|does|is|was) #Noun+ #Adverb? (#Adjective|#Infinitive)$"))},Swe=function(t){const e=/\?/,{document:n}=t;return t.filter(r=>{let s=r.docs[0]||[],i=s[s.length-1];return!i||n[i.index[0]].length!==s.length?!1:e.test(i.post)?!0:_we(r)})},Twe=Swe,$we="(after|although|as|because|before|if|since|than|that|though|when|whenever|where|whereas|wherever|whether|while|why|unless|until|once)",Iwe="(that|which|whichever|who|whoever|whom|whose|whomever)",Awe=function(t){let e=t;return e.length===1||(e=e.if("#Verb"),e.length===1)||(e=e.ifNo($we),e=e.ifNo("^even (if|though)"),e=e.ifNo("^so that"),e=e.ifNo("^rather than"),e=e.ifNo("^provided that"),e.length===1)||(e=e.ifNo(Iwe),e.length===1)||(e=e.ifNo("(^despite|^during|^before|^through|^throughout)"),e.length===1)||(e=e.ifNo("^#Gerund"),e.length===1)?e:(e.length===0&&(e=t),e.eq(0))},Rwe=Awe,Pwe=function(t){let e=null;return t.has("#PastTense")?e="PastTense":t.has("#FutureTense")?e="FutureTense":t.has("#PresentTense")&&(e="PresentTense"),{tense:e}},Dwe=function(t){let e=t.clauses(),r=Rwe(e).chunks(),s=t.none(),i=t.none(),o=t.none();return r.forEach((a,l)=>{if(l===0&&!a.has("<Verb>")){s=a;return}if(!i.found&&a.has("<Verb>")){i=a;return}i.found&&(o=o.concat(a))}),i.found&&!s.found&&(s=i.before("<Noun>+").first()),{subj:s,verb:i,pred:o,grammar:Pwe(i)}},wu=Dwe,Owe=function(t){let e=t.verbs(),n=e.eq(0);if(n.has("#PastTense"))return t;if(n.toPastTense(),e.length>1){e=e.slice(1),e=e.filter(s=>!s.lookBehind("to$").found),e=e.if("#PresentTense"),e=e.notIf("#Gerund");let r=t.match("to #Verb+ #Conjunction #Verb").terms();e=e.not(r),e.found&&e.verbs().toPastTense()}return t},Lwe=Owe,Mwe=function(t){let e=t.verbs();return e.eq(0).toPresentTense(),e.length>1&&(e=e.slice(1),e=e.filter(r=>!r.lookBehind("to$").found),e=e.notIf("#Gerund"),e.found&&e.verbs().toPresentTense()),t},zwe=Mwe,Fwe=function(t){let e=t.verbs();if(e.eq(0).toFutureTense(),t=t.fullSentence(),e=t.verbs(),e.length>1){e=e.slice(1);let r=e.filter(s=>s.lookBehind("to$").found?!1:s.has("#Copula #Gerund")?!0:s.has("#Gerund")?!1:s.has("#Copula")?!0:!(s.has("#PresentTense")&&!s.has("#Infinitive")&&s.lookBefore("(he|she|it|that|which)$").found));r.found&&r.forEach(s=>{if(s.has("#Copula")){s.match("was").replaceWith("is"),s.match("is").replaceWith("will be");return}s.toInfinitive()})}return t},Bwe=Fwe,Vwe=function(t){return t.verbs().first().toNegative().compute("chunks"),t},jwe=function(t){return t.verbs().first().toPositive().compute("chunks"),t},Uwe=function(t){return t.verbs().toInfinitive(),t},Hwe=Uwe,Gwe=function(t){class e extends t{constructor(s,i,o){super(s,i,o),this.viewType="Sentences"}json(s={}){return this.map(i=>{let o=i.toView().json(s)[0]||{},{subj:a,verb:l,pred:c,grammar:u}=wu(i);return o.sentence={subject:a.text("normal"),verb:l.text("normal"),predicate:c.text("normal"),grammar:u},o},[])}toPastTense(s){return this.getNth(s).map(i=>(wu(i),Lwe(i)))}toPresentTense(s){return this.getNth(s).map(i=>(wu(i),zwe(i)))}toFutureTense(s){return this.getNth(s).map(i=>(wu(i),i=Bwe(i),i))}toInfinitive(s){return this.getNth(s).map(i=>(wu(i),Hwe(i)))}toNegative(s){return this.getNth(s).map(i=>(wu(i),Vwe(i)))}toPositive(s){return this.getNth(s).map(i=>(wu(i),jwe(i)))}isQuestion(s){return this.questions(s)}isExclamation(s){return this.filter(o=>o.lastTerm().has("@hasExclamation")).getNth(s)}isStatement(s){return this.filter(o=>!o.isExclamation().found&&!o.isQuestion().found).getNth(s)}update(s){let i=new e(this.document,s);return i._cache=this._cache,i}}e.prototype.toPresent=e.prototype.toPresentTense,e.prototype.toPast=e.prototype.toPastTense,e.prototype.toFuture=e.prototype.toFutureTense;const n={sentences:function(r){let s=this.map(i=>i.fullSentence());return s=s.getNth(r),new e(this.document,s.pointer)},questions:function(r){return Twe(this).getNth(r)}};Object.assign(t.prototype,n)},Wwe=Gwe,qwe={api:Wwe},Kwe=function(t){let e=t.splitAfter("@hasComma");e=e.match("#Honorific+? #Person+");let n=e.match("#Possessive").notIf("(his|her)");return e=e.splitAfter(n),e},Zwe=Kwe,Xwe=function(t){let e={};e.firstName=t.match("#FirstName+"),e.lastName=t.match("#LastName+"),e.honorific=t.match("#Honorific+");let n=e.lastName,r=e.firstName;return(!r.found||!n.found)&&!r.found&&!n.found&&t.has("^#Honorific .$")&&(e.lastName=t.match(".$")),e},hL=Xwe,Xi="male",Ds="female",fL={mr:Xi,mrs:Ds,miss:Ds,madam:Ds,king:Xi,queen:Ds,duke:Xi,duchess:Ds,baron:Xi,baroness:Ds,count:Xi,countess:Ds,prince:Xi,princess:Ds,sire:Xi,dame:Ds,lady:Ds,ayatullah:Xi,congressman:Xi,congresswoman:Ds,"first lady":Ds,mx:null},Ywe=function(t,e){let{firstName:n,honorific:r}=t;if(n.has("#FemaleName"))return Ds;if(n.has("#MaleName"))return Xi;if(r.found){let i=r.text("normal");if(i=i.replace(/\./g,""),fL.hasOwnProperty(i))return fL[i];if(/^her /.test(i))return Ds;if(/^his /.test(i))return Xi}let s=e.after();if(!s.has("#Person")&&s.has("#Pronoun")){let i=s.match("#Pronoun");if(i.has("(they|their)"))return null;let o=i.has("(he|his)"),a=i.has("(she|her|hers)");if(o&&!a)return Xi;if(a&&!o)return Ds}return null},Jwe=Ywe,Qwe=function(t){class e extends t{constructor(r,s,i){super(r,s,i),this.viewType="People"}parse(r){return this.getNth(r).map(hL)}json(r){let s=typeof r=="object"?r:{};return this.getNth(r).map(i=>{let o=i.toView().json(s)[0],a=hL(i);return o.person={firstName:a.firstName.text("normal"),lastName:a.lastName.text("normal"),honorific:a.honorific.text("normal"),presumed_gender:Jwe(a,i)},o},[])}presumedMale(){return this.filter(r=>r.has("(#MaleName|mr|mister|sr|jr|king|pope|prince|sir)"))}presumedFemale(){return this.filter(r=>r.has("(#FemaleName|mrs|miss|queen|princess|madam)"))}update(r){let s=new e(this.document,r);return s._cache=this._cache,s}}t.prototype.people=function(n){let r=Zwe(this);return r=r.getNth(n),new e(this.document,r.pointer)}},e2e=Qwe,t2e=function(t){let e=t.match("(#Place|#Address)+"),n=e.match("@hasComma");return n=n.filter(r=>r.has("(asia|africa|europe|america)$")?!0:!(r.has("(#City|#Region|#ProperNoun)$")&&r.after("^(#Country|#Region)").found)),e=e.splitAfter(n),e},n2e=t2e,r2e=function(t){t.prototype.places=function(e){let n=n2e(this);return n=n.getNth(e),new t(this.document,n.pointer)}},s2e=r2e,i2e=function(t){t.prototype.organizations=function(e){return this.match("#Organization+").getNth(e)}},o2e=i2e,a2e=function(t){let e=this.clauses(),n=e.people();return n=n.concat(e.places()),n=n.concat(e.organizations()),n=n.not("(someone|man|woman|mother|brother|sister|father)"),n=n.sort("seq"),n=n.getNth(t),n},l2e=function(t){t.prototype.topics=a2e},c2e=l2e,u2e=function(t){e2e(t),s2e(t),o2e(t),c2e(t)},d2e={api:u2e},h2e=function(t){let e=t.match("<Verb>");return e=e.not("#Conjunction"),e=e.not("#Preposition"),e=e.splitAfter("@hasComma"),e=e.splitAfter("[(do|did|am|was|is|will)] (is|was)",0),e=e.splitBefore("(#Verb && !#Copula) [being] #Verb",0),e=e.splitBefore("#Verb [to be] #Verb",0),e=e.splitAfter("[help] #PresentTense",0),e=e.splitBefore("(#PresentTense|#PastTense) [#Copula]$",0),e=e.splitBefore("(#PresentTense|#PastTense) [will be]$",0),e=e.splitBefore("(#PresentTense|#PastTense) [(had|has)]",0),e=e.not("#Reflexive$"),e=e.not("#Adjective"),e=e.splitAfter("[#PastTense] #PastTense",0),e=e.splitAfter("[#PastTense] #Auxiliary+ #PastTense",0),e=e.splitAfter("#Copula [#Gerund] #PastTense",0),e=e.if("#Verb"),e.has("(#Verb && !#Auxiliary) #Adverb+? #Copula")&&(e=e.splitBefore("#Copula")),e},f2e=h2e,m2e=function(t){let e=t;return t.wordCount()>1&&(e=t.not("(#Negative|#Auxiliary|#Modal|#Adverb|#Prefix)")),e.length>1&&!e.has("#Phrasal #Particle")&&(e=e.last()),e=e.not("(want|wants|wanted) to"),e.found||(e=t.not("#Negative")),e},p2e=m2e,g2e=function(t,e){let n={pre:t.none(),post:t.none()};if(!t.has("#Adverb"))return n;let r=t.splitOn(e);return r.length===3?{pre:r.eq(0).adverbs(),post:r.eq(2).adverbs()}:r.eq(0).isDoc(e)?(n.post=r.eq(1).adverbs(),n):(n.pre=r.eq(0).adverbs(),n)},y2e=g2e,b2e=function(t,e){let n=t.splitBefore(e);if(n.length<=1)return t.none();let r=n.eq(0);return r=r.not("(#Adverb|#Negative|#Prefix)"),r},v2e=function(t){return t.match("#Negative")},x2e=function(t){if(!t.has("(#Particle|#PhrasalVerb)"))return{verb:t.none(),particle:t.none()};let e=t.match("#Particle$");return{verb:t.not(e),particle:e}},w2e=function(t){let e=t.clone();e.contractions().expand();const n=p2e(e);return{root:n,prefix:e.match("#Prefix"),adverbs:y2e(e,n),auxiliary:b2e(e,n),negative:v2e(e),phrasal:x2e(n)}},Ro=w2e,$o={tense:"PresentTense"},Vb={conditional:!0},tl={tense:"FutureTense"},ih={progressive:!0},Vr={tense:"PastTense"},oh={complete:!0,progressive:!1},Yl={passive:!0},E2e={plural:!0},k2e={plural:!1},N2e=function(t){let e={};return t.forEach(n=>{Object.assign(e,n)}),e},mL={imperative:[["#Imperative",[]]],"want-infinitive":[["^(want|wants|wanted) to #Infinitive$",[$o]],["^wanted to #Infinitive$",[Vr]],["^will want to #Infinitive$",[tl]]],"gerund-phrase":[["^#PastTense #Gerund$",[Vr]],["^#PresentTense #Gerund$",[$o]],["^#Infinitive #Gerund$",[$o]],["^will #Infinitive #Gerund$",[tl]],["^have #PastTense #Gerund$",[Vr]],["^will have #PastTense #Gerund$",[Vr]]],"simple-present":[["^#PresentTense$",[$o]],["^#Infinitive$",[$o]]],"simple-past":[["^#PastTense$",[Vr]]],"simple-future":[["^will #Adverb? #Infinitive",[tl]]],"present-progressive":[["^(is|are|am) #Gerund$",[$o,ih]]],"past-progressive":[["^(was|were) #Gerund$",[Vr,ih]]],"future-progressive":[["^will be #Gerund$",[tl,ih]]],"present-perfect":[["^(has|have) #PastTense$",[Vr,oh]]],"past-perfect":[["^had #PastTense$",[Vr,oh]],["^had #PastTense to #Infinitive",[Vr,oh]]],"future-perfect":[["^will have #PastTense$",[tl,oh]]],"present-perfect-progressive":[["^(has|have) been #Gerund$",[Vr,ih]]],"past-perfect-progressive":[["^had been #Gerund$",[Vr,ih]]],"future-perfect-progressive":[["^will have been #Gerund$",[tl,ih]]],"passive-past":[["(got|were|was) #Passive",[Vr,Yl]],["^(was|were) being #Passive",[Vr,Yl]],["^(had|have) been #Passive",[Vr,Yl]]],"passive-present":[["^(is|are|am) #Passive",[$o,Yl]],["^(is|are|am) being #Passive",[$o,Yl]],["^has been #Passive",[$o,Yl]]],"passive-future":[["will have been #Passive",[tl,Yl,Vb]],["will be being? #Passive",[tl,Yl,Vb]]],"present-conditional":[["would be #PastTense",[$o,Vb]]],"past-conditional":[["would have been #PastTense",[Vr,Vb]]],"auxiliary-future":[["(is|are|am|was) going to (#Infinitive|#PresentTense)",[tl]]],"auxiliary-past":[["^did #Infinitive$",[Vr,k2e]],["^used to #Infinitive$",[Vr,oh]]],"auxiliary-present":[["^(does|do) #Infinitive$",[$o,oh,E2e]]],"modal-past":[["^(could|must|should|shall) have #PastTense$",[Vr]]],"modal-infinitive":[["^#Modal #Infinitive$",[]]],infinitive:[["^#Infinitive$",[]]]};let dj=[];Object.keys(mL).map(t=>{mL[t].forEach(e=>{dj.push({name:t,match:e[0],data:N2e(e[1])})})});const pL=dj,C2e=function(t,e){return t=t.clone(),e.adverbs.post&&e.adverbs.post.found&&t.remove(e.adverbs.post),e.adverbs.pre&&e.adverbs.pre.found&&t.remove(e.adverbs.pre),t.has("#Negative")&&(t=t.remove("#Negative")),t.has("#Prefix")&&(t=t.remove("#Prefix")),e.root.has("#PhrasalVerb #Particle")&&t.remove("#Particle$"),t=t.not("#Adverb"),t},_2e=function(t){return!!(t.has("#Infinitive")&&t.growLeft("to").has("^to #Infinitive"))},S2e=function(t,e){let n={};t=C2e(t,e);for(let r=0;r<pL.length;r+=1){let s=pL[r];if(t.has(s.match)===!0){n.form=s.name,Object.assign(n,s.data);break}}return n.form||t.has("^#Verb$")&&(n.form="infinitive"),n.tense||(n.tense=e.root.has("#PastTense")?"PastTense":"PresentTense"),n.copula=e.root.has("#Copula"),n.isInfinitive=_2e(t),n},rl=S2e,gL=function(t){return t.length<=1?!1:(t.parse()[0]||{}).isSubordinate},T2e=function(t){let e=t.clauses();return e=e.filter((n,r)=>!(n.has("^(if|unless|while|but|for|per|at|by|that|which|who|from)")||r>0&&n.has("^#Verb . #Noun+$")||r>0&&n.has("^#Adverb"))),e.length===0?t:e},$2e=function(t){let e=t.before();e=T2e(e);let n=e.nouns(),r=n.last(),s=r.match("(i|he|she|we|you|they)");if(s.found)return s.nouns();let i=n.if("^(that|this|those)");return i.found||n.found===!1&&(i=e.match("^(that|this|those)"),i.found)?i:(r=n.last(),gL(r)&&(n.remove(r),r=n.last()),gL(r)&&(n.remove(r),r=n.last()),r)},I2e=function(t,e){return e.has("(are|were|does)")||t.has("(those|they|we)")?!0:t.found&&t.isPlural?t.isPlural().found:!1},A2e=function(t){let e=$2e(t);return{subject:e,plural:I2e(e,t)}},_a=A2e,kn=t=>t,Op=(t,e)=>{let n=_a(t),r=n.subject;return r.has("i")||r.has("we")?!0:n.plural},R2e=(t,e)=>{let{subject:n,plural:r}=_a(t);return r||n.has("we")?"were":"was"},Lp=function(t,e){if(t.has("were"))return"are";let{subject:n,plural:r}=_a(t);return n.has("i")?"am":n.has("we")||r?"are":"is"},c$=function(t,e){let n=_a(t),r=n.subject;return r.has("i")||r.has("we")||n.plural?"do":"does"},Di=function(t){if(t.has("#Infinitive"))return"Infinitive";if(t.has("#Participle"))return"Participle";if(t.has("#PastTense"))return"PastTense";if(t.has("#Gerund"))return"Gerund";if(t.has("#PresentTense"))return"PresentTense"},qC=function(t,e){const{toInfinitive:n}=t.methods.two.transform.verb;let r=e.root.text({keepPunct:!1});return r=n(r,t.model,Di(t)),r&&t.replace(e.root,r),t},yL=t=>t.has("will not")?t.replace("will not","have not"):t.remove("will"),bL=function(t){if(!t||!t.isView)return[];const e={normal:!0,terms:!1,text:!1};return t.json(e).map(n=>n.normal)},vL=function(t){return!t||!t.isView?"":t.text("normal")},P2e=function(t){const{toInfinitive:e}=t.methods.two.transform.verb;let n=t.text("normal");return e(n,t.model,Di(t))},D2e=function(t){let e=Ro(t);t=t.clone().toView();const n=rl(t,e);return{root:e.root.text(),preAdverbs:bL(e.adverbs.pre),postAdverbs:bL(e.adverbs.post),auxiliary:vL(e.auxiliary),negative:e.negative.found,prefix:vL(e.prefix),infinitive:P2e(e.root),grammar:n}},O2e=D2e,L2e={tags:!0},M2e=function(t,e){const{toInfinitive:n}=t.methods.two.transform.verb,{root:r,auxiliary:s}=e;let i=s.terms().harden(),o=r.text("normal");if(o=n(o,t.model,Di(r)),o&&t.replace(r,o,L2e).tag("Verb").firstTerm().tag("Infinitive"),i.found&&t.remove(i),e.negative.found){t.has("not")||t.prepend("not");let a=c$(t);t.prepend(a)}return t.fullSentence().compute(["freeze","lexicon","preTagger","postTagger","unfreeze","chunks"]),t},z2e=M2e,Ki={tags:!0},il={noAux:(t,e)=>(e.auxiliary.found&&(t=t.remove(e.auxiliary)),t),simple:(t,e)=>{const{conjugate:n,toInfinitive:r}=t.methods.two.transform.verb,s=e.root;if(s.has("#Modal"))return t;let i=s.text({keepPunct:!1});return i=r(i,t.model,Di(s)),i=n(i,t.model).PastTense,i=i==="been"?"was":i,i==="was"&&(i=R2e(t)),i&&t.replace(s,i,Ki),t},both:function(t,e){return e.negative.found?(t.replace("will","did"),t):(t=il.simple(t,e),t=il.noAux(t,e),t)},hasHad:t=>(t.replace("has","had",Ki),t),hasParticiple:(t,e)=>{const{conjugate:n,toInfinitive:r}=t.methods.two.transform.verb,s=e.root;let i=s.text("normal");return i=r(i,t.model,Di(s)),n(i,t.model).Participle}},xL={infinitive:il.simple,"simple-present":il.simple,"simple-past":kn,"simple-future":il.both,"present-progressive":t=>(t.replace("are","were",Ki),t.replace("(is|are|am)","was",Ki),t),"past-progressive":kn,"future-progressive":(t,e)=>(t.match(e.root).insertBefore("was"),t.remove("(will|be)"),t),"present-perfect":il.hasHad,"past-perfect":kn,"future-perfect":(t,e)=>(t.match(e.root).insertBefore("had"),t.has("will")&&(t=yL(t)),t.remove("have"),t),"present-perfect-progressive":il.hasHad,"past-perfect-progressive":kn,"future-perfect-progressive":t=>(t.remove("will"),t.replace("have","had",Ki),t),"passive-past":t=>(t.replace("have","had",Ki),t),"passive-present":t=>(t.replace("(is|are)","was",Ki),t),"passive-future":(t,e)=>(e.auxiliary.has("will be")&&(t.match(e.root).insertBefore("had been"),t.remove("(will|be)")),e.auxiliary.has("will have been")&&(t.replace("have","had",Ki),t.remove("will")),t),"present-conditional":t=>(t.replace("be","have been"),t),"past-conditional":kn,"auxiliary-future":t=>(t.replace("(is|are|am)","was",Ki),t),"auxiliary-past":kn,"auxiliary-present":t=>(t.replace("(do|does)","did",Ki),t),"modal-infinitive":(t,e)=>(t.has("can")?t.replace("can","could",Ki):(il.simple(t,e),t.match("#Modal").insertAfter("have").tag("Auxiliary")),t),"modal-past":kn,"want-infinitive":t=>(t.replace("(want|wants)","wanted",Ki),t.remove("will"),t),"gerund-phrase":(t,e)=>(e.root=e.root.not("#Gerund$"),il.simple(t,e),yL(t),t)},F2e=function(t,e,n){return xL.hasOwnProperty(n)&&(t=xL[n](t,e),t.fullSentence().compute(["tagger","chunks"])),t},B2e=F2e,KC=function(t,e){let n=_a(t),r=n.subject;return r.has("(i|we|you)")?"have":n.plural===!1||r.has("he")||r.has("she")||r.has("#Person")?"has":"have"},ZC=(t,e)=>{const{conjugate:n,toInfinitive:r}=t.methods.two.transform.verb,{root:s,auxiliary:i}=e;if(s.has("#Modal"))return t;let o=s.text({keepPunct:!1});o=r(o,t.model,Di(s));let a=n(o,t.model);if(o=a.Participle||a.PastTense,o){t=t.replace(s,o);let l=KC(t);t.prepend(l).match(l).tag("Auxiliary"),t.remove(i)}return t},wL={infinitive:ZC,"simple-present":ZC,"simple-future":(t,e)=>t.replace("will",KC(t)),"present-perfect":kn,"past-perfect":kn,"future-perfect":(t,e)=>t.replace("will have",KC(t)),"present-perfect-progressive":kn,"past-perfect-progressive":kn,"future-perfect-progressive":kn},V2e=function(t,e,n){return wL.hasOwnProperty(n)?(t=wL[n](t,e),t.fullSentence().compute(["tagger","chunks"]),t):(t=ZC(t,e),t.fullSentence().compute(["tagger","chunks"]),t)},j2e=V2e,ol={tags:!0},ah=(t,e)=>{const{conjugate:n,toInfinitive:r}=t.methods.two.transform.verb,s=e.root;let i=s.text("normal");return i=r(i,t.model,Di(s)),Op(t)===!1&&(i=n(i,t.model).PresentTense),s.has("#Copula")&&(i=Lp(t)),i&&(t=t.replace(s,i,ol),t.not("#Particle").tag("PresentTense")),t},EL=(t,e)=>{const{conjugate:n,toInfinitive:r}=t.methods.two.transform.verb,s=e.root;let i=s.text("normal");return i=r(i,t.model,Di(s)),Op(t)===!1&&(i=n(i,t.model).Gerund),i&&(t=t.replace(s,i,ol),t.not("#Particle").tag("Gerund")),t},U2e=(t,e)=>{const{toInfinitive:n}=t.methods.two.transform.verb,r=e.root;let s=e.root.text("normal");return s=n(s,t.model,Di(r)),s&&(t=t.replace(e.root,s,ol)),t},kL={infinitive:ah,"simple-present":(t,e)=>{const{conjugate:n}=t.methods.two.transform.verb;let{root:r}=e;if(r.has("#Infinitive")){let i=_a(t).subject;if(Op(t)||i.has("i"))return t;let o=r.text("normal"),a=n(o,t.model).PresentTense;o!==a&&t.replace(r,a,ol)}else return ah(t,e);return t},"simple-past":ah,"simple-future":(t,e)=>{const{root:n,auxiliary:r}=e;if(r.has("will")&&n.has("be")){let s=Lp(t);t.replace(n,s),t=t.remove("will"),t.replace("not "+s,s+" not")}else ah(t,e),t=t.remove("will");return t},"present-progressive":kn,"past-progressive":(t,e)=>{let n=Lp(t);return t.replace("(were|was)",n,ol)},"future-progressive":t=>(t.match("will").insertBefore("is"),t.remove("be"),t.remove("will")),"present-perfect":(t,e)=>(ah(t,e),t=t.remove("(have|had|has)"),t),"past-perfect":(t,e)=>{let r=_a(t).subject;return Op(t)||r.has("i")?(t=qC(t,e),t.remove("had"),t):(t.replace("had","has",ol),t)},"future-perfect":t=>(t.match("will").insertBefore("has"),t.remove("have").remove("will")),"present-perfect-progressive":kn,"past-perfect-progressive":t=>t.replace("had","has",ol),"future-perfect-progressive":t=>(t.match("will").insertBefore("has"),t.remove("have").remove("will")),"passive-past":(t,e)=>{let n=Lp(t);return t.has("(had|have|has)")&&t.has("been")?(t.replace("(had|have|has)",n,ol),t.replace("been","being"),t):t.replace("(got|was|were)",n)},"passive-present":kn,"passive-future":t=>(t.replace("will","is"),t.replace("be","being")),"present-conditional":kn,"past-conditional":t=>(t.replace("been","be"),t.remove("have")),"auxiliary-future":(t,e)=>(EL(t,e),t.remove("(going|to)"),t),"auxiliary-past":(t,e)=>{if(e.auxiliary.has("did")){let n=c$(t);return t.replace(e.auxiliary,n),t}return EL(t,e),t.replace(e.auxiliary,"is"),t},"auxiliary-present":kn,"modal-infinitive":kn,"modal-past":(t,e)=>(U2e(t,e),t.remove("have")),"gerund-phrase":(t,e)=>(e.root=e.root.not("#Gerund$"),ah(t,e),t.remove("(will|have)")),"want-infinitive":(t,e)=>{let n="wants";return Op(t)&&(n="want"),t.replace("(want|wanted|wants)",n,ol),t.remove("will"),t}},H2e=function(t,e,n){return kL.hasOwnProperty(n)&&(t=kL[n](t,e),t.fullSentence().compute(["tagger","chunks"])),t},G2e=H2e,hj={tags:!0},jb=(t,e)=>{const{toInfinitive:n}=t.methods.two.transform.verb,{root:r,auxiliary:s}=e;if(r.has("#Modal"))return t;let i=r.text("normal");return i=n(i,t.model,Di(r)),i&&(t=t.replace(r,i,hj),t.not("#Particle").tag("Verb")),t.prepend("will").match("will").tag("Auxiliary"),t.remove(s),t},NL=(t,e)=>{const{conjugate:n,toInfinitive:r}=t.methods.two.transform.verb,{root:s,auxiliary:i}=e;let o=s.text("normal");return o=r(o,t.model,Di(s)),o&&(o=n(o,t.model).Gerund,t.replace(s,o,hj),t.not("#Particle").tag("PresentTense")),t.remove(i),t.prepend("will be").match("will be").tag("Auxiliary"),t},CL={infinitive:jb,"simple-present":jb,"simple-past":jb,"simple-future":kn,"present-progressive":NL,"past-progressive":NL,"future-progressive":kn,"present-perfect":t=>(t.match("(have|has)").replaceWith("will have"),t),"past-perfect":t=>t.replace("(had|has)","will have"),"future-perfect":kn,"present-perfect-progressive":t=>t.replace("has","will have"),"past-perfect-progressive":t=>t.replace("had","will have"),"future-perfect-progressive":kn,"passive-past":t=>t.has("got")?t.replace("got","will get"):t.has("(was|were)")?(t.replace("(was|were)","will be"),t.remove("being")):t.has("(have|has|had) been")?t.replace("(have|has|had) been","will be"):t,"passive-present":t=>(t.replace("being","will be"),t.remove("(is|are|am)"),t),"passive-future":kn,"present-conditional":t=>t.replace("would","will"),"past-conditional":t=>t.replace("would","will"),"auxiliary-future":kn,"auxiliary-past":t=>t.has("used")&&t.has("to")?(t.replace("used","will"),t.remove("to")):(t.replace("did","will"),t),"auxiliary-present":t=>t.replace("(do|does)","will"),"modal-infinitive":kn,"modal-past":kn,"gerund-phrase":(t,e)=>(e.root=e.root.not("#Gerund$"),jb(t,e),t.remove("(had|have)")),"want-infinitive":t=>(t.replace("(want|wants|wanted)","will want"),t)},W2e=function(t,e,n){return t.has("will")||t.has("going to")||CL.hasOwnProperty(n)&&(t=CL[n](t,e),t.fullSentence().compute(["tagger","chunks"])),t},q2e=W2e,K2e={tags:!0},Z2e=function(t,e){const{toInfinitive:n,conjugate:r}=t.methods.two.transform.verb,{root:s,auxiliary:i}=e;if(t.has("#Gerund"))return t;let o=s.text("normal");o=n(o,t.model,Di(s));let a=r(o,t.model).Gerund;if(a){let l=Lp(t);t.replace(s,a,K2e),t.remove(i),t.prepend(l)}return t.replace("not is","is not"),t.replace("not are","are not"),t.fullSentence().compute(["tagger","chunks"]),t},X2e=Z2e,_L={tags:!0},kk=function(t,e){let n=c$(t);return t.prepend(n+" not"),t},_v=function(t){let e=t.match("be");return e.found?(e.prepend("not"),t):(e=t.match("(is|was|am|are|will|were)"),e.found&&e.append("not"),t)},Sv=t=>t.has("(is|was|am|are|will|were|be)"),SL={"simple-present":(t,e)=>Sv(t)===!0?_v(t):(t=qC(t,e),t=kk(t),t),"simple-past":(t,e)=>Sv(t)===!0?_v(t):(t=qC(t,e),t.prepend("did not"),t),imperative:t=>(t.prepend("do not"),t),infinitive:(t,e)=>Sv(t)===!0?_v(t):kk(t),"passive-past":t=>{if(t.has("got"))return t.replace("got","get",_L),t.prepend("did not"),t;let e=t.match("(was|were|had|have)");return e.found&&e.append("not"),t},"auxiliary-past":t=>{if(t.has("used"))return t.prepend("did not"),t;let e=t.match("(did|does|do)");return e.found&&e.append("not"),t},"want-infinitive":(t,e)=>(t=kk(t),t=t.replace("wants","want",_L),t)},Y2e=function(t,e,n){if(t.has("#Negative"))return t;if(SL.hasOwnProperty(n))return t=SL[n](t,e),t;let r=t.matchOne("be");return r.found?(r.prepend("not"),t):Sv(t)===!0?_v(t):(r=t.matchOne("(will|had|have|has|did|does|do|#Modal)"),r.found&&r.append("not"),t)},J2e=Y2e,Q2e=function(t){class e extends t{constructor(r,s,i){super(r,s,i),this.viewType="Verbs"}parse(r){return this.getNth(r).map(Ro)}json(r,s){return this.getNth(s).map(a=>{let l=a.toView().json(r)[0]||{};return l.verb=O2e(a),l},[])}subjects(r){return this.getNth(r).map(s=>(Ro(s),_a(s).subject))}adverbs(r){return this.getNth(r).map(s=>s.match("#Adverb"))}isSingular(r){return this.getNth(r).filter(s=>_a(s).plural!==!0)}isPlural(r){return this.getNth(r).filter(s=>_a(s).plural===!0)}isImperative(r){return this.getNth(r).filter(s=>s.has("#Imperative"))}toInfinitive(r){return this.getNth(r).map(s=>{let i=Ro(s),o=rl(s,i);return z2e(s,i,o.form)})}toPresentTense(r){return this.getNth(r).map(s=>{let i=Ro(s),o=rl(s,i);return o.isInfinitive?s:G2e(s,i,o.form)})}toPastTense(r){return this.getNth(r).map(s=>{let i=Ro(s),o=rl(s,i);return o.isInfinitive?s:B2e(s,i,o.form)})}toFutureTense(r){return this.getNth(r).map(s=>{let i=Ro(s),o=rl(s,i);return o.isInfinitive?s:q2e(s,i,o.form)})}toGerund(r){return this.getNth(r).map(s=>{let i=Ro(s),o=rl(s,i);return o.isInfinitive?s:X2e(s,i,o.form)})}toPastParticiple(r){return this.getNth(r).map(s=>{let i=Ro(s),o=rl(s,i);return o.isInfinitive?s:j2e(s,i,o.form)})}conjugate(r){const{conjugate:s,toInfinitive:i}=this.world.methods.two.transform.verb;return this.getNth(r).map(o=>{let a=Ro(o),l=rl(o,a);l.form==="imperative"&&(l.form="simple-present");let c=a.root.text("normal");if(!a.root.has("#Infinitive")){let u=Di(a.root);c=i(c,o.model,u)||c}return s(c,o.model)},[])}isNegative(){return this.if("#Negative")}isPositive(){return this.ifNo("#Negative")}toPositive(){let r=this.match("do not #Verb");return r.found&&r.remove("do not"),this.remove("#Negative")}toNegative(r){return this.getNth(r).map(s=>{let i=Ro(s),o=rl(s,i);return J2e(s,i,o.form)})}update(r){let s=new e(this.document,r);return s._cache=this._cache,s}}e.prototype.toPast=e.prototype.toPastTense,e.prototype.toPresent=e.prototype.toPresentTense,e.prototype.toFuture=e.prototype.toFutureTense,t.prototype.verbs=function(n){let r=f2e(this);return r=r.getNth(n),new e(this.document,r.pointer)}},eEe=Q2e,tEe={api:eEe},XC=function(t,e){let n=e.match(t);if(n.found){let r=n.pronouns().refersTo();if(r.found)return r}return e.none()},TL=function(t){if(!t.found)return t;let[e]=t.fullPointer[0];return e&&e>0?t.update([[e-1]]):t.none()},nEe=function(t,e){return e==="m"?t.filter(n=>!n.presumedFemale().found):e==="f"?t.filter(n=>!n.presumedMale().found):t},rEe=function(t,e){let n=t.people();return n=nEe(n,e),n.found||(n=t.nouns("#Actor"),n.found)?n.last():e==="f"?XC("(she|her|hers)",t):e==="m"?XC("(he|him|his)",t):t.none()},$L=rEe,sEe=function(t){let e=t.nouns(),n=e.isPlural().notIf("#Pronoun");if(n.found)return n.last();let r=XC("(they|their|theirs)",t);return r.found?r:(n=e.match("(somebody|nobody|everybody|anybody|someone|noone|everyone|anyone)"),n.found?n.last():t.none())},iEe=sEe,oEe=function(t,e){if(e&&e.found){let n=t.docs[0][0];n.reference=e.ptrs[0]}},Nk=function(t,e){let n=t.before(),r=e(n);return r.found||(n=TL(t),r=e(n),r.found)||(n=TL(n),r=e(n),r.found)?r:t.none()},aEe=function(t){t.pronouns().if("(he|him|his|she|her|hers|they|their|theirs|it|its)").forEach(n=>{let r=null;n.has("(he|him|his)")?r=Nk(n,s=>$L(s,"m")):n.has("(she|her|hers)")?r=Nk(n,s=>$L(s,"f")):n.has("(they|their|theirs)")&&(r=Nk(n,iEe)),r&&r.found&&oEe(n,r)})},lEe=aEe,cEe=function(t){class e extends t{constructor(r,s,i){super(r,s,i),this.viewType="Pronouns"}hasReference(){return this.compute("coreference"),this.filter(r=>r.docs[0][0].reference)}refersTo(){return this.compute("coreference"),this.map(r=>{if(!r.found)return r.none();let s=r.docs[0][0];return s.reference?r.update([s.reference]):r.none()})}update(r){let s=new e(this.document,r);return s._cache=this._cache,s}}t.prototype.pronouns=function(n){let r=this.match("#Pronoun");return r=r.getNth(n),new e(r.document,r.pointer)}},uEe=cEe,dEe={compute:{coreference:lEe},api:uEe};Xt.plugin(n1e);Xt.plugin(i1e);Xt.plugin(T1e);Xt.plugin(dEe);Xt.plugin(Q1e);Xt.plugin(rxe);Xt.plugin(_xe);Xt.plugin(wwe);Xt.plugin(Cwe);Xt.plugin(qwe);Xt.plugin(d2e);Xt.plugin(tEe);const fj=[{name:"",keywords:["","","","","",""," ","",""," "," "," "," "," ",""]},{name:"",keywords:["","","","","",""," ","",""," "," "," "," "," ","",""," "]},{name:"",keywords:["","","","","","","","",""," "," "," ","",""," "," "]},{name:"",keywords:["","","","","","","",""," "," "," "," "," ","  "]},{name:" ",keywords:["","","","",""," "," "," "," "," "," ",""]},{name:"",keywords:["","","","","",""," "," "," "," "," "," "]},{name:"",keywords:["","",""," "," ",""," "," "," "," "," "," "," ","  "]},{name:"",keywords:["","","","","",""," ","","",""," "," ","","",""]}],hEe=[{name:"",keywords:["","","","","",""]},{name:"",keywords:["","","","",""]},{name:"",keywords:["","","","",""]},{name:"",keywords:["","","","","",""]},{name:"",keywords:["","","",""]},{name:"",keywords:["","","","","",""]},{name:" ",keywords:[" ","",""," "," "]},{name:"",keywords:["","","","","",""]},{name:"",keywords:["","","",""]},{name:"",keywords:["","","","","",""]},{name:"",keywords:["","","",""]},{name:"",keywords:["","","",""]},{name:"",keywords:["","","",""]},{name:" ",keywords:[" "," "," "," "]},{name:"",keywords:["","",""]},{name:"",keywords:["","",""]},{name:" ",keywords:[" ",""," "]},{name:" ",keywords:[" "," ","  "]},{name:"",keywords:["",""]},{name:"",keywords:["",""]}],fEe=[{name:" ",type:"mosque",keywords:[" "," "," ",""],location:{lng:36.3067,lat:33.5119}},{name:"  ()",type:"hospital",keywords:[" "," "," ",""],location:{lng:36.3029,lat:33.5101}},{name:"  ",type:"mosque",keywords:["  ","  ","Ruqayya Mosque"],location:{lng:36.30722,lat:33.51333}},{name:"   ()",type:"hospital",keywords:["  ","National University Hospital","  "],location:{lng:36.269635,lat:33.505716}},{name:"  ",type:"mosque",keywords:["  ","  "," "],location:{lng:36.34064595743331,lat:33.44429811416082}},{name:"  ",type:"hospital",keywords:[" ","  ",""],location:{lng:36.308056,lat:33.616389}},{name:"  ()",type:"mosque",keywords:[" "," "," ","  "],location:{lng:37.1588,lat:36.1989}},{name:"  ()",type:"hospital",keywords:[" "," ",""],location:{lng:37.1527,lat:36.2098}},{name:"  ()   ",type:"mosque",keywords:["  ","  ","Great Mosque of Aleppo"],location:{lng:37.1541,lat:36.193}},{name:"  ",type:"hospital",keywords:["  ","Aleppo University Hospital","AUH"],location:{lng:37.12806,lat:36.21083}},{name:"   ",type:"mosque",keywords:["   ","   ","  "],location:{lng:36.7306,lat:34.739}},{name:"  ()",type:"hospital",keywords:[" "," ",""],location:{lng:36.7131,lat:34.7324}},{name:"   ()",type:"mosque",keywords:["  ","  "," "],location:{lng:36.74527778,lat:35.13416667}},{name:"  ",type:"hospital",keywords:["  ","  "," "],location:{lng:36.75783,lat:35.13179}},{name:"  ()",type:"mosque",keywords:[" "," ",""],location:{lng:36.752539,lat:35.135256}},{name:"  ()",type:"mosque",keywords:[" "," ",""],location:{lng:35.8663,lat:34.9062}},{name:"  ()",type:"hospital",keywords:[" "," ",""],location:{lng:35.8721,lat:34.897}},{name:"  ()",type:"mosque",keywords:[" "," ",""],location:{lng:35.7806,lat:35.517}},{name:"  ",type:"hospital",keywords:[" "," "," "],location:{lng:35.7801,lat:35.5136}},{name:"  ",type:"mosque",keywords:["  "," "," "],location:{lng:36.634,lat:35.9306}},{name:"  ",type:"hospital",keywords:["  ","  "," "],location:{lng:36.6345,lat:35.9302}},{name:"    ()",type:"hospital",keywords:["  ","Bab al-Hawa Hospital"," "],location:{lng:36.692639,lat:36.230639}},{name:"  ()",type:"mosque",keywords:[" ","  "," "],location:{lng:39.021009,lat:35.951991}},{name:"  ",type:"hospital",keywords:[" ","  ",""],location:{lng:39.01,lat:35.95}},{name:"  ( )",type:"mosque",keywords:[" "," ",""],location:{lng:40.1419,lat:35.3366}},{name:"  ( )",type:"hospital",keywords:[" "," ",""],location:{lng:40.1425,lat:35.336}},{name:"   ()",type:"mosque",keywords:[" "," "," "],location:{lng:36.101,lat:32.6123}},{name:"  ",type:"hospital",keywords:["  "," ",""],location:{lng:36.1061111111,lat:32.6252777778}},{name:"  ()",type:"mosque",keywords:[" "," "," "],location:{lng:35.824,lat:33.126}},{name:"  ",type:"hospital",keywords:[" "," ",""],location:{lng:35.824,lat:33.126}},{name:"  ",type:"mosque",keywords:["  "," ",""],location:{lng:36.7022,lat:32.7112}},{name:"  ",type:"hospital",keywords:["  "," ",""],location:{lng:36.7045,lat:32.7116}},{name:"  ()",type:"mosque",keywords:[" ","   ","  "],location:{lng:40.74222,lat:36.51167}},{name:"  ",type:"hospital",keywords:[" ","  "," "],location:{lng:41.21056,lat:37.034}},{name:"  ()",type:"mosque",keywords:["  ","   ","Great Mosque of Al-Hasakah"],location:{lng:40.74222,lat:36.51167}},{name:"  ",type:"hospital",keywords:[" ","  ","Qamishli National Hospital"],location:{lng:41.21056,lat:37.034}}],$1=t=>{const e=t.trim();let n=null;for(const b of fj){for(const w of b.keywords)if(e.includes(w)){n=b.name;break}if(n)break}let r=null,s=null;for(const b of hEe){for(const w of b.keywords)if(e.includes(w)){r=b.name,r===""?s={lng:36.2765,lat:33.5138}:r===""?s={lng:37.1613,lat:36.2021}:r===""?s={lng:36.7184,lat:34.7324}:r===""?s={lng:35.7901,lat:35.5317}:r===""?s={lng:35.8866,lat:34.8886}:r===""?s={lng:36.7578,lat:35.1354}:r===" "?s={lng:40.155,lat:35.3359}:r===""?s={lng:39.0062,lat:35.9528}:r===""?s={lng:36.1021,lat:32.6218}:r===""&&(s={lng:36.569,lat:32.7093});break}if(r)break}let i=null;const o=["","",""];for(const b of o){const w=e.indexOf(b);if(w!==-1){const E=e.substring(w).split(" ");if(E.length>1){i=E.slice(1,3).join(" ");break}}}let a=null,l=null,c=null;for(const b of fEe){for(const w of b.keywords)if(e.includes(w)){b.type==="hospital"?(a=b.name,c=b.location):b.type==="mosque"&&(l=b.name,c=b.location);break}if(a||l)break}if(!a&&!l){const b=["",""," ","",""];for(const E of b){const N=e.indexOf(E);if(N!==-1){const C=e.substring(N).split(" ");if(C.length>1){a=C.slice(1,3).join(" ");break}}}const w=["","","","",""];for(const E of w){const N=e.indexOf(E);if(N!==-1){const C=e.substring(N).split(" ");if(C.length>1){l=C.slice(1,3).join(" ");break}}}}let u=0;const h={:5," ":4,:3,:2,:1,"5 ":5,"4 ":4,"3 ":3,"2 ":2,"1 ":1," ":5," ":4," ":3,:2," ":1};for(const[b,w]of Object.entries(h))if(e.includes(b)){u=w;break}let m=0;const p=/(\d+)\s*(||)/,y=e.match(p);if(y){const b=parseInt(y[1]);y[2]===""?m=b/1e3:m=b,m=Math.max(1,Math.min(5,m))}const v=mEe(e);return{profession:n,city:r,location:c||s,street:i,hospital:a,mosque:l,rating:u,radius:m||null,keywords:v,originalQuery:t}},mEe=t=>{const e=["","","","","","","","","","","","","","","","","","","","","","","","","",""],r=t.split(/\s+/).filter(s=>s.length>2&&!e.includes(s));return[...new Set(r)]},IL=t=>{if(!t||t.length<3)return[];const e=[],n=$1(t);if(n.profession&&fj.find(s=>s.name===n.profession)){const s={:[" "," "," "],:[" "," "," "],:[" "," "," "],:[" "," "," "]," ":[" "," "," "],:[" "," "," "],:["  "," "," "],:[" "," "," "]};s[n.profession]&&s[n.profession].forEach(i=>{e.push(`${n.profession} ${i}`)})}if(n.city&&["","","",""].forEach(s=>{s!==n.profession&&e.push(`${s}  ${n.city}`)}),n.hospital&&(e.push(`    ${n.hospital}`),e.push(`    ${n.hospital}`)),n.mosque&&(e.push(`    ${n.mosque}`),e.push(`    ${n.mosque}`)),!n.profession&&!n.city&&!n.hospital&&!n.mosque&&n.keywords.length>0){const r=n.keywords[0];e.push(`  ${r}`),e.push(`  ${r}`),e.push(`  ${r}`)}return e.length===0&&(e.push("  "),e.push("    "),e.push("  "),e.push("  "),e.push(" "),e.push(" ")),[...new Set(e)].slice(0,5)},pEe={search:[" [.+]","  [.+]"," [.+]","  [.+]","  [.+]","  [.+]","  [.+]"," [.+]"],booking:["  [.+]","  [.+]","  [.+]"," [.+]"," [.+]"," [.+]"," [.+]","   ","   ","   ","   ","  ","  ","   ","      ","        "],profile:[" ","","",""," "," "," ","  ","  ","  ","  ","  ","  ","    ","    ","    "],requests:["","","",""," "," ","    ","   ","   ","    ","   ","  "," "," "," "," "],settings:["","  "," "," "," "," ","    ","   ","    ","    ","   ","  "," ","  ","  "," "],help:["","",""," "," ","","","   ","    ","   ","   ","   ","   ","    ","     ","     "],greeting:[""," "," "," ","","",""],thanks:[""," "," ","",""],goodbye:[" "," ","","","  "]},gEe=()=>{Xt.extend({words:{:"Verb",:"Verb",:"Verb",:"Verb",:"Verb",:"Verb",:"Verb",:"Verb",:"Verb",:"Verb",:"Verb",:"Expression",:"Expression",:"Expression",:"Expression",:"Expression",:"Profession",:"Profession",:"Profession",:"Profession",:"Profession",:"Profession",:"Profession"," ":"Profession"}})};gEe();const AL=t=>{const e=$1(t);Xt(t);let n="unknown",r=0,s={};for(const[i,o]of Object.entries(pEe)){for(const a of o)if(t.includes(a.replace("[.+]","").trim()))if(a.includes("[.+]")){const l=a.split("[.+]"),c=l[0].trim(),u=l[1]?l[1].trim():"";if(t.includes(c)){const h=t.indexOf(c)+c.length,m=u?t.indexOf(u,h):t.length;if(m>h){const p=t.substring(h,m).trim();s.value=p,n=i,r=.8;break}}}else{n=i,r=.9;break}if(r>0)break}return{intent:n,confidence:r,entities:s,...e}},RL=(t,e)=>{let n={...e};if(e.intent==="unknown"&&e.confidence<.5){const r=t.slice(-3);for(const s of r)if(!s.isUser&&s.text.includes("")){s.text.includes("")||s.text.includes("")?(n.intent="search",n.confidence=.6):(s.text.includes("")||s.text.includes(""))&&(n.intent="booking",n.confidence=.6);break}}return e.keywords.length<=2&&e.intent==="unknown"&&(e.profession?(n.intent="search",n.confidence=.7):(e.city||e.hospital||e.mosque)&&(n.intent="search",n.confidence=.6)),n},PL=t=>{const{intent:e,profession:n,city:r,hospital:s,mosque:i,keywords:o}=t,a={search:()=>n?`   ${n}    .        `:r?`     ${r}    .      `:s?`      ${s}    .      `:i?`      ${i}    .      `:"       .     ",booking:()=>n?` ${n}     ${n}      ""    .`:'           ""          .',profile:()=>'          " "     "".',requests:()=>'          "".',settings:()=>'         "".',help:()=>"                   .",greeting:()=>"    JobScope!    ",thanks:()=>"!  .       ",goodbye:()=>"   JobScope!    .",unknown:()=>o.length>0?`    .           "${o.join(", ")}"`:"   .          ."};return{text:(a[e]||a.unknown)(),intent:e,suggestions:yEe(t)}},yEe=t=>{const{intent:e,profession:n,city:r,hospital:s,mosque:i}=t,o=["   ","   ","     ","    ","   "],a={search:()=>{if(n)return[`   ${n}`,`   ${n}`,`    ${n}`,`   ${n}`,"   "];if(r)return[`   ${r}`,`   ${r}`,`   ${r}`,`   ${r}`,`     ${r}`];if(s||i){const c=s||i;return[`    ${c}`,`    ${c}`,`    ${c}`,`      ${c}`,"    "]}else return[" "," "," "," ","    "]},booking:()=>["   ","   ","    ","      ","        "],profile:()=>["    ","    ","    ","    ","   "],requests:()=>["    ","   ","   ","    ","   "],settings:()=>["   ","    ","    ","    ","   "],help:()=>["    ","   ","     ","    ","    "],greeting:()=>o,thanks:()=>o,goodbye:()=>o,unknown:()=>o};return(a[e]||a.unknown)()};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bEe=1e-7,vEe=1e-4;class mj{constructor(e,n){this.backend=e,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,n){this.dataIdsCount++,this.data.set(e,n)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class u${refCount(e){return Ys("refCount")}incRef(e){return Ys("incRef")}timerAvailable(){return!0}time(e){return Ys("time")}read(e){return Ys("read")}readSync(e){return Ys("readSync")}readToGPU(e,n){return Ys("readToGPU")}numDataIds(){return Ys("numDataIds")}disposeData(e,n){return Ys("disposeData")}write(e,n,r){return Ys("write")}move(e,n,r,s,i){return Ys("move")}createTensorFromGPUData(e,n,r){return Ys("createTensorFromGPUData")}memory(){return Ys("memory")}floatPrecision(){return Ys("floatPrecision")}epsilon(){return this.floatPrecision()===32?bEe:vEe}dispose(){return Ys("dispose")}}function Ys(t){throw new Error(`'${t}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xEe(t){let e=t.length,n=0;for(;e>0;)n=Math.random()*e|0,e--,bh(t,e,n)}function ad(t,e,n){return Math.max(t,Math.min(e,n))}function d$(t){return t%2===0?t:t+1}function bh(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function wEe(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n];return e}function F(t,e){if(!t)throw new Error(typeof e=="string"?e:e())}function h$(t,e,n=""){F(Zt(t,e),()=>n+` Shapes ${t} and ${e} must match`)}function pj(t){F(t!=null,()=>"The input to the tensor constructor must be a non-null value.")}function pe(t){if(t.length===0)return 1;let e=t[0];for(let n=1;n<t.length;n++)e*=t[n];return e}function Zt(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function Ef(t){return t%1===0}function YC(t){const e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}function Zh(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function DL(t,e=s=>0,n,r){return new Promise((s,i)=>{let o=0;const a=()=>{if(t()){s();return}o++;const l=e(o);if(n!=null&&o>=n){i();return}r!=null?r(a,l):setTimeout(a,l)};a()})}function gj(t,e){let n=1,r=-1;for(let i=0;i<t.length;++i)if(t[i]>=0)n*=t[i];else if(t[i]===-1){if(r!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${i}`);r=i}else if(t[i]<0)throw Error(`Shapes can not be < 0. Found ${t[i]} at dim ${i}`);if(r===-1){if(e>0&&e!==n)throw Error(`Size(${e}) must match the product of shape ${t}`);return t}if(n===0)throw Error(`Cannot infer the missing size in [${t}] when there are 0 elements`);if(e%n!==0)throw Error(`The implicit shape can't be a fractional number. Got ${e} / ${n}`);const s=t.slice();return s[r]=e/n,s}function xt(t,e){const n=e.length;return t=t==null?e.map((r,s)=>s):[].concat(t),F(t.every(r=>r>=-n&&r<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${t}`),F(t.every(r=>Ef(r)),()=>`All values in axis param must be integers but got axis ${t}`),t.map(r=>r<0?n+r:r)}function Jc(t,e){const n=[],r=[],s=e!=null&&Array.isArray(e)&&e.length===0,i=e==null||s?null:xt(e,t).sort();let o=0;for(let a=0;a<t.length;++a){if(i!=null){if(i[o]===a&&t[a]!==1)throw new Error(`Can't squeeze axis ${a} since its dim '${t[a]}' is not 1`);(i[o]==null||i[o]>a)&&t[a]===1&&(n.push(t[a]),r.push(a)),i[o]<=a&&o++}t[a]!==1&&(n.push(t[a]),r.push(a))}return{newShape:n,keptDims:r}}function ls(t,e){return Jn(t,e)}function Jn(t,e){let n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else if(t==="bool")n=new Uint8Array(e);else if(t==="string")n=new Array(e);else throw new Error(`Unknown data type ${t}`);return n}function EEe(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${e} being uploaded contains ${r}.`)}}function kEe(t){return t==="bool"||t==="complex64"||t==="float32"||t==="int32"||t==="string"}function yj(t,e){return!(e==="complex64"||e==="float32"&&t!=="complex64"||e==="int32"&&t!=="float32"&&t!=="complex64"||e==="bool"&&t==="bool")}function I1(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error(`Unknown dtype ${t}`)}function NEe(t){if(t==null)return 0;let e=0;return t.forEach(n=>e+=n.length),e}function d0(t){return typeof t=="string"||t instanceof String}function CEe(t){return typeof t=="boolean"}function JC(t){return typeof t=="number"}function Qf(t){return Array.isArray(t)?Qf(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray?"int32":JC(t)?"float32":d0(t)?"string":CEe(t)?"bool":"float32"}function QC(t){return!!(t&&t.constructor&&t.call&&t.apply)}function e_(t,e){for(let n=e;n<t;++n)if(t%n===0)return n;return t}function qe(t){const e=t.length;if(e<2)return[];const n=new Array(e-1);n[e-2]=t[e-1];for(let r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n}function bj(t,e,n,r=!1){const s=new Array;if(e.length===1){const i=e[0]*(r?2:1);for(let o=0;o<i;o++)s[o]=n[t+o]}else{const i=e[0],o=e.slice(1),a=o.reduce((l,c)=>l*c)*(r?2:1);for(let l=0;l<i;l++)s[l]=bj(t+l*a,o,n,r)}return s}function Vo(t,e,n=!1){if(t.length===0)return e[0];const r=t.reduce((s,i)=>s*i)*(n?2:1);if(r===0)return[];if(r!==e.length)throw new Error(`[${t}] does not match the input size ${e.length}${n?" for a complex tensor":""}.`);return bj(0,t,e,n)}function _Ee(t,e){if(Array.isArray(t))return t;if(e==="float32")return t instanceof Float32Array?t:new Float32Array(t);if(e==="int32")return t instanceof Int32Array?t:new Int32Array(t);if(e==="bool"||e==="string")return Uint8Array.from(new Int32Array(t));throw new Error(`Unknown dtype ${e}`)}function f$(t,e){const n=cs(t,e);for(let r=0;r<n.length;r++)n[r]=1;return n}function cs(t,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool")return new Uint8Array(t);throw new Error(`Unknown data type ${e}`)}function vj(t,e){const n=t.reduce((r,s)=>r*s,1);if(e==null||e==="float32")return Vo(t,new Float32Array(n));if(e==="int32")return Vo(t,new Int32Array(n));if(e==="bool")return Vo(t,new Uint8Array(n));throw new Error(`Unknown data type ${e}`)}function Bl(t){t.forEach(e=>{F(Number.isInteger(e)&&e>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${t}].`)})}function Sa(t,e,n){if(e===0)return 0;if(e===1)return t[0];let r=t[t.length-1];for(let s=0;s<t.length-1;++s)r+=n[s]*t[s];return r}function em(t,e,n){if(e===0)return[];if(e===1)return[t];const r=new Array(e);for(let s=0;s<r.length-1;++s)r[s]=Math.floor(t/n[s]),t-=r[s]*n[s];return r[r.length-1]=t,r}function m$(t){return t&&t.then&&typeof t.then=="function"}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OL="tfjsflags";class SEe{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=TEe,this.populateURLFlags()}setPlatform(e,n){this.platform!=null&&(de().getBool("IS_TEST")||de().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`)),this.platformName=e,this.platform=n}registerFlag(e,n,r){if(this.flagRegistry[e]={evaluationFn:n,setHook:r},this.urlFlags[e]!=null){const s=this.urlFlags[e];de().getBool("IS_TEST")||de().getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${s}.`),this.set(e,s)}}async getAsync(e){return e in this.flags?this.flags[e]:(this.flags[e]=await this.evaluateFlag(e),this.flags[e])}get(e){if(e in this.flags)return this.flags[e];const n=this.evaluateFlag(e);if(m$(n))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=n,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getString(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,n){if(this.flagRegistry[e]==null)throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=n,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(n)}evaluateFlag(e){if(this.flagRegistry[e]==null)throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;const e=this.getQueryParams(this.global.location.search);OL in e&&e[OL].split(",").forEach(r=>{const[s,i]=r.split(":");this.urlFlags[s]=IEe(s,i)})}}function TEe(t){const e={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(n,...r)=>($Ee(e,r[0],r[1]),r.join("="))),e}function $Ee(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}function IEe(t,e){const n=e.toLowerCase();return n==="true"||n==="false"?n==="true":`${+n}`===n?+n:e}function de(){return xj}let xj=null;function AEe(t){xj=t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let Ck;function wj(){if(Ck==null){let t;if(typeof window<"u")t=window;else if(typeof global<"u")t=global;else if(typeof process<"u")t=process;else if(typeof self<"u")t=self;else throw new Error("Could not find a global object");Ck=t}return Ck}function REe(){const t=wj();return t._tfGlobals==null&&(t._tfGlobals=new Map),t._tfGlobals}function p$(t,e){const n=REe();if(n.has(t))return n.get(t);{const r=e();return n.set(t,r),n.get(t)}}const qx="Abs",h0="Acos",f0="Acosh",tm="Add",g$="AddN",y$="All",b$="Any",Kx="ArgMax",Zx="ArgMin",m0="Asin",p0="Asinh",g0="Atan",y0="Atanh",b0="Atan2",Xx="AvgPool",v$="AvgPoolGrad",Yx="AvgPool3D",x$="AvgPool3DGrad",Jx="BatchMatMul",Qx="BatchToSpaceND",w$="Bincount",E$="BitwiseAnd",PEe="BroadcastTo",Ej="BroadcastArgs",v0="Cast",x0="Ceil",w0="ClipByValue",k$="Complex",ew="ComplexAbs",tw="Concat",nw="Conv2D",N$="Conv2DBackpropFilter",rw="Conv2DBackpropInput",sw="Conv3D",C$="Conv3DBackpropFilterV2",_$="Conv3DBackpropInputV2",E0="Cos",k0="Cosh",S$="Cumprod",iw="Cumsum",T$="CropAndResize",$$="DenseBincount",I$="DepthToSpace",ow="DepthwiseConv2dNative",A$="DepthwiseConv2dNativeBackpropFilter",R$="DepthwiseConv2dNativeBackpropInput",kj="Diag",aw="Dilation2D",t_="Dilation2DBackpropInput",n_="Dilation2DBackpropFilter",DEe="Draw",N0="RealDiv",P$="Einsum",C0="Elu",D$="EluGrad",_0="Erf",lw="Equal",S0="Exp",cw="ExpandDims",T0="Expm1",O$="FFT",L$="Fill",M$="FlipLeftRight",$0="Floor",I0="FloorDiv",uw="FusedBatchNorm",dw="GatherV2",Nj="GatherNd",hw="Greater",A0="GreaterEqual",R0="Identity",z$="IFFT",F$="Imag",P0="IsFinite",D0="IsInf",O0="IsNan",fw="LeakyRelu",mw="Less",pw="LessEqual",Cj="LinSpace",L0="Log",M0="Log1p",gw="LogicalAnd",yw="LogicalNot",bw="LogicalOr",OEe="LogSoftmax",vw="LRN",B$="LRNGrad",xw="Max",z0="Maximum",ww="MaxPool",V$="MaxPoolGrad",Ew="MaxPool3D",j$="MaxPool3DGrad",_j="MaxPoolWithArgmax",kw="Mean",Nw="Min",F0="Minimum",Cw="MirrorPad",B0="Mod",Sj="Multinomial",V0="Multiply",_w="Neg",Sw="NotEqual",U$="NonMaxSuppressionV3",H$="NonMaxSuppressionV4",G$="NonMaxSuppressionV5",Tw="OnesLike",$w="OneHot",Iw="Pack",Aw="PadV2",j0="Pow",Rw="Prelu",Pw="Prod",Tj="RaggedGather",$j="RaggedRange",Ij="RaggedTensorToTensor",W$="Range",q$="Real",U0="Reciprocal",H0="Relu",Dw="Reshape",Ow="ResizeNearestNeighbor",K$="ResizeNearestNeighborGrad",Lw="ResizeBilinear",Z$="ResizeBilinearGrad",G0="Relu6",Mw="Reverse",W0="Round",q0="Rsqrt",Aj="ScatterNd",Rj="TensorScatterUpdate",Pj="SearchSorted",zw="Select",K0="Selu",Fw="Slice",Z0="Sin",X0="Sinh",Y0="Sign",J0="Sigmoid",Q0="Softplus",ey="Sqrt",Bw="Sum",Vw="SpaceToBatchND",jw="SplitV",Uw="Softmax",Dj="SparseFillEmptyRows",Oj="SparseReshape",Lj="SparseSegmentMean",Mj="SparseSegmentSum",zj="SparseToDense",ty="SquaredDifference",X$="Square",Y$="StaticRegexReplace",J$="StridedSlice",Fj="StringNGrams",Bj="StringSplit",Vj="StringToHashBucketFast",ny="Sub",ry="Tan",sy="Tanh",iy="Tile",Q$="TopK",eI="Transform",Xh="Transpose",tI="Unique",Hw="Unpack",Gw="UnsortedSegmentSum",Ww="ZerosLike",oy="Step",LEe="FromPixels",nI="RotateWithOffset",A1="_FusedMatMul",R1="FusedConv2D",jj="FusedDepthwiseConv2D";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ni(...t){de().getBool("IS_TEST")||de().getBool("PROD")||console.warn(...t)}function MEe(...t){de().getBool("IS_TEST")||de().getBool("PROD")||console.log(...t)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const P1=p$("kernelRegistry",()=>new Map),r_=p$("gradRegistry",()=>new Map);function LL(t,e){const n=Hj(t,e);return P1.get(n)}function ML(t){return r_.get(t)}function zL(t){const e=P1.entries(),n=[];for(;;){const{done:r,value:s}=e.next();if(r)break;const[i,o]=s,[a]=i.split("_");a===t&&n.push(o)}return n}function Uj(t){const{kernelName:e,backendName:n}=t,r=Hj(e,n);P1.has(r)&&Ni(`The kernel '${e}' for backend '${n}' is already registered`),P1.set(r,t)}function zEe(t){const{kernelName:e}=t;r_.has(e)&&de().getBool("DEBUG")&&Ni(`Overriding the gradient for '${e}'`),r_.set(e,t)}function Hj(t,e){return`${e}_${t}`}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gj(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray}var Wj=Sn,oo=null;try{oo=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function Sn(t,e,n){this.low=t|0,this.high=e|0,this.unsigned=!!n}Sn.prototype.__isLong__;Object.defineProperty(Sn.prototype,"__isLong__",{value:!0});function fi(t){return(t&&t.__isLong__)===!0}Sn.isLong=fi;var FL={},BL={};function Ad(t,e){var n,r,s;return e?(t>>>=0,(s=0<=t&&t<256)&&(r=BL[t],r)?r:(n=Tn(t,(t|0)<0?-1:0,!0),s&&(BL[t]=n),n)):(t|=0,(s=-128<=t&&t<128)&&(r=FL[t],r)?r:(n=Tn(t,t<0?-1:0,!1),s&&(FL[t]=n),n))}Sn.fromInt=Ad;function ao(t,e){if(isNaN(t))return e?Fu:lo;if(e){if(t<0)return Fu;if(t>=qj)return Xj}else{if(t<=-jL)return ni;if(t+1>=jL)return Zj}return t<0?ao(-t,e).neg():Tn(t%kf|0,t/kf|0,e)}Sn.fromNumber=ao;function Tn(t,e,n){return new Sn(t,e,n)}Sn.fromBits=Tn;var D1=Math.pow;function rI(t,e,n){if(t.length===0)throw Error("empty string");if(t==="NaN"||t==="Infinity"||t==="+Infinity"||t==="-Infinity")return lo;if(typeof e=="number"?(n=e,e=!1):e=!!e,n=n||10,n<2||36<n)throw RangeError("radix");var r;if((r=t.indexOf("-"))>0)throw Error("interior hyphen");if(r===0)return rI(t.substring(1),e,n).neg();for(var s=ao(D1(n,8)),i=lo,o=0;o<t.length;o+=8){var a=Math.min(8,t.length-o),l=parseInt(t.substring(o,o+a),n);if(a<8){var c=ao(D1(n,a));i=i.mul(c).add(ao(l))}else i=i.mul(s),i=i.add(ao(l))}return i.unsigned=e,i}Sn.fromString=rI;function ea(t,e){return typeof t=="number"?ao(t,e):typeof t=="string"?rI(t,e):Tn(t.low,t.high,typeof e=="boolean"?e:t.unsigned)}Sn.fromValue=ea;var VL=65536,FEe=1<<24,kf=VL*VL,qj=kf*kf,jL=qj/2,UL=Ad(FEe),lo=Ad(0);Sn.ZERO=lo;var Fu=Ad(0,!0);Sn.UZERO=Fu;var Fh=Ad(1);Sn.ONE=Fh;var Kj=Ad(1,!0);Sn.UONE=Kj;var s_=Ad(-1);Sn.NEG_ONE=s_;var Zj=Tn(-1,2147483647,!1);Sn.MAX_VALUE=Zj;var Xj=Tn(-1,-1,!0);Sn.MAX_UNSIGNED_VALUE=Xj;var ni=Tn(0,-2147483648,!1);Sn.MIN_VALUE=ni;var Pe=Sn.prototype;Pe.toInt=function(){return this.unsigned?this.low>>>0:this.low};Pe.toNumber=function(){return this.unsigned?(this.high>>>0)*kf+(this.low>>>0):this.high*kf+(this.low>>>0)};Pe.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(ni)){var n=ao(e),r=this.div(n),s=r.mul(n).sub(this);return r.toString(e)+s.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var i=ao(D1(e,6),this.unsigned),o=this,a="";;){var l=o.div(i),c=o.sub(l.mul(i)).toInt()>>>0,u=c.toString(e);if(o=l,o.isZero())return u+a;for(;u.length<6;)u="0"+u;a=""+u+a}};Pe.getHighBits=function(){return this.high};Pe.getHighBitsUnsigned=function(){return this.high>>>0};Pe.getLowBits=function(){return this.low};Pe.getLowBitsUnsigned=function(){return this.low>>>0};Pe.getNumBitsAbs=function(){if(this.isNegative())return this.eq(ni)?64:this.neg().getNumBitsAbs();for(var e=this.high!=0?this.high:this.low,n=31;n>0&&!(e&1<<n);n--);return this.high!=0?n+33:n+1};Pe.isZero=function(){return this.high===0&&this.low===0};Pe.eqz=Pe.isZero;Pe.isNegative=function(){return!this.unsigned&&this.high<0};Pe.isPositive=function(){return this.unsigned||this.high>=0};Pe.isOdd=function(){return(this.low&1)===1};Pe.isEven=function(){return(this.low&1)===0};Pe.equals=function(e){return fi(e)||(e=ea(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low};Pe.eq=Pe.equals;Pe.notEquals=function(e){return!this.eq(e)};Pe.neq=Pe.notEquals;Pe.ne=Pe.notEquals;Pe.lessThan=function(e){return this.comp(e)<0};Pe.lt=Pe.lessThan;Pe.lessThanOrEqual=function(e){return this.comp(e)<=0};Pe.lte=Pe.lessThanOrEqual;Pe.le=Pe.lessThanOrEqual;Pe.greaterThan=function(e){return this.comp(e)>0};Pe.gt=Pe.greaterThan;Pe.greaterThanOrEqual=function(e){return this.comp(e)>=0};Pe.gte=Pe.greaterThanOrEqual;Pe.ge=Pe.greaterThanOrEqual;Pe.compare=function(e){if(fi(e)||(e=ea(e)),this.eq(e))return 0;var n=this.isNegative(),r=e.isNegative();return n&&!r?-1:!n&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1};Pe.comp=Pe.compare;Pe.negate=function(){return!this.unsigned&&this.eq(ni)?ni:this.not().add(Fh)};Pe.neg=Pe.negate;Pe.add=function(e){fi(e)||(e=ea(e));var n=this.high>>>16,r=this.high&65535,s=this.low>>>16,i=this.low&65535,o=e.high>>>16,a=e.high&65535,l=e.low>>>16,c=e.low&65535,u=0,h=0,m=0,p=0;return p+=i+c,m+=p>>>16,p&=65535,m+=s+l,h+=m>>>16,m&=65535,h+=r+a,u+=h>>>16,h&=65535,u+=n+o,u&=65535,Tn(m<<16|p,u<<16|h,this.unsigned)};Pe.subtract=function(e){return fi(e)||(e=ea(e)),this.add(e.neg())};Pe.sub=Pe.subtract;Pe.multiply=function(e){if(this.isZero())return lo;if(fi(e)||(e=ea(e)),oo){var n=oo.mul(this.low,this.high,e.low,e.high);return Tn(n,oo.get_high(),this.unsigned)}if(e.isZero())return lo;if(this.eq(ni))return e.isOdd()?ni:lo;if(e.eq(ni))return this.isOdd()?ni:lo;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(UL)&&e.lt(UL))return ao(this.toNumber()*e.toNumber(),this.unsigned);var r=this.high>>>16,s=this.high&65535,i=this.low>>>16,o=this.low&65535,a=e.high>>>16,l=e.high&65535,c=e.low>>>16,u=e.low&65535,h=0,m=0,p=0,y=0;return y+=o*u,p+=y>>>16,y&=65535,p+=i*u,m+=p>>>16,p&=65535,p+=o*c,m+=p>>>16,p&=65535,m+=s*u,h+=m>>>16,m&=65535,m+=i*c,h+=m>>>16,m&=65535,m+=o*l,h+=m>>>16,m&=65535,h+=r*u+s*c+i*l+o*a,h&=65535,Tn(p<<16|y,h<<16|m,this.unsigned)};Pe.mul=Pe.multiply;Pe.divide=function(e){if(fi(e)||(e=ea(e)),e.isZero())throw Error("division by zero");if(oo){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var n=(this.unsigned?oo.div_u:oo.div_s)(this.low,this.high,e.low,e.high);return Tn(n,oo.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?Fu:lo;var r,s,i;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return Fu;if(e.gt(this.shru(1)))return Kj;i=Fu}else{if(this.eq(ni)){if(e.eq(Fh)||e.eq(s_))return ni;if(e.eq(ni))return Fh;var o=this.shr(1);return r=o.div(e).shl(1),r.eq(lo)?e.isNegative()?Fh:s_:(s=this.sub(e.mul(r)),i=r.add(s.div(e)),i)}else if(e.eq(ni))return this.unsigned?Fu:lo;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=lo}for(s=this;s.gte(e);){r=Math.max(1,Math.floor(s.toNumber()/e.toNumber()));for(var a=Math.ceil(Math.log(r)/Math.LN2),l=a<=48?1:D1(2,a-48),c=ao(r),u=c.mul(e);u.isNegative()||u.gt(s);)r-=l,c=ao(r,this.unsigned),u=c.mul(e);c.isZero()&&(c=Fh),i=i.add(c),s=s.sub(u)}return i};Pe.div=Pe.divide;Pe.modulo=function(e){if(fi(e)||(e=ea(e)),oo){var n=(this.unsigned?oo.rem_u:oo.rem_s)(this.low,this.high,e.low,e.high);return Tn(n,oo.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))};Pe.mod=Pe.modulo;Pe.rem=Pe.modulo;Pe.not=function(){return Tn(~this.low,~this.high,this.unsigned)};Pe.and=function(e){return fi(e)||(e=ea(e)),Tn(this.low&e.low,this.high&e.high,this.unsigned)};Pe.or=function(e){return fi(e)||(e=ea(e)),Tn(this.low|e.low,this.high|e.high,this.unsigned)};Pe.xor=function(e){return fi(e)||(e=ea(e)),Tn(this.low^e.low,this.high^e.high,this.unsigned)};Pe.shiftLeft=function(e){return fi(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?Tn(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):Tn(0,this.low<<e-32,this.unsigned)};Pe.shl=Pe.shiftLeft;Pe.shiftRight=function(e){return fi(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?Tn(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):Tn(this.high>>e-32,this.high>=0?0:-1,this.unsigned)};Pe.shr=Pe.shiftRight;Pe.shiftRightUnsigned=function(e){if(fi(e)&&(e=e.toInt()),e&=63,e===0)return this;var n=this.high;if(e<32){var r=this.low;return Tn(r>>>e|n<<32-e,n>>>e,this.unsigned)}else return e===32?Tn(n,0,this.unsigned):Tn(n>>>e-32,0,this.unsigned)};Pe.shru=Pe.shiftRightUnsigned;Pe.shr_u=Pe.shiftRightUnsigned;Pe.toSigned=function(){return this.unsigned?Tn(this.low,this.high,!1):this};Pe.toUnsigned=function(){return this.unsigned?this:Tn(this.low,this.high,!0)};Pe.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()};Pe.toBytesLE=function(){var e=this.high,n=this.low;return[n&255,n>>>8&255,n>>>16&255,n>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]};Pe.toBytesBE=function(){var e=this.high,n=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,n>>>24,n>>>16&255,n>>>8&255,n&255]};Sn.fromBytes=function(e,n,r){return r?Sn.fromBytesLE(e,n):Sn.fromBytesBE(e,n)};Sn.fromBytesLE=function(e,n){return new Sn(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,n)};Sn.fromBytesBE=function(e,n){return new Sn(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],n)};const Yj=yx(Wj),BEe=ZZ({__proto__:null,default:Yj},[Wj]);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Au=Yj||BEe;function qw(t){return Au.fromString(t,!0,16)}const Jj=qw("c3a5c85c97cb3127"),$u=qw("b492b66fbe98f273"),Es=qw("9ae16a3b2f90404f");function i_(t){return t.xor(t.shru(47))}function Qj(t,e,n){const r=t.slice(e,e+n);return Au.fromBytes(Array.from(r),!0,!0)}function yn(t,e){return Qj(t,e,8)}function HL(t,e){return Qj(t,e,4)}function Ar(t,e){return e===0?t:t.shru(e).or(t.shl(64-e))}function Ac(t,e,n=qw("9ddfea08eb382d69")){let r=t.xor(e).mul(n);r=r.xor(r.shru(47));let s=e.xor(r).mul(n);return s=s.xor(s.shru(47)),s=s.mul(n),s}function VEe(t,e,n,r,s,i){s=s.add(t),i=Ar(i.add(s).add(r),21);const o=s;return s=s.add(e),s=s.add(n),i=i.add(Ar(s,44)),[s.add(r),i.add(o)]}function Ub(t,e,n,r){return VEe(yn(t,e),yn(t,e+8),yn(t,e+16),yn(t,e+24),n,r)}function jEe(t,e=t.length){if(e>=8){const n=Es.add(e*2),r=yn(t,0).add(Es),s=yn(t,e-8),i=Ar(s,37).mul(n).add(r),o=Ar(r,25).add(s).mul(n);return Ac(i,o,n)}if(e>=4){const n=Es.add(e*2),r=HL(t,0);return Ac(r.shl(3).add(e),HL(t,e-4),n)}if(e>0){const n=t[0],r=t[e>>1],s=t[e-1],i=n+(r<<8),o=e+(s<<2);return i_(Es.mul(i).xor(Jj.mul(o))).mul(Es)}return Es}function UEe(t,e=t.length){const n=Es.add(e*2),r=yn(t,0).mul($u),s=yn(t,8),i=yn(t,e-8).mul(n),o=yn(t,e-16).mul(Es);return Ac(Ar(r.add(s),43).add(Ar(i,30)).add(o),r.add(Ar(s.add(Es),18)).add(i),n)}function HEe(t,e=t.length){const n=Es.add(e*2),r=yn(t,0).mul(Es),s=yn(t,8),i=yn(t,e-8).mul(n),o=yn(t,e-16).mul(Es),a=Ar(r.add(s),43).add(Ar(i,30)).add(o),l=Ac(a,r.add(Ar(s.add(Es),18)).add(i),n),c=yn(t,16).mul(n),u=yn(t,24),h=a.add(yn(t,e-32)).mul(n),m=l.add(yn(t,e-24)).mul(n);return Ac(Ar(c.add(u),43).add(Ar(h,30)).add(m),c.add(Ar(u.add(r),18)).add(h),n)}function GEe(t,e=t.length){const n=Au.fromNumber(81,!0);if(e<=32)return e<=16?jEe(t,e):UEe(t,e);if(e<=64)return HEe(t,e);let r=n,s=n.mul($u).add(113),i=i_(s.mul(Es).add(113)).mul(Es),o=[Au.UZERO,Au.UZERO],a=[Au.UZERO,Au.UZERO];r=r.mul(Es).add(yn(t,0));let l=0;const c=(e-1>>6)*64,u=c+(e-1&63)-63;do r=Ar(r.add(s).add(o[0]).add(yn(t,l+8)),37).mul($u),s=Ar(s.add(o[1]).add(yn(t,l+48)),42).mul($u),r=r.xor(a[1]),s=s.add(o[0]).add(yn(t,l+40)),i=Ar(i.add(a[0]),33).mul($u),o=Ub(t,l,o[1].mul($u),r.add(a[0])),a=Ub(t,l+32,i.add(a[1]),s.add(yn(t,l+16))),[i,r]=[r,i],l+=64;while(l!==c);const h=$u.add(i.and(255).shl(1));return l=u,a[0]=a[0].add(e-1&63),o[0]=o[0].add(a[0]),a[0]=a[0].add(o[0]),r=Ar(r.add(s).add(o[0]).add(yn(t,l+8)),37).mul(h),s=Ar(s.add(o[1]).add(yn(t,l+48)),42).mul(h),r=r.xor(a[1].mul(9)),s=s.add(o[0].mul(9).add(yn(t,l+40))),i=Ar(i.add(a[0]),33).mul(h),o=Ub(t,l,o[1].mul(h),r.add(a[0])),a=Ub(t,l+32,i.add(a[1]),s.add(yn(t,l+16))),[i,r]=[r,i],Ac(Ac(o[0],a[0],h).add(i_(s).mul(Jj)).add(i),Ac(o[1],a[1],h).add(r),h)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qc(t,e){return e==="string"?Rc(t):Rd([t],e)}function WEe(t,e){return t instanceof Float32Array&&e==="float32"||t instanceof Int32Array&&e==="int32"||t instanceof Uint8Array&&e==="bool"}function Rd(t,e){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=ld(t)),de().getBool("DEBUG")&&EEe(t,e),WEe(t,e))return t;if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool"){const n=new Uint8Array(t.length);for(let r=0;r<n.length;++r)Math.round(t[r])!==0&&(n[r]=1);return n}else throw new Error(`Unknown data type ${e}`)}function Ls(){return de().platform.now()}function Rc(t,e="utf-8"){return e=e||"utf-8",de().platform.encode(t,e)}function jc(t,e="utf-8"){return e=e||"utf-8",de().platform.decode(t,e)}function go(t){return de().platform.isTypedArray!=null?de().platform.isTypedArray(t):Gj(t)}function ld(t,e=[],n=!1){if(e==null&&(e=[]),typeof t=="boolean"||typeof t=="number"||typeof t=="string"||m$(t)||t==null||go(t)&&n)e.push(t);else if(Array.isArray(t)||go(t))for(let r=0;r<t.length;++r)ld(t[r],e,n);else{let r=-1;for(const s of Object.keys(t))/^([1-9]+[0-9]*|0)$/.test(s)&&(r=Math.max(r,Number(s)));for(let s=0;s<=r;s++)ld(t[s],e,n)}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class qEe{constructor(e,n){this.backendTimer=e,this.logger=n,n==null&&(this.logger=new ZEe)}profileKernel(e,n,r){let s;const i=()=>{s=r()};let o;const a=Ls();if(this.backendTimer.timerAvailable())o=this.backendTimer.time(i);else{i();for(const c of s)c.dataSync();o=Promise.resolve({kernelMs:Ls()-a})}if(de().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let c=0;c<s.length;c++){const u=s[c];u.data().then(h=>{KEe(h,u.dtype,e)})}return{kernelName:e,outputs:s,inputs:n,timeMs:o.then(c=>c.kernelMs),extraInfo:o.then(c=>c.getExtraProfileInfo!=null?c.getExtraProfileInfo():"")}}logKernelProfile(e){const{kernelName:n,outputs:r,timeMs:s,inputs:i,extraInfo:o}=e;r.forEach(a=>{Promise.all([a.data(),s,o]).then(l=>{this.logger.logKernelProfile(n,a,l[0],l[1],i,l[2])})})}}function KEe(t,e,n){if(e!=="float32")return!1;for(let r=0;r<t.length;r++){const s=t[r];if(isNaN(s)||!isFinite(s))return console.warn(`Found ${s} in the result of '${n}'`),!0}return!1}let ZEe=class{logKernelProfile(e,n,r,s,i,o){const a=typeof s=="number"?Zh(`${s}ms`,9):s.error,l=Zh(e,25),c=n.rank,u=n.size,h=Zh(n.shape.toString(),14);let m="";for(const p in i){const y=i[p];if(y!=null){const v=y.shape||n.shape,x=v.length;m+=`${p}: ${x}D ${x>0?v:""} `}}console.log(`%c${l}	%c${a}	%c${c}D ${h}	%c${u}	%c${m}	%c${o}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XEe(t,e,n){const r={},s={};for(let l=0;l<e.length;l++)r[e[l].id]=!0;for(let l=0;l<t.length;l++){const c=t[l],u=c.inputs;for(const h in u){const m=u[h];let p=!1;for(let y=0;y<e.length;y++)if(r[m.id]){c.outputs.forEach(v=>r[v.id]=!0),p=!0,s[c.id]=!0;break}if(p)break}}const i={};i[n.id]=!0;const o={};for(let l=t.length-1;l>=0;l--){const c=t[l],u=c.inputs;for(let h=0;h<c.outputs.length;h++)if(i[c.outputs[h].id]){for(const m in u)i[u[m].id]=!0,o[c.id]=!0;break}}const a=[];for(let l=0;l<t.length;l++){const c=t[l];if(s[c.id]&&o[c.id]){const u={};for(const m in c.inputs){const p=c.inputs[m];r[p.id]&&(u[m]=p)}const h=Object.assign({},c);h.inputs=u,h.outputs=c.outputs,a.push(h)}}return a}function YEe(t,e,n,r){for(let s=e.length-1;s>=0;s--){const i=e[s],o=[];if(i.outputs.forEach(l=>{const c=t[l.id];c!=null?o.push(c):o.push(null)}),i.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${i.kernelName}.`);const a=i.gradient(o);for(const l in i.inputs){if(!(l in a))throw new Error(`Cannot backprop through input ${l}. Available gradients found: ${Object.keys(a)}.`);const c=n(()=>a[l]());if(c.dtype!=="float32")throw new Error(`Error in gradient for op ${i.kernelName}. The gradient of input ${l} must have 'float32' dtype, but has '${c.dtype}'`);const u=i.inputs[l];if(!Zt(c.shape,u.shape))throw new Error(`Error in gradient for op ${i.kernelName}. The gradient of input '${l}' has shape '${c.shape}', which does not match the shape of the input '${u.shape}'`);if(t[u.id]==null)t[u.id]=c;else{const h=t[u.id];t[u.id]=r(h,c),h.dispose()}}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GL=20,Km=3,_k=7;function JEe(t,e,n,r){const s=qe(e),i=QEe(t,e,n,s),o=e.length,a=Tv(t,e,n,s,i),l=["Tensor"];return r&&(l.push(`  dtype: ${n}`),l.push(`  rank: ${o}`),l.push(`  shape: [${e}]`),l.push("  values:")),l.push(a.map(c=>"    "+c).join(`
`)),l.join(`
`)}function QEe(t,e,n,r){const s=pe(e),i=r[r.length-1],o=new Array(i).fill(0),a=e.length,l=n==="complex64"?lp(t):t;if(a>1)for(let c=0;c<s/i;c++){const u=c*i;for(let h=0;h<i;h++)o[h]=Math.max(o[h],ap(l[u+h],0,n).length)}return o}function ap(t,e,n){let r;return Array.isArray(t)?r=`${parseFloat(t[0].toFixed(_k))} + ${parseFloat(t[1].toFixed(_k))}j`:d0(t)?r=`'${t}'`:n==="bool"?r=e7(t):r=parseFloat(t.toFixed(_k)).toString(),Zh(r,e)}function e7(t){return t===0?"false":"true"}function Tv(t,e,n,r,s,i=!0){const o=n==="complex64"?2:1,a=e[0],l=e.length;if(l===0){if(n==="complex64"){const v=lp(t);return[ap(v[0],0,n)]}return n==="bool"?[e7(t[0])]:[t[0].toString()]}if(l===1){if(a>GL){const x=Km*o;let b=Array.from(t.slice(0,x)),w=Array.from(t.slice((a-Km)*o,a*o));return n==="complex64"&&(b=lp(b),w=lp(w)),["["+b.map((E,N)=>ap(E,s[N],n)).join(", ")+", ..., "+w.map((E,N)=>ap(E,s[a-Km+N],n)).join(", ")+"]"]}return["["+(n==="complex64"?lp(t):Array.from(t)).map((x,b)=>ap(x,s[b],n)).join(", ")+"]"]}const c=e.slice(1),u=r.slice(1),h=r[0]*o,m=[];if(a>GL){for(let v=0;v<Km;v++){const x=v*h,b=x+h;m.push(...Tv(t.slice(x,b),c,n,u,s,!1))}m.push("...");for(let v=a-Km;v<a;v++){const x=v*h,b=x+h;m.push(...Tv(t.slice(x,b),c,n,u,s,v===a-1))}}else for(let v=0;v<a;v++){const x=v*h,b=x+h;m.push(...Tv(t.slice(x,b),c,n,u,s,v===a-1))}const p=l===2?",":"";m[0]="["+(a>0?m[0]+p:"");for(let v=1;v<m.length-1;v++)m[v]=" "+m[v]+p;let y=`,
`;for(let v=2;v<l;v++)y+=`
`;return m[m.length-1]=" "+m[m.length-1]+"]"+(i?"":y),m}function lp(t){const e=[];for(let n=0;n<t.length;n+=2)e.push([t[n],t[n+1]]);return e}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Zr{constructor(e,n,r){if(this.dtype=n,this.shape=e.slice(),this.size=pe(e),r!=null){const s=r.length;F(s===this.size,()=>`Length of values '${s}' does not match the size inferred by the shape '${this.size}'.`)}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||Jn(n,this.size),this.strides=qe(e)}set(e,...n){n.length===0&&(n=[0]),F(n.length===this.rank,()=>`The number of provided coordinates (${n.length}) must match the rank (${this.rank})`);const r=this.locToIndex(n);this.values[r]=e}get(...e){e.length===0&&(e=[0]);let n=0;for(const s of e){if(s<0||s>=this.shape[n]){const i=`Requested out of range element at ${e}.   Buffer shape=${this.shape}`;throw new Error(i)}n++}let r=e[e.length-1];for(let s=0;s<e.length-1;++s)r+=this.strides[s]*e[s];return this.values[r]}locToIndex(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];let n=e[e.length-1];for(let r=0;r<e.length-1;++r)n+=this.strides[r]*e[r];return n}indexToLoc(e){if(this.rank===0)return[];if(this.rank===1)return[e];const n=new Array(this.shape.length);for(let r=0;r<n.length-1;++r)n[r]=Math.floor(e/this.strides[r]),e-=n[r]*this.strides[r];return n[n.length-1]=e,n}get rank(){return this.shape.length}toTensor(){return Lo().makeTensor(this.values,this.shape,this.dtype)}}let Lo=null,vh=null;function eke(t){Lo=t}function tke(t){vh=t}class gr{constructor(e,n,r,s){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=n||"float32",this.size=pe(e),this.strides=qe(e),this.dataId=r,this.id=s,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return vh.buffer(this.shape,this.dtype,e)}bufferSync(){return vh.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return Vo(this.shape,e,this.dtype==="complex64")}arraySync(){return Vo(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();const e=Lo().read(this.dataId);if(this.dtype==="string"){const n=await e;try{return n.map(r=>jc(r))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),Lo().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();const e=Lo().readSync(this.dataId);if(this.dtype==="string")try{return e.map(n=>jc(n))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await Lo().read(this.dataId);return this.dtype==="string"?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),Lo().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return vh.print(this,e)}clone(){return this.throwIfDisposed(),vh.clone(this)}toString(e=!1){const n=this.dataSync();return JEe(n,this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),vh.cast(this,e)}variable(e=!0,n,r){return this.throwIfDisposed(),Lo().makeVariable(this,e,n,r)}}Object.defineProperty(gr,Symbol.hasInstance,{value:t=>!!t&&t.data!=null&&t.dataSync!=null&&t.throwIfDisposed!=null});function fe(){return p$("Tensor",()=>gr)}fe();class O1 extends gr{constructor(e,n,r,s){super(e.shape,e.dtype,e.dataId,s),this.trainable=n,this.name=r}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!Zt(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);Lo().disposeTensor(this),this.dataId=e.dataId,Lo().incRef(this,null)}dispose(){Lo().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(O1,Symbol.hasInstance,{value:t=>t instanceof gr&&t.assign!=null&&t.assign instanceof Function});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var WL;(function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"})(WL||(WL={}));var o_;(function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"})(o_||(o_={}));var a_;(function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"})(a_||(a_={}));var l_;(function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"})(l_||(l_={}));var c_;(function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"})(c_||(c_={}));const nke={float32:l_,int32:o_,bool:a_,complex64:c_};function ci(t,e){if(t==="string"||e==="string"){if(t==="string"&&e==="string")return"string";throw new Error(`Can not upcast ${t} with ${e}`)}return nke[t][e]}function sI(t){return ci(t,"int32")}function t7(t){return t!=null&&typeof t=="object"&&"texture"in t&&t.texture instanceof WebGLTexture}function n7(t){return typeof GPUBuffer<"u"&&t!=null&&typeof t=="object"&&"buffer"in t&&t.buffer instanceof GPUBuffer}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function er(t,e){if(t.dtype===e.dtype)return[t,e];const n=ci(t.dtype,e.dtype);return[t.cast(n),e.cast(n)]}function r7(t){const e=[];return s7(t,e,new Set),e}function s7(t,e,n){if(t==null)return;if(t instanceof gr){e.push(t);return}if(!rke(t))return;const r=t;for(const s in r){const i=r[s];n.has(i)||(n.add(i),s7(i,e,n))}}function rke(t){return Array.isArray(t)||typeof t=="object"}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sk(t){return t.kernelName!=null}class qL{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class Nf{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new qL}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n];if(await this.initializeBackend(r).success){await this.setBackend(r);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){const{name:e,asyncInit:n}=this.initializeBackendsAndReturnBest();if(n)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry))if(e in this.registryFactory){const{asyncInit:n}=this.initializeBackend(e);if(n)return null}else return null;return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,n,r=1){return e in this.registryFactory?(Ni(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:n,priority:r},!0)}async setBackend(e){if(this.registryFactory[e]==null)throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,this.registry[e]==null){this.backendInstance=null;const{success:n,asyncInit:r}=this.initializeBackend(e);if(!(r?await n:n))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new qEe(this.backendInstance),!0}setupRegisteredKernels(){zL(this.backendName).forEach(n=>{n.setupFunc!=null&&n.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){zL(e).forEach(r=>{r.disposeFunc!=null&&r.disposeFunc(this.registry[e])})}initializeBackend(e){const n=this.registryFactory[e];if(n==null)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{const r=n.factory();if(r&&!(r instanceof u$)&&typeof r.then=="function"){const s=++this.pendingBackendInitId,i=r.then(o=>s<this.pendingBackendInitId?!1:(this.registry[e]=o,this.pendingBackendInit=null,!0)).catch(o=>(s<this.pendingBackendInitId||(this.pendingBackendInit=null,Ni(`Initialization of backend ${e} failed`),Ni(o.stack||o.message)),!1));return this.pendingBackendInit=i,{success:i,asyncInit:!0}}else return this.registry[e]=r,{success:!0,asyncInit:!1}}catch(r){return Ni(`Initialization of backend ${e} failed`),Ni(r.stack||r.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,n)=>this.registryFactory[n].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n],{success:s,asyncInit:i}=this.initializeBackend(r);if(i||s)return{name:r,asyncInit:i}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,n){const r=this.state.tensorInfo.get(n),s=r.backend,i=this.readSync(n),o=s.refCount(n);s.disposeData(n,!0),r.backend=e,e.move(n,i,r.shape,r.dtype,o),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,n){let r=null;if(n==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");n=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=e}let s;return this.scopedRun(()=>this.startScope(r),()=>this.endScope(s),()=>(s=n(),s instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),s))}scopedRun(e,n,r){e();try{const s=r();return n(),s}catch(s){throw n(),s}}nextTensorId(){return Nf.nextTensorId++}nextVariableId(){return Nf.nextVariableId++}clone(e){const n=se.runKernel(R0,{x:e}),r={x:e},s=o=>({x:()=>{const a="float32",l={x:o},c={dtype:a};return se.runKernel(v0,l,c)}}),i=[];return this.addTapeNode(this.state.activeScope.name,r,[n],s,i,{}),n}runKernel(e,n,r){if(this.backendName==null&&this.backend,!(LL(e,this.backendName)!=null))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:n,attrs:r})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,n,r){const s=this.backend.numDataIds();let i=0;r.forEach(l=>{i+=l.dtype==="complex64"?3:1});const o=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],a=s-n-i-o;if(a>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${a} data ids) after running '${e}'`)}runKernelFunc(e){let n,r=[];const s=this.isTapeOn(),i=this.state.numBytes,o=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let a;this.backendName==null&&this.backend;let l;const c=Sk(e)?e.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(Sk(e)){const{kernelName:y,inputs:v,attrs:x}=e;this.backendName==null&&this.backend;const b=LL(y,this.backendName);F(b!=null,()=>`Cannot find registered kernel '${y}' for backend '${this.backendName}'`),a=()=>{const w=this.backend.numDataIds();l=b.kernelFunc({inputs:v,attrs:x,backend:this.backend});const E=Array.isArray(l)?l:[l];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(y,w,E);const N=E.map(C=>C.rank!=null?C:this.makeTensorFromTensorInfo(C));if(s){const C=this.getTensorsForGradient(y,v,N);r=this.saveTensorsForBackwardMode(C)}return N}}else{const{forwardFunc:y}=e,v=x=>{s&&(r=x.map(b=>this.keep(this.clone(b))))};a=()=>{const x=this.backend.numDataIds();l=this.tidy(()=>y(this.backend,v));const b=Array.isArray(l)?l:[l];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(c,x,b),b}}const{inputs:u,attrs:h}=e,m=Sk(e)?null:e.backwardsFunc;let p;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?n=a():(p=this.profiler.profileKernel(c,u,()=>a()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(p),n=p.outputs)}),s&&this.addTapeNode(c,u,n,m,r,h),this.state.profiling&&this.state.activeProfile.kernels.push({name:c,bytesAdded:this.state.numBytes-i,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-o,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(u).map(y=>u[y]!=null?u[y].shape:null),outputShapes:n.map(y=>y.shape),kernelTimeMs:p.timeMs,extraInfo:p.extraInfo}),Array.isArray(l)?n:n[0]}saveTensorsForBackwardMode(e){return e.map(r=>this.keep(this.clone(r)))}getTensorsForGradient(e,n,r){const s=ML(e);if(s!=null){const i=s.inputsToSave||[],o=s.outputsToSave||[];let a;s.saveAllInputs?(F(Array.isArray(n),()=>"saveAllInputs is true, expected inputs to be an array."),a=Object.keys(n).map(c=>n[c])):a=i.map(c=>n[c]);const l=r.filter((c,u)=>o[u]);return a.concat(l)}return[]}makeTensor(e,n,r,s){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",s=s||this.backend;let i=e;r==="string"&&d0(e[0])&&(i=e.map(l=>Rc(l)));const o=s.write(i,n,r),a=new gr(n,r,o,this.nextTensorId());if(this.trackTensor(a,s),r==="string"){const l=this.state.tensorInfo.get(o),c=NEe(i);this.state.numBytes+=c-l.bytes,l.bytes=c}return a}makeTensorFromDataId(e,n,r,s){r=r||"float32";const i={dataId:e,shape:n,dtype:r};return this.makeTensorFromTensorInfo(i,s)}makeTensorFromTensorInfo(e,n){const{dataId:r,shape:s,dtype:i}=e,o=new gr(s,i,r,this.nextTensorId());return this.trackTensor(o,n),o}makeVariable(e,n=!0,r,s){r=r||this.nextVariableId().toString(),s!=null&&s!==e.dtype&&(e=e.cast(s));const i=new O1(e,n,r,this.nextTensorId());if(this.state.registeredVariables[i.name]!=null)throw new Error(`Variable with name ${i.name} was already registered`);return this.state.registeredVariables[i.name]=i,this.incRef(i,this.backend),i}trackTensor(e,n){this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++;let r=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(r=e.size*I1(e.dtype)),this.state.numBytes+=r,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:n||this.backend,dtype:e.dtype,shape:e.shape,bytes:r})),e instanceof O1||this.track(e)}incRef(e,n){this.trackTensor(e,n),this.backend.incRef(e.dataId)}removeDataId(e,n){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===n&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const n=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,e.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=n.bytes),e.dtype!=="complex64"&&e.dtype!=="string"){const r=e.size*I1(e.dtype);this.state.numBytes-=r}n.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,n.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const n=this.state.registeredVariables[e];this.disposeVariable(n)}}disposeVariable(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const n=this.state.numBytes,r=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(s=>s.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r;for(const s of this.state.activeProfile.kernels)s.kernelTimeMs=await s.kernelTimeMs,s.extraInfo=await s.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(e,n,r,s,i,o){const a={id:this.state.nextTapeNodeId++,kernelName:e,inputs:n,outputs:r,saved:i},l=ML(e);l!=null&&(s=l.gradFunc),s!=null&&(a.gradient=c=>(c=c.map((u,h)=>{if(u==null){const m=r[h],p=cs(m.size,m.dtype);return this.makeTensor(p,m.shape,m.dtype)}return u}),s(c.length>1?c:c[0],i,o))),this.state.activeTape.push(a)}keep(e){return e.kept=!0,e}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(n.name=e),this.state.scopeStack.push(n),this.state.activeScope=n}endScope(e){const n=r7(e),r=new Set(n.map(i=>i.id));for(let i=0;i<this.state.activeScope.track.length;i++){const o=this.state.activeScope.track[i];!o.kept&&!r.has(o.id)&&o.dispose()}const s=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach(i=>{!i.kept&&i.scopeId===s.id&&this.track(i)})}gradients(e,n,r,s=!1){if(F(n.length>0,()=>"gradients() received an empty list of xs."),r!=null&&r.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${r.dtype}'`);const i=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));F(i instanceof gr,()=>"The result y returned by f() must be a tensor.");const o=XEe(this.state.activeTape,n,i);if(!s&&o.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const a={};a[i.id]=r??ske(i.shape),YEe(a,o,c=>this.tidy(c),ike);const l=n.map(c=>a[c.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(c=>{for(const u of c.saved)u.dispose()}),this.state.activeTape=null),{value:i,grads:l}})}customGrad(e){return F(QC(e),()=>"The f passed in customGrad(f) must be a function."),(...n)=>{F(n.every(a=>a instanceof gr),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let r;const s={};n.forEach((a,l)=>{s[l]=a});const i=(a,l)=>(r=e(...n,l),F(r.value instanceof gr,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),F(QC(r.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),r.value),o=(a,l)=>{const c=r.gradFunc(a,l),u=Array.isArray(c)?c:[c];F(u.length===n.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),F(u.every(m=>m instanceof gr),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const h={};return u.forEach((m,p)=>{h[p]=()=>m}),h};return this.runKernelFunc({forwardFunc:i,backwardsFunc:o,inputs:s})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,n){return this.state.tensorInfo.get(e).backend.readToGPU(e,n)}async time(e){const n=Ls(),r=await this.backend.time(e);return r.wallMs=Ls()-n,r}track(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new qL;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}Nf.nextTensorId=0;Nf.nextVariableId=0;function ske(t){const e=f$(pe(t),"float32");return se.makeTensor(e,t,"float32")}function i7(){const t=wj();if(t._tfengine==null){const e=new SEe(t);t._tfengine=new Nf(e)}return AEe(t._tfengine.ENV),eke(()=>t._tfengine),t._tfengine}const se=i7();function ike(t,e){const n={a:t,b:e};return se.runKernel(tm,n)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oke(){return typeof navigator<"u"&&navigator!=null}function o7(t){if(t||oke()){if(t||(t=navigator),t.product==="ReactNative")return!0;const e=t.userAgent||t.vendor||(typeof window<"u"?window.opera:"");if(!e){const n=t;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}return!1}function a7(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hs=de();Hs.registerFlag("DEBUG",()=>!1,t=>{t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});Hs.registerFlag("IS_BROWSER",()=>a7());Hs.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");Hs.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));Hs.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor));Hs.registerFlag("PROD",()=>!1);Hs.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>Hs.getBool("DEBUG"));Hs.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);Hs.registerFlag("IS_TEST",()=>!1);Hs.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>Hs.getBool("DEBUG"));Hs.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);Hs.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1);Hs.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kw(t,e){let n=t;if(go(t))return e==="string"?[]:[t.length];if(t7(t)){const s=t.channels||"RGBA";return[t.height,t.width*s.length]}else if(n7(t))return[t.buffer.size/(e==null?4:I1(e))];if(!Array.isArray(t))return[];const r=[];for(;Array.isArray(n)||go(n)&&e!=="string";)r.push(n.length),n=n[0];return Array.isArray(t)&&de().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&l7(t,r,[]),r}function l7(t,e,n){if(n=n||[],!Array.isArray(t)&&!go(t)){F(e.length===0,()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${e[0]} elements`);return}F(e.length>0,()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${t.length} elements`),F(t.length===e[0],()=>`Element arr[${n.join("][")}] should have ${e[0]} elements, but has ${t.length} elements`);const r=e.slice(1);for(let s=0;s<t.length;++s)l7(t[s],r,n.concat(s))}function KL(t,e,n,r){if(t!=="string_or_numeric"){if(t==null)throw new Error("Expected dtype cannot be null.");if(t!=="numeric"&&t!==e||t==="numeric"&&e==="string")throw new Error(`Argument '${n}' passed to '${r}' must be ${t} tensor, but got ${e} tensor`)}}function K(t,e,n,r="numeric"){if(t instanceof fe())return KL(r,t.dtype,e,n),t;let s=Qf(t);if(s!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(s=r),KL(r,s,e,n),t==null||!go(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){const l=t==null?"null":t.constructor.name;throw new Error(`Argument '${e}' passed to '${n}' must be a Tensor or TensorLike, but got '${l}'`)}const i=Kw(t,s);!go(t)&&!Array.isArray(t)&&(t=[t]);const a=s!=="string"?Rd(t,s):ld(t,[],!0);return se.makeTensor(a,i,s)}function c7(t,e,n,r="numeric"){if(!Array.isArray(t))throw new Error(`Argument ${e} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return t.map((i,o)=>K(i,`${e}[${o}]`,n,r))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ake="__op";function oe(t){const e=Object.keys(t);if(e.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${e.length} keys.`);let n=e[0];const r=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n=n+ake;const s=(...i)=>{se.startScope(n);try{const o=r(...i);return m$(o)&&console.error("Cannot return a Promise inside of tidy."),se.endScope(o),o}catch(o){throw se.endScope(null),o}};return Object.defineProperty(s,"name",{value:n,configurable:!0}),s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lke(t,e){const n=K(t,"real","complex"),r=K(e,"imag","complex");h$(n.shape,r.shape,`real and imag shapes, ${n.shape} and ${r.shape}, must match in call to tf.complex().`);const s={real:n,imag:r};return se.runKernel(k$,s)}const Cf=oe({complex_:lke});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zw(t,e,n,r){if(r==null)r=Qf(t);else if(r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(n7(t)||t7(t)){if(r!=="float32"&&r!=="int32")throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${r}.`);return se.backend.createTensorFromGPUData(t,e||n,r)}if(!go(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){Bl(e);const s=pe(e),i=pe(n);F(s===i,()=>`Based on the provided shape, [${e}], the tensor should have ${s} values but has ${i}`);for(let o=0;o<n.length;++o){const a=n[o],l=o===n.length-1?a!==pe(e.slice(o)):!0;F(n[o]===e[o]||!l,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${e}). `)}}return!go(t)&&!Array.isArray(t)&&(t=[t]),e=e||n,t=r!=="string"?Rd(t,r):ld(t,[],!0),se.makeTensor(t,e,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u7(t,e,n){const r=Kw(t,n);return Zw(t,e,r,n)}class nm{static join(e){return new nm(e).slice()}constructor(e){if(this.shards=[],this.previousShardIndex=0,e==null||(e instanceof Array||(e=[e]),e=e.map(r=>go(r)?r.buffer:r),e.length===0))return;this.bufferUniformSize=e[0].byteLength;let n=0;for(let r=0;r<e.length;r++){const s=e[r];r!==e.length-1&&s.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);const i=n+s.byteLength;this.shards.push({buffer:s,start:n,end:i}),n=i}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(e=0,n=this.byteLength){if(this.shards.length===0)return new ArrayBuffer(0);if(e=isNaN(Number(e))?0:e,n=isNaN(Number(n))?0:n,e=Math.max(0,e),n=Math.min(this.byteLength,n),n<=e)return new ArrayBuffer(0);const r=this.findShardForByte(e);if(r===-1)throw new Error(`Could not find start shard for byte ${e}`);const s=n-e,i=new ArrayBuffer(s),o=new Uint8Array(i);let a=0;for(let l=r;l<this.shards.length;l++){const c=this.shards[l],h=e+a-c.start,m=a,y=Math.min(n,c.end)-c.start,v=new Uint8Array(c.buffer,h,y-h);if(o.set(v,m),a+=v.length,n<c.end)break}return i}findShardForByte(e){if(this.shards.length===0||e<0||e>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(e/this.bufferUniformSize),this.previousShardIndex;function n(s){return e<s.start?-1:e>=s.end?1:0}if(n(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;const r=cke(this.shards,n);return r===-1?-1:(this.previousShardIndex=r,this.previousShardIndex)}}function cke(t,e){let n=0,r=t.length;for(;n<=r;){const s=Math.floor((r-n)/2)+n,i=e(t[s]);if(i===0)return s;i<0?r=s:n=s+1}return-1}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ua(){return se}function u_(){return se.memory()}function ue(t,e){return se.tidy(t,e)}function _t(t){r7(t).forEach(n=>n.dispose())}function Ta(t){return se.keep(t)}function d7(t,e,n=1){return se.registerBackend(t,e,n)}function uke(){return se.backend}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZL=4;async function XL(t,e){const n=[],r=[],s=Array.isArray(t)?t.map(o=>o.name):Object.keys(t);for(let o=0;o<s.length;++o){const a=s[o],l=Array.isArray(t)?t[o].tensor:t[a];if(l.dtype!=="float32"&&l.dtype!=="int32"&&l.dtype!=="bool"&&l.dtype!=="string"&&l.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${a}': ${l.dtype}`);const c={name:a,shape:l.shape,dtype:l.dtype};if(l.dtype==="string"){const u=new Promise(async h=>{const m=await l.bytes(),p=m.reduce((x,b)=>x+b.length,0)+ZL*m.length,y=new Uint8Array(p);let v=0;for(let x=0;x<m.length;x++){const b=m[x],w=new Uint8Array(new Uint32Array([b.length]).buffer);y.set(w,v),v+=ZL,y.set(b,v),v+=b.length}h(y)});r.push(u)}else r.push(l.data());e!=null&&(c.group=e),n.push(c)}const i=await Promise.all(r);return{data:dke(i),specs:n}}function dke(t){if(t===null)throw new Error(`Invalid input value: ${JSON.stringify(t)}`);let e=0;const n=[];t.forEach(i=>{if(e+=i.byteLength,n.push(i.byteLength===i.buffer.byteLength?i:new i.constructor(i)),!(i instanceof Float32Array||i instanceof Int32Array||i instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${i.constructor.name}`)});const r=new Uint8Array(e);let s=0;return n.forEach(i=>{r.set(new Uint8Array(i.buffer),s),s+=i.byteLength}),r.buffer}const iI=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function YL(t){return iI?Buffer.byteLength(t,"utf8"):new Blob([t]).size}function hke(t){if(iI)return Buffer.from(t).toString("base64");const e=new Uint8Array(t);let n="";for(let r=0,s=e.length;r<s;r++)n+=String.fromCharCode(e[r]);return btoa(n)}function fke(t){if(iI){const r=Buffer.from(t,"base64");return r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)}const e=atob(t),n=new Uint8Array(e.length);for(let r=0;r<e.length;++r)n.set([e.charCodeAt(r)],r);return n.buffer}function mke(t){return nm.join(t)}function h7(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:t.modelTopology==null?0:YL(JSON.stringify(t.modelTopology)),weightSpecsBytes:t.weightSpecs==null?0:YL(JSON.stringify(t.weightSpecs)),weightDataBytes:t.weightData==null?0:new nm(t.weightData).byteLength}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xs{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return xs.instance==null&&(xs.instance=new xs),xs.instance}static registerSaveRouter(e){xs.getInstance().saveRouters.push(e)}static registerLoadRouter(e){xs.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return xs.getHandlers(e,"save")}static getLoadHandlers(e,n){return xs.getHandlers(e,"load",n)}static getHandlers(e,n,r){const s=[];return(n==="load"?xs.getInstance().loadRouters:xs.getInstance().saveRouters).forEach(o=>{const a=o(e,r);a!==null&&s.push(a)}),s}}const pke=t=>xs.getSaveHandlers(t);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d_="tensorflowjs",h_=1,Bu="models_store",bc="model_info_store";function f7(){if(!de().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const t=typeof window>"u"?self:window,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function f_(t){const e=t.result;e.createObjectStore(Bu,{keyPath:"modelPath"}),e.createObjectStore(bc,{keyPath:"modelPath"})}class cd{constructor(e){if(this.indexedDB=f7(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,n){return new Promise((r,s)=>{const i=this.indexedDB.open(d_,h_);i.onupgradeneeded=()=>f_(i),i.onsuccess=()=>{const o=i.result;if(n==null){const a=o.transaction(Bu,"readonly"),c=a.objectStore(Bu).get(this.modelPath);c.onsuccess=()=>{if(c.result==null)return o.close(),s(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));r(c.result.modelArtifacts)},c.onerror=u=>(o.close(),s(c.error)),a.oncomplete=()=>o.close()}else{n.weightData=nm.join(n.weightData);const a=h7(n),l=o.transaction(bc,"readwrite");let c=l.objectStore(bc),u;try{u=c.put({modelPath:this.modelPath,modelArtifactsInfo:a})}catch(m){return s(m)}let h;u.onsuccess=()=>{h=o.transaction(Bu,"readwrite");const m=h.objectStore(Bu);let p;try{p=m.put({modelPath:this.modelPath,modelArtifacts:n,modelArtifactsInfo:a})}catch(y){return s(y)}p.onsuccess=()=>r({modelArtifactsInfo:a}),p.onerror=y=>{c=l.objectStore(bc);const v=c.delete(this.modelPath);v.onsuccess=()=>(o.close(),s(p.error)),v.onerror=x=>(o.close(),s(p.error))}},u.onerror=m=>(o.close(),s(u.error)),l.oncomplete=()=>{h==null?o.close():h.oncomplete=()=>o.close()}}},i.onerror=o=>s(i.error)})}}cd.URL_SCHEME="indexeddb://";const m7=t=>de().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(cd.URL_SCHEME)?gke(t.slice(cd.URL_SCHEME.length)):null;xs.registerSaveRouter(m7);xs.registerLoadRouter(m7);function gke(t){return new cd(t)}function yke(t){return t.startsWith(cd.URL_SCHEME)?t.slice(cd.URL_SCHEME.length):t}class bke{constructor(){this.indexedDB=f7()}async listModels(){return new Promise((e,n)=>{const r=this.indexedDB.open(d_,h_);r.onupgradeneeded=()=>f_(r),r.onsuccess=()=>{const s=r.result,i=s.transaction(bc,"readonly"),a=i.objectStore(bc).getAll();a.onsuccess=()=>{const l={};for(const c of a.result)l[c.modelPath]=c.modelArtifactsInfo;e(l)},a.onerror=l=>(s.close(),n(a.error)),i.oncomplete=()=>s.close()},r.onerror=s=>n(r.error)})}async removeModel(e){return e=yke(e),new Promise((n,r)=>{const s=this.indexedDB.open(d_,h_);s.onupgradeneeded=()=>f_(s),s.onsuccess=()=>{const i=s.result,o=i.transaction(bc,"readwrite"),a=o.objectStore(bc),l=a.get(e);let c;l.onsuccess=()=>{if(l.result==null)return i.close(),r(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{const u=a.delete(e),h=()=>{c=i.transaction(Bu,"readwrite");const p=c.objectStore(Bu).delete(e);p.onsuccess=()=>n(l.result.modelArtifactsInfo),p.onerror=y=>r(l.error)};u.onsuccess=h,u.onerror=m=>(h(),i.close(),r(l.error))}},l.onerror=u=>(i.close(),r(l.error)),o.oncomplete=()=>{c==null?i.close():c.oncomplete=()=>i.close()}},s.onerror=i=>r(s.error)})}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ul="/",xh="tensorflowjs_models",p7="info",vke="model_topology",xke="weight_specs",wke="weight_data",Eke="model_metadata";function g7(t){return{info:[xh,t,p7].join(ul),topology:[xh,t,vke].join(ul),weightSpecs:[xh,t,xke].join(ul),weightData:[xh,t,wke].join(ul),modelMetadata:[xh,t,Eke].join(ul)}}function y7(t){for(const e of Object.values(t))window.localStorage.removeItem(e)}function kke(t){const e=t.split(ul);if(e.length<3)throw new Error(`Invalid key format: ${t}`);return e.slice(1,e.length-1).join(ul)}function Nke(t){return t.startsWith(ud.URL_SCHEME)?t.slice(ud.URL_SCHEME.length):t}class ud{constructor(e){if(!de().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=g7(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const n=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),s=h7(e),i=nm.join(e.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(s)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,hke(i));const o={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:e.signature!=null?e.signature:void 0,userDefinedMetadata:e.userDefinedMetadata!=null?e.userDefinedMetadata:void 0,modelInitializer:e.modelInitializer!=null?e.modelInitializer:void 0,initializerSignature:e.initializerSignature!=null?e.initializerSignature:void 0,trainingConfig:e.trainingConfig!=null?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(o)),{modelArtifactsInfo:s}}catch{throw y7(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${s.modelTopologyBytes}, weightSpecsBytes=${s.weightSpecsBytes}, weightDataBytes=${s.weightDataBytes}.`)}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(e==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const n={},r=JSON.parse(this.LS.getItem(this.keys.topology));if(r==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);n.modelTopology=r;const s=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(s==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);n.weightSpecs=s;const i=this.LS.getItem(this.keys.modelMetadata);if(i!=null){const a=JSON.parse(i);n.format=a.format,n.generatedBy=a.generatedBy,n.convertedBy=a.convertedBy,a.signature!=null&&(n.signature=a.signature),a.userDefinedMetadata!=null&&(n.userDefinedMetadata=a.userDefinedMetadata),a.modelInitializer!=null&&(n.modelInitializer=a.modelInitializer),a.initializerSignature!=null&&(n.initializerSignature=a.initializerSignature),a.trainingConfig!=null&&(n.trainingConfig=a.trainingConfig)}const o=this.LS.getItem(this.keys.weightData);if(o==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return n.weightData=fke(o),n}}ud.URL_SCHEME="localstorage://";const b7=t=>de().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(ud.URL_SCHEME)?Cke(t.slice(ud.URL_SCHEME.length)):null;xs.registerSaveRouter(b7);xs.registerLoadRouter(b7);function Cke(t){return new ud(t)}class _ke{constructor(){F(de().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),F(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const e={},n=xh+ul,r=ul+p7;for(let s=0;s<this.LS.length;++s){const i=this.LS.key(s);if(i.startsWith(n)&&i.endsWith(r)){const o=kke(i);e[o]=JSON.parse(this.LS.getItem(i))}}return e}async removeModel(e){e=Nke(e);const n=g7(e);if(this.LS.getItem(n.info)==null)throw new Error(`Cannot find model at path '${e}'`);const r=JSON.parse(this.LS.getItem(n.info));return y7(n),r}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JL="://";class ha{constructor(){this.managers={}}static getInstance(){return ha.instance==null&&(ha.instance=new ha),ha.instance}static registerManager(e,n){F(e!=null,()=>"scheme must not be undefined or null."),e.endsWith(JL)&&(e=e.slice(0,e.indexOf(JL))),F(e.length>0,()=>"scheme must not be an empty string.");const r=ha.getInstance();F(r.managers[e]==null,()=>`A model store manager is already registered for scheme '${e}'.`),r.managers[e]=n}static getManager(e){const n=ha.getInstance().managers[e];if(n==null)throw new Error(`Cannot find model manager for scheme '${e}'`);return n}static getSchemes(){return Object.keys(ha.getInstance().managers)}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ske{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,n){return fetch(e,n)}now(){return performance.now()}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${n}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,n){return new TextDecoder(n).decode(e)}setTimeoutCustom(e,n){if(typeof window>"u"||!de().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(e,n);return}this.functionRefs.push(e),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},n),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",r=>{if(r.source===window&&r.data.name===this.messageName){r.stopPropagation();const s=this.functionRefs[r.data.index];s(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}isTypedArray(e){return Gj(e)}}if(de().get("IS_BROWSER")){de().setPlatform("browser",new Ske);try{ha.registerManager(ud.URL_SCHEME,new _ke)}catch{}try{ha.registerManager(cd.URL_SCHEME,new bke)}catch{}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tke={importFetch:()=>require("node-fetch")};let Tk;class $ke{constructor(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}fetch(e,n){return de().global.fetch!=null?de().global.fetch(e,n):(Tk==null&&(Tk=Tke.importFetch()),Tk(e,n))}now(){const e=process.hrtime();return e[0]*1e3+e[1]/1e6}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${n}`);return this.textEncoder.encode(e)}decode(e,n){return e.length===0?"":new this.util.TextDecoder(n).decode(e)}isTypedArray(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}}de().get("IS_NODE")&&!de().get("IS_BROWSER")&&de().setPlatform("node",new $ke);/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bt(t,e="float32",n){return e=e||"float32",Bl(t),new Zr(t,e,n)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ike(t,e){const n=K(t,"x","cast");if(!kEe(e))throw new Error(`Failed to cast to unknown dtype ${e}`);if(e==="string"&&n.dtype!=="string"||e!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");const r={x:n},s={dtype:e};return se.runKernel(v0,r,s)}const Me=oe({cast_:Ike});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ake(t){const n={x:K(t,"x","clone","string_or_numeric")};return se.runKernel(R0,n)}const Ju=oe({clone_:Ake});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rke(t,e=!1){console.log(t.toString(e))}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */i7();const Pke={buffer:bt,cast:Me,clone:Ju,print:Rke};tke(Pke);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dke(t,e){let n=K(t,"a","add"),r=K(e,"b","add");[n,r]=er(n,r);const s={a:n,b:r};return se.runKernel(tm,s)}const _e=oe({add_:Dke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oke(t,e){let n=K(t,"a","floorDiv"),r=K(e,"b","floorDiv");[n,r]=er(n,r);const s={a:n,b:r};return se.runKernel(I0,s)}const v7=oe({floorDiv_:Oke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lke(t,e){let n=K(t,"a","div"),r=K(e,"b","div");if([n,r]=er(n,r),n.dtype==="int32"&&r.dtype==="int32")return v7(n,r);const s={a:n,b:r},i={};return se.runKernel(N0,s,i)}const Ye=oe({div_:Lke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mke(t,e){let n=K(t,"a","mul"),r=K(e,"b","mul");[n,r]=er(n,r);const s={a:n,b:r};return se.runKernel(V0,s)}const re=oe({mul_:Mke});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zke(t){const e=K(t,"x","abs");if(e.dtype==="complex64"){const n={x:e};return se.runKernel(ew,n)}else{const n={x:e};return se.runKernel(qx,n)}}const ws=oe({abs_:zke});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fke(t){const n={x:K(t,"x","acos")};return se.runKernel(h0,n)}const Bke=oe({acos_:Fke});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vke(t){const n={x:K(t,"x","acosh")};return se.runKernel(f0,n)}const jke=oe({acosh_:Vke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uke(t,e=null,n=!1){const s={x:K(t,"x","all","bool")},i={axis:e,keepDims:n};return se.runKernel(y$,s,i)}const x7=oe({all_:Uke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hke(t,e=null,n=!1){const s={x:K(t,"x","any","bool")},i={axis:e,keepDims:n};return se.runKernel(b$,s,i)}const m_=oe({any_:Hke});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gke(t,e=0){const r={x:K(t,"x","argMax")},s={axis:e};return se.runKernel(Kx,r,s)}const vg=oe({argMax_:Gke});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wke(t,e=0){const r={x:K(t,"x","argMin")},s={axis:e};return se.runKernel(Zx,r,s)}const qke=oe({argMin_:Wke});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kke(t){const n={x:K(t,"x","asin")};return se.runKernel(m0,n)}const Zke=oe({asin_:Kke});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xke(t){const n={x:K(t,"x","asinh")};return se.runKernel(p0,n)}const Yke=oe({asinh_:Xke});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jke(t){const n={x:K(t,"x","atan")};return se.runKernel(g0,n)}const Qke=oe({atan_:Jke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eNe(t,e){let n=K(t,"a","atan2"),r=K(e,"b","atan2");[n,r]=er(n,r);const s={a:n,b:r};return se.runKernel(b0,s)}const tNe=oe({atan2_:eNe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nNe(t){const n={x:K(t,"x","atanh")};return se.runKernel(y0,n)}const rNe=oe({atanh_:nNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ay(t,e,n,r,s="NHWC",i){const o=t[3],a=[...e,o],l=jl(s);return Xr(t,a,n,i,r,null,null,l)}function xo(t,e,n,r,s,i,o="channelsLast"){const[a,l]=xg(e);let c;if(o==="channelsLast")c=[a,l,t[3],t[3]];else if(o==="channelsFirst")c=[a,l,t[1],t[1]];else throw new Error(`Unknown dataFormat ${o}`);return Xr(t,c,n,r,s,i,!1,o)}function Vl(t,e,n,r,s,i,o="NDHWC"){const[a,l,c]=p_(e);let u,h;if(o==="NDHWC")h="channelsLast",u=[a,l,c,t[4],t[4]];else if(o==="NCDHW")h="channelsFirst",u=[a,l,c,t[1],t[1]];else throw new Error(`Unknown dataFormat ${o}`);return eu(t,u,n,r,s,!1,h,i)}function Xr(t,e,n,r,s,i,o=!1,a="channelsLast"){let[l,c,u,h]=[-1,-1,-1,-1];if(a==="channelsLast")[l,c,u,h]=t;else if(a==="channelsFirst")[l,h,c,u]=t;else throw new Error(`Unknown dataFormat ${a}`);const[m,p,,y]=e,[v,x]=xg(n),[b,w]=xg(r),E=Yh(m,b),N=Yh(p,w),{padInfo:C,outHeight:S,outWidth:T}=oNe(s,c,u,v,x,E,N,i,a),I=o?y*h:y;let P;return a==="channelsFirst"?P=[l,I,S,T]:a==="channelsLast"&&(P=[l,S,T,I]),{batchSize:l,dataFormat:a,inHeight:c,inWidth:u,inChannels:h,outHeight:S,outWidth:T,outChannels:I,padInfo:C,strideHeight:v,strideWidth:x,filterHeight:m,filterWidth:p,effectiveFilterHeight:E,effectiveFilterWidth:N,dilationHeight:b,dilationWidth:w,inShape:t,outShape:P,filterShape:e}}function eu(t,e,n,r,s,i=!1,o="channelsLast",a){let[l,c,u,h,m]=[-1,-1,-1,-1,-1];if(o==="channelsLast")[l,c,u,h,m]=t;else if(o==="channelsFirst")[l,m,c,u,h]=t;else throw new Error(`Unknown dataFormat ${o}`);const[p,y,v,,x]=e,[b,w,E]=p_(n),[N,C,S]=p_(r),T=Yh(p,N),I=Yh(y,C),P=Yh(v,S),{padInfo:R,outDepth:D,outHeight:B,outWidth:Z}=aNe(s,c,u,h,b,w,E,T,I,P,a),z=i?x*m:x;let q;return o==="channelsFirst"?q=[l,z,D,B,Z]:o==="channelsLast"&&(q=[l,D,B,Z,z]),{batchSize:l,dataFormat:o,inDepth:c,inHeight:u,inWidth:h,inChannels:m,outDepth:D,outHeight:B,outWidth:Z,outChannels:z,padInfo:R,strideDepth:b,strideHeight:w,strideWidth:E,filterDepth:p,filterHeight:y,filterWidth:v,effectiveFilterDepth:T,effectiveFilterHeight:I,effectiveFilterWidth:P,dilationDepth:N,dilationHeight:C,dilationWidth:S,inShape:t,outShape:q,filterShape:e}}function sNe(t,e,n,r,s){r==null&&(r=oI(t,e,n));const i=t[0],o=t[1],a=wg((i-e+2*r)/n+1,s),l=wg((o-e+2*r)/n+1,s);return[a,l]}function iNe(t,e,n,r,s,i){s==null&&(s=oI(t,e[0],r[0]));const o=[0,0,0,n];for(let a=0;a<3;a++)t[a]+2*s>=e[a]&&(o[a]=wg((t[a]-e[a]+2*s)/r[a]+1,i));return o}function oI(t,e,n,r=1){const s=Yh(e,r);return Math.floor((t[0]*(n-1)-n+s)/2)}function xg(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function p_(t){return typeof t=="number"?[t,t,t]:t}function Yh(t,e){return e<=1?t:t+(t-1)*(e-1)}function oNe(t,e,n,r,s,i,o,a,l){let c,u,h;if(typeof t=="number"){c={top:t,bottom:t,left:t,right:t,type:t===0?"VALID":"NUMBER"};const p=sNe([e,n],i,r,t,a);u=p[0],h=p[1]}else if(t==="same"){u=Math.ceil(e/r),h=Math.ceil(n/s);const m=Math.max(0,(u-1)*r+i-e),p=Math.max(0,(h-1)*s+o-n),y=Math.floor(m/2),v=m-y,x=Math.floor(p/2),b=p-x;c={top:y,bottom:v,left:x,right:b,type:"SAME"}}else if(t==="valid")c={top:0,bottom:0,left:0,right:0,type:"VALID"},u=Math.ceil((e-i+1)/r),h=Math.ceil((n-o+1)/s);else if(typeof t=="object"){const m=l==="channelsLast"?t[1][0]:t[2][0],p=l==="channelsLast"?t[1][1]:t[2][1],y=l==="channelsLast"?t[2][0]:t[3][0],v=l==="channelsLast"?t[2][1]:t[3][1];c={top:m,bottom:p,left:y,right:v,type:m===0&&p===0&&y===0&&v===0?"VALID":"EXPLICIT"},u=wg((e-i+m+p)/r+1,a),h=wg((n-o+y+v)/s+1,a)}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:c,outHeight:u,outWidth:h}}function aNe(t,e,n,r,s,i,o,a,l,c,u){let h,m,p,y;if(t==="valid"&&(t=0),typeof t=="number"){h={top:t,bottom:t,left:t,right:t,front:t,back:t,type:t===0?"VALID":"NUMBER"};const x=iNe([e,n,r,1],[a,l,c],1,[s,i,o],t,u);m=x[0],p=x[1],y=x[2]}else if(t==="same"){m=Math.ceil(e/s),p=Math.ceil(n/i),y=Math.ceil(r/o);const v=(m-1)*s+a-e,x=(p-1)*i+l-n,b=(y-1)*o+c-r,w=Math.floor(v/2),E=v-w,N=Math.floor(x/2),C=x-N,S=Math.floor(b/2),T=b-S;h={top:N,bottom:C,left:S,right:T,front:w,back:E,type:"SAME"}}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:h,outDepth:m,outHeight:p,outWidth:y}}function wg(t,e){if(!e)return Math.trunc(t);switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error(`Unknown roundingMode ${e}`)}}function dd(t){const[e,n,r]=xg(t);return e===1&&n===1&&r===1}function hs(t,e){return dd(t)||dd(e)}function hd(t){return xg(t).every(e=>e>0)}function jl(t){if(t==="NHWC")return"channelsLast";if(t==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${t}`)}function Ks(t,e,n){if(n!=null){if(typeof e=="string")throw Error(`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);if(typeof e=="number")F(Ef(e),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);else if(typeof e=="object")e.forEach(r=>{r.forEach(s=>{F(Ef(s),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${s}.`)})});else throw Error(`Error in ${t}: Unknown padding parameter: ${e}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lNe(t,e){const r={x:K(t,"x","reshape","string_or_numeric")},s={shape:e};return se.runKernel(Dw,r,s)}const ie=oe({reshape_:lNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cNe(t,e,n,r,s){const i=K(t,"x","avgPool","float32"),o=1;F(hs(n,o),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`);let a=i,l=!1;i.rank===3&&(l=!0,a=ie(i,[1,i.shape[0],i.shape[1],i.shape[2]])),F(a.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${a.rank}.`),Ks("avgPool",r,s);const c={x:a},u={filterSize:e,strides:n,pad:r,dimRoundingMode:s};let h=se.runKernel(Xx,c,u);return h=Me(h,i.dtype),l?ie(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const aI=oe({avgPool_:cNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uNe(t,e,n,r,s,i="NDHWC"){const o=K(t,"x","avgPool3d","float32");let a=o,l=!1;o.rank===4&&(l=!0,a=ie(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),F(a.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${a.rank}.`),F(i==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${i}`),F(typeof n=="number"&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${n}'`),Ks("avgPool3d",r,s);const c={x:a},u={filterSize:e,strides:n,pad:r,dimRoundingMode:s,dataFormat:i};let h=se.runKernel(Yx,c,u);return h=Me(h,a.dtype),l?ie(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}const dNe=oe({avgPool3d_:uNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hNe(t,e=0){F(t.length>=1,()=>"Pass at least one tensor to concat");const n=c7(t,"tensors","concat","string_or_numeric");if(n[0].dtype==="complex64"&&n.forEach(i=>{if(i.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${i.dtype}. `)}),n.length===1)return Ju(n[0]);const r=n,s={axis:e};return se.runKernel(tw,r,s)}const Us=oe({concat_:hNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fNe(t,e,n=!1,r=!1){let s=K(t,"a","matMul"),i=K(e,"b","matMul");[s,i]=er(s,i);const o={a:s,b:i},a={transposeA:n,transposeB:r};return se.runKernel(Jx,o,a)}const qt=oe({matMul_:fNe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mNe(t){const n={x:K(t,"x","sigmoid","float32")};return se.runKernel(J0,n)}const rm=oe({sigmoid_:mNe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pNe(t,e,n){const r=K(t,"x","slice","string_or_numeric");if(r.rank===0)throw new Error("Slicing scalar is not possible");const s={x:r},i={begin:e,size:n};return se.runKernel(Fw,s,i)}const bn=oe({slice_:pNe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gNe(t){const n={x:K(t,"x","tanh","float32")};return se.runKernel(sy,n)}const Xw=oe({tanh_:gNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yNe(t,e,n){const r=K(t,"x","batchToSpaceND"),s=e.reduce((a,l)=>a*l);F(r.rank>=1+e.length,()=>`input rank is ${r.rank} but should be > than blockShape.length ${e.length}`),F(n.length===e.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${e.length}`),F(r.shape[0]%s===0,()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${e.join(" * ")} === ${s}`);const i={x:r},o={blockShape:e,crops:n};return se.runKernel(Qx,i,o)}const lI=oe({batchToSpaceND_:yNe});function bNe(t){let e;return t.rank===0||t.rank===1?e=ie(t,[1,1,1,t.size]):t.rank===2?e=ie(t,[1,1,t.shape[0],t.shape[1]]):t.rank===3?e=ie(t,[1,t.shape[0],t.shape[1],t.shape[2]]):e=t,e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vNe(t,e,n,r,s,i){i==null&&(i=.001);const o=K(t,"x","batchNorm"),a=K(e,"mean","batchNorm"),l=K(n,"variance","batchNorm");let c;s!=null&&(c=K(s,"scale","batchNorm"));let u;r!=null&&(u=K(r,"offset","batchNorm")),F(a.rank===l.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),F(u==null||a.rank===u.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),F(c==null||a.rank===c.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const m={x:bNe(o),scale:c,offset:u,mean:a,variance:l},p={varianceEpsilon:i},y=se.runKernel(uw,m,p);return ie(y,o.shape)}const Yw=oe({batchNorm_:vNe});function xNe(t,e,n,r,s,i){const o=K(t,"x","batchNorm"),a=K(e,"mean","batchNorm"),l=K(n,"variance","batchNorm");let c;s!=null&&(c=K(s,"scale","batchNorm"));let u;return r!=null&&(u=K(r,"offset","batchNorm")),F(o.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${o.rank}.`),F(a.rank===2||a.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${a.rank}.`),F(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${l.rank}.`),c!=null&&F(c.rank===2||c.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${c.rank}.`),u!=null&&F(u.rank===2||u.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${u.rank}.`),Yw(o,a,l,u,c,i)}const wNe=oe({batchNorm2d_:xNe});function ENe(t,e,n,r,s,i){const o=K(t,"x","batchNorm"),a=K(e,"mean","batchNorm"),l=K(n,"variance","batchNorm");let c;s!=null&&(c=K(s,"scale","batchNorm"));let u;return r!=null&&(u=K(r,"offset","batchNorm")),F(o.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${o.rank}.`),F(a.rank===3||a.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${a.rank}.`),F(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${l.rank}.`),c!=null&&F(c.rank===3||c.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${c.rank}.`),u!=null&&F(u.rank===3||u.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${u.rank}.`),Yw(o,a,l,u,c,i)}const kNe=oe({batchNorm3d_:ENe});function NNe(t,e,n,r,s,i){const o=K(t,"x","batchNorm"),a=K(e,"mean","batchNorm"),l=K(n,"variance","batchNorm");let c;s!=null&&(c=K(s,"scale","batchNorm"));let u;return r!=null&&(u=K(r,"offset","batchNorm")),F(o.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${o.rank}.`),F(a.rank===4||a.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${a.rank}.`),F(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${l.rank}.`),c!=null&&F(c.rank===4||c.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${c.rank}.`),u!=null&&F(u.rank===4||u.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${u.rank}.`),Yw(o,a,l,u,c,i)}const CNe=oe({batchNorm4d_:NNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Ne(t,e,n){const r=K(t,"x","bincount"),s=K(e,"weights","bincount");F(r.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${r.dtype}`),F(n>=0,()=>`size must be non-negative, but got ${n}.`),F(s.size===r.size||s.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${s.shape}.`);const i={x:r,weights:s},o={size:n};return se.runKernel(w$,i,o)}const SNe=oe({bincount_:_Ne});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TNe(t,e){let n=K(t,"broadcastTo","x");const r=n.shape;if(Bl(e),e.length<n.rank)throw new Error(`broadcastTo(): shape.length=${e.length} < input.rank=${n.rank}.`);if(e.length>n.rank){const c=n.shape.slice();for(;c.length<e.length;)c.unshift(1);n=ie(n,c)}const s=n.shape,i=Array.from(e);for(let c=e.length-1;c>=0;c--)if(s[c]===e[c])i[c]=1;else if(n.shape[c]!==1)throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${e}].`);if(i.map((c,u)=>c>1?u:-1).filter(c=>c>=0).length===0)return Ju(n);const a={x:n},l={reps:i};return se.runKernel(iy,a,l)}const Mp=oe({broadcastTo_:TNe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Ne(t){const n={x:K(t,"x","ceil","float32")};return se.runKernel(x0,n)}const INe=oe({ceil_:$Ne});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jw(t,e,n){Bl(t),n=n||Qf(e);const r={shape:t,value:e,dtype:n};return se.runKernel(L$,{},r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ANe(t,e,n){const r=K(t,"x","clipByValue");if(F(e<=n,()=>`Error in clip: min (${e}) must be less than or equal to max (${n}).`),e===n)return Jw(r.shape,e,r.dtype);const s={x:r},i={clipValueMin:e,clipValueMax:n};return se.runKernel(w0,s,i)}const Oi=oe({clipByValue_:ANe});function RNe(t){return Us(t,0)}const PNe=oe({concat1d_:RNe});function DNe(t,e){return Us(t,e)}const ONe=oe({concat2d_:DNe});function LNe(t,e){return Us(t,e)}const MNe=oe({concat3d_:LNe});function zNe(t,e){return Us(t,e)}const FNe=oe({concat4d_:zNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BNe(t,e,n,r,s="NHWC",i=[1,1],o){const a=K(t,"x","conv2d","float32"),l=K(e,"filter","conv2d","float32");let c=a,u=!1;a.rank===3&&(u=!0,c=ie(a,[1,a.shape[0],a.shape[1],a.shape[2]])),F(c.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${c.rank}.`),F(l.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${l.rank}.`),Ks("conv2d",r,o);const h=s==="NHWC"?c.shape[3]:c.shape[1];F(h===l.shape[2],()=>`Error in conv2d: depth of input (${h}) must match input depth for filter ${l.shape[2]}.`),F(hs(n,i),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),F(hd(i),()=>"Error in conv2D: Dilated rates should be larger than 0."),F(hd(n),()=>"Error in conv2D: Strides should be larger than 0.");const m={x:c,filter:l},p={strides:n,pad:r,dataFormat:s,dilations:i,dimRoundingMode:o},y=se.runKernel(nw,m,p);return u?ie(y,[y.shape[1],y.shape[2],y.shape[3]]):y}const fd=oe({conv2d_:BNe});function VNe(t,e,n,r,s="NWC",i=1,o){const a=K(t,"x","conv1d"),l=K(e,"filter","conv1d");let c=a,u=!1;a.rank===2&&(u=!0,c=ie(a,[1,a.shape[0],a.shape[1]])),F(c.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${c.rank}.`),F(l.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${l.rank}.`),Ks("conv1d",r,o),F(c.shape[2]===l.shape[1],()=>`Error in conv1d: depth of input (${c.shape[2]}) must match input depth for filter ${l.shape[1]}.`),F(hs(n,i),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${i}'`),F(hd(i),()=>"Error in conv1D: Dilated rates should be larger than 0."),F(hd(n),()=>"Error in conv1D: Stride should be larger than 0."),F(s==="NWC",()=>`Error in conv1d: got dataFormat of ${s} but only NWC is currently supported.`);const h=ie(l,[1,l.shape[0],l.shape[1],l.shape[2]]),m=ie(c,[c.shape[0],1,c.shape[1],c.shape[2]]),x=fd(m,h,[1,n],r,"NHWC",[1,i],o);return u?ie(x,[x.shape[2],x.shape[3]]):ie(x,[x.shape[0],x.shape[2],x.shape[3]])}const w7=oe({conv1d_:VNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jNe(t,e,n,r,s,i="NHWC",o){F(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let a=t,l=e,c=!1;e.rank===3&&(c=!0,l=ie(e,[1,e.shape[0],e.shape[1],e.shape[2]]),a=[1,t[0],t[1],t[2]]),F(a.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${a.length}.`),F(l.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${l.rank}`),F(n.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`);const u=i==="NHWC"?a[3]:a[1],h=i==="NHWC"?l.shape[3]:l.shape[1];F(u===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${u}) must match input depth for filter ${n.shape[2]}.`),F(h===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${h}) must match output depth for filter ${n.shape[3]}.`),Ks("conv2dDerInput",s,o);const m={dy:l,filter:n},p={strides:r,pad:s,dataFormat:i,dimRoundingMode:o,inputShape:a},y=se.runKernel(rw,m,p);return c?ie(y,[y.shape[1],y.shape[2],y.shape[3]]):y}const cI=oe({conv2DBackpropInput_:jNe});function UNe(t,e,n,r,s,i){const o=K(t,"x","conv2dTranspose"),a=K(e,"filter","conv2dTranspose");return cI(n,o,a,r,s,"NHWC",i)}const E7=oe({conv2dTranspose_:UNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HNe(t,e,n,r,s="NDHWC",i=[1,1,1]){const o=K(t,"x","conv3d"),a=K(e,"filter","conv3d");let l=o,c=!1;o.rank===4&&(c=!0,l=ie(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),F(l.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${l.rank}.`),F(a.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${a.rank}.`),F(l.shape[4]===a.shape[3],()=>`Error in conv3d: depth of input (${l.shape[4]}) must match input depth for filter ${a.shape[3]}.`),F(hs(n,i),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),F(s==="NDHWC",()=>`Error in conv3d: got dataFormat of ${s} but only NDHWC is currently supported.`),F(hd(i),()=>"Error in conv3D: Dilated rates should be larger than 0."),F(hd(n),()=>"Error in conv3D: Strides should be larger than 0.");const u={x:l,filter:a},h={strides:n,pad:r,dataFormat:s,dilations:i},m=se.runKernel(sw,u,h);return c?ie(m,[m.shape[1],m.shape[2],m.shape[3],m.shape[4]]):m}const GNe=oe({conv3d_:HNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WNe(t,e,n,r,s){F(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let i=t,o=e,a=!1;e.rank===4&&(a=!0,o=ie(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]),i=[1,t[0],t[1],t[2],t[3]]);const l=i[4],c=o.shape[4];F(i.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${i.length}.`),F(o.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${o.rank}`),F(n.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`),F(l===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${l}) must match input depth for filter ${n.shape[3]}.`),F(c===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${c}) must match output depth for filter ${n.shape[4]}.`);const u={dy:o,filter:n},h={pad:s,strides:r,inputShape:i},m=se.runKernel(_$,u,h);return a?ie(m,[m.shape[1],m.shape[2],m.shape[3],m.shape[4]]):m}const k7=oe({conv3DBackpropInput_:WNe});function qNe(t,e,n,r,s){const i=K(t,"x","conv3dTranspose"),o=K(e,"filter","conv3dTranspose");return k7(n,i,o,r,s)}const KNe=oe({conv3dTranspose_:qNe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZNe(t){const n={x:K(t,"x","cos","float32")};return se.runKernel(E0,n)}const uI=oe({cos_:ZNe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XNe(t){const n={x:K(t,"x","cosh","float32")};return se.runKernel(k0,n)}const N7=oe({cosh_:XNe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YNe(t,e=0,n=!1,r=!1){const i={x:K(t,"x","cumprod")},o={axis:e,exclusive:n,reverse:r};return se.runKernel(S$,i,o)}const g_=oe({cumprod_:YNe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JNe(t,e=0,n=!1,r=!1){const i={x:K(t,"x","cumsum")},o={axis:e,exclusive:n,reverse:r};return se.runKernel(iw,i,o)}const C7=oe({cumsum_:JNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QNe(t,e,n,r=!1){const s=K(t,"x","denseBincount"),i=K(e,"weights","denseBincount");F(s.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${s.dtype}`),F(s.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${s.rank}.`),F(n>=0,()=>`size must be non-negative, but got ${n}.`),F(i.size===s.size||i.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${s.shape}, weights shape: ${i.shape}.`);const o={x:s,weights:i},a={size:n,binaryOutput:r};return se.runKernel($$,o,a)}const QL=oe({denseBincount_:QNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eCe(t,e,n="NHWC"){const r=K(t,"x","depthToSpace","float32"),s=n==="NHWC"?r.shape[1]:r.shape[2],i=n==="NHWC"?r.shape[2]:r.shape[3],o=n==="NHWC"?r.shape[3]:r.shape[1];F(e>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${e}`),F(s*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${s} and ${e}  for depthToSpace with input shape
    ${r.shape}`),F(i*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${i} and ${e} for depthToSpace with input shape
        ${r.shape}`),F(o%(e*e)===0,()=>`Dimension size must be evenly divisible by ${e*e} but is ${o} for depthToSpace with input shape ${r.shape}`);const a={x:r},l={blockSize:e,dataFormat:n};return se.runKernel(I$,a,l)}const tCe=oe({depthToSpace_:eCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nCe(t,e,n,r,s="NHWC",i=[1,1],o){const a=K(t,"x","depthwiseConv2d","float32"),l=K(e,"filter","depthwiseConv2d","float32");let c=a,u=!1;a.rank===3&&(u=!0,c=ie(a,[1,a.shape[0],a.shape[1],a.shape[2]])),F(c.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${c.rank}.`),F(l.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${l.rank}.`);const h=s==="NHWC"?c.shape[3]:c.shape[1];F(h===l.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${h}) must match the inChannels dimension in filter ${l.shape[2]}.`),Ks("depthwiseConv2d",r,o);const m={x:c,filter:l},p={strides:n,pad:r,dataFormat:s,dilations:i,dimRoundingMode:o},y=se.runKernel(ow,m,p);return u?ie(y,[y.shape[1],y.shape[2],y.shape[3]]):y}const dI=oe({depthwiseConv2d_:nCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rCe(t,e,n,r,s=[1,1],i="NHWC"){const o=K(t,"x","dilation2d"),a=K(e,"filter","dilation2d");F(o.rank===3||o.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${o.rank}.`),F(a.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${a.rank}.`),F(i==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${i}`);let l=o,c=!1;o.rank===3&&(l=ie(o,[1,o.shape[0],o.shape[1],o.shape[2]]),c=!0),F(l.shape[3]===a.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${l.shape[3]} vs ${a.shape[2]}`);const u={x:l,filter:a},h={strides:n,pad:r,dilations:s},m=se.runKernel(aw,u,h);return c?ie(m,[m.shape[1],m.shape[2],m.shape[3]]):m}const sCe=oe({dilation2d_:rCe});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _f(t,e){const n=t.length,r=[];for(let s=0;s<n;s++){const i=n-1-s,o=t[i]||1;(e[e.length-1-s]||1)>1&&o===1&&r.unshift(i)}return r}function Cr(t,e){const n=[];for(let r=0;r<e.length;r++){const s=t[t.length-r-1],i=e.length-r-1,o=e[i];(s==null||s===1&&o>1)&&n.unshift(i)}return n}function ut(t,e){const n=Math.max(t.length,e.length),r=new Array(n);for(let s=0;s<n;s++){let i=t[t.length-s-1];i==null&&(i=1);let o=e[e.length-s-1];if(o==null&&(o=1),i===1)r[n-s-1]=o;else if(o===1)r[n-s-1]=i;else if(i!==o){const a=`Operands could not be broadcast together with shapes ${t} and ${e}.`;throw Error(a)}else r[n-s-1]=i}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iCe(t,e){let n=K(t,"a","equal","string_or_numeric"),r=K(e,"b","equal","string_or_numeric");[n,r]=er(n,r),ut(n.shape,r.shape);const s={a:n,b:r};return se.runKernel(lw,s)}const Oa=oe({equal_:iCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oCe(t,e,n){const r=K(e,"a","where"),s=K(n,"b","where"),i=K(t,"condition","where","bool"),o=ut(ut(i.shape,r.shape),s.shape),a=Mp(i,o),l=Mp(r,o),c=Mp(s,o),u={condition:a,t:l,e:c};return se.runKernel(zw,u)}const $s=oe({where_:oCe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aCe(t){const n={x:K(t,"x","zerosLike")};return se.runKernel(Ww,n)}const Mt=oe({zerosLike_:aCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lCe(t,e){let n=K(t,"a","div"),r=K(e,"b","div");[n,r]=er(n,r);const s=Ye(n,r),i=Mt(s),o=Oa(r,i);return $s(o,i,s)}const cCe=oe({divNoNan_:lCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uCe(t,e){const n=K(t,"t1","dot"),r=K(e,"t2","dot");F((n.rank===1||n.rank===2)&&(r.rank===1||r.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${r.rank}.`);const s=n.rank===1?n.size:n.shape[1],i=r.rank===1?r.size:r.shape[0];if(F(s===i,()=>`Error in dot: inner dimensions of inputs must match, but got ${s} and ${i}.`),n.rank===1&&r.rank===1){const o=ie(n,[1,-1]),a=ie(r,[-1,1]),l=qt(o,a);return ie(l,[])}else if(n.rank===1&&r.rank===2){const o=ie(n,[1,-1]),a=ie(r,[r.shape[0],r.shape[1]]),l=qt(o,a);return ie(l,[l.size])}else if(n.rank===2&&r.rank===1){const o=ie(r,[-1,1]),a=qt(n,o);return ie(a,[a.size])}else{const o=ie(r,[r.shape[0],r.shape[1]]);return qt(n,o)}}const dCe=oe({dot_:uCe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hCe(t,...e){const n=e.map((s,i)=>K(s,`tensors${i}`,"einsum")),r={equation:t};return se.runKernel(P$,n,r)}const Zm=oe({einsum_:hCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fCe(t){const n={x:K(t,"x","elu","float32")};return se.runKernel(C0,n)}const Qw=oe({elu_:fCe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mCe(t){let e=K(t,"x","erf");F(e.dtype==="int32"||e.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),e.dtype==="int32"&&(e=Me(e,"float32"));const n={x:e};return se.runKernel(_0,n)}const _7=oe({erf_:mCe});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hI(t,e){for(let n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function S7(t,e,n){const r=t.length+e.length,s=[];let i=0,o=0;for(let a=0;a<r;a++)n.indexOf(a)===-1?s.push(t[i++]):s.push(e[o++]);return s}function Mr(t,e){const n=[],r=t.length;for(let i=0;i<r;i++)e.indexOf(i)===-1&&n.push(t[i]);const s=e.map(i=>t[i]);return[n,s]}function ur(t,e){const n=e.map(r=>1);return S7(t,n,e)}function Yr(t,e,n){F(hI(e,n),()=>`${t} supports only inner-most axes for now. Got axes ${e} and rank-${n} input.`)}function jn(t,e){if(hI(t,e))return null;const n=[];for(let r=0;r<e;++r)t.indexOf(r)===-1&&n.push(r);return t.forEach(r=>n.push(r)),n}function tu(t){return t.map((e,n)=>[n,e]).sort((e,n)=>e[1]-n[1]).map(e=>e[0])}function tr(t,e){const n=[];for(let r=e-t;r<e;++r)n.push(r);return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pCe(t,e=null,n=!1){const s={x:K(t,"x","max")},i={reductionIndices:e,keepDims:n};return se.runKernel(xw,s,i)}const jo=oe({max_:pCe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gCe(t,e=null,n=!1){const s={x:K(t,"x","min")},i={axis:e,keepDims:n};return se.runKernel(Nw,s,i)}const L1=oe({min_:gCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yCe(t,e){let n=K(t,"base","pow"),r=K(e,"exp","pow");[n,r]=er(n,r);const s={a:n,b:r};return se.runKernel(j0,s)}const md=oe({pow_:yCe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kt(t,e){if((go(t)&&e!=="string"||Array.isArray(t))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&go(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Zw(t,[],[],e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bCe(t){const n={x:K(t,"x","sqrt","float32")};return se.runKernel(ey,n)}const us=oe({sqrt_:bCe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vCe(t){const e=K(t,"x","square"),n={};return se.runKernel("Square",{x:e},n)}const Nn=oe({square_:vCe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xCe(t,e=null,n=!1){let r=K(t,"x","sum");r.dtype==="bool"&&(r=Me(r,"int32"));const s={x:r},i={axis:e,keepDims:n};return se.runKernel(Bw,s,i)}const Xe=oe({sum_:xCe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wCe(t,e="euclidean",n=null,r=!1){t=K(t,"x","norm");const s=T7(t,e,n);let i=s.shape;if(r){const o=xt(n,t.shape);i=ur(s.shape,o)}return ie(s,i)}function T7(t,e,n=null){if(t.rank===0)return ws(t);if(t.rank!==1&&n===null)return T7(ie(t,[-1]),e,n);if(t.rank===1||typeof n=="number"||Array.isArray(n)&&n.length===1){if(e===1)return Xe(ws(t),n);if(e===1/0)return jo(ws(t),n);if(e===-1/0)return L1(ws(t),n);if(e==="euclidean"||e===2)return us(Xe(md(ws(t),Kt(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}if(Array.isArray(n)&&n.length===2){if(e===1)return jo(Xe(ws(t),n[0]),n[1]-1);if(e===1/0)return jo(Xe(ws(t),n[1]),n[0]);if(e===-1/0)return L1(Xe(ws(t),n[1]),n[0]);if(e==="fro"||e==="euclidean")return us(Xe(Nn(t),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}const e2=oe({norm_:wCe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ECe(t,e=null,n=!1){return e2(t,"euclidean",e,n)}const kCe=oe({euclideanNorm_:ECe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NCe(t){const n={x:K(t,"x","exp")};return se.runKernel(S0,n)}const La=oe({exp_:NCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CCe(t,e=0){const n=K(t,"x","expandDims","string_or_numeric");F(e<=n.rank,()=>"Axis must be <= rank of the tensor");const r={input:n},s={dim:e};return se.runKernel(cw,r,s)}const Ms=oe({expandDims_:CCe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Ce(t){const n={x:K(t,"x","expm1")};return se.runKernel(T0,n)}const SCe=oe({expm1_:_Ce});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TCe(t,e){const n=K(t,"x","tile","string_or_numeric");F(n.rank===e.length,()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${e}.`);const r={x:n},s={reps:e};return se.runKernel(iy,r,s)}const zo=oe({tile_:TCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Ce(t,e,n,r="float32"){e==null&&(e=t);const s=bt([t,e],r),i=t<=e?t:e;for(let a=0;a<i;++a)s.set(1,a,a);const o=ie(s.toTensor(),[t,e]);if(n==null)return o;if(n.length===1)return zo(Ms(o,0),[n[0],1,1]);if(n.length===2)return zo(Ms(Ms(o,0),0),[n[0],n[1],1,1]);if(n.length===3)return zo(Ms(Ms(Ms(o,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}const $7=oe({eye_:$Ce});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ICe(t){const n={x:K(t,"x","floor","float32")};return se.runKernel($0,n)}const t2=oe({floor_:ICe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ACe(t,e,n=0,r=0){const s=K(t,"x","gather"),i=K(e,"indices","gather","int32"),o={x:s,indices:i},a={axis:n,batchDims:r};return se.runKernel(dw,o,a)}const fI=oe({gather_:ACe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RCe(t,e){let n=K(t,"a","greater","string_or_numeric"),r=K(e,"b","greater","string_or_numeric");[n,r]=er(n,r),ut(n.shape,r.shape);const s={a:n,b:r};return se.runKernel(hw,s)}const Li=oe({greater_:RCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PCe(t,e){let n=K(t,"a","greaterEqual","string_or_numeric"),r=K(e,"b","greaterEqual","string_or_numeric");[n,r]=er(n,r),ut(n.shape,r.shape);const s={a:n,b:r};return se.runKernel(A0,s)}const Pd=oe({greaterEqual_:PCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DCe(t){const n={input:K(t,"input","imag")};return se.runKernel(F$,n)}const mI=oe({imag_:DCe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OCe(t){const n={x:K(t,"x","isFinite")};return se.runKernel(P0,n)}const LCe=oe({isFinite_:OCe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MCe(t){const n={x:K(t,"x","isInf")};return se.runKernel(D0,n)}const zCe=oe({isInf_:MCe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FCe(t){const n={x:K(t,"x","isNaN")};return se.runKernel(O0,n)}const BCe=oe({isNaN_:FCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VCe(t,e=.2){const r={x:K(t,"x","leakyRelu")},s={alpha:e};return se.runKernel(fw,r,s)}const pI=oe({leakyRelu_:VCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jCe(t,e){let n=K(t,"a","less","string_or_numeric"),r=K(e,"b","less","string_or_numeric");[n,r]=er(n,r),ut(n.shape,r.shape);const s={a:n,b:r};return se.runKernel(mw,s)}const M1=oe({less_:jCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UCe(t,e){let n=K(t,"a","lessEqual","string_or_numeric"),r=K(e,"b","lessEqual","string_or_numeric");[n,r]=er(n,r),ut(n.shape,r.shape);const s={a:n,b:r};return se.runKernel(pw,s)}const sm=oe({lessEqual_:UCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HCe(t,e=5,n=1,r=1,s=.5){const i=K(t,"x","localResponseNormalization");F(i.rank===4||i.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${i.rank}.`),F(Ef(e),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${e}.`);let o=i,a=!1;i.rank===3&&(a=!0,o=ie(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const l={x:o},c={depthRadius:e,bias:n,alpha:r,beta:s},u=se.runKernel(vw,l,c);return a?ie(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const GCe=oe({localResponseNormalization_:HCe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WCe(t){const n={x:K(t,"x","log","float32")};return se.runKernel(L0,n)}const Ma=oe({log_:WCe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qCe(t){const n={x:K(t,"x","log1p")};return se.runKernel(M0,n)}const I7=oe({log1p_:qCe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KCe(t,e){F(QC(t),()=>"The f passed in variableGrads(f) must be a function"),F(e==null||Array.isArray(e)&&e.every(c=>c instanceof O1),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const n=e!=null;if(!n){e=[];for(const c in se.registeredVariables)e.push(se.registeredVariables[c])}const r=n?e.filter(c=>!c.trainable):null,s=e.length;e=e.filter(c=>c.trainable),F(e.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${s} variables is trainable.`);const i=!0,{value:o,grads:a}=se.gradients(t,e,null,i);F(a.some(c=>c!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),F(o.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${o.rank} tensor`);const l={};return e.forEach((c,u)=>{a[u]!=null&&(l[c.name]=a[u])}),r!=null&&r.forEach(c=>l[c.name]=null),{value:o,grads:l}}function Sf(t){return se.customGrad(t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZCe(t){const n={x:K(t,"x","neg")};return se.runKernel(_w,n)}const Qn=oe({neg_:ZCe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XCe(t){const n={x:K(t,"x","softplus")};return se.runKernel(Q0,n)}const ly=oe({softplus_:XCe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YCe(t){const e=K(t,"x","logSigmoid");return Sf(r=>({value:Qn(ly(Qn(r))),gradFunc:o=>re(o,rm(Qn(r)))}))(e)}const JCe=oe({logSigmoid_:YCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QCe(t,e){let n=K(t,"a","sub"),r=K(e,"b","sub");[n,r]=er(n,r);const s={a:n,b:r};return se.runKernel(ny,s)}const et=oe({sub_:QCe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e_e(t,e=-1){const n=K(t,"logits","logSoftmax");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${e}`);return Sf((s,i)=>{const a=jo(s,e,!0),l=et(s,a),c=et(Me(l,"float32"),Ma(Xe(La(l),e,!0)));return i([c]),{value:c,gradFunc:(h,m)=>{const[p]=m,y=!0,v=La(p);return et(h,re(Xe(h,e,y),v))}}})(n)}const A7=oe({logSoftmax_:e_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t_e(t,e=null,n=!1){const r=K(t,"x","logSumExp"),s=xt(e,r.shape),i=jo(r,s,!0),o=et(r,i),a=La(o),l=Xe(a,s),c=Ma(l),u=_e(ie(i,c.shape),c);if(n){const h=ur(u.shape,s);return ie(u,h)}return u}const R7=oe({logSumExp_:t_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n_e(t,e){const n=K(t,"a","logicalAnd","bool"),r=K(e,"b","logicalAnd","bool");ut(n.shape,r.shape);const s={a:n,b:r};return se.runKernel(gw,s)}const Al=oe({logicalAnd_:n_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r_e(t){const n={x:K(t,"x","logicalNot","bool")};return se.runKernel(yw,n)}const gI=oe({logicalNot_:r_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s_e(t,e){const n=K(t,"a","logicalOr","bool"),r=K(e,"b","logicalOr","bool");ut(n.shape,r.shape);const s={a:n,b:r};return se.runKernel(bw,s)}const P7=oe({logicalOr_:s_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i_e(t,e){const n=K(t,"a","logicalXor","bool"),r=K(e,"b","logicalXor","bool");return ut(n.shape,r.shape),Al(P7(t,e),gI(Al(t,e)))}const o_e=oe({logicalXor_:i_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a_e(t,e,n,r,s){const i=K(t,"x","maxPool"),o=1;let a=i,l=!1;i.rank===3&&(l=!0,a=ie(i,[1,i.shape[0],i.shape[1],i.shape[2]])),F(a.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${a.rank}.`),F(hs(n,o),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`),Ks("maxPool",r,s);const c={x:a},u={filterSize:e,strides:n,pad:r,dimRoundingMode:s},h=se.runKernel(ww,c,u);return l?ie(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const yI=oe({maxPool_:a_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l_e(t,e=[1,1,1],n,r,s,i="NDHWC"){const o=K(t,"x","maxPool3d");let a=o,l=!1;o.rank===4&&(l=!0,a=ie(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),F(a.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${a.rank}.`),F(i==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${i}`),Ks("maxPool3d",r,s);const c={x:a},u={filterSize:e,strides:n,pad:r,dimRoundingMode:s,dataFormat:i},h=se.runKernel(Ew,c,u);return l?ie(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}const c_e=oe({maxPool3d_:l_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u_e(t,e){let n=K(t,"a","maximum"),r=K(e,"b","maximum");[n,r]=er(n,r),n.dtype==="bool"&&(n=Me(n,"int32"),r=Me(r,"int32")),ut(n.shape,r.shape);const s={a:n,b:r};return se.runKernel(z0,s)}const nu=oe({maximum_:u_e});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d_e(t,e=null,n=!1){const s={x:K(t,"x","mean")},i={axis:e,keepDims:n};return se.runKernel(kw,s,i)}const cr=oe({mean_:d_e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pr(t,e="float32"){if(Bl(t),e==="complex64"){const r=Pr(t,"float32"),s=Pr(t,"float32");return Cf(r,s)}const n=cs(pe(t),e);return se.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ru(t,e="float32"){if(Bl(t),e==="complex64"){const r=ru(t,"float32"),s=Pr(t,"float32");return Cf(r,s)}const n=f$(pe(t),e);return se.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h_e(t,e){let n=K(t,"a","minimum"),r=K(e,"b","minimum");[n,r]=er(n,r),n.dtype==="bool"&&(n=Me(n,"int32"),r=Me(r,"int32")),ut(n.shape,r.shape);const s={a:n,b:r};return se.runKernel(F0,s)}const Eg=oe({minimum_:h_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f_e(t,e,n){F(n==="reflect"||n==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`);const r=K(t,"x","mirrorPad");if(r.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");F(e.length===r.rank,()=>`Padding doesn't match input. Must be ${r.rank}. Got ${e.length}.`);const s=n==="reflect"?1:0;for(let a=0;a<r.rank;a++)F(e[a].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),F(e[a][0]>=0&&e[a][0]<=r.shape[a]-s&&e[a][1]>=0&&e[a][1]<=r.shape[a]-s,()=>`Padding in dimension ${a} cannot be greater than or equal to ${r.shape[a]-s} or less than 0 for input of shape ${r.shape}`);const i={paddings:e,mode:n},o={x:r};return se.runKernel(Cw,o,i)}const m_e=oe({mirrorPad_:f_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p_e(t,e){let n=K(t,"a","mod"),r=K(e,"b","mod");[n,r]=er(n,r);const s={a:n,b:r};return se.runKernel(B0,s)}const g_e=oe({mod_:p_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y_e(t,e=null,n=!1){t=K(t,"x","moments");const r=xt(e,t.shape),s=cr(t,r,n);let i=s.shape;n||(i=ur(s.shape,r));const o=Nn(et(Me(t,"float32"),ie(s,i))),a=cr(o,r,n);return{mean:s,variance:a}}const bI=oe({moments_:y_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b_e(t,e){let n=K(t,"a","notEqual","string_or_numeric"),r=K(e,"b","notEqual","string_or_numeric");[n,r]=er(n,r),ut(n.shape,r.shape);const s={a:n,b:r};return se.runKernel(Sw,s)}const z1=oe({notEqual_:b_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v_e(t,e,n=1,r=0,s="int32"){if(e<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${e}`);const o={indices:K(t,"indices","oneHot","int32")},a={dtype:s,depth:e,onValue:n,offValue:r};return se.runKernel($w,o,a)}const D7=oe({oneHot_:v_e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x_e(t){const n={x:K(t,"x","onesLike")};return se.runKernel(Tw,n)}const yo=oe({onesLike_:x_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w_e(t,e,n=0){const r=K(t,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const s={paddings:e,constantValue:n},i={x:r};return se.runKernel(Aw,i,s)}const vI=oe({pad_:w_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E_e(t,e,n){const r=K(t,"x","spaceToBatchND");F(r.rank>=1+e.length,()=>`input rank ${r.rank} should be > than [blockShape] ${e.length}`),F(n.length===e.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${e.length}`),F(r.shape.reduce((o,a,l)=>l>0&&l<=e.length?o&&(a+n[l-1][0]+n[l-1][1])%e[l-1]===0:o,!0),()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${e.toString()}`);const s={x:r},i={blockShape:e,paddings:n};return se.runKernel(Vw,s,i)}const xI=oe({spaceToBatchND_:E_e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k_e(t,e,n,r,s,i,o){s==null&&(s=[1,1]),i==null&&(i=1),r===0&&(r="valid");const a=K(t,"x","maxPool");let l=a,c=!1;a.rank===3&&(c=!0,l=ie(a,[1,a.shape[0],a.shape[1],a.shape[2]])),F(hs(i,s),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${i} and dilations '${s}'`);const u=xo(l.shape,e,i,s,r),h=[u.dilationHeight,u.dilationWidth];let m;r==="same"?m=C_e([u.filterHeight,u.filterWidth],h):m=[[0,0],[0,0]];const p=h[0]===1&&h[1]===1,[y,v]=N_e([u.inHeight,u.inWidth],h,m),x=p?r:"valid",b=p?l:xI(l,h,y),E=(n==="avg"?()=>aI(b,e,i,x,o):()=>yI(b,e,i,x,o))(),N=p?E:lI(E,h,v);return c?ie(N,[N.shape[1],N.shape[2],N.shape[3]]):N}function N_e(t,e,n){const r=n.map(u=>u[0]),s=n.map(u=>u[1]),i=t.concat(r,s),o=e.map((u,h)=>(u-i[h]%u)%u),a=s.map((u,h)=>u+o[h]),l=e.map((u,h)=>[r[h],a[h]]),c=e.map((u,h)=>[0,o[h]]);return[l,c]}function C_e(t,e){const r=t.map((o,a)=>o+(o-1)*(e[a]-1)).map(o=>o-1),s=r.map(o=>Math.floor(o/2)),i=r.map((o,a)=>o-s[a]);return r.map((o,a)=>[s[a],i[a]])}const __e=oe({pool_:k_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S_e(t,e){const n=K(t,"x","prelu"),r=K(e,"alpha","prelu"),s={x:n,alpha:r};return se.runKernel(Rw,s)}const wI=oe({prelu_:S_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T_e(t,e=null,n=!1){let r=K(t,"x","prod");r.dtype==="bool"&&(r=Me(r,"int32"));const s={x:r},i={axis:e,keepDims:n};return se.runKernel(Pw,s,i)}const $_e=oe({prod_:T_e});var EI={exports:{}};EI.exports;(function(t){(function(e,n,r){function s(l){var c=this,u=a();c.next=function(){var h=2091639*c.s0+c.c*23283064365386963e-26;return c.s0=c.s1,c.s1=c.s2,c.s2=h-(c.c=h|0)},c.c=1,c.s0=u(" "),c.s1=u(" "),c.s2=u(" "),c.s0-=u(l),c.s0<0&&(c.s0+=1),c.s1-=u(l),c.s1<0&&(c.s1+=1),c.s2-=u(l),c.s2<0&&(c.s2+=1),u=null}function i(l,c){return c.c=l.c,c.s0=l.s0,c.s1=l.s1,c.s2=l.s2,c}function o(l,c){var u=new s(l),h=c&&c.state,m=u.next;return m.int32=function(){return u.next()*4294967296|0},m.double=function(){return m()+(m()*2097152|0)*11102230246251565e-32},m.quick=m,h&&(typeof h=="object"&&i(h,u),m.state=function(){return i(u,{})}),m}function a(){var l=4022871197,c=function(u){u=String(u);for(var h=0;h<u.length;h++){l+=u.charCodeAt(h);var m=.02519603282416938*l;l=m>>>0,m-=l,m*=l,l=m>>>0,m-=l,l+=m*4294967296}return(l>>>0)*23283064365386963e-26};return c}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.alea=o})(Ml,t,!1)})(EI);var I_e=EI.exports,kI={exports:{}};kI.exports;(function(t){(function(e,n,r){function s(a){var l=this,c="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var h=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^h^h>>>8},a===(a|0)?l.x=a:c+=a;for(var u=0;u<c.length+64;u++)l.x^=c.charCodeAt(u)|0,l.next()}function i(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l}function o(a,l){var c=new s(a),u=l&&l.state,h=function(){return(c.next()>>>0)/4294967296};return h.double=function(){do var m=c.next()>>>11,p=(c.next()>>>0)/4294967296,y=(m+p)/(1<<21);while(y===0);return y},h.int32=c.next,h.quick=h,u&&(typeof u=="object"&&i(u,c),h.state=function(){return i(c,{})}),h}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xor128=o})(Ml,t,!1)})(kI);var A_e=kI.exports,NI={exports:{}};NI.exports;(function(t){(function(e,n,r){function s(a){var l=this,c="";l.next=function(){var h=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(h^h<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,a===(a|0)?l.x=a:c+=a;for(var u=0;u<c.length+64;u++)l.x^=c.charCodeAt(u)|0,u==c.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function i(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l.v=a.v,l.d=a.d,l}function o(a,l){var c=new s(a),u=l&&l.state,h=function(){return(c.next()>>>0)/4294967296};return h.double=function(){do var m=c.next()>>>11,p=(c.next()>>>0)/4294967296,y=(m+p)/(1<<21);while(y===0);return y},h.int32=c.next,h.quick=h,u&&(typeof u=="object"&&i(u,c),h.state=function(){return i(c,{})}),h}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xorwow=o})(Ml,t,!1)})(NI);var R_e=NI.exports,CI={exports:{}};CI.exports;(function(t){(function(e,n,r){function s(a){var l=this;l.next=function(){var u=l.x,h=l.i,m,p;return m=u[h],m^=m>>>7,p=m^m<<24,m=u[h+1&7],p^=m^m>>>10,m=u[h+3&7],p^=m^m>>>3,m=u[h+4&7],p^=m^m<<7,m=u[h+7&7],m=m^m<<13,p^=m^m<<9,u[h]=p,l.i=h+1&7,p};function c(u,h){var m,p=[];if(h===(h|0))p[0]=h;else for(h=""+h,m=0;m<h.length;++m)p[m&7]=p[m&7]<<15^h.charCodeAt(m)+p[m+1&7]<<13;for(;p.length<8;)p.push(0);for(m=0;m<8&&p[m]===0;++m);for(m==8?p[7]=-1:p[m],u.x=p,u.i=0,m=256;m>0;--m)u.next()}c(l,a)}function i(a,l){return l.x=a.x.slice(),l.i=a.i,l}function o(a,l){a==null&&(a=+new Date);var c=new s(a),u=l&&l.state,h=function(){return(c.next()>>>0)/4294967296};return h.double=function(){do var m=c.next()>>>11,p=(c.next()>>>0)/4294967296,y=(m+p)/(1<<21);while(y===0);return y},h.int32=c.next,h.quick=h,u&&(u.x&&i(u,c),h.state=function(){return i(c,{})}),h}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xorshift7=o})(Ml,t,!1)})(CI);var P_e=CI.exports,_I={exports:{}};_I.exports;(function(t){(function(e,n,r){function s(a){var l=this;l.next=function(){var u=l.w,h=l.X,m=l.i,p,y;return l.w=u=u+1640531527|0,y=h[m+34&127],p=h[m=m+1&127],y^=y<<13,p^=p<<17,y^=y>>>15,p^=p>>>12,y=h[m]=y^p,l.i=m,y+(u^u>>>16)|0};function c(u,h){var m,p,y,v,x,b=[],w=128;for(h===(h|0)?(p=h,h=null):(h=h+"\0",p=0,w=Math.max(w,h.length)),y=0,v=-32;v<w;++v)h&&(p^=h.charCodeAt((v+32)%h.length)),v===0&&(x=p),p^=p<<10,p^=p>>>15,p^=p<<4,p^=p>>>13,v>=0&&(x=x+1640531527|0,m=b[v&127]^=p+x,y=m==0?y+1:0);for(y>=128&&(b[(h&&h.length||0)&127]=-1),y=127,v=4*128;v>0;--v)p=b[y+34&127],m=b[y=y+1&127],p^=p<<13,m^=m<<17,p^=p>>>15,m^=m>>>12,b[y]=p^m;u.w=x,u.X=b,u.i=y}c(l,a)}function i(a,l){return l.i=a.i,l.w=a.w,l.X=a.X.slice(),l}function o(a,l){a==null&&(a=+new Date);var c=new s(a),u=l&&l.state,h=function(){return(c.next()>>>0)/4294967296};return h.double=function(){do var m=c.next()>>>11,p=(c.next()>>>0)/4294967296,y=(m+p)/(1<<21);while(y===0);return y},h.int32=c.next,h.quick=h,u&&(u.X&&i(u,c),h.state=function(){return i(c,{})}),h}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xor4096=o})(Ml,t,!1)})(_I);var D_e=_I.exports,SI={exports:{}};SI.exports;(function(t){(function(e,n,r){function s(a){var l=this,c="";l.next=function(){var h=l.b,m=l.c,p=l.d,y=l.a;return h=h<<25^h>>>7^m,m=m-p|0,p=p<<24^p>>>8^y,y=y-h|0,l.b=h=h<<20^h>>>12^m,l.c=m=m-p|0,l.d=p<<16^m>>>16^y,l.a=y-h|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,a===Math.floor(a)?(l.a=a/4294967296|0,l.b=a|0):c+=a;for(var u=0;u<c.length+20;u++)l.b^=c.charCodeAt(u)|0,l.next()}function i(a,l){return l.a=a.a,l.b=a.b,l.c=a.c,l.d=a.d,l}function o(a,l){var c=new s(a),u=l&&l.state,h=function(){return(c.next()>>>0)/4294967296};return h.double=function(){do var m=c.next()>>>11,p=(c.next()>>>0)/4294967296,y=(m+p)/(1<<21);while(y===0);return y},h.int32=c.next,h.quick=h,u&&(typeof u=="object"&&i(u,c),h.state=function(){return i(c,{})}),h}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.tychei=o})(Ml,t,!1)})(SI);var O_e=SI.exports,O7={exports:{}};const L_e={},M_e=Object.freeze(Object.defineProperty({__proto__:null,default:L_e},Symbol.toStringTag,{value:"Module"})),z_e=XZ(M_e);(function(t){(function(e,n,r){var s=256,i=6,o=52,a="random",l=r.pow(s,i),c=r.pow(2,o),u=c*2,h=s-1,m;function p(N,C,S){var T=[];C=C==!0?{entropy:!0}:C||{};var I=b(x(C.entropy?[N,E(n)]:N??w(),3),T),P=new y(T),R=function(){for(var D=P.g(i),B=l,Z=0;D<c;)D=(D+Z)*s,B*=s,Z=P.g(1);for(;D>=u;)D/=2,B/=2,Z>>>=1;return(D+Z)/B};return R.int32=function(){return P.g(4)|0},R.quick=function(){return P.g(4)/4294967296},R.double=R,b(E(P.S),n),(C.pass||S||function(D,B,Z,z){return z&&(z.S&&v(z,P),D.state=function(){return v(P,{})}),Z?(r[a]=D,B):D})(R,I,"global"in C?C.global:this==r,C.state)}function y(N){var C,S=N.length,T=this,I=0,P=T.i=T.j=0,R=T.S=[];for(S||(N=[S++]);I<s;)R[I]=I++;for(I=0;I<s;I++)R[I]=R[P=h&P+N[I%S]+(C=R[I])],R[P]=C;(T.g=function(D){for(var B,Z=0,z=T.i,q=T.j,M=T.S;D--;)B=M[z=h&z+1],Z=Z*s+M[h&(M[z]=M[q=h&q+B])+(M[q]=B)];return T.i=z,T.j=q,Z})(s)}function v(N,C){return C.i=N.i,C.j=N.j,C.S=N.S.slice(),C}function x(N,C){var S=[],T=typeof N,I;if(C&&T=="object")for(I in N)try{S.push(x(N[I],C-1))}catch{}return S.length?S:T=="string"?N:N+"\0"}function b(N,C){for(var S=N+"",T,I=0;I<S.length;)C[h&I]=h&(T^=C[h&I]*19)+S.charCodeAt(I++);return E(C)}function w(){try{var N;return m&&(N=m.randomBytes)?N=N(s):(N=new Uint8Array(s),(e.crypto||e.msCrypto).getRandomValues(N)),E(N)}catch{var C=e.navigator,S=C&&C.plugins;return[+new Date,e,S,e.screen,E(n)]}}function E(N){return String.fromCharCode.apply(0,N)}if(b(r.random(),n),t.exports){t.exports=p;try{m=z_e}catch{}}else r["seed"+a]=p})(typeof self<"u"?self:Ml,[],Math)})(O7);var F_e=O7.exports,B_e=I_e,V_e=A_e,j_e=R_e,U_e=P_e,H_e=D_e,G_e=O_e,Dd=F_e;Dd.alea=B_e;Dd.xor128=V_e;Dd.xorwow=j_e;Dd.xorshift7=U_e;Dd.xor4096=H_e;Dd.tychei=G_e;var TI=Dd;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class L7{constructor(e,n,r,s,i){this.mean=e,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=s,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);const o=i||Math.random();this.random=TI.alea(o.toString())}nextValue(){if(!isNaN(this.nextVal)){const s=this.nextVal;return this.nextVal=NaN,s}let e,n,r=!1;for(;!r;){let s,i,o;do s=2*this.random()-1,i=2*this.random()-1,o=s*s+i*i;while(o>=1||o===0);const a=Math.sqrt(-2*Math.log(o)/o);e=this.mean+this.stdDev*s*a,n=this.mean+this.stdDev*i*a,(!this.truncated||this.isValidTruncated(e))&&(r=!0)}return(!this.truncated||this.isValidTruncated(n))&&(this.nextVal=this.convertValue(n)),this.convertValue(e)}convertValue(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class W_e{constructor(e=0,n=1,r,s){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=e,this.range=n-e,this.dtype=r,s==null&&(s=Math.random()),typeof s=="number"&&(s=s.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${n} <= 1 and dtype is not float`);this.random=TI.alea(s)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q_e(t,e=0,n=1,r,s){if(Bl(t),r!=null&&r==="bool")throw new Error(`Unsupported data type ${r}`);const i=new L7(e,n,r,!1,s),o=bt(t,r);for(let a=0;a<o.values.length;a++)o.values[a]=i.nextValue();return o.toTensor()}const K_e=oe({randomNormal_:q_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z_e(t,e=0,n=1,r="float32",s){Bl(t);const i=bt(t,r),o=new W_e(e,n,null,s);for(let a=0;a<i.values.length;a++)i.values[a]=o.nextValue();return i.toTensor()}const cy=oe({randomUniform_:Z_e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kg(t,e,n=1,r="float32"){if(n===0)throw new Error("Cannot have a step of zero");const s={start:t,stop:e,step:n,dtype:r};return se.runKernel(W$,{},s)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X_e(t){const n={input:K(t,"input","real")};return se.runKernel(q$,n)}const F1=oe({real_:X_e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y_e(t){const n={x:K(t,"x","reciprocal")};return se.runKernel(U0,n)}const J_e=oe({reciprocal_:Y_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q_e(t){const n={x:K(t,"x","relu")};return se.runKernel(H0,n)}const Od=oe({relu_:Q_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eSe(t){const n={x:K(t,"x","relu6")};return se.runKernel(G0,n)}const M7=oe({relu6_:eSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tSe(t,e){const r={x:K(t,"x","reverse")},s={dims:e};return se.runKernel(Mw,r,s)}const pd=oe({reverse_:tSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nSe(t){const n={x:K(t,"x","round")};return se.runKernel(W0,n)}const z7=oe({round_:nSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rSe(t){const n={x:K(t,"x","rsqrt","float32")};return se.runKernel(q0,n)}const F7=oe({rsqrt_:rSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sSe(t){const n={x:K(t,"x","selu")};return se.runKernel(K0,n)}const B7=oe({selu_:sSe});function iSe(t,e,n,r,s,i=[1,1],o="NHWC"){const a=K(t,"x","separableConv2d"),l=K(e,"depthwiseFilter","separableConv2d"),c=K(n,"pointwiseFilter","separableConv2d");let u=a,h=!1;if(a.rank===3&&(h=!0,u=ie(a,[1,a.shape[0],a.shape[1],a.shape[2]])),o==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");F(u.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${u.rank}.`),F(l.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${l.rank}.`),F(c.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${l.rank}.`),F(c.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${c.shape[0]}.`),F(c.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${c.shape[1]}.`);const m=l.shape[2],p=l.shape[3];F(c.shape[2]===m*p,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${m*p}, but got ${c.shape[2]}.`);const y=dI(u,l,r,s,o,i),x=fd(y,c,1,"valid",o);return h?ie(x,[x.shape[1],x.shape[2],x.shape[3]]):x}const V7=oe({separableConv2d_:iSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oSe(t){const n={x:K(t,"x","sign")};return se.runKernel(Y0,n)}const aSe=oe({sign_:oSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lSe(t){const n={x:K(t,"x","sin","float32")};return se.runKernel(Z0,n)}const j7=oe({sin_:lSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cSe(t){const n={x:K(t,"x","sinh")};return se.runKernel(X0,n)}const U7=oe({sinh_:cSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uSe(t,e,n){const r=K(t,"x","slice1d");return F(r.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`),bn(r,[e],[n])}const $I=oe({slice1d_:uSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dSe(t,e,n){const r=K(t,"x","slice2d");return F(r.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`),bn(r,e,n)}const H7=oe({slice2d_:dSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hSe(t,e,n){const r=K(t,"x","slice3d");return F(r.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`),bn(r,e,n)}const II=oe({slice3d_:hSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fSe(t,e,n){const r=K(t,"x","slice4d");return F(r.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`),bn(r,e,n)}const B1=oe({slice4d_:fSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mSe(t,e=-1){const n=K(t,"logits","softmax","float32");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${e}`);const r={logits:n},s={dim:e};return se.runKernel(Uw,r,s)}const AI=oe({softmax_:mSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pSe(t){F(t.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${t.dtype}.`);const e={input:t};return se.runKernel(O$,e)}const G7=oe({fft_:pSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gSe(t){F(t.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${t.dtype}.`);const e={input:t};return se.runKernel(z$,e)}const y_=oe({ifft_:gSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ySe(t){const e=t.shape[t.shape.length-1],n=t.size/e;let r;if(e<=2){const s=ie(t,[n,e]);r=y_(s)}else{const s=[n,2*(e-1)],i=ie(F1(t),[n,e]),o=ie(mI(t),[n,e]),a=pd(bn(i,[0,1],[n,e-2]),1),l=re(pd(bn(o,[0,1],[n,e-2]),1),Kt(-1)),c=Us([i,a],1),u=Us([o,l],1),h=ie(Cf(c,u),[s[0],s[1]]);r=y_(h)}if(r=F1(r),t.rank===3&&t.shape[0]!==0){const s=r,i=t.shape[0];r=ie(r,[i,r.shape[0]/i,r.shape[1]]),s.dispose()}return r}const bSe=oe({irfft_:ySe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vSe(t,e,n=0){const s={x:K(t,"x","split")},i={numOrSizeSplits:e,axis:n};return se.runKernel(jw,s,i)}const Ri=oe({split_:vSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xSe(t,e){F(t.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${t.dtype}`);let n=t.shape[t.shape.length-1];const r=t.size/n;let s;if(e!=null&&e<n){const y=t.shape.map(x=>0),v=t.shape.map(x=>x);v[t.shape.length-1]=e,s=bn(t,y,v),n=e}else if(e!=null&&e>n){const y=t.shape.map(v=>v);y[t.shape.length-1]=e-n,s=Us([t,Pr(y)],t.shape.length-1),n=e}else s=t;const i=Mt(s),o=ie(Cf(s,i),[r,n]),a=G7(o),l=Math.floor(n/2)+1,c=F1(a),u=mI(a),h=Ri(c,[l,n-l],c.shape.length-1),m=Ri(u,[l,n-l],u.shape.length-1),p=s.shape.slice();return p[s.shape.length-1]=l,ie(Cf(h[0],m[0]),p)}const wSe=oe({rfft_:xSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ESe(t,e){let n=K(t,"a","squaredDifference"),r=K(e,"b","squaredDifference");[n,r]=er(n,r),ut(n.shape,r.shape);const s={a:n,b:r},i={};return se.runKernel(ty,s,i)}const kSe=oe({squaredDifference_:ESe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NSe(t,e){const n=K(t,"x","squeeze","string_or_numeric");return ie(n,Jc(n.shape,e).newShape)}const uy=oe({squeeze_:NSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CSe(t,e=0){const n=c7(t,"tensors","stack","string_or_numeric");F(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&F(e<=n[0].rank,()=>"Axis must be <= rank of the tensor");const r=n,s={axis:e};return se.runKernel(Iw,r,s)}const Rl=oe({stack_:CSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Se(t,e=0){const r={x:K(t,"x","step")},s={alpha:e};return se.runKernel(oy,r,s)}const dy=oe({step_:_Se});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SSe(t,e,n,r,s=0,i=0,o=0,a=0,l=0){const u={x:K(t,"x","stridedSlice","string_or_numeric")},h={begin:e,end:n,strides:r,beginMask:s,endMask:i,ellipsisMask:o,newAxisMask:a,shrinkAxisMask:l};return se.runKernel(J$,u,h)}const TSe=oe({stridedSlice_:SSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Se(t){const n={x:K(t,"x","tan","float32")};return se.runKernel(ry,n)}const ISe=oe({tan_:$Se});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ri(t,e){pj(t);const n=Kw(t,e);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Zw(t,null,n,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jh(t,e,n){if(pj(t),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");const r=Kw(t,n);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Zw(t,e,r,n)}function W7(t,e,n){const r=e.rank>1?e.shape[e.rank-1]:1,s=e.rank>1?e.rank-1:1,i=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${e.shape}, shape: ${t}, sliceDim: ${r}, and batchDim: ${s}.`;if(n.rank<s)throw new Error(i+` update.rank < ${s}. `);if(t.length<r+(n.rank-s))throw new Error(i+` Output shape length < ${r+(n.rank-s)}`);if(n.rank!==s+t.length-r)throw new Error(i+` update.rank != ${s+t.length-r}`);for(let o=0;o<s;++o)if(n.shape[o]!==e.shape[o])throw new Error(i+` updates.shape[${o}] (${n.shape[o]}) != indices.shape[${o}] (${e.shape[o]}).`);for(let o=0;o<n.rank-s;++o)if(n.shape[o+s]!==t[o+r])throw new Error(i+` updates.shape[${o+s}] (${n.shape[o+s]}) != shape[${o+s}] (${t[o+s]})`)}function ASe(t,e,n){if(e.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${e.rank}.`);if(t.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${e.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(n.length===0){if(e.size===0)throw new Error(`Indices specified for empty output. indices shape: ${e.shape}`);if(t.size===0)throw new Error(`Updates specified for empty output. updates shape: ${t.shape}`)}W7(n,e,t)}function Ld(t,e,n){const r=e.shape.length,s=r>1?e.shape[r-1]:1,i=n.length;let o=1;for(let h=s;h<i;++h)o*=n[h];const a=s<1?1:s,l=pe(e.shape)/a,c=[...qe(n.slice(0,s)),1],u=pe(n);return{sliceRank:s,numUpdates:l,sliceSize:o,strides:c,outputSize:u}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RSe(t,e=1,n=!0){const r=K(t,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");const s=r.shape[r.shape.length-1];if(e<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${e}`);if(e>s)throw new Error(`'k' passed to topk() must be <= the last dimension (${s}) but got ${e}`);const i={x:r},o={k:e,sorted:n},[a,l]=se.runKernel(Q$,i,o);return{values:a,indices:l}}const PSe=oe({topk_:RSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DSe(t,e=0,n=1,r,s){if(Bl(t),r!=null&&r==="bool")throw new Error("Unsupported data type $ { dtype }");const i=new L7(e,n,r,!0,s),o=bt(t,r);for(let a=0;a<o.values.length;a++)o.values[a]=i.nextValue();return o.toTensor()}const q7=oe({truncatedNormal_:DSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OSe(t,e=0){const n=K(t,"x","unique","string_or_numeric");F(n.rank>0,()=>"The input tensor must be at least 1D");const r={x:n},s={axis:e},[i,o]=se.runKernel(tI,r,s);return{values:i,indices:o}}const LSe=oe({unique_:OSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MSe(t,e,n){const r=K(t,"x","unsortedSegmentSum"),s=K(e,"segmentIds","unsortedSegmentSum","int32");F(Ef(n),()=>"numSegments must be of dtype int");const i={x:r,segmentIds:s},o={numSegments:n};return se.runKernel(Gw,i,o)}const K7=oe({unsortedSegmentSum_:MSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zSe(t,e=0){const n=K(t,"x","unstack","string_or_numeric");F(e>=-n.shape.length&&e<n.shape.length,()=>`Axis = ${e} is not in [-${n.shape.length}, ${n.shape.length})`);const r={value:n},s={axis:e};return se.runKernel(Hw,r,s)}const gd=oe({unstack_:zSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FSe(t,e=!0,n,r){return se.makeVariable(t,e,n,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z7(t,e){const n=[];for(let i=0;i<e.length;i++)e[i]&&n.push(i);const r=bt(t,"int32"),s=bt([n.length,t.length],"int32");for(let i=0;i<n.length;i++){const o=r.indexToLoc(n[i]),a=i*t.length;s.values.set(o,a)}return s.toTensor()}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BSe(t,e,n){const r=K(t,"x","transpose");if(e==null&&(e=r.shape.map((o,a)=>a).reverse()),F(r.rank===e.length,()=>`Error in transpose: rank of input ${r.rank} must match length of perm ${e}.`),e.forEach(o=>{F(o>=0&&o<r.rank,()=>`All entries in 'perm' must be between 0 and ${r.rank-1} but got ${e}`)}),r.rank<=1)return r.clone();const s={x:r},i={perm:e};return r.dtype==="complex64"?ue(()=>{let o=F1(r),a=mI(r);return o=se.runKernel(Xh,{x:o},i),a=se.runKernel(Xh,{x:a},i),n&&(a=Qn(a)),Cf(o,a)}):se.runKernel(Xh,s,i)}const Lt=oe({transpose_:BSe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VSe(t,e){if(e==null)return t.shape.slice();if(Zt(t.shape,e))return e;if(t.shape.length===e.length){const n=[];for(let r=0;r<t.shape.length;r++)e[r]==null&&t.shape[r]!=null?n.push(t.shape[r]):n.push(e[r]);return n}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jSe(t,e,n,r){const s=K(t,"x","dropout");if(F(s.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${s.dtype} tensor instead.`),F(e>=0&&e<1,()=>`rate must be a float in the range [0, 1), but got ${e}.`),e===0)return t instanceof gr?s.clone():s;const i=VSe(s,n),o=1-e,a=Ye(t2(_e(cy(i,0,1,"float32",r),o)),o);return re(s,a)}const USe=oe({dropout_:jSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HSe(t,e,n,r,s,i="NHWC",o){let a=t;t.rank===3&&(a=ie(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=ie(e,[1,e.shape[0],e.shape[1],e.shape[2]])),F(a.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${a.shape}.`),F(l.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${l.shape}.`),F(n.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`);const c=i==="NHWC"?a.shape[3]:a.shape[1],u=i==="NHWC"?l.shape[3]:l.shape[1];F(c===n[2],()=>`Error in conv2dDerFilter: depth of input ${c}) must match input depth in filter (${n[2]}.`),F(u===n[3],()=>`Error in conv2dDerFilter: depth of dy (${u}) must match output depth for filter (${n[3]}).`),Ks("conv2dDerFilter",s,o);const h={x:a,dy:l},m={strides:r,pad:s,dataFormat:i,dimRoundingMode:o,filterShape:n};return se.runKernel(N$,h,m)}const RI=oe({conv2DBackpropFilter_:HSe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PI(t,e,n){if(n==null||n==="linear")return t;if(n==="relu")return re(t,dy(e));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function DI(t,e){let n=e;const r=Cr(t.shape,e.shape);return r.length>0&&(n=Xe(n,r)),ie(n,t.shape)}function OI(t,e,n,r){if(e==="linear")return t;if(e==="relu")return Od(t);if(e==="elu")return Qw(t);if(e==="relu6")return M7(t);if(e==="prelu")return wI(t,n);if(e==="leakyrelu")return pI(t,r);if(e==="sigmoid")return rm(t);throw new Error(`Unknown fused activation ${e}.`)}const LI=(t,e)=>!(t>0)||e==="linear";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GSe({x:t,filter:e,strides:n,pad:r,dataFormat:s="NHWC",dilations:i=[1,1],dimRoundingMode:o,bias:a,activation:l="linear",preluActivationWeights:c,leakyreluAlpha:u}){if(l=l||"linear",LI(se.state.gradientDepth,l)===!1){F(s==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${s} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let S=fd(t,e,n,r,s,i,o);return a!=null&&(S=_e(S,a)),OI(S,l,c,u)}const h=K(t,"x","conv2d","float32"),m=K(e,"filter","conv2d","float32");let p=h,y=!1;h.rank===3&&(y=!0,p=ie(h,[1,h.shape[0],h.shape[1],h.shape[2]])),F(p.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${p.rank}.`),F(m.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${m.rank}.`),Ks("fused conv2d",r,o);const v=s==="NHWC"?p.shape[3]:p.shape[1];F(m.shape[2]===v,()=>`Error in conv2d: depth of input (${v}) must match input depth for filter ${m.shape[2]}.`),F(hs(n,i),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`);const x=Xr(p.shape,m.shape,n,i,r,o);let b;a!=null&&(b=K(a,"bias","fused conv2d"),[b]=er(b,h),s==="NHWC"?ut(x.outShape,b.shape):(F(b.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${b.shape.length}.`),F(b.shape.length===0||b.shape[0]===x.outChannels||b.shape[0]===1,()=>`Error in fused conv2d: bias shape (${b.shape}) is not compatible with the number of output channels (${x.outChannels})`)));let w;if(c!=null){const S=c.shape;if(F(S.length<=1||S.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${S.length}.`),S.length===1)F(S[0]===1||S[0]===x.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${S}) is not compatible with the number of output channels (${x.outChannels}).`);else if(S.length===3)try{ut(S,x.outShape)}catch{const I=`Error in fused conv2d: PReLU activation weights (${S}) is not compatible with the output shape of the conv2d (${x.outShape}).`;throw Error(I)}w=K(c,"prelu weights","fused conv2d")}const E=(S,T)=>{F(s==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${s} but only NHWC is currently supported.`);const[I,P,R,D]=T,B=PI(S,R,l);F(dd(i),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${i}'`);const Z=cI(P.shape,B,I,n,r),z=RI(P,B,I.shape,n,r),q=[Z,z];if(D!=null){const M=DI(D,B);q.push(M)}return q},N={x:p,filter:m,bias:b,preluActivationWeights:w},C={strides:n,pad:r,dataFormat:s,dilations:i,dimRoundingMode:o,activation:l,leakyreluAlpha:u};return a==null?Sf((T,I,P)=>{let R=se.runKernel(R1,N,C);return P([I,T,R]),y&&(R=ie(R,[R.shape[1],R.shape[2],R.shape[3]])),{value:R,gradFunc:E}})(p,m):Sf((T,I,P,R)=>{let D=se.runKernel(R1,N,C);return R([I,T,D,P]),y&&(D=ie(D,[D.shape[1],D.shape[2],D.shape[3]])),{value:D,gradFunc:E}})(p,m,b)}const WSe=oe({fusedConv2d_:GSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qSe(t,e,n,r,s,i=[1,1],o){let a=t;t.rank===3&&(a=ie(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=ie(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const c={x:a,dy:l},u={strides:r,pad:s,dimRoundingMode:o,dilations:i,filterShape:n};return se.runKernel(A$,c,u)}const KSe=oe({depthwiseConv2dNativeBackpropFilter_:qSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZSe(t,e,n,r,s,i=[1,1],o){let a=e,l=!1;e.rank===3&&(l=!0,a=ie(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const c={dy:a,filter:n},u={strides:r,pad:s,dimRoundingMode:o,dilations:i,inputShape:t},h=se.runKernel(R$,c,u);return l?ie(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const XSe=oe({depthwiseConv2dNativeBackpropInput_:ZSe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YSe({a:t,b:e,transposeA:n=!1,transposeB:r=!1,bias:s,activation:i="linear",preluActivationWeights:o,leakyreluAlpha:a=.2}){if(LI(se.state.gradientDepth,i)===!1){let D=qt(t,e,n,r);return s!=null&&(D=_e(D,s)),OI(D,i,o,a)}let l=K(t,"a","fused matMul"),c=K(e,"b","fused matMul");[l,c]=er(l,c);const u=n?l.shape[l.rank-2]:l.shape[l.rank-1],h=r?c.shape[c.rank-1]:c.shape[c.rank-2],m=n?l.shape[l.rank-1]:l.shape[l.rank-2],p=r?c.shape[c.rank-2]:c.shape[c.rank-1],y=l.shape.slice(0,-2),v=c.shape.slice(0,-2),x=pe(y),b=pe(v);F(u===h,()=>`Error in fused matMul: inner shapes (${u}) and (${h}) of Tensors with shapes ${l.shape} and ${c.shape} and transposeA=${n} and transposeB=${r} must match.`);const E=ut(l.shape.slice(0,-2),c.shape.slice(0,-2)).concat([m,p]),N=n?ie(l,[x,u,m]):ie(l,[x,m,u]),C=r?ie(c,[b,p,h]):ie(c,[b,h,p]);let S;s!=null&&(S=K(s,"bias","fused matMul"),[S]=er(S,l),ut(E,S.shape));let T;o!=null&&(T=K(o,"prelu weights","fused matMul"));const I=(D,B)=>{const[Z,z,q,M]=B,U=PI(ie(D,q.shape),q,i);let V,ne;if(!n&&!r?(V=qt(U,z,!1,!0),ne=qt(Z,U,!0,!1)):!n&&r?(V=qt(U,z,!1,!1),ne=qt(U,Z,!0,!1)):n&&!r?(V=qt(z,U,!1,!0),ne=qt(Z,U,!1,!1)):(V=qt(z,U,!0,!0),ne=qt(U,Z,!0,!0)),s!=null){const J=DI(M,U);return[V,ne,J]}else return[V,ne]},P={a:N,b:C,bias:S,preluActivationWeights:T},R={transposeA:n,transposeB:r,activation:i,leakyreluAlpha:a};return s==null?Sf((B,Z,z)=>{const q=se.runKernel(A1,P,R);return z([B,Z,q]),{value:ie(q,E),gradFunc:I}})(N,C):Sf((B,Z,z,q)=>{const M=se.runKernel(A1,P,R);return q([B,Z,M,z]),{value:ie(M,E),gradFunc:I}})(N,C,S)}const eM=oe({fusedMatMul_:YSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JSe(t,e,n,r,s="bilinear",i=0){const o=K(t,"image","cropAndResize"),a=K(e,"boxes","cropAndResize","float32"),l=K(n,"boxInd","cropAndResize","int32"),c=a.shape[0];F(o.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${o.rank}.`),F(a.rank===2&&a.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${c},4] but had shape ${a.shape}.`),F(l.rank===1&&l.shape[0]===c,()=>`Error in cropAndResize: boxInd must be have size [${c}] but had shape ${a.shape}.`),F(r.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`),F(r[0]>=1&&r[1]>=1,()=>`cropSize must be atleast [1,1], but was ${r}`),F(s==="bilinear"||s==="nearest",()=>`method must be bilinear or nearest, but was ${s}`);const u={image:o,boxes:a,boxInd:l},h={method:s,extrapolationValue:i,cropSize:r};return se.runKernel(T$,u,h)}const QSe=oe({cropAndResize_:JSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eTe(t){const e=K(t,"image","flipLeftRight","float32");F(e.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${e.rank}.`);const n={image:e};return se.runKernel(M$,n,{})}const tTe=oe({flipLeftRight_:eTe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nTe(t){const e=K(t,"image","grayscaleToRGB"),n=e.rank-1,r=e.shape[n];F(e.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${e.rank}.`),F(r===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`);const s=new Array(e.rank);return s.fill(1,0,n),s[n]=3,zo(e,s)}const rTe=oe({grayscaleToRGB_:nTe});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sTe(t){const e=K(t,"image","RGBToGrayscale"),n=e.rank-1,r=e.shape[n];F(e.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${e.rank}.`),F(r===3,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${r}.`);const s=e.dtype,i=Me(e,"float32"),o=ri([.2989,.587,.114]);let a;switch(e.rank){case 2:a=Zm("ij,j->i",i,o);break;case 3:a=Zm("ijk,k->ij",i,o);break;case 4:a=Zm("ijkl,l->ijk",i,o);break;case 5:a=Zm("ijklm,m->ijkl",i,o);break;case 6:a=Zm("ijklmn,n->ijklm",i,o);break;default:throw new Error("Not a valid tensor rank.")}return a=Ms(a,-1),Me(a,s)}const iTe=oe({rgbToGrayscale_:sTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oTe(t,e,n=0,r=.5){const s=K(t,"image","rotateWithOffset","float32");F(s.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${s.rank}.`);const i={image:s},o={radians:e,fillValue:n,center:r};return se.runKernel(nI,i,o)}const aTe=oe({rotateWithOffset_:oTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function im(t,e,n,r,s,i){r==null&&(r=.5),s==null&&(s=Number.NEGATIVE_INFINITY),i==null&&(i=0);const o=t.shape[0];return n=Math.min(n,o),F(0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),F(t.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${t.rank}'`),F(t.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${t.shape[1]}`),F(e.rank===1,()=>"scores must be a 1D tensor"),F(e.shape[0]===o,()=>`scores has incompatible shape with boxes. Expected ${o}, but was ${e.shape[0]}`),F(0<=i&&i<=1,()=>`softNmsSigma must be in [0, 1], but was '${i}'`),{maxOutputSize:n,iouThreshold:r,scoreThreshold:s,softNmsSigma:i}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lTe(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY){const i=K(t,"boxes","nonMaxSuppression","float32"),o=K(e,"scores","nonMaxSuppression","float32"),a=im(i,o,n,r,s);n=a.maxOutputSize,r=a.iouThreshold,s=a.scoreThreshold;const l={maxOutputSize:n,iouThreshold:r,scoreThreshold:s};return se.runKernel(U$,{boxes:i,scores:o},l)}const cTe=oe({nonMaxSuppression_:lTe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uTe(t,e,n){const r=dTe(t,e,n),s=r<0?-(r+1):r;t.splice(s,0,e)}function dTe(t,e,n){return fTe(t,e,n||hTe)}function hTe(t,e){return t>e?1:t<e?-1:0}function fTe(t,e,n){let r=0,s=t.length,i=0,o=!1;for(;r<s;){i=r+(s-r>>>1);const a=n(e,t[i]);a>0?r=i+1:(s=i,o=!a)}return o?r:-r-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MI(t,e,n,r,s){return BI(t,e,n,r,s,0)}function zI(t,e,n,r,s,i){return BI(t,e,n,r,s,0,!1,i,!0)}function FI(t,e,n,r,s,i){return BI(t,e,n,r,s,i,!0)}function BI(t,e,n,r,s,i,o=!1,a=!1,l=!1){const c=[];for(let x=0;x<e.length;x++)e[x]>s&&c.push({score:e[x],boxIndex:x,suppressBeginIndex:0});c.sort(tM);const u=i>0?-.5/i:0,h=[],m=[];for(;h.length<n&&c.length>0;){const x=c.pop(),{score:b,boxIndex:w,suppressBeginIndex:E}=x;if(b<s)break;let N=!1;for(let C=h.length-1;C>=E;--C){const S=mTe(t,w,h[C]);if(S>=r){N=!0;break}if(x.score=x.score*pTe(r,u,S),x.score<=s)break}x.suppressBeginIndex=h.length,N||(x.score===b?(h.push(w),m.push(x.score)):x.score>s&&uTe(c,x,tM))}const p=h.length,y=n-p;a&&y>0&&(h.push(...new Array(y).fill(0)),m.push(...new Array(y).fill(0)));const v={selectedIndices:h};return o&&(v.selectedScores=m),l&&(v.validOutputs=p),v}function mTe(t,e,n){const r=t.subarray(e*4,e*4+4),s=t.subarray(n*4,n*4+4),i=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),a=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),c=Math.min(s[0],s[2]),u=Math.min(s[1],s[3]),h=Math.max(s[0],s[2]),m=Math.max(s[1],s[3]),p=(a-i)*(l-o),y=(h-c)*(m-u);if(p<=0||y<=0)return 0;const v=Math.max(i,c),x=Math.max(o,u),b=Math.min(a,h),w=Math.min(l,m),E=Math.max(b-v,0)*Math.max(w-x,0);return E/(p+y-E)}function pTe(t,e,n){const r=Math.exp(e*n*n);return n<=t?r:0}function tM(t,e){return t.score-e.score||t.score===e.score&&e.boxIndex-t.boxIndex}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function gTe(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY){const i=K(t,"boxes","nonMaxSuppressionAsync"),o=K(e,"scores","nonMaxSuppressionAsync"),a=im(i,o,n,r,s);n=a.maxOutputSize,r=a.iouThreshold,s=a.scoreThreshold;const l=await Promise.all([i.data(),o.data()]),c=l[0],u=l[1],{selectedIndices:h}=MI(c,u,n,r,s);return i!==t&&i.dispose(),o!==e&&o.dispose(),ri(h,"int32")}const yTe=gTe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bTe(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY,i=0){const o=K(t,"boxes","nonMaxSuppression"),a=K(e,"scores","nonMaxSuppression"),l=im(o,a,n,r,s,i);n=l.maxOutputSize,r=l.iouThreshold,s=l.scoreThreshold,i=l.softNmsSigma;const c={boxes:o,scores:a},u={maxOutputSize:n,iouThreshold:r,scoreThreshold:s,softNmsSigma:i},h=se.runKernel(G$,c,u);return{selectedIndices:h[0],selectedScores:h[1]}}const vTe=oe({nonMaxSuppressionWithScore_:bTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function xTe(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY,i=0){const o=K(t,"boxes","nonMaxSuppressionAsync"),a=K(e,"scores","nonMaxSuppressionAsync"),l=im(o,a,n,r,s,i);n=l.maxOutputSize,r=l.iouThreshold,s=l.scoreThreshold,i=l.softNmsSigma;const c=await Promise.all([o.data(),a.data()]),u=c[0],h=c[1],{selectedIndices:m,selectedScores:p}=FI(u,h,n,r,s,i);return o!==t&&o.dispose(),a!==e&&a.dispose(),{selectedIndices:ri(m,"int32"),selectedScores:ri(p)}}const wTe=xTe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ETe(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY,i=!1){const o=K(t,"boxes","nonMaxSuppression"),a=K(e,"scores","nonMaxSuppression"),l=im(o,a,n,r,s,null),c=l.maxOutputSize,u=l.iouThreshold,h=l.scoreThreshold,m={boxes:o,scores:a},p={maxOutputSize:c,iouThreshold:u,scoreThreshold:h,padToMaxOutputSize:i},y=se.runKernel(H$,m,p);return{selectedIndices:y[0],validOutputs:y[1]}}const kTe=oe({nonMaxSuppressionPadded_:ETe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function NTe(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY,i=!1){const o=K(t,"boxes","nonMaxSuppressionAsync"),a=K(e,"scores","nonMaxSuppressionAsync"),l=im(o,a,n,r,s,null),c=l.maxOutputSize,u=l.iouThreshold,h=l.scoreThreshold,[m,p]=await Promise.all([o.data(),a.data()]),{selectedIndices:y,validOutputs:v}=zI(m,p,c,u,h,i);return o!==t&&o.dispose(),a!==e&&a.dispose(),{selectedIndices:ri(y,"int32"),validOutputs:Kt(v,"int32")}}const CTe=NTe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Te(t,e,n=!1,r=!1){const s=K(t,"images","resizeBilinear");F(s.rank===3||s.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${s.rank}.`),F(e.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${e}.`),F(r===!1||n===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let i=s,o=!1;s.rank===3&&(o=!0,i=ie(s,[1,s.shape[0],s.shape[1],s.shape[2]]));const a={images:i},l={alignCorners:n,halfPixelCenters:r,size:e},c=se.runKernel(Lw,a,l);return o?ie(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const X7=oe({resizeBilinear_:_Te});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function STe(t,e,n=!1,r=!1){const s=K(t,"images","resizeNearestNeighbor");F(s.rank===3||s.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${s.rank}.`),F(e.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${e}.`),F(s.dtype==="float32"||s.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),F(r===!1||n===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let i=s,o=!1;s.rank===3&&(o=!0,i=ie(s,[1,s.shape[0],s.shape[1],s.shape[2]]));const a={images:i},l={alignCorners:n,halfPixelCenters:r,size:e},c=se.runKernel(Ow,a,l);return o?ie(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const Y7=oe({resizeNearestNeighbor_:STe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TTe(t,e="binary",n=!1,r=.5){const s=K(t,"image","threshold"),i=.2989,o=.587,a=.114,l=s.shape[0]*s.shape[1];let c=re(ri([r]),255),u,h,m,p;if(F(s.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${s.rank}.`),F(s.shape[2]===3||s.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${s.shape[2]}.`),F(s.dtype==="int32"||s.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${s.dtype}.`),F(e==="otsu"||e==="binary",()=>`Method must be binary or otsu, but was ${e}`),s.shape[2]===3){[u,h,m]=Ri(s,[1,1,1],-1);const x=re(u,i),b=re(h,o),w=re(m,a);p=_e(_e(x,b),w)}else p=t;if(e==="otsu"){const x=SNe(Me(z7(p),"int32"),u7([]),256);c=$Te(x,l)}const y=n?sm(p,c):Li(p,c);return Me(re(y,255),"int32")}function $Te(t,e){let n=ri([-1]),r=ri([0]),s=ri([0]),i,o,a,l,c,u;for(let h=0;h<t.size-1;h++){i=bn(t,0,h+1),o=bn(t,h+1),c=Ye(Xe(i),e),u=Ye(Xe(o),e);const m=Xe(re(i,kg(0,i.size)));a=Ye(m,Xe(i));const p=Jw(o.shape,i.size),y=_e(kg(0,o.size),p),v=re(o,y);l=Ye(Xe(v),Xe(o));const x=et(a,l),b=et(a,l),w=re(c,u);s=re(re(w,x),b);const E=Li(s,r);r=$s(E,s,r),n=$s(E,ri([h]),n)}return n}const ITe=oe({threshold_:TTe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ATe(t,e,n="nearest",r="constant",s=0,i){const o=K(t,"image","transform","float32"),a=K(e,"transforms","transform","float32");F(o.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${o.rank}.`),F(a.rank===2&&(a.shape[0]===o.shape[0]||a.shape[0]===1)&&a.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),F(i==null||i.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${i}.`);const l={image:o,transforms:a},c={interpolation:n,fillMode:r,fillValue:s,outputShape:i};return se.runKernel(eI,l,c)}const RTe=oe({transform_:ATe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PTe(t,e,n){const r=K(t,"a","bandPart");F(r.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`);const s=r.shape,[i,o]=r.shape.slice(-2);let a,l;typeof e=="number"?(F(e%1===0,()=>`bandPart(): numLower must be an integer, got ${e}.`),F(e<=i,()=>`bandPart(): numLower (${e}) must not be greater than the number of rows (${i}).`),a=K(e<0?i:e,"numLower","bandPart")):(F(e.dtype==="int32",()=>"bandPart(): numLower's dtype must be an int32."),a=$s(M1(e,0),i,Eg(e,i))),typeof n=="number"?(F(n%1===0,()=>`bandPart(): numUpper must be an integer, got ${n}.`),F(n<=o,()=>`bandPart(): numUpper (${n}) must not be greater than the number of columns (${o}).`),l=K(n<0?o:n,"numUpper","bandPart")):(F(n.dtype==="int32",()=>"bandPart(): numUpper's dtype must be an int32."),l=$s(M1(n,0),o,Eg(n,o)));const c=ie(kg(0,i,1,"int32"),[-1,1]),u=kg(0,o,1,"int32"),h=et(c,u),m=Al(sm(h,a),Pd(h,Qn(l))),p=Pr([i,o],r.dtype);return ie(Rl(gd(ie(r,[-1,i,o])).map(y=>$s(m,y,p))),s)}const DTe=oe({bandPart_:PTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OTe(t){let e;if(Array.isArray(t)){e=!1,F(t!=null&&t.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const s=t[0].shape[0];for(let i=1;i<t.length;++i)F(t[i].shape[0]===s,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${t[i].shape[0]} vs. ${s})`)}else e=!0,t=Ri(t,t.shape[0],0).map(s=>uy(s,[0]));F(t.length<=t[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${t.length}) exceeds number of dimensions (${t[0].shape[0]}).`);const n=[],r=t;for(let s=0;s<t.length;++s)n.push(se.tidy(()=>{let i=r[s];if(s>0)for(let o=0;o<s;++o){const a=re(Xe(re(n[o],i)),n[o]);i=et(i,a)}return Ye(i,e2(i,"euclidean"))}));return e?Rl(n,0):n}const LTe=oe({gramSchmidt_:OTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MTe(t,e=!1){if(F(t.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${t.rank}`),t.rank===2)return nM(t,e);{const n=t.shape.slice(0,t.shape.length-2).reduce((l,c)=>l*c),r=gd(ie(t,[n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),s=[],i=[];r.forEach(l=>{const[c,u]=nM(l,e);s.push(c),i.push(u)});const o=ie(Rl(s,0),t.shape),a=ie(Rl(i,0),t.shape);return[o,a]}}function nM(t,e=!1){return se.tidy(()=>{F(t.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${t.shape.length}D Tensor.`);const n=t.shape[0],r=t.shape[1];let s=$7(n),i=Ju(t);const o=Jh([[1]],[1,1]);let a=Ju(o);const l=n>=r?r:n;for(let c=0;c<l;++c){const u=i,h=a,m=s;[a,i,s]=se.tidy(()=>{const p=bn(i,[c,c],[n-c,1]),y=e2(p),v=bn(i,[c,c],[1,1]),x=$s(Li(v,0),Jh([[-1]]),Jh([[1]])),b=et(v,re(x,y)),w=Ye(p,b);w.shape[0]===1?a=Ju(o):a=Us([o,bn(w,[1,0],[w.shape[0]-1,w.shape[1]])],0);const E=Qn(Ye(qt(x,b),y)),N=bn(i,[c,0],[n-c,r]),C=re(E,a),S=Lt(a);if(c===0)i=et(N,qt(C,qt(S,N)));else{const P=et(N,qt(C,qt(S,N)));i=Us([bn(i,[0,0],[c,r]),P],0)}const T=Lt(C),I=bn(s,[0,c],[n,s.shape[1]-c]);if(c===0)s=et(I,qt(qt(I,a),T));else{const P=et(I,qt(qt(I,a),T));s=Us([bn(s,[0,0],[n,c]),P],1)}return[a,i,s]}),_t([u,h,m])}return!e&&n>r&&(s=bn(s,[0,0],[n,r]),i=bn(i,[0,0],[r,r])),[s,i]})}const zTe=oe({qr_:MTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yl={flipLeftRight:tTe,grayscaleToRGB:rTe,resizeNearestNeighbor:Y7,resizeBilinear:X7,rgbToGrayscale:iTe,rotateWithOffset:aTe,cropAndResize:QSe,nonMaxSuppression:cTe,nonMaxSuppressionAsync:yTe,nonMaxSuppressionWithScore:vTe,nonMaxSuppressionWithScoreAsync:wTe,nonMaxSuppressionPadded:kTe,nonMaxSuppressionPaddedAsync:CTe,threshold:ITe,transform:RTe},FTe={bandPart:DTe,gramSchmidt:LTe,qr:zTe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BTe=new Map,VTe=new Map;class om{getClassName(){return this.constructor.className}static fromConfig(e,n){return new e(n)}}class so{constructor(){this.classNameMap={}}static getMap(){return so.instance==null&&(so.instance=new so),so.instance}static register(e){so.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function we(t,e,n){F(t.className!=null,()=>"Class being registered does not have the static className property defined."),F(typeof t.className=="string",()=>"className is required to be a string, but got type "+typeof t.className),F(t.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),typeof e>"u"&&(e="Custom"),typeof n>"u"&&(n=t.className);const r=n,s=e+">"+r;return so.register(t),BTe.set(s,t),VTe.set(t,s),t}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class su extends om{minimize(e,n=!1,r){const{value:s,grads:i}=this.computeGradients(e,r);if(r!=null){const o=r.map(a=>({name:a.name,tensor:i[a.name]}));this.applyGradients(o)}else this.applyGradients(i);return _t(i),n?s:(s.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,n){return KCe(e,n)}dispose(){this.iterations_!=null&&_t(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:Kt(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty(su,Symbol.hasInstance,{value:t=>t.minimize!=null&&t.computeGradients!=null&&t.applyGradients!=null});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class J7 extends su{static get className(){return"Adadelta"}constructor(e,n,r=null){super(),this.learningRate=e,this.rho=n,this.epsilon=r,this.accumulatedGrads=[],this.accumulatedUpdates=[],r==null&&(this.epsilon=se.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const i=se.registeredVariables[r],o=!1;this.accumulatedGrads[s]==null&&(this.accumulatedGrads[s]={originalName:`${r}/accum_grad`,variable:ue(()=>Mt(i).variable(o))}),this.accumulatedUpdates[s]==null&&(this.accumulatedUpdates[s]={originalName:`${r}/accum_var`,variable:ue(()=>Mt(i).variable(o))});const a=Array.isArray(e)?e[s].tensor:e[r];if(a==null)return;const l=this.accumulatedGrads[s].variable,c=this.accumulatedUpdates[s].variable;ue(()=>{const u=_e(re(l,this.rho),re(Nn(a),1-this.rho)),h=re(Ye(us(_e(c,this.epsilon)),us(_e(l,this.epsilon))),a),m=_e(re(c,this.rho),re(Nn(h),1-this.rho));l.assign(u),c.assign(m);const p=_e(re(h,-this.learningRate),i);i.assign(p)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(_t(this.accumulatedGrads.map(e=>e.variable)),_t(this.accumulatedUpdates.map(e=>e.variable)))}async getWeights(){const e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=e.length/2,r=!1;this.accumulatedGrads=e.slice(0,n).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.accumulatedUpdates=e.slice(n,n*2).map(s=>({originalName:s.name,variable:s.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.rho,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Q7 extends su{static get className(){return"Adagrad"}constructor(e,n=.1){super(),this.learningRate=e,this.initialAccumulatorValue=n,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const i=se.registeredVariables[r];this.accumulatedGrads[s]==null&&(this.accumulatedGrads[s]={originalName:`${r}/accumulator`,variable:ue(()=>Jw(i.shape,this.initialAccumulatorValue).variable(!1))});const o=Array.isArray(e)?e[s].tensor:e[r];if(o==null)return;const a=this.accumulatedGrads[s].variable;ue(()=>{const l=_e(a,Nn(o));a.assign(l);const c=_e(re(Ye(o,us(_e(l,se.backend.epsilon()))),-this.learningRate),i);i.assign(c)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&_t(this.accumulatedGrads.map(e=>e.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulatedGrads=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,n){return new e(n.learningRate,n.initialAccumulatorValue)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class eU extends su{static get className(){return"Adam"}constructor(e,n,r,s=null){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=s,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],ue(()=>{this.accBeta1=Kt(n).variable(),this.accBeta2=Kt(r).variable()}),s==null&&(this.epsilon=se.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);ue(()=>{const r=et(1,this.accBeta1),s=et(1,this.accBeta2);n.forEach((i,o)=>{const a=se.registeredVariables[i],l=!1;this.accumulatedFirstMoment[o]==null&&(this.accumulatedFirstMoment[o]={originalName:`${i}/m`,variable:ue(()=>Mt(a).variable(l))}),this.accumulatedSecondMoment[o]==null&&(this.accumulatedSecondMoment[o]={originalName:`${i}/v`,variable:ue(()=>Mt(a).variable(l))});const c=Array.isArray(e)?e[o].tensor:e[i];if(c==null)return;const u=this.accumulatedFirstMoment[o].variable,h=this.accumulatedSecondMoment[o].variable,m=_e(re(u,this.beta1),re(c,1-this.beta1)),p=_e(re(h,this.beta2),re(Nn(c),1-this.beta2)),y=Ye(m,r),v=Ye(p,s);u.assign(m),h.assign(p);const x=_e(re(Ye(y,_e(us(v),this.epsilon)),-this.learningRate),a);a.assign(x)}),this.accBeta1.assign(re(this.accBeta1,this.beta1)),this.accBeta2.assign(re(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&_t(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedSecondMoment!=null&&_t(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e),ue(()=>{this.accBeta1.assign(md(this.beta1,this.iterations_+1)),this.accBeta2.assign(md(this.beta2,this.iterations_+1))});const n=e.length/2,r=!1;this.accumulatedFirstMoment=e.slice(0,n).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.accumulatedSecondMoment=e.slice(n,n*2).map(s=>({originalName:s.name,variable:s.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tU extends su{static get className(){return"Adamax"}constructor(e,n,r,s=null,i=0){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=s,this.decay=i,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],ue(()=>{this.iteration=Kt(0).variable(),this.accBeta1=Kt(n).variable()}),s==null&&(this.epsilon=se.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);ue(()=>{const r=et(1,this.accBeta1),s=Ye(-this.learningRate,_e(re(this.iteration,this.decay),1));n.forEach((i,o)=>{const a=se.registeredVariables[i],l=!1;this.accumulatedFirstMoment[o]==null&&(this.accumulatedFirstMoment[o]={originalName:`${i}/m`,variable:Mt(a).variable(l)}),this.accumulatedWeightedInfNorm[o]==null&&(this.accumulatedWeightedInfNorm[o]={originalName:`${i}/v`,variable:Mt(a).variable(l)});const c=Array.isArray(e)?e[o].tensor:e[i];if(c==null)return;const u=this.accumulatedFirstMoment[o].variable,h=this.accumulatedWeightedInfNorm[o].variable,m=_e(re(u,this.beta1),re(c,1-this.beta1)),p=re(h,this.beta2),y=ws(c),v=nu(p,y);u.assign(m),h.assign(v);const x=_e(re(Ye(s,r),Ye(m,_e(v,this.epsilon))),a);a.assign(x)}),this.iteration.assign(_e(this.iteration,1)),this.accBeta1.assign(re(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&_t(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedWeightedInfNorm!=null&&_t(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon,n.decay)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class VI extends su{static get className(){return"SGD"}constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const i=Array.isArray(e)?e[s].tensor:e[r];if(i==null)return;const o=se.registeredVariables[r];ue(()=>{const a=_e(re(this.c,i),o);o.assign(a)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,this.c!=null&&this.c.dispose(),this.c=Ta(Kt(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(e=await this.extractIterations(e),e.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,n){return new e(n.learningRate)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class nU extends VI{static get className(){return"Momentum"}constructor(e,n,r=!1){super(e),this.learningRate=e,this.momentum=n,this.useNesterov=r,this.accumulations=[],this.m=Kt(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const i=se.registeredVariables[r];this.accumulations[s]==null&&(this.accumulations[s]={originalName:`${r}/momentum`,variable:ue(()=>Mt(i).variable(!1))});const o=this.accumulations[s].variable,a=Array.isArray(e)?e[s].tensor:e[r];a!=null&&ue(()=>{let l;const c=_e(re(this.m,o),a);this.useNesterov?l=_e(re(this.c,_e(a,re(c,this.m))),i):l=_e(re(this.c,c),i),o.assign(c),i.assign(l)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&_t(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulations=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,n){return new e(n.learningRate,n.momentum,n.useNesterov)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rU extends su{static get className(){return"RMSProp"}constructor(e,n=.9,r=0,s=null,i=!1){if(super(),this.learningRate=e,this.decay=n,this.momentum=r,this.epsilon=s,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=i,s==null&&(this.epsilon=se.backend.epsilon()),e==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const i=se.registeredVariables[r],o=!1;this.accumulatedMeanSquares[s]==null&&(this.accumulatedMeanSquares[s]={originalName:`${r}/rms`,variable:ue(()=>Mt(i).variable(o))}),this.accumulatedMoments[s]==null&&(this.accumulatedMoments[s]={originalName:`${r}/momentum`,variable:ue(()=>Mt(i).variable(o))}),this.accumulatedMeanGrads[s]==null&&this.centered&&(this.accumulatedMeanGrads[s]={originalName:`${r}/mg`,variable:ue(()=>Mt(i).variable(o))});const a=Array.isArray(e)?e[s].tensor:e[r];if(a==null)return;const l=this.accumulatedMeanSquares[s].variable,c=this.accumulatedMoments[s].variable;ue(()=>{const u=_e(re(l,this.decay),re(Nn(a),1-this.decay));if(this.centered){const h=this.accumulatedMeanGrads[s].variable,m=_e(re(h,this.decay),re(a,1-this.decay)),p=Ye(re(a,this.learningRate),us(et(u,_e(Nn(m),this.epsilon)))),y=_e(re(c,this.momentum),p);l.assign(u),h.assign(m),c.assign(y);const v=et(i,y);i.assign(v)}else{const h=_e(re(l,this.decay),re(Nn(a),1-this.decay)),m=_e(re(c,this.momentum),Ye(re(a,this.learningRate),us(_e(h,this.epsilon))));l.assign(h),c.assign(m);const p=et(i,m);i.assign(p)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&_t(this.accumulatedMeanSquares.map(e=>e.variable)),this.accumulatedMeanGrads!=null&&this.centered&&_t(this.accumulatedMeanGrads.map(e=>e.variable)),this.accumulatedMoments!=null&&_t(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=this.centered?e.length/3:e.length/2,r=!1;this.accumulatedMeanSquares=e.slice(0,n).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.accumulatedMoments=e.slice(n,n*2).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.centered&&(this.accumulatedMeanGrads=e.slice(n*2,n*3).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,n){return new e(n.learningRate,n.decay,n.momentum,n.epsilon,n.centered)}}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jTe=[J7,Q7,eU,tU,nU,rU,VI];function UTe(){for(const t of jTe)we(t)}function jI(t,e){const n=t.shape.length,r=e.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if(e.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.shape[r-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${e.shape[r-1]} vs. ${n}`);if(pe(t.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${t.shape}.`);const s=e.shape,i=s[s.length-1];let o=1;for(let h=0;h<s.length-1;++h)o*=s[h];const a=t.shape,l=s.slice();l.pop();let c=1;for(let h=i;h<n;++h)c*=a[h],l.push(a[h]);const u=[...qe(t.shape).map(h=>h/c),1].slice(0,i);return[l,o,c,u]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const b_=-2,HTe=-1;function UI(t,e,n){const r=t.shape.length;F(r===e.length,()=>`Error in slice${r}D: Length of begin ${e} must match the rank of the array (${r}).`),F(r===n.length,()=>`Error in slice${r}D: Length of size ${n} must match the rank of the array (${r}).`);for(let s=0;s<r;++s)F(e[s]+n[s]<=t.shape[s],()=>`Error in slice${r}D: begin[${s}] + size[${s}] (${e[s]+n[s]}) would overflow input.shape[${s}] (${t.shape[s]})`)}function GTe(t){const e=[];let n=0;for(;t>0;)t&1&&e.push(n),t/=2,n++;return e}function HI(t,e,n){const r=[];for(let s=0;s<t.length;s++)r[s]=Math.ceil((e[s]-t[s])/n[s]);return r}function sU(t,e,n,r){const s=[...t];for(let i=s.length;i<r.length;i++)s.push(1);for(let i=0;i<n;i++)i===0?s[e]=1:(s.splice(e,0,1),s.pop());return s}function iU(t,e,n){return n<=t?n:n-(e-1)}function oU(t,e){const n=[];for(let r=0;r<t;r++)n.push(e+r);return n}function WTe(t,e,n,r,s,i,o,a,l){const c=t.length;let u=new Array(c),h=new Array(c),m=new Array(c);if(e.length&&n>0){const p=e[0],y=n+1;u=aU(o,p,y,r,t),h=lU(a,p,y,s,t),m=sU(i,p,y,t)}else for(let p=0;p<c;p++)u[p]=uU(o,r,i,t,p,l),h[p]=dU(a,s,i,t,p,l),m[p]=cU(i,p,l);return{begin:u,end:h,strides:m}}function aU(t,e,n,r,s){const i=[...s],o=oU(n,e);for(let a=0;a<i.length;a++)if(o.indexOf(a)>-1)i[a]=0;else{const l=iU(e,n,a);let c=r[l];t&1<<l&&(c=0),i[a]=c}return i}function lU(t,e,n,r,s){const i=[...s],o=oU(n,e);for(let a=0;a<i.length;a++)if(o.indexOf(a)>-1)i[a]=Number.MAX_SAFE_INTEGER;else{const l=iU(e,n,a);let c=r[l];t&1<<l&&(c=Number.MAX_SAFE_INTEGER),i[a]=c}for(let a=0;a<i.length;a++){const l=s[a];i[a]<0&&(i[a]+=l),i[a]=ad(0,i[a],s[a])}return i}function cU(t,e,n){let r=t[e];return(n&1<<e||r==null)&&(r=1),r}function uU(t,e,n,r,s,i){let o=e[s];const a=n[s]||1;(t&1<<s||i&1<<s||o==null)&&(a>0?o=Number.MIN_SAFE_INTEGER:o=Number.MAX_SAFE_INTEGER);const l=r[s];return o<0&&(o+=l),o=ad(0,o,l-1),o}function dU(t,e,n,r,s,i){let o=e[s];const a=n[s]||1;(t&1<<s||i&1<<s||o==null)&&(a>0?o=Number.MAX_SAFE_INTEGER:o=Number.MIN_SAFE_INTEGER);const l=r[s];return o<0&&(o+=l),a>0?o=ad(0,o,l):o=ad(-1,o,l-1),o}function GI(t,e,n){let r=n.length;for(let s=0;s<n.length;s++)if(n[s]>1){r=s;break}for(let s=r+1;s<n.length;s++)if(e[s]>0||n[s]!==t[s])return!1;return!0}function WI(t,e){let n=t.length>0?t[t.length-1]:1;for(let r=0;r<t.length-1;r++)n+=t[r]*e[r];return n}function n2(t,e,n){let r;const s=t.shape.length;typeof e=="number"?r=[e,...new Array(s-1).fill(0)]:e.length<s?r=e.concat(new Array(s-e.length).fill(0)):r=e.slice(),r.forEach(o=>{F(o!==-1,()=>"slice() does not support negative begin indexing.")});let i;return n==null?i=new Array(s).fill(-1):typeof n=="number"?i=[n,...new Array(s-1).fill(-1)]:n.length<s?i=n.concat(new Array(s-n.length).fill(-1)):i=n,i=i.map((o,a)=>o>=0?o:(F(o===-1,()=>`Negative size values should be exactly -1 but got ${o} for the slice() size at index ${a}.`),t.shape[a]-r[a])),[r,i]}function qI(t,e,n,r,s,i,o,a,l){let c;if(r==null?(c=new Array(e.length),c.fill(1)):c=r,o!=null&&o&o-1)throw new Error("Multiple ellipses in slice is not allowed.");let u=!1;const h={dims:c.length,numAddAxisAfterEllipsis:0,begin:e.slice(),end:n.slice(),strides:c.slice(),beginMask:s,endMask:i,ellipsisMask:o,newAxisMask:a,shrinkAxisMask:l};for(let E=0;E<h.dims;E++)u&&1<<E&a&&h.numAddAxisAfterEllipsis++,1<<E&o&&(u=!0);u||(h.ellipsisMask|=1<<h.dims,h.dims++);const m={dims:t.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};qTe(h,m);let p=!0,y=!0,v=!0;const x=[],b=[];for(let E=0;E<t.length;++E){if(m.strides[E]===0)throw Error(`strides[${E}] must be non-zero`);const N=!!(m.shrinkAxisMask&1<<E),C=t[E];if(C===-1){x.push(N?1:-1);continue}const S=[m.beginMask&1<<E,m.endMask&1<<E],T=[m.strides[E]>0?0:-1,m.strides[E]>0?C:C-1];if(N&&m.strides[E]<=0)throw Error("only stride 1 allowed on non-range indexing.");v=v&&m.strides[E]===1;const I=!!(m.beginMask&1<<E&&m.endMask&1<<E);if(m.beginValid&&m.endValid){if(N){const B=m.begin[E]<0?C+m.begin[E]:m.begin[E];if(m.begin[E]=B,m.end[E]=m.begin[E]+1,B<0||B>=C)throw Error(`slice index ${m.begin[E]} of dimension ${E} out of bounds.`)}else m.begin[E]=rM(m.begin[E],0,m.strides[E],C,S,T),m.end[E]=rM(m.end[E],1,m.strides[E],C,S,T);const D=m.strides[E]===1&&m.begin[E]===0&&m.end[E]===C;p=p&&D,y=y&&(E===0&&m.strides[E]===1||D)}else p=p&&m.strides[E]===1&&I,y=y&&(E===0&&m.strides[E]===1||I);let P,R=!1;if(m.beginValid&&m.endValid?(P=m.end[E]-m.begin[E],R=!0):N?(P=1,R=!0):I&&C>=0&&(m.strides[E]<0?P=-C:P=C,R=!0),R){let D;P===0||P<0!=m.strides[E]<0?D=0:D=Math.trunc(P/m.strides[E])+(P%m.strides[E]!==0?1:0),x.push(D)}else x.push(-1)}for(let E=0;E<m.finalShapeGatherIndices.length;++E){const N=m.finalShapeGatherIndices[E];N>=0?b.push(x[N]):N===b_&&b.push(1)}return{finalShapeSparse:b.filter((E,N)=>m.finalShapeGatherIndices[N]!==b_),finalShape:b,isIdentity:p,sliceDim0:y,isSimpleSlice:v,begin:m.begin,end:m.end,strides:m.strides}}function qTe(t,e){e.beginMask=0,e.endMask=0,e.shrinkAxisMask=0;let n=0;e.beginValid=t.begin!=null,e.endValid=t.end!=null,e.begin=new Array(e.dims),e.end=new Array(e.dims),e.strides=new Array(e.dims),e.finalShapeGatherIndices=[],e.finalShapeGatherIndicesSparse=[],e.inputShapeGatherIndicesSparse=new Array(e.dims);for(let r=0;r<t.dims;r++)if(1<<r&t.ellipsisMask){const s=Math.min(e.dims-(t.dims-r)+1+t.numAddAxisAfterEllipsis,e.dims);for(;n<s;n++)e.begin[n]=0,e.end[n]=0,e.strides[n]=1,e.beginMask|=1<<n,e.endMask|=1<<n,e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(-1),e.inputShapeGatherIndicesSparse[n]=r}else if(1<<r&t.newAxisMask)e.finalShapeGatherIndices.push(b_),e.finalShapeGatherIndicesSparse.push(-1);else{if(n===e.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${e.dims} dims, ${e.begin.length}.`);t.begin!=null&&(e.begin[n]=t.begin[r]),t.end!=null&&(e.end[n]=t.end[r]),e.strides[n]=t.strides[r],t.beginMask&1<<r&&(e.beginMask|=1<<n),t.endMask&1<<r&&(e.endMask|=1<<n),t.shrinkAxisMask&1<<r?(e.finalShapeGatherIndices.push(HTe),e.finalShapeGatherIndicesSparse.push(-1),e.shrinkAxisMask|=1<<n):(e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(r)),e.inputShapeGatherIndicesSparse[n]=r,n++}}function rM(t,e,n,r,s,i){if(s[e])return n>0?i[e]:i[e+1&1];{const o=t<0?r+t:t;return o<i[0]?i[0]:o>i[1]?i[1]:o}}const KTe=Object.freeze(Object.defineProperty({__proto__:null,assertParamsValid:UI,computeFlatOffset:WI,computeOutShape:HI,getNormalizedAxes:WTe,isSliceContinous:GI,maskToAxes:GTe,parseSliceParams:n2,sliceInfo:qI,startForAxis:uU,startIndicesWithElidedDims:aU,stopForAxis:dU,stopIndicesWithElidedDims:lU,stridesForAxis:cU,stridesWithElidedDims:sU},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ZTe{static sgd(e){return new VI(e)}static momentum(e,n,r=!1){return new nU(e,n,r)}static rmsprop(e,n=.9,r=0,s=null,i=!1){return new rU(e,n,r,s,i)}static adam(e=.001,n=.9,r=.999,s=null){return new eU(e,n,r,s)}static adadelta(e=.001,n=.95,r=null){return new J7(e,n,r)}static adamax(e=.002,n=.9,r=.999,s=null,i=0){return new tU(e,n,r,s,i)}static adagrad(e,n=.1){return new Q7(e,n)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lh=ZTe;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XTe=(()=>typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:t=>t())();function hU(){return new Promise(t=>XTe(()=>t()))}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KI(t,e){const n=t[0].length;t.forEach((s,i)=>{F(s.length===n,()=>`Error in concat${n}D: rank of tensors[${i}] must be the same as the rank of the rest (${n})`)}),F(e>=0&&e<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);const r=t[0];t.forEach((s,i)=>{for(let o=0;o<n;o++)F(o===e||s[o]===r[o],()=>`Error in concat${n}D: Shape of tensors[${i}] (${s}) does not match the shape of the rest (${r}) along the non-concatenated axis ${i}.`)})}function $a(t,e){const n=t[0].slice();for(let r=1;r<t.length;r++)n[e]+=t[r][e];return n}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Mo;(function(t){t[t.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",t[t.VALUE_ROWIDS=1]="VALUE_ROWIDS",t[t.ROW_LENGTHS=2]="ROW_LENGTHS",t[t.ROW_SPLITS=3]="ROW_SPLITS",t[t.ROW_LIMITS=4]="ROW_LIMITS",t[t.ROW_STARTS=5]="ROW_STARTS"})(Mo||(Mo={}));function fU(t,e,n){let r=new Array;if(n==null&&e==null)return r;if(e==null)for(;r.length<t+n.length;)r.push(-1);else r=e.slice();if(n==null)return r;if(t+n.length!==r.length)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.rank = ${t+n.length}, but shape.rank = ${r.length}`);for(let s=1;s<n.length;++s){const i=n[s],o=r[r.length-n.length+s],a=r[o];if(i>=0)if(a>=0){if(a!==i)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.shape[${s+t}] = ${i} but shape[${s+t}] = ${a}`)}else r[o]=i}return r}function mU(t){const e={FIRST_DIM_SIZE:Mo.FIRST_DIM_SIZE,VALUE_ROWIDS:Mo.VALUE_ROWIDS,ROW_LENGTHS:Mo.ROW_LENGTHS,ROW_SPLITS:Mo.ROW_SPLITS,ROW_LIMITS:Mo.ROW_LIMITS,ROW_STARTS:Mo.ROW_STARTS},n=[];for(const r of t)if(r in e)n.push(e[r]);else break;return n}function pU(t){return t.length===0?0:t[0]===Mo.FIRST_DIM_SIZE?t.length-1:t.length}function gU(t,e){if(t==null||e==null)return;const n=t.length,r=e.length;if(n>=r)throw new Error(`defaultValue.shape=${t} and ragged tensor flatValues.shape=${e}, are incompatible: defaultValue.rank = ${n} must be less than ragged tensor input flatValues.rank = ${r})`);for(let s=0;s<Math.min(n,r-1);++s){const i=t[s],o=e[s+1];if(i>=0&&o>=0&&i!==1&&i!==o)throw new Error(`defaultValue.shape=${t}, and ragged tensor input flatValues.shape=${e} are incompatible: defaultValue.shape[${s-t.length}] = ${i} but ragged tensor input.flatValues.shape[${s-t.length}] = ${o}`)}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZI=30;function r2(t){return t<=ZI?t:e_(t,Math.floor(Math.sqrt(t)))}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XI(t,e,n){const r=n*(typeof t=="number"?t:t[0]),s=e*(typeof t=="number"?t:t[1]);return[r,s]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hy(t,e,n,r=!0){let s=[];if(r)s=s.concat(e.slice(0)),s.push(t[0]/n),s=s.concat(t.slice(1));else{s=s.concat(t[0]);const i=e.length;for(let o=0;o<i;++o)s=s.concat([t[o+1]/e[o],e[o]]);s=s.concat(t.slice(i+1))}return s}function fy(t,e,n=!0){const r=[];if(n){r.push(e);for(let s=e+1;s<t;++s)s<=2*e?(r.push(s),r.push(s-(e+1))):r.push(s)}else{const s=[],i=[];for(let o=1;o<t;++o)o>=e*2+1||o%2===1?i.push(o):s.push(o);r.push(...s),r.push(0),r.push(...i)}return r}function my(t,e,n,r=!0){const s=[];r?s.push(t[0]/n):s.push(t[0]*n);for(let i=1;i<t.length;++i)i<=e.length?r?s.push(e[i-1]*t[i]):s.push(t[i]/e[i-1]):s.push(t[i]);return s}function YI(t,e){const n=[0];for(let r=0;r<e;++r)n.push(t[r][0]);return n}function JI(t,e,n){const r=t.slice(0,1);for(let s=0;s<n;++s)r.push(t[s+1]-e[s][0]-e[s][1]);return r}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const s2=1.7580993408473768,i2=1.0507009873554805;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QI=.3275911,e3=.254829592,t3=-.284496736,n3=1.421413741,r3=-1.453152027,s3=1.061405429;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pl(t,e){if(t.length!==e.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${t.length}, imag: ${e.length}.`);const n=new Float32Array(t.length*2);for(let r=0;r<n.length;r+=2)n[r]=t[r/2],n[r+1]=e[r/2];return n}function yU(t){const e=new Float32Array(t.length/2),n=new Float32Array(t.length/2);for(let r=0;r<t.length;r+=2)e[r/2]=t[r],n[r/2]=t[r+1];return{real:e,imag:n}}function bU(t){const e=Math.ceil(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let s=0;s<t.length;s+=4)n[Math.floor(s/4)]=t[s],r[Math.floor(s/4)]=t[s+1];return{real:n,imag:r}}function vU(t){const e=Math.floor(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let s=2;s<t.length;s+=4)n[Math.floor(s/4)]=t[s],r[Math.floor(s/4)]=t[s+1];return{real:n,imag:r}}function i3(t,e){const n=t[e*2],r=t[e*2+1];return{real:n,imag:r}}function xU(t,e,n,r){t[r*2]=e,t[r*2+1]=n}function wU(t,e){const n=new Float32Array(t/2),r=new Float32Array(t/2);for(let s=0;s<Math.ceil(t/2);s++){const i=(e?2:-2)*Math.PI*(s/t);n[s]=Math.cos(i),r[s]=Math.sin(i)}return{real:n,imag:r}}function EU(t,e,n){const r=(n?2:-2)*Math.PI*(t/e),s=Math.cos(r),i=Math.sin(r);return{real:s,imag:i}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $k="->",YTe=/->/g,sM=",",iM="...";function o3(t,e){t=t.replace(/\s/g,"");const n=(t.length-t.replace(YTe,"").length)/$k.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error(`Equation must contain exactly one arrow ("${$k}").`);const[r,s]=t.split($k);F(r.indexOf(iM)===-1,()=>`The ellipsis notation ("${iM}") is not supported yet.`);const i=r.split(sM),o=i.length;if(e!==o)throw new Error(`Expected ${o} input tensors, received ${e}`);if(o>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const a=[];for(let m=0;m<s.length;++m){const p=s[m];if(!i.some(y=>y.indexOf(p)!==-1))throw new Error(`Output subscripts contain the label ${p} not present in the input subscripts.`);a.indexOf(p)===-1&&a.push(p)}for(let m=0;m<r.length;++m){const p=r[m];a.indexOf(p)===-1&&p!==sM&&a.push(p)}const l=new Array(i.length);for(let m=0;m<o;++m){if(new Set(i[m].split("")).size!==i[m].length)throw new Error(`Found duplicate axes in input component ${i[m]}. Support for duplicate axes in input is not implemented yet.`);l[m]=[];for(let p=0;p<i[m].length;++p)l[m].push(a.indexOf(i[m][p]))}const c=a.length,u=s.length,h=[];for(let m=u;m<c;++m)h.push(m);return{allDims:a,summedDims:h,idDims:l}}function a3(t,e){let n=new Array(t);n.fill(-1);for(let s=0;s<e.length;++s)n[e[s]]=s;const r=[];for(let s=0;s<t;++s)n[s]===-1&&r.push(s);return n=n.filter(s=>s!==-1),{permutationIndices:n,expandDims:r}}function l3(t,e,n){const r=new Array(t);for(let s=0;s<n.length;++s){const i=n[s].shape;for(let o=0;o<e[s].length;++o)r[e[s][o]]===void 0?r[e[s][o]]=i[o]:F(r[e[s][o]]===i[o],()=>`Expected dimension ${r[e[s][o]]} at axis ${o} of input shaped ${JSON.stringify(i)}, but got dimension ${i[o]}`)}}function c3(t,e){const n=t,r=[];let s=0;t.length===0&&n.push(-1),s=t.length+1;for(let o=0;o<s;++o)r.push([]);const i=[];for(let o=0;o<n.length;++o){const a=n[o],l=JTe(e,a);for(const c of l)i.indexOf(c)===-1&&(r[o].push(c),i.push(c))}return{path:n,steps:r}}function u3(t){return t.every((e,n)=>e===n)}function JTe(t,e){const n=[];for(let r=0;r<t.length;++r)(t[r].length===0||t[r].indexOf(e)!==-1||e===-1)&&n.push(r);return n}function d3(t,e,n=0){let r=[];if(typeof e=="number")F(t.shape[n]%e===0,()=>"Number of splits must evenly divide the axis."),r=new Array(e).fill(t.shape[n]/e);else{const s=e.reduce((o,a)=>(a===-1&&(o+=1),o),0);F(s<=1,()=>"There should be only one negative value in split array.");const i=e.indexOf(-1);if(i!==-1){const o=e.reduce((a,l)=>l>0?a+l:a);e[i]=t.shape[n]-o}F(t.shape[n]===e.reduce((o,a)=>o+a),()=>"The sum of sizes must match the size of the axis dimension."),r=e}return r}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kU(t){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${t}`}function NU(t,e){return`indices(${t}, 0) is invalid: ${e} < 0`}function CU(t,e,n){return`indices(${t}, 0) is invalid: ${e} >= ${n}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _U(t,e){return`only one output dimension may be -1, not both ${t} and ${e}`}function SU(t,e){return`size ${t} must be non-negative, not ${e}`}function TU(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function $U(t,e){const n=pe(t),r=pe(e);return`Input to reshape is a SparseTensor with ${n}
  dense values, but the requested shape requires a multiple of ${r}. inputShape=${t} outputShape= ${e}`}function IU(t,e){const n=pe(t),r=pe(e);return`Input to reshape is a tensor with ${n} dense values, but the requested shape has ${r}. inputShape=${t} outputShape=${e}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v_(){return"segment ids must be >= 0"}function AU(){return"segment ids are not increasing"}function RU(t,e){return`Segment id ${t} out of range [0, ${e}), possibly because segmentIds input is not sorted.`}function PU(t,e,n){return`Bad: indices[${t}] == ${e} out of range [0, ${n})`}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DU(t,e){let n=!1,r;for(t<=ZI?(r=t,n=!0):r=e_(t,Math.floor(Math.sqrt(t)));!n;)r>e||r===t?n=!0:r=e_(t,r+1);return r}function OU(t,e,n){const r=[],s=t.length;for(let i=0;i<s;i++)i!==e?r.push(t[i]):r.push(n);return r}function h3(t,e,n,r){const s=e.shape.length,i=t.shape.length;if(r!==0&&(r<-s||r>s))throw new Error(`Expect batchDims in the range of [-${s}, ${s}], but got ${r}`);if(r<0&&(r+=s),r>i)throw new Error(`batchDims (${r}) must be less than rank(x) (
    ${i}).`);if(n<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${n}).`);for(let h=0;h<r;++h)if(t.shape[h]!==e.shape[h])throw new Error(`x.shape[${h}]: ${t.shape[h]} should be equal to indices.shape[${h}]: ${e.shape[h]}.`);const o=t.shape[n],a=[];let l=1,c=1,u=1;for(let h=0;h<r;++h)a.push(t.shape[h]),l*=t.shape[h];for(let h=r;h<n;h++)a.push(t.shape[h]),c*=t.shape[h];for(let h=r;h<s;h++)a.push(e.shape[h]);for(let h=n+1;h<i;h++)a.push(t.shape[h]),u*=t.shape[h];return{batchSize:l,sliceSize:u,outerSize:c,dimSize:o,outputShape:a}}const QTe=Object.freeze(Object.defineProperty({__proto__:null,collectGatherOpShapeInfo:h3,computeOutShape:OU,segOpComputeOptimalWindowSize:DU},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dl(t){try{return t.map(e=>jc(e))}catch(e){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${e}`)}}function LU(t){return t.map(e=>Rc(e))}const e$e=Object.freeze(Object.defineProperty({__proto__:null,ERF_A1:e3,ERF_A2:t3,ERF_A3:n3,ERF_A4:r3,ERF_A5:s3,ERF_P:QI,PARALLELIZE_THRESHOLD:ZI,get RowPartitionType(){return Mo},SELU_SCALE:i2,SELU_SCALEALPHA:s2,applyActivation:OI,assertAndGetBroadcastShape:ut,assertAxesAreInnerMostDims:Yr,assertParamsConsistent:KI,assignToTypedArray:xU,axesAreInnerMostDims:hI,calculateShapes:Ld,checkEinsumDimSizes:l3,checkPadOnDimRoundingMode:Ks,combineLocations:S7,combineRaggedTensorToTensorShapes:fU,complexWithEvenIndex:bU,complexWithOddIndex:vU,computeConv2DInfo:Xr,computeConv3DInfo:eu,computeDefaultPad:oI,computeDilation2DInfo:ay,computeOptimalWindowSize:r2,computeOutAndReduceShapes:Mr,computeOutShape:$a,computePool2DInfo:xo,computePool3DInfo:Vl,convertConv2DDataFormat:jl,decodeEinsumEquation:o3,eitherStridesOrDilationsAreOne:hs,expandShapeToKeepDim:ur,exponent:EU,exponents:wU,fromStringArrayToUint8:LU,fromUint8ToStringArray:Dl,getAxesPermutation:jn,getBroadcastDims:_f,getComplexWithIndex:i3,getEinsumComputePath:c3,getEinsumPermutation:a3,getFusedBiasGradient:DI,getFusedDyActivation:PI,getImageCenter:XI,getInnerMostAxes:tr,getPermuted:fy,getRaggedRank:pU,getReductionAxes:Cr,getReshaped:hy,getReshapedPermuted:my,getRowPartitionTypesHelper:mU,getSliceBeginCoords:YI,getSliceSize:JI,getSparseFillEmptyRowsIndicesDenseShapeMismatch:kU,getSparseFillEmptyRowsNegativeIndexErrorMessage:NU,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:CU,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:TU,getSparseReshapeInputOutputMismatchErrorMessage:IU,getSparseReshapeInputOutputMultipleErrorMessage:$U,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:_U,getSparseReshapeNegativeOutputDimErrorMessage:SU,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:PU,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:v_,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:AU,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:RU,getUndoAxesPermutation:tu,isIdentityPermutation:u3,log:MEe,mergeRealAndImagArrays:Pl,prepareAndValidate:jI,prepareSplitSize:d3,segment_util:QTe,shouldFuse:LI,slice_util:KTe,splitRealAndImagArrays:yU,stridesOrDilationsArePositive:hd,tupleValuesAreOne:dd,upcastType:ci,validateDefaultValueShape:gU,validateInput:ASe,validateUpdateShape:W7,warn:Ni},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */UTe();/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MU={kernelName:qx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>re(t,dy(Me(n,"float32"),-1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const t$e={kernelName:h0,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=Nn(Me(n,"float32")),s=us(et(Kt(1),r));return Qn(Ye(t,s))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const n$e={kernelName:f0,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=us(et(Nn(Me(n,"float32")),1));return Ye(t,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const r$e={kernelName:tm,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=ut(n.shape,r.shape);return{a:()=>{let a=t;const l=Cr(n.shape,s);return l.length>0&&(a=Xe(a,l)),ie(a,n.shape)},b:()=>{let a=t;const l=Cr(r.shape,s);return l.length>0&&(a=Xe(a,l)),ie(a,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const s$e={kernelName:g$,saveAllInputs:!0,gradFunc:(t,e)=>{const n={};return e.forEach((r,s)=>{n[s]=()=>t.clone()}),n}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const i$e={kernelName:Kx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Mt(n)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const o$e={kernelName:Zx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Mt(n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const a$e={kernelName:m0,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ye(t,us(et(Kt(1),Nn(Me(n,"float32")))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l$e={kernelName:p0,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=us(_e(Kt(1),Nn(Me(n,"float32"))));return Ye(t,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const c$e={kernelName:b0,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=ut(n.shape,r.shape);return{a:()=>{const a=_e(Nn(n),Nn(r));let l=re(t,Ye(r,a));const c=Cr(n.shape,s);return c.length>0&&(l=Xe(l,c)),ie(l,n.shape)},b:()=>{const a=_e(Nn(n),Nn(r));let l=Qn(re(t,Ye(n,a)));const c=Cr(r.shape,s);return c.length>0&&(l=Xe(l,c)),ie(l,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const u$e={kernelName:g0,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ye(t,_e(Nn(Me(n,"float32")),1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d$e={kernelName:y0,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ye(t,et(Kt(1),Nn(Me(n,"float32"))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h$e(t,e,n,r,s,i){const o=K(t,"dy","avgPool3dGrad"),a=K(e,"input","avgPool3dGrad");let l=o,c=a,u=!1;a.rank===4&&(u=!0,l=ie(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]]),c=ie(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),F(l.rank===5,()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${l.rank}.`),F(c.rank===5,()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${c.rank}.`),Ks("avgPool3dGrad",s,i);const h={dy:l,input:c},m={filterSize:n,strides:r,pad:s,dimRoundingMode:i},p=se.runKernel(x$,h,m);return u?ie(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}const f$e=oe({avgPool3dGrad_:h$e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m$e={kernelName:Yx,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{filterSize:s,strides:i,pad:o,dimRoundingMode:a}=n;return{x:()=>f$e(t,r,s,i,o,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p$e(t,e,n,r,s){const i=K(t,"dy","avgPoolGrad"),o=K(e,"input","avgPoolGrad");F(o.rank===i.rank,()=>`Rank of input (${o.rank}) does not match rank of dy (${i.rank})`);let a=o,l=i,c=!1;o.rank===3&&(c=!0,a=ie(o,[1,o.shape[0],o.shape[1],o.shape[2]]),l=ie(i,[1,i.shape[0],i.shape[1],i.shape[2]])),F(l.rank===4,()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${l.rank}.`),F(a.rank===4,()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${a.rank}.`);const u={dy:l,input:a},h={filterSize:n,strides:r,pad:s},m=se.runKernel(v$,u,h);return c?ie(m,[m.shape[1],m.shape[2],m.shape[3]]):m}const g$e=oe({avgPoolGrad_:p$e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const y$e={kernelName:Xx,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{filterSize:s,strides:i,pad:o}=n;return{x:()=>g$e(t,r,s,i,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const b$e={kernelName:Jx,inputsToSave:["a","b"],gradFunc:(t,e,n)=>{const[r,s]=e,{transposeA:i,transposeB:o}=n;return!i&&!o?{a:()=>qt(t,s,!1,!0),b:()=>qt(r,t,!0,!1)}:!i&&o?{a:()=>qt(t,s,!1,!1),b:()=>qt(t,r,!0,!1)}:i&&!o?{a:()=>qt(s,t,!1,!0),b:()=>qt(r,t,!1,!1)}:{a:()=>qt(s,t,!0,!0),b:()=>qt(t,r,!0,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const v$e={kernelName:Qx,gradFunc:(t,e,n)=>{const{blockShape:r,crops:s}=n;return{x:()=>xI(t,r,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const x$e={kernelName:PEe,gradFunc:(t,e,n)=>{const r=n,s=r.inputShape,i=r.shape,o=Array.from(i);for(let l=s.length-1;l>=0;l--)if(s[l]===i[l])o[l]=1;else if(s[l]!==1)throw new Error(`broadcastTo(): [${s}] cannot be broadcast to [${i}].`);const a=[];for(let l=0;l<o.length;l++)o[l]>1&&a.push(l);return{x:()=>Xe(t,a,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const w$e={kernelName:v0,gradFunc:t=>({x:()=>t.clone()})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const E$e={kernelName:x0,gradFunc:t=>({x:()=>Mt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const k$e={kernelName:w0,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{clipValueMin:s,clipValueMax:i}=n;return{x:()=>$s(Al(Pd(r,s),sm(r,i)),t,Mt(t))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const N$e={kernelName:ew,inputsToSave:["x"],gradFunc:MU.gradFunc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const C$e={kernelName:tw,saveAllInputs:!0,gradFunc:(t,e,n)=>{const r=e.map(l=>l.shape),{axis:s}=n,i=xt(s,e[0].shape)[0],o=r.map(l=>l[i]);return Ri(t,o,i).map(l=>()=>l)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _$e={kernelName:nw,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[r,s]=e,{dilations:i,strides:o,pad:a,dataFormat:l}=n;return F(dd(i),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${i}'`),{x:()=>cI(r.shape,t,s,o,a,l),filter:()=>RI(r,t,s.shape,o,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const S$e={kernelName:rw,inputsToSave:["dy","filter"],gradFunc:(t,e,n)=>{const[r,s]=e,{strides:i,pad:o,dataFormat:a,dimRoundingMode:l}=n;return{dy:()=>fd(t,s,i,o,a,1,l),filter:()=>RI(t,r,s.shape,i,o,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T$e(t,e,n,r,s){let i=t;t.rank===4&&(i=ie(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]));let o=e;o.rank===4&&(o=ie(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]])),F(i.rank===5,()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${i.shape}.`),F(o.rank===5,()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${o.shape}.`),F(n.length===5,()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${n}.`),F(i.shape[4]===n[3],()=>`Error in conv3dDerFilter: depth of input ${i.shape[4]}) must match input depth in filter (${n[3]}.`),F(o.shape[4]===n[4],()=>`Error in conv3dDerFilter: depth of dy (${o.shape[4]}) must match output depth for filter (${n[4]}).`);const a={x:i,dy:o},l={strides:r,pad:s,filterShape:n};return se.runKernel(C$,a,l)}const $$e=oe({conv3DBackpropFilter_:T$e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const I$e={kernelName:sw,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:r,strides:s,pad:i}=n;F(dd(r),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`);const[o,a]=e;return{x:()=>k7(o.shape,t,a,s,i),filter:()=>$$e(o,t,a.shape,s,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A$e={kernelName:E0,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>re(Qn(j7(Me(n,"float32"))),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const R$e={kernelName:k0,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>re(U7(Me(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const P$e={kernelName:iw,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:s,exclusive:i,reverse:o}=n;return{x:()=>{const a=jn([s],r.rank);let l=C7(t,s,i,!o);return a!=null&&(l=Lt(l,a)),l}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const D$e={kernelName:ow,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:r,strides:s,pad:i,dimRoundingMode:o}=n,a=r??[1,1];F(dd(a),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${a}'`);const[l,c]=e;return F(l.rank===4,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${l.rank}.`),F(c.rank===4,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${c.rank}.`),F(l.shape[3]===c.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${l.shape[3]}) must match the inChannels dimension in filter ${c.shape[2]}.`),F(hs(s,a),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${s} and dilations '${a}'.`),Ks("depthwiseConv2d",i,o),{x:()=>XSe(l.shape,t,c,s,i,a,o),filter:()=>KSe(l,t,c.shape,s,i,a,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const O$e={kernelName:aw,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[r,s]=e,i={x:r,filter:s,dy:t},o={x:r,filter:s,dy:t};return{x:()=>se.runKernel(t_,i,n),filter:()=>se.runKernel(n_,o,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const L$e={kernelName:C0,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e,r={dy:t,y:n};return{x:()=>se.runKernel(D$,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const M$e={kernelName:_0,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,r=re(La(Qn(Nn(n))),2/Math.sqrt(Math.PI));return{x:()=>re(t,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const z$e={kernelName:S0,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>re(t,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const F$e={kernelName:cw,inputsToSave:["input"],gradFunc:(t,e)=>{const[n]=e;return{input:()=>ie(t,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const B$e={kernelName:T0,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>re(t,La(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const V$e={kernelName:$0,gradFunc:t=>({x:()=>Mt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j$e={kernelName:I0,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=ut(n.shape,r.shape);return{a:()=>{const a=Ye(t,Me(r,"float32")),l=Cr(n.shape,s);return l.length>0?ie(Xe(a,l),n.shape):a},b:()=>{let a=re(t,Me(n,"float32"));const l=Cr(r.shape,s);l.length>0&&(a=ie(Xe(a,l),r.shape));const c=Nn(r);return Qn(Ye(a,Me(c,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const U$e={kernelName:uw,inputsToSave:["x","mean","variance","scale"],gradFunc:(t,e,n)=>{const{varianceEpsilon:r}=n,[s,i,o,a]=e,l=a??Kt(1),c=Cr(i.shape,s.shape),u=[];if(i.rank===1){for(let N=0;N<s.shape.length-1;++N)u.push(s.shape[N]);u.push(1)}const h=et(s,i),m=re(t,l),p=F7(_e(o,Kt(r))),y=re(re(re(p,p),p),Kt(-.5));return{x:()=>i.rank===1?ie(re(re(t,zo(ie(p,[1,1,1,i.shape[0]]),u)),l),s.shape):ie(re(re(t,p),l),s.shape),mean:()=>{let N=re(re(p,Kt(-1)),m);return i.rank===1&&(N=Xe(N,c)),ie(N,i.shape)},variance:()=>{let N=re(re(y,h),m);return i.rank===1&&(N=Xe(N,c)),ie(N,i.shape)},scale:()=>{const N=re(h,p);let C=re(t,N);return i.rank===1&&(C=Xe(C,c)),ie(C,i.shape)},offset:()=>{let N=t;return i.rank===1&&(N=Xe(N,c)),ie(N,i.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H$e={kernelName:dw,inputsToSave:["x","indices"],gradFunc:(t,e,n)=>{const[r,s]=e,{axis:i,batchDims:o}=n,a=xt(i,r.shape)[0],l=(c,u,h)=>()=>{const m=c.shape,p=u.size,y=m.slice(0,a),v=y.length,x=m.slice(i,m.length).slice(1),b=x.length,w=oM(0,v),E=oM(v+1,v+1+b),N=aM([y,[p],x]),C=ie(h,N),S=ie(u,[p]),T=aM([[v],w,E]),I=Lt(C,T);let P=K7(I,S,c.shape[a]);const R=tu(T);return P=Lt(P,R),P};if(o===1){const c=r.shape[0],u=r.split(c,0);return{x:()=>Rl(u.map((p,y)=>l(p,s.slice(y,1),t.slice(y,1))())).reshape(r.shape),indices:()=>s}}else return{x:l(r,s,t),indices:()=>s}}};function oM(t,e){const n=[];for(let r=t;r<e;++r)n.push(r);return n}function aM(t){const e=[];for(let n=0;n<t.length;++n)for(let r=0;r<t[n].length;++r)e.push(t[n][r]);return e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const G$e={kernelName:A0,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>Mt(n),b:()=>Mt(r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const W$e={kernelName:R0,gradFunc:t=>({x:()=>Me(t,"float32")})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const q$e={kernelName:P0,gradFunc:t=>({x:()=>Mt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const K$e={kernelName:D0,gradFunc:t=>({x:()=>Mt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z$e={kernelName:O0,gradFunc:t=>({x:()=>Mt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X$e={kernelName:fw,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{alpha:s}=n,i=Li(r,0);return{x:()=>$s(i,t,re(t,s))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Y$e={kernelName:M0,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ye(t,_e(n,1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const J$e={kernelName:L0,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ye(t,Me(n,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Q$e={kernelName:OEe,inputsToSave:[],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r]=e,{axis:s}=n;return{logits:()=>{const o=La(r);return et(t,re(Xe(t,s,!0),o))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eIe(t,e,n,r=5,s=1,i=1,o=.5){const a={x:t,y:e,dy:n},l={depthRadius:r,bias:s,alpha:i,beta:o};return se.runKernel(B$,a,l)}const tIe=oe({localResponseNormalizationBackprop_:eIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nIe={kernelName:vw,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,s]=e,{depthRadius:i,bias:o,alpha:a,beta:l}=n;return{x:()=>tIe(r,s,t,i,o,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zU(t,e,n,r){return e.rank<n.rank&&(e=ie(e,ur(e.shape,r))),t.rank<n.rank&&(t=ie(t,ur(t.shape,r))),{x:()=>re(t,Me(Oa(n,e),t.dtype))}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lM={kernelName:xw,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const r=n,{reductionIndices:s}=r,i=e[0],o=e[1],a=xt(s,i.shape),l=zU(t,o,i,a);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rIe={kernelName:z0,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>re(t,Me(Pd(n,r),"float32")),b:()=>re(t,Me(M1(n,r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sIe(t,e,n,r,s,i,o){const a=K(t,"dy","maxPool3dGrad"),l=K(e,"input","maxPool3dGrad"),c=K(n,"output","maxPool3dGrad");let u=a,h=l,m=c,p=!1;l.rank===4&&(p=!0,u=ie(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]]),h=ie(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),m=ie(c,[1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]])),F(u.rank===5,()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${u.rank}.`),F(h.rank===5,()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${h.rank}.`),F(m.rank===5,()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${m.rank}.`),Ks("maxPool3dGrad",i,o);const y={dy:u,input:h,output:m},v={filterSize:r,strides:s,pad:i,dimRoundingMode:o},x=se.runKernel(j$,y,v);return p?ie(x,[x.shape[1],x.shape[2],x.shape[3],x.shape[4]]):x}const iIe=oe({maxPool3dGrad_:sIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oIe={kernelName:Ew,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,s]=e,{filterSize:i,strides:o,pad:a,dimRoundingMode:l}=n;return{x:()=>iIe(t,r,s,i,o,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aIe(t,e,n,r,s,i,o){const a=K(t,"dy","maxPoolGrad"),l=K(e,"input","maxPoolGrad"),c=K(n,"output","maxPoolGrad");F(l.rank===a.rank,()=>`Rank of input (${l.rank}) does not match rank of dy (${a.rank})`),F(a.rank===4,()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${a.rank}.`),F(l.rank===4,()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${l.rank}.`),Ks("maxPoolGrad",i,o);const u={dy:a,input:l,output:c},h={filterSize:r,strides:s,pad:i,dimRoundingMode:o};return se.runKernel(V$,u,h)}const lIe=oe({maxPoolGrad_:aIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cIe={kernelName:ww,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,s]=e,{filterSize:i,strides:o,pad:a}=n;return{x:()=>lIe(t,r,s,i,o,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uIe={kernelName:kw,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:s}=n,i=xt(s,r.shape),a=Mr(r.shape,i)[1],l=pe(a);return{x:()=>{const u=r.shape.slice();i.forEach(p=>{u[p]=1});const h=ie(t,u);return Ye(re(h,ru(r.shape,"float32")),l)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dIe={kernelName:Nw,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const r=n,{axis:s}=r,[i,o]=e,a=xt(s,i.shape),l=zU(t,o,i,a);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hIe={kernelName:F0,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>re(t,Me(sm(n,r),"float32")),b:()=>re(t,Me(Li(n,r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fIe={kernelName:Cw,inputsToSave:["x"],gradFunc:(t,e,n)=>{const r=e[0],{paddings:s}=n,i=s.map(o=>o[0]);return{x:()=>bn(t,i,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mIe={kernelName:B0,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=ut(n.shape,r.shape);return{a:()=>{const a=Cr(n.shape,s);return a.length>0?ie(Xe(t,a),n.shape):t},b:()=>{const a=re(t,Qn(t2(Ye(n,r)))),l=Cr(r.shape,s);return l.length>0?ie(Xe(a,l),r.shape):a}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pIe={kernelName:V0,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=ut(n.shape,r.shape);return{a:()=>{const a=re(t,Me(r,"float32")),l=Cr(n.shape,s);return l.length>0?ie(Xe(a,l),n.shape):a},b:()=>{const a=re(t,Me(n,"float32")),l=Cr(r.shape,s);return l.length>0?ie(Xe(a,l),r.shape):a}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gIe={kernelName:_w,gradFunc:t=>({x:()=>Qn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yIe={kernelName:$w,inputsToSave:["indices"],gradFunc:(t,e)=>{const n=e[0];return{indices:()=>Pr(n.shape,"float32")}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bIe={kernelName:Tw,gradFunc:t=>({x:()=>Mt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vIe={kernelName:Iw,saveAllInputs:!0,gradFunc:(t,e,n)=>{const{axis:r}=n;return gd(t,r).map(i=>()=>i)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cM={kernelName:Aw,inputsToSave:["x"],gradFunc:(t,e,n)=>{const r=e[0],{paddings:s}=n,i=s.map(o=>o[0]);return{x:()=>bn(t,i,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xIe={kernelName:j0,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(t,e)=>{const[n,r,s]=e,i=n,o=r,a=ut(i.shape,o.shape);return{a:()=>{const u=Me(o,"float32");let h=re(t,re(u,md(i,et(u,Kt(1)))));const m=Cr(i.shape,a);return m.length>0&&(h=Xe(h,m)),ie(h,i.shape)},b:()=>{const u=Li(i,0),h=$s(u,Ma(i),Mt(i));let m=re(t,re(s,h));const p=Cr(o.shape,a);return p.length>0&&(m=Xe(m,p)),ie(m,o.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wIe={kernelName:Rw,inputsToSave:["x","alpha"],gradFunc:(t,e)=>{const[n,r]=e,s=Li(n,0);return{x:()=>$s(s,t,re(t,r)),alpha:()=>{let i=$s(s,Mt(t),re(t,n));const o=Cr(r.shape,t.shape);return o.length>0&&(i=Xe(i,o)),ie(i,r.shape)}}}};/**
 * @license
 * Copyright 2022 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EIe(t,e,n){const r=t.shape.slice();r[n]=1;const s=ie(e,r),i=g_(t,n,!0,!1),o=g_(t,n,!0,!0),a=re(i,o);return re(s,a)}function kIe(t,e,n){const r=t.shape.length,s=r-n.length,i=jn(n,r);let o=t;i!=null&&(o=Lt(t,i));const a=o.shape.slice(),c=a.splice(r-n.length,n.length).reduce((m,p)=>m*p,1);a.push(c);const u=o.reshape(a);let h=EIe(u,e,s);if(h=h.reshape(o.shape),i!=null){const m=tu(i);h=Lt(h,m)}return h}const NIe={kernelName:Pw,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:s}=n;let i=[];return s==null?i=r.shape.map((o,a)=>a):typeof s=="number"?i=[s]:i=s,{x:()=>kIe(r,t,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CIe={kernelName:N0,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=ut(n.shape,r.shape);return{a:()=>{const a=Ye(t,Me(r,"float32")),l=Cr(n.shape,s);return l.length>0?ie(Xe(a,l),n.shape):a},b:()=>{let a=re(t,Me(n,"float32"));const l=Cr(r.shape,s);l.length>0&&(a=ie(Xe(a,l),r.shape));const c=Nn(r);return Qn(Ye(a,Me(c,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Ie={kernelName:U0,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ye(t,Qn(Nn(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SIe={kernelName:G0,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,r=re(sm(n,6),dy(n));return{x:()=>re(t,Me(r,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TIe={kernelName:H0,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>re(t,Me(dy(n),"float32"))}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Ie={kernelName:Dw,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ie(t,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IIe={kernelName:Lw,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[r]=e,s={dy:t,images:r};return{images:()=>se.runKernel(Z$,s,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AIe={kernelName:Ow,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[r]=e,s={dy:t,images:r};return{images:()=>se.runKernel(K$,s,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RIe={kernelName:Mw,gradFunc:(t,e,n)=>{const{dims:r}=n,s=xt(r,t.shape);return{x:()=>pd(t,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PIe={kernelName:W0,gradFunc:t=>({x:()=>Mt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DIe={kernelName:q0,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Qn(Ye(t,re(md(n,1.5),2)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OIe={kernelName:zw,inputsToSave:["condition"],gradFunc:(t,e)=>{const[n]=e;return{condition:()=>Me(Mt(n),"float32"),t:()=>re(t,Me(n,t.dtype)),e:()=>re(t,Me(gI(n),t.dtype))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LIe={kernelName:K0,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=Li(n,Kt(0)),s=Kt(s2),i=Kt(i2),o=re(t,i),a=re(re(t,s),La(Me(n,"float32")));return $s(r,o,a)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MIe={kernelName:J0,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>re(t,re(n,et(Kt(1),n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zIe={kernelName:Y0,gradFunc:t=>({x:()=>Mt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FIe={kernelName:Z0,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>re(uI(Me(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BIe={kernelName:X0,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>re(N7(Me(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VIe={kernelName:Fw,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{begin:s,size:i}=n,o=r.shape,[a,l]=n2(r,s,i),c=[];for(let u=0;u<t.rank;u++)c.push([a[u],o[u]-a[u]-l[u]]);return{x:()=>vI(t,c)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jIe={kernelName:Uw,outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r]=e,{dim:s}=n,i=!0,o=re(t,r);return{logits:()=>et(o,re(Xe(o,[s],i),r))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UIe={kernelName:Q0,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>re(t,rm(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uM={kernelName:Vw,gradFunc:(t,e,n)=>{const{blockShape:r,paddings:s}=n;return{x:()=>lI(t,r,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dM={kernelName:jw,gradFunc:(t,e,n)=>{const{axis:r}=n;return{x:()=>Us(t,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HIe={kernelName:ey,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ye(t,re(us(Me(n,"float32")),2))}}};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GIe={kernelName:X$,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>re(t,re(Me(n,"float32"),2))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WIe={kernelName:ty,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=Kt(2);return{a:()=>re(t,re(s,et(n,r))),b:()=>re(t,re(s,et(r,n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qIe={kernelName:oy,gradFunc:t=>({x:()=>Mt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KIe={kernelName:ny,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=ut(n.shape,r.shape);return{a:()=>{let a=t;const l=Cr(n.shape,s);return l.length>0&&(a=Xe(a,l)),ie(a,n.shape)},b:()=>{let a=t;const l=Cr(r.shape,s);return l.length>0&&(a=Xe(a,l)),ie(Qn(a),r.shape)}}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZIe={kernelName:Bw,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,s=r.shape.slice(),{axis:i}=n;xt(i,r.shape).forEach(c=>{s[c]=1});const a=ie(t,s),l=re(a,ru(r.shape,"float32"));return{x:()=>l}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XIe={kernelName:ry,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ye(t,Nn(uI(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YIe={kernelName:sy,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>re(et(Kt(1),Nn(n)),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JIe={kernelName:iy,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{reps:s}=n;return{x:()=>{let o=Mt(r);if(r.rank===1)for(let a=0;a<s[0];++a)o=_e(o,bn(t,[a*r.shape[0]],[r.shape[0]]));else if(r.rank===2)for(let a=0;a<s[0];++a)for(let l=0;l<s[1];++l)o=_e(o,bn(t,[a*r.shape[0],l*r.shape[1]],[r.shape[0],r.shape[1]]));else if(r.rank===3)for(let a=0;a<s[0];++a)for(let l=0;l<s[1];++l)for(let c=0;c<s[2];++c)o=_e(o,bn(t,[a*r.shape[0],l*r.shape[1],c*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else if(r.rank===4)for(let a=0;a<s[0];++a)for(let l=0;l<s[1];++l)for(let c=0;c<s[2];++c)for(let u=0;u<s[3];++u)o=_e(o,bn(t,[a*r.shape[0],l*r.shape[1],c*r.shape[2],u*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]));else throw new Error(`Gradient for tile operation is not implemented for rank-${r.rank} tensors yet.`);return o}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QIe={kernelName:Xh,gradFunc:(t,e,n)=>{const r=n,{perm:s}=r,i=tu(s);return{x:()=>Lt(t,i)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const e3e={kernelName:Hw,gradFunc:(t,e,n)=>{const r=n,{axis:s}=r;return{value:()=>Rl(t,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const t3e={kernelName:Gw,inputsToSave:["segmentIds"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>n3e(t,n)}}};function n3e(t,e){const n=nu(e,Mt(e)),r=fI(t,n);let s=Pd(e,Kt(0,"int32"));const i=r.rank-s.rank;for(let a=0;a<i;++a)s=Ms(s,a+1);s=Al(s,ru(r.shape,"bool"));const o=Mt(r);return $s(s,r,o)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const r3e={kernelName:Ww,gradFunc:t=>({x:()=>Mt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const s3e=[MU,t$e,n$e,r$e,s$e,i$e,o$e,a$e,l$e,c$e,u$e,d$e,m$e,y$e,b$e,v$e,x$e,w$e,E$e,k$e,N$e,C$e,S$e,_$e,I$e,A$e,R$e,P$e,D$e,O$e,CIe,L$e,M$e,z$e,F$e,B$e,j$e,V$e,U$e,H$e,G$e,W$e,q$e,K$e,Z$e,X$e,Y$e,J$e,Q$e,nIe,lM,lM,rIe,oIe,cIe,uIe,dIe,hIe,fIe,mIe,pIe,gIe,yIe,bIe,vIe,cM,cM,xIe,wIe,NIe,_Ie,SIe,TIe,$Ie,IIe,AIe,RIe,PIe,DIe,OIe,LIe,MIe,zIe,FIe,BIe,VIe,jIe,UIe,uM,uM,dM,dM,HIe,WIe,GIe,qIe,KIe,ZIe,XIe,YIe,JIe,QIe,e3e,t3e,r3e];for(const t of s3e)zEe(t);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.abs=function(){return this.throwIfDisposed(),ws(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.acos=function(){return this.throwIfDisposed(),Bke(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.acosh=function(){return this.throwIfDisposed(),jke(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.add=function(t){return this.throwIfDisposed(),_e(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.all=function(t,e){return this.throwIfDisposed(),x7(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.any=function(t,e){return this.throwIfDisposed(),m_(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.argMax=function(t){return this.throwIfDisposed(),vg(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.argMin=function(t){return this.throwIfDisposed(),qke(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.asScalar=function(){return this.throwIfDisposed(),F(this.size===1,()=>"The array must have only 1 element."),ie(this,[])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.asType=function(t){return this.throwIfDisposed(),Me(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.as1D=function(){return this.throwIfDisposed(),ie(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.as2D=function(t,e){return this.throwIfDisposed(),ie(this,[t,e])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.as3D=function(t,e,n){return this.throwIfDisposed(),ie(this,[t,e,n])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.as4D=function(t,e,n,r){return this.throwIfDisposed(),ie(this,[t,e,n,r])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.as5D=function(t,e,n,r,s){return this.throwIfDisposed(),ie(this,[t,e,n,r,s])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.asin=function(){return this.throwIfDisposed(),Zke(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.asinh=function(){return this.throwIfDisposed(),Yke(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.atan=function(){return this.throwIfDisposed(),Qke(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.atan2=function(t){return this.throwIfDisposed(),tNe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.atanh=function(){return this.throwIfDisposed(),rNe(this)};fe().prototype.avgPool=function(t,e,n,r){return this.throwIfDisposed(),aI(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.batchToSpaceND=function(t,e){return this.throwIfDisposed(),lI(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.batchNorm=function(t,e,n,r,s){return this.throwIfDisposed(),Yw(this,t,e,n,r,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.broadcastTo=function(t){return this.throwIfDisposed(),Mp(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.cast=function(t){return this.throwIfDisposed(),Me(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.ceil=function(){return this.throwIfDisposed(),INe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.clipByValue=function(t,e){return this.throwIfDisposed(),Oi(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.concat=function(t,e){return this.throwIfDisposed(),t instanceof gr&&(t=[t]),Us([this,...t],e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.conv1d=function(t,e,n,r,s,i){return this.throwIfDisposed(),w7(this,t,e,n,r,s,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.conv2dTranspose=function(t,e,n,r,s){return this.throwIfDisposed(),E7(this,t,e,n,r,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.conv2d=function(t,e,n,r,s,i){return this.throwIfDisposed(),fd(this,t,e,n,r,s,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.cos=function(){return this.throwIfDisposed(),uI(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.cosh=function(){return this.throwIfDisposed(),N7(this)};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.cumprod=function(t,e,n){return this.throwIfDisposed(),g_(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.cumsum=function(t,e,n){return this.throwIfDisposed(),C7(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.depthToSpace=function(t,e){return this.throwIfDisposed(),tCe(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.depthwiseConv2d=function(t,e,n,r,s,i){return this.throwIfDisposed(),dI(this,t,e,n,r,s,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.dilation2d=function(t,e,n,r,s){return this.throwIfDisposed(),sCe(this,t,e,n,r,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.divNoNan=function(t){return this.throwIfDisposed(),cCe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.div=function(t){return this.throwIfDisposed(),Ye(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.dot=function(t){return this.throwIfDisposed(),dCe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.elu=function(){return this.throwIfDisposed(),Qw(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.equal=function(t){return this.throwIfDisposed(),Oa(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.erf=function(){return this.throwIfDisposed(),_7(this)};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.euclideanNorm=function(t,e){return this.throwIfDisposed(),kCe(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.exp=function(){return this.throwIfDisposed(),La(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.expandDims=function(t){return this.throwIfDisposed(),Ms(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.expm1=function(){return this.throwIfDisposed(),SCe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.fft=function(){return this.throwIfDisposed(),G7(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.flatten=function(){return this.throwIfDisposed(),ie(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.floor=function(){return this.throwIfDisposed(),t2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.floorDiv=function(t){return this.throwIfDisposed(),v7(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.gather=function(t,e,n){return this.throwIfDisposed(),fI(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.greaterEqual=function(t){return this.throwIfDisposed(),Pd(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.greater=function(t){return this.throwIfDisposed(),Li(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.ifft=function(){return this.throwIfDisposed(),y_(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.irfft=function(){return this.throwIfDisposed(),bSe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.isFinite=function(){return this.throwIfDisposed(),LCe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.isInf=function(){return this.throwIfDisposed(),zCe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.isNaN=function(){return this.throwIfDisposed(),BCe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.leakyRelu=function(t){return this.throwIfDisposed(),pI(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.lessEqual=function(t){return this.throwIfDisposed(),sm(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.less=function(t){return this.throwIfDisposed(),M1(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.localResponseNormalization=function(t,e,n,r){return this.throwIfDisposed(),GCe(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.logSigmoid=function(){return this.throwIfDisposed(),JCe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.logSoftmax=function(t){return this.throwIfDisposed(),A7(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.logSumExp=function(t,e){return this.throwIfDisposed(),R7(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.log=function(){return this.throwIfDisposed(),Ma(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.log1p=function(){return this.throwIfDisposed(),I7(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.logicalAnd=function(t){return this.throwIfDisposed(),Al(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.logicalNot=function(){return this.throwIfDisposed(),gI(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.logicalOr=function(t){return this.throwIfDisposed(),P7(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.logicalXor=function(t){return this.throwIfDisposed(),o_e(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.matMul=function(t,e,n){return this.throwIfDisposed(),qt(this,t,e,n)};fe().prototype.maxPool=function(t,e,n,r){return this.throwIfDisposed(),yI(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.max=function(t,e){return this.throwIfDisposed(),jo(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.maximum=function(t){return this.throwIfDisposed(),nu(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.mean=function(t,e){return this.throwIfDisposed(),cr(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.min=function(t,e){return this.throwIfDisposed(),L1(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.minimum=function(t){return this.throwIfDisposed(),Eg(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.mirrorPad=function(t,e){return this.throwIfDisposed(),m_e(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.mod=function(t){return this.throwIfDisposed(),g_e(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.mul=function(t){return this.throwIfDisposed(),re(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.neg=function(){return this.throwIfDisposed(),Qn(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.norm=function(t,e,n){return this.throwIfDisposed(),e2(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.notEqual=function(t){return this.throwIfDisposed(),z1(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.oneHot=function(t,e=1,n=0){return this.throwIfDisposed(),D7(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.onesLike=function(){return this.throwIfDisposed(),yo(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.pad=function(t,e){return this.throwIfDisposed(),vI(this,t,e)};fe().prototype.pool=function(t,e,n,r,s,i){return this.throwIfDisposed(),__e(this,t,e,n,r,s,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.pow=function(t){return this.throwIfDisposed(),md(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.prelu=function(t){return this.throwIfDisposed(),wI(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.prod=function(t,e){return this.throwIfDisposed(),$_e(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.reciprocal=function(){return this.throwIfDisposed(),J_e(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.relu=function(){return this.throwIfDisposed(),Od(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.relu6=function(){return this.throwIfDisposed(),M7(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.reshapeAs=function(t){return this.throwIfDisposed(),ie(this,t.shape)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.reshape=function(t){return this.throwIfDisposed(),ie(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.resizeBilinear=function(t,e,n){return this.throwIfDisposed(),X7(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.resizeNearestNeighbor=function(t,e,n){return this.throwIfDisposed(),Y7(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.reverse=function(t){return this.throwIfDisposed(),pd(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.rfft=function(){return this.throwIfDisposed(),wSe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.round=function(){return this.throwIfDisposed(),z7(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.rsqrt=function(){return this.throwIfDisposed(),F7(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.selu=function(){return this.throwIfDisposed(),B7(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.separableConv2d=function(t,e,n,r,s,i){return this.throwIfDisposed(),V7(this,t,e,n,r,s,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.sigmoid=function(){return this.throwIfDisposed(),rm(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.sign=function(){return this.throwIfDisposed(),aSe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.sin=function(){return this.throwIfDisposed(),j7(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.sinh=function(){return this.throwIfDisposed(),U7(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.slice=function(t,e){return this.throwIfDisposed(),bn(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.softmax=function(t){return this.throwIfDisposed(),AI(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.softplus=function(){return this.throwIfDisposed(),ly(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.spaceToBatchND=function(t,e){return this.throwIfDisposed(),xI(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.split=function(t,e){return this.throwIfDisposed(),Ri(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.sqrt=function(){return this.throwIfDisposed(),us(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.square=function(){return this.throwIfDisposed(),Nn(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.squaredDifference=function(t){return this.throwIfDisposed(),kSe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.squeeze=function(t){return this.throwIfDisposed(),uy(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.stack=function(t,e){this.throwIfDisposed();const n=t instanceof gr?[this,t]:[this,...t];return Rl(n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.step=function(t){return this.throwIfDisposed(),dy(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.stridedSlice=function(t,e,n,r,s,i,o,a){return this.throwIfDisposed(),TSe(this,t,e,n,r,s,i,o,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.sub=function(t){return this.throwIfDisposed(),et(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.sum=function(t,e){return this.throwIfDisposed(),Xe(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.tan=function(){return this.throwIfDisposed(),ISe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.tanh=function(){return this.throwIfDisposed(),Xw(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.tile=function(t){return this.throwIfDisposed(),zo(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.toBool=function(){return this.throwIfDisposed(),Me(this,"bool")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.toFloat=function(){return this.throwIfDisposed(),Me(this,"float32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.toInt=function(){return this.throwIfDisposed(),Me(this,"int32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.topk=function(t,e){return this.throwIfDisposed(),PSe(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.transpose=function(t){return this.throwIfDisposed(),Lt(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.unique=function(t){return this.throwIfDisposed(),LSe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.unsortedSegmentSum=function(t,e){return this.throwIfDisposed(),K7(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.unstack=function(t){return this.throwIfDisposed(),gd(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.where=function(t,e){return this.throwIfDisposed(),$s(t,this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fe().prototype.zerosLike=function(){return this.throwIfDisposed(),Mt(this)};/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class fa extends Error{constructor(e){super(e),Object.setPrototypeOf(this,fa.prototype)}}class co extends Error{constructor(e){super(e),Object.setPrototypeOf(this,co.prototype)}}class ee extends Error{constructor(e){super(e),Object.setPrototypeOf(this,ee.prototype)}}class ht extends Error{constructor(e){super(e),Object.setPrototypeOf(this,ht.prototype)}}class f3 extends Error{constructor(e){super(e),Object.setPrototypeOf(this,f3.prototype)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class FU{constructor(e){this.maxEntries=e||100,this.cache=new Map}get(e){let n;return this.cache.has(e)&&(n=this.cache.get(e),this.cache.delete(e),this.cache.set(e,n)),n}put(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){const r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(e,n)}getMaxEntries(){return this.maxEntries}setMaxEntries(e){if(e<0)throw new Error(`The maxEntries of LRU caches must be at least 0, but got ${e}.`);if(this.maxEntries>e)for(let n=0;n<this.maxEntries-e;n++){const r=this.cache.keys().next().value;this.cache.delete(r)}this.maxEntries=e}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function yd(t,e){if(Array.isArray(t)){let n=[];for(let r=0;r<e;r++)n=n.concat(t);return n}else{const n=new Array(e);return n.fill(t),n}}function ma(t,e){if(!t)throw new f3(e)}function hM(t,e){let n=0;for(const r of t)r===e&&n++;return n}function zs(t){return t.length===1?t[0]:t}function rn(t){return Array.isArray(t)?t:[t]}function al(t){const n=t.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return n[0]!=="_"?n:"private"+n}function Ru(t){return t.length<=1||t.indexOf("_")===-1?t:t.replace(/[_]+(\w|$)/g,(e,n)=>n.toUpperCase())}let Hi={};function m3(t){if(t==null)return null;const e={};return e.className=t.getClassName(),e.config=t.getConfig(),e}function x_(t){if(!(t==null||typeof t!="object"))if(Array.isArray(t))t.forEach(e=>x_(e));else{const e=Object.keys(t);for(const n of e){const r=t[n];r!=null&&typeof r=="object"&&(!Array.isArray(r)&&r.type==="ndarray"&&typeof r.value=="number"?t[n]=r.value:x_(r))}}}function py(t,e={},n={},r="object",s=!1){if(typeof t=="string"){const i=t;let o;if(i in n)o=n[i];else if(i in Hi)o=Hi[i];else if(o=e[i],o==null)throw new ee(`Unknown ${r}: ${t}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return o}else{const i=t;if(i.className==null||i.config==null)throw new ee(`${r}: Improper config format: ${JSON.stringify(i)}.
'className' and 'config' must set.`);const o=i.className;let a,l;if(o in n?[a,l]=n[o]:o in Hi?[a,l]=Hi.className:o in e&&([a,l]=e[o]),a==null)throw new ee(`Unknown ${r}: ${o}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(l!=null){const c={};for(const p of Object.keys(Hi))c[p]=Hi[p];for(const p of Object.keys(n))c[p]=n[p];const u=i.config;u.customObjects=c;const h=Object.assign({},Hi);for(const p of Object.keys(n))Hi[p]=n[p];x_(i.config);const m=l(a,i.config,n,s);return Hi=Object.assign({},h),m}else{const c=Object.assign({},Hi);for(const h of Object.keys(n))Hi[h]=n[h];const u=new a(i.config);return Hi=Object.assign({},c),u}}}function i3e(t,e){return t<e?-1:t>e?1:0}function Hb(t,e){return-1*i3e(t,e)}function Pc(t){if(t==null)return t;const e=[];for(const n of t)e.indexOf(n)===-1&&e.push(n);return e}function o3e(t){if(t==null)throw new ee(`Invalid value in obj: ${JSON.stringify(t)}`);for(const e in t)if(t.hasOwnProperty(e))return!1;return!0}function Md(t,e,n){if(n!=null&&t.indexOf(n)<0)throw new ee(`${n} is not a valid ${e}.  Valid values are ${t} or null/undefined.`)}function p3(t,e,n=0,r=1/0){return ma(n>=0),ma(r>=n),Array.isArray(t)&&t.length>=n&&t.length<=r&&t.every(s=>typeof s===e)}function Dr(t,e){Array.isArray(t)?(F(t.length>0,()=>`${e} is unexpectedly an empty array.`),t.forEach((n,r)=>Dr(n,`element ${r+1} of ${e}`))):F(Number.isInteger(t)&&t>0,()=>`Expected ${e} to be a positive integer, but got ${BU(t)}.`)}function BU(t){return t===null?"null":Array.isArray(t)?"["+t.map(e=>BU(e)).join(",")+"]":typeof t=="string"?`"${t}"`:`${t}`}function a3e(t,e,n){let r=n!=null?n():Ls(),s;return(...o)=>{const a=n!=null?n():Ls();return a-r<e||(r=a,s=t(...o)),s}}function VU(t){return t==="relu"?"relu":t==="linear"?"linear":t==="elu"?"elu":null}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let l3e=0;function jU(){return l3e++}const Gb={};function o2(t=""){return t in Gb||(Gb[t]=0),Gb[t]+=1,t+Gb[t].toString()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const c3e=["channelsFirst","channelsLast"],u3e=["nearest","bilinear"],d3e=["valid","same","causal"],h3e=["max","avg"],f3e=["sum","mul","concat","ave"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const ch=new Map;function nr(t){Md(c3e,"DataFormat",t)}function m3e(t){Md(u3e,"InterpolationFormat",t)}function Mi(t){Md(d3e,"PaddingMode",t)}function UU(t){Md(h3e,"PoolMode",t)}const zp=[],fM="/";function Qu(t,e){zp.push(t);try{const n=e();return zp.pop(),n}catch(n){throw zp.pop(),n}}function p3e(){return zp.length===0?"":zp.join(fM)+fM}function HU(t){if(!WU(t))throw new Error("Not a valid tensor name: '"+t+"'");return p3e()+t}function GU(t){if(!WU(t))throw new Error("Not a valid tensor name: '"+t+"'");ch.has(t)||ch.set(t,0);const e=ch.get(t);if(ch.set(t,ch.get(t)+1),e>0){const n=`${t}_${e}`;return ch.set(n,1),n}else return t}const g3e=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function WU(t){return!!t.match(g3e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function y3e(t){return t===parseInt(t.toString(),10)}function Dc(t,e,n){e==null&&(e=0),n==null&&(n=t.length);let r=1;for(let s=e;s<n;++s)r*=t[s];return r}function Tf(t){if(t.length===0)return Number.NaN;let e=Number.POSITIVE_INFINITY;for(let n=0;n<t.length;n++){const r=t[n];r<e&&(e=r)}return e}function Uc(t){if(t.length===0)return Number.NaN;let e=Number.NEGATIVE_INFINITY;for(let n=0;n<t.length;n++){const r=t[n];r>e&&(e=r)}return e}function Ko(t,e){if(e<t)throw new ee(`end (${e}) < begin (${t}) is forbidden.`);const n=[];for(let r=t;r<e;++r)n.push(r);return n}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let Ik;function xr(){return Ik==null&&(Ik=uke().epsilon()),Ik}function Zo(){return"channelsLast"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Ia(t,e){return Me(t,e)}function gy(t,e=-1){const n=t.shape.slice();return e<0&&(e=n.length+e+1),n.splice(e,0,1),ie(t,n)}function b3e(t,e){return ue(()=>{if(t.shape.length!==2)throw new ee(`repeat() expects a rank-2 tensor, but received a rank-${t.shape.length} tensor.`);const n=gy(t,1);return w_(n,[1,e,1])})}function v3e(t){const e=[Dc(t.shape)];return ie(t,e)}function x3e(t){if(t.rank<=1)throw new ee(`batchFlatten requires a minimum rank of 2. Got rank: ${t.rank}.`);const e=[t.shape[0],Dc(t.shape,1)];return ie(t,e)}function ed(t,e,n){return ue(()=>{switch(t.rank){case 1:return $I(t,e,n);case 2:return H7(t,[e,0],[n,t.shape[1]]);case 3:return II(t,[e,0,0],[n,t.shape[1],t.shape[2]]);case 4:return B1(t,[e,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3]]);case 5:return bn(t,[e,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4]]);case 6:return bn(t,[e,0,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4],t.shape[5]]);default:throw new ee(`sliceAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}})}function Ak(t,e,n){return ue(()=>{switch(t.rank){case 1:return $I(t,e,n);case 2:return H7(t,[0,e],[t.shape[0],n]);case 3:return II(t,[0,0,e],[t.shape[0],t.shape[1],n]);case 4:return B1(t,[0,0,0,e],[t.shape[0],t.shape[1],t.shape[2],n]);default:throw new ee(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function Wb(t,e,n,r){return ue(()=>{switch(t.rank){case 1:return $I(t,e,n);case 2:switch(r){case 1:return ed(t,e,n);case 2:return Ak(t,e,n);default:throw new ee(`The axis is not within the rank of the tensor ${r}`)}case 3:switch(r){case 1:return ed(t,e,n);case 2:return II(t,[0,e,0],[t.shape[0],n,t.shape[2]]);case 3:return Ak(t,e,n);default:throw new ee(`The axis is not within the rank of the tensor ${r}`)}case 4:switch(r){case 1:return ed(t,e,n);case 2:return B1(t,[0,e,0,0],[t.shape[0],n,t.shape[2],t.shape[3]]);case 3:return B1(t,[0,0,e,0],[t.shape[0],t.shape[1],n,t.shape[3]]);case 4:return Ak(t,e,n);default:throw new ee(`The axis is not within the rank of the tensor ${r}`)}default:throw new ee(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function g3(t,e=-1){let n;return e<0&&(n=t[0].rank,n!==0?e=n:e=0),e===t[0].rank&&(e=-1),Us(t,e)}function mM(t,e){switch(t.rank){case 1:return PNe([t,e]);case 2:return ONe([t,e],0);case 3:return MNe([t,e],0);case 4:return FNe([t,e],0);default:throw new ee(`concatAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}}function w_(t,e){if(Array.isArray(e)||(e=[e]),t.rank!==e.length)throw new ee(`The length of input n (${e.length}) does not match the number of dimensions in input x (${t.rank})`);return zo(t,e)}function a2(t,e=0,n=1,r,s){return K_e(t,e,n,r,s)}function Aa(t,e,n,r){if(t.rank<2||e.rank<2)throw new ht(`dot requires both inputs to be rank >= 2 but got x shape = ${t.shape} and y shape = ${e.shape}`);if(e.rank>=3){const s=t.shape.slice(-1)[0],i=e.shape.slice(-2)[0];if(s!==i)throw new ht(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${t.shape} and  y shape = ${e.shape}`)}if(t.rank===2&&e.rank===2)return eM({a:t,b:e,transposeA:!1,transposeB:!1,bias:r?E_(t.rank,r,Zo()):null,activation:n});{const s=t.shape.slice(),i=s.pop();t=ie(t,[-1,i]);const o=e.shape.slice(),a=o.pop(),l=o.pop(),c=[...o,a],u=Array.from({length:e.rank},(y,v)=>v===0?e.rank-2:v<=e.rank-2?v-1:v);e=ie(Lt(e,u),[l,-1]);const h=[...s,...c];return ie(eM({a:t,b:e,transposeA:!1,transposeB:!1,bias:r?E_(t.rank,r,Zo()):null,activation:n}),h)}}function qU(t,e,n){return ue(()=>(Array.isArray(e)?e=ri(e,"int32"):e=Me(e,"int32"),fI(t,e,n)))}function yy(t){return re(t,t)}function E_(t,e,n){const r=e.shape;if(e.rank!==1&&e.rank!==t)throw new ee(`Unexpected bias dimensions: ${e.rank}; expected it to be 1 or ${t}`);if(t===5){if(n==="channelsFirst")return r.length===1?ie(e,[1,r[0],1,1,1]):ie(e,[1,r[3],r[0],r[1],r[2]]);if(n==="channelsLast")return r.length===1?ie(e,[1,1,1,1,r[0]]):ie(e,[1].concat(r))}else if(t===4){if(n==="channelsFirst")return r.length===1?ie(e,[1,r[0],1,1]):ie(e,[1,r[2],r[0],r[1]]);if(n==="channelsLast")return r.length===1?ie(e,[1,1,1,r[0]]):ie(e,[1].concat(r))}else if(t===3){if(n==="channelsFirst")return r.length===1?ie(e,[1,r[0],1]):ie(e,[1,r[1],r[0]]);if(n==="channelsLast")return r.length===1?ie(e,[1,1,r[0]]):ie(e,[1].concat(r))}else if(t<3)return e;throw new ee(`Unsupported input rank by biasAdd: ${e.rank}`)}function ta(t,e,n){return ue(()=>(n==null&&(n=Zo()),nr(n),_e(t,E_(t.rank,e,n))))}function w3e(t,e=1){if(e!==1)throw new ht(`Support for alpha values other than 1 (${e}) is not implemented yet.`);return Qw(t)}function E3e(t){return ue(()=>Ye(t,_e(ws(t),1)))}function KU(t,e,n,r){return ue(()=>USe(t,e,n,r))}function k3e(t){return ue(()=>{const e=_e(.5,re(.2,t));return Oi(e,0,1)})}function by(t,e,n=!1){return n?t():e()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const N3e=["fanIn","fanOut","fanAvg"],C3e=["normal","uniform","truncatedNormal"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function _3e(t){Md(N3e,"FanMode",t)}function S3e(t){Md(C3e,"Distribution",t)}class wo extends om{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class ZU extends wo{apply(e,n){return Pr(e,n)}}ZU.className="Zeros";we(ZU);class y3 extends wo{apply(e,n){return ru(e,n)}}y3.className="Ones";we(y3);class XU extends wo{constructor(e){if(super(),typeof e!="object")throw new ee(`Expected argument of type ConstantConfig but got ${e}`);if(e.value===void 0)throw new ee(`config must have value set but got ${e}`);this.value=e.value}apply(e,n){return ue(()=>re(Kt(this.value),ru(e,n)))}getConfig(){return{value:this.value}}}XU.className="Constant";we(XU);class YU extends wo{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,n){return cy(e,this.minval,this.maxval,n,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}YU.className="RandomUniform";we(YU);class JU extends wo{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new ht(`randomNormal does not support dType ${n}.`);return a2(e,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}JU.className="RandomNormal";we(JU);class QU extends wo{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new ht(`truncatedNormal does not support dType ${n}.`);return q7(e,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}QU.className="TruncatedNormal";we(QU);class eH extends wo{constructor(e){super(),this.gain=e.gain!=null?e.gain:1}apply(e,n){return ue(()=>{if(e.length!==2||e[0]!==e[1])throw new ee("Identity matrix initializer can only be used for 2D square matrices.");return re(this.gain,$7(e[0]))})}getConfig(){return{gain:this.gain}}}eH.className="Identity";we(eH);function T3e(t,e="channelsLast"){let n,r;if(nr(e),t.length===2)n=t[0],r=t[1];else if([3,4,5].indexOf(t.length)!==-1){if(e==="channelsFirst"){const s=Dc(t,2);n=t[1]*s,r=t[0]*s}else if(e==="channelsLast"){const s=Dc(t,0,t.length-2);n=t[t.length-2]*s,r=t[t.length-1]*s}}else{const s=Dc(t);n=Math.sqrt(s),r=Math.sqrt(s)}return[n,r]}class ui extends wo{constructor(e){if(super(),e.scale<0)throw new ee(`scale must be a positive float. Got: ${e.scale}`);this.scale=e.scale==null?1:e.scale,this.mode=e.mode==null?"fanIn":e.mode,_3e(this.mode),this.distribution=e.distribution==null?"normal":e.distribution,S3e(this.distribution),this.seed=e.seed}apply(e,n){const r=T3e(e),s=r[0],i=r[1];let o=this.scale;if(this.mode==="fanIn"?o/=Math.max(1,s):this.mode==="fanOut"?o/=Math.max(1,i):o/=Math.max(1,(s+i)/2),this.distribution==="normal"){const a=Math.sqrt(o);if(n=n||"float32",n!=="float32"&&n!=="int32")throw new ht(`${this.getClassName()} does not support dType ${n}.`);return q7(e,0,a,n,this.seed)}else{const a=Math.sqrt(3*o);return cy(e,-a,a,n,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}ui.className="VarianceScaling";we(ui);class b3 extends ui{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return ui.className}}b3.className="GlorotUniform";we(b3);class v3 extends ui{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return ui.className}}v3.className="GlorotNormal";we(v3);class x3 extends ui{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return ui.className}}x3.className="HeNormal";we(x3);class w3 extends ui{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return ui.className}}w3.className="HeUniform";we(w3);class E3 extends ui{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return ui.className}}E3.className="LeCunNormal";we(E3);class k3 extends ui{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return ui.className}}k3.className="LeCunUniform";we(k3);class tH extends wo{constructor(e){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=e.gain==null?this.DEFAULT_GAIN:e.gain,this.seed=e.seed}apply(e,n){return ue(()=>{if(e.length<2)throw new ht("Shape must be at least 2D.");if(n!=="int32"&&n!=="float32"&&n!==void 0)throw new TypeError(`Unsupported data type ${n}.`);n=n;const r=pe(e.slice(0,-1)),s=e[e.length-1],i=r*s;i>this.ELEMENTS_WARN_SLOW&&console.warn(`Orthogonal initializer is being called on a matrix with more than ${this.ELEMENTS_WARN_SLOW} (${i}) elements: Slowness may result.`);const o=[Math.max(s,r),Math.min(s,r)],a=a2(o,0,1,n,this.seed),l=FTe.qr(a,!1);let c=l[0];const h=l[1].flatten().stridedSlice([0],[Math.min(s,r)*Math.min(s,r)],[Math.min(s,r)+1]);return c=re(c,h.sign()),r<s&&(c=c.transpose()),re(Kt(this.gain),c.reshape(e))})}getConfig(){return{gain:this.gain,seed:this.seed}}}tH.className="Orthogonal";we(tH);const pM={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function gM(t,e={}){return py(t,so.getMap().classNameMap,e,"initializer")}function Bn(t){return m3(t)}function In(t){if(typeof t=="string"){const e=t in pM?pM[t]:t;if(e==="GlorotNormal")return new v3;if(e==="GlorotUniform")return new b3;if(e==="HeNormal")return new x3;if(e==="HeUniform")return new w3;if(e==="LeCunNormal")return new E3;if(e==="LeCunUniform")return new k3;{const n={};return n.className=e,n.config={},gM(n)}}else return t instanceof wo?t:gM(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function k_(t){return Array.isArray(t)&&Array.isArray(t[0])}function V1(t){return t.length===0?[]:Array.isArray(t[0])?t:[t]}function rt(t){let e;if(Array.isArray(t)){if(t.length!==1)throw new ee(`Expected Tensor length to be 1; got ${t.length}`);e=t[0]}else e=t;return e}function jt(t){if(Array.isArray(t)&&Array.isArray(t[0])){if(t.length===1)return t=t,t[0];throw new ee(`Expected exactly 1 Shape; got ${t.length}`)}else return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function j1(t){let e=0;for(const n of t)n.shape.length===0?e+=1:e+=n.shape.reduce((r,s)=>r*s);return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const yM="Variable";class $3e{constructor(e,n="float32",r=yM,s=!0,i=null){this.dtype=n??"float32",this.shape=e.shape,this.id=jU(),r=r??yM,this.originalName=HU(r),this.name=GU(this.originalName),this.trainable_=s,this.constraint=i,this.val=FSe(e,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(e){return this.assertNotDisposed(),I3e(this.val,e),this.val.id!==e.id&&(this.val.assign(e),this.constraint!=null&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(e){this.trainable_=e,this.val.trainable=e}}function I3e(t,e){if(t.shape.toString()!==e.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(t.shape)+" vs. "+JSON.stringify(e.shape))}function N_(t){return t.map(e=>e.read())}function N3(t){t.forEach(e=>{e[0].write(e[1])})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class wr{constructor(e){this.dtype=e.dtype,this.shape=e.shape,e.shape!=null?this.ndim=e.shape.length:this.ndim=e.ndim,this.maxNDim=e.maxNDim,this.minNDim=e.minNDim,this.axes=e.axes||{}}}class za{constructor(e,n,r,s,i,o,a){this.dtype=e,this.shape=n,this.sourceLayer=r,this.inputs=s,this.callArgs=i,this.outputTensorIndex=a,this.id=jU(),o!=null&&(this.originalName=HU(o),this.name=GU(this.originalName)),this.rank=n.length}}let A3e=0;class l2{constructor(e,n){this.callArgs=n,this.id=A3e++,this.outboundLayer=e.outboundLayer,this.inboundLayers=e.inboundLayers,this.nodeIndices=e.nodeIndices,this.tensorIndices=e.tensorIndices,this.inputTensors=e.inputTensors,this.outputTensors=e.outputTensors,this.inputMasks=e.inputMasks,this.outputMasks=e.outputMasks,this.inputShapes=e.inputShapes,this.outputShapes=e.outputShapes;for(const r of e.inboundLayers)r!=null&&r.outboundNodes.push(this);e.outboundLayer.inboundNodes.push(this)}getConfig(){const e=[];for(const n of this.inboundLayers)n!=null?e.push(n.name):e.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:e,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}}let R3e=0;class wt extends om{constructor(e={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=R3e++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let n=e.name;if(!n){const r=this.getClassName();n=al(r)+"_"+o2(r)}if(this.name=n,this.trainable_=e.trainable==null?!0:e.trainable,e.inputShape!=null||e.batchInputShape!=null){let r;if(e.batchInputShape!=null)r=e.batchInputShape;else if(e.inputShape!=null){let i=null;e.batchSize!=null&&(i=e.batchSize),r=[i].concat(e.inputShape)}this.batchInputShape=r;let s=e.dtype;s==null&&(s=e.inputDType),s==null&&(s="float32"),this.dtype=s}e.weights!=null?this.initialWeights=e.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(e,n){return e.name+"_ib-"+n.toString()}getNodeAtIndex(e,n){if(this.inboundNodes.length===0)throw new co(`The layer has never been called and thus has no defined ${n}.`);if(this.inboundNodes.length<=e)throw new ee(`Asked to get ${n} at node ${e}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[e]}getInputAt(e){return zs(this.getNodeAtIndex(e,"input").inputTensors)}getOutputAt(e){return zs(this.getNodeAtIndex(e,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new fa(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(this.inboundNodes.length===0)throw new fa(`Layer ${this.name} is not connected, no input to return.`);return zs(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(this.inboundNodes.length===0)throw new fa(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new fa(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return zs(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(e=>e())}get updates(){return this._updates}get built(){return this._built}set built(e){this._built=e}get trainable(){return this.trainable_}set trainable(e){this._trainableWeights.forEach(n=>n.trainable=e),this.trainable_=e}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(e=>e.trainable):[]}set trainableWeights(e){this._trainableWeights=e}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(e=>!e.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(e){this._nonTrainableWeights=e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(e){const n=rn(e);if(this.inputSpec==null||this.inputSpec.length===0)return;const r=rn(this.inputSpec);if(n.length!==r.length)throw new ee(`Layer ${this.name} expects ${r.length} inputs, but it received ${n.length} input tensors. Input received: ${e}`);for(let s=0;s<n.length;s++){const i=n[s],o=r[s];if(o==null)continue;const a=i.rank;if(o.ndim!=null&&a!==o.ndim)throw new ee(`Input ${s} is incompatible with layer ${this.name}: expected ndim=${o.ndim}, found ndim=${a}`);if(o.maxNDim!=null&&a>o.maxNDim)throw new ee(`Input ${s} is incompatible with layer ${this.name}: expected max_ndim=${o.maxNDim}, found ndim=${a}`);if(o.minNDim!=null&&a<o.minNDim)throw new ee(`Input ${s} is incompatible with layer ${this.name}: expected min_ndim=${o.minNDim}, found ndim=${a}.`);if(o.dtype!=null&&i.dtype!==o.dtype)throw new ee(`Input ${s} is incompatible with layer ${this.name} : expected dtype=${o.dtype}, found dtype=${i.dtype}.`);if(o.axes){const l=i.shape;for(const c in o.axes){const u=Number(c),h=o.axes[c],m=u>=0?l[u]:l[l.length+u];if(h!=null&&[h,null].indexOf(m)===-1)throw new ee(`Input ${s} is incompatible with layer ${this.name}: expected axis ${u} of input shape to have value ${h} but got shape ${l}.`)}}if(o.shape!=null)for(let l=0;l<o.shape.length;++l){const c=o.shape[l],u=i.shape[l];if(c!=null&&u!=null&&c!==u)throw new ee(`Input ${s} is incompatible with layer ${this.name}: expected shape=${o.shape}, found shape=${i.shape}.`)}}}call(e,n){return e}invokeCallHook(e,n){this._callHook!=null&&this._callHook(e,n)}setCallHook(e){this._callHook=e}clearCallHook(){this._callHook=null}apply(e,n){n=n||{},this.assertNotDisposed();const r=rn(e),s=O3e(e),i=L3e(e);if(s===i)throw new ee("Arguments to apply() must be all SymbolicTensors or all Tensors");return Qu(this.name,()=>{if(!this.built){this.assertInputCompatibility(e);const o=[];for(const a of rn(e))o.push(a.shape);this.build(zs(o)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),this._refCount===null&&i&&(this._refCount=1)}if(this.assertInputCompatibility(e),i){let o=this.call(e,n);this.supportsMasking&&this.setMaskMetadata(e,o);const a=rn(o),l=[];for(let c of a)r.indexOf(c)!==-1&&(c=c.clone()),l.push(c);if(o=zs(l),this.activityRegularizer!=null)throw new ht("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return o}else{const o=P3e(e),a=this.computeOutputShape(o);let l;const c=D3e(e);if(this.warnOnIncompatibleInputShape(Array.isArray(e)?o[0]:o),a!=null&&a.length>0&&Array.isArray(a[0])?l=a.map((u,h)=>new za(c,u,this,rn(e),n,this.name,h)):l=new za(c,a,this,rn(e),n,this.name),this.addInboundNode(e,l,null,null,o,a,n),this._refCount++,this.activityRegularizer!=null)throw new ht("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return l}})}warnOnIncompatibleInputShape(e){if(this.batchInputShape!=null)if(e.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(e)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let n=!1;this.batchInputShape.forEach((r,s)=>{r!=null&&e[s]!=null&&e[s]!==r&&(n=!0)}),n&&console.warn(`The shape of the input tensor (${JSON.stringify(e)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(this.inboundNodes==null||this.inboundNodes.length===0)throw new fa(`The layer ${this.name} has never been called and thus has no defined output shape.`);const e=[];for(const n of this.inboundNodes){const r=JSON.stringify(n.outputShapes);e.indexOf(r)===-1&&e.push(r)}if(e.length===1){const n=this.inboundNodes[0].outputShapes;return Array.isArray(n)&&Array.isArray(n[0])&&n.length===1?n[0]:n}else throw new fa(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new co(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return j1(this.weights)}build(e){this.built=!0}getWeights(e=!1){return N_(e?this.trainableWeights:this.weights)}setWeights(e){ue(()=>{const n=this.weights;if(n.length!==e.length)throw new ee(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${e.length}, but the layer was expecting ${n.length} weights. Provided weights: ${e}...`);if(n.length===0)return;const r=[],s=N_(n);for(let i=0;i<s.length;++i){const o=s[i],a=n[i],l=e[i];if(!Zt(o.shape,l.shape))throw new ee(`Layer weight shape ${o.shape} not compatible with provided weight shape ${l.shape}`);r.push([a,l])}N3(r)})}addWeight(e,n,r,s,i,o,a,l){if(this._addedWeightNames.indexOf(e)!==-1)throw new ee(`Duplicate weight name ${e} for layer ${this.name}`);this._addedWeightNames.push(e),r==null&&(r="float32"),this.fastWeightInitDuringBuild&&(s=l!=null?l():In("zeros"));const c=s.apply(n,r),u=new $3e(c,r,e,o,a);return c.dispose(),i!=null&&this.addLoss(()=>i.apply(u.read())),o==null&&(o=!0),o?this._trainableWeights.push(u):this._nonTrainableWeights.push(u),u}setFastWeightInitDuringBuild(e){this.fastWeightInitDuringBuild=e}addLoss(e){e==null||Array.isArray(e)&&e.length===0||(e=rn(e),this._losses!==void 0&&this._losses!==null&&this.losses.push(...e))}computeOutputShape(e){return e}computeMask(e,n){if(!this.supportsMasking){if(n!=null)if(Array.isArray(n))n.forEach(r=>{if(r!=null)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)});else throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);return null}return n}setMaskMetadata(e,n,r){if(!this.supportsMasking)return;const s=this.computeMask(e,r),i=rn(n),o=rn(s);if(i.length!==o.length)throw new Error(`${this.name} outputs ${i.length} tensors but ${i.length} masks for those tensors`);for(let a=0;a<i.length;a++)i[a].kerasMask=o[a]}addInboundNode(e,n,r,s,i,o,a=null){const l=rn(e);n=rn(n),r=rn(r),s=rn(s),i=V1(i),o=V1(o);const c=[],u=[],h=[];for(const m of l)c.push(m.sourceLayer),u.push(m.nodeIndex),h.push(m.tensorIndex);new l2({outboundLayer:this,inboundLayers:c,nodeIndices:u,tensorIndices:h,inputTensors:l,outputTensors:n,inputMasks:r,outputMasks:s,inputShapes:i,outputShapes:o},a);for(let m=0;m<n.length;m++)n[m].sourceLayer=this,n[m].nodeIndex=this.inboundNodes.length-1,n[m].tensorIndex=m}getConfig(){const e={name:this.name,trainable:this.trainable};return this.batchInputShape!=null&&(e.batchInputShape=this.batchInputShape),this.dtype!=null&&(e.dtype=this.dtype),e}disposeWeights(){return this.weights.forEach(e=>e.dispose()),this.weights.length}assertNotDisposed(){if(this._refCount===0)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(this._refCount===null)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let e=0;return--this._refCount===0&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}}function P3e(t){t=rn(t);const e=[];for(const n of t)e.push(n.shape);return zs(e)}function D3e(t){return"float32"}function nH(t,e,n){if((e==null||n!=null&&n>0)&&(e=t.sourceLayer,n=t.nodeIndex),e.inboundNodes.length===0)return[t];{const r=e.inboundNodes[n];if(r.inboundLayers.length===0)return r.inputTensors;{const s=[];for(let i=0;i<r.inboundLayers.length;i++){const o=r.inputTensors[i],a=r.inboundLayers[i],l=r.nodeIndices[i],c=nH(o,a,l);for(const u of c)s.indexOf(u)===-1&&s.push(u)}return s}}}function O3e(t){let e=!0;for(const n of rn(t))if(!(n instanceof za)){e=!1;break}return e}function L3e(t){let e=!0;for(const n of rn(t))if(n instanceof za){e=!1;break}return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class vy extends wt{constructor(e){if(super({dtype:e.dtype,name:e.name!=null?e.name:o2("input").toString()}),e.batchSize==null&&(e.batchSize=null),e.sparse==null&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,e.inputShape!=null&&e.batchInputShape!=null)throw new ee("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let n=e.batchInputShape;if(n==null){if(e.inputShape==null)throw new ee("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");n=[e.batchSize].concat(e.inputShape)}else if(e.batchSize!=null)throw new ee("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const r=e.dtype||"float32";this.batchInputShape=n,this.dtype=r,this.inputSpec=[{shape:n}];const s=new za(this.dtype,this.batchInputShape,this,[],{},this.name);s.nodeIndex=0,s.tensorIndex=0,new l2({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[s],outputTensors:[s],inputMasks:[null],outputMasks:[null],inputShapes:[n],outputShapes:[n]})}apply(e,n){throw new ee(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}vy.className="InputLayer";we(vy);function M3e(t){if(t.batchShape==null&&t.shape==null)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(t.batchShape!=null&&t.shape!=null)throw new ee("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let e=t.batchShape;t.shape!=null&&e==null&&(e=[null].concat(t.shape));let n=t.dtype;return n==null&&(n="float32"),new vy({batchInputShape:e,name:t.name,dtype:n,sparse:t.sparse}).inboundNodes[0].outputTensors[0]}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function z3e(t,e){if(t.dtype==null||t.dtype===e.dtype)return e;try{return Me(e,t.dtype)}catch{throw new ee(`The dtype of the feed (${e.dtype}) can not be cast to the dtype of the key '${t.name}' (${t.dtype}).`)}}class vc{constructor(e){if(this.id2Value={},this.id2Mask={},this.name2Id={},e instanceof vc)for(const n in e.id2Value)this.id2Value[n]=e.id2Value[n],n in e.id2Mask&&(this.id2Mask[n]=e.id2Mask[n]);else{if(e==null)return;for(const n of e)this.add(n.key,n.value)}}add(e,n,r){if(this.id2Value[e.id]==null)this.id2Value[e.id]=z3e(e,n),this.name2Id[e.name]=e.id,r!=null&&(this.id2Mask[e.id]=r);else throw new ee(`Duplicate key: name=${e.name}, id=${e.id}`);return this}addFeed(e){this.add(e.key,e.value)}hasKey(e){return this.id2Value[e.id]!=null}names(){return Object.keys(this.name2Id)}getValue(e){if(e instanceof za){if(this.id2Value[e.id]==null)throw new ee(`Nonexistent key: ${e.name}`);return this.id2Value[e.id]}else{const n=this.name2Id[e];if(n==null)throw new ee(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Value[n]}}getMask(e){if(e instanceof za){if(this.id2Value[e.id]==null)throw new ee(`Nonexistent key: ${e.name}`);return this.id2Mask[e.id]}else{const n=this.name2Id[e];if(n==null)throw new ee(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Mask[n]}}disposeMasks(){this.id2Mask!=null&&_t(this.id2Mask)}}const U1=new FU,H1=new FU;function F3e(t){U1!=null&&U1.setMaxEntries(t),H1!=null&&H1.setMaxEntries(t)}function cp(t,e,n,r){const s=n==null?!1:n.training,i=Array.isArray(t),o=i?t:[t],a=o.map(y=>y.name),l=[],c=e.names();for(const y of a)c.indexOf(y)!==-1?l.push(e.getValue(y)):l.push(null);r!=null&&(r.maxNumTensors=-1/0,r.minNumTensors=1/0);const u=a.join(",")+"|"+e.names().sort().join(",");let h=U1.get(u),m;if(h==null){const y=B3e(o,e);h=y.sorted,m=y.recipientCounts,U1.put(u,h),H1.put(u,m)}m={},s||Object.assign(m,H1.get(u));const p=new vc(e);for(let y=0;y<h.length;++y){if(r!=null){const P=u_().numTensors;P>r.maxNumTensors&&(r.maxNumTensors=P),P<r.minNumTensors&&(r.minNumTensors=P)}const v=h[y],x=v.sourceLayer;if(x instanceof vy)continue;const b=[],w=[],E=[];let N=!1;for(const P of v.inputs){const R=p.getValue(P),D=p.getMask(P);b.push(R),w.push(D),D!=null&&(N=!0),s||(m[P.name]--,m[P.name]===0&&!e.hasKey(P)&&a.indexOf(P.name)===-1&&!R.isDisposed&&P.sourceLayer.stateful!==!0&&E.push(R))}N&&(n=n||{},n.mask=w[0]);const C=rn(x.apply(b,n));let S=null;x.supportsMasking&&(S=x.computeMask(b,w));const T=j3e(v),I=Array.isArray(T)?T:[T];for(let P=0;P<I.length;++P){p.hasKey(I[P])||p.add(I[P],C[P],Array.isArray(S)?S[0]:S);const R=a.indexOf(I[P].name);R!==-1&&(l[R]=C[P])}s||_t(E)}return p.disposeMasks(),i?l:l[0]}function B3e(t,e){F(t!=null&&t.length>0,()=>"Expected at least one fetch, got none");let n=[],r={};if(t.length===1){const s=bM(t[0],e);n=s.sorted,r=s.recipientMap}else{const s=new Set;for(const i of t){const{sorted:o,recipientMap:a}=bM(i,e);for(const l of o)s.has(l.name)||(n.push(l),s.add(l.name));for(const l in a)r[l]==null&&(r[l]=new Set),a[l].forEach(c=>r[l].add(c))}}return{sorted:n,recipientCounts:V3e(r)}}function V3e(t){const e={};for(const n in t)e[n]=t[n].size;return e}function bM(t,e){const n=new Set,r=[],s={};for(const a of e.names())n.add(a);const i=[],o=[];for(i.push(t);i.length>0;){const a=i[i.length-1];if(n.has(a.name)){i.pop();continue}const l=o[o.length-1]===i.length-1;if(a.inputs.length===0||l)i.pop(),r.push(a),n.add(a.name),l&&o.pop();else{o.push(i.length-1);for(const c of a.inputs)s[c.name]==null&&(s[c.name]=new Set),s[c.name].add(a.name),!n.has(c.name)&&i.push(c)}}return{sorted:r,recipientMap:s}}function j3e(t){let e;if(t.sourceLayer.inboundNodes.length===1)e=t.sourceLayer.output;else{let n=null;for(let r=0;r<t.sourceLayer.inboundNodes.length;++r)for(const s of t.sourceLayer.inboundNodes[r].outputTensors)if(s.id===t.id){n=r;break}e=t.sourceLayer.getOutputAt(n)}return e}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const U3e=de();U3e.registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",()=>100,F3e);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function C3(t,e){return ue(()=>us(Xe(re(t,t),e,!0)))}class xy extends om{getConfig(){return{}}}class rH extends xy{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return ue(()=>{const n=C3(e,this.axis),r=Oi(n,0,this.maxValue);return re(e,Ye(r,_e(xr(),n)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}rH.className="MaxNorm";we(rH);class sH extends xy{constructor(e){super(),this.defaultAxis=0,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return ue(()=>Ye(e,_e(xr(),C3(e,this.axis))))}getConfig(){return{axis:this.axis}}}sH.className="UnitNorm";we(sH);class iH extends xy{apply(e){return Od(e)}}iH.className="NonNeg";we(iH);class oH extends xy{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=e.minValue!=null?e.minValue:this.defaultMinValue,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.rate=e.rate!=null?e.rate:this.defaultRate,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return ue(()=>{const n=C3(e,this.axis),r=_e(re(this.rate,Oi(n,this.minValue,this.maxValue)),re(1-this.rate,n));return re(e,Ye(r,_e(xr(),n)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}oH.className="MinMaxNorm";we(oH);const vM={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function kr(t){return m3(t)}function xM(t,e={}){return py(t,so.getMap().classNameMap,e,"constraint")}function Nr(t){if(t==null)return null;if(typeof t=="string"){const n={className:t in vM?vM[t]:t,config:{}};return xM(n)}else return t instanceof xy?t:xM(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */async function Eu(t){if(t==null)return;const e=[],n=[],r=[];for(const s in t){const i=t[s];if(typeof i!="number"){const o=i;e.push(o.data()),n.push(s),r.push(o)}}if(e.length>0){const s=await Promise.all(e);for(let i=0;i<s.length;++i)t[n[i]]=s[i][0];_t(r)}}function aH(t){if(t!=null)for(const e in t){const n=t[e];typeof n!="number"&&n.dispose()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var wM;(function(t){t[t.SILENT=0]="SILENT",t[t.VERBOSE=1]="VERBOSE"})(wM||(wM={}));const H3e=125;class Ng{constructor(){this.validationData=null}setParams(e){this.params=e}async onEpochBegin(e,n){}async onEpochEnd(e,n){}async onBatchBegin(e,n){}async onBatchEnd(e,n){}async onTrainBegin(e){}async onTrainEnd(e){}setModel(e){}}class G3e{constructor(e,n=10){e==null&&(e=[]),this.callbacks=e,this.queueLength=n}append(e){this.callbacks.push(e)}setParams(e){for(const n of this.callbacks)n.setParams(e)}setModel(e){for(const n of this.callbacks)n.setModel(e)}async onEpochBegin(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onEpochBegin(e,n)}async onEpochEnd(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onEpochEnd(e,n)}async onBatchBegin(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onBatchBegin(e,n)}async onBatchEnd(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onBatchEnd(e,n)}async onTrainBegin(e){e==null&&(e={});for(const n of this.callbacks)await n.onTrainBegin(e)}async onTrainEnd(e){e==null&&(e={});for(const n of this.callbacks)await n.onTrainEnd(e)}}class W3e extends Ng{constructor(){super()}async onEpochBegin(e){this.seen=0,this.totals={}}async onBatchEnd(e,n){n==null&&(n={});const r=n.size==null?0:n.size;this.seen+=r;for(const s in n){const i=n[s];if(typeof i=="number")this.totals.hasOwnProperty(s)||(this.totals[s]=0),this.totals[s]=this.totals[s]+i*r;else{let o;s in this.totals?o=this.totals[s]:this.totals[s]=0;const a=ue(()=>_e(this.totals[s],re(i,r)));this.totals[s]=a,o!=null&&o.dispose()}}}async onEpochEnd(e,n){if(n!=null)for(const r of this.params.metrics)this.totals[r]!=null&&(typeof this.totals[r]=="number"?n[r]=this.totals[r]/this.seen:ue(()=>{const s=re(Ye(1,this.seen),this.totals[r]);n[r]=s,this.totals[r].dispose(),Ta(n[r])}))}}class q3e extends Ng{async onTrainBegin(e){this.epoch=[],this.history={}}async onEpochEnd(e,n){n==null&&(n={}),this.epoch.push(e);for(const r in n)this.history[r]==null&&(this.history[r]=[]),this.history[r].push(n[r])}async syncData(){const e=[],n=[],r=[];for(const i in this.history){const o=this.history[i];for(let a=0;a<o.length;++a)if(typeof o[a]!="number"){const l=o[a];e.push(l.data()),n.push(i),r.push(a)}}const s=await Promise.all(e);for(let i=0;i<s.length;++i)this.history[n[i]][r[i]].dispose(),this.history[n[i]][r[i]]=s[i][0]}}class K3e extends Ng{constructor(e,n){if(super(),this.currentEpoch=0,this.nowFunc=e.nowFunc,this.nextFrameFunc=e.nextFrameFunc||hU,this.yieldEvery=n||"auto",this.yieldEvery==="auto"&&(this.yieldEvery=H3e),this.yieldEvery==="never"&&e.onYield!=null)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");JC(this.yieldEvery)&&(this.maybeWait=a3e(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=e.onTrainBegin,this.trainEnd=e.onTrainEnd,this.epochBegin=e.onEpochBegin,this.epochEnd=e.onEpochEnd,this.batchBegin=e.onBatchBegin,this.batchEnd=e.onBatchEnd,this.yield=e.onYield}async maybeWait(e,n,r){const s=[];this.yield!=null&&(await Eu(r),s.push(this.yield(e,n,r))),s.push(this.nextFrameFunc()),await Promise.all(s)}async onEpochBegin(e,n){this.currentEpoch=e,this.epochBegin!=null&&(await Eu(n),await this.epochBegin(e,n))}async onEpochEnd(e,n){const r=[];this.epochEnd!=null&&(await Eu(n),r.push(this.epochEnd(e,n))),this.yieldEvery==="epoch"&&r.push(this.nextFrameFunc()),await Promise.all(r)}async onBatchBegin(e,n){this.batchBegin!=null&&(await Eu(n),await this.batchBegin(e,n))}async onBatchEnd(e,n){const r=[];this.batchEnd!=null&&(await Eu(n),r.push(this.batchEnd(e,n))),this.yieldEvery==="batch"?r.push(this.nextFrameFunc()):JC(this.yieldEvery)&&r.push(this.maybeWait(this.currentEpoch,e,n)),await Promise.all(r)}async onTrainBegin(e){this.trainBegin!=null&&(await Eu(e),await this.trainBegin(e))}async onTrainEnd(e){this.trainEnd!=null&&(await Eu(e),await this.trainEnd(e))}}function lH(t,e){return t==null&&(t={}),t instanceof Ng?[t]:Array.isArray(t)&&t[0]instanceof Ng?t:rn(t).map(r=>new K3e(r,e))}class Yi{constructor(){}static registerCallbackConstructor(e,n){F(e>=0&&Number.isInteger(e),()=>`Verbosity level is expected to be an integer >= 0, but got ${e}`),Yi.checkForDuplicate(n),Yi.constructors[e]==null&&(Yi.constructors[e]=[]),Yi.constructors[e].push(n)}static checkForDuplicate(e){for(const n in Yi.constructors)Yi.constructors[+n].forEach(s=>{if(s===e)throw new ee("Duplicate callback constructor.")})}static clear(){Yi.constructors={}}static createCallbacks(e){const n=[];for(const r in Yi.constructors){const s=+r;e>=s&&n.push(...Yi.constructors[s])}return n.map(r=>new r)}}Yi.constructors={};function cH(t,e,n,r,s,i,o,a,l){const c=new q3e,u=[new W3e,...Yi.createCallbacks(e)];t!=null&&u.push(...t),u.push(c);const h=new G3e(u);return h.setParams({epochs:n,initialEpoch:r,samples:s,steps:i,batchSize:o,verbose:e,doValidation:a,metrics:l}),{callbackList:h,history:c}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function kl(t,e={},n=!1){return py(t,so.getMap().classNameMap,e,"layer",n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function G1(t,e){return ue(()=>{t.dtype!=="float32"&&(t=Me(t,"float32"));const n=Xe(yy(t),e,!0),r=Jw(n.shape,xr()),s=us(nu(n,r));return Ye(t,s)})}function c2(t,e){return ue(()=>cr(yy(et(e,t)),-1))}function _3(t,e){return ue(()=>cr(ws(et(e,t)),-1))}function S3(t,e){return ue(()=>{const n=et(t,e),r=Oi(ws(t),xr(),Number.MAX_VALUE),s=ws(Ye(n,r));return re(100,cr(s,-1))})}function Z3e(t,e){return ue(()=>{const n=Oi(e,xr(),Number.MAX_VALUE),r=Ma(_e(1,n)),s=Oi(t,xr(),Number.MAX_VALUE),i=Ma(_e(1,s));return cr(yy(et(r,i)),-1)})}function X3e(t,e){return ue(()=>{const n=nu(0,et(1,re(t,e)));return cr(yy(n),-1)})}function Y3e(t,e){return ue(()=>{const n=nu(0,et(1,re(t,e)));return cr(n,-1)})}function J3e(t,e){return ue(()=>{const n=Xe(re(t,e),-1),r=jo(re(et(1,t),e),-1);return nu(0,_e(1,et(r,n)))})}function Q3e(t,e){return ue(()=>{const n=Math.log(2),r=et(e,t),s=et(_e(r,ly(re(-2,r))),n);return cr(s,-1)})}function Cg(t,e,n=!1){return ue(()=>{if(n)e=AI(e);else{const r=Xe(e,e.shape.length-1,!0);e=Ye(e,r)}return e=Oi(e,xr(),1-xr()),Qn(Xe(re(Me(t,"float32"),Ma(e)),e.shape.length-1))})}function W1(t,e,n=!1){return ue(()=>{const r=Me(t2(v3e(t)),"int32");e=Oi(e,xr(),1-xr());const s=e.shape,i=ie(D7(r,s[s.length-1]),s);return Cg(i,e,n)})}function eAe(t,e){if(!Zt(t.shape,e.shape))throw new ee(`logits and labels must have the same shape, but got shapes ${JSON.stringify(t.shape)} and ${JSON.stringify(e.shape)}`);return ue(()=>{const n=Od(e),r=Qn(ws(e));return _e(et(n,re(e,t)),I7(La(r)))})}function u2(t,e){return ue(()=>{let n;return n=Oi(e,xr(),1-xr()),n=Ma(Ye(n,et(1,n))),cr(eAe(t,n),-1)})}function tAe(t,e){return ue(()=>{const n=Oi(t,xr(),1),r=Oi(e,xr(),1);return Xe(re(t,Ma(Ye(n,r))),-1)})}function nAe(t,e){return ue(()=>{const n=Ma(_e(xr(),e));return cr(et(e,re(t,n)),-1)})}function uH(t,e){return ue(()=>{const n=G1(t,-1),r=G1(e,-1),s=re(n,r);return Qn(Xe(s,-1))})}const q1={meanSquaredError:c2,meanAbsoluteError:_3,meanAbsolutePercentageError:S3,meanSquaredLogarithmicError:Z3e,squaredHinge:X3e,hinge:Y3e,categoricalHinge:J3e,logcosh:Q3e,categoricalCrossentropy:Cg,sparseCategoricalCrossentropy:W1,binaryCrossentropy:u2,kullbackLeiblerDivergence:tAe,poisson:nAe,cosineProximity:uH};function Rk(t){if(typeof t=="string"){if(t in q1)return q1[t];let e=`Unknown loss ${t}`;throw t.toLowerCase().includes("softmaxcrossentropy")&&(e=`Unknown loss ${t}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new ee(e)}else return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function dH(t,e){return ue(()=>{const n=re(.5,yo(e)),r=Ia(Li(e,n),t.dtype);return cr(Oa(t,r),-1)})}function hH(t,e){return ue(()=>Ia(Oa(vg(t,-1),vg(e,-1)),"float32"))}function rAe(t,e){return ue(()=>Me(Xe(Al(Oa(t,1),Oa(e,1))),"float32"))}function sAe(t,e){return ue(()=>Me(Xe(Al(Oa(t,0),Oa(e,1))),"float32"))}function iAe(t,e){return ue(()=>{const n=rAe(t,e),r=sAe(t,e),s=_e(n,r);return Me($s(Li(s,0),Ye(n,s),0),"float32")})}function oAe(t,e){return u2(t,e)}function aAe(t,e){return t.rank===e.rank&&(t=uy(t,[t.rank-1])),e=vg(e,-1),e.dtype!==t.dtype&&(e=Me(e,t.dtype)),Me(Oa(t,e),"float32")}const lAe=c2,cAe=c2,uAe=_3,dAe=_3,hAe=S3,fAe=S3,fH=Cg,mAe=uH,mH=W1,K1={binaryAccuracy:dH,categoricalAccuracy:hH,precision:iAe,categoricalCrossentropy:fH,sparseCategoricalCrossentropy:mH,mse:lAe,MSE:cAe,mae:uAe,MAE:dAe,mape:hAe,MAPE:fAe,cosine:mAe};function pAe(t){if(typeof t=="string"&&t in K1)return K1[t];if(typeof t!="string"&&t!=null)return t;throw new ee(`Unknown metric ${t}`)}function qb(t){if(ma(t!==null,`Unknown LossOrMetricFn ${t}`),typeof t=="string")return t;{let e;for(const n of Object.keys(q1))if(q1[n]===t){e=n;break}if(e!==void 0)return e;for(const n of Object.keys(K1))if(K1[n]===t){e=n;break}return e!==void 0?e:t.name}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function gAe(t){const e={Adagrad:()=>lh.adagrad(.01),Adadelta:()=>lh.adadelta(1,.95,xr()),Adam:()=>lh.adam(.001,.9,.999,xr()),Adamax:()=>lh.adamax(.002,.9,.999,xr(),0),RMSProp:()=>lh.rmsprop(.001,.9,0,xr()),SGD:()=>lh.sgd(.01)};if(e.adagrad=e.Adagrad,e.adadelta=e.Adadelta,e.adam=e.Adam,e.adamax=e.Adamax,e.rmsprop=e.RMSProp,e.sgd=e.SGD,t in e)return e[t]();throw new ee(`Unknown Optimizer ${t}`)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const EM=1*1024*1024;function kM(t,e,n=!1){if(t==null||typeof t!="object"||Object.getPrototypeOf(t)!==Object.prototype||!C_(t))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){const r=JSON.stringify(t);r.length>EM&&console.warn(`User-defined metadata of model "${e}" is too large in size (length=${r.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= ${EM}.`)}}function C_(t){if(t===null)return!0;if(typeof t=="object")if(Object.getPrototypeOf(t)===Object.prototype){const e=Object.keys(t);for(const n of e)if(typeof n!="string"||!C_(t[n]))return!1;return!0}else if(Array.isArray(t)){for(const e of t)if(!C_(e))return!1;return!0}else return!1;else{const e=typeof t;return e==="string"||e==="number"||e==="boolean"}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function yAe(t,e,n,r=console.log){const s=vAe(t),i=["Layer (type)","Input Shape","Output shape","Param #"];s?(e=e||90,n=n||[.32,.61,.89,1]):(e=e||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map(u=>Math.floor(e*u)));let o;if(!s){i.push("Receives inputs"),o=[];for(const u in t.nodesByDepth)o.push(...t.nodesByDepth[u])}r("_".repeat(e)),Z1(i,n,r),r("=".repeat(e));const a=t.layers;for(let u=0;u<a.length;++u)s?xAe(a[u],n,r):wAe(a[u],n,o,r),r((u===a.length-1?"=":"_").repeat(e));t.checkTrainableWeightsConsistency();const l=bAe(t),c=j1(t.nonTrainableWeights);r(`Total params: ${l+c}`),r(`Trainable params: ${l}`),r(`Non-trainable params: ${c}`),r("_".repeat(e))}function bAe(t){let e;return t.collectedTrainableWeights!=null?e=j1(t.collectedTrainableWeights):e=j1(t.trainableWeights),e}function vAe(t){let e=!0;const n=[],r=[];for(const s in t.nodesByDepth)n.push(t.nodesByDepth[s]);for(const s of n){if(s.length>1||s.length===1&&s[0].inboundLayers.length>1){e=!1;break}r.push(...s)}if(e)for(const s of t.layers){let i=!1;for(const o of s.inboundNodes)if(r.indexOf(o)!==-1)if(i){e=!1;break}else i=!0;if(!e)break}return e}function Z1(t,e,n=console.log){let r="";for(let s=0;s<t.length;++s)s>0&&(r=r.slice(0,r.length-1)+" "),r+=t[s],r=r.slice(0,e[s]),r+=" ".repeat(e[s]-r.length);n(r)}function xAe(t,e,n){let r,s;try{s=t.inboundNodes.map(l=>JSON.stringify(l.inputShapes)).join(",")}catch{s="multiple"}try{r=JSON.stringify(t.outputShape)}catch{r="multiple"}const i=t.name,o=t.getClassName(),a=[`${i} (${o})`,s,r,t.countParams().toString()];Z1(a,e,n)}function wAe(t,e,n,r){let s,i;try{i=t.inboundNodes.map(h=>JSON.stringify(h.inputShapes)).join(",")}catch{i="multiple"}try{s=JSON.stringify(t.outputShape)}catch{s="multiple"}const o=[];for(const h of t.inboundNodes)if(!(n!=null&&n.length>0&&n.indexOf(h)===-1))for(let m=0;m<h.inboundLayers.length;++m){const p=h.inboundLayers[m].name,y=h.nodeIndices[m],v=h.tensorIndices[m];o.push(`${p}[${y}][${v}]`)}const a=t.name,l=t.getClassName(),c=o.length===0?"":o[0],u=[`${a} (${l})`,i,s,t.countParams().toString(),c];Z1(u,e,r);for(let h=1;h<o.length;++h)Z1(["","","","",o[h]],e,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function pH(t,e,n){return(t==="inboundNodes"||t==="outputLayers"||t==="inputLayers")&&e===0&&typeof n=="string"}function __(t,e){if(t===null)return null;if(typeof t=="string")return Ru(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){const n=[],r=t.length;for(let s=0;s<r;++s){const i=t[s];pH(e,s,i)?n.push(i):n.push(__(i,e))}return n}else{const n={};for(const r of Object.keys(t)){const s=t[r];if(r==="name"&&typeof s=="string")n[r]=s;else{const i=Ru(r);n[i]=__(s,i)}}return n}}function S_(t,e){if(t==null)return null;if(typeof t=="string")return al(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){const n=[],r=t.length;for(let s=0;s<r;++s){const i=t[s];pH(e,s,i)?n.push(i):n.push(S_(i,e))}return n}else{const n={};for(const r of Object.keys(t)){const s=t[r],i=al(r);(r==="name"||r==="className")&&typeof s=="string"?n[i]=s:n[i]=S_(s,r)}return n}}/** @license See the LICENSE file. */const gH="4.22.0";/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const EAe=t=>{const e=Object.keys(t);if(e.length===0)return!1;const n=e[0].split("/");return!isNaN(parseInt(n[n.length-1],10))};class Do extends wt{constructor(e){if(super({}),this.containerNodes=new Set,this.name=e.name,this.name==null){const w=this.getClassName().toLowerCase();this.name=o2(w)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(e.inputs)?this.inputs=e.inputs.slice():this.inputs=[e.inputs],Array.isArray(e.outputs)?this.outputs=e.outputs.slice():this.outputs=[e.outputs],Pc(this.inputs).length!==this.inputs.length)throw new ee(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map(w=>w.name)}`);Pc(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map(w=>w.name)}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const w of this.outputs){const E=w.sourceLayer,N=w.nodeIndex,C=w.tensorIndex;this.outputLayers.push(E),this.outputLayersNodeIndices.push(N),this.outputLayersTensorIndices.push(C)}for(const w of this.inputs){const E=w.sourceLayer,N=w.nodeIndex,C=w.tensorIndex;ma(N===0,"input layer has >1 nodes"),ma(C===0,"input layer has >1 tensors"),this.inputLayers.push(E),this.inputLayersNodeIndices.push(N),this.inputLayersTensorIndices.push(C)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let w=0;w<this.inputLayers.length;w++){const E=this.inputLayers[w];if(!(E instanceof vy))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${e.inputs}. Input ${w} (0-based) originates from layer type ${E.getClassName()}.`);this.inputNames.push(E.name),this.feedInputShapes.push(E.batchInputShape),this.feedInputNames.push(E.name)}for(const w of this.outputLayers)this.outputNames.push(w.name);this.internalInputShapes=this.inputs.map(w=>w.shape),this.internalOutputShapes=this.outputs.map(w=>w.shape);const n={},r={},s={},i={},o={},a=[],l=(w,E,N,C,S,T)=>{(C==null||S==null||T==null)&&(C=w.sourceLayer,S=w.nodeIndex,T=w.tensorIndex);const I=C.inboundNodes[S];if(N.indexOf(I)!==-1)throw new co(`The tensor ${w.name} at layer "${C.name}" is part of a cycle.`);if(E.indexOf(I)!==-1)return;this.containerNodes.add(Do.nodeKey(C,S)),C.id in o||(o[C.id]=Object.keys(o).length),N.indexOf(I)===-1&&N.push(I);const P=I.inboundLayers.length;for(let R=0;R<P;R++){const D=I.inputTensors[R],B=I.inboundLayers[R],Z=I.nodeIndices[R],z=I.tensorIndices[R];l(D,E,N,B,Z,z)}for(E.push(I);N.indexOf(I)>=0;)N.splice(N.indexOf(I),1);a.push(I)},c=[],u=[];for(const w of this.outputs)l(w,c,u);const h=a.slice().reverse();for(const w of h){r[w.id]=w,w.id in n||(n[w.id]=0);let E=n[w.id];const N=s[w.outboundLayer.id]==null?0:s[w.outboundLayer.id];E=Math.max(E,N),s[w.outboundLayer.id]=E,i[w.outboundLayer.id]=w.outboundLayer,n[w.id]=E;for(let C=0;C<w.inboundLayers.length;C++){const S=w.inboundLayers[C],T=w.nodeIndices[C],I=S.inboundNodes[T],P=n[I.id]==null?0:n[I.id];n[I.id]=Math.max(E+1,P),r[I.id]=I}}const m={};for(const w in n){const E=n[w];E in m||(m[E]=[]),m[E].push(r[w])}const p={};for(const w in s){const E=s[w];E in p||(p[E]=[]),p[E].push(i[w])}let y=Object.keys(p).map(w=>parseInt(w,10)).sort(Hb);this.layers=[];for(const w of y){const E=p[w];E.sort((N,C)=>{const S=o[N.id],T=o[C.id];return S<T?-1:S>T?1:0});for(const N of E)N instanceof Do&&this.internalContainerRefs.push(N),this.layers.push(N)}this.layersByDepth=p,y=Object.keys(m).map(w=>parseInt(w,10)).sort(Hb);const v=this.inputs.slice(),x=[];for(const w of y)for(const E of m[w]){const N=E.outboundLayer;if(N!=null){for(const C of E.inputTensors)if(v.indexOf(C)===-1)throw new co(`Graph disconnected: cannot obtain value for tensor ${C} at layer "${N.name}". The following previous layers were accessed without issue: ${x}`);for(const C of E.outputTensors)v.push(C);x.push(N.name)}}this.nodesByDepth=m;const b=this.layers.map(w=>w.name);for(const w of b){const E=b.filter(N=>N===w).length;if(E!==1)throw new co(`The name "${w}" is used ${E} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(b))}this.outboundNodes=[],this.inboundNodes=[],new l2({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(w=>null),outputMasks:this.outputs.map(w=>null),inputShapes:this.inputs.map(w=>w.shape),outputShapes:this.outputs.map(w=>w.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(this._refCount===0)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();const e={refCountAfterDispose:null,numDisposedVariables:0};if(--this._refCount===0){for(const n of this.layers)e.numDisposedVariables+=n.dispose().numDisposedVariables;for(const n of this.internalContainerRefs)e.numDisposedVariables+=n.dispose().numDisposedVariables}return e.refCountAfterDispose=this._refCount,e}get trainable(){return this.trainable_}set trainable(e){this.layers.forEach(n=>{n._trainableWeights.forEach(r=>r.trainable=e)}),this.trainable_=e}get trainableWeights(){if(this._trainableWeights.length>0)throw new ee("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let e=[];for(const n of this.layers)e=e.concat(n.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const n of this.layers)e.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const r of this.layers)n.push(...r.trainableWeights);return n.concat(e)}return e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(e,n=!0){const r={};let s=0;const i=EAe(e);i&&this.parseWeights(e);for(const a of this.layers)for(const[l,c]of a.weights.entries()){const u=i?`${c.name.split("/").slice(0,-1).join("/")+"/"}${l}`:c.originalName;if(r[u]!=null)throw new ee(`Duplicate weight name: ${u}`);r[u]=c,s++}const o=[];for(const a in e){let l=a;if(r[a]==null){const c=a.split("/");l=c.slice(0,-2).concat([c[c.length-1]]).join("/")}if(r[l]!=null)o.push([r[l],e[a]]);else if(n)throw new ee(`Provided weight data has no target variable: ${a}`);delete r[l]}if(n){const a=[];for(const l in r)a.push(l);if(a.length>0)throw new ee(`${a.length} of ${s} weights are not set: ${a}`)}N3(o)}parseWeights(e){for(const n in Object.keys(e)){const r=n.split("/"),s=["vars","layer_checkpoint_dependencies"],i=r.map(o=>o.startsWith("_")?o.slice(1):o).filter(o=>!s.includes(o)).join("/");i!==n&&(e[i]=e[n],delete e[n])}}updatedConfig(){const e=this.getConfig(),n={};return n.className=this.getClassName(),n.config=e,n.kerasVersion=`tfjs-layers ${gH}`,n.backend="TensorFlow.js",n}toJSON(e,n=!0){const r=S_(this.updatedConfig());return n?JSON.stringify(r):r}call(e,n){return ue(()=>{e=rn(e);const r=new vc;for(let s=0;s<this.inputs.length;++s)r.add(this.inputs[s],e[s]);return cp(this.outputs,r,n)})}computeMask(e,n){return ue(()=>{e=rn(e);let r;return n==null?r=yd(null,e.length):r=rn(n),this.runInternalGraph(e,r)[1]})}computeOutputShape(e){const n=V1(e);if(n.length!==this.inputLayers.length)throw new ee(`Invalid inputShape argument ${e}: model has ${this.inputLayers.length} tensor inputs.`);const r={};for(let a=0;a<n.length;a++){const l=this.inputLayers[a],c=n[a],u=l.name+"_0_0";r[u]=c}const s=Object.keys(this.nodesByDepth).map(a=>parseInt(a,10)).sort(Hb);if(s.length>1)for(const a of s){const l=this.nodesByDepth[a];for(const c of l){const u=c.outboundLayer;if(this.inputLayers.map(v=>v.id).indexOf(u.id)!==-1)continue;const h=[];for(let v=0;v<c.inboundLayers.length;v++){const x=c.inboundLayers[v],b=c.nodeIndices[v],w=c.tensorIndices[v],E=`${x.name}_${b}_${w}`,N=r[E];h.push(N)}const m=u.computeOutputShape(zs(h)),p=V1(m),y=u.inboundNodes.indexOf(c);for(let v=0;v<p.length;v++){const x=`${u.name}_${y}_${v}`;r[x]=p[v]}}}const i=[],o=[];for(let a=0;a<this.outputLayers.length;a++){const l=this.outputLayers[a],c=this.outputLayersNodeIndices[a],u=this.outputLayersTensorIndices[a],h=`${l.name}_${c}_${u}`;o.push(h)}for(let a=0;a<o.length;a++){const l=o[a];ma(l in r),i.push(r[l])}return zs(i)}runInternalGraph(e,n){n==null&&(n=yd(null,e.length));const r={};for(let l=0;l<this.inputs.length;++l){const c=this.inputs[l],u=e[l],h=n[l];r[c.id]=[u,h]}const s=Object.keys(this.nodesByDepth).map(l=>parseInt(l,10)).sort(Hb);for(const l of s){const c=this.nodesByDepth[l];for(const u of c){const h=u.outboundLayer,m=u.inputTensors,p=u.outputTensors,y=new Array;for(const v of m)v.id in r&&y.push(r[v.id]);if(y.length===m.length){let v={},x,b,w,E;if(u.callArgs!=null&&(v=u.callArgs),y.length===1){const[N,C]=y[0];v.mask==null&&(v.mask=C),w=rn(h.call(N,v)),E=rn(h.computeMask(N,C)),x=[N],b=[C]}else x=y.map(N=>N[0]),b=y.map(N=>N[1]),v.mask==null&&(v.mask=b),w=rn(h.call(x,v)),E=rn(h.computeMask(x,b));if(h.activityRegularizer)throw new ht("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let N=0;N<p.length;++N){const C=p[N],S=w[N],T=E[N];r[C.id]=[S,T]}}}}const i=[],o=[],a=[];for(const l of this.outputs){ma(l.id in r,`Could not compute output ${l.name} : ${l.id}`);const[c,u]=r[l.id];a.push(c.shape),i.push(c),o.push(u)}return[i,o,a]}buildNodeConversionMap(e){const n={};let r;for(const s of this.layers){r=s instanceof Do?1:0;for(let i=0;i<s.inboundNodes.length;i++){const o=Do.nodeKey(s,i);this.containerNodes.has(o)&&(n[o]=r,r+=1)}}return n}getLayer(e,n){if(n!=null)return this.findLayer(n);if(e==null)throw new ee("Provide either a layer name or layer index");if(typeof e=="number")return this.findLayer(e);for(const r of this.layers)if(r.name===e)return r;throw new ee(`No such layer: ${e}`)}findLayer(e){if(this.layers.length<=e)throw new ee(`Was asked to retrieve layer at index ${e}, but model only has ${this.layers.length} layer(s).`);return this.layers[e]}calculateLosses(){return ue(()=>{const e=[];for(const n of this.layers)for(let r=0;r<n.inboundNodes.length;++r){const s=Do.nodeKey(n,r);this.containerNodes.has(s)&&e.push(...n.calculateLosses())}return e})}getConfig(){const e={name:this.name},n=this.buildNodeConversionMap(this.layers),r=[];for(const o of this.layers){const a=o.getClassName(),l=o.getConfig(),c=[];for(let h=0;h<o.inboundNodes.length;h++){const m=o.inboundNodes[h],p=Do.nodeKey(o,h);let y={};if(this.containerNodes.has(p)){if(m.callArgs)try{JSON.stringify(m.callArgs),y=m.callArgs}catch{console.warn(`Layer ${o.name} was passed non-serializable keyword arguments: ${m.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),y={}}if(m.inboundLayers.length>0){const v=[];for(let x=0;x<m.inboundLayers.length;x++){const b=m.inboundLayers[x],w=m.nodeIndices[x],E=m.tensorIndices[x],N=Do.nodeKey(b,w);let C=n[N];C==null&&(C=0),v.push([b.name,C,E,y])}c.push(v)}}}const u={};u.name=o.name,u.className=a,u.config=l,u.inboundNodes=c,r.push(u)}e.layers=r;const s=[];for(let o=0;o<this.inputLayers.length;o++){const a=this.inputLayers[o],l=this.inputLayersNodeIndices[o],c=Do.nodeKey(a,l);if(!this.containerNodes.has(c))continue;let u=n[c];u==null&&(u=0);const h=this.inputLayersTensorIndices[o];s.push([a.name,u,h])}e.inputLayers=s;const i=[];for(let o=0;o<this.outputLayers.length;o++){const a=this.outputLayers[o],l=this.outputLayersNodeIndices[o],c=Do.nodeKey(a,l);if(!this.containerNodes.has(c))continue;let u=n[c];u==null&&(u=0);const h=this.outputLayersTensorIndices[o];i.push([a.name,u,h])}return e.outputLayers=i,e}static fromConfig(e,n,r={},s=!1){const i={},o={};function a(x,b){x.name in o?o[x.name].push(b):o[x.name]=[b]}function l(x,b){const w=[];let E;for(const N of b){const C=N[0],S=N[1],T=N[2];if(E=N[3]==null?{}:N[3],!(C in i)){a(x,b);return}const I=i[C];if(I.inboundNodes.length<=S){a(x,b);return}const P=I.inboundNodes[S];w.push(P.outputTensors[T])}w.length>0&&x.apply(zs(w),E)}function c(x){const b=x.name,w=kl(x,n.customObjects!=null?n.customObjects:{});w.setFastWeightInitDuringBuild(s),i[b]=w,x.inboundNodes.forEach(N=>{if(!(N instanceof Array))throw new ee(`Corrupted configuration, expected array for nodeData: ${N}`);a(w,N)})}const u=n.name,h=n.layers;for(const x of h)c(x);for(;!o3e(o);)for(const x of h){const b=i[x.name];if(b.name in o){const w=o[b.name];delete o[b.name];for(const E of w)l(b,E)}}const m=[],p=[],y=n.inputLayers;for(const x of y){const b=x[0],w=x[1],E=x[2];ma(b in i);const C=i[b].inboundNodes[w].outputTensors;m.push(C[E])}const v=n.outputLayers;for(const x of v){const b=x[0],w=x[1],E=x[2];ma(b in i);const C=i[b].inboundNodes[w].outputTensors;p.push(C[E])}return new e({inputs:m,outputs:p,name:u})}get stateful(){if(this._stateful)throw new ee("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const e of this.layers)if(e.stateful)return!0;return!1}resetStates(){ue(()=>{this.layers.forEach(e=>{e.stateful&&e.resetStates()})})}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function kAe(t,e,n){const r=e.length;if(t==null||Array.isArray(t)&&t.length===0)return e.map(s=>null);if(r===1)return Array.isArray(t)&&t.length===1?t:typeof t=="object"&&e[0]in t?[t[e[0]]]:[t];if(Array.isArray(t)){if(t.length!==r)throw new Error(`Provided ${n} is an array of ${t.length} element(s), but the model has ${r} outputs. Make sure a set of weights is provided for each model output.`);return t}else if(typeof t=="object"&&Object.keys(t).length>0&&typeof t[Object.keys(t)[0]]=="object"){const s=[];return e.forEach(i=>{i in t?s.push(t[i]):s.push(null)}),s}else throw new Error(`The model has multiple (${r}) outputs, so ${n} must be either an array with ${r} elements or an object with ${e} keys. Provided ${n} not understood: ${JSON.stringify(t)}`)}function yH(t,e){return kAe(t,e,"classWeight")}async function bH(t,e,n,r){if(e!=null||r!=null)throw new Error("Support sampleWeight is not implemented yet");if(n!=null){const s=ue(()=>{if(t.shape.length===1)return Ju(t);if(t.shape.length===2){if(t.shape[1]>1)return vg(t,1);if(t.shape[1]===1)return ie(t,[t.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${t.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}else throw new Error(`Unexpected rank of target (y) tensor (${t.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),i=Array.from(await s.data());_t(s);const o=[];return i.forEach(a=>{if(n[a]==null)throw new Error(`classWeight must contain all classes in the training data. The class ${a} exists in the data but not in classWeight`);o.push(n[a])}),ri(o,"float32")}else return null}function NAe(t,e){return re(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const CAe=32;function vH(t,e){let n,r;const s=e;n=s.xs,r=s.ys,F(n!=null&&r!=null,()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${e}`);const i=NM("input",t.inputNames,n),o=NM("output",t.outputNames,r),a=i[0].shape[0];F(i.length===t.inputs.length,()=>`LayersModel has ${t.inputs.length} inputs, but the dataset provides ${i.length} inputs.  (Expected input keys: ${JSON.stringify(t.inputNames)})`),F(o.length===t.outputs.length,()=>`LayersModel has ${t.outputs.length} outputs, but the dataset provides ${o.length} outputs.  (Expected output keys: ${JSON.stringify(t.outputNames)})`);for(let l=0;l<i.length;l++)F(i[l].shape[0]===a,()=>`Batch size mismatch: input ${t.inputNames[l]} has ${i[l].shape[0]}; expected  ${a} based on input ${t.inputNames[0]}.`);for(let l=0;l<o.length;l++)F(o[l].shape[0]===a,()=>`Batch size mismatch: output ${t.outputNames[l]} has ${o[l].shape[0]}; expected  ${a} based on input ${t.inputNames[0]}.`);return{xs:i,ys:o}}function NM(t,e,n){if(n instanceof gr)return[n];if(Array.isArray(n))return F(n.length===e.length,()=>`Received an array of ${n.length} Tensors, but expected ${e.length} to match the ${t} keys ${e}.`),n;{const r=[];for(const s of e){if(n[s]==null)throw new ee(`The feature data generated by the dataset lacks the required ${t} key '${s}'.`);r.push(n[s])}return r}}function _Ae(t){if(t.length===3)throw new ht("Validation with sample weights is not implemented yet.");return{xs:t[0],ys:t[1]}}async function SAe(t,e,n){const r=n.batchesPerEpoch!=null;if(F(t.optimizer!=null,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),F(n!=null,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),F(n.epochs!=null&&n.epochs>0&&Number.isInteger(n.epochs),()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${n.epochs}`),F(!r||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${n.batchesPerEpoch}`),F(n.validationSplit==null,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),t.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");t.isTraining=!0;try{const s=n.validationData!=null;let i,o;if(s)if(CM(n.validationData))F(n.validationBatches==null||n.validationBatches>0&&Number.isInteger(n.validationBatches),()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${n.validationBatches}`);else{const x=_Ae(n.validationData);i=x.xs,o=x.ys}const a=t.makeTrainFunction(),l=t.getDedupedMetricsNames();let c;s?c=l.slice().concat(l.map(x=>"val_"+x)):c=l.slice();const u=lH(n.callbacks,n.yieldEvery),h=n.verbose==null?1:n.verbose,{callbackList:m,history:p}=cH(u,h,n.epochs,null,null,TAe(e,n),null,s,c);m.setModel(t),t.history=p,await m.onTrainBegin(),t.stopTraining_=!1;let y=n.initialEpoch==null?0:n.initialEpoch,v=await e.iterator();for(;y<n.epochs;){const x={};await m.onEpochBegin(y);let b=0,w=0;for(r||(v=await e.iterator());!r||b<n.batchesPerEpoch;){const E=await v.next();if(r&&E.done){console.warn(`You provided \`batchesPerEpoch\` as ${n.batchesPerEpoch}, but your dataset iterator ran out of data after ${b} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, ${n.batchesPerEpoch*n.epochs} batches). You may need to use the repeat() function when building your dataset.`);break}if(E.value!=null){const{xs:N,ys:C}=vH(t,E.value),S={};S.batch=w,S.size=N[0].shape[0],await m.onBatchBegin(w,S);const T=[];if(n.classWeight!=null){const R=yH(n.classWeight,t.outputNames);for(let D=0;D<R.length;++D)T.push(await bH(C[D],null,R[D]))}const I=N.concat(C).concat(T),P=a(I);_t(I);for(let R=0;R<l.length;++R){const D=l[R],B=P[R];S[D]=B,Ta(B)}await m.onBatchEnd(w,S),aH(S),w++,b++}if(r?b>=n.batchesPerEpoch:E.done){if(s){let N;CM(n.validationData)?N=rn(await t.evaluateDataset(n.validationData,{batches:n.validationBatches})):N=rn(t.evaluate(i,o,{batchSize:n.validationBatchSize==null?CAe:n.validationBatchSize,verbose:0}));for(let C=0;C<t.metricsNames.length;++C)x[`val_${t.metricsNames[C]}`]=N[C]}break}if(t.stopTraining_)break}if(await m.onEpochEnd(y,x),y++,t.stopTraining_)break}return await m.onTrainEnd(),await t.history.syncData(),t.history}finally{t.isTraining=!1}}function TAe(t,e){let n=null;return e.batchesPerEpoch!=null?n=e.batchesPerEpoch:Number.isFinite(t.size)&&(n=t.size),n}function CM(t){return typeof t.iterator=="function"}function $Ae(t){return typeof t.next=="function"}async function IAe(t,e,n){n=n||{};const r=n.batches!=null,s=t.testFunction;let i=[];if(n.verbose>0)throw new ht("Verbose mode is not implemented yet.");F(!r||n.batches>0&&Number.isInteger(n.batches),()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(n.batches)}`);const o=$Ae(e)?e:await e.iterator();let a=0,l=0;for(;!r||l<n.batches;){const c=await o.next();if(i=ue(()=>{if(c.value){const{xs:u,ys:h}=vH(t,c.value),m=u.concat(h),p=ue(()=>s(m));if(_t(m),l===0)for(let v=0;v<p.length;++v)i.push(Kt(0));const y=m[0].shape[0];for(let v=0;v<p.length;++v){const x=p[v],b=i[v];i[v]=ue(()=>_e(i[v],re(y,x))),l>0&&_t(b)}_t(p),a+=y,++l}return i}),c.done){r&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${n.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let c=0;c<i.length;++c){const u=i[c];i[c]=Ye(i[c],a),_t(u)}return zs(i)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Pk(t){F(t>0&&Number.isInteger(t),()=>`batchSize is required to be a positive integer, but got ${t}`)}function Xm(t,e,n){return t==null?[null]:Array.isArray(t)?t.map(r=>ed(r,e,n-e)):ed(t,e,n-e)}function T_(t,e){return ue(()=>t==null?null:Array.isArray(t)?t.map(n=>T_(n,e)):qU(t,e.dtype==="int32"?e:Me(e,"int32")))}function Dk(t,e){const n=[];let r=0,s=null;for(;r<t;)s=r+e,s>=t&&(s=t),n.push([r,s]),r=s;return n}function xH(t){const e=[];t instanceof gr&&(t=[t]);for(let n=0;n<t.length;++n){const r=t[n];if(r.rank===1)e.push(gy(r,1));else{if(r.rank===0)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");e.push(r)}}return e}function Io(t,e){if(t==null)return;const n=[];if(e instanceof gr)n.push(e.id);else if(Array.isArray(e))e.forEach(s=>n.push(s.id));else if(e!=null)for(const s in e){const i=e[s];n.push(i.id)}const r=[];if(t instanceof gr)n.indexOf(t.id)===-1&&r.push(t);else if(Array.isArray(t))t.forEach(s=>{n.indexOf(s.id)===-1&&r.push(s)});else if(t!=null)for(const s in t){const i=t[s];n.indexOf(i.id)===-1&&r.push(i)}r.forEach(s=>{s.isDisposed||s.dispose()})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function AAe(t){return t instanceof gr}function $_(t){return Array.isArray(t)}function _M(t){return!AAe(t)&&!$_(t)}function SM(t,e,n,r=!0,s=""){if(e==null||e.length===0){if(t!=null){let o=!1;if($_(t)&&t.length>0)o=!0;else if(_M(t)){for(const a in t)if(t.hasOwnProperty(a)){o=!0;break}}else o=!0;if(o)throw new ee(`Error when checking model ${s} expected no data, but got ${t}`)}return[]}if(t==null)return e.map(o=>null);let i;if(_M(t)){t=t,i=[];for(const o of e){if(t[o]==null)throw new ee(`No data provided for "${o}". Need data for each key in: ${e}`);i.push(t[o])}}else if($_(t)){if(t=t,t.length!==e.length)throw new ee(`Error when checking model ${s}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${e.length} Tensor(s), but instead got the following list of Tensor(s): ${t}`);i=t}else{if(t=t,e.length>1)throw new ee(`The model ${s} expects ${e.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${t.shape}`);i=[t]}if(i=xH(i),n!=null)for(let o=0;o<e.length;++o){if(n[o]==null)continue;const a=i[o];if(a.shape.length!==n[o].length)throw new ee(`Error when checking ${s}: expected ${e[o]} to have ${n[o].length} dimension(s). but got array with shape ${a.shape}`);for(let l=0;l<n[o].length;++l){if(l===0&&!r)continue;const c=a.shape[l],u=n[o][l];if(u!=null&&u>=0&&c!==u)throw new ee(`${s} expected a batch of elements where each example has shape [${n[o].slice(1,n[o].length)}] (i.e.,tensor shape [*,${n[o].slice(1,n[o].length)}]) but the ${s} received an input with ${a.shape[0]} examples, each with shape [${a.shape.slice(1,a.shape.length)}] (tensor shape [${a.shape}])`)}}return i}function RAe(t,e,n){const r=Pc(t.map(i=>i.shape[0]));r.sort();const s=Pc(e.map(i=>i.shape[0]));if(s.sort(),r.length>1)throw new ee(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(t.map(i=>i.shape))}`);if(s.length>1)throw new ee(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify(e.map(i=>i.shape))}`);if(r.length>0&&s.length>0&&!Zt(r,s))throw new ee(`Input Tensors should have the same number of samples as target Tensors. Found ${r[0]} input sample(s) and ${s[0]} target sample(s).`)}function PAe(t,e,n){const r=[c2,u2,Cg];for(let s=0;s<t.length;++s){const i=t[s],o=e[s],a=n[s];if(o!=null){if(o===Cg&&i.shape[i.shape.length-1]===1)throw new ee(`You are passing a target array of shape ${i.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(r.indexOf(o)!==-1){const l=i.shape.slice(1),c=a.slice(1);for(let u=0;u<l.length;++u){const h=l[u],m=c[u];if(m!=null&&h!==m)throw new ee(`A target Tensor with shape ${i.shape} was passed for an output of shape ${a}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}function TM(t,e,n,r=!0,s=""){let i;if(Array.isArray(t)){if(t.length!==e.length)throw new ee(`Error when checking model ${s}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${e.length} Tensor(s), but instead got ${t.length} Tensors(s).`);i=t}else{if(e.length>1)throw new ee(`The model expects ${e.length} ${s} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(t.shape)}.`);i=[t]}if(n!=null)for(let o=0;o<e.length;++o){if(n[o]==null)continue;const a=i[o];if(a.shape.length!==n[o].length)throw new ee(`Error when checking ${s}: expected ${e[o]} to have ${n[o].length} dimension(s), but got array with shape ${JSON.stringify(a.shape)}`);for(let l=0;l<n[o].length;++l){if(l===0&&!r)continue;const c=a.shape[l],u=n[o][l];if(u!=null&&u!==c)throw new ee(`Error when checking ${s}: expected ${e[o]} to have shape ${JSON.stringify(n[o])} but got array with shape ${JSON.stringify(a.shape)}.`)}}}function DAe(t,e){if(t==null||Array.isArray(t)&&t.length===0)return e.map(r=>[]);let n;if(typeof t=="string"||typeof t=="function")n=[t];else if(Array.isArray(t)||typeof t=="object")n=t;else throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${t}`);if(Array.isArray(n))return e.map(r=>n);{const r=[];for(const s of e){let i=n.hasOwnProperty(s)?n[s]:[];Array.isArray(i)||(i=[i]),r.push(i)}return r}}const OAe="layers-model";class Qh extends Do{constructor(e){super(e),this.isTraining=!1}summary(e,n,r=console.log){if(!this.built)throw new ee("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");yAe(this,e,n,r)}compile(e){if(e.loss==null&&(e.loss=[]),this.loss=e.loss,typeof e.optimizer=="string")this.optimizer_=gAe(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof su))throw new ee("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}let n=[];if(!Array.isArray(e.loss)&&typeof e.loss!="string"&&typeof e.loss!="function"){e.loss=e.loss;for(const o in e.loss)if(this.outputNames.indexOf(o)===-1)throw new ee(`Unknown entry in loss dictionary: "${o}". Only expected the following keys: ${this.outputNames}`);for(const o of this.outputNames)e.loss[o]==null&&console.warn(`Output "${o}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${o} during training`),n.push(Rk(e.loss[o]))}else if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new ee(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${e.loss}.`);n=e.loss.map(a=>Rk(a))}else{const o=Rk(e.loss);this.outputs.forEach(a=>{n.push(o)})}this.lossFunctions=n,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let o=0;o<this.outputs.length;++o){const a=this.internalOutputShapes[o],l=this.outputNames[o];this.feedOutputNames.push(l),this.feedOutputShapes.push(a),this.feedLossFns.push(this.lossFunctions[o])}const r=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],Qu("loss",()=>{for(let o=0;o<this.outputs.length;++o){if(r.indexOf(o)!==-1)continue;const a=this.lossFunctions[o];this.outputs.length>1&&(this.metricsTensors.push([a,o]),this.metricsNames.push(this.outputNames[o]+"_loss"))}});const s=DAe(e.metrics,this.outputNames),i=(o,a,l)=>{this.outputNames.length>1&&(a=this.outputNames[o]+"_"+a),this.metricsNames.push(a),this.metricsTensors.push([l,o])};Qu("metric",()=>{for(let o=0;o<this.outputs.length;++o){if(r.indexOf(o)!==-1)continue;const a=s[o];(c=>{const u="";let h,m,p;for(const y of c){if(typeof y=="string"&&["accuracy","acc","crossentropy","ce"].indexOf(y)!==-1){const x=this.internalOutputShapes[o];x[x.length-1]===1||this.lossFunctions[o]===u2?["accuracy","acc"].indexOf(y)!==-1?m=dH:["crossentropy","ce"].indexOf(y)!==-1&&(m=oAe):this.lossFunctions[o]===W1?["accuracy","acc"].indexOf(y)!==-1?m=aAe:["crossentropy","ce"].indexOf(y)!==-1&&(m=mH):["accuracy","acc"].indexOf(y)!==-1?m=hH:["crossentropy","ce"].indexOf(y)!==-1&&(m=fH);let b;["accuracy","acc"].indexOf(y)!==-1?b="acc":["crossentropy","ce"].indexOf(y)!==-1&&(b="ce"),p=m,h=u+b}else p=pAe(y),h=u+qb(y);let v;Qu(h,()=>{v=p}),i(o,h,v)}})(a)}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){this.collectedTrainableWeights!=null&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,n,r={}){const s=r.batchSize==null?32:r.batchSize;Pk(s);const i=!0,o=this.standardizeUserDataXY(e,n,i,s);try{const a=o[0].concat(o[1]);this.makeTestFunction();const l=this.testFunction,c=this.testLoop(l,a,s,r.verbose,r.steps);return zs(c)}finally{Io(o[0],e),Io(o[1],n)}}async evaluateDataset(e,n){return this.makeTestFunction(),IAe(this,e,n)}checkNumSamples(e,n,r,s="steps"){let i;if(r!=null){if(i=null,n!=null)throw new ee(`If ${s} is set, batchSize must be null or undefined.Got batchSize = ${n}`)}else if(e!=null)Array.isArray(e)?i=e[0].shape[0]:i=e.shape[0];else throw new ee(`Either the input data should have a defined shape, or ${s} shoud be specified.`);return i}execute(e,n){if(Array.isArray(n)&&n.length===0)throw new ee("`outputs` is an empty Array, which is not allowed.");const r=Array.isArray(n),s=r?n:[n],i=this.retrieveSymbolicTensors(s),o=new vc;if(e instanceof gr&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new ee(`The number of inputs provided (${e.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let l=0;l<this.inputs.length;++l)o.add(this.inputs[l],e[l])}else for(const l of this.inputs){const c=e[l.name];if(c==null)throw new ee(`No value is provided for the model's input ${l.name}`);o.add(l,c)}const a=cp(i,o);return r?a:a[0]}retrieveSymbolicTensors(e){const n=yd(null,e.length);let r=e.length;for(const s of this.layers){const i=Array.isArray(s.output)?s.output:[s.output],o=i.map(a=>a.name);for(let a=0;a<e.length;++a){const l=o.indexOf(e[a]);if(l!==-1&&(n[a]=i[l],r--),r===0)break}if(r===0)break}if(r>0){const s=[];throw n.forEach((i,o)=>{i==null&&s.push(e[o])}),new ee(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(s)}`)}return n}predictLoop(e,n=32,r=!1){return ue(()=>{const s=this.checkNumSamples(e);if(r)throw new ht("Verbose predictLoop() is not implemented yet.");const i=Dk(s,n),o=this.outputs.map(a=>[]);for(let a=0;a<i.length;++a)ue(()=>{const c=i[a][0],u=i[a][1],h=Xm(e,c,u),m=[];if(Array.isArray(h))for(let y=0;y<h.length;++y)m.push({key:this.inputs[y],value:h[y]});else m.push({key:this.inputs[0],value:h});const p=new vc(m);return cp(this.outputs,p)}).forEach((c,u)=>o[u].push(c));return zs(o.map(a=>Us(a,0)))})}predict(e,n={}){const r=xH(e);TM(r,this.inputNames,this.feedInputShapes,!1);try{const s=n.batchSize==null?32:n.batchSize;return Pk(s),this.predictLoop(r,s)}finally{Io(r,e)}}predictOnBatch(e){TM(e,this.inputNames,this.feedInputShapes,!0);const n=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,n)}standardizeUserDataXY(e,n,r=!0,s){if(this.optimizer_==null)throw new co("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const i=[];for(let o=0;o<this.feedOutputShapes.length;++o){const a=this.feedOutputShapes[o];this.feedLossFns[o]===W1?i.push(a.slice(0,a.length-1).concat([1])):i.push(a)}if(e=SM(e,this.feedInputNames,this.feedInputShapes,!1,"input"),n=SM(n,this.feedOutputNames,i,!1,"target"),RAe(e,n),PAe(n,this.feedLossFns,this.feedOutputShapes),this.stateful&&s!=null&&s>0&&e[0].shape[0]%s!==0)throw new ee(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${s}. Found: ${e[0].shape[0]} sample(s).`);return[e,n]}async standardizeUserData(e,n,r,s,i=!0,o){const[a,l]=this.standardizeUserDataXY(e,n,i,o);if(r!=null)throw new Error("sample weight is not supported yet.");let c=null;if(s!=null){const u=yH(s,this.outputNames);c=[];for(let h=0;h<u.length;++h)c.push(await bH(l[h],null,u[h]))}return[a,l,c]}testLoop(e,n,r,s=0,i){return ue(()=>{const o=this.checkNumSamples(n,r,i,"steps"),a=[];if(s>0)throw new ht("Verbose mode is not implemented yet.");if(i!=null)throw new ht("steps mode in testLoop() is not implemented yet");{const l=Dk(o,r),c=ri(Ko(0,o));for(let u=0;u<l.length;++u){const h=l[u][0],m=l[u][1],p=ed(c,h,m-h),y=T_(n,p),v=e(y);if(u===0)for(let x=0;x<v.length;++x)a.push(Kt(0));for(let x=0;x<v.length;++x){const b=v[x];a[x]=_e(a[x],re(m-h,b))}}for(let u=0;u<a.length;++u)a[u]=Ye(a[u],o)}return a})}getDedupedMetricsNames(){const e=this.metricsNames,n=[];for(let r=0;r<e.length;++r){const s=e[r];let i=s;if(hM(e,s)>1){const o=hM(e.slice(0,r),s);i+=`_${o}`}n.push(i)}return n}makeTrainFunction(){return e=>{const n=[],r=e.slice(0,this.inputs.length),s=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),i=e.slice(this.inputs.length+this.outputs.length,this.inputs.length+this.outputs.length*2),o=[],a=()=>{const h=[];for(let v=0;v<this.inputs.length;++v)h.push({key:this.inputs[v],value:r[v]});const m=new vc(h),p=cp(this.outputs,m,{training:!0});let y;for(let v=0;v<this.lossFunctions.length;++v){const x=this.lossFunctions[v];let b=x(s[v],p[v]);i[v]!=null&&(b=NAe(b,i[v]));const w=cr(b);n.push(w),v===0?y=b:y=_e(y,b)}for(let v=0;v<this.metricsTensors.length;++v){let x;if(this.outputs.length>1&&v<this.outputs.length)x=n[v];else{const b=this.metricsTensors[v][0],w=this.metricsTensors[v][1];x=cr(b(s[w],p[w]))}Ta(x),o.push(x)}return y=cr(y),this.calculateLosses().forEach(v=>{y=_e(y,v)}),y},l=this.collectedTrainableWeights.map(h=>h.read()),c=!0;return[this.optimizer_.minimize(a,c,l)].concat(o)}}makeTestFunction(){this.testFunction=e=>ue(()=>{const n=[];let r;const s=e.slice(0,this.inputs.length),i=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),o=[];for(let c=0;c<this.inputs.length;++c)o.push({key:this.inputs[c],value:s[c]});const a=new vc(o),l=cp(this.outputs,a);for(let c=0;c<this.lossFunctions.length;++c){const u=this.lossFunctions[c],h=cr(u(i[c],l[c]));c===0?r=h:r=_e(r,h),n.push(r)}for(let c=0;c<this.metricsTensors.length;++c){const u=this.metricsTensors[c][0],h=this.metricsTensors[c][1],m=cr(u(i[h],l[h]));n.push(m)}return n})}async fit(e,n,r={}){if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");this.isTraining=!0;let s,i,o,a,l,c,u,h,m;try{const p=r.batchSize==null?32:r.batchSize;Pk(p);const y=!1,v=await this.standardizeUserData(e,n,r.sampleWeight,r.classWeight,y,p);s=v[0],i=v[1],m=v[2];let x=!1,b;if(r.validationData!=null&&r.validationData.length>0){if(x=!0,r.validationData.length===2)l=r.validationData[0],c=r.validationData[1];else throw r.validationData.length===3?new ht("validationData including sample weights is not supported yet."):new ee(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${r.validationData} is invalid.`);const P=!0,R=await this.standardizeUserData(l,c,null,null,P,p);u=R[0],h=R[1],b=u.concat(h)}else if(r.validationSplit!=null&&r.validationSplit>0&&r.validationSplit<1){x=!0;const P=Math.floor(s[0].shape[0]*(1-r.validationSplit)),R=s[0].shape[0];u=Xm(s,P,R),o=s,s=Xm(s,0,P),h=Xm(i,P,R),a=i,i=Xm(i,0,P),b=u.concat(h)}else r.validationSteps!=null&&(x=!0);const w=s.concat(i).concat(m);this.checkTrainableWeightsConsistency();const E=this.makeTrainFunction(),N=this.getDedupedMetricsNames();let C,S;x?(this.makeTestFunction(),C=this.testFunction,S=N.slice().concat(N.map(P=>"val_"+P))):(C=null,b=[],S=N.slice());const T=lH(r.callbacks,r.yieldEvery);return await this.fitLoop(E,w,N,p,r.epochs,r.verbose,T,C,b,r.shuffle,S,r.initialEpoch,null,null)}finally{this.isTraining=!1,Io(s,e),Io(i,n),Io(o,e),Io(a,n),Io(u,l),Io(h,c),m!=null&&_t(m)}}async fitLoop(e,n,r,s,i,o,a,l,c,u,h,m,p,y){s==null&&(s=32),i==null&&(i=1),u==null&&(u=!0),m==null&&(m=0);let v=!1;if(l!=null&&c!=null&&(v=!0),y!=null&&(v=!0,p==null))throw new ee("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");const x=this.checkNumSamples(n,s,p,"steps_per_epoch");let b;x!=null&&(b=Ko(0,x)),o==null&&(o=1);const{callbackList:w,history:E}=cH(a,o,i,m,x,p,s,v,h);w.setModel(this),this.history=E,await w.onTrainBegin(),this.stopTraining_=!1;for(let N=m;N<i;++N){await w.onEpochBegin(N);const C={};if(p!=null)throw new ht("stepsPerEpoch mode is not implemented yet.");{if(u==="batch")throw new ht("batch shuffling is not implemneted yet");u&&xEe(b);const S=ri(b),T=Dk(x,s);for(let I=0;I<T.length;++I){const P={};if(await w.onBatchBegin(I,P),ue(()=>{const R=T[I][0],D=T[I][1],B=ed(S,R,D-R);P.batch=I,P.size=D-R;const Z=T_(n,B),z=e(Z);for(let q=0;q<r.length;++q){const M=r[q],U=z[q];P[M]=U,Ta(U)}if(I===T.length-1&&v){const q=this.testLoop(l,c,s);for(let M=0;M<r.length;++M){const U=r[M],V=q[M];Ta(V),C["val_"+U]=V}}}),await w.onBatchEnd(I,P),aH(P),this.stopTraining_)break}S.dispose()}if(await w.onEpochEnd(N,C),this.stopTraining_)break}return await w.onTrainEnd(),await this.history.syncData(),this.history}async fitDataset(e,n){return SAe(this,e,n)}async trainOnBatch(e,n){const r=await this.standardizeUserData(e,n),s=r[0],i=r[1],a=this.makeTrainFunction()(s.concat(i)),l=[];for(const c of a){const u=await c.data();l.push(u[0])}return _t(a),Io(r[0],e),Io(r[1],n),zs(l)}getNamedWeights(e){const n=[],r=e!=null&&e.trainableOnly,s=r?this.trainableWeights:this.weights,i=this.getWeights(r);for(let o=0;o<s.length;++o)r&&!s[o].trainable||n.push({name:s[o].originalName,tensor:i[o]});return n}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){const e=super.dispose();if(e.refCountAfterDispose===0&&this.optimizer!=null&&this.isOptimizerOwned){const n=u_().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=n-u_().numTensors}return e}getLossIdentifiers(){let e;if(typeof this.loss=="string")e=al(this.loss);else if(Array.isArray(this.loss)){for(const n of this.loss)if(typeof n!="string")throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map(n=>al(n))}else{const n=Object.keys(this.loss);e={};const r=this.loss;for(const s of n)if(typeof r[s]=="string")e[s]=al(r[s]);else throw new Error("Serialization of non-string loss is not supported.")}return e}getMetricIdentifiers(){if(typeof this.metrics=="string"||typeof this.metrics=="function")return[al(qb(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(e=>al(qb(e)));{const e={};for(const n in this.metrics)e[n]=al(qb(this.metrics[n]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(e.weighted_metrics!=null)throw new Error("Loading weight_metrics is not supported yet.");if(e.loss_weights!=null)throw new Error("Loading loss_weights is not supported yet.");if(e.sample_weight_mode!=null)throw new Error("Loading sample_weight_mode is not supported yet.");const n=__(e.optimizer_config),r=kl(n);let s;if(typeof e.loss=="string")s=Ru(e.loss);else if(Array.isArray(e.loss))s=e.loss.map(o=>Ru(o));else if(e.loss!=null){s={};for(const o in e.loss)s[o]=Ru(e.loss[o])}let i;if(Array.isArray(e.metrics))i=e.metrics.map(o=>Ru(o));else if(e.metrics!=null){i={};for(const o in e.metrics)i[o]=Ru(e.metrics[o])}this.compile({loss:s,metrics:i,optimizer:r})}async save(e,n){if(typeof e=="string"){const c=pke(e);if(c.length===0)throw new ee(`Cannot find any save handlers for URL '${e}'`);if(c.length>1)throw new ee(`Found more than one (${c.length}) save handlers for URL '${e}'`);e=c[0]}if(e.save==null)throw new ee("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const r=await XL(this.getNamedWeights(n)),s=!1,i=null,a={modelTopology:this.toJSON(i,s),format:OAe,generatedBy:`TensorFlow.js tfjs-layers v${gH}`,convertedBy:null};if((n==null?!1:n.includeOptimizer)&&this.optimizer!=null){a.trainingConfig=this.getTrainingConfig();const c="optimizer",{data:u,specs:h}=await XL(await this.optimizer.getWeights(),c);r.specs.push(...h),r.data=mke([r.data,u])}return this.userDefinedMetadata!=null&&(kM(this.userDefinedMetadata,this.name,!0),a.userDefinedMetadata=this.userDefinedMetadata),a.weightData=r.data,a.weightSpecs=r.specs,e.save(a)}setUserDefinedMetadata(e){kM(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}}Qh.className="Model";we(Qh);class wH extends Qh{}wH.className="Functional";we(wH);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class $f extends Qh{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=e.name!=null?e.name:o2("sequential_"),e.layers!=null)for(const n of e.layers)this.add(n)}checkShape(e){if(e.inboundNodes[0].outputTensors[0].shape.some(r=>r<0))throw new ee(`Negative dimension size caused by adding layer ${e.name} with input shape [${e.inboundNodes[0].inputTensors[0].shape}]`)}add(e){const n=e instanceof $f||e instanceof Qh;let r;if(n){if(r=e,r.outputs.length!==1)throw new ee("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(r.inputs.length!==1)throw new ee("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(this.outputs.length===0){if(e.inboundNodes.length===0){if(e.batchInputShape==null)throw new ee("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const s=M3e({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(s)}if(n)this.outputs=r.outputs,this.inputs=r.inputs;else{if(e.inboundNodes.length!==1)throw new ee(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${e.name} which has ${e.inboundNodes.length} pre-existing inbound connections.`);if(e.inboundNodes[0].outputTensors.length!==1)throw new ee("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=nH(this.outputs[0])}this.inboundNodes=[],new l2({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:yd(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(s=>s.shape),outputShapes:this.outputs[0].shape})}else{const s=e.apply(this.outputs[0]);if(Array.isArray(s))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[s],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(this.layers.length===0)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),this.layers.length===0)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,n){return this.model==null&&this.build(),this.model.call(e,n)}build(e){if(jt(e),this.inputs.length===0||this.outputs.length===0)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new Qh({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,n,r=console.log){this.built||this.build(),super.summary(e,n,r)}setWeights(e){this.model==null&&this.build(),this.model.setWeights(e)}evaluate(e,n,r={}){if(!this.built)throw new co("The model needs to be compiled before being used.");return this.model.evaluate(e,n,r)}async evaluateDataset(e,n){if(!this.built)throw new co("The model needs to be compiled before being used.");return this.model.evaluateDataset(e,n)}predict(e,n={}){return this.model==null&&this.build(),this.model.predict(e,n)}predictOnBatch(e){return this.model==null&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return this.model==null?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}async fit(e,n,r={}){if(!this.built)throw new co("The model needs to be compiled before being used.");return this.model.fit(e,n,r)}async fitDataset(e,n){if(!this.built)throw new co("The model needs to be compiled before being used.");return this.model.fitDataset(e,n)}async trainOnBatch(e,n){return this.model.trainOnBatch(e,n)}static fromConfig(e,n,r={},s=!1){let i,o={};if(n instanceof Array){if(n[0].className==null||n[0].className==="Merge")throw new ee("Legacy serialization format not supported yet.");i=n}else F(n.layers!=null,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),i=n.layers,delete n.layers,o=n;const a=new e(o);if(!(a instanceof $f))throw new ht(`Sequential.fromConfig called on non-Sequential input: ${a}`);for(const l of i){const u=kl(l,void 0,s);s&&u.setFastWeightInitDuringBuild(!0),a.add(u)}return a}set stopTraining(e){if(this.model==null)throw new ee("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(this.model==null)throw new ee("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const e=[];for(const n of this.layers){const r={};r.className=n.getClassName(),r.config=n.getConfig(),e.push(r)}return{name:this.name,layers:e}}}$f.className="Sequential";we($f);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function LAe(t){return new $f(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let fs=class extends om{getConfig(){return{}}};class EH extends fs{apply(e,n=1){return w3e(e,n)}}EH.className="elu";we(EH);class kH extends fs{apply(e){return B7(e)}}kH.className="selu";we(kH);class NH extends fs{apply(e){return Od(e)}}NH.className="relu";we(NH);class CH extends fs{apply(e){return ue(()=>Eg(6,Od(e)))}}CH.className="relu6";we(CH);class _H extends fs{apply(e){return e}}_H.className="linear";we(_H);class SH extends fs{apply(e){return rm(e)}}SH.className="sigmoid";we(SH);class TH extends fs{apply(e){return k3e(e)}}TH.className="hardSigmoid";we(TH);class $H extends fs{apply(e){return ly(e)}}$H.className="softplus";we($H);class IH extends fs{apply(e){return E3e(e)}}IH.className="softsign";we(IH);class AH extends fs{apply(e){return Xw(e)}}AH.className="tanh";we(AH);let T3=class extends fs{apply(e,n=-1){return AI(e,n)}};T3.className="softmax";we(T3);class RH extends fs{apply(e,n=-1){return A7(e,n)}}RH.className="logSoftmax";we(RH);class PH extends fs{apply(e){return ue(()=>ue(()=>{const n=Math.sqrt(2),r=re(.5,_e(1,_7(Ye(e,n))));return re(e,r)}))}}PH.className="gelu";we(PH);class DH extends fs{apply(e){return ue(()=>re(.5,re(e,_e(1,Xw(re(us(Ye(2,Math.PI)),_e(e,re(.044715,md(e,3)))))))))}}DH.className="gelu_new";we(DH);class OH extends fs{apply(e){return ue(()=>re(e,Xw(ly(e))))}}OH.className="mish";we(OH);class LH extends fs{apply(e,n=1){return ue(()=>re(rm(re(e,n)),e))}}LH.className="swish";we(LH);function Hc(t){return t.getClassName()}function Ok(t,e={}){return py(t,so.getMap().classNameMap,e,"activation")}function Gc(t){if(t==null){const e={};return e.className="linear",e.config={},Ok(e)}if(typeof t=="string"){const e={};return e.className=t,e.config={},Ok(e)}else return t instanceof fs?t:Ok(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function MAe(t){if(t!=null&&typeof t!="object")throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${t}`)}class MH extends om{}class zH extends MH{constructor(e){super(),MAe(e),this.l1=e==null||e.l1==null?.01:e.l1,this.l2=e==null||e.l2==null?.01:e.l2,this.hasL1=this.l1!==0,this.hasL2=this.l2!==0}apply(e){return ue(()=>{let n=Pr([1]);return this.hasL1&&(n=_e(n,Xe(re(this.l1,ws(e))))),this.hasL2&&(n=_e(n,Xe(re(this.l2,yy(e))))),ie(n,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,n){return new e({l1:n.l1,l2:n.l2})}}zH.className="L1L2";we(zH);const $M={l1l2:"L1L2"};function mn(t){return m3(t)}function IM(t,e={}){return py(t,so.getMap().classNameMap,e,"regularizer")}function An(t){if(t==null)return null;if(typeof t=="string"){const n={className:t in $M?$M[t]:t,config:{}};return IM(n)}else return t instanceof MH?t:IM(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class FH extends wt{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null&&(this.maxValue=e.maxValue)}call(e,n){e=rt(e);let r=Od(e);return this.maxValue!=null&&(r=Oi(r,0,this.maxValue)),r}computeOutputShape(e){return e}getConfig(){const e={maxValue:this.maxValue},n=super.getConfig();return Object.assign(e,n),e}}FH.className="ReLU";we(FH);class BH extends wt{constructor(e){super(e??{}),this.DEFAULT_ALPHA=.3,e==null&&(e={}),this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,n){const r=rt(e);return pI(r,this.alpha)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},n=super.getConfig();return Object.assign(e,n),e}}BH.className="LeakyReLU";we(BH);class VH extends wt{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA_INITIALIZER="zeros",e==null&&(e={}),this.supportsMasking=!0,this.alphaInitializer=In(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=An(e.alphaRegularizer),this.alphaConstraint=Nr(e.alphaConstraint),e.sharedAxes==null)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else if(typeof e.sharedAxes=="number")this.sharedAxes=[e.sharedAxes];else throw new ee(`Expected sharedAxes to be a number or an array of numbers, but got ${e.sharedAxes}`)}build(e){e=jt(e);const n=e.slice(1);if(this.sharedAxes!=null)for(const s of this.sharedAxes)n[s-1]=1;this.alpha=this.addWeight("alpha",n,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const r={};if(this.sharedAxes!=null)for(let s=1;s<e.length;++s)r[s]=e[s];this.inputSpec=[new wr({ndim:e.length,axes:r})],this.built=!0}call(e,n){return e=rt(e),wI(e,this.alpha.read())}getConfig(){const e={alphaInitializer:Bn(this.alphaInitializer),alphaRegularizer:mn(this.alphaRegularizer),alphaConstraint:kr(this.alphaConstraint),sharedAxes:this.sharedAxes},n=super.getConfig();return Object.assign(e,n),e}}VH.className="PReLU";we(VH);let jH=class extends wt{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA=1,e==null&&(e={}),e.alpha!=null&&e.alpha!==this.DEFAULT_ALPHA)throw new ht(`Non-default alpha value (${e.alpha}) is not supported by the ELU layer yet.`);this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,n){const r=rt(e);return Qw(r)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},n=super.getConfig();return Object.assign(e,n),e}};jH.className="ELU";we(jH);class UH extends wt{constructor(e){super(e??{}),this.DEFAULT_THETA=1,e==null&&(e={}),this.theta=e.theta==null?this.DEFAULT_THETA:e.theta}call(e,n){const r=rt(e);return re(r,Me(Li(r,this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){const e={theta:this.theta},n=super.getConfig();return Object.assign(e,n),e}}UH.className="ThresholdedReLU";we(UH);class HH extends wt{constructor(e){super(e??{}),this.DEFAULT_AXIS=1,e==null&&(e={}),this.softmax=new T3().apply,this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis}call(e,n){return ue(()=>{let r=rt(e);const s=n.mask;if(s!=null){const i=re(et(ru(r.shape),Me(s,r.dtype)),Kt(-1e9));r=_e(r,i)}return this.axis instanceof Array?this.axis.length>1?La(et(r,R7(r,this.axis,!0))):this.softmax(r,this.axis[0]):this.softmax(r,this.axis)})}computeOutputShape(e){return e}getConfig(){const e={axis:this.axis},n=super.getConfig();return Object.assign(e,n),e}}HH.className="Softmax";we(HH);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function ef(t,e,n){if(typeof t=="number")return yd(t,e);if(t.length!==e)throw new ee(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${t.length} elements.`);for(let r=0;r<e;++r){const s=t[r];if(!y3e(s))throw new ee(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${JSON.stringify(t)} including a non-integer number ${s}`)}return t}function Uo(t,e,n,r,s=1){if(t==null)return t;const i=e+(e-1)*(s-1);let o;return n==="same"?o=t:o=t-i+1,Math.floor((o+r-1)/r)}function pa(t,e,n,r){if(t==null)return null;if(r==="valid")t=t*e+Uc([n-e,0]);else if(r==="same")t=t*e;else throw new ee(`Unsupport padding mode: ${r}.`);return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function $3(t,e){return ue(()=>(nr(e),e==="channelsFirst"?Lt(t,[0,2,3,1]):t))}function GH(t,e){return ue(()=>(nr(e),e==="channelsFirst"?Lt(t,[0,2,3,4,1]):t))}function zAe(t,e,n,r=1,s="valid",i,o=1){return ue(()=>{if(i==null&&(i=Zo()),nr(i),t.shape.length!==3)throw new ee(`The input of a conv1dWithBias operation should be 3, but is ${t.shape.length} instead.`);if(e.shape.length!==3)throw new ee(`The kernel for a conv1dWithBias operation should be 3, but is ${e.shape.length} instead`);if(n!=null&&n.shape.length!==1)throw new ee(`The bias for a conv1dWithBias operation should be 1, but is ${n.shape.length} instead`);if(i==="channelsFirst"&&(t=Lt(t,[0,2,1])),s==="causal")throw new ht("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let a=w7(t,e,r,s==="same"?"same":"valid","NWC",o);return n!=null&&(a=ta(a,n)),a})}function AM(t,e,n,r=[1,1],s="valid",i,o,a=null){return ue(()=>{if(i==null&&(i=Zo()),nr(i),t.rank!==3&&t.rank!==4)throw new ee(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${t.rank}.`);if(e.rank!==3&&e.rank!==4)throw new ee(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${t.rank}.`);let l=$3(t,i);if(s==="causal")throw new ht("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return l=WSe({x:l,filter:e,strides:r,pad:s==="same"?"same":"valid",dilations:o,dataFormat:"NHWC",bias:n,activation:a}),i==="channelsFirst"&&(l=Lt(l,[0,3,1,2])),l})}function FAe(t,e,n,r=[1,1,1],s="valid",i,o){return ue(()=>{if(i==null&&(i=Zo()),nr(i),t.rank!==4&&t.rank!==5)throw new ee(`conv3dWithBias expects input to be of rank 4 or 5, but received ${t.rank}.`);if(e.rank!==4&&e.rank!==5)throw new ee(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${t.rank}.`);let a=GH(t,i);if(s==="causal")throw new ht("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return a=GNe(a,e,r,s==="same"?"same":"valid","NDHWC",o),n!=null&&(a=ta(a,n)),i==="channelsFirst"&&(a=Lt(a,[0,4,1,2,3])),a})}class d2 extends wt{constructor(e,n){if(super(n),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",d2.verifyArgs(n),this.rank=e,Dr(this.rank,"rank"),this.rank!==1&&this.rank!==2&&this.rank!==3)throw new ht(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=ef(n.kernelSize,e,"kernelSize"),this.strides=ef(n.strides==null?1:n.strides,e,"strides"),this.padding=n.padding==null?"valid":n.padding,Mi(this.padding),this.dataFormat=n.dataFormat==null?"channelsLast":n.dataFormat,nr(this.dataFormat),this.activation=Gc(n.activation),this.useBias=n.useBias==null?!0:n.useBias,this.biasInitializer=In(n.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=Nr(n.biasConstraint),this.biasRegularizer=An(n.biasRegularizer),this.activityRegularizer=An(n.activityRegularizer),this.dilationRate=ef(n.dilationRate==null?1:n.dilationRate,e,"dilationRate"),this.rank===1&&Array.isArray(this.dilationRate)&&this.dilationRate.length!==1)throw new ee(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(this.rank===2){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==2)throw new ee(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(this.rank===3){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==3)throw new ee(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}}static verifyArgs(e){if(ma("kernelSize"in e,"required key 'kernelSize' not in config"),typeof e.kernelSize!="number"&&!p3(e.kernelSize,"number",1,3))throw new ee(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(e.kernelSize)}.`)}getConfig(){const e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:Hc(this.activation),useBias:this.useBias,biasInitializer:Bn(this.biasInitializer),biasRegularizer:mn(this.biasRegularizer),activityRegularizer:mn(this.activityRegularizer),biasConstraint:kr(this.biasConstraint)},n=super.getConfig();return Object.assign(e,n),e}}class am extends d2{constructor(e,n){super(e,n),this.kernel=null,am.verifyArgs(n),this.filters=n.filters,Dr(this.filters,"filters"),this.kernelInitializer=In(n.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=Nr(n.kernelConstraint),this.kernelRegularizer=An(n.kernelRegularizer)}build(e){e=jt(e);const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new ee(`The channel dimension of the input should be defined. Found ${e[n]}`);const r=e[n],s=this.kernelSize.concat([r,this.filters]);this.kernel=this.addWeight("kernel",s,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[n]:r}}],this.built=!0}call(e,n){return ue(()=>{e=rt(e);let r;const s=this.bias==null?null:this.bias.read(),i=VU(this.activation.getClassName());if(i!=null&&this.rank===2)r=AM(e,this.kernel.read(),s,this.strides,this.padding,this.dataFormat,this.dilationRate,i);else{if(this.rank===1)r=zAe(e,this.kernel.read(),s,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(this.rank===2)r=AM(e,this.kernel.read(),s,this.strides,this.padding,this.dataFormat,this.dilationRate);else if(this.rank===3)r=FAe(e,this.kernel.read(),s,this.strides,this.padding,this.dataFormat,this.dilationRate);else throw new ht("convolutions greater than 3D are not implemented yet.");this.activation!=null&&(r=this.activation.apply(r))}return r})}computeOutputShape(e){e=jt(e);const n=[],r=this.dataFormat==="channelsLast"?e.slice(1,e.length-1):e.slice(2);for(let i=0;i<r.length;++i){const o=Uo(r[i],this.kernelSize[i],this.padding,this.strides[i],typeof this.dilationRate=="number"?this.dilationRate:this.dilationRate[i]);n.push(o)}let s=[e[0]];return this.dataFormat==="channelsLast"?(s=s.concat(n),s.push(this.filters)):(s.push(this.filters),s=s.concat(n)),s}getConfig(){const e={filters:this.filters,kernelInitializer:Bn(this.kernelInitializer),kernelRegularizer:mn(this.kernelRegularizer),kernelConstraint:kr(this.kernelConstraint)},n=super.getConfig();return Object.assign(e,n),e}static verifyArgs(e){if(!("filters"in e)||typeof e.filters!="number"||e.filters<1)throw new ee(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify(e.filters)}`)}}class wy extends am{constructor(e){super(2,e),wy.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!p3(e.kernelSize,"number",1,2))throw new ee(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(e.kernelSize)}.`)}}wy.className="Conv2D";we(wy);class Ey extends am{constructor(e){super(3,e),Ey.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!(Array.isArray(e.kernelSize)&&(e.kernelSize.length===1||e.kernelSize.length===3)))throw new ee(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(e.kernelSize)}.`)}}Ey.className="Conv3D";we(Ey);class WH extends wy{constructor(e){if(super(e),this.inputSpec=[new wr({ndim:4})],this.padding!=="same"&&this.padding!=="valid")throw new ee(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=jt(e),e.length!==4)throw new ee("Input should have rank 4; Received input shape: "+JSON.stringify(e));const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new ee("The channel dimension of the inputs should be defined. Found `None`.");const r=e[n],s=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",s,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new wr({ndim:4,axes:{[n]:r}})],this.built=!0}call(e,n){return ue(()=>{let r=rt(e);if(r.shape.length!==4)throw new ee(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const s=r.shape,i=s[0];let o,a;this.dataFormat==="channelsFirst"?(o=2,a=3):(o=1,a=2);const l=s[o],c=s[a],u=this.kernelSize[0],h=this.kernelSize[1],m=this.strides[0],p=this.strides[1],y=pa(l,m,u,this.padding),v=pa(c,p,h,this.padding),x=[i,y,v,this.filters];this.dataFormat!=="channelsLast"&&(r=Lt(r,[0,2,3,1]));let b=E7(r,this.kernel.read(),x,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(b=Lt(b,[0,3,1,2])),this.bias!=null&&(b=ta(b,this.bias.read(),this.dataFormat)),this.activation!=null&&(b=this.activation.apply(b)),b})}computeOutputShape(e){e=jt(e);const n=e.slice();let r,s,i;this.dataFormat==="channelsFirst"?(r=1,s=2,i=3):(r=3,s=1,i=2);const o=this.kernelSize[0],a=this.kernelSize[1],l=this.strides[0],c=this.strides[1];return n[r]=this.filters,n[s]=pa(n[s],l,o,this.padding),n[i]=pa(n[i],c,a,this.padding),n}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}WH.className="Conv2DTranspose";we(WH);class qH extends Ey{constructor(e){if(super(e),this.inputSpec=[new wr({ndim:5})],this.padding!=="same"&&this.padding!=="valid")throw new ee(`Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=jt(e),e.length!==5)throw new ee("Input should have rank 5; Received input shape: "+JSON.stringify(e));const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new ee("The channel dimension of the inputs should be defined. Found `None`.");const r=e[n],s=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",s,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new wr({ndim:5,axes:{[n]:r}})],this.built=!0}call(e,n){return ue(()=>{let r=rt(e);if(r.shape.length!==5)throw new ee(`Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const s=r.shape,i=s[0];let o,a,l;this.dataFormat==="channelsFirst"?(l=2,o=3,a=4):(l=1,o=2,a=3);const c=s[l],u=s[o],h=s[a],m=this.kernelSize[0],p=this.kernelSize[1],y=this.kernelSize[2],v=this.strides[0],x=this.strides[1],b=this.strides[2],w=pa(c,v,m,this.padding),E=pa(u,x,p,this.padding),N=pa(h,b,y,this.padding),C=[i,w,E,N,this.filters];this.dataFormat!=="channelsLast"&&(r=Lt(r,[0,2,3,4,1]));let S=KNe(r,this.kernel.read(),C,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(S=Lt(S,[0,4,1,2,3])),this.bias!==null&&(S=ta(S,this.bias.read(),this.dataFormat)),this.activation!==null&&(S=this.activation.apply(S)),S})}computeOutputShape(e){e=jt(e);const n=e.slice();let r,s,i,o;this.dataFormat==="channelsFirst"?(r=1,s=2,i=3,o=4):(r=4,s=1,i=2,o=3);const a=this.kernelSize[0],l=this.kernelSize[1],c=this.kernelSize[2],u=this.strides[0],h=this.strides[1],m=this.strides[2];return n[r]=this.filters,n[s]=pa(n[s],u,a,this.padding),n[i]=pa(n[i],h,l,this.padding),n[o]=pa(n[o],m,c,this.padding),n}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}qH.className="Conv3DTranspose";we(qH);class KH extends am{constructor(e,n){if(super(e,n),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,n.filters==null)throw new ee("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(n.kernelInitializer!=null||n.kernelRegularizer!=null||n.kernelConstraint!=null)throw new ee("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(n.padding!=null&&n.padding!=="same"&&n.padding!=="valid")throw new ee(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(n.padding)}`);this.depthMultiplier=n.depthMultiplier==null?1:n.depthMultiplier,this.depthwiseInitializer=In(n.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=An(n.depthwiseRegularizer),this.depthwiseConstraint=Nr(n.depthwiseConstraint),this.pointwiseInitializer=In(n.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=An(n.pointwiseRegularizer),this.pointwiseConstraint=Nr(n.pointwiseConstraint)}build(e){if(e=jt(e),e.length<this.rank+2)throw new ee(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(e)}`);const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null||e[n]<0)throw new ee(`The channel dimension of the inputs should be defined, but found ${JSON.stringify(e[n])}`);const r=e[n],s=this.kernelSize.concat([r,this.depthMultiplier]),i=[];for(let a=0;a<this.rank;++a)i.push(1);i.push(r*this.depthMultiplier,this.filters);const o=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",s,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,o,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",i,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,o,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,o,this.biasConstraint):this.bias=null,this.inputSpec=[new wr({ndim:this.rank+2,axes:{[n]:r}})],this.built=!0}call(e,n){return ue(()=>{e=rt(e);let r;if(this.rank===1)throw new ht("1D separable convolution is not implemented yet.");return this.rank===2&&(this.dataFormat==="channelsFirst"&&(e=Lt(e,[0,2,3,1])),r=V7(e,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(r=ta(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),this.dataFormat==="channelsFirst"&&(r=Lt(r,[0,3,1,2])),r})}getConfig(){const e=super.getConfig();return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=Bn(this.depthwiseInitializer),e.pointwiseInitializer=Bn(this.pointwiseInitializer),e.depthwiseRegularizer=mn(this.depthwiseRegularizer),e.pointwiseRegularizer=mn(this.pointwiseRegularizer),e.depthwiseConstraint=kr(this.depthwiseConstraint),e.pointwiseConstraint=kr(this.pointwiseConstraint),e}}KH.className="SeparableConv";class ZH extends KH{constructor(e){super(2,e)}}ZH.className="SeparableConv2D";we(ZH);class h2 extends am{constructor(e){super(1,e),h2.verifyArgs(e),this.inputSpec=[{ndim:3}]}getConfig(){const e=super.getConfig();return delete e.rank,delete e.dataFormat,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!p3(e.kernelSize,"number",1,1))throw new ee(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(e.kernelSize)}.`)}}h2.className="Conv1D";we(h2);class XH extends wt{constructor(e){super(e),typeof e.cropping=="number"?this.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:typeof e.cropping[0]=="number"?this.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:this.cropping=e.cropping,this.dataFormat=e.dataFormat===void 0?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return this.dataFormat==="channelsFirst"?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(e,n){return ue(()=>{if(e=rt(e),this.dataFormat==="channelsLast"){const r=Wb(e,this.cropping[0][0],e.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return Wb(r,this.cropping[1][0],e.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}else{const r=Wb(e,this.cropping[0][0],e.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return Wb(r,this.cropping[1][0],e.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){const e={cropping:this.cropping,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}XH.className="Cropping2D";we(XH);class YH extends wt{constructor(e){super(e),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=e.size==null?this.DEFAULT_SIZE:e.size,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,nr(this.dataFormat),this.interpolation=e.interpolation==null?"nearest":e.interpolation,m3e(this.interpolation)}computeOutputShape(e){if(this.dataFormat==="channelsFirst"){const n=e[2]==null?null:this.size[0]*e[2],r=e[3]==null?null:this.size[1]*e[3];return[e[0],e[1],n,r]}else{const n=e[1]==null?null:this.size[0]*e[1],r=e[2]==null?null:this.size[1]*e[2];return[e[0],n,r,e[3]]}}call(e,n){return ue(()=>{let r=rt(e);const s=r.shape;if(this.dataFormat==="channelsFirst"){r=Lt(r,[0,2,3,1]);const i=this.size[0]*s[2],o=this.size[1]*s[3],a=this.interpolation==="nearest"?yl.resizeNearestNeighbor(r,[i,o]):yl.resizeBilinear(r,[i,o]);return Lt(a,[0,3,1,2])}else{const i=this.size[0]*s[1],o=this.size[1]*s[2];return this.interpolation==="nearest"?yl.resizeNearestNeighbor(r,[i,o]):yl.resizeBilinear(r,[i,o])}})}getConfig(){const e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},n=super.getConfig();return Object.assign(e,n),e}}YH.className="UpSampling2D";we(YH);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function BAe(t,e,n=[1,1],r="valid",s,i){return ue(()=>{s==null&&(s=Zo()),nr(s);let o=$3(t,s);if(t.rank!==4)throw new ee(`Input for depthwiseConv2d is required to be 4-D, but is instead ${t.rank}-D`);if(e.rank!==4)throw new ee(`depthwiseKernel is required to be 4-D, but is instead ${e.rank}-D`);return o=dI(o,e,n,r==="same"?"same":"valid","NHWC",i),s==="channelsFirst"&&(o=Lt(o,[0,3,1,2])),o})}class JH extends d2{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=e.depthMultiplier==null?1:e.depthMultiplier,this.depthwiseInitializer=In(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=Nr(e.depthwiseConstraint),this.depthwiseRegularizer=An(e.depthwiseRegularizer)}build(e){if(e=jt(e),e.length<4)throw new ee(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(e)}.`);const n=this.dataFormat==="channelsFirst"?1:3;if(e[n]==null||e[n]<0)throw new ee(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${e[n]}).`);const r=e[n],s=[this.kernelSize[0],this.kernelSize[1],r,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",s,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[r*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return ue(()=>{e=rt(e);let r=BAe(e,this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(r=ta(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),r})}computeOutputShape(e){e=jt(e);const n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2],s=this.dataFormat==="channelsFirst"?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,i=Uo(n,this.kernelSize[0],this.padding,this.strides[0]),o=Uo(r,this.kernelSize[1],this.padding,this.strides[1]);return this.dataFormat==="channelsFirst"?[e[0],s,i,o]:[e[0],i,o,s]}getConfig(){const e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=Bn(this.depthwiseInitializer),e.depthwiseRegularizer=mn(this.depthwiseRegularizer),e.depthwiseConstraint=kr(this.depthwiseRegularizer),e}}JH.className="DepthwiseConv2D";we(JH);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function QH(t,e,n,r){if(Array.isArray(t)){if(e!=null||n!=null)throw new ee("When inputs is an array, neither initialState or constants should be provided");r!=null&&(n=t.slice(t.length-r,t.length),t=t.slice(0,t.length-r)),t.length>1&&(e=t.slice(1,t.length)),t=t[0]}function s(i){return i==null||Array.isArray(i)?i:[i]}return e=s(e),n=s(n),{inputs:t,initialState:e,constants:n}}function eG(t,e,n,r=!1,s,i,o=!1,a=!1){return ue(()=>{const l=e.shape.length;if(l<3)throw new ee(`Input should be at least 3D, but is ${l}D.`);const c=[1,0].concat(Ko(2,l));if(e=Lt(e,c),i!=null)throw new ht("The rnn() functoin of the deeplearn.js backend does not support constants yet.");o&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),s!=null&&(s=Me(Me(s,"bool"),"float32"),s.rank===l-1&&(s=Ms(s,-1)),s=Lt(s,c)),r&&(e=pd(e,0),s!=null&&(s=pd(s,0)));const u=[];let h,m=n;const p=e.shape[0],y=gd(e);let v;s!=null&&(v=gd(s));for(let b=0;b<p;++b){const w=y[b],E=ue(()=>t(w,m));if(s==null)h=E[0],m=E[1];else{const N=ue(()=>{const C=v[b],S=et(yo(C),C),T=_e(re(E[0],C),re(m[0],S)),I=m.map((P,R)=>_e(re(E[1][R],C),re(P,S)));return{output:T,newStates:I}});h=N.output,m=N.newStates}a&&u.push(h)}let x;return a&&(x=Rl(u,1)),[h,x,m]})}class iu extends wt{constructor(e){super(e);let n;if(e.cell==null)throw new ee("cell property is missing for the constructor of RNN.");if(Array.isArray(e.cell)?n=new R3({cells:e.cell}):n=e.cell,n.stateSize==null)throw new ee("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=n,this.returnSequences=e.returnSequences==null?!1:e.returnSequences,this.returnState=e.returnState==null?!1:e.returnState,this.goBackwards=e.goBackwards==null?!1:e.goBackwards,this._stateful=e.stateful==null?!1:e.stateful,this.unroll=e.unroll==null?!1:e.unroll,this.supportsMasking=!0,this.inputSpec=[new wr({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return Ko(0,e).map(n=>null)}else return this.states_}setStates(e){this.states_=e}computeOutputShape(e){k_(e)&&(e=e[0]),e=e;let n=this.cell.stateSize;Array.isArray(n)||(n=[n]);const r=n[0];let s;if(this.returnSequences?s=[e[0],e[1],r]:s=[e[0],r],this.returnState){const i=[];for(const o of n)i.push([e[0],o]);return[s].concat(i)}else return s}computeMask(e,n){return ue(()=>{Array.isArray(n)&&(n=n[0]);const r=this.returnSequences?n:null;if(this.returnState){const s=this.states.map(i=>null);return[r].concat(s)}else return r})}get states(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,n=[];for(let r=0;r<e;++r)n.push(null);return n}else return this.states_}set states(e){this.states_=e}build(e){if(this.numConstants!=null)throw new ht("Constants support is not implemented in RNN yet.");k_(e)&&(e=e[0]),e=e;const n=this.stateful?e[0]:null,r=e.slice(2);this.inputSpec[0]=new wr({shape:[n,null,...r]});const s=[e[0]].concat(e.slice(2));this.cell.build(s);let i;if(Array.isArray(this.cell.stateSize)?i=this.cell.stateSize:i=[this.cell.stateSize],this.stateSpec!=null){if(!Zt(this.stateSpec.map(o=>o.shape[o.shape.length-1]),i))throw new ee(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=i.map(o=>new wr({shape:[null,o]}));this.stateful&&this.resetStates()}resetStates(e,n=!1){ue(()=>{if(!this.stateful)throw new fa("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape[0];if(r==null)throw new ee("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.states_==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(s=>Pr([r,s])):this.states_=[Pr([r,this.cell.stateSize])];else if(e==null)_t(this.states_),this.keptStates!=null&&(_t(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(s=>Pr([r,s])):this.states_[0]=Pr([r,this.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new ee(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);n===!0?this.keptStates.push(this.states_.slice()):_t(this.states_);for(let s=0;s<this.states_.length;++s){const i=e[s],o=Array.isArray(this.cell.stateSize)?this.cell.stateSize[s]:this.cell.stateSize,a=[r,o];if(!Zt(i.shape,a))throw new ee(`State ${s} is incompatible with layer ${this.name}: expected shape=${a}, received shape=${i.shape}`);this.states_[s]=i}}this.states_=this.states_.map(s=>Ta(s.clone()))})}apply(e,n){let r=n==null?null:n.initialState,s=n==null?null:n.constants;n==null&&(n={});const i=QH(e,r,s,this.numConstants);e=i.inputs,r=i.initialState,s=i.constants;let o=[],a=[];if(r!=null){n.initialState=r,o=o.concat(r),this.stateSpec=[];for(const c of r)this.stateSpec.push(new wr({shape:c.shape}));a=a.concat(this.stateSpec)}if(s!=null&&(n.constants=s,o=o.concat(s),this.numConstants=s.length),o[0]instanceof za){const c=[e].concat(o),u=this.inputSpec.concat(a),h=this.inputSpec;this.inputSpec=u;const m=super.apply(c,n);return this.inputSpec=h,m}else return super.apply(e,n)}call(e,n){return ue(()=>{const r=n==null?null:n.mask,s=n==null?null:n.training;let i=n==null?null:n.initialState;e=rt(e),i==null&&(this.stateful?i=this.states_:i=this.getInitialState(e));const o=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(i.length!==o)throw new ee(`RNN Layer has ${o} state(s) but was passed ${i.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const a={training:s},c=eG((y,v)=>{const x=this.cell.call([y].concat(v),a);return[x[0],x.slice(1)]},e,i,this.goBackwards,r,null,this.unroll,this.returnSequences),u=c[0],h=c[1],m=c[2];this.stateful&&this.resetStates(m,s);const p=this.returnSequences?h:u;return this.returnState?[p].concat(m):p})}getInitialState(e){return ue(()=>{let n=Pr(e.shape);return n=Xe(n,[1,2]),n=gy(n),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(r=>r>1?w_(n,[1,r]):n):this.cell.stateSize>1?[w_(n,[1,this.cell.stateSize])]:[n]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.cell!=null&&this.cell.setFastWeightInitDuringBuild(e)}getConfig(){const e=super.getConfig(),n={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};this.numConstants!=null&&(n.numConstants=this.numConstants);const r=this.cell.getConfig();return this.getClassName()===iu.className&&(n.cell={className:this.cell.getClassName(),config:r}),Object.assign(Object.assign(Object.assign({},r),e),n)}static fromConfig(e,n,r={}){const s=n.cell,i=kl(s,r);return new e(Object.assign(n,{cell:i}))}}iu.className="RNN";we(iu);class f2 extends wt{}class I3 extends f2{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,Dr(this.units,"units"),this.activation=Gc(e.activation==null?this.DEFAULT_ACTIVATION:e.activation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=In(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=In(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=In(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=An(e.kernelRegularizer),this.recurrentRegularizer=An(e.recurrentRegularizer),this.biasRegularizer=An(e.biasRegularizer),this.kernelConstraint=Nr(e.kernelConstraint),this.recurrentConstraint=Nr(e.recurrentConstraint),this.biasConstraint=Nr(e.biasConstraint),this.dropout=Tf([1,Uc([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=Tf([1,Uc([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=jt(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return ue(()=>{if(e=e,e.length!==2)throw new ee(`SimpleRNNCell expects 2 input Tensors, got ${e.length}.`);let r=e[1];e=e[0];const s=n.training==null?!1:n.training;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Wc({ones:()=>yo(e),rate:this.dropout,training:s,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Wc({ones:()=>yo(r),rate:this.recurrentDropout,training:s,dropoutFunc:this.dropoutFunc}));let i;const o=this.dropoutMask,a=this.recurrentDropoutMask;o!=null?i=Aa(re(e,o),this.kernel.read()):i=Aa(e,this.kernel.read()),this.bias!=null&&(i=ta(i,this.bias.read())),a!=null&&(r=re(r,a));let l=_e(i,Aa(r,this.recurrentKernel.read()));return this.activation!=null&&(l=this.activation.apply(l)),[l,l]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:Hc(this.activation),useBias:this.useBias,kernelInitializer:Bn(this.kernelInitializer),recurrentInitializer:Bn(this.recurrentInitializer),biasInitializer:Bn(this.biasInitializer),kernelRegularizer:mn(this.kernelRegularizer),recurrentRegularizer:mn(this.recurrentRegularizer),biasRegularizer:mn(this.biasRegularizer),activityRegularizer:mn(this.activityRegularizer),kernelConstraint:kr(this.kernelConstraint),recurrentConstraint:kr(this.recurrentConstraint),biasConstraint:kr(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},e),n)}}I3.className="SimpleRNNCell";we(I3);class tG extends iu{constructor(e){e.cell=new I3(e),super(e)}call(e,n){return ue(()=>{this.cell.dropoutMask!=null&&(_t(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(_t(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,s=n==null?null:n.training,i=n==null?null:n.initialState;return super.call(e,{mask:r,training:s,initialState:i})})}static fromConfig(e,n){return new e(n)}}tG.className="SimpleRNN";we(tG);class A3 extends f2{constructor(e){if(super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new ee("GRUCell does not support reset_after parameter set to true.");this.units=e.units,Dr(this.units,"units"),this.activation=Gc(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=Gc(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=In(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=In(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=In(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=An(e.kernelRegularizer),this.recurrentRegularizer=An(e.recurrentRegularizer),this.biasRegularizer=An(e.biasRegularizer),this.kernelConstraint=Nr(e.kernelConstraint),this.recurrentConstraint=Nr(e.recurrentConstraint),this.biasConstraint=Nr(e.biasConstraint),this.dropout=Tf([1,Uc([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=Tf([1,Uc([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=jt(e);const n=e[e.length-1];this.kernel=this.addWeight("kernel",[n,this.units*3],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*3],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units*3],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return ue(()=>{if(e=e,e.length!==2)throw new ee(`GRUCell expects 2 input Tensors (inputs, h, c), got ${e.length}.`);const r=n.training==null?!1:n.training;let s=e[1];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Wc({ones:()=>yo(e),rate:this.dropout,training:r,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Wc({ones:()=>yo(s),rate:this.recurrentDropout,training:r,count:3,dropoutFunc:this.dropoutFunc}));const i=this.dropoutMask,o=this.recurrentDropoutMask;let a,l,c;0<this.dropout&&this.dropout<1&&(e=re(e,i[0]));let u=Aa(e,this.kernel.read());this.useBias&&(u=ta(u,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(s=re(s,o[0]));const h=this.recurrentKernel.read(),[m,p]=Ri(h,[2*this.units,this.units],h.rank-1),y=Aa(s,m),[v,x,b]=Ri(u,3,u.rank-1),[w,E]=Ri(y,2,y.rank-1);a=this.recurrentActivation.apply(_e(v,w)),l=this.recurrentActivation.apply(_e(x,E));const N=Aa(re(l,s),p);c=this.activation.apply(_e(b,N));const C=_e(re(a,s),re(_e(1,Qn(a)),c));return[C,C]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:Hc(this.activation),recurrentActivation:Hc(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Bn(this.kernelInitializer),recurrentInitializer:Bn(this.recurrentInitializer),biasInitializer:Bn(this.biasInitializer),kernelRegularizer:mn(this.kernelRegularizer),recurrentRegularizer:mn(this.recurrentRegularizer),biasRegularizer:mn(this.biasRegularizer),activityRegularizer:mn(this.activityRegularizer),kernelConstraint:kr(this.kernelConstraint),recurrentConstraint:kr(this.recurrentConstraint),biasConstraint:kr(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},e),n)}}A3.className="GRUCell";we(A3);class nG extends iu{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new A3(e),super(e)}call(e,n){return ue(()=>{this.cell.dropoutMask!=null&&(_t(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(_t(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,s=n==null?null:n.training,i=n==null?null:n.initialState;return super.call(e,{mask:r,training:s,initialState:i})})}static fromConfig(e,n){return n.implmentation===0&&(n.implementation=1),new e(n)}}nG.className="GRU";we(nG);class m2 extends f2{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,Dr(this.units,"units"),this.activation=Gc(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=Gc(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=In(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=In(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=In(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=e.unitForgetBias,this.kernelRegularizer=An(e.kernelRegularizer),this.recurrentRegularizer=An(e.recurrentRegularizer),this.biasRegularizer=An(e.biasRegularizer),this.kernelConstraint=Nr(e.kernelConstraint),this.recurrentConstraint=Nr(e.recurrentConstraint),this.biasConstraint=Nr(e.biasConstraint),this.dropout=Tf([1,Uc([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=Tf([1,Uc([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){var n;e=jt(e);const r=e[e.length-1];this.kernel=this.addWeight("kernel",[r,this.units*4],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*4],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint);let s;if(this.useBias){if(this.unitForgetBias){const i=this.biasInitializer,o=this.units;s=new(n=class extends wo{apply(l,c){const u=i.apply([o]),h=new y3().apply([o]),m=i.apply([o*2]);return mM(mM(u,h),m)}},n.className="CustomInit",n)}else s=this.biasInitializer;this.bias=this.addWeight("bias",[this.units*4],null,s,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,n){return ue(()=>{const r=n.training==null?!1:n.training;if(e=e,e.length!==3)throw new ee(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let s=e[1];const i=e[2];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Wc({ones:()=>yo(e),rate:this.dropout,training:r,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Wc({ones:()=>yo(s),rate:this.recurrentDropout,training:r,count:4,dropoutFunc:this.dropoutFunc}));const o=this.dropoutMask,a=this.recurrentDropoutMask;let l,c,u,h;0<this.dropout&&this.dropout<1&&(e=re(e,o[0]));let m=Aa(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(s=re(s,a[0])),m=_e(m,Aa(s,this.recurrentKernel.read())),this.useBias&&(m=ta(m,this.bias.read()));const[p,y,v,x]=Ri(m,4,m.rank-1);l=this.recurrentActivation.apply(p),c=this.recurrentActivation.apply(y),u=_e(re(c,i),re(l,this.activation.apply(v))),h=this.recurrentActivation.apply(x);const b=re(h,this.activation.apply(u));return[b,b,u]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:Hc(this.activation),recurrentActivation:Hc(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Bn(this.kernelInitializer),recurrentInitializer:Bn(this.recurrentInitializer),biasInitializer:Bn(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:mn(this.kernelRegularizer),recurrentRegularizer:mn(this.recurrentRegularizer),biasRegularizer:mn(this.biasRegularizer),activityRegularizer:mn(this.activityRegularizer),kernelConstraint:kr(this.kernelConstraint),recurrentConstraint:kr(this.recurrentConstraint),biasConstraint:kr(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},e),n)}}m2.className="LSTMCell";we(m2);class rG extends iu{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new m2(e),super(e)}call(e,n){return ue(()=>{this.cell.dropoutMask!=null&&(_t(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(_t(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,s=n==null?null:n.training,i=n==null?null:n.initialState;return super.call(e,{mask:r,training:s,initialState:i})})}static fromConfig(e,n){return n.implmentation===0&&(n.implementation=1),new e(n)}}rG.className="LSTM";we(rG);class R3 extends f2{constructor(e){super(e),this.cells=e.cells}get stateSize(){const e=[];for(const n of this.cells.slice().reverse())Array.isArray(n.stateSize)?e.push(...n.stateSize):e.push(n.stateSize);return e}call(e,n){return ue(()=>{e=e;let r=e.slice(1);const s=[];for(const a of this.cells.slice().reverse())Array.isArray(a.stateSize)?s.push(r.splice(0,a.stateSize.length)):s.push(r.splice(0,1));s.reverse();const i=[];let o;for(let a=0;a<this.cells.length;++a){const l=this.cells[a];r=s[a],a===0?o=[e[0]].concat(r):o=[o[0]].concat(r),o=l.call(o,n),i.push(o.slice(1))}r=[];for(const a of i.slice().reverse())r.push(...a);return[o[0]].concat(r)})}build(e){k_(e)&&(e=e[0]),e=e;let n;this.cells.forEach((r,s)=>{Qu(`RNNCell_${s}`,()=>{r.build(e),Array.isArray(r.stateSize)?n=r.stateSize[0]:n=r.stateSize,e=[e[0],n]})}),this.built=!0}getConfig(){const e=super.getConfig(),n=i=>({className:i.getClassName(),config:i.getConfig()}),s={cells:this.cells.map(n)};return Object.assign(Object.assign({},e),s)}static fromConfig(e,n,r={}){const s=[];for(const i of n.cells)s.push(kl(i,r));return new e({cells:s})}get trainableWeights(){if(!this.trainable)return[];const e=[];for(const n of this.cells)e.push(...n.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const n of this.cells)e.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const r of this.cells)n.push(...r.trainableWeights);return n.concat(e)}return e}getWeights(){const e=[];for(const n of this.cells)e.push(...n.weights);return N_(e)}setWeights(e){const n=[];for(const r of this.cells){const s=r.weights.length,i=e.splice(s);for(let o=0;o<r.weights.length;++o)n.push([r.weights[o],i[o]])}N3(n)}}R3.className="StackedRNNCells";we(R3);function Wc(t){const{ones:e,rate:n,training:r=!1,count:s=1,dropoutFunc:i}=t,o=()=>i!=null?i(e(),n):KU(e(),n),a=()=>by(o,e,r);return!s||s<=1?Ta(a().clone()):Array(s).fill(void 0).map(a).map(c=>Ta(c.clone()))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var VAe=globalThis&&globalThis.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};class sG extends iu{constructor(e){if(e.unroll)throw new ht("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new ht("It is not possible at the moment to stack convolutional cells.");super(e),this.inputSpec=[new wr({ndim:5})]}call(e,n){return ue(()=>{if(this.cell.dropoutMask!=null&&(_t(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(_t(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),n&&n.constants)throw new ee("ConvRNN2D cell does not support constants");const r=n==null?null:n.mask,s=n==null?null:n.training,i=n==null?null:n.initialState;return super.call(e,{mask:r,training:s,initialState:i})})}computeOutputShape(e){let n=this.computeSingleOutputShape(e);return this.returnSequences||(n=[n[0],...n.slice(2)]),this.returnState&&(n=[n,...Array(2).fill([e[0],...n.slice(-3)])]),n}getInitialState(e){return ue(()=>{const{stateSize:n}=this.cell,r=e.shape,s=this.computeSingleOutputShape(r),i=[s[0],...s.slice(2)],o=Pr(i);return Array.isArray(n)?Array(n.length).fill(o):[o]})}resetStates(e,n=!1){ue(()=>{if(!this.stateful)throw new fa("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape,s=this.computeSingleOutputShape(r),i=[s[0],...s.slice(2)];if(r[0]==null)throw new ee("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.getStates()==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>Pr(i)):this.states_=[Pr(i)];else if(e==null)_t(this.states_),this.keptStates!=null&&(_t(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>Pr(i)):this.states_[0]=Pr(i);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new ee(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);n?this.keptStates.push(this.states_.slice()):_t(this.states_);for(let a=0;a<this.states_.length;++a){const l=e[a],c=i;if(!Zt(l.shape,c))throw new ee(`State ${a} is incompatible with layer ${this.name}: expected shape=${c}, received shape=${l.shape}`);this.states_[a]=l}}this.states_=this.states_.map(a=>Ta(a.clone()))})}computeSingleOutputShape(e){const{dataFormat:n,filters:r,kernelSize:s,padding:i,strides:o,dilationRate:a}=this.cell,l=n==="channelsFirst",c=e[l?3:2],u=e[l?4:3],h=Uo(c,s[0],i,o[0],a[0]),m=Uo(u,s[1],i,o[1],a[1]);return[...e.slice(0,2),...l?[r,h,m]:[h,m,r]]}}sG.className="ConvRNN2D";class P3 extends m2{constructor(e){const{filters:n,kernelSize:r,strides:s,padding:i,dataFormat:o,dilationRate:a}=e;super(Object.assign(Object.assign({},e),{units:n})),this.filters=n,Dr(this.filters,"filters"),this.kernelSize=ef(r,2,"kernelSize"),this.kernelSize.forEach(l=>Dr(l,"kernelSize")),this.strides=ef(s||1,2,"strides"),this.strides.forEach(l=>Dr(l,"strides")),this.padding=i||"valid",Mi(this.padding),this.dataFormat=o||"channelsLast",nr(this.dataFormat),this.dilationRate=ef(a||1,2,"dilationRate"),this.dilationRate.forEach(l=>Dr(l,"dilationRate"))}build(e){var n;e=jt(e);const r=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[r]==null)throw new ee(`The channel dimension of the input should be defined. Found ${e[r]}`);const s=e[r],i=4,o=this.kernelSize.concat([s,this.filters*i]);this.kernel=this.addWeight("kernel",o,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const a=this.kernelSize.concat([this.filters,this.filters*i]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",a,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let l;if(this.unitForgetBias){const c=this.biasInitializer,u=this.filters;l=new(n=class extends wo{apply(m,p){const y=c.apply([u]),v=ru([u]),x=c.apply([u*2]);return g3([y,v,x])}},n.className="CustomInit",n)}else l=this.biasInitializer;this.bias=this.addWeight("bias",[this.filters*i],null,l,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,n){return ue(()=>{if(e.length!==3)throw new ee(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);const r=n.training||!1,s=e[0],i=e[1],o=e[2],a=4;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Wc({ones:()=>yo(s),rate:this.dropout,training:r,count:a,dropoutFunc:this.dropoutFunc}));const l=this.dropoutMask,c=(J,G,X)=>!G||!G[X]?J:re(G[X],J);let u=c(s,l,0),h=c(s,l,1),m=c(s,l,2),p=c(s,l,3);0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Wc({ones:()=>yo(i),rate:this.recurrentDropout,training:r,count:a,dropoutFunc:this.dropoutFunc}));const y=this.recurrentDropoutMask;let v=c(i,y,0),x=c(i,y,1),b=c(i,y,2),w=c(i,y,3);const E=3,[N,C,S,T]=Ri(this.kernel.read(),a,E),[I,P,R,D]=this.useBias?Ri(this.bias.read(),a):[null,null,null,null];u=this.inputConv(u,N,I,this.padding),h=this.inputConv(h,C,P,this.padding),m=this.inputConv(m,S,R,this.padding),p=this.inputConv(p,T,D,this.padding);const[B,Z,z,q]=Ri(this.recurrentKernel.read(),a,E);v=this.recurrentConv(v,B),x=this.recurrentConv(x,Z),b=this.recurrentConv(b,z),w=this.recurrentConv(w,q);const M=this.recurrentActivation.apply(_e(u,v)),U=this.recurrentActivation.apply(_e(h,x)),V=_e(re(U,o),re(M,this.activation.apply(_e(m,b)))),ne=re(this.recurrentActivation.apply(_e(p,w)),this.activation.apply(V));return[ne,ne,V]})}getConfig(){const e=super.getConfig(),n=VAe(e,["units"]),r={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},n),r)}inputConv(e,n,r,s){const i=fd(e,n,this.strides,s||"valid",this.dataFormat==="channelsFirst"?"NCHW":"NHWC",this.dilationRate);return r?ta(i,r,this.dataFormat):i}recurrentConv(e,n){return fd(e,n,1,"same",this.dataFormat==="channelsFirst"?"NCHW":"NHWC")}}P3.className="ConvLSTM2DCell";we(P3);class iG extends sG{constructor(e){const n=new P3(e);super(Object.assign(Object.assign({},e),{cell:n}))}static fromConfig(e,n){return new e(n)}}iG.className="ConvLSTM2D";we(iG);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class D3 extends wt{constructor(e){super(e),this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(this.noiseShape==null)return this.noiseShape;const n=e.shape,r=[];for(let s=0;s<this.noiseShape.length;++s)r.push(this.noiseShape[s]==null?n[s]:this.noiseShape[s]);return r}call(e,n){return ue(()=>{this.invokeCallHook(e,n);const r=rt(e);if(0<this.rate&&this.rate<1){const s=n.training==null?!1:n.training,i=this.getNoiseShape(r);return by(()=>KU(r,this.rate,i,this.seed),()=>r,s)}return e})}getConfig(){const e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},n=super.getConfig();return Object.assign(e,n),e}dispose(){return super.dispose()}}D3.className="Dropout";we(D3);class oG extends D3{constructor(e){super(e),this.inputSpec=[{ndim:3}]}getNoiseShape(e){const n=e.shape;return[n[0],1,n[2]]}}oG.className="SpatialDropout1D";we(oG);class O3 extends wt{constructor(e){if(super(e),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.batchInputShape==null&&e.inputShape==null&&e.inputDim!=null){let n=null;e.batchSize!=null&&(n=e.batchSize),this.batchInputShape=[n,e.inputDim]}this.units=e.units,Dr(this.units,"units"),this.activation=Gc(e.activation),e.useBias!=null&&(this.useBias=e.useBias),this.kernelInitializer=In(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=In(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=Nr(e.kernelConstraint),this.biasConstraint=Nr(e.biasConstraint),this.kernelRegularizer=An(e.kernelRegularizer),this.biasRegularizer=An(e.biasRegularizer),this.activityRegularizer=An(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){e=jt(e);const n=e[e.length-1];this.kernel==null&&(this.kernel=this.addWeight("kernel",[n,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:n}}],this.built=!0}computeOutputShape(e){e=jt(e);const n=e.slice();return n[n.length-1]=this.units,n}call(e,n){return ue(()=>{this.invokeCallHook(e,n);const r=rt(e),s=VU(this.activation.getClassName());let i;return s!=null?i=Aa(r,this.kernel.read(),s,this.bias?this.bias.read():null):(i=Aa(r,this.kernel.read()),this.bias!=null&&(i=ta(i,this.bias.read())),this.activation!=null&&(i=this.activation.apply(i))),i})}getConfig(){const e={units:this.units,activation:Hc(this.activation),useBias:this.useBias,kernelInitializer:Bn(this.kernelInitializer),biasInitializer:Bn(this.biasInitializer),kernelRegularizer:mn(this.kernelRegularizer),biasRegularizer:mn(this.biasRegularizer),activityRegularizer:mn(this.activityRegularizer),kernelConstraint:kr(this.kernelConstraint),biasConstraint:kr(this.biasConstraint)},n=super.getConfig();return Object.assign(e,n),e}}O3.className="Dense";we(O3);class aG extends wt{constructor(e){e=e||{},super(e),this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){e=jt(e);for(const n of e.slice(1))if(n==null)throw new ee(`The shape of the input to "Flatten" is not fully defined (got ${e.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[e[0],Dc(e,1)]}call(e,n){return ue(()=>{this.invokeCallHook(e,n);let r=rt(e);if(this.dataFormat==="channelsFirst"&&r.rank>1){const s=[0];for(let i=2;i<r.rank;++i)s.push(i);s.push(1),r=Lt(r,s)}return x3e(r)})}getConfig(){const e={};this.dataFormat!=null&&(e.dataFormat=this.dataFormat);const n=super.getConfig();return Object.assign(e,n),e}}aG.className="Flatten";we(aG);class lG extends wt{constructor(e){super(e),this.supportsMasking=!0,this.activation=Gc(e.activation)}call(e,n){return ue(()=>{this.invokeCallHook(e,n);const r=rt(e);return this.activation.apply(r)})}getConfig(){const e={activation:Hc(this.activation)},n=super.getConfig();return Object.assign(e,n),e}}lG.className="Activation";we(lG);class cG extends wt{constructor(e){super(e),this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,n){return ue(()=>(e=rt(e),b3e(e,this.n)))}getConfig(){const e={n:this.n},n=super.getConfig();return Object.assign(e,n),e}}cG.className="RepeatVector";we(cG);class uG extends wt{constructor(e){super(e),this.targetShape=e.targetShape;for(let n=0;n<this.targetShape.length;++n)this.isUnknown(this.targetShape[n])&&(this.targetShape[n]=null)}isUnknown(e){return e<0||e==null}fixUnknownDimension(e,n){const r="Total size of new array must be unchanged.",s=n.slice();let i=1,o=null;for(let l=0;l<s.length;++l){const c=s[l];if(this.isUnknown(c))if(o===null)o=l;else throw new ee("Can only specifiy one unknown dimension.");else i*=c}const a=Dc(e);if(o!==null){if(i===0||a%i!==0)throw new ee(r);s[o]=a/i}else if(a!==i)throw new ee(r);return s}computeOutputShape(e){let n=!1;for(let r=0;r<e.length;++r)if(this.isUnknown(e[r])){n=!0;break}return n?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,n){return ue(()=>{this.invokeCallHook(e,n);const r=rt(e),s=r.shape,i=s.slice(0,1).concat(this.fixUnknownDimension(s.slice(1),this.targetShape));return ie(r,i)})}getConfig(){const e={targetShape:this.targetShape},n=super.getConfig();return Object.assign(e,n),e}}uG.className="Reshape";we(uG);class dG extends wt{constructor(e){if(super(e),e.dims==null)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${e.dims} instead.`);const n=Ko(1,e.dims.length+1);if(!Zt(e.dims.slice().sort(),n))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new wr({ndim:this.dims.length+1})]}computeOutputShape(e){e=jt(e);const n=e.slice();return this.dims.forEach((r,s)=>{n[s+1]=e[r]}),n}call(e,n){return Lt(rt(e),this.dimsIncludingBatch)}getConfig(){const e={dims:this.dims},n=super.getConfig();return Object.assign(e,n),e}}dG.className="Permute";we(dG);class hG extends wt{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null?this.maskValue=e.maskValue==null?0:e.maskValue:this.maskValue=0}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={maskValue:this.maskValue};return Object.assign(n,e),n}computeMask(e,n){const r=rt(e),s=-1;return m_(z1(r,this.maskValue),s)}call(e,n){return ue(()=>{this.invokeCallHook(e,n);const r=rt(e),s=-1,i=!0,o=m_(z1(r,this.maskValue),s,i);return re(r,Me(o,r.dtype))})}}hG.className="Masking";we(hG);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class fG extends wt{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",e.batchInputShape==null&&e.inputShape==null){let n=null;e.batchSize!=null&&(n=e.batchSize),e.inputLength==null?this.batchInputShape=[n,null]:this.batchInputShape=[n].concat(rn(e.inputLength))}this.inputDim=e.inputDim,Dr(this.inputDim,"inputDim"),this.outputDim=e.outputDim,Dr(this.outputDim,"outputDim"),this.embeddingsInitializer=In(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=An(e.embeddingsRegularizer),this.activityRegularizer=An(e.activityRegularizer),this.embeddingsConstraint=Nr(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,n){return ue(()=>this.maskZero?(e=rt(e),z1(e,Mt(e))):null)}computeOutputShape(e){if(e=jt(e),this.inputLength==null)return[...e,this.outputDim];const n=rn(this.inputLength);if(n.length!==e.length-1)throw new ee(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);{let r=0;for(let s=0;s<n.length;++s){const i=n[s],o=e[s+1];if(i!=null&&o!=null&&i!==o)throw new ee(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);i==null&&(n[r]=o),r++}}return[e[0],...n,this.outputDim]}call(e,n){return ue(()=>{this.invokeCallHook(e,n);let r=rt(e);r.dtype!=="int32"&&(r=Ia(r,"int32"));const s=qU(this.embeddings.read(),ie(r,[r.size]));return ie(s,jt(this.computeOutputShape(r.shape)))})}getConfig(){const e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:Bn(this.embeddingsInitializer),embeddingsRegularizer:mn(this.embeddingsRegularizer),activityRegularizer:mn(this.activityRegularizer),embeddingsConstraint:kr(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},n=super.getConfig();return Object.assign(e,n),e}}fG.className="Embedding";we(fG);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class zd extends wt{constructor(e){super(e||{}),this.supportsMasking=!0}mergeFunction(e){throw new ht}computeElementwiseOpOutputShape(e,n){if(e==null||n==null)return null;if(e.length<n.length)return this.computeElementwiseOpOutputShape(n,e);if(n.length===0)return e;const r=e.slice(0,e.length-n.length);for(let s=0;s<n.length;++s){const i=e[e.length-n.length+s],o=n[s];if(i==null||o==null||i<0||o<0)r.push(null);else if(i===1)r.push(o);else if(o===1)r.push(i);else{if(i!==o)throw new ee("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(n));r.push(i)}}return r}build(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[jt(e)]),e=e,e.length<2)throw new ee(`A merge layer should be called on an Array of at least 2 inputs. Got ${e.length} input(s).`);let n=[];for(const i of e)i!=null&&i[0]!==null&&n.push(i[0]);if(n=Pc(n),n.length>1)throw new ee(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(e)}.`);let r=e[0]==null?null:e[0].slice(1);for(let i=1;i<e.length;++i){const o=e[i]==null?null:e[i].slice(1);r=this.computeElementwiseOpOutputShape(r,o)}const s=e.map(i=>i.length);e.indexOf(null)===-1&&Pc(s).length===1?this.reshapeRequired=!1:this.reshapeRequired=!0}call(e,n){return ue(()=>{if(e=e,this.reshapeRequired){const r=[],s=e.map(i=>i.rank);if(s.indexOf(null)===-1){const i=Uc(s);for(let o of e){const a=o.rank;for(let l=0;l<i-a;++l)o=gy(o,1);r.push(o)}return this.mergeFunction(r)}else{let i=!1;for(const l of e){const c=l.rank;if(c==null){const u=l.shape,h=u[0],m=u.slice(1).concat([h]);let p=ie(l,[h].concat(Dc(u.slice(1))));p=Lt(p,[1,0]),p=ie(p,m),r.push(p),i=!0}else if(c>1){const u=Ko(1,c).concat([0]);r.push(Lt(l,u)),i=!0}else r.push(l)}let o=this.mergeFunction(r);const a=o.rank;if(i){if(a==null){const l=o.shape,c=l.length,u=l[c-1],h=[u].concat(l.slice(0,l.length-1));o=ie(Lt(ie(o,[-1,u]),[1,0]),h)}else if(a>1){const l=[a-1].concat(Ko(0,a-1));o=Lt(o,l)}}return o}}else return this.mergeFunction(e)})}computeOutputShape(e){e=e;let n;e[0]==null?n=null:n=e[0].slice(1);for(let s=1;s<e.length;++s){const i=e[s]==null?null:e[s].slice(1);n=this.computeElementwiseOpOutputShape(n,i)}let r=[];for(const s of e)s!=null&&s[0]!==null&&r.push(s[0]);return r=Pc(r),r.length===1?n=r.concat(n):n=[null].concat(n),n}computeMask(e,n){return ue(()=>{if(n==null)return null;if(!Array.isArray(n))throw new ee("`mask` should be an Array");if(!Array.isArray(e))throw new ee("`inputs` should be an Array");if(n.length!==e.length)throw new ee(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${e.length} vs ${n.length})`);if(n.every(s=>s==null))return null;n=n.map(s=>s==null?s:Ms(s,0));let r=n[0];for(let s=1;s<n.length-1;++s)r=Al(r,n[s]);return r})}}class mG extends zd{constructor(e){super(e)}mergeFunction(e){return ue(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=_e(n,e[r]);return n})}}mG.className="Add";we(mG);class pG extends zd{constructor(e){super(e)}mergeFunction(e){return ue(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=re(n,e[r]);return n})}}pG.className="Multiply";we(pG);class gG extends zd{constructor(e){super(e)}mergeFunction(e){return ue(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=_e(n,e[r]);return re(1/e.length,n)})}}gG.className="Average";we(gG);class yG extends zd{constructor(e){super(e)}mergeFunction(e){return ue(()=>{let n=e[0];for(let r=1;r<e.length;++r)n=nu(n,e[r]);return n})}}yG.className="Maximum";we(yG);class bG extends zd{constructor(e){super(e)}mergeFunction(e){return ue(()=>{let n=e[0];for(let r=1;r<e.length;++r)n=Eg(n,e[r]);return n})}}bG.className="Minimum";we(bG);class vG extends zd{constructor(e){super(e),this.DEFAULT_AXIS=-1,e==null&&(e={}),this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!(Array.isArray(e)&&Array.isArray(e[0]))||e.length===1)throw new ee("A `Concatenate` layer should be called on a list of at least 2 inputs");e=e;let n=!0;for(const s of e)if(s!=null){n=!1;break}if(n)return;const r=[];for(let s=0;s<e.length;++s){const i=e[s].slice();i.splice(this.axis,1);let o=!1;for(const a of r)if(Zt(a,i)){o=!0;break}o||r.push(i)}if(r.length>1)throw new ee("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return ue(()=>g3(e,this.axis))}computeOutputShape(e){if(!(Array.isArray(e)&&Array.isArray(e[0])))throw new ee("A `Concatenate` layer should be called on a list of inputs.");const n=e,r=n[0].slice(),s=this.axis<0?r.length+this.axis:this.axis;for(const i of n.slice(1)){if(r[s]==null||i[s]==null){r[s]=null;break}r[s]+=i[s]}return r}computeMask(e,n){if(n==null)return null;if(!Array.isArray(n))throw new ee("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new ee("`inputs` should be an array for Concatenate");if(n.length!==e.length)throw new ee(`Mismatch in the length of mask (${n.length}) and the legnth of inputs (${e.length})`);return ue(()=>{let r=!0;if(n.forEach(o=>{if(o!=null){r=!1;return}}),r)return null;const s=[];for(let o=0;o<e.length;++o)n[o]==null?s.push(Me(yo(e[o]),"bool")):n[o].rank<e[o].rank?s.push(Ms(n[o],-1)):s.push(n[o]);const i=Us(s,this.axis);return x7(i,-1,!1)})}getConfig(){const e={axis:this.axis},n=super.getConfig();return Object.assign(e,n),e}}vG.className="Concatenate";we(vG);function Ym(t,e){for(;t<0;)t+=e;return t}function jAe(t,e,n){if(t.shape.length>3||e.shape.length>3)throw new ht("batchDot is not implemented for tensors of 4D or higher rank yet");if(F(t.shape.length>=2,()=>`batchDot requires the rank of x to be >= 2, but got ${t.shape.length}`),F(t.shape.length>=2,()=>`batchDot requires the rank of y to be >= 2, but got ${e.shape.length}`),typeof n=="number"&&(n=[n,n]),t.dtype==="complex64"||e.dtype==="complex64")throw new ht("batchDot is not implemented for complex64-type Tensors yet.");const r=t.shape.length,s=e.shape.length;n==null&&(n=[r-1,s-2]);const i=n;return ue(()=>{let o;if(r>s){o=r-s;const l=[];for(let c=0;c<o;++c)l.push(1);e=ie(e,e.shape.concat(l))}else if(s>r){o=s-r;const l=[];for(let c=0;c<o;++c)l.push(1);t=ie(t,t.shape.concat(l))}else o=0;let a;if(t.shape.length===2&&e.shape.length===2)i[0]===i[1]?a=Xe(re(t,e),i[0]):a=Xe(re(Lt(t,[1,0]),e),i[1]);else{const l=i[0]!==t.shape.length-1,c=i[1]===e.shape.length-1;a=qt(t,e,l,c)}if(o>0){let l;r>s?l=r+s-3:l=r-1;const c=[];for(let u=l;u<l+o;++u)c.push(u);a=uy(a,c)}return a.shape.length===1&&(a=Ms(a,1)),a})}class xG extends zd{constructor(e){super(e),this.axes=e.axes,this.normalize=e.normalize==null?!1:e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){F(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=e[0],r=e[1];if(n.length>3||r.length>3)throw new ht("Dot layer does not support tensors of 4D or higher rank yet.");const s=this.interpretAxes(n,r);if(n[s[0]]!==r[s[1]])throw new ee(`Dimension incompatibility: ${n[s[0]]} !== ${r[s[1]]}`)}mergeFunction(e){if(e.length!==2)throw new ee(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${e.length} input(s).`);let n=e[0],r=e[1],s;return Array.isArray(this.axes)?s=this.axes.map((i,o)=>Ym(i,e[o].shape.length)):s=[Ym(this.axes,n.shape.length),Ym(this.axes,r.shape.length)],this.normalize&&(n=G1(n,s[0]),r=G1(r,s[1])),jAe(n,r,s)}interpretAxes(e,n){let r;return Array.isArray(this.axes)?r=this.axes:r=[Ym(this.axes,e.length),Ym(this.axes,n.length)],r}computeOutputShape(e){F(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=e[0].slice(),r=e[1].slice();if(n.length>3||r.length>3)throw new ht("Dot layer does not support tensors of 4D or higher rank yet.");const s=this.interpretAxes(n,r);n.splice(s[0],1),r.splice(s[1],1),r.splice(0,1);const i=n.concat(r);return i.length===1&&i.push(1),i}computeMask(e,n){return null}getConfig(){const e={axes:this.axes,normalize:this.normalize},n=super.getConfig();return Object.assign(e,n),e}}xG.className="Dot";we(xG);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class wG extends wt{constructor(e){super(e),this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={stddev:this.stddev};return Object.assign(n,e),n}call(e,n){return ue(()=>{this.invokeCallHook(e,n);const r=rt(e);return by(()=>_e(a2(r.shape,0,this.stddev),r),()=>r,n.training||!1)})}}wG.className="GaussianNoise";we(wG);class EG extends wt{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={rate:this.rate};return Object.assign(n,e),n}call(e,n){return ue(()=>{this.invokeCallHook(e,n);const r=rt(e);return this.rate>0&&this.rate<1?by(()=>{const i=Math.sqrt(this.rate/(1-this.rate));return re(r,a2(r.shape,1,i))},()=>r,n.training||!1):r})}}EG.className="GaussianDropout";we(EG);class kG extends wt{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||rt(e).shape}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={rate:this.rate};return Object.assign(n,e),n}call(e,n){return ue(()=>{if(this.rate<1&&this.rate>0){const r=this._getNoiseShape(e);return by(()=>{const i=rt(e),o=1.6732632423543772,a=1.0507009873554805,l=-o*a;let c=Pd(cy(r),this.rate);c=Ia(c,"float32");const u=((1-this.rate)*(1+this.rate*l**2))**-.5,h=-u*l*this.rate,m=_e(re(i,c),re(_e(c,-1),l));return _e(re(m,u),h)},()=>rt(e),n.training||!1)}return e})}}kG.className="AlphaDropout";we(kG);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function _g(t,e,n,r,s,i=.001){let o;if(t.rank===2)o=wNe(t,e,n,r,s,i);else if(t.rank===3)o=kNe(t,e,n,r,s,i);else if(t.rank===4)o=CNe(t,e,n,r,s,i);else throw new ht(`batchNormalization is not implemented for array of rank ${t.rank} yet`);return o}function UAe(t,e,n,r,s=.001){return ue(()=>{const i=bI(t,r),o=i.mean,a=i.variance;return[_g(t,o,a,n,e,s),o,a]})}function HAe(t,e,n,r,s=.001){return ue(()=>{const i=bI(t,r),o=i.mean,a=i.variance,l=[];for(const y of Ko(0,t.rank))r.indexOf(y)!==-1?l.push(1):l.push(t.shape[y]);const c=ie(o,l),u=ie(a,l),h=e==null?null:ie(e,l),m=n==null?null:ie(n,l);return[_g(t,c,u,m,h,s),o,a]})}function GAe(t,e,n,r,s=.001){return Zt(r.slice().sort(),Ko(0,t.rank-1))?UAe(t,e,n,r,s):HAe(t,e,n,r,s)}class NG extends wt{constructor(e){e==null&&(e={}),super(e),this.supportsMasking=!0,this.axis=e.axis==null?-1:e.axis,this.momentum=e.momentum==null?.99:e.momentum,this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=In(e.betaInitializer||"zeros"),this.gammaInitializer=In(e.gammaInitializer||"ones"),this.movingMeanInitializer=In(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=In(e.movingVarianceInitializer||"ones"),this.betaConstraint=Nr(e.betaConstraint),this.gammaConstraint=Nr(e.gammaConstraint),this.betaRegularizer=An(e.betaRegularizer),this.gammaRegularizer=An(e.gammaRegularizer)}build(e){e=jt(e);const n=this.axis>=0?this.axis:this.axis+e.length,r=e[n];if(r==null)throw new ee(`Axis ${n} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(e)}.`);this.inputSpec=[new wr({ndim:e.length,axes:{[n]:r}})];const s=[r];this.scale&&(this.gamma=this.addWeight("gamma",s,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",s,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",s,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",s,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,n){return ue(()=>{const r=n.training==null?!1:n.training,s=rt(e),i=s.shape,o=i.length,a=Ko(0,o),l=this.axis>=0?this.axis:this.axis+o;a.splice(l,1);const c=yd(1,o);c[l]=i[l];const u=a.slice();u.sort();const h=!Zt(u,Ko(0,o).slice(0,o-1)),m=()=>{if(h){const w=ie(this.movingMean.read(),c),E=ie(this.movingVariance.read(),c),N=this.center?ie(this.beta.read(),c):null,C=this.scale?ie(this.gamma.read(),c):null;return _g(s,w,E,N,C,this.epsilon)}else return _g(s,this.movingMean.read(),this.movingVariance.read(),this.beta==null?null:this.beta.read(),this.gamma==null?null:this.gamma.read(),this.epsilon)};if(!r)return m();const[p,y,v]=GAe(s,this.gamma.read(),this.beta.read(),a,this.epsilon),x=(w,E,N)=>{ue(()=>{const C=1-N,S=w.read(),T=re(et(S,E),C);w.write(et(S,T))})};return(()=>{x(this.movingMean,y,this.momentum),x(this.movingVariance,v,this.momentum)})(),p})}getConfig(){const e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Bn(this.betaInitializer),gammaInitializer:Bn(this.gammaInitializer),movingMeanInitializer:Bn(this.movingMeanInitializer),movingVarianceInitializer:Bn(this.movingVarianceInitializer),betaRegularizer:mn(this.betaRegularizer),gammaRegularizer:mn(this.gammaRegularizer),betaConstraint:kr(this.betaConstraint),gammaConstraint:kr(this.gammaConstraint)},n=super.getConfig();return Object.assign(e,n),e}}NG.className="BatchNormalization";we(NG);class CG extends wt{constructor(e){if(e==null&&(e={}),super(e),this.axis=e.axis==null?-1:e.axis,typeof this.axis=="number"){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else if(Array.isArray(this.axis)){for(const n of this.axis)if(!Number.isInteger(n))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}else throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=In(e.betaInitializer||"zeros"),this.gammaInitializer=In(e.gammaInitializer||"ones"),this.betaRegularizer=An(e.betaRegularizer),this.gammaRegularizer=An(e.gammaRegularizer),this.supportsMasking=!0}build(e){e=jt(e);const n=e.length;typeof this.axis=="number"&&(this.axis=[this.axis]);for(let i=0;i<this.axis.length;++i)this.axis[i]<0&&(this.axis[i]+=n);for(const i of this.axis)if(i<0||i>=n)throw new Error(`Invalid axis: ${i}`);if(this.axis.length!==Pc(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);const r=this.axis.map(i=>e[i]),s=!0;this.scale?this.gamma=this.addWeight("gamma",r,"float32",this.gammaInitializer,this.gammaRegularizer,s):this.gamma=null,this.center?this.beta=this.addWeight("beta",r,"float32",this.betaInitializer,this.betaRegularizer,s):this.beta=null,this.built=!0}call(e,n){const r=rt(e),s=r.shape,i=s.length;return ue(()=>{let{mean:a,variance:l}=bI(r,this.axis,!0);const c=yd(1,i);for(const v of this.axis)c[v]=s[v];const u=v=>v!=null&&v.shape.length!==i?ie(v,c):v;let h=this.scale?u(this.gamma.read()):null,m=this.center?u(this.beta.read()):null;const p=[],y=[];for(let v=0;v<i;++v)this.axis.indexOf(v)!==-1?(p.push(s[v]),y.push(1)):(p.push(1),y.push(s[v]));return a=zo(a,p),l=zo(l,p),h!=null&&(h=zo(h,y)),m!=null&&(m=zo(m,y)),_g(r,a,l,m,h,this.epsilon)})}getConfig(){const e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Bn(this.betaInitializer),gammaInitializer:Bn(this.gammaInitializer),betaRegularizer:mn(this.betaRegularizer),gammaRegularizer:mn(this.gammaRegularizer)},n=super.getConfig();return Object.assign(e,n),e}}CG.className="LayerNormalization";we(CG);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function WAe(t,e,n){return ue(()=>{if(t.rank!==4)throw new ee(`temporalPadding expects input tensor to be 4-D, but received a ${t.rank}-D tensor.`);if(e==null&&(e=[[1,1],[1,1]]),e.length!==2||e[0].length!==2||e[1].length!==2)throw new ee("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(n==null&&(n=Zo()),n!=="channelsLast"&&n!=="channelsFirst")throw new ee(`Unknown data format: ${n}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let r;return n==="channelsFirst"?r=[[0,0],[0,0],e[0],e[1]]:r=[[0,0],e[0],e[1],[0,0]],vI(t,r)})}class _G extends wt{constructor(e){if(e==null&&(e={}),super(e),this.dataFormat=e.dataFormat==null?Zo():e.dataFormat,e.padding==null)this.padding=[[1,1],[1,1]];else if(typeof e.padding=="number")this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,e.padding.length!==2)throw new ee(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${e.padding.length} array.`);let n,r;if(typeof e.padding[0]=="number")n=[e.padding[0],e.padding[0]],r=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,e.padding[0].length!==2)throw new ee(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${e.padding[0].length} array.`);if(n=e.padding[0],e.padding[1].length!==2)throw new ee(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${e.padding[1].length} array.`);r=e.padding[1]}this.padding=[n,r]}this.inputSpec=[new wr({ndim:4})]}computeOutputShape(e){e=jt(e);let n,r;return this.dataFormat==="channelsFirst"?(e[2]!=null&&e[2]>=0?n=e[2]+this.padding[0][0]+this.padding[0][1]:n=null,e[3]!=null&&e[3]>=0?r=e[3]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],e[1],n,r]):(e[1]!=null&&e[1]>=0?n=e[1]+this.padding[0][0]+this.padding[0][1]:n=null,e[2]!=null&&e[2]>=0?r=e[2]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],n,r,e[3]])}call(e,n){return ue(()=>WAe(rt(e),this.padding,this.dataFormat))}getConfig(){const e={padding:this.padding,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}_G.className="ZeroPadding2D";we(_G);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function p2(t,e,n,r,s,i){return ue(()=>{nr(s),UU(i),Mi(r),n==null&&(n=[1,1]),r==null&&(r="valid"),s==null&&(s=Zo()),i==null&&(i="max"),t=$3(t,s);let o;const a=r==="same"?"same":"valid";return i==="max"?o=yI(t,e,n,a):o=aI(t,e,n,a),s==="channelsFirst"&&(o=Lt(o,[0,3,1,2])),o})}function SG(t,e,n,r,s,i){return ue(()=>{nr(s),UU(i),Mi(r),n==null&&(n=[1,1,1]),r==null&&(r="valid"),s==null&&(s=Zo()),i==null&&(i="max"),t=GH(t,s);let o;const a=r==="same"?"same":"valid";return i==="max"?o=c_e(t,e,n,a):o=dNe(t,e,n,a),s==="channelsFirst"&&(o=Lt(o,[0,4,1,2,3])),o})}class TG extends wt{constructor(e){if(e.poolSize==null&&(e.poolSize=2),super(e),typeof e.poolSize=="number")this.poolSize=[e.poolSize];else if(Array.isArray(e.poolSize)&&e.poolSize.length===1&&typeof e.poolSize[0]=="number")this.poolSize=e.poolSize;else throw new ee(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.poolSize)}`);if(Dr(this.poolSize,"poolSize"),e.strides==null)this.strides=this.poolSize;else if(typeof e.strides=="number")this.strides=[e.strides];else if(Array.isArray(e.strides)&&e.strides.length===1&&typeof e.strides[0]=="number")this.strides=e.strides;else throw new ee(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.strides)}`);Dr(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,Mi(this.padding),this.inputSpec=[new wr({ndim:3})]}computeOutputShape(e){e=jt(e);const n=Uo(e[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],n,e[2]]}call(e,n){return ue(()=>{this.invokeCallHook(e,n),e=gy(rt(e),2);const r=this.poolingFunction(rt(e),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return uy(r,[2])})}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},n=super.getConfig();return Object.assign(e,n),e}}class $G extends TG{constructor(e){super(e)}poolingFunction(e,n,r,s,i){return nr(i),Mi(s),p2(e,n,r,s,i,"max")}}$G.className="MaxPooling1D";we($G);class IG extends TG{constructor(e){super(e)}poolingFunction(e,n,r,s,i){return nr(i),Mi(s),p2(e,n,r,s,i,"avg")}}IG.className="AveragePooling1D";we(IG);class AG extends wt{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==2)throw new ee(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides];Dr(this.poolSize,"poolSize"),Dr(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,nr(this.dataFormat),Mi(this.padding),this.inputSpec=[new wr({ndim:4})]}computeOutputShape(e){e=jt(e);let n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2];return n=Uo(n,this.poolSize[0],this.padding,this.strides[0]),r=Uo(r,this.poolSize[1],this.padding,this.strides[1]),this.dataFormat==="channelsFirst"?[e[0],e[1],n,r]:[e[0],n,r,e[3]]}call(e,n){return ue(()=>(this.invokeCallHook(e,n),this.poolingFunction(rt(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class RG extends AG{constructor(e){super(e)}poolingFunction(e,n,r,s,i){return nr(i),Mi(s),p2(e,n,r,s,i,"max")}}RG.className="MaxPooling2D";we(RG);class PG extends AG{constructor(e){super(e)}poolingFunction(e,n,r,s,i){return nr(i),Mi(s),p2(e,n,r,s,i,"avg")}}PG.className="AveragePooling2D";we(PG);class DG extends wt{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==3)throw new ee(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides,e.strides];Dr(this.poolSize,"poolSize"),Dr(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,nr(this.dataFormat),Mi(this.padding),this.inputSpec=[new wr({ndim:5})]}computeOutputShape(e){e=jt(e);let n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2],s=this.dataFormat==="channelsFirst"?e[4]:e[3];return n=Uo(n,this.poolSize[0],this.padding,this.strides[0]),r=Uo(r,this.poolSize[1],this.padding,this.strides[1]),s=Uo(s,this.poolSize[2],this.padding,this.strides[2]),this.dataFormat==="channelsFirst"?[e[0],e[1],n,r,s]:[e[0],n,r,s,e[4]]}call(e,n){return ue(()=>(this.invokeCallHook(e,n),this.poolingFunction(rt(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class OG extends DG{constructor(e){super(e)}poolingFunction(e,n,r,s,i){return nr(i),Mi(s),SG(e,n,r,s,i,"max")}}OG.className="MaxPooling3D";we(OG);class LG extends DG{constructor(e){super(e)}poolingFunction(e,n,r,s,i){return nr(i),Mi(s),SG(e,n,r,s,i,"avg")}}LG.className="AveragePooling3D";we(LG);class MG extends wt{constructor(e){super(e),this.inputSpec=[new wr({ndim:3})]}computeOutputShape(e){return[e[0],e[2]]}call(e,n){throw new ht}}class zG extends MG{constructor(e){super(e||{})}call(e,n){return ue(()=>{const r=rt(e);return cr(r,1)})}}zG.className="GlobalAveragePooling1D";we(zG);class FG extends MG{constructor(e){super(e||{})}call(e,n){return ue(()=>{const r=rt(e);return jo(r,1)})}}FG.className="GlobalMaxPooling1D";we(FG);class BG extends wt{constructor(e){super(e),this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,nr(this.dataFormat),this.inputSpec=[new wr({ndim:4})]}computeOutputShape(e){return e=e,this.dataFormat==="channelsLast"?[e[0],e[3]]:[e[0],e[1]]}call(e,n){throw new ht}getConfig(){const e={dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class VG extends BG{call(e,n){return ue(()=>{const r=rt(e);return this.dataFormat==="channelsLast"?cr(r,[1,2]):cr(r,[2,3])})}}VG.className="GlobalAveragePooling2D";we(VG);class jG extends BG{call(e,n){return ue(()=>{const r=rt(e);return this.dataFormat==="channelsLast"?jo(r,[1,2]):jo(r,[2,3])})}}jG.className="GlobalMaxPooling2D";we(jG);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class UG extends wt{constructor(e){super(e),this.layer=e.layer}build(e){this.built=!0}get trainable(){return this.layer!=null?this.layer.trainable:!1}set trainable(e){this.layer!=null&&(this.layer.trainable=e)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(e){this.layer.setWeights(e)}getConfig(){const e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},n=super.getConfig();return Object.assign(e,n),e}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.layer!=null&&this.layer.setFastWeightInitDuringBuild(e)}static fromConfig(e,n,r={}){const s=n.layer,i=kl(s,r);delete n.layer;const o={layer:i};return Object.assign(o,n),new e(o)}}class HG extends UG{constructor(e){super(e),this.supportsMasking=!0}build(e){if(e=jt(e),e.length<3)throw new ee(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(e)}`);this.inputSpec=[{shape:e}];const n=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(n),this.layer.built=!0),super.build(e)}computeOutputShape(e){e=jt(e);const n=[e[0]].concat(e.slice(2)),r=this.layer.computeOutputShape(n),s=e[1];return[r[0],s].concat(r.slice(1))}call(e,n){return ue(()=>(e=rt(e),eG((o,a)=>[rt(this.layer.call(o,n)),[]],e,[],!1,null,null,!1,!0)[1]))}}HG.className="TimeDistributed";we(HG);function qAe(t){Md(f3e,"BidirectionalMergeMode",t)}const KAe="concat";class GG extends UG{constructor(e){super(e);const n=e.layer.getConfig(),r={};r.className=e.layer.getClassName(),r.config=n,this.forwardLayer=kl(r),n.goBackwards=n.goBackwards!==!0;const s={};if(s.className=e.layer.getClassName(),s.config=n,this.backwardLayer=kl(s),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=e.mergeMode===void 0?KAe:e.mergeMode,qAe(this.mergeMode),e.weights)throw new ht("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,this.forwardLayer!=null&&(this.forwardLayer.trainable=e),this.backwardLayer!=null&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){const n=e.length,r=Math.floor(n/2);this.forwardLayer.setWeights(e.slice(0,r)),this.backwardLayer.setWeights(e.slice(r))}computeOutputShape(e){let n=this.forwardLayer.computeOutputShape(e);Array.isArray(n)&&Array.isArray(n[0])||(n=[n]),n=n;let r,s,i;return this.returnState&&(i=n.slice(1)),r=n[0],r=r,this.mergeMode==="concat"?(r[r.length-1]*=2,s=[r]):this.mergeMode==null?s=[r,r.slice()]:s=[r],this.returnState?this.mergeMode==null?s.concat(i).concat(i.slice()):[r].concat(i).concat(i.slice()):zs(s)}apply(e,n){let r=n==null?null:n.initialState,s=n==null?null:n.constants;n==null&&(n={});const i=QH(e,r,s,this.numConstants);if(e=i.inputs,r=i.initialState,s=i.constants,Array.isArray(e)&&(r=e.slice(1),e=e[0]),(r==null||r.length===0)&&s==null)return super.apply(e,n);const o=[],a=[];if(r!=null){const c=r.length;if(c%2>0)throw new ee("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");n.initialState=r,o.push(...r);const u=r.map(h=>new wr({shape:h.shape}));this.forwardLayer.stateSpec=u.slice(0,c/2),this.backwardLayer.stateSpec=u.slice(c/2),a.push(...u)}if(s!=null)throw new ht("Support for constants in Bidirectional layers is not implemented yet.");const l=o[0]instanceof za;for(const c of o)if(c instanceof za!==l)throw new ee("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(l){const c=[e].concat(o),u=this.inputSpec.concat(a),h=this.inputSpec;this.inputSpec=u;const m=super.apply(c,n);return this.inputSpec=h,m}else return super.apply(e,n)}call(e,n){return ue(()=>{const r=n.initialState;let s,i;if(r==null)s=this.forwardLayer.call(e,n),i=this.backwardLayer.call(e,n);else{const l=r.slice(0,r.length/2),c=r.slice(r.length/2);s=this.forwardLayer.call(e,Object.assign(n,{initialState:l})),i=this.backwardLayer.call(e,Object.assign(n,{initialState:c}))}let o;this.returnState&&(Array.isArray(s)&&(o=s.slice(1).concat(i.slice(1))),s=s[0],i=i[0]),this.returnSequences&&(i=pd(i,1));let a;return this.mergeMode==="concat"?a=g3([s,i]):this.mergeMode==="sum"?a=_e(s,i):this.mergeMode==="ave"?a=re(.5,_e(s,i)):this.mergeMode==="mul"?a=re(s,i):this.mergeMode==null&&(a=[s,i]),this.returnState?this.mergeMode==null?a.concat(o):[a].concat(o):a})}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){Qu(this.forwardLayer.name,()=>{this.forwardLayer.build(e)}),Qu(this.backwardLayer.name,()=>{this.backwardLayer.build(e)}),this.built=!0}computeMask(e,n){Array.isArray(n)&&(n=n[0]);let r;if(this.returnSequences?this.mergeMode==null?r=[n,n]:r=n:this.mergeMode==null?r=[null,null]:r=null,this.returnState){const i=this.forwardLayer.states.map(o=>null);return Array.isArray(r)?r.concat(i).concat(i):[r].concat(i).concat(i)}else return r}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.forwardLayer!=null&&this.forwardLayer.setFastWeightInitDuringBuild(e),this.backwardLayer!=null&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){const e={mergeMode:this.mergeMode},n=super.getConfig();return Object.assign(e,n),e}static fromConfig(e,n){const r=kl(n.layer);if(delete n.layer,n.numConstants!=null)throw new ht("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const s=n;return s.layer=r,new e(s)}}GG.className="Bidirectional";we(GG);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class WG extends wt{constructor(e){super(e),this.scale=e.scale,e.offset?this.offset=e.offset:this.offset=0}getConfig(){const e={scale:this.scale,offset:this.offset},n=super.getConfig();return Object.assign(e,n),e}call(e,n){return ue(()=>(e=rt(e),e.dtype!=="float32"&&(e=Ia(e,"float32")),_e(re(e,this.scale),this.offset)))}}WG.className="Rescaling";we(WG);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const{resizeBilinear:ZAe,cropAndResize:XAe}=yl;class qG extends wt{constructor(e){super(e),this.height=e.height,this.width=e.width}centerCrop(e,n,r,s,i,o,a,l){return ue(()=>{let c,u=!1;const h=n/o,m=r/a,p=(s+n)/o,y=(i+r)/a,v=[h,m,p,y],x=[];e.rank===3?(u=!0,c=Rl([e])):c=e;for(let C=0;C<c.shape[0];C++)x.push(v);const b=u7(x,[x.length,4]),w=kg(0,x.length,1,"int32"),N=XAe(c,b,w,[s,i],"nearest");return Ia(u?rt(gd(N)):N,l)})}upsize(e,n,r,s){return ue(()=>{const i=ZAe(e,[n,r]);return Ia(i,s)})}call(e,n){return ue(()=>{const r=rt(e),s=r.dtype,i=r.shape,o=i[i.length-3],a=i[i.length-2];let l=0;o!==this.height&&(l=Math.floor((o-this.height)/2));let c=0;return a!==this.width&&(c=Math.floor((a-this.width)/2),c===0&&(c=1)),l>=0&&c>=0?this.centerCrop(r,l,c,this.height,this.width,o,a,s):this.upsize(e,this.height,this.width,s)})}getConfig(){const e={height:this.height,width:this.width},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){e=jt(e);const n=e.length-3,r=e.length-2;return e[n]=this.height,e[r]=this.width,e}}qG.className="CenterCrop";we(qG);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function YAe(t,e,n,r){let s=rt(t);if(s.dtype!=="int32"&&(s=Ia(s,"int32")),e==="int")return s;const i=s.shape;if(s.rank===0&&(s=Ms(s,-1)),e==="oneHot"&&s.shape[s.shape.length-1]!==1&&(s=Ms(s,-1)),s.rank>2)throw new ee(`When outputMode is not int, maximum output rank is 2 Received outputMode ${e} and input shape ${i} which would result in output rank ${s.rank}.`);const o=["multiHot","oneHot"].includes(e),a=s;let l;if(typeof r<"u"&&e==="count"?l=QL(a,r,n,o):l=QL(a,[],n,o),e!=="tfIdf")return l;if(r)return re(l,r);throw new ee("When outputMode is 'tfIdf', weights must be provided.")}/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class KG extends wt{constructor(e){super(e),this.numTokens=e.numTokens,e.outputMode?this.outputMode=e.outputMode:this.outputMode="multiHot"}getConfig(){const e={numTokens:this.numTokens,outputMode:this.outputMode},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){return e=jt(e),e==null?[this.numTokens]:this.outputMode==="oneHot"&&e[e.length-1]!==1?(e.push(this.numTokens),e):(e[e.length-1]=this.numTokens,e)}call(e,n){return ue(()=>{e=rt(e),e.dtype!=="int32"&&(e=Ia(e,"int32"));let r;if(typeof n.countWeights<"u"){if(this.outputMode!=="count")throw new ee(`countWeights is not used when outputMode !== count.
              Received countWeights=${n.countWeights}`);r=rt(n.countWeights)}const s=jo(e),i=L1(e),o=Li(this.numTokens,s).bufferSync().get(0),a=Pd(i,0).bufferSync().get(0);if(!(o&&a))throw new ee(`Input values must be between 0 < values <= numTokens with numTokens=${this.numTokens}`);return YAe(e,this.outputMode,this.numTokens,r)})}}KG.className="CategoryEncoding";we(KG);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const JAe=["bilinear","nearest"],RM=new Set(JAe);class ZG extends wt{constructor(e){if(super(e),this.height=e.height,this.width=e.width,e.interpolation)if(RM.has(e.interpolation))this.interpolation=e.interpolation;else throw new ee(`Invalid interpolation parameter: ${e.interpolation} is not implemented`);else this.interpolation="bilinear";this.cropToAspectRatio=!!e.cropToAspectRatio}computeOutputShape(e){e=jt(e);const n=e[2];return[this.height,this.width,n]}getConfig(){const e={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},n=super.getConfig();return Object.assign(e,n),e}call(e,n){return ue(()=>{const r=[this.height,this.width];if(this.interpolation==="bilinear")return yl.resizeBilinear(e,r,!this.cropToAspectRatio);if(this.interpolation==="nearest")return yl.resizeNearestNeighbor(e,r,!this.cropToAspectRatio);throw new Error(`Interpolation is ${this.interpolation} but only ${[...RM]} are supported`)})}}ZG.className="Resizing";we(ZG);/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class XG{constructor(e){this.seed=e}next(){if(this.seed!==void 0)return this.seed++}}XG.className="RandomSeed";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class YG extends wt{constructor(e){super(e),this.randomGenerator=new XG(e.seed)}getConfig(){const e={seed:this.randomGenerator.seed},n=super.getConfig();return Object.assign(e,n),e}}YG.className="BaseRandomLayer";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const QAe=["bilinear","nearest"],PM=new Set(QAe);class JG extends YG{constructor(e){super(e);const{factor:n,interpolation:r="bilinear"}=e;if(this.factor=n,Array.isArray(this.factor)&&this.factor.length===2)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else if(!Array.isArray(this.factor)&&this.factor>0)this.widthLower=-this.factor,this.widthUpper=this.factor;else throw new ee(`Invalid factor: ${this.factor}. Must be positive number or tuple of 2 numbers`);if(this.widthLower<-1||this.widthUpper<-1)throw new ee(`factor must have values larger than -1. Got: ${this.factor}`);if(this.widthUpper<this.widthLower)throw new ee(`factor cannot have upper bound less than lower bound.
        Got upper bound: ${this.widthUpper}.
        Got lower bound: ${this.widthLower}
      `);if(r)if(PM.has(r))this.interpolation=r;else throw new ee(`Invalid interpolation parameter: ${r} is not implemented`)}getConfig(){const e={factor:this.factor,interpolation:this.interpolation},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){e=jt(e);const n=e[2];return[this.imgHeight,-1,n]}call(e,n){return ue(()=>{const r=rt(e);this.imgHeight=r.shape[r.shape.length-3];const s=r.shape[r.shape.length-2];this.widthFactor=cy([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let i=this.widthFactor.dataSync()[0]*s;i=Math.round(i);const o=[this.imgHeight,i];switch(this.interpolation){case"bilinear":return yl.resizeBilinear(e,o);case"nearest":return yl.resizeNearestNeighbor(e,o);default:throw new Error(`Interpolation is ${this.interpolation}
          but only ${[...PM]} are supported`)}})}}JG.className="RandomWidth";we(JG);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Lk(t){return new O3(t)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eRe=de();eRe.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,t=>{t&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var DM;(function(t){t[t.DT_INVALID=0]="DT_INVALID",t[t.DT_FLOAT=1]="DT_FLOAT",t[t.DT_DOUBLE=2]="DT_DOUBLE",t[t.DT_INT32=3]="DT_INT32",t[t.DT_UINT8=4]="DT_UINT8",t[t.DT_INT16=5]="DT_INT16",t[t.DT_INT8=6]="DT_INT8",t[t.DT_STRING=7]="DT_STRING",t[t.DT_COMPLEX64=8]="DT_COMPLEX64",t[t.DT_INT64=9]="DT_INT64",t[t.DT_BOOL=10]="DT_BOOL",t[t.DT_QINT8=11]="DT_QINT8",t[t.DT_QUINT8=12]="DT_QUINT8",t[t.DT_QINT32=13]="DT_QINT32",t[t.DT_BFLOAT16=14]="DT_BFLOAT16",t[t.DT_QINT16=15]="DT_QINT16",t[t.DT_QUINT16=16]="DT_QUINT16",t[t.DT_UINT16=17]="DT_UINT16",t[t.DT_COMPLEX128=18]="DT_COMPLEX128",t[t.DT_HALF=19]="DT_HALF",t[t.DT_RESOURCE=20]="DT_RESOURCE",t[t.DT_VARIANT=21]="DT_VARIANT",t[t.DT_UINT32=22]="DT_UINT32",t[t.DT_UINT64=23]="DT_UINT64",t[t.DT_FLOAT_REF=101]="DT_FLOAT_REF",t[t.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",t[t.DT_INT32_REF=103]="DT_INT32_REF",t[t.DT_UINT8_REF=104]="DT_UINT8_REF",t[t.DT_INT16_REF=105]="DT_INT16_REF",t[t.DT_INT8_REF=106]="DT_INT8_REF",t[t.DT_STRING_REF=107]="DT_STRING_REF",t[t.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",t[t.DT_INT64_REF=109]="DT_INT64_REF",t[t.DT_BOOL_REF=110]="DT_BOOL_REF",t[t.DT_QINT8_REF=111]="DT_QINT8_REF",t[t.DT_QUINT8_REF=112]="DT_QUINT8_REF",t[t.DT_QINT32_REF=113]="DT_QINT32_REF",t[t.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",t[t.DT_QINT16_REF=115]="DT_QINT16_REF",t[t.DT_QUINT16_REF=116]="DT_QUINT16_REF",t[t.DT_UINT16_REF=117]="DT_UINT16_REF",t[t.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",t[t.DT_HALF_REF=119]="DT_HALF_REF",t[t.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",t[t.DT_VARIANT_REF=121]="DT_VARIANT_REF",t[t.DT_UINT32_REF=122]="DT_UINT32_REF",t[t.DT_UINT64_REF=123]="DT_UINT64_REF"})(DM||(DM={}));var OM;(function(t){(function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"})(t.CheckpointFormatVersion||(t.CheckpointFormatVersion={}))})(OM||(OM={}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var LM;(function(t){t[t.FAIL=0]="FAIL",t[t.SHORTEST=1]="SHORTEST",t[t.LONGEST=2]="LONGEST"})(LM||(LM={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function He(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&F(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the CPU backend.`)})}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tRe=Z7;class g2 extends u${nextDataId(){return g2.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new mj(this,ua())}write(e,n,r){this.firstUse&&(this.firstUse=!1,de().get("IS_NODE")&&Ni(`
============================
Hi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. 
============================`));const s={id:this.nextDataId()};return this.data.set(s,{values:e,dtype:r,refCount:1}),s}makeTensorInfo(e,n,r){let s;if(n==="string"&&r!=null&&r.length>0&&d0(r[0])){const i=r.map(o=>Rc(o));s=this.write(i,e,n)}else s=this.write(r,e,n);return{dataId:s,shape:e,dtype:n}}refCount(e){return this.data.has(e)?this.data.get(e).refCount:0}incRef(e){const n=this.data.get(e);n.refCount++}decRef(e){if(this.data.has(e)){const n=this.data.get(e);n.refCount--}}move(e,n,r,s,i){this.data.set(e,{values:n,dtype:s,refCount:i})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){const{dtype:n,complexTensorInfos:r}=this.data.get(e);if(n==="complex64"){const s=this.readSync(r.real.dataId),i=this.readSync(r.imag.dataId);return Pl(s,i)}return _Ee(this.data.get(e).values,n)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(s=>jc(s));return bt(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return bt(e.shape,e.dtype,n)}makeOutput(e,n,r){return ua().makeTensorFromTensorInfo(this.makeTensorInfo(n,r,e),this)}disposeData(e,n=!1){if(this.data.has(e)){if(this.data.get(e).refCount--,!n&&this.data.get(e).refCount>0)return!1;const{complexTensorInfos:r}=this.data.get(e);r!=null&&(this.disposeData(r.real.dataId,!0),this.disposeData(r.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){const n=Ls();return e(),{kernelMs:Ls()-n}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){He([e],"where");const n=this.readSync(e.dataId);return tRe(e.shape,n)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}g2.nextDataId=0;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QG(t){const e=new Float32Array(t.length);for(let n=0;n<t.length;++n)e[n]=Math.abs(t[n]);return e}const nRe=t=>{const{x:e}=t.inputs,n=t.backend;He(e,"abs");let r=new Float32Array(pe(e.shape));const s=n.data.get(e.dataId).values;return r=QG(s),n.makeOutput(r,e.shape,e.dtype)},rRe={kernelName:qx,backendName:"cpu",kernelFunc:nRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rr(t){return(e,n,r,s,i)=>{const o=ut(e,n),a=o.length,l=qe(o),c=pe(o),u=ls(i,c),h=e.length,m=n.length,p=qe(e),y=qe(n),v=_f(e,o),x=_f(n,o);if(v.length+x.length===0)for(let b=0;b<u.length;++b)u[b]=t(r[b%r.length],s[b%s.length]);else for(let b=0;b<u.length;++b){const w=em(b,a,l),E=w.slice(-h);v.forEach(T=>E[T]=0);const N=Sa(E,h,p),C=w.slice(-m);x.forEach(T=>C[T]=0);const S=Sa(C,m,y);u[b]=t(r[N],s[S])}return[u,o]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ti(t){const{inputs:e,backend:n}=t,{real:r,imag:s}=e,i=n.data.get(r.dataId).values,o=n.data.get(s.dataId).values,a=n.makeTensorInfo(r.shape,"complex64"),l=n.data.get(a.dataId);return l.complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",i),imag:n.makeTensorInfo(s.shape,"float32",o)},a}const sRe={kernelName:k$,backendName:"cpu",kernelFunc:ti};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X1(t,e,n="float32"){if(n==="complex64"){const s=X1(t,e,"float32"),i=X1(t,e,"float32");return ti({inputs:{real:s,imag:i},backend:t})}const r=cs(pe(e),n);return t.makeTensorInfo(e,n,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fa(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const iRe={kernelName:R0,backendName:"cpu",kernelFunc:Fa};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bd(t){const{inputs:e,backend:n}=t,{input:r}=e,s=n.data.get(r.dataId).complexTensorInfos.real,i=n.data.get(s.dataId).values;return n.makeTensorInfo(s.shape,s.dtype,i)}const oRe={kernelName:q$,backendName:"cpu",kernelFunc:bd};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e9(t,e,n,r){if(r==="int32"){const s=Int32Array.from(t);return[e,"int32",s]}if(r==="bool"){const s=Rd([0],n),[i,o]=rr((a,l)=>a!==l?1:0)(e,[],t,s,"bool");return[o,"bool",i]}throw new Error(`Error in Cast: failed to cast ${n} to ${r}`)}function qc(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{dtype:i}=r;if(i==="complex64"){if(s.dtype==="complex64")return Fa({inputs:{x:s},backend:n});const u=X1(n,s.shape,s.dtype),h=qc({inputs:{x:s},backend:n,attrs:{dtype:"float32"}}),m=ti({inputs:{real:h,imag:u},backend:n});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(h),m}if(s.dtype==="complex64"){const u=bd({inputs:{input:s},backend:n}),h=qc({inputs:{x:u},backend:n,attrs:{dtype:i}});return n.disposeIntermediateTensorInfo(u),h}if(!yj(s.dtype,i)){const u=Fa({inputs:{x:s},backend:n});return{dataId:u.dataId,shape:u.shape,dtype:i}}const o=n.data.get(s.dataId).values,[a,l,c]=e9(o,s.shape,s.dtype,i);return n.makeTensorInfo(a,l,c)}const aRe={kernelName:v0,backendName:"cpu",kernelFunc:qc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sr(t,e,n,r){return n==null?({inputs:s,backend:i})=>{const{a:o,b:a}=s,l=i;He([o,a],t);const c=l.data.get(o.dataId).values,u=l.data.get(a.dataId).values,h=o.dtype==="string"?Dl(c):c,m=o.dtype==="string"?Dl(u):u,p=r||o.dtype,[y,v]=e(o.shape,a.shape,h,m,p);return l.makeTensorInfo(v,p,y)}:({inputs:s,backend:i})=>{const{a:o,b:a}=s,l=i;if(o.dtype==="complex64"||a.dtype==="complex64"){const c=qc({inputs:{x:o},backend:l,attrs:{dtype:"complex64"}}),u=l.data.get(c.dataId),h=u.complexTensorInfos.real,m=u.complexTensorInfos.imag,p=l.data.get(h.dataId).values,y=l.data.get(m.dataId).values,v=qc({inputs:{x:a},backend:l,attrs:{dtype:"complex64"}}),x=l.data.get(v.dataId),b=x.complexTensorInfos.real,w=x.complexTensorInfos.imag,E=l.data.get(b.dataId).values,N=l.data.get(w.dataId).values,[C,S,T]=n(o.shape,a.shape,p,y,E,N),I=l.makeTensorInfo(T,"float32",C),P=l.makeTensorInfo(T,"float32",S),R=ti({inputs:{real:I,imag:P},backend:l});return l.disposeIntermediateTensorInfo(c),l.disposeIntermediateTensorInfo(v),l.disposeIntermediateTensorInfo(I),l.disposeIntermediateTensorInfo(P),R}else{const c=l.data.get(o.dataId).values,u=l.data.get(a.dataId).values,h=r||o.dtype,[m,p]=e(o.shape,a.shape,c,u,h);return l.makeTensorInfo(p,h,m)}}}function L3(t){return(e,n,r,s,i,o)=>{const a=ut(e,n),l=pe(a),c=a.length,u=qe(a),h=ls("float32",l),m=ls("float32",l),p=_f(e,a),y=_f(n,a),v=Pl(r,s),x=Pl(i,o),b=e.length,w=qe(e),E=n.length,N=qe(n);if(p.length+y.length===0)for(let C=0;C<h.length;C++){const S=C%v.length,T=C%x.length,I=t(v[S*2],v[S*2+1],x[T*2],x[T*2+1]);h[C]=I.real,m[C]=I.imag}else for(let C=0;C<h.length;C++){const S=em(C,c,u),T=S.slice(-b);p.forEach(B=>T[B]=0);const I=Sa(T,b,w),P=S.slice(-E);y.forEach(B=>P[B]=0);const R=Sa(P,E,N),D=t(v[I*2],v[I*2+1],x[R*2],x[R*2+1]);h[C]=D.real,m[C]=D.imag}return[h,m,a]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const t9=rr((t,e)=>t+e),lRe=L3((t,e,n,r)=>({real:t+n,imag:e+r})),If=Sr(tm,t9,lRe),cRe={kernelName:tm,backendName:"cpu",kernelFunc:If};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M3(t,e,n,r,s){const i=pe(r),o=cs(s,n);for(let a=0;a<t.length;a++){const l=t[a];if(l<0)throw new Error("Input x must be non-negative!");l>=s||(i>0?o[l]+=e[a]:o[l]+=1)}return o}function n9(t,e,n,r=!1){const s=t.shape[0],i=t.shape[1],o=bt([s,n],e.dtype);for(let a=0;a<s;a++)for(let l=0;l<i;l++){const c=t.get(a,l);if(c<0)throw new Error("Input x must be non-negative!");c>=n||(r?o.set(1,a,c):e.size>0?o.set(o.get(a,c)+e.get(a,l),a,c):o.set(o.get(a,c)+1,a,c))}return o}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const r9=rr((t,e)=>t&e),uRe=Sr(E$,r9),dRe={kernelName:E$,backendName:"cpu",kernelFunc:uRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ja(t){return(e,n,r)=>{const s=Jn(n,e.length);for(let i=0;i<e.length;++i)s[i]=t(e[i],r);return s}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sn(t,e,n){const r=ja(e);return ou(t,r,n)}function ou(t,e,n){return({inputs:r,attrs:s,backend:i})=>{const{x:o}=r;He(o,t);const a=i,l=a.data.get(o.dataId).values;let c;if(o.dtype==="string"){if(!Array.isArray(l))throw new Error("String tensor's value was not an instance of Array");c=Dl(l)}else c=l;const u=n||o.dtype,h=e(c,u,s);return a.makeTensorInfo(o.shape,u,h)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const s9=ja(t=>Math.ceil(t)),hRe=ou(x0,s9),fRe={kernelName:x0,backendName:"cpu",kernelFunc:hRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i9(t,e,n,r){const s=Jn(n,pe(e));if(r&&n!=="string"){let i=0;t.forEach(o=>{const a=pe(o.shape);s.set(o.vals,i),i+=a})}else{let i=0;t.forEach(o=>{const a=n==="string"?Dl(o.vals):o.vals;let l=0;for(let c=0;c<o.shape[0];++c){const u=c*e[1]+i;for(let h=0;h<o.shape[1];++h)s[u+h]=a[l++]}i+=o.shape[1]})}return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const o9=rr((t,e)=>t===e?1:0),a9=Sr(lw,o9,null,"bool"),mRe={kernelName:lw,backendName:"cpu",kernelFunc:a9};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l9=ja(t=>Math.exp(t)),c9=ou(S0,l9,"float32"),pRe={kernelName:S0,backendName:"cpu",kernelFunc:c9};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const u9=ja(t=>Math.expm1(t)),gRe=ou(T0,u9),yRe={kernelName:T0,backendName:"cpu",kernelFunc:gRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d9=ja(t=>Math.floor(t)),bRe=ou($0,d9),vRe={kernelName:$0,backendName:"cpu",kernelFunc:bRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const h9=rr((t,e)=>Math.floor(t/e)),xRe=Sr(I0,h9,null,"int32"),wRe={kernelName:I0,backendName:"cpu",kernelFunc:xRe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f9(t,e,n,r,s,i,o,a,l){const c=bt([r,i],n);for(let u=0;u<r;u++){const h=[];let m=0;for(let p=0;p<s;p++){const y=t[u*s+p];m+=y*o[p],h.push(y)}if(m<0||m>=l/i)throw new Error(`Invalid indices: ${h} does not index into ${a}`);for(let p=0;p<i;p++)c.values[u*i+p]=e.get(...e.indexToLoc(m*i+p))}return c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m9(t,e,n){const r=bt(n,t.dtype);for(let s=0;s<r.size;++s){const o=r.indexToLoc(s).slice(),a=o[0],l=o[2],c=e.locToIndex([a,l]);o[2]=e.values[c];const u=t.locToIndex(o);0<=u&&u<t.values.length&&(r.values[s]=t.values[u])}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p9=rr((t,e)=>t>e?1:0),ERe=Sr(hw,p9,null,"bool"),kRe={kernelName:hw,backendName:"cpu",kernelFunc:ERe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g9=rr((t,e)=>t>=e?1:0),NRe=Sr(A0,g9,null,"bool"),CRe={kernelName:A0,backendName:"cpu",kernelFunc:NRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const y9=rr((t,e)=>t<e?1:0),_Re=Sr(mw,y9,null,"bool"),SRe={kernelName:mw,backendName:"cpu",kernelFunc:_Re};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const b9=rr((t,e)=>t<=e?1:0),TRe=Sr(pw,b9,null,"bool"),$Re={kernelName:pw,backendName:"cpu",kernelFunc:TRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v9(t,e,n){const r=(e-t)/(n-1),s=cs(n,"float32");s[0]=t;for(let i=1;i<s.length;i++)s[i]=s[i-1]+r;return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const x9=ja(t=>Math.log(t)),IRe=ou(L0,x9),ARe={kernelName:L0,backendName:"cpu",kernelFunc:IRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w9(t,e,n,r){const s=ls(r,pe(n));for(let i=0;i<s.length;++i){const o=i*e;let a=t[o];for(let l=0;l<e;++l){const c=t[o+l];(Number.isNaN(c)||c>a)&&(a=c)}s[i]=a}return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const E9=rr((t,e)=>Math.max(t,e)),RRe=Sr(z0,E9),PRe={kernelName:z0,backendName:"cpu",kernelFunc:RRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const k9=rr((t,e)=>Math.min(t,e)),DRe=Sr(F0,k9),ORe={kernelName:F0,backendName:"cpu",kernelFunc:DRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const z3=rr((t,e)=>t*e),LRe=L3((t,e,n,r)=>({real:t*n-e*r,imag:t*r+e*n})),y2=Sr(V0,z3,LRe),MRe={kernelName:V0,backendName:"cpu",kernelFunc:y2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N9(t,e,n){const r=Qc(-1,n);return z3([],e,r,t,n)}function zRe(t){const{inputs:e,backend:n}=t,{x:r}=e;He(r,"neg");const s=n.data.get(r.dataId).values,[i,o]=N9(s,r.shape,r.dtype);return n.makeTensorInfo(o,r.dtype,i)}const FRe={kernelName:_w,backendName:"cpu",kernelFunc:zRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const C9=rr((t,e)=>t!==e?1:0),BRe=Sr(Sw,C9,null,"bool"),VRe={kernelName:Sw,backendName:"cpu",kernelFunc:BRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F3(t,e,n,r,s){const i=e.length,o=pe(e),a=qe(e),l=qe(s),c=ls(n,pe(s));for(let u=0;u<o;++u){const h=em(u,i,a),m=new Array(h.length);for(let y=0;y<m.length;y++)m[y]=h[r[y]];const p=Sa(m,i,l);c[p]=t[u]}return c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gs(t){const{inputs:e,attrs:n,backend:r}=t,{x:s}=e,{perm:i}=n;He(s,"transpose");const o=s.shape.length,a=new Array(o);for(let h=0;h<a.length;h++)a[h]=s.shape[i[h]];const l=r.data.get(s.dataId).values,c=F3(l,s.shape,s.dtype,i,a);return{dataId:r.write(c,a,s.dtype),shape:a,dtype:s.dtype}}const jRe={kernelName:Xh,backendName:"cpu",kernelFunc:Gs};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _9(t,e,n,r){const[s,i]=Mr(t,r),o=ci(e,"int32"),a=cs(pe(s),o),l=pe(i);for(let c=0;c<a.length;++c){const u=c*l;let h=1;for(let m=0;m<l;++m)h*=n[u+m];a[c]=h}return{outVals:a,outShape:s,outDtype:o}}function URe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:o}=r;He(s,"prod");const a=s.shape.length,l=xt(i,s.shape),c=jn(l,a);let u=l,h=s;const m=[];c!=null&&(h=Gs({inputs:{x:s},backend:n,attrs:{perm:c}}),m.push(h),u=tr(u.length,a));const p=n.data.get(h.dataId).values,{outVals:y,outShape:v,outDtype:x}=_9(h.shape,h.dtype,p,u);let b=v;return o&&(b=ur(v,l)),m.forEach(w=>n.disposeIntermediateTensorInfo(w)),n.makeTensorInfo(b,x,y)}const HRe={kernelName:Pw,backendName:"cpu",kernelFunc:URe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GRe(t,e,n){t.forEach((r,s)=>{if(r<0||r>=n){const i=em(s,e.length,qe(e)).join(",");throw new Error(`indices[${i}] = ${r} is not in [0, ${n})`)}})}function WRe(t,e){for(let n=0;n<t.length;++n){const r=t[n],s=n===t.length-1?e:t[n+1].length;if(r.length===0)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>s)throw new Error("Ragged splits must not point past values");for(let i=1;i<r.length;++i)if(r[i-1]>r[i])throw new Error("Ragged splits must be sorted in ascending order")}}function qRe(t,e,n,r){const s=[];let i=0;const o=e.length-1+n.length,a=new Array(o).fill(null).map(()=>[0]);WRe(n,r);let l=1;for(let c=0;c<e.length-1;++c){l*=e[c];const u=e[c+1];for(let h=1;h<l+1;++h)a[c].push(h*u)}for(let c=0;c<t.length;++c){let u=t[c],h=t[c]+1;for(let m=0;m<n.length;++m){const p=n[m],y=m+e.length-1;if(y>=0){const v=a[y],x=v[v.length-1]-p[u];for(let b=u;b<h;++b)a[y].push(p[b+1]+x)}u=p[u],h=p[h]}h!==u&&(s.push([u,h]),i+=h-u)}return{outSplits:a,valueSlices:s,numValues:i}}function KRe(t){const e=[];for(let n=0;n<t.length;++n){const r=t[n].length,s=Jn("int32",r);e.push(s),t[n].forEach((i,o)=>s[o]=i)}return e}function MM(t,e){const n=t.slice(0,e);for(;n.length<e;)n.push(1);for(let r=e;r<t.length;r++)n[e-1]*=t[r];return n}function ZRe(t,e,n,r,s,i){const o=MM(e,2)[1],a=MM(i,2)[1];let l=0;for(const c of n)for(let u=c[0];u<c[1];++u){for(let h=0;h<r;++h)s[l*a+h]=t[u*o+h];++l}}function XRe(t,e,n,r,s){const i=e.slice();i[0]=s;const o=Jn(n,pe(i)),a=t.length,l=a===0?0:a/e[0];return ZRe(t,e,r,l,o,i),[o,i]}function S9(t,e,n,r,s,i,o,a){if(t.length===0)throw new Error("paramsNestedSplits must be non empty");if(e[0].length===0)throw new Error("Split tensors must not be scalars");const l=e[0][0]-1;if(GRe(i,o,l),r.length===0)throw new Error("params.rank must be nonzero");const c=r[0],{outSplits:u,valueSlices:h,numValues:m}=qRe(i,o,t,c),p=KRe(u),y=XRe(n,r,s,h,m);return[p,y[0],y[1]]}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zM=2147483647;function T9(t,e,n,r,s,i,o){if(e.length>1)throw new Error("starts must be a scalar or vector");if(s.length>1)throw new Error("limits must be a scalar or vector");if(o.length>1)throw new Error("deltas must be a scalar or vector");const a=e.length===0,l=s.length===0,c=o.length===0,u=[];a||u.push(e[0]),l||u.push(s[0]),c||u.push(o[0]);for(let x=1;x<u.length;++x)if(u[x]!==u[x-1])throw new Error("starts, limits, and deltas must have the same shape");const h=u.length===0?1:u[0],m=Jn("int32",h+1);m[0]=0;for(let x=0;x<h;++x){const b=a?t[0]:t[x],w=l?r[0]:r[x],E=c?i[0]:i[x];if(E===0)throw new Error("Requires delta != 0");let N;if(E>0&&w<b||E<0&&w>b)N=0;else if(N=Math.ceil(Math.abs((w-b)/E)),N>zM)throw new Error(`Requires ((limit - start) / delta) <= ${zM}`);m[x+1]=m[x]+N}const p=m[h],y=Jn(n,p);let v=0;for(let x=0;x<h;++x){const b=m[x+1]-m[x];let w=a?t[0]:t[x];const E=c?i[0]:i[x];for(let N=0;N<b;++N)y[v++]=w,w+=E}return[m,y]}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Gi=Mo;class Y1{constructor(e,n,r,s,i,o,a,l,c,u){this.shape=e,this.shapeShape=n,this.values=r,this.valuesShape=s,this.valuesDType=i,this.defaultValue=o,this.defaultValueShape=a,this.rowPartitionValues=l,this.rowPartitionValuesShapes=c,this.rowPartitionTypes=mU(u),this.raggedRank=pU(this.rowPartitionTypes)}getRowPartitionTypeByDimension(e){return this.rowPartitionTypes[0]===Gi.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}getRowPartitionTensor(e){return this.rowPartitionTypes[0]===Gi.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}getMaxWidth(e){const n=this.getRowPartitionTensor(e-1);switch(this.getRowPartitionTypeByDimension(e-1)){case Gi.VALUE_ROWIDS:return Y1.getMaxWidthValueRowID(n);case Gi.ROW_SPLITS:return Y1.getMaxWidthRowSplit(n);default:throw new Error(`Cannot handle partition type ${Gi[this.getRowPartitionTypeByDimension(e-1)]}`)}}static getMaxWidthRowSplit(e){const n=e.length;if(n===0||n===1)return 0;let r=0;for(let s=0;s<n-1;++s){const i=e[s+1]-e[s];i>r&&(r=i)}return r}static getMaxWidthValueRowID(e){const n=e.length;if(n===0)return 0;let r=0,s=e[0],i=0;for(let o=1;o<n;++o){const a=e[o];a!==s&&(s=a,i=Math.max(o-r,i),r=o)}return Math.max(n-r,i)}tensorShapeFromTensor(e,n,r=!0){if(n.length===0){if(e[0]===-1)return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return BM(e,r)}calculateOutputSize(e){const n=this.valuesShape,r=this.defaultValueShape;gU(r,n);const s=this.tensorShapeFromTensor(this.shape,this.shapeShape),o=fU(this.raggedRank,s,n);o[0]<0&&(o[0]=e);for(let a=1;a<=this.raggedRank;++a)o[a]<0&&(o[a]=this.getMaxWidth(a));return o}calculateFirstParentOutputIndex(e,n,r){const s=Math.min(e,r),i=[];let o=0;for(let a=0;a<s;++a,o+=n)i.push(o);for(let a=s;a<e;++a)i.push(-1);return F(i.length===e,()=>"Final length of result must be equal to firstDimension."),i}calculateOutputIndexRowSplit(e,n,r,s){const i=e.length,o=[];for(let a=0;a<i-1;++a){const l=e[a+1]-e[a];let c=Math.min(s,l),u=n[a];u===-1&&(c=0);for(let h=0;h<c;++h)o.push(u),u+=r;for(let h=0;h<l-c;++h)o.push(-1)}if(i>0&&o.length!==e[i-1])throw new Error("Invalid row split size.");return o}calculateOutputIndexValueRowID(e,n,r,s){const i=e.length,o=[];if(i===0)return[];let a=0,l=e[0];if(l>=n.length)throw new Error(`Got currentValueRowId=${l}, which is not less than ${n.length}`);let c=n[l];o.push(c);for(let u=1;u<i;++u){const h=e[u];if(h===l)c>=0&&(++a,a<s?c+=r:c=-1);else{if(a=0,l=h,h>=n.length)throw new Error(`Got nextValueRowId=${h} which is not less than ${n.length}`);c=n[h]}o.push(c)}if(o.length!==e.length)throw new Error("Invalid row ids.");return o}calculateOutputIndex(e,n,r,s){const i=this.getRowPartitionTensor(e),o=this.getRowPartitionTypeByDimension(e);switch(o){case Gi.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(i,n,r,s);case Gi.ROW_SPLITS:if(i.length-1>n.length)throw new Error(`Row partition size is greater than output size: ${i.length-1} > ${n.length}`);return this.calculateOutputIndexRowSplit(i,n,r,s);default:throw new Error(`Unsupported partition type: ${Gi[o]}`)}}getFirstDimensionSize(){const e=this.rowPartitionValues[0];if(this.rowPartitionTypes.length===0)throw new Error("No row_partition_types given.");const n=this.rowPartitionTypes[0];switch(n){case Gi.FIRST_DIM_SIZE:return e[0];case Gi.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case Gi.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${Gi[n]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const n=this.getFirstDimensionSize(),r=this.calculateOutputSize(n),s=new Array(this.raggedRank+1);s[s.length-1]=1;for(let l=s.length-2;l>=0;--l)s[l]=s[l+1]*r[l+1];const i=BM(r,!1),o=Jn(this.valuesDType,pe(i));if(s[0]*r[0]>0){let l=this.calculateFirstParentOutputIndex(n,s[0],r[0]);for(let c=1;c<=this.raggedRank;++c)l=this.calculateOutputIndex(c-1,l,s[c],r[c]);this.setOutput(this.raggedRank,l,o,i)}return[i,o]}setOutput(e,n,r,s){if(r.length===0)return;const i=this.values,o=r;let a=s.slice();a=a.slice(e+1);const l=pe(a),c=n.length;let u=this.defaultValue;if(u.length!==l&&u.length!==1){const y=this.defaultValueShape;ue(()=>{const v=ie(u,y);u=Mp(v,a).dataSync()})}let h=0,m=0,p=0;for(let y=0;y<=c;++y){let v=y<c?n[y]:-1;if(v===p){++p;continue}if(m<p){const x=i.subarray(h*l),b=o.subarray(m*l),w=(p-m)*l;FM(b,x,w)}if(y>=c){const x=r.length;v=Math.floor(x/l)}if(v>p)if(this.defaultValue.length===1)o.subarray(p*l,v*l).fill(this.defaultValue[0]),p=v;else for(;v>p;){const x=o.slice(p*l);FM(x,u,l),++p}v<0?(h=y+1,m=p):(h=y,m=p,p=m+1)}}}function FM(t,e,n){for(let r=0;r<n;r++)t[r]=e[r]}function BM(t,e){const n=[];for(let r of t){if(r<0){if(!e)throw new Error(`Dimension ${r} must be >= 0`);if(r<-1)throw new Error(`Dimension ${r} must be >= -1`);r=-1}n.push(r)}return n}function $9(t,e,n,r,s,i,o,a,l,c){return new Y1(t,e,n,r,s,i,o,a,l,c).compute()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I9(t,e,n,r){const s=t===e,i=t<e&&n<0,o=e<t&&n>1;if(s||i||o)return cs(0,r);const a=Math.abs(Math.ceil((e-t)/n)),l=cs(a,r);e<t&&n===1&&(n=-1),l[0]=t;for(let c=1;c<l.length;c++)l[c]=l[c-1]+n;return l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A9=ja(t=>1/Math.sqrt(t)),YRe=ou(q0,A9),JRe={kernelName:q0,backendName:"cpu",kernelFunc:YRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vu(t,e,n,r,s,i,o,a,l,c){const u=[r/s,s],h=t.values,m=e.values;if(r===0)return bt(n,e.dtype);const p=l instanceof Zr?l:bt(u,e.dtype);typeof l=="string"||typeof l=="number"?p.values.fill(l):typeof l=="boolean"&&p.values.fill(+l);for(let y=0;y<i;y++){const v=[];let x=0;for(let b=0;b<o;b++){const w=h[y*o+b];v.push(w),x+=w*a[b]}if(x<0||x>=r/s)throw new Error(`Invalid indices: ${v} does not index into ${n}`);for(let b=0;b<s;b++)c?p.values[x*s+b]+=m[y*s+b]:p.values[x*s+b]=e.rank===0?m[0]:m[y*s+b]}return p}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QRe=ja(t=>1/(1+Math.exp(-t))),R9=sn(J0,t=>1/(1+Math.exp(-t))),ePe={kernelName:J0,backendName:"cpu",kernelFunc:R9};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P9(t,e,n,r,s){const i=GI(r,e,n),o=pe(n),a=qe(r);if(i){const h=WI(e,a);return s==="string"?t.slice(h,h+o):t.subarray(h,h+o)}const l=s==="string"?Dl(t):t,c=bt(r,s,l),u=bt(n,s);for(let h=0;h<u.size;++h){const m=u.indexToLoc(h),p=m.map((y,v)=>y+e[v]);u.set(c.get(...p),...m)}return s==="string"?LU(u.values):u.values}function vd(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{begin:i,size:o}=r;He(s,"slice");const[a,l]=n2(s,i,o);UI(s,a,l);const c=n.data.get(s.dataId).values,u=P9(c,a,l,s.shape,s.dtype);return n.makeTensorInfo(l,s.dtype,u)}const tPe={kernelName:Fw,backendName:"cpu",kernelFunc:vd};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D9(t,e,n,r,s,i,o){const a=e[0],l=i[0],c=new Array(l),u=new Array(a),h=e[1];if(l===0){if(a!==0)throw new Error(kU(a));const x=Jn(n,0),b=Jn(s,0);return[x,[0,h],b,c,u]}let m=!0,p=0;const y=new Array(l).fill(0);for(let x=0;x<a;++x){const b=t[x*h];if(b<0)throw new Error(NU(x,b));if(b>=l)throw new Error(CU(x,b,l));++y[b],m=m&&b>=p,p=b}let v=!0;for(let x=0;x<l;++x){const b=y[x]===0;c[x]=b,v=v&&!b,y[x]=Math.max(y[x],1),x>0&&(y[x]+=y[x-1])}if(v&&m){const x=t,b=r;for(let w=0;w<a;++w)u[w]=w;return[x,[a,h],b,c,u]}else{const x=y[l-1],b=Jn(n,x*h),w=Jn(s,x),E=new Array(l).fill(0);for(let N=0;N<a;++N){const C=t[N*h],S=E[C],T=(C===0?0:y[C-1])+S;E[C]++;for(let I=0;I<h;++I)b[T*h+I]=t[N*h+I];w[T]=r[N],u[N]=T}for(let N=0;N<l;++N)if(E[N]===0){const S=N===0?0:y[N-1];b[S*h+0]=N;for(let T=1;T<h;++T)b[S*h+T]=0;w[S]=o}return[b,[x,h],w,c,u]}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O9(t,e,n,r,s){const i=pe(r),o=e[0],a=s.length,l=[];let c=1,u=-1;for(let x=0;x<a;++x){const b=s[x];if(b===-1){if(u!==-1)throw new Error(_U(u,x));u=x,l.push(1)}else{if(b<0)throw new Error(SU(x,b));c*=b,l.push(b)}}if(u!==-1){if(c<=0)throw new Error(TU());const x=Math.trunc(i/c);if(c*x!==i)throw new Error($U(r,l));l[u]=x}if(pe(l)!==i)throw new Error(IU(r,l));const m=r.length,p=[];if(m>0){p[m-1]=1;for(let x=m-2;x>=0;--x)p[x]=p[x+1]*r[x+1]}const y=[];if(a>0){y[a-1]=1;for(let x=a-2;x>=0;--x)y[x]=y[x+1]*l[x+1]}const v=Jn(n,o*a);for(let x=0;x<o;++x){let b=0;for(let w=0;w<m;++w)b+=t[x*m+w]*p[w];for(let w=0;w<a;++w)v[x*a+w]=Math.trunc(b/y[w]),b%=y[w]}return[v,[o,a],l]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B3(t,e,n,r,s,i=!1,o=0){const a=r.length,l=[e[0],t.length/e[0]],c=l[1],h=a>0?s[a-1]+1:0;if(h<0)throw new Error(v_());const m=e.slice();m[0]=h;const p=m.reduce((E,N)=>E*N,1),y=Jn(n,p);if(a===0)return h>0&&y.fill(o),[y,m];if(h<=0)throw new Error(v_());let v=0,x=1,b=0,w=s[v];for(;;){let E=0;if(x<a){if(E=s[x],w===E){++x;continue}if(w>=E)throw new Error(AU())}if(w<0||w>=h)throw new Error(RU(w,h));w>b&&y.fill(o,b*c,w*c);for(let N=v;N<x;++N){const C=r[N];if(C<0||C>=l[0])throw new Error(PU(N,r[N],l[0]));for(let S=0;S<c;S++)y[w*c+S]+=t[C*c+S]}if(i)for(let N=0;N<c;N++)y[w*c+N]/=x-v;if(v=x,++x,b=w+1,w=E,x>a)break}return b<h&&y.fill(o,b*c,h*c),[y,m]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nPe=ja(t=>Math.sqrt(t)),rPe=sn(ey,t=>Math.sqrt(t)),sPe={kernelName:ey,backendName:"cpu",kernelFunc:rPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const L9=rr((t,e)=>{const n=t-e;return n*n}),iPe=Sr(ty,L9),oPe={kernelName:ty,backendName:"cpu",kernelFunc:iPe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const M9=ja((t,e)=>{const{pattern:n,replaceGlobal:r,rewrite:s}=e;return t.replace(new RegExp(n,r?"g":""),s)}),aPe=ou(Y$,M9),lPe={kernelName:Y$,backendName:"cpu",kernelFunc:aPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z9(t,e,n,r){const s=bt(t,e.dtype);for(let i=0;i<s.size;i++){const o=s.indexToLoc(i),a=new Array(o.length);for(let l=0;l<a.length;l++)a[l]=o[l]*n[l]+r[l];s.set(e.get(...a),...o)}return s}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class cPe{constructor(e,n,r,s,i,o){this.separator=Rc(e),this.nGramWidths=n,this.leftPad=Rc(r),this.rightPad=Rc(s),this.padWidth=i,this.preserveShort=o}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,n){const r=this.getPadWidth(n);return Math.max(0,e+2*r-n+1)}createNGrams(e,n,r,s,i,o){for(let a=0;a<i;++a){const l=this.getPadWidth(o),c=Math.max(0,l-a),u=Math.max(0,l-(i-(a+1))),h=o-(c+u),m=n+(c>0?0:a-l);let p=0;p+=c*this.leftPad.length;for(let w=0;w<h;++w)p+=e[m+w].length;p+=u*this.rightPad.length;const y=c+u+h-1;p+=y*this.separator.length,r[s+a]=new Uint8Array(p);const v=r[s+a];let x=0;const b=w=>w.forEach(E=>v[x++]=E);for(let w=0;w<c;++w)b(this.leftPad),b(this.separator);for(let w=0;w<h-1;++w)b(e[m+w]),b(this.separator);if(h>0){b(e[m+h-1]);for(let w=0;w<u;++w)b(this.separator),b(this.rightPad)}else{for(let w=0;w<u-1;++w)b(this.rightPad),b(this.separator);b(this.rightPad)}}}compute(e,n){const r=e.length,s=n.length;if(s>0){let l=n[0];if(l!==0)throw new Error(`First split value must be 0, got ${l}`);for(let c=1;c<s;++c){let u=n[c]>=l;if(u=u&&n[c]<=r,!u)throw new Error(`Invalid split value ${n[c]}, must be in [${l}, ${r}]`);l=n[c]}if(l!==r)throw new Error(`Last split value must be data size. Expected ${r}, got ${l}`)}const i=s-1,o=Jn("int32",s);if(r===0||s===0){const l=new Array(r);for(let c=0;c<=i;++c)o[c]=0;return[l,o]}o[0]=0;for(let l=1;l<=i;++l){const c=n[l]-n[l-1];let u=0;this.nGramWidths.forEach(h=>{u+=this.getNumNGrams(c,h)}),this.preserveShort&&c>0&&u===0&&(u=1),o[l]=o[l-1]+u}const a=new Array(o[i]);for(let l=0;l<i;++l){const c=n[l];let u=o[l];if(this.nGramWidths.forEach(h=>{const m=n[l+1]-n[l],p=this.getNumNGrams(m,h);this.createNGrams(e,c,a,u,p,h),u+=p}),this.preserveShort&&u===o[l]){const h=n[l+1]-n[l];if(h===0)continue;const m=h+2*this.padWidth,p=1;this.createNGrams(e,c,a,u,p,m)}}return[a,o]}}function F9(t,e,n,r,s,i,o,a){return new cPe(n,r,s,i,o,a).compute(t,e)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uPe(t,e,n,r){if(!t.length)return;if(e.length===0){for(let i=0;i<t.length;++i)r.push(t.subarray(i,i+1));return}if(e.length===1){const i=e[0];let o=t.indexOf(i);for(;o!==-1;){const a=t.subarray(0,o);(!n||a.length!==0)&&r.push(a),t=t.subarray(o+1),o=t.indexOf(i)}(!n||t.length!==0)&&r.push(t);return}let s=0;for(let i=0;i<t.length+1;i++)if(i===t.length||e.indexOf(t[i])!==-1){const o=t.subarray(s,i);(!n||o.length!==0)&&r.push(o),s=i+1}}function B9(t,e,n){const r=t.length,s=[];let i=0,o=0;const a=new Array(r);for(let m=0;m<r;++m){const p=s.length;uPe(t[m],e,n,s);const y=s.length-p;a[m]=y,i+=y,o=Math.max(o,y)}const l=Jn("int32",i*2),c=new Array(i),u=[r,o];let h=0;for(let m=0;m<r;++m)for(let p=0;p<a[m];++p)l[h*2]=m,l[h*2+1]=p,c[h]=s[h],++h;return[l,c,u]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V9(t,e){const n=Jn("int32",t.length);for(let r=0;r<t.length;++r)n[r]=GEe(t[r]).modulo(e).getLowBitsUnsigned();return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j9=rr((t,e)=>t-e),dPe=L3((t,e,n,r)=>({real:t-n,imag:e-r})),V3=Sr(ny,j9,dPe),hPe={kernelName:ny,backendName:"cpu",kernelFunc:V3};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U9(t,e){const n=new Array(t.rank);for(let s=0;s<n.length;s++)n[s]=t.shape[s]*e[s];const r=bt(n,t.dtype);for(let s=0;s<r.values.length;++s){const i=r.indexToLoc(s),o=new Array(t.rank);for(let l=0;l<o.length;l++)o[l]=i[l]%t.shape[l];const a=t.locToIndex(o);r.values[s]=t.values[a]}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const up=(t,e)=>{const n=e.value-t.value;return n===0?t.index-e.index:n};function H9(t,e,n=0,r=t.length-1){for(;r>n;){if(r-n>600){const a=r-n+1,l=e-n+1,c=Math.log(a),u=.5*Math.exp(2*c/3),h=.5*Math.sqrt(c*u*(a-u)/a)*Math.sign(l-a/2),m=Math.max(n,Math.floor(e-l*u/a+h)),p=Math.min(r,Math.floor(e+(a-l)*u/a+h));H9(t,e,m,p)}const s=t[e];let i=n,o=r;for(bh(t,n,e),up(t[r],s)>0&&bh(t,n,r);i<o;){for(bh(t,i,o),i++,o--;up(t[i],s)<0;)i=i+1;for(;up(t[o],s)>0;)o=o-1}up(t[n],s)===0?bh(t,n,o):(o=o+1,bh(t,o,r)),o<=e&&(n=o+1),e<=o&&(r=o-1)}}function G9(t,e,n,r,s){const i=e[e.length-1],[o,a]=[t.length/i,i],l=ls(n,o*r),c=ls("int32",o*r);for(let h=0;h<o;h++){const m=h*a,p=t.subarray(m,m+a);let y=new Array(p.length);p.forEach((w,E)=>y[E]={value:w,index:E}),r<y.length&&(H9(y,r),y=y.slice(0,r)),s&&y.sort(up);const v=h*r,x=l.subarray(v,v+r),b=c.subarray(v,v+r);for(let w=0;w<r;w++)x[w]=y[w].value,b[w]=y[w].index}const u=e.slice();return u[u.length-1]=r,[bt(u,n,l),bt(u,"int32",c)]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W9(t,e,n,r){const s=xt(e,n)[0],i=[1,n[0],1];for(let y=0;y<s;y++)i[0]*=n[y];i[1]=n[s];for(let y=s+1;y<n.length;y++)i[2]*=n[y];const o=new Map,a=new Int32Array(n[s]),l=new Zr(i,r,t),c=[],u=i[0]===1&&i[2]===1;for(let y=0;y<n[s];y++){let v;if(u)v=t[y].toString();else{const b=[];for(let w=0;w<i[0];w++)for(let E=0;E<i[2];E++)b.push(l.get(w,y,E));v=b.join(",")}const x=o.get(v);if(x!=null)a[y]=x;else{const b=o.size;o.set(v,b),a[y]=b,c.push(y)}}const h=i.slice();h[1]=o.size;const m=new Zr(h,r);c.forEach((y,v)=>{for(let x=0;x<i[0];x++)for(let b=0;b<i[2];b++)m.set(l.get(x,y,b),x,v,b)});const p=n.slice();return p[s]=h[1],{outputValues:m.values,outputShape:p,indices:a}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fPe=Object.freeze(Object.defineProperty({__proto__:null,addImpl:t9,bincountImpl:M3,bincountReduceImpl:n9,bitwiseAndImpl:r9,castImpl:e9,ceilImpl:s9,concatImpl:i9,equalImpl:o9,expImpl:l9,expm1Impl:u9,floorDivImpl:h9,floorImpl:d9,gatherNdImpl:f9,gatherV2Impl:m9,greaterEqualImpl:g9,greaterImpl:p9,lessEqualImpl:b9,lessImpl:y9,linSpaceImpl:v9,logImpl:x9,maxImpl:w9,maximumImpl:E9,minimumImpl:k9,multiplyImpl:z3,negImpl:N9,notEqualImpl:C9,prodImpl:_9,raggedGatherImpl:S9,raggedRangeImpl:T9,raggedTensorToTensorImpl:$9,rangeImpl:I9,rsqrtImpl:A9,scatterImpl:Vu,sigmoidImpl:QRe,simpleAbsImpl:QG,sliceImpl:P9,sparseFillEmptyRowsImpl:D9,sparseReshapeImpl:O9,sparseSegmentReductionImpl:B3,sqrtImpl:nPe,squaredDifferenceImpl:L9,staticRegexReplaceImpl:M9,stridedSliceImpl:z9,stringNGramsImpl:F9,stringSplitImpl:B9,stringToHashBucketFastImpl:V9,subImpl:j9,tileImpl:U9,topKImpl:G9,transposeImpl:F3,uniqueImpl:W9},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */d7("cpu",()=>new g2,1);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const q9=sn(C0,t=>t>=0?t:Math.exp(t)-1),mPe={kernelName:C0,backendName:"cpu",kernelFunc:q9};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K9(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{alpha:i}=r;He([s],"leakyRelu");const o=pe(s.shape),a=n.data.get(s.dataId).values,l=ls("float32",o);for(let c=0;c<a.length;c++)l[c]=a[c]<0?i*a[c]:a[c];return n.makeTensorInfo(s.shape,"float32",l)}const pPe={kernelName:fw,backendName:"cpu",kernelFunc:K9};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gPe=rr((t,e)=>t<0?e*t:t);function Z9(t){const{inputs:e,backend:n}=t,{x:r,alpha:s}=e;He([r,s],"prelu");const i=n.data.get(r.dataId).values,o=n.data.get(s.dataId).values,[a,l]=gPe(r.shape,s.shape,i,o,"float32");return n.makeTensorInfo(l,"float32",a)}const yPe={kernelName:Rw,backendName:"cpu",kernelFunc:Z9};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X9=sn(H0,t=>Math.max(0,t)),bPe={kernelName:H0,backendName:"cpu",kernelFunc:X9};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Y9=sn(G0,t=>Math.min(Math.max(0,t),6)),vPe={kernelName:G0,backendName:"cpu",kernelFunc:Y9};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J1(t,e,n,r,s){if(n==="linear")return Fa({inputs:{x:e},backend:t});if(n==="relu")return X9({inputs:{x:e},backend:t});if(n==="elu")return q9({inputs:{x:e},backend:t});if(n==="relu6")return Y9({inputs:{x:e},backend:t});if(n==="prelu")return Z9({inputs:{x:e,alpha:r},backend:t});if(n==="leakyrelu")return K9({inputs:{x:e},backend:t,attrs:{alpha:s}});if(n==="sigmoid")return R9({inputs:{x:e},backend:t});throw new Error(`Activation ${n} has not been implemented for the CPU backend.`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xn(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{shape:i}=r,o=pe(s.shape),a=gj(i,o),l=pe(a);F(o===l,()=>`The new shape (${a}) has ${l} elements and the old shape (${s.shape}) has ${o} elements. The new shape and old shape must have the same number of elements.`),n.incRef(s.dataId);const c=n.data.get(s.dataId);if(c.complexTensorInfos!=null){const u=c.complexTensorInfos.real,h=c.complexTensorInfos.imag;u.shape=a,h.shape=a}return{dataId:s.dataId,shape:a,dtype:s.dtype}}const xPe={kernelName:Dw,backendName:"cpu",kernelFunc:xn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J9(t){const{inputs:e,backend:n,attrs:r}=t,{a:s,b:i}=e,{transposeA:o,transposeB:a}=r;He([s,i],"matMul");const l=s.shape.length,c=i.shape.length,u=o?s.shape[l-2]:s.shape[l-1],h=a?i.shape[c-1]:i.shape[c-2],m=o?s.shape[l-1]:s.shape[l-2],p=a?i.shape[c-2]:i.shape[c-1],y=s.shape.slice(0,-2),v=i.shape.slice(0,-2),x=pe(y),b=pe(v),E=ut(s.shape.slice(0,-2),i.shape.slice(0,-2)).concat([m,p]);F(u===h,()=>`Error in matMul: inner shapes (${u}) and (${h}) of Tensors with shapes ${s.shape} and ${i.shape} and transposeA=${o} and transposeB=${a} must match.`);const N=o?[x,u,m]:[x,m,u],C=a?[b,p,h]:[b,h,p],S=xn({inputs:{x:s},backend:n,attrs:{shape:N}}),T=xn({inputs:{x:i},backend:n,attrs:{shape:C}}),I=o?S.shape[1]:S.shape[2],P=o?S.shape[2]:S.shape[1],R=a?T.shape[1]:T.shape[2],D=Math.max(x,b),B=n.data.get(S.dataId).values,Z=n.data.get(T.dataId).values,z=qe(S.shape),q=qe(T.shape),[M,U,V]=o?[z[0],1,z[1]]:[z[0],z[1],1],[ne,J,G]=a?[1,q[1],q[0]]:[q[1],1,q[0]],X=P*R,H=bt([D,P,R],S.dtype),W=H.values,te=n.blockSize;for(let ae=0;ae<D;ae++){const ve=ae%x,Ce=ae%b;for(let Ie=0;Ie<P;Ie+=te){const Fe=Math.min(Ie+te,P);for(let De=0;De<R;De+=te){const Ke=Math.min(De+te,R);for(let Je=0;Je<I;Je+=te){const dt=Math.min(Je+te,I);for(let Et=Ie;Et<Fe;Et++)for(let kt=De;kt<Ke;kt++){let Ot=0;for(let St=Je;St<dt;St++){const Qr=B[ve*M+Et*U+St*V],Yt=Z[St*ne+kt*J+Ce*G];Ot+=Qr*Yt}W[ae*X+(Et*R+kt)]+=Ot}}}}}return n.disposeIntermediateTensorInfo(S),n.disposeIntermediateTensorInfo(T),n.makeTensorInfo(E,H.dtype,H.values)}const wPe={kernelName:Jx,backendName:"cpu",kernelFunc:J9};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EPe(t){const{inputs:e,backend:n,attrs:r}=t,{a:s,b:i,bias:o,preluActivationWeights:a}=e,{transposeA:l,transposeB:c,activation:u,leakyreluAlpha:h}=r;let m,p,y;const v=[];m=J9({inputs:{a:s,b:i},attrs:{transposeA:l,transposeB:c},backend:n}),o&&(p=If({inputs:{a:m,b:o},backend:n}),v.push(m),m=p),u&&(y=J1(n,m,u,a,h),v.push(m),m=y);for(const b of v)n.disposeIntermediateTensorInfo(b);return m}const kPe={kernelName:A1,backendName:"cpu",kernelFunc:EPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NPe=sn(h0,t=>Math.acos(t)),CPe={kernelName:h0,backendName:"cpu",kernelFunc:NPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Pe=sn(f0,t=>Math.acosh(t)),SPe={kernelName:f0,backendName:"cpu",kernelFunc:_Pe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TPe(t){const{inputs:e,backend:n}=t,r=e;He(e,"addN");const s=r.map(a=>n.data.get(a.dataId).values),i=bt(r[0].shape,r[0].dtype),o=i.values;for(let a=0;a<r.length;a++){const l=s[a];for(let c=0;c<o.length;c++)o[c]+=l[c]}return n.makeTensorInfo(i.shape,i.dtype,i.values)}const $Pe={kernelName:g$,backendName:"cpu",kernelFunc:TPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IPe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:o}=r;He(s,"all");const a=xt(i,s.shape);let l=a;const c=jn(l,s.shape.length);let u=s;c!=null&&(u=Gs({inputs:{x:s},backend:n,attrs:{perm:c}}),l=tr(l.length,s.shape.length)),Yr("all",l,u.shape.length);const[h,m]=Mr(u.shape,l),p=pe(m),y=cs(pe(h),u.dtype),v=n.data.get(u.dataId).values;for(let b=0;b<y.length;++b){const w=b*p;let E=v[w];for(let N=0;N<p;++N){const C=v[w+N];E=E&&C}y[b]=E}c!=null&&n.disposeIntermediateTensorInfo(u);const x=n.makeTensorInfo(h,u.dtype,y);if(o){const b=ur(h,a),w=xn({inputs:{x},backend:n,attrs:{shape:b}});return n.disposeIntermediateTensorInfo(x),w}return x}const APe={kernelName:y$,backendName:"cpu",kernelFunc:IPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RPe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:o}=r;He(s,"any");const a=xt(i,s.shape);let l=a;const c=jn(l,s.shape.length);let u=s;c!=null&&(u=Gs({inputs:{x:s},backend:n,attrs:{perm:c}}),l=tr(l.length,s.shape.length)),Yr("any",l,u.shape.length);const[h,m]=Mr(u.shape,l),p=pe(m),y=cs(pe(h),u.dtype),v=n.data.get(u.dataId).values;for(let b=0;b<y.length;++b){const w=b*p;let E=v[w];for(let N=0;N<p;++N){const C=v[w+N];E=E||C}y[b]=E}c!=null&&n.disposeIntermediateTensorInfo(u);const x=n.makeTensorInfo(h,u.dtype,y);if(o){const b=ur(h,a),w=xn({inputs:{x},backend:n,attrs:{shape:b}});return n.disposeIntermediateTensorInfo(x),w}return x}const PPe={kernelName:b$,backendName:"cpu",kernelFunc:RPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DPe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i}=r;He(s,"argMax");let o=xt(i,s.shape);const a=jn(o,s.shape.length);let l=s;const c=[];a!=null&&(l=Gs({inputs:{x:s},backend:n,attrs:{perm:a}}),c.push(l),o=tr(o.length,l.shape.length)),o=[o[0]],Yr("argMax",o,l.shape.length);const[u,h]=Mr(l.shape,o),m=pe(u),p=cs(m,"int32"),y=pe(h),v=n.data.get(l.dataId).values;for(let x=0;x<p.length;++x){const b=x*y;let w=v[b],E=0;for(let N=0;N<y;++N){const C=v[b+N];C>w&&(w=C,E=N)}p[x]=E}return c.forEach(x=>n.disposeIntermediateTensorInfo(x)),n.makeTensorInfo(u,"int32",p)}const OPe={kernelName:Kx,backendName:"cpu",kernelFunc:DPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LPe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i}=r;He(s,"argMin");let o=xt(i,s.shape);const a=jn(o,s.shape.length);let l=s;const c=[];a!=null&&(l=Gs({inputs:{x:s},backend:n,attrs:{perm:a}}),c.push(l),o=tr(o.length,l.shape.length)),o=[o[0]],Yr("argMin",o,l.shape.length);const[u,h]=Mr(l.shape,o),m=pe(u),p=cs(m,"int32"),y=pe(h),v=n.data.get(l.dataId).values;for(let x=0;x<p.length;++x){const b=x*y;let w=v[b],E=0;for(let N=0;N<y;++N){const C=v[b+N];C<w&&(w=C,E=N)}p[x]=E}return c.forEach(x=>n.disposeIntermediateTensorInfo(x)),n.makeTensorInfo(u,"int32",p)}const MPe={kernelName:Zx,backendName:"cpu",kernelFunc:LPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zPe=sn(m0,t=>Math.asin(t)),FPe={kernelName:m0,backendName:"cpu",kernelFunc:zPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BPe=sn(p0,t=>Math.asinh(t)),VPe={kernelName:p0,backendName:"cpu",kernelFunc:BPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jPe=sn(g0,t=>Math.atan(t)),UPe={kernelName:g0,backendName:"cpu",kernelFunc:jPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HPe=rr((t,e)=>Math.atan2(t,e)),GPe=Sr(b0,HPe),WPe={kernelName:b0,backendName:"cpu",kernelFunc:GPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qPe=sn(y0,t=>Math.atanh(t)),KPe={kernelName:y0,backendName:"cpu",kernelFunc:qPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j3(t,e,n,r,s,i){const o=s.strideHeight,a=s.strideWidth,l=s.dilationHeight,c=s.dilationWidth,u=s.effectiveFilterHeight,h=s.effectiveFilterWidth,m=s.padInfo.top,p=s.padInfo.left,y=i==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,v=bt(s.outShape,n),x=v.values,b=s.outShape[1]*s.outShape[2]*s.outShape[3],w=s.outShape[2]*s.outShape[3],E=s.outShape[3];for(let N=0;N<s.batchSize;++N){const C=N*b,S=N*r[0];for(let T=0;T<s.inChannels;++T)for(let I=0;I<s.outHeight;++I){const P=I*o-m,R=Math.max(0,P),D=Math.min(s.inHeight,u+P),B=C+I*w;for(let Z=0;Z<s.outWidth;++Z){const z=Z*a-p,q=Math.max(0,z),M=Math.min(s.inWidth,h+z);let U=y,V=0,ne=0;for(let G=R;G<D;G+=l){const X=S+G*r[1];for(let H=q;H<M;H+=c){const W=X+H*r[2],te=t[W+T];i==="max"&&te>U?U=te:i==="avg"&&(V+=te,ne++)}if(isNaN(U))break}const J=B+Z*E+T;x[J]=i==="avg"?V/ne:U}}}return v}function Q9(t,e,n,r,s=!1,i=!1){const o=bt(r.outShape,"int32"),a=r.strideHeight,l=r.strideWidth,c=r.dilationHeight,u=r.dilationWidth,h=r.effectiveFilterHeight,m=r.effectiveFilterWidth,p=r.padInfo.top,y=r.padInfo.left,v=bt(e,n,t);for(let x=0;x<r.batchSize;++x)for(let b=0;b<r.inChannels;++b)for(let w=0;w<r.outHeight;++w){const E=w*a-p;let N=E;for(;N<0;)N+=c;const C=Math.min(r.inHeight,h+E);for(let S=0;S<r.outWidth;++S){const T=S*l-y;let I=T;for(;I<0;)I+=u;const P=Math.min(r.inWidth,m+T);let R=Number.NEGATIVE_INFINITY,D=-1;for(let B=N;B<C;B+=c){const Z=B-E;for(let z=I;z<P;z+=u){const q=z-T,M=v.get(x,B,z,b);M>R&&(R=M,s?D=i?((x*r.inHeight+B)*r.inWidth+z)*r.inChannels+b:(B*r.inWidth+z)*r.inChannels+b:D=Z*m+q)}}o.set(D,x,w,S,b)}}return o}function eW(t,e,n,r,s,i){const o=s.strideDepth,a=s.strideHeight,l=s.strideWidth,c=s.dilationDepth,u=s.dilationHeight,h=s.dilationWidth,m=s.effectiveFilterDepth,p=s.effectiveFilterHeight,y=s.effectiveFilterWidth,v=s.padInfo.front,x=s.padInfo.top,b=s.padInfo.left,w=i==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,E=bt(s.outShape,n),N=E.values,C=s.outShape[1]*s.outShape[2]*s.outShape[3]*s.outShape[4],S=s.outShape[2]*s.outShape[3]*s.outShape[4],T=s.outShape[3]*s.outShape[4],I=s.outShape[4];for(let P=0;P<s.batchSize;++P){const R=P*C,D=P*r[0];for(let B=0;B<s.inChannels;++B)for(let Z=0;Z<s.outDepth;++Z){const z=Z*o-v;let q=z;for(;q<0;)q+=c;const M=Math.min(s.inDepth,m+z),U=R+Z*S;for(let V=0;V<s.outHeight;++V){const ne=V*a-x;let J=ne;for(;J<0;)J+=u;const G=Math.min(s.inHeight,p+ne),X=U+V*T;for(let H=0;H<s.outWidth;++H){const W=H*l-b;let te=W;for(;te<0;)te+=h;const ae=Math.min(s.inWidth,y+W),ve=X+H*I;let Ce=w,Ie=0,Fe=0;for(let Ke=q;Ke<M;Ke+=c){const Je=D+Ke*r[1];for(let dt=J;dt<G;dt+=u){const Et=Je+dt*r[2];for(let kt=te;kt<ae;kt+=h){const Ot=Et+kt*r[3],St=t[Ot+B];if(i==="max"&&St>Ce?Ce=St:i==="avg"&&(Ie+=St,Fe++),isNaN(Ce))break}if(isNaN(Ce))break}if(isNaN(Ce))break}const De=ve+B;N[De]=i==="avg"?Ie/Math.max(Fe,1):Ce}}}}return E}function ZPe(t,e){const n=bt(e.outShape,"int32"),r=e.strideDepth,s=e.strideHeight,i=e.strideWidth,o=e.dilationDepth,a=e.dilationHeight,l=e.dilationWidth,c=e.effectiveFilterDepth,u=e.effectiveFilterHeight,h=e.effectiveFilterWidth,m=e.padInfo.front,p=e.padInfo.top,y=e.padInfo.left;for(let v=0;v<e.batchSize;++v)for(let x=0;x<e.inChannels;++x)for(let b=0;b<e.outDepth;++b){const w=b*r-m;let E=w;for(;E<0;)E+=o;const N=Math.min(e.inDepth,c+w);for(let C=0;C<e.outHeight;++C){const S=C*s-p;let T=S;for(;T<0;)T+=a;const I=Math.min(e.inHeight,u+S);for(let P=0;P<e.outWidth;++P){const R=P*i-y;let D=R;for(;D<0;)D+=l;const B=Math.min(e.inWidth,h+R);let Z=Number.NEGATIVE_INFINITY,z=-1;for(let q=E;q<N;q+=o){const M=q-w;for(let U=T;U<I;U+=a){const V=U-S;for(let ne=D;ne<B;ne+=l){const J=ne-R,G=t.get(v,q,U,ne,x);G>=Z&&(Z=G,z=M*u*h+V*u+J)}}}n.set(z,v,b,C,P,x)}}}return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XPe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e;He(s,"avgPool");const{filterSize:i,strides:o,pad:a,dimRoundingMode:l}=r,c=1;F(hs(o,c),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${c}'`);const u=xo(s.shape,i,o,c,a,l);let h;if(u.filterWidth===1&&u.filterHeight===1&&Zt(u.inShape,u.outShape))h=Fa({inputs:{x:s},backend:n});else{const m=n.data.get(s.dataId).values,p=qe(s.shape),y=j3(m,s.shape,s.dtype,p,u,"avg");h=n.makeTensorInfo(u.outShape,s.dtype,y.values)}return h}const YPe={kernelName:Xx,backendName:"cpu",kernelFunc:XPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JPe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{filterSize:i,strides:o,pad:a,dimRoundingMode:l,dataFormat:c}=r;He(s,"avgPool3d");const u=Vl(s.shape,i,o,1,a,l,c),h=n.data.get(s.dataId).values,m=eW(h,s.shape,s.dtype,qe(s.shape),u,"avg");return n.makeTensorInfo(m.shape,"float32",m.values)}const QPe={kernelName:Yx,backendName:"cpu",kernelFunc:JPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eDe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i}=e,{filterSize:o,strides:a,pad:l,dimRoundingMode:c}=r;He([s,i],"avgPool3DGrad");const u=Vl(i.shape,o,a,1,l,c),h=u.strideDepth,m=u.strideHeight,p=u.strideWidth,y=u.filterDepth,v=u.filterHeight,x=u.filterWidth,b=u.dilationDepth,w=u.dilationHeight,E=u.dilationWidth,N=u.effectiveFilterDepth,C=u.effectiveFilterHeight,S=u.effectiveFilterWidth,T=N-1-u.padInfo.front,I=S-1-u.padInfo.left,P=C-1-u.padInfo.top,R=bt(i.shape,"float32"),D=1/(y*v*x),B=n.bufferSync(s);for(let Z=0;Z<u.batchSize;++Z)for(let z=0;z<u.inChannels;++z)for(let q=0;q<u.inDepth;++q)for(let M=0;M<u.inHeight;++M)for(let U=0;U<u.inWidth;++U){const V=q-T,ne=M-P,J=U-I;let G=0;for(let X=0;X<N;X+=b){const H=(V+X)/h;if(!(H<0||H>=u.outDepth||Math.floor(H)!==H))for(let W=0;W<C;W+=w){const te=(ne+W)/m;if(!(te<0||te>=u.outHeight||Math.floor(te)!==te))for(let ae=0;ae<S;ae+=E){const ve=(J+ae)/p;if(ve<0||ve>=u.outWidth||Math.floor(ve)!==ve)continue;const Ce=B.get(Z,H,te,ve,z);G+=Ce}}}R.set(G*D,Z,q,M,U,z)}return n.makeTensorInfo(R.shape,R.dtype,R.values)}const tDe={kernelName:x$,backendName:"cpu",kernelFunc:eDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nDe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i}=e,o=i;He([s,i],"avgPoolGrad");const{filterSize:a,strides:l,pad:c}=r,u=xo(o.shape,a,l,1,c),h=u.strideHeight,m=u.strideWidth,p=u.filterHeight,y=u.filterWidth,v=u.dilationHeight,x=u.dilationWidth,b=u.effectiveFilterHeight,w=u.effectiveFilterWidth,E=w-1-u.padInfo.left,N=b-1-u.padInfo.top,C=bt(o.shape,"float32"),S=1/(p*y),T=n.data.get(s.dataId).values,I=bt(s.shape,"float32",T);for(let P=0;P<u.batchSize;++P)for(let R=0;R<u.inChannels;++R)for(let D=0;D<u.inHeight;++D)for(let B=0;B<u.inWidth;++B){const Z=D-N,z=B-E;let q=0;for(let M=0;M<b;M+=v){const U=(Z+M)/h;if(!(U<0||U>=u.outHeight||Math.floor(U)!==U))for(let V=0;V<w;V+=x){const ne=(z+V)/m;if(ne<0||ne>=u.outWidth||Math.floor(ne)!==ne)continue;const J=I.get(P,U,ne,R);q+=J}}C.set(q*S,P,D,B,R)}return n.makeTensorInfo(C.shape,C.dtype,C.values)}const rDe={kernelName:v$,backendName:"cpu",kernelFunc:nDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sDe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,scale:i,offset:o,mean:a,variance:l}=e;F(a.shape.length===l.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),F(o==null||a.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),F(i==null||a.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),He([s,a,l,i,o],"batchNorm");let{varianceEpsilon:c}=r;c==null&&(c=.001);const u=n.data.get(s.dataId).values,h=n.data.get(a.dataId).values,m=n.data.get(l.dataId).values,p=i?n.data.get(i.dataId).values:new Float32Array([1]),y=o?n.data.get(o.dataId).values:new Float32Array([0]),v=new Float32Array(u.length),x=y.length,b=p.length,w=m.length,E=h.length;let N=0,C=0,S=0,T=0;for(let I=0;I<u.length;++I)v[I]=y[N++]+(u[I]-h[C++])*p[S++]/Math.sqrt(m[T++]+c),N>=x&&(N=0),C>=E&&(C=0),S>=b&&(S=0),T>=w&&(T=0);return n.makeTensorInfo(s.shape,s.dtype,v)}const iDe={kernelName:uw,backendName:"cpu",kernelFunc:sDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oDe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockShape:i,crops:o}=r;He([s],"batchToSpaceND");const a=i.reduce((b,w)=>b*w),l=hy(s.shape,i,a),c=fy(l.length,i.length),u=my(s.shape,i,a),h=YI(o,i.length),m=JI(u,o,i.length),p=xn({inputs:{x:s},backend:n,attrs:{shape:l}}),y=Gs({inputs:{x:p},backend:n,attrs:{perm:c}}),v=xn({inputs:{x:y},backend:n,attrs:{shape:u}}),x=vd({inputs:{x:v},backend:n,attrs:{begin:h,size:m}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(v),x}const aDe={kernelName:Qx,backendName:"cpu",kernelFunc:oDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lDe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,weights:i}=e,{size:o}=r,a=n.data.get(s.dataId).values,l=n.data.get(i.dataId).values,c=M3(a,l,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,c)}const cDe={kernelName:w$,backendName:"cpu",kernelFunc:lDe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uDe(t){const{inputs:e,backend:n}=t,{s0:r,s1:s}=e,i=n.data.get(r.dataId).values,o=n.data.get(s.dataId).values,a=ut(Array.from(i),Array.from(o));return n.makeTensorInfo([a.length],"int32",Int32Array.from(a))}const dDe={kernelName:Ej,backendName:"cpu",kernelFunc:uDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hDe=sn(w0,(t,e)=>{const n=e;return t>n.clipValueMax?n.clipValueMax:t<n.clipValueMin?n.clipValueMin:t}),fDe={kernelName:w0,backendName:"cpu",kernelFunc:hDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mDe=t=>{const{x:e}=t.inputs,n=t.backend,r=new Float32Array(pe(e.shape)),s=n.data.get(e.dataId),i=s.complexTensorInfos.real,o=s.complexTensorInfos.imag,a=n.data.get(i.dataId).values,l=n.data.get(o.dataId).values;for(let c=0;c<a.length;c++){const u=a[c],h=l[c];r[c]=Math.hypot(u,h)}return n.makeOutput(r,e.shape,"float32")},pDe={kernelName:ew,backendName:"cpu",kernelFunc:mDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Af(t){const{inputs:e,backend:n}=t,{input:r}=e,s=n.data.get(r.dataId).complexTensorInfos.imag,i=n.data.get(s.dataId).values;return n.makeTensorInfo(s.shape,s.dtype,i)}const gDe={kernelName:F$,backendName:"cpu",kernelFunc:Af};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rf(t){const{inputs:e,backend:n,attrs:r}=t,{axis:s}=r,i=xt(s,e[0].shape)[0],o=e.map(v=>v.shape);KI(o,i);let a=$a(e.map(v=>v.shape),i);if(pe(a)===0)return n.makeTensorInfo(a,e[0].dtype,[]);const l=e.filter(v=>pe(v.shape)>0);if(l.length===1)return Fa({inputs:{x:l[0]},backend:n});if(l[0].dtype==="complex64"){const v=l.map(N=>bd({inputs:{input:N},backend:n})),x=l.map(N=>Af({inputs:{input:N},backend:n})),b=Rf({inputs:v,backend:n,attrs:{axis:i}}),w=Rf({inputs:x,backend:n,attrs:{axis:i}}),E=ti({inputs:{real:b,imag:w},backend:n});return v.forEach(N=>n.disposeIntermediateTensorInfo(N)),x.forEach(N=>n.disposeIntermediateTensorInfo(N)),n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(w),E}const c=l.map(v=>{const b=[-1,pe(v.shape.slice(i))];return xn({inputs:{x:v},backend:n,attrs:{shape:b}})}),u=c.map(v=>({vals:n.data.get(v.dataId).values,shape:v.shape}));a=$a(c.map(v=>v.shape),1);const h=c[0].shape[0]===1,m=i9(u,a,e[0].dtype,h),p=$a(l.map(v=>v.shape),i),y=n.makeTensorInfo(p,e[0].dtype,m);return c.forEach(v=>n.disposeIntermediateTensorInfo(v)),y}const yDe={kernelName:tw,backendName:"cpu",kernelFunc:Rf};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tW(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i}=e,{strides:o,pad:a,dataFormat:l,dilations:c,dimRoundingMode:u}=r;He([s,i],"conv2d");const h=jl(l),m=Xr(s.shape,i.shape,o,c,a,u,!1,h),p=m.filterHeight,y=m.filterWidth,v=m.dilationHeight,x=m.dilationWidth,b=m.padInfo.left,w=m.padInfo.top,E=m.dataFormat==="channelsLast",N=new Zr(m.outShape,s.dtype),C=qe(s.shape),S=qe(i.shape),T=C[0],I=E?C[1]:C[2],P=E?C[2]:1,R=E?1:C[1],D=N.strides[0],B=E?N.strides[1]:N.strides[2],Z=E?N.strides[2]:1,z=E?1:N.strides[1],q=n.data.get(s.dataId).values,M=n.data.get(i.dataId).values,U=N.values;for(let V=0;V<m.batchSize;++V){const ne=V*T,J=V*D;for(let G=0;G<m.outHeight;++G){const X=J+G*B,H=G*m.strideHeight-w;for(let W=0;W<p;++W){const te=H+W*v;if(te<0||te>=m.inHeight)continue;const ae=W*S[0],ve=ne+te*I;for(let Ce=0;Ce<m.outWidth;++Ce){const Ie=X+Ce*Z,Fe=Ce*m.strideWidth-b;for(let De=0;De<y;++De){const Ke=Fe+De*x;if(Ke<0||Ke>=m.inWidth)continue;const Je=ae+De*S[1],dt=ve+Ke*P;let Et=Je;for(let kt=0;kt<m.inChannels;++kt){const Ot=q[dt+kt*R];for(let St=0;St<m.outChannels;++St)U[Ie+St*z]+=Ot*M[Et+St];Et+=m.outChannels}}}}}}return n.makeTensorInfo(N.shape,N.dtype,U)}const bDe={kernelName:nw,backendName:"cpu",kernelFunc:tW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vDe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:i}=e,{strides:o,pad:a,dataFormat:l,dimRoundingMode:c,filterShape:u}=r;He([s,i],"conv2dBackpropFilter");const h=jl(l),m=Xr(s.shape,u,o,1,a,c,!1,h),{strideHeight:p,strideWidth:y,filterHeight:v,filterWidth:x}=m,b=m.dataFormat==="channelsLast",w=new Zr(m.filterShape,"float32"),E=m.padInfo.left,N=m.padInfo.top,C=n.data.get(s.dataId).values,S=n.data.get(i.dataId).values,T=new Zr(s.shape,s.dtype,C),I=new Zr(i.shape,i.dtype,S);for(let P=0;P<v;++P){const R=Math.max(0,Math.ceil((N-P)/p)),D=Math.min(m.outHeight,(m.inHeight+N-P)/p);for(let B=0;B<x;++B){const Z=Math.max(0,Math.ceil((E-B)/y)),z=Math.min(m.outWidth,(m.inWidth+E-B)/y);for(let q=0;q<m.inChannels;++q)for(let M=0;M<m.outChannels;++M){let U=0;for(let V=0;V<m.batchSize;++V)for(let ne=R;ne<D;++ne){const J=P+ne*p-N;for(let G=Z;G<z;++G){const X=B+G*y-E;b?U+=T.get(V,J,X,q)*I.get(V,ne,G,M):U+=T.get(V,q,J,X)*I.get(V,M,ne,G)}}w.set(U,P,B,q,M)}}}return n.makeTensorInfo(w.shape,w.dtype,w.values)}const xDe={kernelName:N$,backendName:"cpu",kernelFunc:vDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wDe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:i}=e,{inputShape:o,strides:a,pad:l,dataFormat:c,dimRoundingMode:u}=r;He([s,i],"conv2dBackpropInput");const h=qe(i.shape),m=qe(s.shape);let p=jl(c);const y=Xr(o,i.shape,a,1,l,u,!1,p),v=new Zr(y.inShape,"float32"),x=v.values,b=n.data.get(s.dataId).values,w=n.data.get(i.dataId).values,[E,N,C]=h,{batchSize:S,filterHeight:T,filterWidth:I,inChannels:P,inHeight:R,inWidth:D,outChannels:B,outHeight:Z,outWidth:z,strideHeight:q,strideWidth:M}=y;p=y.dataFormat;const U=T-1-y.padInfo.top,V=I-1-y.padInfo.left,ne=p==="channelsLast",J=v.strides[0],G=ne?v.strides[1]:v.strides[2],X=ne?v.strides[2]:1,H=ne?1:v.strides[1],W=m[0],te=ne?m[1]:m[2],ae=ne?m[2]:1,ve=ne?1:m[1];for(let Ce=0;Ce<S;++Ce)for(let Ie=0;Ie<P;++Ie)for(let Fe=0;Fe<R;++Fe){const De=Fe-U,Ke=Math.max(0,Math.ceil(De/q)),Je=Math.min(Z,(T+De)/q);for(let dt=0;dt<D;++dt){const Et=dt-V,kt=Math.max(0,Math.ceil(Et/M)),Ot=Math.min(z,(I+Et)/M);let St=0;for(let Yt=Ke;Yt<Je;++Yt){const Tr=Yt*q-De;for(let Un=kt;Un<Ot;++Un){const ps=Un*M-Et,es=W*Ce+te*Yt+ae*Un,be=E*(T-1-Tr)+N*(I-1-ps)+C*Ie;for(let le=0;le<B;++le){const Ee=b[es+ve*le],Ne=w[be+le];St+=Ee*Ne}}}const Qr=J*Ce+G*Fe+X*dt+H*Ie;x[Qr]=St}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}const EDe={kernelName:rw,backendName:"cpu",kernelFunc:wDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kDe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i}=e,{strides:o,pad:a,dilations:l}=r;He([s,i],"conv3d");const c=eu(s.shape,i.shape,o,l,a),{filterDepth:u,filterHeight:h,filterWidth:m,dilationDepth:p,dilationHeight:y,dilationWidth:v,padInfo:x}=c,b=x.front,w=x.left,E=x.top,N=new Zr(c.outShape,s.dtype),C=n.data.get(s.dataId).values,S=n.data.get(i.dataId).values,T=N.values,I=qe(s.shape),P=qe(i.shape);for(let R=0;R<c.batchSize;++R){const D=R*I[0],B=R*N.strides[0];for(let Z=0;Z<c.outDepth;++Z){const z=B+Z*N.strides[1],q=Z*c.strideDepth-b;for(let M=0;M<u;++M){const U=q+M*p;if(U<0||U>=c.inDepth)continue;const V=M*P[0],ne=D+U*I[1];for(let J=0;J<c.outHeight;++J){const G=z+J*N.strides[2],X=J*c.strideHeight-E;for(let H=0;H<h;++H){const W=X+H*y;if(W<0||W>=c.inHeight)continue;const te=V+H*P[1],ae=ne+W*I[2];for(let ve=0;ve<c.outWidth;++ve){const Ce=G+ve*c.outChannels,Ie=ve*c.strideWidth-w;for(let Fe=0;Fe<m;++Fe){const De=Ie+Fe*v;if(De<0||De>=c.inWidth)continue;const Ke=te+Fe*P[2],Je=ae+De*c.inChannels;let dt=Ke;for(let Et=0;Et<c.inChannels;++Et){const kt=C[Je+Et];for(let Ot=0;Ot<c.outChannels;++Ot)T[Ce+Ot]+=kt*S[dt+Ot];dt+=c.outChannels}}}}}}}}return n.makeTensorInfo(N.shape,N.dtype,N.values)}const NDe={kernelName:sw,backendName:"cpu",kernelFunc:kDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CDe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:i}=e,{strides:o,pad:a,filterShape:l}=r;He([s,i],"conv3dBackpropFilterV2");const c=qe(s.shape),u=qe(i.shape),h=eu(s.shape,l,o,1,a),m=h.strideDepth,p=h.strideHeight,y=h.strideWidth,v=h.filterDepth,x=h.filterHeight,b=h.filterWidth,w=new Zr(h.filterShape,"float32"),E=w.values,[N,C,S,T]=w.strides,I=n.data.get(i.dataId).values,[P,R,D,B]=u,Z=n.data.get(s.dataId).values,[z,q,M,U]=c,V=h.padInfo.front,ne=h.padInfo.left,J=h.padInfo.top;for(let G=0;G<v;++G){const X=Math.max(0,Math.ceil((V-G)/m)),H=Math.min(h.outDepth,(h.inDepth+V-G)/m),W=G*N;for(let te=0;te<x;++te){const ae=Math.max(0,Math.ceil((J-te)/p)),ve=Math.min(h.outHeight,(h.inHeight+J-te)/p),Ce=te*C+W;for(let Ie=0;Ie<b;++Ie){const Fe=Math.max(0,Math.ceil((ne-Ie)/y)),De=Math.min(h.outWidth,(h.inWidth+ne-Ie)/y),Ke=Ie*S+Ce;for(let Je=0;Je<h.inChannels;++Je){const dt=Je*T+Ke;for(let Et=0;Et<h.outChannels;++Et){let kt=0;for(let Ot=0;Ot<h.batchSize;++Ot){const St=Ot*z,Qr=Ot*P;for(let Yt=X;Yt<H;++Yt){const Un=(G+Yt*m-V)*q+St,ps=Yt*R+Qr;for(let es=ae;es<ve;++es){const le=(te+es*p-J)*M+Un,Ee=es*D+ps;for(let Ne=Fe;Ne<De;++Ne){const lt=(Ie+Ne*y-ne)*U+le,Nt=Ne*B+Ee;kt+=Z[lt+Je]*I[Nt+Et]}}}}E[dt+Et]=kt}}}}}return n.makeTensorInfo(w.shape,w.dtype,w.values)}const _De={kernelName:C$,backendName:"cpu",kernelFunc:CDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SDe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:i}=e,{pad:o,strides:a,inputShape:l}=r;He([s],"conv3dBackpropInputV2");const c=qe(s.shape),u=qe(i.shape),h=eu(l,i.shape,a,1,o),m=new Zr(h.inShape,"float32"),p=m.values,[y,v,x,b]=m.strides,w=n.data.get(s.dataId).values,[E,N,C,S]=c,T=n.data.get(i.dataId).values,[I,P,R,D]=u,{batchSize:B,filterDepth:Z,filterHeight:z,filterWidth:q,inChannels:M,inDepth:U,inHeight:V,inWidth:ne,outChannels:J,outDepth:G,outHeight:X,outWidth:H,strideDepth:W,strideHeight:te,strideWidth:ae}=h,ve=Z-1-h.padInfo.front,Ce=z-1-h.padInfo.top,Ie=q-1-h.padInfo.left;for(let Fe=0;Fe<B;++Fe)for(let De=0;De<M;++De)for(let Ke=0;Ke<U;++Ke){const Je=Ke-ve,dt=Math.max(0,Math.ceil(Je/W)),Et=Math.min(G,(Z+Je)/W);for(let kt=0;kt<V;++kt){const Ot=kt-Ce,St=Math.max(0,Math.ceil(Ot/te)),Qr=Math.min(X,(z+Ot)/te);for(let Yt=0;Yt<ne;++Yt){const Tr=Yt-Ie,Un=Math.max(0,Math.ceil(Tr/ae)),ps=Math.min(H,(q+Tr)/ae);let es=0;for(let be=dt;be<Et;++be){const le=be*W-Je;for(let Ee=St;Ee<Qr;++Ee){const Ne=Ee*te-Ot;for(let Qe=Un;Qe<ps;++Qe){const lt=Qe*ae-Tr,Nt=E*Fe+N*be+C*Ee+S*Qe,j=I*(Z-1-le)+P*(z-1-Ne)+R*(q-1-lt)+D*De;for(let Q=0;Q<J;++Q){const ge=w[Nt+Q],Se=T[j+Q];es+=ge*Se}}}}p[y*Fe+v*Ke+x*kt+b*Yt+De]=es}}}return n.makeTensorInfo(m.shape,m.dtype,m.values)}const TDe={kernelName:_$,backendName:"cpu",kernelFunc:SDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $De=sn(E0,t=>Math.cos(t)),IDe={kernelName:E0,backendName:"cpu",kernelFunc:$De};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ADe=sn(k0,t=>Math.cosh(t)),RDe={kernelName:k0,backendName:"cpu",kernelFunc:ADe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PDe(t){const{inputs:e,backend:n,attrs:r}=t,{image:s,boxes:i,boxInd:o}=e,{cropSize:a,method:l,extrapolationValue:c}=r,[u,h,m,p]=s.shape,y=i.shape[0],[v,x]=a,b=bt([y,v,x,p],"float32"),w=n.data.get(i.dataId).values,E=n.data.get(o.dataId).values,N=n.data.get(s.dataId).values,C=qe(s.shape),S=qe(b.shape);for(let T=0;T<y;T++){const I=T*4,P=w[I],R=w[I+1],D=w[I+2],B=w[I+3],Z=E[T];if(Z>=u)continue;const z=v>1?(D-P)*(h-1)/(v-1):0,q=x>1?(B-R)*(m-1)/(x-1):0;for(let M=0;M<v;M++){const U=v>1?P*(h-1)+M*z:.5*(P+D)*(h-1);if(U<0||U>h-1){for(let V=0;V<x;V++)for(let ne=0;ne<p;ne++){const J=ne+V*S[2]+M*S[1]+T*S[0];b.values[J]=c}continue}if(l==="bilinear"){const V=Math.floor(U),ne=Math.ceil(U),J=U-V;for(let G=0;G<x;G++){const X=x>1?R*(m-1)+G*q:.5*(R+B)*(m-1);if(X<0||X>m-1){for(let ae=0;ae<p;ae++){const ve=ae+G*S[2]+M*S[1]+T*S[0];b.values[ve]=c}continue}const H=Math.floor(X),W=Math.ceil(X),te=X-H;for(let ae=0;ae<p;ae++){let ve=ae+H*C[2]+V*C[1]+Z*C[0];const Ce=N[ve];ve=ae+W*C[2]+V*C[1]+Z*C[0];const Ie=N[ve];ve=ae+H*C[2]+ne*C[1]+Z*C[0];const Fe=N[ve];ve=ae+W*C[2]+ne*C[1]+Z*C[0];const De=N[ve],Ke=Ce+(Ie-Ce)*te,Je=Fe+(De-Fe)*te;ve=ae+G*S[2]+M*S[1]+T*S[0],b.values[ve]=Ke+(Je-Ke)*J}}}else for(let V=0;V<x;++V){const ne=x>1?R*(m-1)+V*q:.5*(R+B)*(m-1);if(ne<0||ne>m-1){for(let X=0;X<p;X++){const H=X+V*S[2]+M*S[1]+T*S[0];b.values[H]=c}continue}const J=Math.round(ne),G=Math.round(U);for(let X=0;X<p;X++){const H=X+J*C[2]+G*C[1]+Z*C[0],W=X+V*S[2]+M*S[1]+T*S[0];b.values[W]=N[H]}}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}const DDe={kernelName:T$,backendName:"cpu",kernelFunc:PDe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ODe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,exclusive:o,reverse:a}=r;He(s,"cumprod");const l=jn([i],s.shape.length);let c=s;l!=null&&(c=Gs({inputs:{x:s},backend:n,attrs:{perm:l}}));const u=tr(1,s.shape.length)[0];if(u!==c.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${c.shape.length-1} but got axis=${u}`);const h=ci(c.dtype,"int32"),m=f$(pe(c.shape),h),p=n.data.get(c.dataId).values,y=c.shape[c.shape.length-1],v=a?(b,w)=>b+y-w-1:(b,w)=>b+w;for(let b=0;b<p.length;b+=y)for(let w=0;w<y;w++){const E=v(b,w);if(w===0)m[E]=o?1:p[E];else{const N=v(b,w-1);m[E]=o?p[N]*m[N]:p[E]*m[N]}}const x=n.makeTensorInfo(c.shape,h,m);if(l!=null){const b=tu(l),w=Gs({inputs:{x},backend:n,attrs:{perm:b}});return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(c),w}return x}const LDe={kernelName:S$,backendName:"cpu",kernelFunc:ODe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MDe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,exclusive:o,reverse:a}=r;He(s,"cumsum");const l=jn([i],s.shape.length);let c=s;l!=null&&(c=Gs({inputs:{x:s},backend:n,attrs:{perm:l}}));const u=tr(1,s.shape.length)[0];if(u!==c.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${c.shape.length-1} but got axis=${u}`);const h=ci(c.dtype,"int32"),m=cs(pe(c.shape),h),p=n.data.get(c.dataId).values,y=c.shape[c.shape.length-1],v=a?(b,w)=>b+y-w-1:(b,w)=>b+w;for(let b=0;b<p.length;b+=y)for(let w=0;w<y;w++){const E=v(b,w);if(w===0)m[E]=o?0:p[E];else{const N=v(b,w-1);m[E]=o?p[N]+m[N]:p[E]+m[N]}}const x=n.makeTensorInfo(c.shape,h,m);if(l!=null){const b=tu(l),w=Gs({inputs:{x},backend:n,attrs:{perm:b}});return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(c),w}return x}const zDe={kernelName:iw,backendName:"cpu",kernelFunc:MDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FDe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,weights:i}=e,{size:o,binaryOutput:a}=r;if(s.shape.length===1){const l=n.data.get(s.dataId).values,c=n.data.get(i.dataId).values,u=M3(l,c,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,u)}else if(s.shape.length===2){const l=n.bufferSync(s),c=n.bufferSync(i),u=n9(l,c,o,a);return n.makeTensorInfo(u.shape,i.dtype,u.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${s.shape.length}.`)}const BDe={kernelName:$$,backendName:"cpu",kernelFunc:FDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VDe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockSize:i,dataFormat:o}=r;F(o==="NHWC",()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${o}`);const a=s.shape[0],l=s.shape[1],c=s.shape[2],u=s.shape[3],h=l*i,m=c*i,p=u/(i*i),y=n.data.get(s.dataId).values,v=new Float32Array(a*h*m*p);let x=0;for(let b=0;b<a;++b)for(let w=0;w<h;++w){const E=Math.floor(w/i),N=w%i;for(let C=0;C<m;++C){const S=Math.floor(C/i),T=C%i,I=(N*i+T)*p;for(let P=0;P<p;++P){const D=P+I+u*(S+c*(E+l*b));v[x++]=y[D]}}}return n.makeTensorInfo([a,h,m,p],s.dtype,v)}const jDe={kernelName:I$,backendName:"cpu",kernelFunc:VDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nW(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i}=e,{strides:o,pad:a,dilations:l,dimRoundingMode:c}=r;He([s,i],"depthwiseConv2DNative");const u=qe(s.shape),h=qe(i.shape);let m=l;m==null&&(m=[1,1]),F(hs(o,m),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${o} and dilations '${m}'`);const p=Xr(s.shape,i.shape,o,m,a,c,!0),{filterHeight:y,filterWidth:v,dilationHeight:x,dilationWidth:b,padInfo:w}=p,E=w.left,N=w.top,C=p.outChannels/p.inChannels,S=new Zr(p.outShape,s.dtype),T=n.data.get(s.dataId).values,I=n.data.get(i.dataId).values,P=S.values;for(let R=0;R<p.batchSize;++R){const D=R*u[0],B=R*S.strides[0];for(let Z=0;Z<p.outHeight;++Z){const z=B+Z*S.strides[1],q=Z*p.strideHeight-N;for(let M=0;M<y;++M){const U=q+M*x;if(U<0||U>=p.inHeight)continue;const V=M*h[0],ne=D+U*u[1];for(let J=0;J<p.outWidth;++J){const G=z+J*S.strides[2],X=J*p.strideWidth-E;for(let H=0;H<v;++H){const W=X+H*b;if(W<0||W>=p.inWidth)continue;const te=V+H*h[1],ae=ne+W*p.inChannels;let ve=G,Ce=te;for(let Ie=0;Ie<p.inChannels;++Ie){const Fe=T[ae+Ie];for(let De=0;De<C;++De)P[ve+De]+=Fe*I[Ce+De];ve+=C,Ce+=C}}}}}}return n.makeTensorInfo(S.shape,S.dtype,S.values)}const UDe={kernelName:ow,backendName:"cpu",kernelFunc:nW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HDe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:i}=e,{strides:o,dilations:a,pad:l,dimRoundingMode:c,filterShape:u}=r;He([s,i],"depthwiseConv2dNativeBackpropFilter");const h=Xr(s.shape,u,o,a,l,c,!0),{strideHeight:m,strideWidth:p,filterHeight:y,filterWidth:v}=h,x=new Zr(h.filterShape,"float32"),b=h.padInfo.left,w=h.padInfo.top,E=h.outChannels/h.inChannels,N=n.data.get(s.dataId).values,C=new Zr(s.shape,s.dtype,N),S=n.data.get(i.dataId).values,T=new Zr(i.shape,i.dtype,S);for(let I=0;I<y;++I){const P=Math.max(0,Math.ceil((w-I)/m)),R=Math.min(h.outHeight,(h.inHeight+w-I)/m);for(let D=0;D<v;++D){const B=Math.max(0,Math.ceil((b-D)/p)),Z=Math.min(h.outWidth,(h.inWidth+b-D)/p);for(let z=0;z<h.outChannels;++z){const q=Math.trunc(z/E),M=z%E;let U=0;for(let V=0;V<h.batchSize;++V)for(let ne=P;ne<R;++ne){const J=I+ne*m-w;for(let G=B;G<Z;++G){const X=D+G*p-b;U+=C.get(V,J,X,q)*T.get(V,ne,G,z)}}x.set(U,I,D,q,M)}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}const GDe={kernelName:A$,backendName:"cpu",kernelFunc:HDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WDe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:i}=e,{strides:o,dilations:a,pad:l,dimRoundingMode:c,inputShape:u}=r;He([s,i],"depthwiseConv2DNativeBackpropInput");const h=qe(s.shape),m=qe(i.shape),p=Xr(u,i.shape,o,a,l,c,!0),y=new Zr(p.inShape,"float32"),v=y.values,[x,b,w]=y.strides,E=n.data.get(s.dataId).values,[N,C,S]=h,T=n.data.get(i.dataId).values,[I,P,R]=m,{batchSize:D,filterHeight:B,filterWidth:Z,inChannels:z,inHeight:q,inWidth:M,outChannels:U,outHeight:V,outWidth:ne,strideHeight:J,strideWidth:G}=p,X=B-1-p.padInfo.top,H=Z-1-p.padInfo.left,W=U/z;for(let te=0;te<D;++te)for(let ae=0;ae<z;++ae)for(let ve=0;ve<q;++ve){const Ce=ve-X,Ie=Math.max(0,Math.ceil(Ce/J)),Fe=Math.min(V,(B+Ce)/J);for(let De=0;De<M;++De){const Ke=De-H,Je=Math.max(0,Math.ceil(Ke/G)),dt=Math.min(ne,(Z+Ke)/G);let Et=0;for(let kt=Ie;kt<Fe;++kt){const Ot=kt*J-Ce;for(let St=Je;St<dt;++St){const Qr=St*G-Ke,Yt=N*te+C*kt+S*St,Tr=I*(B-1-Ot)+P*(Z-1-Qr)+R*ae;for(let Un=0;Un<W;++Un){const ps=ae*W+Un,es=E[Yt+ps],be=T[Tr+Un];Et+=es*be}}}v[x*te+b*ve+w*De+ae]=Et}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}const qDe={kernelName:R$,backendName:"cpu",kernelFunc:WDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KDe(t){const{inputs:e,backend:n}=t,{x:r}=e,s=pe(r.shape),i=n.data.get(r.dataId).values,o=bt([s,s],r.dtype),a=o.values;for(let c=0;c<i.length;c++)a[c*s+c]=i[c];const l=[...r.shape,...r.shape];return n.makeTensorInfo(l,o.dtype,o.values)}const ZDe={kernelName:kj,backendName:"cpu",kernelFunc:KDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XDe={kernelName:aw,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:s}=t,{strides:i,pad:o,dilations:a}=n,l=e,c=l.data.get(r.dataId).values,u=r.shape.length,h=l.data.get(s.dataId).values,m=s.shape.length,{batchSize:p,inHeight:y,inWidth:v,inChannels:x,outHeight:b,outWidth:w,padInfo:E,strideHeight:N,strideWidth:C,filterHeight:S,filterWidth:T,dilationHeight:I,dilationWidth:P,outShape:R}=ay(r.shape,s.shape,i,o,"NHWC",a),D=pe(R),B=R.length,Z=Jn(r.dtype,D);for(let q=0;q<p;++q)for(let M=0;M<b;++M){const U=M*N-E.top;for(let V=0;V<w;++V){const ne=V*C-E.left;for(let J=0;J<x;++J){let G=Number.MIN_SAFE_INTEGER;for(let H=0;H<S;++H){const W=U+H*I;if(W>=0&&W<y)for(let te=0;te<T;++te){const ae=ne+te*P;if(ae>=0&&ae<v){const ve=Sa([q,W,ae,J],u,qe(r.shape)),Ce=Sa([H,te,J],m,qe(s.shape)),Ie=c[ve]+h[Ce];Ie>G&&(G=Ie)}}}const X=Sa([q,M,V,J],B,qe(R));Z[X]=G}}}return{dataId:l.write(Rd(Z,r.dtype),R,r.dtype),shape:R,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YDe={kernelName:n_,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:s,dy:i}=t,{strides:o,pad:a,dilations:l}=n,c=e,u=Vo(r.shape,c.data.get(r.dataId).values),h=Vo(s.shape,c.data.get(s.dataId).values),{batchSize:m,inHeight:p,inWidth:y,inChannels:v,outHeight:x,outWidth:b,padInfo:w,strideHeight:E,strideWidth:N,filterHeight:C,filterWidth:S,dilationHeight:T,dilationWidth:I,outShape:P}=ay(r.shape,s.shape,o,a,"NHWC",l);F(i.rank===P.length,()=>`Error in ${n_}, dy must have the same rank as output ${P.length}, but got ${i.rank}`);const R=Vo(P,c.data.get(i.dataId).values),D=vj(s.shape,s.dtype);for(let Z=0;Z<m;++Z)for(let z=0;z<x;++z){const q=z*E-w.top;for(let M=0;M<b;++M){const U=M*N-w.left;for(let V=0;V<v;++V){let ne=Number.MIN_SAFE_INTEGER,J=0,G=0;for(let X=0;X<C;++X){const H=q+X*T;if(H>=0&&H<p)for(let W=0;W<S;++W){const te=U+W*I;if(te>=0&&te<y){const ae=u[Z][H][te][V]+h[X][W][V];ae>ne&&(ne=ae,J=X,G=W)}}}D[J][G][V]+=R[Z][z][M][V]}}}return{dataId:c.write(Rd(D,r.dtype),s.shape,s.dtype),shape:s.shape,dtype:s.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JDe={kernelName:t_,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:s,dy:i}=t,{strides:o,pad:a,dilations:l}=n,c=e,u=Vo(r.shape,c.data.get(r.dataId).values),h=Vo(s.shape,c.data.get(s.dataId).values),{batchSize:m,inHeight:p,inWidth:y,inChannels:v,outHeight:x,outWidth:b,padInfo:w,strideHeight:E,strideWidth:N,filterHeight:C,filterWidth:S,dilationHeight:T,dilationWidth:I,outShape:P}=ay(r.shape,s.shape,o,a,"NHWC",l);F(i.rank===P.length,()=>`Error in ${t_}, dy must have the same rank as output ${P.length}, but got ${i.rank}`);const R=Vo(P,c.data.get(i.dataId).values),D=vj(r.shape,r.dtype);for(let Z=0;Z<m;++Z)for(let z=0;z<x;++z){const q=z*E-w.top;for(let M=0;M<b;++M){const U=M*N-w.left;for(let V=0;V<v;++V){let ne=Number.MIN_SAFE_INTEGER,J=q<0?0:q,G=U<0?0:U;for(let X=0;X<C;++X){const H=q+X*T;if(H>=0&&H<p)for(let W=0;W<S;++W){const te=U+W*I;if(te>=0&&te<y){const ae=u[Z][H][te][V]+h[X][W][V];ae>ne&&(ne=ae,J=H,G=te)}}}D[Z][J][G][V]+=R[Z][z][M][V]}}}return{dataId:c.write(Rd(D,r.dtype),r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QDe(t){const{inputs:e,backend:n,attrs:r}=t,{image:s}=e,{canvas:i,options:o}=r,{contextOptions:a,imageOptions:l}=o||{},c=(l==null?void 0:l.alpha)||1,u=(a==null?void 0:a.contextType)||"2d";if(u!=="2d")throw new Error(`Context type ${a.contextType} is not supported by the CPU backend.`);const h=i.getContext(u,(a==null?void 0:a.contextAttributes)||{});if(h==null)throw new Error(`Could not get the context with ${u} type.`);const[m,p]=s.shape.slice(0,2),y=s.shape.length===2?1:s.shape[2],v=n.data.get(s.dataId).values,x=s.dtype==="float32"?255:1,b=new Uint8ClampedArray(p*m*4);for(let E=0;E<m*p;++E){const N=[0,0,0,255*c];for(let S=0;S<y;S++){const T=v[E*y+S];if(s.dtype==="float32"){if(T<0||T>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${T}.`)}else if(s.dtype==="int32"&&(T<0||T>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${T}.`);y===1?(N[0]=T*x,N[1]=T*x,N[2]=T*x):N[S]=T*x}const C=E*4;b[C+0]=Math.round(N[0]),b[C+1]=Math.round(N[1]),b[C+2]=Math.round(N[2]),b[C+3]=Math.round(N[3])}i.width=p,i.height=m;const w=new ImageData(b,p,m);return h.putImageData(w,0,0),s}const e4e={kernelName:DEe,backendName:"cpu",kernelFunc:QDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ky(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:o}=r;He(s,"sum");let a;s.dtype==="bool"?a=qc({inputs:{x:s},backend:n,attrs:{dtype:"int32"}}):a=Fa({inputs:{x:s},backend:n});const l=a.shape.length,c=xt(i,a.shape),u=jn(c,l);let h=c,m=a;u!=null&&(m=Gs({inputs:{x:a},backend:n,attrs:{perm:u}}),h=tr(h.length,l)),Yr("sum",h,m.shape.length);const[p,y]=Mr(m.shape,h),v=ci(m.dtype,"int32");let x=X1(n,p,v);const b=pe(y),w=n.data.get(x.dataId).values,E=n.data.get(m.dataId).values;for(let N=0;N<w.length;++N){const C=N*b;let S=0;for(let T=0;T<b;++T)S+=E[C+T];w[N]=S}if(o){const N=ur(x.shape,c),C=x;x=xn({inputs:{x},backend:n,attrs:{shape:N}}),n.disposeIntermediateTensorInfo(C)}return n.disposeIntermediateTensorInfo(a),u!=null&&n.disposeIntermediateTensorInfo(m),x}const t4e={kernelName:Bw,backendName:"cpu",kernelFunc:ky};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n4e(t){const{inputs:e,backend:n,attrs:r}=t,{equation:s}=r,i=e,{allDims:o,summedDims:a,idDims:l}=o3(s,i.length);l3(o.length,l,i);const{path:c,steps:u}=c3(a,l),h=u.length;let m=null,p=o.length;const y=[];for(let v=0;v<h;++v){for(const x of u[v]){const{permutationIndices:b,expandDims:w}=a3(p,l[x]);let E;u3(b)?E=i[x]:(E=Gs({inputs:{x:i[x]},backend:n,attrs:{perm:b}}),y.push(E));const N=E.shape.slice();for(let C=0;C<w.length;++C)N.splice(w[C],0,1);Zt(E.shape,N)||(E=xn({inputs:{x:E},backend:n,attrs:{shape:N}}),y.push(E)),m===null?m=E:(m=y2({inputs:{a:E,b:m},backend:n}),y.push(m))}v<h-1&&(c[v]>=0&&(m=ky({inputs:{x:m},backend:n,attrs:{axis:c[v]-(o.length-p),keepDims:!1}}),y.push(m)),p--)}for(const v of y)v!==m&&n.disposeIntermediateTensorInfo(v);return m}const r4e={kernelName:P$,backendName:"cpu",kernelFunc:n4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s4e(t){const{inputs:e,backend:n}=t,{dy:r,y:s}=e;He([r,s],"eluGrad");const i=new Float32Array(pe(s.shape)),o=n.data.get(s.dataId).values,a=n.data.get(r.dataId).values;for(let l=0;l<o.length;++l){const c=o[l];c>=0?i[l]=a[l]:i[l]=a[l]*(c+1)}return n.makeTensorInfo(s.shape,"float32",i)}const i4e={kernelName:D$,backendName:"cpu",kernelFunc:s4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const o4e=QI,a4e=e3,l4e=t3,c4e=n3,u4e=r3,d4e=s3,h4e=sn(_0,t=>{const e=Math.sign(t),n=Math.abs(t),r=1/(1+o4e*n);return e*(1-((((d4e*r+u4e)*r+c4e)*r+l4e)*r+a4e)*r*Math.exp(-n*n))}),f4e={kernelName:_0,backendName:"cpu",kernelFunc:h4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q1(t){const{inputs:e,backend:n,attrs:r}=t,{input:s}=e,{dim:i}=r,o=s.shape.length,a=s.shape.slice();let l=i;return i<0&&(F(-(o+1)<=i,()=>`Axis must be in the interval [${-(o+1)}, ${o}]`),l=o+i+1),a.splice(l,0,1),xn({inputs:{x:s},backend:n,attrs:{shape:a}})}const m4e={kernelName:cw,backendName:"cpu",kernelFunc:Q1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p4e=rr((t,e)=>t/e),U3=Sr(N0,p4e),I_={kernelName:N0,backendName:"cpu",kernelFunc:U3};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rW(t,e,n){const r=t.shape,s=r[0],i=r[1],o=n.data.get(t.dataId),a=o.complexTensorInfos.real,l=o.complexTensorInfos.imag,c=[s,i],u=pe(c),h=ls("float32",u),m=ls("float32",u);for(let x=0;x<s;x++){const b=vd({inputs:{x:a},backend:n,attrs:{begin:[x,0],size:[1,i]}}),w=vd({inputs:{x:l},backend:n,attrs:{begin:[x,0],size:[1,i]}}),E=ti({inputs:{real:b,imag:w},backend:n}),{real:N,imag:C}=g4e(E,e,n),S=Pl(N,C);for(let T=0;T<i;T++){const I=i3(S,T);h[x*i+T]=I.real,m[x*i+T]=I.imag}n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(w),n.disposeIntermediateTensorInfo(E)}const p=n.makeTensorInfo(c,"float32",h),y=n.makeTensorInfo(c,"float32",m),v=ti({inputs:{real:p,imag:y},backend:n});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(y),v}function g4e(t,e,n){const r=pe(t.shape),s=n.data.get(t.dataId),i=n.data.get(s.complexTensorInfos.real.dataId).values,o=n.data.get(s.complexTensorInfos.imag.dataId).values;if(y4e(r)){const a=A_(i,o,r,e,n),l=[t.shape[0],t.shape[1]];if(e){const c=n.makeTensorInfo(l,"float32",a.real),u=n.makeTensorInfo(l,"float32",a.imag),h=n.makeTensorInfo([],"float32",Qc(r,"float32")),m=Fa({inputs:{x:h},backend:n}),p=I_.kernelFunc({inputs:{a:c,b:h},backend:n}),y=I_.kernelFunc({inputs:{a:u,b:m},backend:n}),v=n.data.get(p.dataId).values,x=n.data.get(y.dataId).values;return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(y),{real:v,imag:x}}return a}else{const a=Pl(i,o),l=b4e(a,r,e);return yU(l)}}function y4e(t){return(t&t-1)===0}function A_(t,e,n,r,s){if(n===1)return{real:t,imag:e};const i=Pl(t,e),o=n/2,a=bU(i),l=a.real,c=a.imag,u=[l.length],h=s.makeTensorInfo(u,"float32",l),m=s.makeTensorInfo(u,"float32",c),p=ti({inputs:{real:h,imag:m},backend:s}),y=vU(i),v=y.real,x=y.imag,b=[v.length],w=s.makeTensorInfo(b,"float32",v),E=s.makeTensorInfo(b,"float32",x),N=ti({inputs:{real:w,imag:E},backend:s}),C=A_(l,c,o,r,s),S=C.real,T=C.imag,I=[S.length],P=s.makeTensorInfo(I,"float32",S),R=s.makeTensorInfo(I,"float32",T),D=ti({inputs:{real:P,imag:R},backend:s}),B=A_(v,x,o,r,s),Z=B.real,z=B.imag,q=[Z.length],M=s.makeTensorInfo(q,"float32",Z),U=s.makeTensorInfo(q,"float32",z),V=ti({inputs:{real:M,imag:U},backend:s}),ne=wU(n,r),J=[ne.real.length],G=s.makeTensorInfo(J,"float32",ne.real),X=s.makeTensorInfo(J,"float32",ne.imag),H=ti({inputs:{real:G,imag:X},backend:s}),W=y2({inputs:{a:H,b:V},backend:s}),te=If({inputs:{a:D,b:W},backend:s}),ae=V3({inputs:{a:D,b:W},backend:s}),ve=bd({inputs:{input:te},backend:s}),Ce=bd({inputs:{input:ae},backend:s}),Ie=Af({inputs:{input:te},backend:s}),Fe=Af({inputs:{input:ae},backend:s}),De=Rf({inputs:[ve,Ce],backend:s,attrs:{axis:0}}),Ke=Rf({inputs:[Ie,Fe],backend:s,attrs:{axis:0}}),Je=s.data.get(De.dataId).values,dt=s.data.get(Ke.dataId).values;return s.disposeIntermediateTensorInfo(h),s.disposeIntermediateTensorInfo(m),s.disposeIntermediateTensorInfo(p),s.disposeIntermediateTensorInfo(w),s.disposeIntermediateTensorInfo(E),s.disposeIntermediateTensorInfo(N),s.disposeIntermediateTensorInfo(P),s.disposeIntermediateTensorInfo(R),s.disposeIntermediateTensorInfo(D),s.disposeIntermediateTensorInfo(M),s.disposeIntermediateTensorInfo(U),s.disposeIntermediateTensorInfo(V),s.disposeIntermediateTensorInfo(G),s.disposeIntermediateTensorInfo(X),s.disposeIntermediateTensorInfo(H),s.disposeIntermediateTensorInfo(W),s.disposeIntermediateTensorInfo(te),s.disposeIntermediateTensorInfo(ae),s.disposeIntermediateTensorInfo(ve),s.disposeIntermediateTensorInfo(Ie),s.disposeIntermediateTensorInfo(Ce),s.disposeIntermediateTensorInfo(Fe),s.disposeIntermediateTensorInfo(De),s.disposeIntermediateTensorInfo(Ke),{real:Je,imag:dt}}function b4e(t,e,n){const r=new Float32Array(e*2);for(let s=0;s<e;s++){let i=0,o=0;for(let a=0;a<e;a++){const l=EU(s*a,e,n),c=i3(t,a);i+=c.real*l.real-c.imag*l.imag,o+=c.real*l.imag+c.imag*l.real}n&&(i/=e,o/=e),xU(r,i,o,s)}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v4e(t){const{inputs:e,backend:n}=t,{input:r}=e,s=pe(r.shape),i=r.shape[r.shape.length-1],o=s/i,a=xn({inputs:{x:r},backend:n,attrs:{shape:[o,i]}}),l=rW(a,!1,n),c=xn({inputs:{x:l},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),c}const x4e={kernelName:O$,backendName:"cpu",kernelFunc:v4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H3(t){const{backend:e,attrs:n}=t,{shape:r,value:s,dtype:i}=n,o=i||Qf(s),a=Jn(o,pe(r));return E4e(a,s,o),e.makeTensorInfo(r,o,a)}const w4e={kernelName:L$,backendName:"cpu",kernelFunc:H3};function E4e(t,e,n){t.fill(e)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const k4e={kernelName:M$,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,s=n,i=ls(r.dtype,pe(r.shape)),[o,a,l,c]=r.shape,u=s.data.get(r.dataId).values;for(let m=0;m<o;m++){const p=m*l*a*c;for(let y=0;y<a;y++){const v=y*(l*c);for(let x=0;x<l;x++){const b=x*c;for(let w=0;w<c;w++){const E=Math.round(l-x-1),N=p+v+b+w;let C=u[N];if(E>=0&&E<l){const S=E*c,T=p+v+S+w;C=u[T]}i[N]=C}}}}return{dataId:s.write(i,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N4e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i,bias:o,preluActivationWeights:a}=e,{strides:l,pad:c,dataFormat:u,dilations:h,dimRoundingMode:m,activation:p,leakyreluAlpha:y}=r;let v=tW({inputs:{x:s,filter:i},backend:n,attrs:{strides:l,pad:c,dataFormat:u,dilations:h,dimRoundingMode:m}});if(o){const x=v;if(u==="NCHW"&&o.shape.length===1&&o.shape[0]!==1){const b=xn({inputs:{x:o},backend:n,attrs:{shape:[o.shape[0],1,1]}});v=If({inputs:{a:v,b},backend:n}),n.disposeIntermediateTensorInfo(b)}else v=If({inputs:{a:v,b:o},backend:n});n.disposeIntermediateTensorInfo(x)}if(p){const x=v;if(u==="NCHW"&&p==="prelu"&&a.shape.length===1&&a.shape[0]!==1){const b=xn({inputs:{x:a},backend:n,attrs:{shape:[a.shape[0],1,1]}});v=J1(n,v,p,b,y),n.disposeIntermediateTensorInfo(b)}else v=J1(n,v,p,a,y);n.disposeIntermediateTensorInfo(x)}return v}const C4e={kernelName:R1,backendName:"cpu",kernelFunc:N4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _4e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i,bias:o,preluActivationWeights:a}=e,{strides:l,pad:c,dataFormat:u,dilations:h,dimRoundingMode:m,activation:p,leakyreluAlpha:y}=r;let v=nW({inputs:{x:s,filter:i},backend:n,attrs:{strides:l,pad:c,dataFormat:u,dilations:h,dimRoundingMode:m}});if(o){const x=v;v=If({inputs:{a:v,b:o},backend:n}),n.disposeIntermediateTensorInfo(x)}if(p){const x=v;v=J1(n,v,p,a,y),n.disposeIntermediateTensorInfo(x)}return v}const S4e={kernelName:jj,backendName:"cpu",kernelFunc:_4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T4e(t){const{inputs:e,backend:n}=t,{params:r,indices:s}=e,i=pe(r.shape),o=s.shape,a=o[o.length-1],[l,c,u,h]=jI(r,s);if(c===0)return n.makeTensorInfo(l,r.dtype,[]);const m=n.data.get(s.dataId).values,p=n.bufferSync(r),y=f9(m,p,r.dtype,c,a,u,h,r.shape,i);return n.makeTensorInfo(l,r.dtype,y.values)}const $4e={kernelName:Nj,backendName:"cpu",kernelFunc:T4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I4e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,indices:i}=e,{axis:o,batchDims:a}=r;He([s,i],"gatherV2");const l=xt(o,s.shape)[0],c=n.data.get(i.dataId).values,u=s.shape[l];for(let N=0;N<c.length;++N){const C=c[N];F(C<=u-1&&C>=0,()=>`GatherV2: the index value ${C} is not in [0, ${u-1}]`)}let h=a;a==null&&(h=0);const m=pe(i.shape),p=h3(s,i,l,h),y=xn({inputs:{x:s},backend:n,attrs:{shape:[p.batchSize,p.outerSize,p.dimSize,p.sliceSize]}}),v=xn({inputs:{x:i},backend:n,attrs:{shape:[p.batchSize,m/p.batchSize]}}),x=[p.batchSize,p.outerSize,m/p.batchSize,p.sliceSize],b=n.bufferSync(v),w=n.bufferSync(y),E=m9(w,b,x);return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(v),n.makeTensorInfo(p.outputShape,E.dtype,E.values)}const A4e={kernelName:dw,backendName:"cpu",kernelFunc:I4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R4e(t){const{inputs:e,backend:n}=t,{input:r}=e,s=pe(r.shape),i=r.shape[r.shape.length-1],o=s/i,a=xn({inputs:{x:r},backend:n,attrs:{shape:[o,i]}}),l=rW(a,!0,n),c=xn({inputs:{x:l},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),c}const P4e={kernelName:z$,backendName:"cpu",kernelFunc:R4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const D4e=sn(P0,t=>Number.isFinite(t)?1:0,"bool"),O4e={kernelName:P0,backendName:"cpu",kernelFunc:D4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const L4e=sn(D0,t=>Math.abs(t)===1/0?1:0,"bool"),M4e={kernelName:D0,backendName:"cpu",kernelFunc:L4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const z4e=sn(O0,t=>Number.isNaN(t)?1:0,"bool"),F4e={kernelName:O0,backendName:"cpu",kernelFunc:z4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B4e(t){const{backend:e,attrs:n}=t,{start:r,stop:s,num:i}=n,o=v9(r,s,i);return e.makeTensorInfo([o.length],"float32",o)}const V4e={kernelName:Cj,backendName:"cpu",kernelFunc:B4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j4e=sn(M0,t=>Math.log1p(t)),U4e={kernelName:M0,backendName:"cpu",kernelFunc:j4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H4e=rr((t,e)=>t&&e),G4e=Sr(gw,H4e,null,"bool"),W4e={kernelName:gw,backendName:"cpu",kernelFunc:G4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const q4e=sn(yw,t=>t?0:1,"bool"),K4e={kernelName:yw,backendName:"cpu",kernelFunc:q4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z4e=rr((t,e)=>t||e),X4e=Sr(bw,Z4e,null,"bool"),Y4e={kernelName:bw,backendName:"cpu",kernelFunc:X4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J4e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{depthRadius:i,bias:o,alpha:a,beta:l}=r;He(s,"LRN");const c=s.shape[3],u=c-1,h=n.data.get(s.dataId).values,m=pe(s.shape),p=new Float32Array(m);function y(v){const x=v%c;let b=v-x+Math.max(0,x-i);const w=v-x+Math.min(x+i,u);let E=0;for(;b<=w;b++){const N=h[b];E+=N*N}return E}for(let v=0;v<m;v++){const x=y(v),b=h[v]*Math.pow(o+a*x,-l);p[v]=b}return n.makeTensorInfo(s.shape,s.dtype,p)}const Q4e={kernelName:vw,backendName:"cpu",kernelFunc:J4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eOe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,y:i,dy:o}=e,{depthRadius:a,bias:l,alpha:c,beta:u}=r;He(o,"LRNGrad");const h=pe(o.shape),m=o.shape[3],p=n.data.get(o.dataId).values,y=n.data.get(s.dataId).values,v=n.data.get(i.dataId).values,x=new Float32Array(h),b=h;for(let w=0;w<b;w++){const E=w%m,N=w-E+Math.max(0,E-a),C=w-E+Math.min(m,E+a+1);let S=0;for(let T=N;T<C;T++)S+=Math.pow(y[T],2);S=c*S+l;for(let T=N;T<C;T++){let I=-2*c*u*y[T]*v[w]/S;w===T&&(I+=Math.pow(S,-u)),I*=p[w],x[T]+=I}}return n.makeTensorInfo(o.shape,s.dtype,x)}const tOe={kernelName:B$,backendName:"cpu",kernelFunc:eOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sW(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{reductionIndices:i,keepDims:o}=r,a=n;let l=s.shape;const c=l.length,u=xt(i,l);let h=u;const m=jn(h,c);let p=a.data.get(s.dataId).values;if(m!=null){const N=new Array(c);for(let C=0;C<N.length;C++)N[C]=l[m[C]];p=F3(p,l,s.dtype,m,N),h=tr(h.length,c),l=N}He(s,"max"),Yr("max",h,c);const[y,v]=Mr(l,h),x=pe(v),b=w9(p,x,y,s.dtype),w=a.write(b,y,s.dtype);let E=y;return o&&(E=ur(y,u)),{dataId:w,shape:E,dtype:s.dtype}}const nOe={kernelName:xw,backendName:"cpu",kernelFunc:sW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rOe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e;He(s,"maxPool");const{filterSize:i,strides:o,pad:a,dimRoundingMode:l}=r,c=1;F(hs(o,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${c}'`);const u=xo(s.shape,i,o,c,a,l);let h;if(u.filterWidth===1&&u.filterHeight===1&&Zt(u.inShape,u.outShape))h=Fa({inputs:{x:s},backend:n});else{const m=n.data.get(s.dataId).values,p=qe(s.shape),y=j3(m,s.shape,s.dtype,p,u,"max");h=n.makeTensorInfo(u.outShape,s.dtype,y.values)}return h}const sOe={kernelName:ww,backendName:"cpu",kernelFunc:rOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iOe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{filterSize:i,strides:o,pad:a,dimRoundingMode:l,dataFormat:c}=r;He(s,"maxPool3d");const u=Vl(s.shape,i,o,1,a,l,c),h=n.data.get(s.dataId).values,m=eW(h,s.shape,s.dtype,qe(s.shape),u,"max");return n.makeTensorInfo(m.shape,"float32",m.values)}const oOe={kernelName:Ew,backendName:"cpu",kernelFunc:iOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aOe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i}=e,{filterSize:o,strides:a,pad:l,dimRoundingMode:c}=r;He([s,i],"maxPool3DGrad");const u=Vl(i.shape,o,a,1,l,c),h=n.bufferSync(i),m=ZPe(h,u),p=u.strideDepth,y=u.strideHeight,v=u.strideWidth,x=u.dilationDepth,b=u.dilationHeight,w=u.dilationWidth,E=u.effectiveFilterDepth,N=u.effectiveFilterHeight,C=u.effectiveFilterWidth,S=E-1-u.padInfo.front,T=C-1-u.padInfo.left,I=N-1-u.padInfo.top,P=bt(i.shape,"float32"),R=n.bufferSync(s);for(let D=0;D<u.batchSize;++D)for(let B=0;B<u.inChannels;++B)for(let Z=0;Z<u.inDepth;++Z)for(let z=0;z<u.inHeight;++z)for(let q=0;q<u.inWidth;++q){const M=Z-S,U=z-I,V=q-T;let ne=0;for(let J=0;J<E;J+=x){const G=(M+J)/p;if(!(G<0||G>=u.outDepth||Math.floor(G)!==G))for(let X=0;X<N;X+=b){const H=(U+X)/y;if(!(H<0||H>=u.outHeight||Math.floor(H)!==H))for(let W=0;W<C;W+=w){const te=(V+W)/v;if(te<0||te>=u.outWidth||Math.floor(te)!==te)continue;const ae=E*N*C-1-m.get(D,G,H,te,B),ve=J*N*C+X*C+W,Ce=ae===ve?1:0;if(Ce===0)continue;const Ie=R.get(D,G,H,te,B);ne+=Ie*Ce}}}P.set(ne,D,Z,z,q,B)}return n.makeTensorInfo(P.shape,P.dtype,P.values)}const lOe={kernelName:j$,backendName:"cpu",kernelFunc:aOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cOe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i,output:o}=e,a=i;He([i,o],"maxPoolGrad");const{filterSize:l,strides:c,pad:u,dimRoundingMode:h}=r,m=xo(a.shape,l,c,1,u,h),p=n.data.get(a.dataId).values,y=bt(m.outShape,a.dtype,Q9(p,a.shape,a.dtype,m).values),v=m.strideHeight,x=m.strideWidth,b=m.dilationHeight,w=m.dilationWidth,E=m.effectiveFilterHeight,N=m.effectiveFilterWidth,C=N-1-m.padInfo.left,S=E-1-m.padInfo.top,T=bt(a.shape,"float32"),I=n.data.get(s.dataId).values,P=bt(s.shape,"float32",I);for(let R=0;R<m.batchSize;++R)for(let D=0;D<m.inChannels;++D)for(let B=0;B<m.inHeight;++B)for(let Z=0;Z<m.inWidth;++Z){const z=B-S,q=Z-C;let M=0;for(let U=0;U<E;U+=b){const V=(z+U)/v;if(!(V<0||V>=m.outHeight||Math.floor(V)!==V))for(let ne=0;ne<N;ne+=w){const J=(q+ne)/x;if(J<0||J>=m.outWidth||Math.floor(J)!==J)continue;const G=E*N-1-y.get(R,V,J,D),X=U*N+ne,H=G===X?1:0;if(H===0)continue;const W=P.get(R,V,J,D);M+=W*H}}T.set(M,R,B,Z,D)}return n.makeTensorInfo(T.shape,T.dtype,T.values)}const uOe={kernelName:V$,backendName:"cpu",kernelFunc:cOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dOe(t,e,n,r,s){const i=qe(e),o=j3(t,e,n,i,s,"max"),a=Q9(t,e,n,s,!0,r);return[o.values,a.values]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hOe={kernelName:_j,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:s,strides:i,pad:o,includeBatchInIndex:a}=e,l=n;He(r,"MaxPoolWithArgmax");const c=l.data.get(r.dataId).values,u=xo(r.shape,s,i,[1,1],o),[h,m]=dOe(c,r.shape,r.dtype,a,u),p=l.write(h,u.outShape,r.dtype),y=l.write(m,u.outShape,r.dtype);return[{dataId:p,shape:u.outShape,dtype:r.dtype},{dataId:y,shape:u.outShape,dtype:"int32"}]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fOe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:o}=r,a=xt(i,s.shape),c=Mr(s.shape,a)[1],u=pe(c),h=[],m=n.makeTensorInfo([],"float32",new Float32Array([u]));h.push(m);const p=qc({inputs:{x:s},backend:n,attrs:{dtype:"float32"}});h.push(p);const y=U3({inputs:{a:p,b:m},backend:n});h.push(y);const v=ky({inputs:{x:y},backend:n,attrs:{axis:i,keepDims:o}});return h.forEach(x=>n.disposeIntermediateTensorInfo(x)),v}const mOe={kernelName:kw,backendName:"cpu",kernelFunc:fOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pOe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:o}=r;He(s,"min");const a=xt(i,s.shape);let l=a;const c=jn(l,s.shape.length);let u=s;c!=null&&(u=Gs({inputs:{x:s},backend:n,attrs:{perm:c}}),l=tr(l.length,s.shape.length)),Yr("min",l,u.shape.length);const[h,m]=Mr(u.shape,l),p=pe(m),y=cs(pe(h),u.dtype),v=n.data.get(u.dataId).values;for(let b=0;b<y.length;++b){const w=b*p;let E=v[w];for(let N=0;N<p;++N){const C=v[w+N];(Number.isNaN(C)||C<E)&&(E=C)}y[b]=E}c!=null&&n.disposeIntermediateTensorInfo(u);const x=n.makeTensorInfo(h,u.dtype,y);if(o){const b=ur(h,a),w=xn({inputs:{x},backend:n,attrs:{shape:b}});return n.disposeIntermediateTensorInfo(x),w}return x}const gOe={kernelName:Nw,backendName:"cpu",kernelFunc:pOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yOe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{paddings:i,mode:o}=r;He(s,"mirrorPad");const a=i.map((E,N)=>E[0]+s.shape[N]+E[1]),l=i.map(E=>E[0]),c=i.map((E,N)=>E[0]+s.shape[N]),u=o==="reflect"?0:1,h=n.data.get(s.dataId).values,m=s.shape.length,p=qe(s.shape),y=pe(a),v=a.length,x=qe(a),b=ls(s.dtype,y);for(let E=0;E<y;E++){let N=em(E,v,x);for(let S=0;S<v;S++)N[S]<l[S]?N[S]=l[S]*2-N[S]-u:N[S]>=c[S]&&(N[S]=(c[S]-1)*2-N[S]+u);N=N.map((S,T)=>S-l[T]);const C=Sa(N,m,p);b[E]=h[C]}return{dataId:n.write(b,a,s.dtype),shape:a,dtype:s.dtype}}const bOe={kernelName:Cw,backendName:"cpu",kernelFunc:yOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vOe=rr((t,e)=>{const n=t%e;return t<0&&e<0||t>=0&&e>=0?n:(n+e)%e}),xOe=Sr(B0,vOe),wOe={kernelName:B0,backendName:"cpu",kernelFunc:xOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iW(t){const{inputs:e,backend:n,attrs:r}=t,{logits:s}=e,{dim:i}=r,o=s.shape.length;let a=i;if(a===-1&&(a=o-1),a!==o-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${o} and dim was ${a}`);const l=xt([a],s.shape),c=sW({inputs:{x:s},backend:n,attrs:{reductionIndices:l,keepDims:!1}}),u=ur(c.shape,l),h=xn({inputs:{x:c},backend:n,attrs:{shape:u}}),m=V3({inputs:{a:s,b:h},backend:n}),p=c9({inputs:{x:m},backend:n}),y=ky({inputs:{x:p},backend:n,attrs:{axis:l,keepDims:!1}}),v=xn({inputs:{x:y},backend:n,attrs:{shape:u}}),x=U3({inputs:{a:p,b:v},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(v),x}const EOe={kernelName:Uw,backendName:"cpu",kernelFunc:iW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kOe(t){const{inputs:e,backend:n,attrs:r}=t,{logits:s}=e,{numSamples:i,seed:o,normalized:a}=r;He(s,"multinomial");const l=a?s:iW({inputs:{logits:s},backend:n,attrs:{dim:-1}}),c=l.shape[0],u=l.shape[1],h=n.data.get(l.dataId).values,m=[c,i],p=cs(pe(m),"int32");for(let y=0;y<c;++y){const v=y*u,x=new Float32Array(u-1);x[0]=h[v];for(let E=1;E<x.length;++E)x[E]=x[E-1]+h[v+E];const b=TI.alea(o.toString()),w=y*i;for(let E=0;E<i;++E){const N=b();p[w+E]=x.length;for(let C=0;C<x.length;C++)if(N<x[C]){p[w+E]=C;break}}}return a||n.disposeIntermediateTensorInfo(l),n.makeTensorInfo(m,"int32",p)}const NOe={kernelName:Sj,backendName:"cpu",kernelFunc:kOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const COe=MI;function _Oe(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:i}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l}=r;He(s,"NonMaxSuppression");const c=n.data.get(s.dataId).values,u=n.data.get(i.dataId).values,{selectedIndices:h}=COe(c,u,o,a,l);return n.makeTensorInfo([h.length],"int32",new Int32Array(h))}const SOe={kernelName:U$,backendName:"cpu",kernelFunc:_Oe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TOe=zI;function $Oe(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:i}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l,padToMaxOutputSize:c}=r;He(s,"NonMaxSuppressionPadded");const u=n.data.get(s.dataId).values,h=n.data.get(i.dataId).values,{selectedIndices:m,validOutputs:p}=TOe(u,h,o,a,l,c);return[n.makeTensorInfo([m.length],"int32",new Int32Array(m)),n.makeTensorInfo([],"int32",new Int32Array([p]))]}const IOe={kernelName:H$,backendName:"cpu",kernelFunc:$Oe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AOe=FI;function ROe(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:i}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l,softNmsSigma:c}=r;He(s,"NonMaxSuppressionWithScore");const u=n.data.get(s.dataId).values,h=n.data.get(i.dataId).values,m=o,p=a,y=l,v=c,{selectedIndices:x,selectedScores:b}=AOe(u,h,m,p,y,v);return[n.makeTensorInfo([x.length],"int32",new Int32Array(x)),n.makeTensorInfo([b.length],"float32",new Float32Array(b))]}const POe={kernelName:G$,backendName:"cpu",kernelFunc:ROe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DOe(t){const{inputs:e,backend:n,attrs:r}=t,{indices:s}=e,{dtype:i,depth:o,onValue:a,offValue:l}=r;He(s,"oneHot");const c=pe(s.shape),u=new Float32Array(c*o);u.fill(l);const h=n.data.get(s.dataId).values;for(let m=0;m<c;++m)h[m]>=0&&h[m]<o&&(u[m*o+h[m]]=a);return n.makeTensorInfo([...s.shape,o],i,u)}const OOe={kernelName:$w,backendName:"cpu",kernelFunc:DOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ex(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("zerosLike is not supported for string tensors");if(r.dtype==="complex64"){const s=bd({inputs:{input:r},backend:n}),i=ex({inputs:{x:s},backend:n}),o=Af({inputs:{input:r},backend:n}),a=ex({inputs:{x:o},backend:n}),l=ti({inputs:{real:i,imag:a},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(a),l}else return H3({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}const LOe={kernelName:Ww,backendName:"cpu",kernelFunc:ex};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oW(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported for string tensors");if(r.dtype==="complex64"){const s=bd({inputs:{input:r},backend:n}),i=oW({inputs:{x:s},backend:n}),o=Af({inputs:{input:r},backend:n}),a=ex({inputs:{x:o},backend:n}),l=ti({inputs:{real:i,imag:a},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(a),l}else return H3({backend:n,attrs:{shape:r.shape,value:1,dtype:r.dtype}})}const MOe={kernelName:Tw,backendName:"cpu",kernelFunc:oW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aW(t){const{inputs:e,backend:n,attrs:r}=t,{axis:s}=r;if(e.length===1)return Q1({inputs:{input:e[0]},backend:n,attrs:{dim:s}});const i=e[0].shape,o=e[0].dtype;e.forEach(u=>{h$(i,u.shape,"All tensors passed to stack must have matching shapes"),F(o===u.dtype,()=>"All tensors passed to stack must have matching dtypes")});const a=[],l=e.map(u=>{const h=Q1({inputs:{input:u},backend:n,attrs:{dim:s}});return a.push(h),h}),c=Rf({inputs:l,backend:n,attrs:{axis:s}});return a.forEach(u=>n.disposeIntermediateTensorInfo(u)),c}const zOe={kernelName:Iw,backendName:"cpu",kernelFunc:aW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FOe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{paddings:i,constantValue:o}=r;He(s,"pad");const a=i.map((w,E)=>w[0]+s.shape[E]+w[1]),l=i.map(w=>w[0]),c=n.data.get(s.dataId).values,u=pe(s.shape),h=s.shape.length,m=qe(s.shape),p=pe(a),y=a.length,v=qe(a),x=ls(s.dtype,p);o!==0&&x.fill(o);for(let w=0;w<u;w++){const N=em(w,h,m).map((S,T)=>S+l[T]),C=Sa(N,y,v);x[C]=c[w]}return{dataId:n.write(x,a,s.dtype),shape:a,dtype:s.dtype}}const lW={kernelName:Aw,backendName:"cpu",kernelFunc:FOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BOe=rr((t,e)=>Math.pow(t,e)),VOe=Sr(j0,BOe),jOe={kernelName:j0,backendName:"cpu",kernelFunc:VOe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UOe(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:s,paramsDenseValues:i,indices:o}=e,a=s.map(x=>n.data.get(x.dataId).values),l=s.map(x=>x.shape),c=n.data.get(i.dataId).values,u=n.data.get(o.dataId).values,[h,m,p]=S9(a,l,c,i.shape,i.dtype,u,o.shape),y=h.map(x=>n.makeTensorInfo([x.length],"int32",x)),v=n.makeTensorInfo(p,i.dtype,m);return y.concat([v])}const HOe={kernelName:Tj,backendName:"cpu",kernelFunc:UOe};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GOe(t){const{inputs:e,backend:n}=t,{starts:r,limits:s,deltas:i}=e,o=n.data.get(r.dataId).values,a=n.data.get(s.dataId).values,l=n.data.get(i.dataId).values,[c,u]=T9(o,r.shape,r.dtype,a,s.shape,l,i.shape),h=n.makeTensorInfo([c.length],"int32",c),m=n.makeTensorInfo([u.length],r.dtype,u);return[h,m]}const WOe={kernelName:$j,backendName:"cpu",kernelFunc:GOe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qOe(t){const{inputs:e,backend:n,attrs:r}=t,{shape:s,values:i,defaultValue:o,rowPartitionTensors:a}=e,{rowPartitionTypes:l}=r,c=n.data.get(s.dataId).values,u=n.data.get(i.dataId).values,h=n.data.get(o.dataId).values,m=a.map(x=>n.data.get(x.dataId).values),p=a.map(x=>x.shape),[y,v]=$9(c,s.shape,u,i.shape,i.dtype,h,o.shape,m,p,l);return n.makeTensorInfo(y,i.dtype,v)}const KOe={kernelName:Ij,backendName:"cpu",kernelFunc:qOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZOe(t){const{backend:e,attrs:n}=t,{start:r,stop:s,dtype:i,step:o}=n,a=I9(r,s,o,i);return e.makeTensorInfo([a.length],i,a)}const XOe={kernelName:W$,backendName:"cpu",kernelFunc:ZOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YOe=sn(U0,t=>1/t),JOe={kernelName:U0,backendName:"cpu",kernelFunc:YOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QOe(t){const{inputs:e,backend:n,attrs:r}=t,{images:s}=e,{alignCorners:i,halfPixelCenters:o,size:a}=r;He(s,"resizeBilinear");const l=qe(s.shape),[c,u]=a,[h,m,p,y]=s.shape,v=n.data.get(s.dataId).values,x=new Float32Array(pe([h,c,u,y])),b=[i&&c>1?m-1:m,i&&u>1?p-1:p],w=[i&&c>1?c-1:c,i&&u>1?u-1:u];let E=0;const N=b[0]/w[0],C=b[1]/w[1];for(let S=0;S<h;S++)for(let T=0;T<c;T++){let I;o?I=N*(T+.5)-.5:I=N*T;const P=Math.max(0,Math.floor(I)),R=I-P,D=Math.min(m-1,Math.ceil(I)),B=S*l[0]+P*l[1],Z=S*l[0]+D*l[1];for(let z=0;z<u;z++){let q;o?q=C*(z+.5)-.5:q=C*z;const M=Math.max(0,Math.floor(q)),U=q-M,V=Math.min(p-1,Math.ceil(q)),ne=B+M*l[2],J=Z+M*l[2],G=B+V*l[2],X=Z+V*l[2];for(let H=0;H<y;H++){const W=v[ne+H],te=v[J+H],ae=v[G+H],ve=v[X+H],Ce=W+(ae-W)*U,Ie=te+(ve-te)*U,Fe=Ce+(Ie-Ce)*R;x[E++]=Fe}}}return n.makeTensorInfo([h,c,u,y],"float32",x)}const eLe={kernelName:Lw,backendName:"cpu",kernelFunc:QOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tLe(t){const{inputs:e,backend:n,attrs:r}=t,{images:s,dy:i}=e,{alignCorners:o}=r;He([i,s],"resizeBilinearGrad");const a=qe(s.shape),[l,c,u,h]=s.shape,[,m,p]=i.shape,y=new Float32Array(l*c*u*h),v=[o&&m>1?c-1:c,o&&p>1?u-1:u],x=[o&&m>1?m-1:m,o&&p>1?p-1:p],b=v[0]/x[0],w=v[1]/x[1],E=n.data.get(i.dataId).values;let N=0;for(let C=0;C<l;C++){const S=C*a[0];for(let T=0;T<m;T++){const I=T*b,P=Math.floor(I),R=Math.min(Math.ceil(I),c-1),D=S+P*a[1],B=S+R*a[1],Z=I-P,z=1-Z;for(let q=0;q<p;q++){const M=q*w,U=Math.floor(M),V=Math.min(Math.ceil(M),u-1),ne=M-U,J=1-ne,G=D+U*a[2],X=D+V*a[2],H=B+U*a[2],W=B+V*a[2],te=z*J,ae=z*ne,ve=Z*J,Ce=Z*ne;for(let Ie=0;Ie<h;Ie++){const Fe=E[N++];y[G+Ie]+=Fe*te,y[X+Ie]+=Fe*ae,y[H+Ie]+=Fe*ve,y[W+Ie]+=Fe*Ce}}}}return n.makeTensorInfo([l,u,c,h],"float32",y)}const nLe={kernelName:Z$,backendName:"cpu",kernelFunc:tLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rLe(t){const{inputs:e,backend:n,attrs:r}=t,{images:s}=e,{alignCorners:i,halfPixelCenters:o,size:a}=r;He(s,"resizeNearestNeighbor");const l=qe(s.shape),[c,u]=a,[h,m,p,y]=s.shape,v=n.data.get(s.dataId).values,x=new Float32Array(h*c*u*y),b=[i&&c>1?m-1:m,i&&u>1?p-1:p],w=[i&&c>1?c-1:c,i&&u>1?u-1:u],E=b[0]/w[0],N=b[1]/w[1];let C=0;for(let S=0;S<h;S++){const T=S*l[0];for(let I=0;I<c;I++){const P=o?E*(I+.5):E*I;let R=Math.min(m-1,i?Math.round(P):Math.floor(P));o&&(R=Math.max(0,R));const D=T+R*l[1];for(let B=0;B<u;B++){const Z=o?N*(B+.5):N*B;let z=Math.min(p-1,i?Math.round(Z):Math.floor(Z));o&&(z=Math.max(0,z));const q=D+z*l[2];for(let M=0;M<y;M++){const U=v[q+M];x[C++]=U}}}}return n.makeTensorInfo([h,c,u,y],s.dtype,x)}const sLe={kernelName:Ow,backendName:"cpu",kernelFunc:rLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iLe(t){const{inputs:e,backend:n,attrs:r}=t,{images:s,dy:i}=e,{alignCorners:o}=r;He([i,s],"resizeNearestNeighborGrad");const a=qe(s.shape),l=qe(i.shape),[c,u,h,m]=s.shape,[,p,y]=i.shape,v=new Float32Array(c*u*h*m),x=n.data.get(i.dataId).values,b=[o&&p>1?u-1:u,o&&y>1?h-1:h],w=[o&&p>1?p-1:p,o&&y>1?y-1:y],E=b[0]/w[0],N=b[1]/w[1],C=1/E,S=1/N,T=Math.ceil(C)*2+2,I=Math.ceil(S)*2+2;for(let P=0;P<c;P++){const R=P*a[0];for(let D=0;D<u;D++){const B=R+D*a[1],Z=Math.floor(D*C),z=Math.floor(Z-T/2);for(let q=0;q<h;q++){const M=B+q*a[2],U=Math.floor(q*S),V=Math.floor(U-I/2);for(let ne=0;ne<m;ne++){let J=0;for(let G=0;G<T;G++){const X=G+z;if(X<0||X>=p)continue;const H=R+X*l[1],W=X*E,te=Math.min(u-1,o?Math.round(W):Math.floor(W));if(D===te)for(let ae=0;ae<I;ae++){const ve=ae+V;if(ve<0||ve>=y)continue;const Ce=H+ve*l[2],Ie=ve*N,Fe=Math.min(h-1,o?Math.round(Ie):Math.floor(Ie));q===Fe&&(J+=x[Ce+ne])}}v[M+ne]=J}}}}return n.makeTensorInfo(s.shape,s.dtype,v)}const oLe={kernelName:K$,backendName:"cpu",kernelFunc:iLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aLe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{dims:i}=r;He(s,"reverse");const o=s.shape.length,a=xt(i,s.shape);if(o===0)return Fa({inputs:{x:s},backend:n});const l=new Zr(s.shape,s.dtype),c=n.bufferSync(s);for(let u=0;u<l.size;u++){const h=l.indexToLoc(u),m=h.slice();a.forEach(p=>m[p]=s.shape[p]-1-m[p]),l.set(c.get(...m),...h)}return n.makeTensorInfo(l.shape,l.dtype,l.values)}const lLe={kernelName:Mw,backendName:"cpu",kernelFunc:aLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cLe={kernelName:nI,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:s,fillValue:i,center:o}=e,a=n,l=ls(r.dtype,pe(r.shape)),[c,u,h,m]=r.shape,[p,y]=XI(o,u,h),v=255,x=Math.sin(s),b=Math.cos(s),w=a.data.get(r.dataId).values;for(let N=0;N<c;N++){const C=N*h*u*m;for(let S=0;S<u;S++){const T=S*(h*m);for(let I=0;I<h;I++){const P=I*m;for(let R=0;R<m;R++){const D=[c,S,I,R],B=D[2],Z=D[1];let z=(B-p)*b-(Z-y)*x,q=(B-p)*x+(Z-y)*b;z=Math.round(z+p),q=Math.round(q+y);let M=i;if(typeof i!="number"&&(R===3?M=v:M=i[R]),z>=0&&z<h&&q>=0&&q<u){const V=q*(h*m),ne=z*m,J=C+V+ne+R;M=w[J]}const U=C+T+P+R;l[U]=M}}}}return{dataId:a.write(l,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uLe=sn(W0,t=>{const e=Math.floor(t);return t-e<.5?Math.floor(t):t-e>.5?Math.ceil(t):e%2===0?e:e+1}),dLe={kernelName:W0,backendName:"cpu",kernelFunc:uLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hLe(t){const{inputs:e,backend:n,attrs:r}=t,{indices:s,updates:i}=e,{shape:o}=r,{sliceRank:a,numUpdates:l,sliceSize:c,strides:u,outputSize:h}=Ld(i,s,o),m=!0,p=n.bufferSync(s),y=n.bufferSync(i),v=Vu(p,y,o,h,c,l,a,u,0,m);return n.makeTensorInfo(o,v.dtype,v.values)}const fLe={kernelName:Aj,backendName:"cpu",kernelFunc:hLe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mLe(t,e){let n=0,r=t.length,s=0;for(;n<r;)s=Math.floor((n+r)/2),t[s]<e?n=s+1:r=s;return r}function pLe(t,e){let n=0,r=t.length,s=0;for(;n<r;)s=Math.floor((n+r)/2),t[s]<=e?n=s+1:r=s;return r}function gLe(t,e,n,r,s,i){const o=Jn("int32",n*s);for(let a=0;a<n;++a){const l=t.slice(a*r,(a+1)*r),c=a*s;for(let u=0;u<s;++u)o[c+u]=i==="left"?mLe(l,e[u+c]):pLe(l,e[u+c])}return o}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yLe(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:s,values:i}=e,{side:o}=r,a=n.data.get(s.dataId).values,l=n.data.get(i.dataId).values,c=gLe(a,l,s.shape[0],s.shape[1],i.shape[1],o);return n.makeTensorInfo(i.shape,"int32",c)}const bLe={kernelName:Pj,backendName:"cpu",kernelFunc:yLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vLe(t){const{inputs:e,backend:n}=t,{condition:r,t:s,e:i}=e;He([r,s,i],"select");const o=r.shape.length,a=n.data.get(r.dataId).values,l=n.data.get(s.dataId).values,c=n.data.get(i.dataId).values,u=ci(s.dtype,i.dtype),h=cs(pe(s.shape),u);let m=0;const p=o===0||o>1||s.shape.length===1?1:pe(s.shape.slice(1));for(let y=0;y<a.length;y++)for(let v=0;v<p;v++)a[y]===1?h[m++]=l[y]:h[m++]=c[y];return n.makeTensorInfo(s.shape,u,h)}const xLe={kernelName:zw,backendName:"cpu",kernelFunc:vLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wLe=s2,ELe=i2,kLe=sn(K0,t=>t>=0?ELe*t:wLe*(Math.exp(t)-1)),NLe={kernelName:K0,backendName:"cpu",kernelFunc:kLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CLe=sn(Y0,t=>t<0?-1:t>0?1:0),_Le={kernelName:Y0,backendName:"cpu",kernelFunc:CLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SLe=sn(Z0,t=>Math.sin(t)),TLe={kernelName:Z0,backendName:"cpu",kernelFunc:SLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Le=sn(X0,t=>Math.sinh(t)),ILe={kernelName:X0,backendName:"cpu",kernelFunc:$Le};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ALe=11920928955078125e-23,VM=Math.log(ALe)+2,RLe=sn(Q0,t=>{const e=t>-VM,n=t<VM,r=Math.exp(t);let s;return n?s=r:e?s=t:s=Math.log(1+r),s}),PLe={kernelName:Q0,backendName:"cpu",kernelFunc:RLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DLe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockShape:i,paddings:o}=r;He([s],"spaceToBatchND");const a=pe(i),l=[[0,0]];l.push(...o);for(let S=1+i.length;S<s.shape.length;++S)l.push([0,0]);const c=lW.kernelFunc({inputs:{x:s},backend:n,attrs:{paddings:l,constantValue:0}}),u=hy(c.shape,i,a,!1),h=fy(u.length,i.length,!1),m=my(c.shape,i,a,!1),v=xn({inputs:{x:c},backend:n,attrs:{shape:u}}),w=Gs({inputs:{x:v},backend:n,attrs:{perm:h}}),C=xn({inputs:{x:w},backend:n,attrs:{shape:m}});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(w),C}const OLe={kernelName:Vw,backendName:"cpu",kernelFunc:DLe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LLe(t){const{inputs:e,backend:n}=t,{indices:r,values:s,denseShape:i,defaultValue:o}=e;if(i.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
        ${i.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
        ${r.shape}`);if(s.shape.length!==1)throw new Error(`Values must be a vector, saw:
        ${s.shape}`);if(o.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${o.shape}`);const a=n.data.get(r.dataId).values,l=n.data.get(s.dataId).values,c=n.data.get(i.dataId).values,u=n.data.get(o.dataId).values[0],[h,m,p,y,v]=D9(a,r.shape,r.dtype,l,s.dtype,c,u);return[n.makeTensorInfo(m,r.dtype,h),n.makeTensorInfo([m[0]],s.dtype,p),n.makeTensorInfo([y.length],"bool",new Uint8Array(y.map(x=>Number(x)))),n.makeTensorInfo([v.length],r.dtype,new Int32Array(v))]}const MLe={kernelName:Dj,backendName:"cpu",kernelFunc:LLe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zLe(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:s,newShape:i}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape
        ${r.shape}`);if(s.shape.length!==1)throw new Error(`Input shape should be a vector but received shape
        ${s.shape}`);if(i.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${i.shape}`);const o=Array.from(n.data.get(s.dataId).values),a=n.data.get(r.dataId).values,l=Array.from(n.data.get(i.dataId).values),[c,u,h]=O9(a,r.shape,r.dtype,o,l);return[n.makeTensorInfo(u,r.dtype,c),n.makeTensorInfo([h.length],i.dtype,new Int32Array(h))]}const FLe={kernelName:Oj,backendName:"cpu",kernelFunc:zLe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BLe(t){const{inputs:e,backend:n}=t,{data:r,indices:s,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error(`Indices should be a vector but received shape
          ${s.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
          ${i.shape}`);if(s.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");const o=n.data.get(r.dataId).values,a=n.data.get(s.dataId).values,l=n.data.get(i.dataId).values,[c,u]=B3(o,r.shape,r.dtype,a,l,!0);return n.makeTensorInfo(u,r.dtype,c)}const VLe={kernelName:Lj,backendName:"cpu",kernelFunc:BLe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jLe(t){const{inputs:e,backend:n}=t,{data:r,indices:s,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error(`Indices should be a vector but received shape
         ${s.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
         ${i.shape}`);if(s.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");const o=n.data.get(r.dataId).values,a=n.data.get(s.dataId).values,l=n.data.get(i.dataId).values,[c,u]=B3(o,r.shape,r.dtype,a,l);return n.makeTensorInfo(u,r.dtype,c)}const ULe={kernelName:Mj,backendName:"cpu",kernelFunc:jLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HLe(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:s,sparseValues:i,defaultValue:o}=e,{outputShape:a}=r,{sliceRank:l,numUpdates:c,sliceSize:u,strides:h,outputSize:m}=Ld(i,s,a),p=!1,y=n.bufferSync(s);let v;switch(i.dtype){case"bool":{const x=n.bufferSync(i),b=!!n.data.get(o.dataId).values[0];v=Vu(y,x,a,m,u,c,l,h,b,p);break}case"float32":{const x=n.bufferSync(i),b=n.data.get(o.dataId).values[0];v=Vu(y,x,a,m,u,c,l,h,b,p);break}case"int32":{const x=n.bufferSync(i),b=n.data.get(o.dataId).values[0];v=Vu(y,x,a,m,u,c,l,h,b,p);break}case"string":{const x=n.bufferSync(i),b=jc(n.data.get(o.dataId).values[0]);v=Vu(y,x,a,m,u,c,l,h,b,p);break}default:throw new Error(`Unsupported type ${i.dtype}`)}return n.makeTensorInfo(a,v.dtype,v.values)}const GLe={kernelName:zj,backendName:"cpu",kernelFunc:HLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WLe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{numOrSizeSplits:i,axis:o}=r,a=xt(o,s.shape)[0],l=d3(s,i,a),c=new Array(s.shape.length).fill(0),u=s.shape.slice();return l.map(h=>{const m=[...u];m[a]=h;const p=vd({inputs:{x:s},backend:n,attrs:{begin:c,size:m}});return c[a]+=h,p})}const qLe={kernelName:jw,backendName:"cpu",kernelFunc:WLe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KLe={kernelName:X$,backendName:"cpu",kernelFunc:({inputs:t,backend:e})=>{const{x:n}=t,r=e;He(n,"square");const s=r.data.get(n.dataId).values,i=new Float32Array(s.length);for(let a=0;a<s.length;++a){const l=s[a];i[a]=l*l}return{dataId:r.write(i,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZLe=sn(oy,(t,e)=>{const n=e;return isNaN(t)?NaN:t>0?1:n.alpha}),XLe={kernelName:oy,backendName:"cpu",kernelFunc:ZLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YLe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{begin:i,end:o,strides:a,beginMask:l,endMask:c,ellipsisMask:u,newAxisMask:h,shrinkAxisMask:m}=r;He(s,"stridedSlice");const{finalShapeSparse:p,finalShape:y,isIdentity:v,sliceDim0:x,isSimpleSlice:b,begin:w,end:E,strides:N}=qI(s.shape,i,o,a,l,c,u,h,m);let C;if(v)C=xn({inputs:{x:s},backend:n,attrs:{shape:y}});else if(x||b){F(s.shape.length>=1,()=>`Input must have rank at least 1, got: ${s.shape.length}`);const S=HI(w,E,N),T=vd({inputs:{x:s},backend:n,attrs:{begin:w,size:S}});C=xn({inputs:{x:T},backend:n,attrs:{shape:y}}),n.disposeIntermediateTensorInfo(T)}else{const S=n.bufferSync(s),T=z9(p,S,N,w);C=n.makeTensorInfo(y,T.dtype,T.values)}return C}const JLe={kernelName:J$,backendName:"cpu",kernelFunc:YLe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QLe(t){const{inputs:e,backend:n,attrs:r}=t,{separator:s,nGramWidths:i,leftPad:o,rightPad:a,padWidth:l,preserveShortSequences:c}=r,{data:u,dataSplits:h}=e,m=n.data.get(u.dataId).values,p=n.data.get(h.dataId).values,[y,v]=F9(m,p,s,i,o,a,l,c);return[n.makeTensorInfo([y.length],"string",y),n.makeTensorInfo(h.shape,"int32",v)]}const eMe={kernelName:Fj,backendName:"cpu",kernelFunc:QLe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tMe(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:s}=r,{input:i,delimiter:o}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(i.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${i.shape}`);if(o.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${o.shape}`);const a=n.data.get(i.dataId).values,l=n.data.get(o.dataId).values[0],[c,u,h]=B9(a,l,s),m=u.length;return[n.makeTensorInfo([m,2],"int32",c),n.makeTensorInfo([m],"string",u),n.makeTensorInfo([2],"int32",new Int32Array(h))]}const nMe={kernelName:Bj,backendName:"cpu",kernelFunc:tMe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rMe(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:s}=r,{input:i}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(s<=0)throw new Error("Number of buckets must be at least 1");const o=n.data.get(i.dataId).values,a=V9(o,s);return n.makeTensorInfo(i.shape,"int32",a)}const sMe={kernelName:Vj,backendName:"cpu",kernelFunc:rMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iMe=sn(ry,t=>Math.tan(t)),oMe={kernelName:ry,backendName:"cpu",kernelFunc:iMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aMe=sn(sy,t=>Math.tanh(t)),lMe={kernelName:sy,backendName:"cpu",kernelFunc:aMe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cMe(t){const{inputs:e,backend:n}=t,{tensor:r,indices:s,updates:i}=e,{sliceRank:o,numUpdates:a,sliceSize:l,strides:c,outputSize:u}=Ld(i,s,r.shape),h=!1,m=n.bufferSync(s),p=n.bufferSync(i),y=n.bufferSync(r),v=Vu(m,p,r.shape,u,l,a,o,c,y,h);return n.makeTensorInfo(r.shape,v.dtype,v.values)}const uMe={kernelName:Rj,backendName:"cpu",kernelFunc:cMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dMe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{reps:i}=r;He(s,"tile");const o=U9(n.bufferSync(s),i);return n.makeTensorInfo(o.shape,o.dtype,o.values)}const hMe={kernelName:iy,backendName:"cpu",kernelFunc:dMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fMe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{k:i,sorted:o}=r;He(s,"topk");const a=n.data.get(s.dataId).values,[l,c]=G9(a,s.shape,s.dtype,i,o);return[n.makeTensorInfo(l.shape,l.dtype,l.values),n.makeTensorInfo(c.shape,c.dtype,c.values)]}const mMe={kernelName:Q$,backendName:"cpu",kernelFunc:fMe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pMe(t){const{inputs:e,attrs:n,backend:r}=t,{image:s,transforms:i}=e,{interpolation:o,fillMode:a,fillValue:l,outputShape:c}=n,[u,h,m,p]=s.shape,[y,v]=c??[h,m],x=[u,y,v,p],b=qe(s.shape),w=b[0],E=b[1],N=b[2],C=qe(x),S=C[0],T=C[1],I=C[2],P=ls(s.dtype,pe(x));P.fill(l);const R=r.data.get(s.dataId).values,D=r.data.get(i.dataId).values;for(let Z=0;Z<u;++Z){const z=i.shape[0]===1?D:D.subarray(Z*8,Z*8+8);for(let q=0;q<y;++q)for(let M=0;M<v;++M)for(let U=0;U<p;++U){let V;const ne=z[6]*M+z[7]*q+1;if(ne===0)continue;const J=(z[0]*M+z[1]*q+z[2])/ne,G=(z[3]*M+z[4]*q+z[5])/ne,X=jM(J,m,a),H=jM(G,h,a);switch(o){case"nearest":V=wMe(R,h,m,w,E,N,Z,H,X,U,l);break;case"bilinear":V=EMe(R,h,m,w,E,N,Z,H,X,U,l);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${o}`)}const W=Z*S+q*T+M*I+U;P[W]=V}return r.makeTensorInfo(x,s.dtype,P)}return{dataId:r.write(P,x,s.dtype),shape:s.shape,dtype:s.dtype}}const gMe={kernelName:eI,backendName:"cpu",kernelFunc:pMe};function jM(t,e,n){switch(n){case"reflect":return yMe(t,e);case"wrap":return bMe(t,e);case"nearest":return xMe(t,e);case"constant":default:return vMe(t)}}function yMe(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const r=2*e;n<r&&(n=r*Math.trunc(-n/r)+n),n=n<-e?n+r:-n-1}else if(n>e-1)if(e<=1)n=0;else{const r=2*e;n-=r*Math.trunc(n/r),n>=e&&(n=r-n-1)}return ad(0,n,e-1)}function bMe(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const r=e-1;n+=e*(Math.trunc(-n/r)+1)}else if(n>e-1)if(e<=1)n=0;else{const r=e-1;n-=e*Math.trunc(n/r)}return ad(0,n,e-1)}function vMe(t,e){return t}function xMe(t,e){return ad(0,t,e-1)}function dp(t,e,n,r,s,i,o,a,l,c,u){const h=o*r+a*s+l*i+c;return 0<=a&&a<e&&0<=l&&l<n?t[h]:u}function wMe(t,e,n,r,s,i,o,a,l,c,u){const h=Math.round(a),m=Math.round(l);return dp(t,e,n,r,s,i,o,h,m,c,u)}function EMe(t,e,n,r,s,i,o,a,l,c,u){const h=Math.floor(a),m=Math.floor(l),p=h+1,y=m+1,v=(y-l)*dp(t,e,n,r,s,i,o,h,m,c,u)+(l-m)*dp(t,e,n,r,s,i,o,h,y,c,u),x=(y-l)*dp(t,e,n,r,s,i,o,p,m,c,u)+(l-m)*dp(t,e,n,r,s,i,o,p,y,c,u);return(p-a)*v+(a-h)*x}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kMe(t){const{inputs:e,attrs:n,backend:r}=t,{axis:s}=n,{x:i}=e;He(i,"unique");const o=r.data.get(i.dataId).values,{outputValues:a,outputShape:l,indices:c}=W9(o,s,i.shape,i.dtype);return[r.makeTensorInfo(l,i.dtype,a),r.makeTensorInfo([c.length],"int32",c)]}const NMe={kernelName:tI,backendName:"cpu",kernelFunc:kMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CMe(t){const{inputs:e,backend:n,attrs:r}=t,{value:s}=e;let{axis:i}=r;i<0&&(i+=s.shape.length);const o=s.shape.length,a=s.shape[i],l=new Array(o-1);let c=0;for(let p=0;p<o;p++)p!==i&&(l[c++]=s.shape[p]);const u=new Array(o).fill(0),h=s.shape.slice();h[i]=1;const m=new Array(a);for(let p=0;p<m.length;p++){u[i]=p;const y=vd({inputs:{x:s},backend:n,attrs:{begin:u,size:h}});m[p]=xn({inputs:{x:y},backend:n,attrs:{shape:l}}),n.disposeIntermediateTensorInfo(y)}return m}const _Me={kernelName:Hw,backendName:"cpu",kernelFunc:CMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SMe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,segmentIds:i}=e,{numSegments:o}=r;He(s,"unsortedSegmentSum");const a=s.shape.length,l=i.shape.length,c=[],u=[],h=a-l;let m=i;for(let y=0;y<h;++y){const v=Q1({inputs:{input:m},backend:n,attrs:{dim:y+1}});m=v,u.push(v)}for(let y=0;y<o;++y){const v=Qc(y,"int32"),x=n.makeTensorInfo([],"int32",v),b=a9({inputs:{a:x,b:m},backend:n}),w=qc({inputs:{x:b},backend:n,attrs:{dtype:"float32"}}),E=y2({inputs:{a:w,b:s},backend:n}),N=ky({inputs:{x:E},backend:n,attrs:{axis:0,keepDims:!1}});c.push(N),u.push(x),u.push(b),u.push(w),u.push(E),u.push(N)}const p=aW({inputs:c,backend:n,attrs:{axis:0}});return u.forEach(y=>n.disposeIntermediateTensorInfo(y)),p}const TMe={kernelName:Gw,backendName:"cpu",kernelFunc:SMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Me=[kPe,rRe,CPe,SPe,cRe,$Pe,APe,PPe,OPe,MPe,FPe,VPe,UPe,WPe,KPe,YPe,QPe,tDe,rDe,wPe,iDe,aDe,cDe,dRe,dDe,aRe,fRe,fDe,sRe,pDe,yDe,bDe,xDe,EDe,NDe,_De,TDe,IDe,RDe,DDe,LDe,zDe,BDe,jDe,UDe,GDe,qDe,ZDe,XDe,YDe,JDe,e4e,r4e,mPe,i4e,mRe,f4e,pRe,m4e,yRe,x4e,w4e,k4e,vRe,wRe,C4e,S4e,$4e,A4e,kRe,CRe,iRe,P4e,gDe,O4e,M4e,F4e,pPe,SRe,$Re,V4e,ARe,U4e,W4e,K4e,Y4e,Q4e,tOe,nOe,PRe,sOe,oOe,lOe,uOe,hOe,mOe,gOe,ORe,bOe,wOe,NOe,MRe,FRe,SOe,IOe,POe,VRe,OOe,MOe,zOe,lW,jOe,yPe,HRe,HOe,WOe,KOe,XOe,oRe,I_,JOe,bPe,vPe,xPe,eLe,nLe,sLe,oLe,lLe,cLe,dLe,JRe,fLe,bLe,xLe,NLe,ePe,_Le,TLe,ILe,tPe,EOe,PLe,OLe,MLe,FLe,VLe,ULe,GLe,qLe,sPe,KLe,oPe,lPe,XLe,JLe,eMe,nMe,sMe,hPe,t4e,oMe,lMe,uMe,hMe,mMe,gMe,jRe,NMe,_Me,TMe,LOe];for(const t of $Me)Uj(t);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pu={},Kb={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function IMe(t,e){Pu[t]=e}function Xo(t,e){if(!(t in Pu)||e!=null){const r=RMe(t,e);if(r!==null)Pu[t]=r;else return console.log("Could not get context for WebGL version",t),null}const n=Pu[t];return n==null||n.isContextLost()?(delete Pu[t],Xo(t)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),Pu[t])}function AMe(t){if(!de().getBool("IS_SAFARI")&&typeof OffscreenCanvas<"u"&&t===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function RMe(t,e){if(t!==1&&t!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const n=e??AMe(t);return n.addEventListener("webglcontextlost",r=>{r.preventDefault(),delete Pu[t]},!1),de().getBool("SOFTWARE_WEBGL_ENABLED")&&(Kb.failIfMajorPerformanceCaveat=!1),t===1?n.getContext("webgl",Kb)||n.getContext("experimental-webgl",Kb):n.getContext("webgl2",Kb)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Sg;(function(t){t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH"})(Sg||(Sg={}));var Si;(function(t){t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD"})(Si||(Si={}));var Wr;(function(t){t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(Wr||(Wr={}));function Ny(t,e){return[e,t]}function PMe(t,e){return t*e}function Zb(t){const e=pe(t),n=Math.ceil(e/4);return YC(n)}function lm(t,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(t/2))]}function DMe(t,e){const[n,r]=lm(t,e);return n*r*4}function G3(t,e){const n=t;let r,s,i,o,a,l,c,u,h,m;return de().getNumber("WEBGL_VERSION")===2?(r=n.R32F,s=n.R16F,i=n.RGBA16F,o=n.RGBA32F,a=n.RED,c=4,u=1,h=n.HALF_FLOAT,m=n.FLOAT,l=n.RGBA8):(r=t.RGBA,s=t.RGBA,i=t.RGBA,o=n.RGBA,a=t.RGBA,c=4,u=4,h=e!=null?e.HALF_FLOAT_OES:null,m=t.FLOAT,l=t.RGBA),{internalFormatFloat:r,internalFormatHalfFloat:s,internalFormatPackedHalfFloat:i,internalFormatPackedFloat:o,textureFormatFloat:a,downloadTextureFormat:l,downloadUnpackNumChannels:c,defaultNumChannels:u,textureTypeHalfFloat:h,textureTypeFloat:m}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Le(t,e){const n=e();return de().getBool("DEBUG")&&OMe(t),n}function OMe(t){const e=t.getError();if(e!==t.NO_ERROR)throw new Error("WebGL Error: "+FMe(t,e))}const LMe=596e-10,MMe=65504;function zMe(t){return!!(de().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||t===0||LMe<Math.abs(t)&&Math.abs(t)<MMe)}function FMe(t,e){switch(e){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${e}`}}function Xb(t,e){return Ul(t,()=>t.getExtension(e),'Extension "'+e+'" not supported on this browser.')}function BMe(t,e){const n=Ul(t,()=>t.createShader(t.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(Le(t,()=>t.shaderSource(n,e)),Le(t,()=>t.compileShader(n)),t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw console.log(t.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function VMe(t,e){const n=Ul(t,()=>t.createShader(t.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(Le(t,()=>t.shaderSource(n,e)),Le(t,()=>t.compileShader(n)),de().get("ENGINE_COMPILE_ONLY"))return n;if(t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw cW(e,t.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}const jMe=/ERROR: [0-9]+:([0-9]+):/g;function cW(t,e){const n=jMe.exec(e);if(n==null){console.log(`Couldn't parse line number in error: ${e}`),console.log(t);return}const r=+n[1],s=t.split(`
`),i=s.length.toString().length+2,o=s.map((h,m)=>Zh((m+1).toString(),i)+h);let a=0;for(let h=0;h<o.length;h++)a=Math.max(o[h].length,a);const l=o.slice(0,r-1),c=o.slice(r-1,r),u=o.slice(r);console.log(l.join(`
`)),console.log(e.split(`
`)[0]),console.log(`%c ${Zh(c[0],a)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(u.join(`
`))}function UMe(t){return Ul(t,()=>t.createProgram(),"Unable to create WebGLProgram.")}function HMe(t,e){if(Le(t,()=>t.linkProgram(e)),!de().get("ENGINE_COMPILE_ONLY")&&t.getProgramParameter(e,t.LINK_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Failed to link vertex and fragment shaders.")}function Mk(t,e){if(Le(t,()=>t.validateProgram(e)),t.getProgramParameter(e,t.VALIDATE_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Shader program validation failed.")}function GMe(t,e){const n=Ul(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return Le(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),Le(t,()=>t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function WMe(t,e){const n=Ul(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return Le(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n)),Le(t,()=>t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function qMe(t){return Ul(t,()=>t.createTexture(),"Unable to create WebGLTexture.")}function KMe(t,e){const n=de().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||e<=0){const r=`[${t}x${e}]`;throw new Error("Requested texture size "+r+" is invalid.")}if(t>n||e>n){const r=`[${t}x${e}]`,s=`[${n}x${n}]`;throw new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+s+".")}}function ZMe(t){return Ul(t,()=>t.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function UM(t,e,n,r,s,i,o){const a=t.getAttribLocation(e,n);return a===-1?!1:(Le(t,()=>t.bindBuffer(t.ARRAY_BUFFER,r)),Le(t,()=>t.vertexAttribPointer(a,s,t.FLOAT,!1,i,o)),Le(t,()=>t.enableVertexAttribArray(a)),!0)}function XMe(t,e,n){tze(t,n),Le(t,()=>t.activeTexture(t.TEXTURE0+n)),Le(t,()=>t.bindTexture(t.TEXTURE_2D,e))}function YMe(t,e,n){return Ul(t,()=>t.getUniformLocation(e,n),'uniform "'+n+'" not present in program.')}function JMe(t,e,n){return t.getUniformLocation(e,n)}function QMe(t,e,n,r){Le(t,()=>XMe(t,e,r)),Le(t,()=>t.uniform1i(n,r))}function zk(t,e,n){Le(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,n)),Le(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0))}function HM(t,e){Le(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,e)),Le(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0))}function Yb(t){const e=t.checkFramebufferStatus(t.FRAMEBUFFER);if(e!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+eze(t,e))}function eze(t,e){switch(e){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${e}`}}function Ul(t,e,n){const r=Le(t,()=>e());if(r==null)throw new Error(n);return r}function tze(t,e){const n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+t.TEXTURE0;if(r<t.TEXTURE0||r>n){const s=`[gl.TEXTURE0, gl.TEXTURE${n}]`;throw new Error(`textureUnit must be in ${s}.`)}}function Pf(t,e=2){return pe(t.slice(0,t.length-e))}function Df(t){if(t.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function Jb(t){let e=[1,1,1];return t.length===0||t.length===1&&t[0]===1||(e=[Pf(t),...Df(t)]),e}function nze(t,e=!1){let n=de().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=de().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");r===1/0&&de().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=n/2),e&&(n=n*2,r=r*2,t=t.map((a,l)=>l>=t.length-2?d$(t[l]):t[l]),t.length===1&&(t=[2,t[0]])),t.length!==2&&(t=Jc(t).newShape);let s=pe(t),i=null;t.length<=1&&s<=n?i=[1,s]:t.length===2&&t[0]<=n&&t[1]<=n?i=t:t.length===3&&t[0]*t[1]<=n&&t[2]<=n?i=[t[0]*t[1],t[2]]:t.length===3&&t[0]<=n&&t[1]*t[2]<=n?i=[t[0],t[1]*t[2]]:t.length===4&&t[0]*t[1]*t[2]<=n&&t[3]<=n?i=[t[0]*t[1]*t[2],t[3]]:t.length===4&&t[0]<=n&&t[1]*t[2]*t[3]<=n&&(i=[t[0],t[1]*t[2]*t[3]]);const o=i!=null&&Math.max(...i)>r&&Math.min(...i)<=(e?2:1)&&Math.min(...i)>0;if(i==null||o)if(e){const a=Pf(t);let l=2,c=2;t.length&&([l,c]=Df(t)),s=a*(l/2)*(c/2),i=YC(s).map(u=>u*2)}else i=YC(s);return i}function Qb(t){return t%2===0}function tx(t,e){if(t=t.slice(-2),e=e.slice(-2),Zt(t,e)||!t.length||!e.length||t[0]===0||t[1]===0||e[0]===0||e[1]===0)return!0;if(t.length!==e.length){const n=t[t.length-1],r=e[e.length-1];if(n===r||Qb(n)&&Qb(r)&&(t[0]===1||e[0]===1))return!0}return t[1]===e[1]&&Qb(t[0])&&Qb(e[0])}let Fk,Bk;function rze(t){if(Fk==null){const e=Xo(t);Fk=e.getParameter(e.MAX_TEXTURE_SIZE)}return Fk}function sze(t){if(Bk==null){const e=Xo(t);Bk=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,Bk)}function ize(t){if(t===0)return 0;let e;const n=Xo(t);return uo(n,"EXT_disjoint_timer_query_webgl2")&&t===2?e=2:uo(n,"EXT_disjoint_timer_query")?e=1:e=0,e}function uo(t,e){return t.getExtension(e)!=null}function GM(t){try{if(Xo(t)!=null)return!0}catch(e){return console.log("Error when getting WebGL context: ",e),!1}return!1}function oze(t){if(t===0)return!1;const e=Xo(t);if(t===1){if(!uo(e,"OES_texture_float"))return!1}else if(!uo(e,"EXT_color_buffer_float"))return!1;return R_(e)}function aze(t){if(t===0)return!1;const e=Xo(t);if(t===1){if(!uo(e,"OES_texture_float")||!uo(e,"WEBGL_color_buffer_float"))return!1}else{if(uo(e,"EXT_color_buffer_float"))return R_(e);const r="EXT_color_buffer_half_float";if(uo(e,r)){const s=e.getExtension(r);return lze(e,s)}return!1}return R_(e)}function R_(t){const e=G3(t),n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n);const r=1,s=1;t.texImage2D(t.TEXTURE_2D,0,e.internalFormatFloat,r,s,0,e.textureFormatFloat,e.textureTypeFloat,null);const i=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,i),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);const o=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(n),t.deleteFramebuffer(i),o}function lze(t,e){const n=G3(t,e),r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r);const s=1,i=1;t.texImage2D(t.TEXTURE_2D,0,n.internalFormatHalfFloat,s,i,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const o=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,o),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0);const a=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(r),t.deleteFramebuffer(o),a}function cze(t){return t!==2?!1:Xo(t).fenceSync!=null}function Cy(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&F(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the WebGL backend.`)})}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ge=de();Ge.registerFlag("HAS_WEBGL",()=>Ge.getNumber("WEBGL_VERSION")>0);Ge.registerFlag("WEBGL_VERSION",()=>GM(2)?2:GM(1)?1:0);Ge.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1);Ge.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>Ge.get("WEBGL_VERSION")===2);Ge.registerFlag("WEBGL_CPU_FORWARD",()=>!0);Ge.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1);Ge.registerFlag("WEBGL_PACK",()=>Ge.getBool("HAS_WEBGL"));Ge.registerFlag("WEBGL_PACK_NORMALIZATION",()=>Ge.getBool("WEBGL_PACK"));Ge.registerFlag("WEBGL_PACK_CLIP",()=>Ge.getBool("WEBGL_PACK"));Ge.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>Ge.getBool("WEBGL_PACK"));Ge.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>Ge.getBool("WEBGL_PACK"));Ge.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>Ge.getBool("WEBGL_PACK"));Ge.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>Ge.getBool("WEBGL_PACK"));Ge.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>Ge.getBool("WEBGL_PACK"));Ge.registerFlag("WEBGL_PACK_REDUCE",()=>Ge.getBool("WEBGL_PACK"));Ge.registerFlag("WEBGL_LAZILY_UNPACK",()=>Ge.getBool("WEBGL_PACK"));Ge.registerFlag("WEBGL_CONV_IM2COL",()=>Ge.getBool("WEBGL_PACK"));Ge.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",()=>Ge.getBool("WEBGL_PACK"));Ge.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>rze(Ge.getNumber("WEBGL_VERSION")));Ge.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>sze(Ge.getNumber("WEBGL_VERSION")));Ge.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const t=Ge.getNumber("WEBGL_VERSION");return t===0?0:ize(t)});Ge.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>Ge.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!o7());Ge.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>oze(Ge.getNumber("WEBGL_VERSION")));Ge.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>Ge.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:Ge.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"));Ge.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>aze(Ge.getNumber("WEBGL_VERSION")));Ge.registerFlag("WEBGL_FENCE_API_ENABLED",()=>cze(Ge.getNumber("WEBGL_VERSION")));Ge.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>Ge.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0);Ge.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${t}.`)});Ge.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>o7()?1:-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_FLUSH_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${t}.`)});Ge.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128);Ge.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1);Ge.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5);Ge.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128);Ge.registerFlag("WEBGL_EXP_CONV",()=>!1);Ge.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>Ge.getBool("IS_TEST"));Ge.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0);Ge.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1);Ge.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1);Ge.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function As(){let t,e,n,r,s,i,o,a,l,c;return de().getNumber("WEBGL_VERSION")===2?(t="#version 300 es",e="in",n="out",r="in",s="texture",i="outputColor",o="out vec4 outputColor;",a=de().getBool("WEBGL2_ISNAN_CUSTOM")?`
      bool isnan_custom(float val) {
        uint floatToUint = floatBitsToUint(val);
        return (floatToUint & 0x7fffffffu) > 0x7f800000u;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `:"",l="",c=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(t="",e="attribute",n="varying",r="varying",s="texture2D",i="gl_FragColor",o="",a=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,l=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,c=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:t,attribute:e,varyingVs:n,varyingFs:r,texture2D:s,output:i,defineOutput:o,defineSpecialNaN:a,defineSpecialInf:l,defineRound:c}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fd(t,e,n="index"){const r=qe(e);return r.map((s,i)=>{const o=`int ${t[i]} = ${n} / ${s}`,a=i===r.length-1?`int ${t[i+1]} = ${n} - ${t[i]} * ${s}`:`index -= ${t[i]} * ${s}`;return`${o}; ${a};`}).join("")}function b2(t,e,n="index"){const r=qe(e);return r.map((s,i)=>{const o=`int ${t[i]} = ${n} / outShapeStrides[${i}]`,a=i===r.length-1?`int ${t[i+1]} = ${n} - ${t[i]} * outShapeStrides[${i}]`:`index -= ${t[i]} * outShapeStrides[${i}]`;return`${o}; ${a};`}).join("")}function uze(t,e){const n=t.length,r=t.map(i=>`${e}[${i}]`),s=new Array(n-1);s[n-2]=r[n-1];for(let i=n-3;i>=0;--i)s[i]=`(${s[i+1]} * ${r[i+1]})`;return s}function dze(t,e,n="index"){const r=t.map((i,o)=>o),s=uze(r,e);return s.map((i,o)=>{const a=`int ${t[o]} = ${n} / ${s[o]}`,l=o===s.length-1?`int ${t[o+1]} = ${n} - ${t[o]} * ${s[o]}`:`index -= ${t[o]} * ${s[o]}`;return`${a}; ${l};`}).join("")}function W3(t){const e=qe(t).map(n=>n.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${e[0]} + coords.y * ${e[1]} + coords.z;
  }
`}function q3(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}const uW=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{getBroadcastDims:dW}=e$e;function hze(t,e,n){const r=[];if(t.forEach(p=>{const y=pe(p.shapeInfo.logicalShape);if(p.shapeInfo.isUniform?r.push(`uniform float ${p.name}${y>1?`[${y}]`:""};`):(r.push(`uniform sampler2D ${p.name};`),r.push(`uniform int offset${p.name};`)),n.enableShapeUniforms){const{uniformShape:v}=K3(n.packedInputs,p.shapeInfo.logicalShape,p.shapeInfo.texShape);switch(v.length){case 1:r.push(`uniform int ${p.name}Shape;`);break;case 2:r.push(`uniform ivec2 ${p.name}Shape;`);break;case 3:r.push(`uniform ivec3 ${p.name}Shape;`);break;case 4:r.push(`uniform ivec4 ${p.name}Shape;`);break}r.push(`uniform ivec2 ${p.name}TexShape;`)}}),n.enableShapeUniforms){switch(e.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;");break}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach(p=>{r.push(`uniform ${p.type} ${p.name}${p.arrayIndex?`[${p.arrayIndex}]`:""};`)});const s=r.join(`
`),i=t.map(p=>fze(p,e,n.packedInputs,n.enableShapeUniforms)).join(`
`),o=e.texShape,a=As(),l=gze(a);let c,u,h=vze(a);return e.isPacked?(c=mze(e.logicalShape,o,n.enableShapeUniforms),u=bze(a)):(c=pze(e.logicalShape,o,n.enableShapeUniforms),u=yze(a)),n.packedInputs&&(h+=kze),[h,l,u,s,c,i,n.userCode].join(`
`)}function cm(t,e=!1){const n=t.shapeInfo.logicalShape;switch(n.length){case 0:return Oze(t,e);case 1:return Mze(t,e);case 2:return Fze(t,e);case 3:return Vze(t,e);case 4:return Uze(t,e);case 5:return Hze(t);case 6:return Gze(t);default:throw new Error(`${n.length}-D input sampling is not yet supported`)}}function hW(t,e){switch(t.shapeInfo.logicalShape.length){case 0:return Dze(t);case 1:return Lze(t,e);case 2:return zze(t,e);case 3:return Bze(t,e);default:return jze(t,e)}}function fze(t,e,n=!1,r){let s="";n?s+=hW(t,r):s+=cm(t,r);const i=t.shapeInfo.logicalShape,o=e.logicalShape;return i.length<=o.length&&(n?s+=Wze(t,e):s+=qze(t,e)),s}function mze(t,e,n){switch(t.length){case 0:return fW();case 1:return Nze(t,e,n);case 2:return Rze(t,e,n);case 3:return _ze(t,e,n);default:return Tze(t,e,n)}}function pze(t,e,n){switch(t.length){case 0:return fW();case 1:return Cze(t,e,n);case 2:return Pze(t,e,n);case 3:return Sze(t,e,n);case 4:return $ze(t,e,n);case 5:return Ize(t,e);case 6:return Aze(t,e);default:throw new Error(`${t.length}-D output sampling is not yet supported`)}}function gze(t){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${t.texture2D}(textureSampler, uv).r;
    }
  `}function yze(t){return`
    void setOutput(float val) {
      ${t.output} = vec4(val, 0, 0, 0);
    }
  `}function bze(t){return`
    void setOutput(vec4 val) {
      ${t.output} = val;
    }
  `}function vze(t){return`${t.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${t.varyingFs} vec2 resultUV;
    ${t.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${t.defineSpecialNaN}
    ${t.defineSpecialInf}
    ${t.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${xze}
    ${wze}
    ${Eze}
  `}const xze=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,wze=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,Eze=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,kze=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function fW(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function Nze(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];return r[0]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${r[1]}.0);
      }
    `:r[1]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${r[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      return 2 * (resTexRC.x * ${r[1]} + resTexRC.y);
    }
  `}function Cze(t,e,n){return e[0]===1?n?`
      int getOutputCoords() {
        return int(resultUV.x * float(outTexShape[1]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.x * ${e[1]}.0);
      }
    `:e[1]===1?n?`
      int getOutputCoords() {
        return int(resultUV.y * float(outTexShape[0]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.y * ${e[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      return resTexRC.x * outTexShape[1] + resTexRC.y;
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      return resTexRC.x * ${e[1]} + resTexRC.y;
    }
  `}function _ze(t,e,n){if(n)return`
    ivec3 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec3(b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],s=Math.ceil(t[2]/2),i=s*Math.ceil(t[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      int b = index / ${i};
      index -= b * ${i};

      int r = 2 * (index / ${s});
      int c = imod(index, ${s}) * 2;

      return ivec3(b, r, c);
    }
  `}function Sze(t,e,n){if(n)return`
  ivec3 getOutputCoords() {
    ivec2 resTexRC = ivec2(resultUV.yx *
                           vec2(outTexShape[0], outTexShape[1]));
    int index = resTexRC.x * outTexShape[1] + resTexRC.y;
    ${b2(["r","c","d"],t)}
    return ivec3(r, c, d);
  }
`;const r=Fd(["r","c","d"],t);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec3(r, c, d);
    }
  `}function Tze(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatchN = texelsInBatch * outShape[1];

      int b2 = index / texelsInBatchN;
      index -= b2 * texelsInBatchN;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec4(b2, b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],s=Math.ceil(t[t.length-1]/2),i=s*Math.ceil(t[t.length-2]/2);let o=i,a="",l="b, r, c";for(let c=2;c<t.length-1;c++)o*=t[t.length-c-1],a=`
      int b${c} = index / ${o};
      index -= b${c} * ${o};
    `+a,l=`b${c}, `+l;return`
    ivec${t.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      ${a}

      int b = index / ${i};
      index -= b * ${i};

      int r = 2 * (index / ${s});
      int c = imod(index, ${s}) * 2;

      return ivec${t.length}(${l});
    }
  `}function $ze(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      ${b2(["r","c","d","d2"],t)}
      return ivec4(r, c, d, d2);
    }
  `;const r=Fd(["r","c","d","d2"],t);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec4(r, c, d, d2);
    }
  `}function Ize(t,e){const n=Fd(["r","c","d","d2","d3"],t);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${e[0]},
                             ${e[1]}));

      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function Aze(t,e){const n=Fd(["r","c","d","d2","d3","d4"],t);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function Rze(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];if(Zt(t,e))return n?`
      ivec2 getOutputCoords() {
        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${r[0]}, ${r[1]}));
      }
    `;const s=Math.ceil(t[1]/2);return n?`
    ivec2 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));

      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;
      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));

      int index = resTexRC.x * ${r[1]} + resTexRC.y;
      int r = 2 * (index / ${s});
      int c = imod(index, ${s}) * 2;

      return ivec2(r, c);
    }
  `}function Pze(t,e,n){return Zt(t,e)?n?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${e[0]}, ${e[1]}));
      }
    `:t[1]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(index, 0);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:t[0]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:n?`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      int r = index / outShape[1];
      int c = index - r * outShape[1];
      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      int r = index / ${t[1]};
      int c = index - r * ${t[1]};
      return ivec2(r, c);
    }
  `}function Bd(t){return`offset${t}`}function Dze(t){const e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1),r=As();return`
    vec4 ${n}() {
      return ${r.texture2D}(${e}, halfCR);
    }
  `}function Oze(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`float ${r}() {return ${n};}`;const[s,i]=t.shapeInfo.texShape;if(s===1&&i===1)return`
      float ${r}() {
        return sampleTexture(${n}, halfCR);
      }
    `;const o=Bd(n);if(e)return`
    float ${r}() {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], ${o});
      return sampleTexture(${n}, uv);
    }
  `;const[a,l]=t.shapeInfo.texShape;return`
    float ${r}() {
      vec2 uv = uvFromFlat(${a}, ${l}, ${o});
      return sampleTexture(${n}, uv);
    }
  `}function Lze(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),s=t.shapeInfo.texShape,i=As();if(e)return`
    vec4 ${r}(int index) {
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      vec2 uv = packedUVfrom1D(
        packedTexShape[0], packedTexShape[1], index);
      return ${i.texture2D}(${n}, uv);
    }
  `;const o=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)];return`
    vec4 ${r}(int index) {
      vec2 uv = packedUVfrom1D(
        ${o[0]}, ${o[1]}, index);
      return ${i.texture2D}(${n}, uv);
    }
  `}function Mze(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`
      float ${r}(int index) {
        ${um(t)}
      }
    `;const s=t.shapeInfo.texShape,i=s[0],o=s[1];if(o===1&&i===1)return`
      float ${r}(int index) {
        return sampleTexture(${n}, halfCR);
      }
    `;const a=Bd(n);return o===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / float(${n}TexShape[0]));
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / ${i}.0);
        return sampleTexture(${n}, uv);
      }
    `:i===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${a}) + 0.5) / float(${n}TexShape[1]), 0.5);
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${a}) + 0.5) / ${o}.0, 0.5);
        return sampleTexture(${n}, uv);
      }
    `:e?`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], index + ${a});
      return sampleTexture(${n}, uv);
    }
  `:`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${i}, ${o}, index + ${a});
      return sampleTexture(${n}, uv);
    }
  `}function zze(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t.shapeInfo.texShape,o=i[0],a=i[1],l=As();if(i!=null&&Zt(n,i))return e?`
      vec4 ${s}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);

        return ${l.texture2D}(${r}, uv);
      }
    `:`
      vec4 ${s}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${a}.0, ${o}.0);

        return ${l.texture2D}(${r}, uv);
      }
    `;if(e)return`
    vec4 ${s}(int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `;const c=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)],u=Math.ceil(n[1]/2);return`
    vec4 ${s}(int row, int col) {
      vec2 uv = packedUVfrom2D(${u}, ${c[0]}, ${c[1]}, row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `}function Fze(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t.shapeInfo.texShape;if(i!=null&&Zt(n,i)){if(e)return`
      float ${s}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `;const m=i[0],p=i[1];return`
    float ${s}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${p}.0, ${m}.0);
      return sampleTexture(${r}, uv);
    }
  `}const{newShape:o,keptDims:a}=Jc(n),l=o;if(l.length<n.length){const m=dm(t,l),p=["row","col"];return`
      ${cm(m,e)}
      float ${s}(int row, int col) {
        return ${s}(${hm(p,a)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${s}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${n[1]}, 1)));
        ${um(t)}
      }
    `;const c=i[0],u=i[1],h=Bd(r);return u===1?e?`
      float ${s}(int row, int col) {
        float index = dot(vec3(row, col, ${h}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2(0.5, (index + 0.5) / float(${r}TexShape[0]));
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${s}(int row, int col) {
      float index = dot(vec3(row, col, ${h}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${c}.0);
      return sampleTexture(${r}, uv);
    }
  `:c===1?e?`
      float ${s}(int row, int col) {
        float index = dot(vec3(row, col, ${h}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2((index + 0.5) / float(${r}TexShape[1]), 0.5);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${s}(int row, int col) {
      float index = dot(vec3(row, col, ${h}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${u}.0, 0.5);
      return sampleTexture(${r}, uv);
    }
  `:e?`
      float ${s}(int row, int col) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${r}Shape[1] + col + ${h};
        vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
        return sampleTexture(${r}, uv);
      }
    `:`
  float ${s}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${n[1]} + col + ${h};
    vec2 uv = uvFromFlat(${c}, ${u}, index);
    return sampleTexture(${r}, uv);
  }
`}function Bze(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t.shapeInfo.texShape,o=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];if(n[0]===1){const m=n.slice(1),p=[1,2],y=dm(t,m),v=["b","row","col"];return`
        ${hW(y,e)}
        vec4 ${s}(int b, int row, int col) {
          return ${s}(${hm(v,p)});
        }
      `}const a=As();if(e)return`
    vec4 ${s}(int b, int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[2]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom3D(
        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);
      return ${a.texture2D}(${r}, uv);
    }
  `;const l=o[0],c=o[1],u=Math.ceil(n[2]/2),h=u*Math.ceil(n[1]/2);return`
    vec4 ${s}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${l}, ${c}, ${h}, ${u}, b, row, col);
      return ${a.texture2D}(${r}, uv);
    }
  `}function Vze(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[1]*n[2],o=n[2],{newShape:a,keptDims:l}=Jc(n),c=a;if(c.length<n.length){const v=dm(t,c),x=["row","col","depth"];return`
        ${cm(v,e)}
        float ${s}(int row, int col, int depth) {
          return ${s}(${hm(x,l)});
        }
      `}if(t.shapeInfo.isUniform)return`
      float ${s}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${i}, ${o}, 1)));
        ${um(t)}
      }
    `;const u=t.shapeInfo.texShape,h=u[0],m=u[1],p=t.shapeInfo.flatOffset;if(m===i&&p==null)return e?`
      float ${s}(int row, int col, int depth) {
        int stride1 = ${r}Shape[2];
        float texR = float(row);
        float texC = dot(vec2(col, depth), vec2(stride1, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
        float ${s}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${o}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${m}.0, ${h}.0);
          return sampleTexture(${r}, uv);
        }
      `;if(m===o&&p==null)return e?`
      float ${s}(int row, int col, int depth) {
        float texR = dot(vec2(row, col), vec2(${r}Shape[1], 1));
        float texC = float(depth);
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${s}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${n[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${m}.0, ${h}.0);
      return sampleTexture(${r}, uv);
    }
  `;const y=Bd(r);return e?`
    float ${s}(int row, int col, int depth) {
      // Explicitly use integer operations as dot() only works on floats.
      int stride0 = ${r}Shape[1] * ${r}Shape[2];
      int stride1 = ${r}Shape[2];
      int index = row * stride0 + col * stride1 + depth + ${y};
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
      return sampleTexture(${r}, uv);
    }
    `:`
      float ${s}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${i} + col * ${o} + depth + ${y};
        vec2 uv = uvFromFlat(${h}, ${m}, index);
        return sampleTexture(${r}, uv);
      }
  `}function jze(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),s=As();if(e)return`
    vec4 ${r}(int b2, int b, int row, int col) {
      int valuesPerRow = int(ceil(float(${n}Shape[3]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${n}Shape[2]) / 2.0));
      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);
      texelsInBatch *= ${n}Shape[1];
      index = b2 * texelsInBatch + index;
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      int texR = index / packedTexShape[1];
      int texC = index - texR * packedTexShape[1];
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${s.texture2D}(${n}, uv);
    }
  `;const i=t.shapeInfo.logicalShape,o=i.length,a=t.shapeInfo.texShape,l=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],c=l[0],u=l[1],h=Math.ceil(i[o-1]/2);let m=h*Math.ceil(i[o-2]/2),p="int b, int row, int col",y=`b * ${m} + (row / 2) * ${h} + (col / 2)`;for(let v=2;v<o-1;v++)p=`int b${v}, `+p,m*=i[o-v-1],y=`b${v} * ${m} + `+y;return`
    vec4 ${r}(${p}) {
      int index = ${y};
      int texR = index / ${u};
      int texC = index - texR * ${u};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${u}, ${c});
      return ${s.texture2D}(${n}, uv);
    }
  `}function Uze(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[3],o=n[2]*i,a=n[1]*o,{newShape:l,keptDims:c}=Jc(n);if(l.length<n.length){const w=dm(t,l),E=["row","col","depth","depth2"];return`
      ${cm(w,e)}
      float ${s}(int row, int col, int depth, int depth2) {
        return ${s}(${hm(E,c)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${s}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${a}, ${o}, ${i}, 1)));
        ${um(t)}
      }
    `;const u=t.shapeInfo.flatOffset,h=t.shapeInfo.texShape,m=h[0],p=h[1],y=`int stride2 = ${r}Shape[3];`,v=`int stride1 = ${r}Shape[2] * stride2;`,x=`int stride0 = ${r}Shape[1] * stride1;`;if(p===a&&u==null)return e?`
      float ${s}(int row, int col, int depth, int depth2) {
        ${y}
        ${v}
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(stride1, stride2, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${s}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${o}, ${i}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${p}.0, ${m}.0);
        return sampleTexture(${r}, uv);
      }
    `;if(p===i&&u==null)return e?`
      float ${s}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${r}Shape[1] * ${r}Shape[2], ${r}Shape[2], 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${s}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${n[1]*n[2]}, ${n[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${p}.0, ${m}.0);
        return sampleTexture(${r}, uv);
      }
    `;const b=Bd(r);return e?`
    float ${s}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      ${y}
      ${v}
      ${x}
      int index = row * stride0 + col * stride1 +
          depth * stride2 + depth2;
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index + ${b});
      return sampleTexture(${r}, uv);
    }
  `:`
    float ${s}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${a} + col * ${o} +
          depth * ${i} + depth2;
      vec2 uv = uvFromFlat(${m}, ${p}, index + ${b});
      return sampleTexture(${r}, uv);
    }
  `}function Hze(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),s=e[4],i=e[3]*s,o=e[2]*i,a=e[1]*o,{newShape:l,keptDims:c}=Jc(e);if(l.length<e.length){const v=dm(t,l),x=["row","col","depth","depth2","depth3"];return`
      ${cm(v)}
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        return ${r}(${hm(x,c)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${a}, ${o}, ${i}, ${s})) +
          depth3;
        ${um(t)}
      }
    `;const u=t.shapeInfo.flatOffset,h=t.shapeInfo.texShape,m=h[0],p=h[1];if(p===a&&u==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${o}, ${i}, ${s}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${p}.0, ${m}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(p===s&&u==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]},
               ${e[2]*e[3]}, ${e[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${p}.0, ${m}.0);
        return sampleTexture(${n}, uv);
      }
    `;const y=Bd(n);return`
    float ${r}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${a} + col * ${o} + depth * ${i} +
          depth2 * ${s} + depth3 + ${y};
      vec2 uv = uvFromFlat(${m}, ${p}, index);
      return sampleTexture(${n}, uv);
    }
  `}function Gze(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:s,keptDims:i}=Jc(e);if(s.length<e.length){const x=dm(t,s),b=["row","col","depth","depth2","depth3","depth4"];return`
      ${cm(x)}
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${r}(${hm(b,i)});
      }
    `}const o=e[5],a=e[4]*o,l=e[3]*a,c=e[2]*l,u=e[1]*c;if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${u}, ${c}, ${l}, ${a})) +
          dot(
            vec2(depth3, depth4),
            vec2(${o}, 1)));
        ${um(t)}
      }
    `;const h=t.shapeInfo.flatOffset,m=t.shapeInfo.texShape,p=m[0],y=m[1];if(y===u&&h==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${c}, ${l}, ${a}, ${o})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${y}.0, ${p}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(y===o&&h==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]*e[4]},
               ${e[2]*e[3]*e[4]},
               ${e[3]*e[4]},
               ${e[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${y}.0, ${p}.0);
        return sampleTexture(${n}, uv);
      }
    `;const v=Bd(n);return`
    float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${u} + col * ${c} + depth * ${l} +
          depth2 * ${a} + depth3 * ${o} + depth4 + ${v};
      vec2 uv = uvFromFlat(${p}, ${y}, index);
      return sampleTexture(${n}, uv);
    }
  `}function um(t){const e=t.name,n=pe(t.shapeInfo.logicalShape);return n<2?`return ${e};`:`
    for (int i = 0; i < ${n}; i++) {
      if (i == index) {
        return ${e}[i];
      }
    }
  `}function Wze(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),s="get"+r+"AtOutCoords",i=t.shapeInfo.logicalShape.length,o=e.logicalShape.length,a=dW(t.shapeInfo.logicalShape,e.logicalShape),l=cn(o),c=o-i;let u;const h=["x","y","z","w","u","v"];i===0?u="":o<2&&a.length>=1?u="coords = 0;":u=a.map(w=>`coords.${h[w+c]} = 0;`).join(`
`);let m="";o<2&&i>0?m="coords":m=t.shapeInfo.logicalShape.map((w,E)=>`coords.${h[E+c]}`).join(", ");let p="return outputValue;";const v=pe(t.shapeInfo.logicalShape)===1,b=pe(e.logicalShape)===1;if(i===1&&!v&&!b)p=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(v&&!b)o===1?p=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:p=`
        return vec4(outputValue.x);
      `;else if(a.length){const w=i-2,E=i-1;a.indexOf(w)>-1&&a.indexOf(E)>-1?p="return vec4(outputValue.x);":a.indexOf(w)>-1?p="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":a.indexOf(E)>-1&&(p="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${s}() {
      ${l} coords = getOutputCoords();
      ${u}
      vec4 outputValue = get${r}(${m});
      ${p}
    }
  `}function qze(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),s="get"+r+"AtOutCoords",i=e.texShape,o=t.shapeInfo.texShape,a=t.shapeInfo.logicalShape.length,l=e.logicalShape.length;if(!t.shapeInfo.isUniform&&a===l&&t.shapeInfo.flatOffset==null&&Zt(o,i))return`
      float ${s}() {
        return sampleTexture(${n}, resultUV);
      }
    `;const c=cn(l),u=dW(t.shapeInfo.logicalShape,e.logicalShape),h=l-a;let m;const p=["x","y","z","w","u","v"];a===0?m="":l<2&&u.length>=1?m="coords = 0;":m=u.map(v=>`coords.${p[v+h]} = 0;`).join(`
`);let y="";return l<2&&a>0?y="coords":y=t.shapeInfo.logicalShape.map((v,x)=>`coords.${p[x+h]}`).join(", "),`
    float ${s}() {
      ${c} coords = getOutputCoords();
      ${m}
      return get${r}(${y});
    }
  `}function cn(t){if(t<=1)return"int";if(t===2)return"ivec2";if(t===3)return"ivec3";if(t===4)return"ivec4";if(t===5)return"ivec5";if(t===6)return"ivec6";throw Error(`GPU for rank ${t} is not yet supported`)}function K3(t,e,n){const{newShape:r,keptDims:s}=Jc(e),i=e.length,o=t&&i===3&&e[0]===1,a=o?e.slice(1):r,l=!t&&i>1&&!Zt(e,n)&&r.length<i||o;return{useSqueezeShape:l,uniformShape:l?a:e,keptDims:s}}function dm(t,e){const n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=e,n}function hm(t,e){return e.map(n=>t[n]).join(", ")}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kze(t,e,n,r){const s=n.map((u,h)=>{const m={logicalShape:u.shape,texShape:u.isUniform?null:u.texData.texShape,isUniform:u.isUniform,isPacked:u.isUniform?!1:u.texData.isPacked,flatOffset:null};return u.texData!=null&&u.texData.slice!=null&&u.texData.slice.flatOffset>0&&(m.flatOffset=u.texData.slice.flatOffset),{name:e.variableNames[h],shapeInfo:m}}),i=s.map(u=>u.shapeInfo),o={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},a=hze(s,o,e),l=VMe(t.gl,a),c=t.createProgram(l);return de().get("ENGINE_COMPILE_ONLY")?{program:e,fragmentShader:l,source:a,webGLProgram:c,inShapeInfos:i,outShapeInfo:o,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(t.buildVao(c),Object.assign({program:e,fragmentShader:l,source:a,webGLProgram:c,inShapeInfos:i,outShapeInfo:o},mW(t,e,c)))}function mW(t,e,n){const r=[],s=[];let i,o,a,l=null,c=null;c=t.getUniformLocation(n,"NAN",!1),de().getNumber("WEBGL_VERSION")===1&&(l=t.getUniformLocation(n,"INFINITY",!1));const u=!1;for(const h of e.variableNames){const m={name:h,uniform:t.getUniformLocation(n,h,u),offset:t.getUniformLocation(n,`offset${h}`,u)};e.enableShapeUniforms&&(m.shape=t.getUniformLocation(n,`${h}Shape`,u),m.texShape=t.getUniformLocation(n,`${h}TexShape`,u)),r.push(m)}if(e.enableShapeUniforms&&(i=t.getUniformLocation(n,"outShape",u),a=t.getUniformLocation(n,"outShapeStrides",u),o=t.getUniformLocation(n,"outTexShape",u)),e.customUniforms)for(const h of e.customUniforms)s.push(t.getUniformLocation(n,h.name,u));return{variablesLocations:r,customUniformLocations:s,infLoc:l,nanLoc:c,outShapeLocation:i,outShapeStridesLocation:a,outTexShapeLocation:o}}function WM(t,e){if(t.length!==e.length)throw Error(`Binary was compiled with ${t.length} inputs, but was executed with ${e.length} inputs`);t.forEach((n,r)=>{const s=n.logicalShape,i=e[r],o=i.shape;if(!Zt(s,o))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${s} and ${o} must match`);if(n.isUniform&&i.isUniform)return;const a=n.texShape,l=i.isUniform?null:i.texData.texShape;if(!Zt(a,l))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${a} and ${l} must match`)})}function Zze(t,e,n,r,s){e.program.enableShapeUniforms||(WM(e.inShapeInfos,n),WM([e.outShapeInfo],[r]));const i=r.texData.texture,o=r.texData.texShape;r.texData.isPacked?t.setOutputPackedMatrixTexture(i.texture,o[0],o[1]):t.setOutputMatrixTexture(i.texture,o[0],o[1]),t.setProgram(e.webGLProgram),t.bindVertexArray(e.webGLProgram.vao),de().getNumber("WEBGL_VERSION")===1&&e.infLoc!==null&&t.gl.uniform1f(e.infLoc,1/0),e.nanLoc!==null&&t.gl.uniform1f(e.nanLoc,NaN);for(let l=0;l<n.length;++l){const c=n[l],{uniform:u,offset:h,shape:m,texShape:p}=e.variablesLocations[l];if(m){const{uniformShape:y}=K3(e.program.packedInputs,c.shape,c.texData.texShape);switch(y.length){case 1:t.gl.uniform1iv(m,new Int32Array(y));break;case 2:t.gl.uniform2iv(m,new Int32Array(y));break;case 3:t.gl.uniform3iv(m,new Int32Array(y));break;case 4:t.gl.uniform4iv(m,new Int32Array(y));break}}if(p&&t.gl.uniform2i(p,c.texData.texShape[0],c.texData.texShape[1]),u!=null){if(c.isUniform){if(pe(c.shape)<2)t.gl.uniform1f(u,c.uniformValues[0]);else{let y=c.uniformValues;y instanceof Float32Array||(y=new Float32Array(y)),t.gl.uniform1fv(u,y)}continue}c.texData.slice!=null&&h!=null&&t.gl.uniform1i(h,c.texData.slice.flatOffset),t.setInputMatrixTexture(c.texData.texture.texture,u,l)}}const a=e.outShapeLocation;if(a)switch(r.shape.length){case 1:t.gl.uniform1iv(a,new Int32Array(r.shape));break;case 2:t.gl.uniform2iv(a,new Int32Array(r.shape));break;case 3:t.gl.uniform3iv(a,new Int32Array(r.shape));break;case 4:t.gl.uniform4iv(a,new Int32Array(r.shape));break}if(e.outShapeStridesLocation){const l=qe(r.shape);switch(r.shape.length){case 2:t.gl.uniform1iv(e.outShapeStridesLocation,new Int32Array(l));break;case 3:t.gl.uniform2iv(e.outShapeStridesLocation,new Int32Array(l));break;case 4:t.gl.uniform3iv(e.outShapeStridesLocation,new Int32Array(l));break}}if(e.outTexShapeLocation&&t.gl.uniform2i(e.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),e.program.customUniforms&&s)for(let l=0;l<e.program.customUniforms.length;++l){const c=e.program.customUniforms[l],u=e.customUniformLocations[l],h=s[l];if(c.type==="float")t.gl.uniform1fv(u,h);else if(c.type==="vec2")t.gl.uniform2fv(u,h);else if(c.type==="vec3")t.gl.uniform3fv(u,h);else if(c.type==="vec4")t.gl.uniform4fv(u,h);else if(c.type==="int")t.gl.uniform1iv(u,h);else if(c.type==="ivec2")t.gl.uniform2iv(u,h);else if(c.type==="ivec3")t.gl.uniform3iv(u,h);else if(c.type==="ivec4")t.gl.uniform4iv(u,h);else throw Error(`uniform type ${c.type} is not supported yet.`)}t.executeProgram()}function Xze(t,e,n){let r="";e.concat(n).forEach(o=>{const a=o.texData!=null&&o.texData.slice!=null&&o.texData.slice.flatOffset>0;if(t.enableShapeUniforms&&!o.isUniform){const l=o.texData.texShape,{useSqueezeShape:c,uniformShape:u,keptDims:h}=K3(t.packedInputs,o.shape,l);let m="",p="",y="";if(u.length===1&&t.packedInputs){const C=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)];m=`${C[0]>1}_${C[1]>1}`}else if(u.length===2&&!t.packedInputs)p=`${u[0]>1}_${u[1]>1}`;else if(u.length>2&&!t.packedInputs){const C=qe(u);y=`${C[0]===l[1]}_${C[C.length-1]===l[1]}`}const v=o.shape.length,x=u.length===2&&Zt(o.shape,l),b=pe(o.shape)===1,w=_f(o.shape,n.shape),E=!t.packedInputs&&v===n.shape.length&&Zt(l,n.texData.texShape),N=t.packedInputs||u.length>2?"":`${l[0]>1}_${l[1]>1}`;r+=`${v}_${E}_${c?h:""}_${u.length}_${b}_${w}_${x}_${m}_${p}_${y}_${N}_${a}`}else{const l=o.isUniform?"uniform":o.texData.texShape;r+=`${o.shape}_${l}_${a}`}});const s=t.userCode;let i=t.constructor.name;return i+="_"+r+"_"+s+`${de().getNumber("WEBGL_VERSION")}`,i}function ms(t){return de().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&t<=4}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Yze{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=Sg.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=As();this.outputShape=e,this.enableShapeUniforms=ms(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?b2(["r","c","d"],e):Fd(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Jze{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=Sg.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=As();this.outputShape=e,this.enableShapeUniforms=ms(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?b2(["r","c","d"],e):Fd(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Qze{constructor(e){this.variableNames=["A"],this.outTexUsage=Si.DOWNLOAD;const n=As();this.outputShape=e,this.userCode=`
      ${uW}

      void main() {
        float x = getAAtOutCoords();
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class eFe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=Si.DOWNLOAD;const n=As();this.outputShape=e,this.userCode=`
      ${uW}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tFe={R:0,G:1,B:2,A:3};class qM{constructor(e,n=!1,r="RGBA"){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const s=As();this.outputShape=e,this.enableShapeUniforms=ms(this.outputShape.length);let i="result";n&&(i="floor(result * 255. + 0.5)");let o="";for(let a=0;a<r.length;a++){const l=r[a];o+=`
          if(offset == ${a}) {
            result = values[${tFe[l]}];
          }`}this.userCode=`
      ${this.enableShapeUniforms?q3():W3(e)}

      void main() {
        ivec3 coords = getOutputCoords();
        int flatIndex = getFlatIndex(coords);
        float result = 0.;
        int offset = imod(flatIndex, ${r.length});

        flatIndex = idiv(flatIndex, ${r.length}, 1.);

        int r = flatIndex / texShape[1];
        if (r < texShape[0]) {
          int c = imod(flatIndex, texShape[1]);
          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
          vec4 values = ${s.texture2D}(A, uv);
          ${o}
        }
        ${s.output} = vec4(${i}, 0., 0., 0.);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class nFe{constructor(e,n=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const r=As();this.outputShape=e,this.enableShapeUniforms=ms(this.outputShape.length);let s="",i="result";n&&(i="floor(result * 255. + 0.5)");for(let o=0;o<=1;o++)for(let a=0;a<=1;a++){const l=o*2+a;s+=`
          localCoords = coords;
          if(localCoords[2] + ${a} < ${this.enableShapeUniforms?"outShape[2]":`${e[2]}`}) {
          localCoords[2] += ${a};
          if (localCoords[1] + ${o} < ${this.enableShapeUniforms?"outShape[1]":`${e[1]}`}) {
            localCoords[1] += ${o};

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = ${r.texture2D}(A, uv);

            if (offset == 0) {
              result[${l}] = values[0];
            } else if (offset == 1) {
              result[${l}] = values[1];
            } else if (offset == 2) {
              result[${l}] = values[2];
            } else {
              result[${l}] = values[3];
            }
          }
        }
        `}this.userCode=`
        ${this.enableShapeUniforms?q3():W3(e)}

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          ${s}

          ${r.output} = ${i};
        }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rFe(t){const e=As(),n=`${e.version}
    precision highp float;
    ${e.attribute} vec3 clipSpacePos;
    ${e.attribute} vec2 uv;
    ${e.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return BMe(t,n)}function sFe(t){const e=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return GMe(t,e)}function iFe(t){const e=new Uint16Array([0,1,2,2,1,3]);return WMe(t,e)}function _y(t,e,n,r,s,i){KMe(e,n);const o=qMe(t),a=t.TEXTURE_2D;return Le(t,()=>t.bindTexture(a,o)),Le(t,()=>t.texParameteri(a,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)),Le(t,()=>t.texParameteri(a,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),Le(t,()=>t.texParameteri(a,t.TEXTURE_MIN_FILTER,t.NEAREST)),Le(t,()=>t.texParameteri(a,t.TEXTURE_MAG_FILTER,t.NEAREST)),de().getNumber("WEBGL_VERSION")===1?Le(t,()=>t.texImage2D(a,0,r,e,n,0,s,i,null)):Le(t,()=>t.texStorage2D(a,1,r,e,n)),Le(t,()=>t.bindTexture(t.TEXTURE_2D,null)),{texture:o,texShape:[n,e]}}function pW(t){return t.internalFormatFloat}function oFe(t,e,n,r){const[s,i]=Ny(e,n);return _y(t,s,i,pW(r),r.textureFormatFloat,t.FLOAT)}function gW(t){return t.internalFormatHalfFloat}function aFe(t,e,n,r){const[s,i]=Ny(e,n);return _y(t,s,i,gW(r),r.textureFormatFloat,r.textureTypeHalfFloat)}function yW(t){return t.downloadTextureFormat}function lFe(t,e,n,r){const[s,i]=Ny(e,n);return _y(t,s,i,yW(r),t.RGBA,t.UNSIGNED_BYTE)}function bW(t){return t.internalFormatPackedFloat}function cFe(t,e,n,r){const[s,i]=lm(e,n);return _y(t,s,i,bW(r),t.RGBA,t.FLOAT)}function vW(t){return t.internalFormatPackedHalfFloat}function uFe(t,e,n,r){const[s,i]=lm(e,n);return _y(t,s,i,vW(r),t.RGBA,r.textureTypeHalfFloat)}function dFe(t,e,n){return Le(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),UM(t,e,"clipSpacePos",n,3,20,0)&&UM(t,e,"uv",n,2,20,12)}function hFe(t,e,n,r,s,i){Le(t,()=>t.bindTexture(t.TEXTURE_2D,e));let o,a,l;s instanceof Uint8Array?(o=new Uint8Array(n*r*4),a=t.UNSIGNED_BYTE,l=t.RGBA):(o=new Float32Array(n*r*4),a=t.FLOAT,l=i.internalFormatPackedFloat),o.set(s),de().getNumber("WEBGL_VERSION")===2?Le(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n,r,t.RGBA,a,o)):Le(t,()=>t.texImage2D(t.TEXTURE_2D,0,l,n,r,0,t.RGBA,a,o)),Le(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function fFe(t,e,n){Le(t,()=>t.bindTexture(t.TEXTURE_2D,e)),n.data instanceof Uint8Array?de().getNumber("WEBGL_VERSION")===2?Le(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n.width,n.height,t.RGBA,t.UNSIGNED_BYTE,n.data)):Le(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n.width,n.height,0,t.RGBA,t.UNSIGNED_BYTE,n.data)):de().getNumber("WEBGL_VERSION")===2?Le(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,n)):Le(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n)),Le(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function mFe(t,e,n,r){const s=t.createBuffer();Le(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,s));const a=4*4*e*n;return Le(t,()=>t.bufferData(t.PIXEL_PACK_BUFFER,a,t.STREAM_READ)),Le(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,0)),Le(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,null)),s}function pFe(t,e,n){const r=t,s=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,e),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,s),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),s}function gFe(t,e,n,r){const[s,i]=Ny(e,n),o=4,a=new Uint8Array(PMe(e*n,o));return Le(t,()=>t.readPixels(0,0,s,i,r.downloadTextureFormat,t.UNSIGNED_BYTE,a)),new Float32Array(a.buffer)}function yFe(t,e,n,r,s,i,o,a){const l=t,c=new Float32Array(DMe(i,o));return l.bindBuffer(l.PIXEL_PACK_BUFFER,e),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,c),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),c}function bFe(t,e,n){const r=new Float32Array(e*n*4);return Le(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,r)),r}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Vk{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];const n=de().getNumber("WEBGL_VERSION");if(e!=null?(this.gl=e,IMe(n,e)):this.gl=Xo(n),e=this.gl,de().getNumber("WEBGL_VERSION")===2){const i=e;this.createVertexArray=()=>Le(i,()=>i.createVertexArray()),this.bindVertexArray=o=>Le(i,()=>i.bindVertexArray(o)),this.deleteVertexArray=o=>Le(i,()=>i.deleteVertexArray(o)),this.getVertexArray=()=>Le(i,()=>i.getParameter(i.VERTEX_ARRAY_BINDING))}else if(e!=null){const i=e.getExtension("OES_vertex_array_object");if(i==null)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>Le(e,()=>i.createVertexArrayOES()),this.bindVertexArray=o=>Le(e,()=>i.bindVertexArrayOES(o)),this.deleteVertexArray=o=>Le(e,()=>i.deleteVertexArrayOES(o)),this.getVertexArray=()=>Le(e,()=>e.getParameter(i.VERTEX_ARRAY_BINDING_OES))}let r="WEBGL_color_buffer_float";const s="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),de().getNumber("WEBGL_VERSION")===1){const i="OES_texture_float",o="OES_texture_half_float";if(this.textureFloatExtension=Xb(this.gl,i),uo(this.gl,o))this.textureHalfFloatExtension=Xb(this.gl,o);else if(de().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),uo(this.gl,s))this.colorBufferHalfFloatExtension=Xb(this.gl,s);else if(de().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",uo(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else if(uo(this.gl,s))this.colorBufferHalfFloatExtension=this.gl.getExtension(s);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=sFe(this.gl),this.indexBuffer=iFe(this.gl),this.framebuffer=ZMe(this.gl),this.textureConfig=G3(this.gl,this.textureHalfFloatExtension)}get debug(){return de().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;Le(e,()=>e.finish()),Le(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),Le(e,()=>e.deleteFramebuffer(this.framebuffer)),Le(e,()=>e.bindBuffer(e.ARRAY_BUFFER,null)),Le(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),Le(e,()=>e.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(e,n){return this.throwIfDisposed(),oFe(this.gl,e,n,this.textureConfig)}createFloat16MatrixTexture(e,n){return this.throwIfDisposed(),aFe(this.gl,e,n,this.textureConfig)}createUnsignedBytesMatrixTexture(e,n){return this.throwIfDisposed(),lFe(this.gl,e,n,this.textureConfig)}uploadPixelDataToTexture(e,n){this.throwIfDisposed(),fFe(this.gl,e,n)}uploadDenseMatrixToTexture(e,n,r,s){this.throwIfDisposed(),hFe(this.gl,e,n,r,s,this.textureConfig)}createFloat16PackedMatrixTexture(e,n){return this.throwIfDisposed(),uFe(this.gl,e,n,this.textureConfig)}createPackedMatrixTexture(e,n){return this.throwIfDisposed(),cFe(this.gl,e,n,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(HM(this.gl,this.framebuffer),this.outputTexture=null),Le(this.gl,()=>this.gl.deleteTexture(e))}downloadByteEncodedFloatMatrixFromOutputTexture(e,n,r){return this.downloadMatrixDriver(e,()=>gFe(this.gl,n,r,this.textureConfig))}downloadPackedMatrixFromBuffer(e,n,r,s,i,o){return yFe(this.gl,e,n,r,s,i,o,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,n){return pFe(this.gl,e,n)}createBufferFromTexture(e,n,r){this.bindTextureToFrameBuffer(e);const s=mFe(this.gl,n,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),s}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let n,r;if(de().getBool("WEBGL_FENCE_API_ENABLED")){const s=e,i=s.fenceSync(s.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),r=()=>{const o=s.clientWaitSync(i,0,0);return o===s.ALREADY_SIGNALED||o===s.CONDITION_SATISFIED},n=i}else de().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),r=()=>this.isQueryAvailable(n,de().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):r=()=>!0;return{query:n,isFencePassed:r}}downloadMatrixFromPackedTexture(e,n,r){return this.downloadMatrixDriver(e,()=>bFe(this.gl,n,r))}createProgram(e){this.throwIfDisposed();const n=this.gl;this.vertexShader==null&&(this.vertexShader=rFe(n));const r=UMe(n);Le(n,()=>n.attachShader(r,this.vertexShader)),Le(n,()=>n.attachShader(r,e)),HMe(n,r);const s=Object.assign(r,{vao:this.createVertexArray()});return this.debug&&Mk(n,s),s}buildVao(e){this.setProgram(e),this.bindVertexArray(e.vao);const n=this.gl;Le(n,()=>n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),dFe(n,e,this.vertexBuffer)}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),e!=null&&(Le(this.gl,()=>this.gl.deleteProgram(e)),this.deleteVertexArray(e.vao))}setProgram(e){this.throwIfDisposed(),this.program=e,this.program!=null&&this.debug&&Mk(this.gl,this.program),Le(this.gl,()=>this.gl.useProgram(e))}getUniformLocation(e,n,r=!0){return this.throwIfDisposed(),r?YMe(this.gl,e,n):JMe(this.gl,e,n)}getAttributeLocation(e,n){return this.throwIfDisposed(),Le(this.gl,()=>this.gl.getAttribLocation(e,n))}getUniformLocationNoThrow(e,n){return this.throwIfDisposed(),this.gl.getUniformLocation(e,n)}setInputMatrixTexture(e,n,r){this.throwIfDisposed(),this.throwIfNoProgram(),QMe(this.gl,e,n,r)}setOutputMatrixTexture(e,n,r){this.setOutputMatrixTextureDriver(e,r,n)}setOutputPackedMatrixTexture(e,n,r){this.throwIfDisposed();const[s,i]=lm(n,r);this.setOutputMatrixTextureDriver(e,s,i)}setOutputMatrixWriteRegion(e,n,r,s){this.setOutputMatrixWriteRegionDriver(r,e,s,n)}setOutputPackedMatrixWriteRegion(e,n,r,s){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&Mk(this.gl,this.program),Yb(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;if(this.debug){const n=this.getVertexArray();console.assert(n===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}Le(e,()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),Le(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=Xb(this.gl,de().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(de().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const r=this.gl,s=this.getQueryTimerExtensionWebGL2(),i=r.createQuery();return r.beginQuery(s.TIME_ELAPSED_EXT,i),i}const e=this.getQueryTimerExtensionWebGL1(),n=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,n),n}endQuery(){if(de().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const n=this.gl,r=this.getQueryTimerExtensionWebGL2();n.endQuery(r.TIME_ELAPSED_EXT);return}const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await DL(()=>this.disposed||this.isQueryAvailable(e,de().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(e,de().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,n){if(n===0)return null;if(n===2){const r=this.gl;return r.getQueryParameter(e,r.QUERY_RESULT)/1e6}else{const r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,n){if(n===0)return!0;if(n===2){const r=this.gl,s=this.getQueryTimerExtensionWebGL2(),i=r.getQueryParameter(e,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(s.GPU_DISJOINT_EXT)),i&&!this.disjoint}else{const r=this.getQueryTimerExtensionWebGL1(),s=r.getQueryObjectEXT(e,r.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),s&&!this.disjoint}}pollFence(e){return new Promise(n=>{this.addItemToPoll(()=>e.isFencePassed(),()=>n())})}pollItems(){const e=vFe(this.itemsToPoll.map(n=>n.isDoneFn));for(let n=0;n<=e;++n){const{resolveFn:r}=this.itemsToPoll[n];r()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,n){if(this.itemsToPoll.push({isDoneFn:e,resolveFn:n}),this.itemsToPoll.length>1)return;let r;"setTimeoutCustom"in de().platform&&(r=de().platform.setTimeoutCustom.bind(de().platform)),DL(()=>(this.pollItems(),this.itemsToPoll.length===0),()=>0,null,r)}bindTextureToFrameBuffer(e){this.throwIfDisposed(),zk(this.gl,e,this.framebuffer),this.debug&&Yb(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(zk(this.gl,this.outputTexture,this.framebuffer),this.debug&&Yb(this.gl)):HM(this.gl,this.framebuffer)}downloadMatrixDriver(e,n){this.bindTextureToFrameBuffer(e);const r=n();return this.unbindTextureToFrameBuffer(),r}setOutputMatrixTextureDriver(e,n,r){this.throwIfDisposed();const s=this.gl;zk(s,e,this.framebuffer),this.debug&&Yb(s),this.outputTexture=e,Le(s,()=>s.viewport(0,0,n,r)),Le(s,()=>s.scissor(0,0,n,r))}setOutputMatrixWriteRegionDriver(e,n,r,s){this.throwIfDisposed(),Le(this.gl,()=>this.gl.scissor(e,n,r,s))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}}function vFe(t){let e=0;for(;e<t.length&&t[e]();++e);return e-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{addImpl:xFe,bincountImpl:xW,bincountReduceImpl:wFe,bitwiseAndImpl:EFe,castImpl:kFe,ceilImpl:NFe,concatImpl:CFe,equalImpl:_Fe,expImpl:SFe,expm1Impl:TFe,floorImpl:$Fe,gatherNdImpl:IFe,gatherV2Impl:AFe,greaterImpl:RFe,greaterEqualImpl:PFe,lessImpl:DFe,lessEqualImpl:OFe,linSpaceImpl:LFe,logImpl:MFe,maxImpl:zFe,maximumImpl:FFe,minimumImpl:BFe,multiplyImpl:VFe,negImpl:jFe,notEqualImpl:UFe,prodImpl:HFe,raggedGatherImpl:GFe,raggedRangeImpl:WFe,raggedTensorToTensorImpl:qFe,rangeImpl:KFe,rsqrtImpl:ZFe,scatterImpl:XFe,sigmoidImpl:YFe,simpleAbsImpl:wW,sliceImpl:JFe,sparseFillEmptyRowsImpl:QFe,sparseReshapeImpl:e5e,sparseSegmentReductionImpl:EW,sqrtImpl:t5e,staticRegexReplaceImpl:n5e,stridedSliceImpl:r5e,stringNGramsImpl:s5e,stringSplitImpl:i5e,stringToHashBucketFastImpl:o5e,subImpl:a5e,tileImpl:l5e,topKImpl:c5e,transposeImpl:Z3,uniqueImpl:u5e}=fPe;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kW(t,e){return["x","y","z","w","u","v"].slice(0,e).map(n=>`${t}.${n}`)}function ks(t,e){return e===1?[t]:kW(t,e)}function d5e(t,e){if(t===1)return"rc";let n="";for(let r=0;r<t;r++)n+=e[r],r<t-1&&(n+=",");return n}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class h5e{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=ms(this.outputShape.length),this.rank===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{const n=ks("rc",this.rank),r=cn(this.rank),s=this.getOutOfBoundsCondition(n),i=this.getSetup(n),o=this.getOutput(n);this.userCode=`
        void main() {
          ${r} rc = getOutputCoords();

          if(${s}) {
            setOutput(vec4(0));
          } else {
            ${i}

            setOutput(vec4(${o}));
          }
        }
      `}}getSourceCoordsArr(e){const n=[];for(let r=0;r<=1;r++)for(let s=0;s<=1;s++){let i=`${r===0?"r":"rp1"}, ${s===0?"c":"cp1"}`;for(let o=2;o<this.rank;o++)i=`${e[e.length-1-o]},`+i;n.push(i)}return n}getOutOfBoundsCondition(e){if(this.rank===1)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let n="";for(let r=this.rank-2;r<this.rank;r++)n+=`${e[r]} >= ${this.enableShapeUniforms?`outShape[${r}]`:this.outputShape[r]}`,r<this.rank-1&&(n+="||");return n}getSetup(e){if(this.rank===1)return"";const n=e.slice(-2),r=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],s=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`
      int r = ${n[0]};
      int c = ${n[1]};
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= ${r};
      bool rEdge = rp1 >= ${s};
    `}getOutput(e){const n=this.getSourceCoordsArr(e);return this.rank===1?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${n[0]}),
            cEdge ? 0. : getA(${n[1]}),
            rEdge ? 0. : getA(${n[2]}),
            rEdge || cEdge ? 0. : getA(${n[3]})`}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class NW{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=ms(this.outputShape.length);let r="";for(let s=0;s<4;s++){let i="thisRC = rc;";s%2===1&&(i+="thisRC.z += 1;"),s>1&&(i+="thisRC.y += 1;"),r+=`
        ${i}
        ${s>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${s}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${s>0?"}":""}
      `}this.userCode=`
      ${f5e(n,this.enableShapeUniforms)}
      ${this.enableShapeUniforms?q3():W3(e)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${this.enableShapeUniforms?"outShape[1]":e[1]};
        int cols = ${this.enableShapeUniforms?"outShape[2]":e[2]};

        ${r}

        setOutput(result);
      }
    `}}function f5e(t,e){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${e?dze(["r","c","d"],"inputShape"):Fd(["r","c","d"],t)}
      return ivec3(r, c, d);
    }
  `}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class m5e{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(e,n,r){const s=ZM(n,r),i=XM(e,s,r);i in this.freeTextures||(this.freeTextures[i]=[]),i in this.usedTextures||(this.usedTextures[i]=[]);const o=KM(e,s,this.gpgpu.gl,this.gpgpu.textureConfig,r);if(this.freeTextures[i].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=o,this.log();const l=this.freeTextures[i].pop();return this.usedTextures[i].push(l),l}let a;return s===Wr.PACKED_2X2_FLOAT32?a=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):s===Wr.PACKED_2X2_FLOAT16?a=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):s===Wr.UNPACKED_FLOAT32?a=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):s===Wr.UNPACKED_FLOAT16?a=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):s===Wr.PACKED_4X1_UNSIGNED_BYTE&&(a=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[i].push(a),this.numUsedTextures++,this._numBytesAllocated+=o,this.log(),a}releaseTexture(e,n,r,s){if(this.freeTextures==null)return;const i=ZM(r,s),o=XM(n,i,s);o in this.freeTextures||(this.freeTextures[o]=[]);const a=KM(n,i,this.gpgpu.gl,this.gpgpu.textureConfig,s),l=de().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");l!==-1&&this._numBytesAllocated>l?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=a):(this.freeTextures[o].push(e),this.numFreeTextures++,this._numBytesFree+=a),this.numUsedTextures--;const c=this.usedTextures[o],u=c&&c.indexOf(e);if(u==null||u<0)throw new Error("Cannot release a texture that was never provided by this texture manager");c[u]=c[c.length-1],c.pop(),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${e})`);const n=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*n)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(const e in this.freeTextures)this.freeTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});for(const e in this.usedTextures)this.usedTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function p5e(t,e){const n=t;if(e===n.R32F)return 4;if(e===n.R16F)return 2;if(e===n.RGBA32F)return 16;if(e===t.RGBA)return 16;if(e===n.RGBA16F)return 8;if(e===n.RGBA8)return 4;throw new Error(`Unknown internal format ${e}`)}function KM(t,e,n,r,s){const i=g5e(e,r);let o;if(s){const[l,c]=lm(t[0],t[1]);o=l*c}else{const[l,c]=Ny(t[0],t[1]);o=l*c}const a=p5e(n,i);return o*a}function g5e(t,e){switch(t){case Wr.PACKED_2X2_FLOAT32:return bW(e);case Wr.PACKED_2X2_FLOAT16:return vW(e);case Wr.UNPACKED_FLOAT32:return pW(e);case Wr.UNPACKED_FLOAT16:return gW(e);case Wr.PACKED_4X1_UNSIGNED_BYTE:return yW(e);default:throw new Error(`Unknown physical texture type ${t}`)}}function y5e(t){return de().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?Wr.PACKED_2X2_FLOAT32:Wr.UNPACKED_FLOAT32:t?Wr.PACKED_2X2_FLOAT16:Wr.UNPACKED_FLOAT16}function ZM(t,e){if(t===Si.UPLOAD)return Wr.PACKED_2X2_FLOAT32;if(t===Si.RENDER||t==null)return y5e(e);if(t===Si.DOWNLOAD||t===Si.PIXELS)return Wr.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${t}`)}function XM(t,e,n){return`${t[0]}_${t[1]}_${e}_${n}`}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ba{constructor(e,n){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=ms(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        ${n}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}}const Eo="if (isnan(x)) return x;",b5e="return x;",YM="return abs(x);",v5e="return (x >= 0.0) ? x : (exp(x) - 1.0);",x5e=Eo+`
  return (x < 0.0) ? 0.0 : x;
`,w5e=Eo+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,sc="return x;",E5e="return 1.0 / (1.0 + exp(-1.0 * x));";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const k5e="return x;",N5e=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,C5e=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,_5e=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,S5e="return 1.0 / (1.0 + exp(-1.0 * x));";class xc{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=ms(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${n}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class T5e{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=ms(this.outputShape.length);const n=e.length,r=ks("rc",n),s=cn(n),i=d5e(n,r),o=r.slice(-2),a=n<=1?"rc":`vec2(${o.join(",")})`;this.userCode=`
      void main() {
        ${s} rc = getOutputCoords();
        vec4 packedInput = getA(${i});

        setOutput(getChannel(packedInput, ${a}));
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $5e=Z7,I5e=1e-7,A5e=1e-4,ev={};function R5e(t){return t in ev||(ev[t]={}),ev[t]}const P5e=de().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),D5e=600;function O5e(){return de().global.screen==null?1024:de().global.screen.height*de().global.screen.width*window.devicePixelRatio*D5e/1024/1024}class v2 extends u${nextDataId(){return v2.nextDataId++}constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!de().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let n;if(e!=null){if(e instanceof Vk)n=e;else{const r=Xo(de().getNumber("WEBGL_VERSION"),e);n=new Vk(r)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const r=Xo(de().getNumber("WEBGL_VERSION"));n=new Vk(r),this.binaryCache=R5e(de().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=n,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new m5e(this.gpgpu),this.numMBBeforeWarning=O5e(),this.texData=new mj(this,ua())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(e,n,r,s,i,o){const a=this.makeTensorInfo(n,r),l=this.texData.get(a.dataId);l.isPacked=!1,l.texture={texture:e,texShape:[s,i]},l.texShape=[s,i];const c=Jb(n),u=new qM(c,!1,o),h=this.runWebGLProgram(u,[a],r,[[s,i]]);return h.shape=n,l.texture=null,this.disposeIntermediateTensorInfo(a),h.dataId}write(e,n,r){if((de().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||de().getBool("DEBUG"))&&this.checkNumericalProblems(e),r==="complex64"&&e!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const s={id:this.nextDataId()};return this.texData.set(s,{shape:n,dtype:r,values:e,usage:Si.UPLOAD,refCount:1}),s}refCount(e){return this.texData.has(e)?this.texData.get(e).refCount:0}incRef(e){const n=this.texData.get(e);n.refCount++}decRef(e){if(this.texData.has(e)){const n=this.texData.get(e);n.refCount--}}move(e,n,r,s,i){if(de().getBool("DEBUG")&&this.checkNumericalProblems(n),s==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:r,dtype:s,values:n,usage:Si.UPLOAD,refCount:i})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const n=this.texData.get(e),{values:r,dtype:s,complexTensorInfos:i,slice:o,shape:a,isPacked:l}=n;if(o!=null){let m;l?m=new xc(a,sc):m=new ba(a,sc);const p=this.runWebGLProgram(m,[{dataId:e,shape:a,dtype:s}],s),y=this.readSync(p.dataId);return this.disposeIntermediateTensorInfo(p),y}if(r!=null)return this.convertAndCacheOnCPU(e);if(s==="string")return r;const c=this.activeTimers!=null;let u;c&&(u=Ls());let h;if(s==="complex64"){const m=this.readSync(i.real.dataId),p=this.readSync(i.imag.dataId);h=Pl(m,p)}else h=this.getValuesFromTexture(e);return c&&(this.downloadWaitMs+=Ls()-u),this.convertAndCacheOnCPU(e,h)}async read(e){if(this.pendingRead.has(e)){const y=this.pendingRead.get(e);return new Promise(v=>y.push(v))}const n=this.texData.get(e),{values:r,shape:s,slice:i,dtype:o,complexTensorInfos:a,isPacked:l}=n;if(i!=null){let y;l?y=new xc(s,sc):y=new ba(s,sc);const v=this.runWebGLProgram(y,[{dataId:e,shape:s,dtype:o}],o),x=this.read(v.dataId);return this.disposeIntermediateTensorInfo(v),x}if(r!=null)return this.convertAndCacheOnCPU(e);if(de().getBool("DEBUG")&&!de().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&de().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let c=null,u;if(o!=="complex64"&&de().get("WEBGL_BUFFER_SUPPORTED")){u=this.decode(e);const y=this.texData.get(u.dataId);c=this.gpgpu.createBufferFromTexture(y.texture.texture,...Zb(s))}this.pendingRead.set(e,[]),o!=="complex64"&&await this.gpgpu.createAndWaitForFence();let h;if(o==="complex64"){const y=await Promise.all([this.read(a.real.dataId),this.read(a.imag.dataId)]),v=y[0],x=y[1];h=Pl(v,x)}else if(c==null)h=this.getValuesFromTexture(e);else{const y=pe(s);h=this.gpgpu.downloadFloat32MatrixFromBuffer(c,y)}if(u!=null&&this.disposeIntermediateTensorInfo(u),c!=null){const y=this.gpgpu.gl;Le(y,()=>y.deleteBuffer(c))}const m=this.convertAndCacheOnCPU(e,h),p=this.pendingRead.get(e);return this.pendingRead.delete(e),p.forEach(y=>y(m)),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&ua().removeDataId(e,this),this.pendingDeletes--),m}readToGPU(e,n={}){const r=this.texData.get(e),{values:s,shape:i,slice:o,dtype:a,isPacked:l,texture:c}=r;if(a==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(o!=null){let p;l?p=new xc(i,sc):p=new ba(i,sc);const y=this.runWebGLProgram(p,[{dataId:e,shape:i,dtype:a}],a),v=this.readToGPU(y,n);return this.disposeIntermediateTensorInfo(y),v}if(c==null)throw s!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const u=this.decode(e,n.customTexShape),h=ua().makeTensorFromTensorInfo(u),m=this.texData.get(u.dataId);return Object.assign({tensorRef:h},m.texture)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(s=>jc(s));return bt(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return bt(e.shape,e.dtype,n)}checkNumericalProblems(e){if(e!=null)for(let n=0;n<e.length;n++){const r=e[n];if(!zMe(r))throw de().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${r} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${r} cannot be represented on this device.`)}}getValuesFromTexture(e){const{shape:n,dtype:r,isPacked:s}=this.texData.get(e),i=pe(n);if(de().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const m=this.decode(e),p=this.texData.get(m.dataId),y=this.gpgpu.downloadMatrixFromPackedTexture(p.texture.texture,...Zb(n)).subarray(0,i);return this.disposeIntermediateTensorInfo(m),y}const o=de().getBool("WEBGL_PACK")&&s===!0,a=o?Jb(n):n,l=o?new eFe(a):new Qze(a),c=this.runWebGLProgram(l,[{shape:a,dtype:r,dataId:e}],"float32"),u=this.texData.get(c.dataId),h=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(u.texture.texture,u.texShape[0],u.texShape[1]).subarray(0,i);return this.disposeIntermediateTensorInfo(c),h}timerAvailable(){return de().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){const n=this.activeTimers,r=[];let s=!1;this.programTimersStack==null?(this.programTimersStack=r,s=!0):this.activeTimers.push(r),this.activeTimers=r,e();const i=ld(this.activeTimers.map(l=>l.query)).filter(l=>l!=null),o=ld(this.activeTimers.map(l=>l.name)).filter(l=>l!=null);this.activeTimers=n,s&&(this.programTimersStack=null);const a={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(de().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const l=await Promise.all(i);a.kernelMs=wEe(l),a.getExtraProfileInfo=()=>l.map((c,u)=>({name:o[u],ms:c})).map(c=>`${c.name}: ${c.ms}`).join(", ")}else a.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,a})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return de().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Ls(),endMs:null}}endTimer(e){return de().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=Ls(),e)}async getQueryTime(e){if(de().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);const n=e;return n.endMs-n.startMs}disposeData(e,n=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(n?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!n&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:r}=this.texData.get(e);return r!=null&&(this.disposeData(r.real.dataId,n),this.disposeData(r.imag.dataId,n)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:n,dtype:r,texShape:s,usage:i,isPacked:o,slice:a}=this.texData.get(e),l=a&&a.origDataId||e,c=this.dataRefCount.get(l);c>1?this.dataRefCount.set(l,c-1):(this.dataRefCount.delete(l),n!=null&&(this.numBytesInGPU-=this.computeBytes(s,r),this.textureManager.releaseTexture(n,s,i,o)));const u=this.texData.get(e);u.texture=null,u.texShape=null,u.isPacked=!1,u.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e,n=P5e){return de().getBool("WEBGL_CPU_FORWARD")&&e.every(r=>this.texData.get(r.dataId).texture==null&&pe(r.shape)<n)}getGPGPUContext(){return this.gpgpu}where(e){Ni("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const n=e.dataSync();return $5e(e.shape,n)}packedUnaryOp(e,n,r){const s=new xc(e.shape,n),i=this.compileAndRun(s,[e],r);return ua().makeTensorFromTensorInfo(i)}abs(e){if(this.shouldExecuteOnCPU([e])&&e.dtype!=="complex64"){const s=wW(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,s)}if(de().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,YM,e.dtype);const n=new ba(e.shape,YM),r=this.compileAndRun(n,[e]);return ua().makeTensorFromTensorInfo(r)}makeTensorInfo(e,n,r){let s;if(n==="string"&&r!=null&&r.length>0&&d0(r[0])){const i=r.map(o=>Rc(o));s=this.write(i,e,n)}else s=this.write(r,e,n);return this.texData.get(s).usage=null,{dataId:s,shape:e,dtype:n}}makeOutput(e,n,r){return ua().makeTensorFromTensorInfo(this.makeTensorInfo(e,n,r),this)}unpackTensor(e){const n=new T5e(e.shape);return this.runWebGLProgram(n,[e],e.dtype)}packTensor(e){const n=new h5e(e.shape),r=!0;return this.runWebGLProgram(n,[e],e.dtype,null,r)}packedReshape(e,n){const r=[Pf(e.shape),...Df(e.shape)],s={dtype:e.dtype,shape:r,dataId:e.dataId},i=[Pf(n),...Df(n)],o=new NW(i,r),a=!0,l=[r],c=this.runWebGLProgram(o,[s],e.dtype,l,a);return{dataId:c.dataId,shape:n,dtype:c.dtype}}decode(e,n){const r=this.texData.get(e),{isPacked:s,shape:i,dtype:o}=r;if(n!=null){const m=pe(i),p=n[0]*n[1]*4;F(m<=p,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}const a=Jb(i);let l;s?l=new Jze(a):l=new Yze(a);const c=!0,u=[n??Zb(a)],h=this.runWebGLProgram(l,[{shape:a,dtype:o,dataId:e}],o,u,c,n);return{dtype:o,shape:i,dataId:h.dataId}}runWebGLProgram(e,n,r,s,i=!1,o){const a=this.makeTensorInfo(e.outputShape,r),l=this.texData.get(a.dataId);if(e.packedOutput&&(l.isPacked=!0),e.outPackingScheme===Sg.DENSE){const b=o??Zb(e.outputShape);l.texShape=b.map(w=>w*2)}if(e.outTexUsage!=null&&(l.usage=e.outTexUsage),pe(a.shape)===0)return l.values=ls(a.dtype,0),a;const c=[],u=n.map(b=>{if(b.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let w=this.texData.get(b.dataId);if(w.texture==null){if(!e.packedInputs&&pe(b.shape)<=de().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:b.shape,texData:null,isUniform:!0,uniformValues:w.values};e.packedInputs&&(w.isPacked=!0,w.shape=b.shape)}if(this.uploadToGPU(b.dataId),!!w.isPacked!=!!e.packedInputs)b=w.isPacked?this.unpackTensor(b):this.packTensor(b),c.push(b),w=this.texData.get(b.dataId);else if(w.isPacked&&!tx(w.shape,b.shape)){const E=b,N=b.shape;b.shape=w.shape,b=this.packedReshape(b,N),c.push(b),w=this.texData.get(b.dataId),E.shape=N}return{shape:b.shape,texData:w,isUniform:!1}});this.uploadToGPU(a.dataId);const h={shape:a.shape,texData:l,isUniform:!1},m=Xze(e,u,h),p=this.getAndSaveBinary(m,()=>Kze(this.gpgpu,e,u,h)),y=this.activeTimers!=null;let v;y&&(v=this.startTimer()),de().get("ENGINE_COMPILE_ONLY")||Zze(this.gpgpu,p,u,h,s),c.forEach(b=>this.disposeIntermediateTensorInfo(b)),y&&(v=this.endTimer(v),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(v)}));const x=de().getNumber("WEBGL_FLUSH_THRESHOLD");if(x>0){const b=Ls();b-this.lastGlFlushTime>x&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=b)}if(!de().getBool("WEBGL_LAZILY_UNPACK")&&l.isPacked&&i===!1){const b=this.unpackTensor(a);return this.disposeIntermediateTensorInfo(a),b}return a}compileAndRun(e,n,r,s,i=!1){return r=r||n[0].dtype,this.runWebGLProgram(e,n,r,s,i)}getAndSaveBinary(e,n){return e in this.binaryCache||(this.binaryCache[e]=n()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(de().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(n=>{this.gpgpu.deleteProgram(this.binaryCache[n].webGLProgram),delete this.binaryCache[n]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=ue(()=>{if(!de().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=de().getBool("DEBUG");de().set("DEBUG",!1);const n=this.abs(Kt(1e-8)).dataSync()[0];if(de().set("DEBUG",e),n>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?I5e:A5e}uploadToGPU(e){const n=this.texData.get(e),{shape:r,dtype:s,values:i,texture:o,usage:a,isPacked:l}=n;if(o!=null)return;const c=this.activeTimers!=null;let u;c&&(u=Ls());let h=n.texShape;if(h==null&&(h=nze(r,l),n.texShape=h),i!=null){const m=Jb(r);let p,y=h[1],v=h[0];const x=i instanceof Uint8Array||i instanceof Uint8ClampedArray;(l||!x)&&([y,v]=lm(h[0],h[1])),l?p=new nFe(m,x):p=new qM(m,x);const b=x?[v,y]:h,w=this.makeTensorInfo(b,s),E=this.texData.get(w.dataId);x?E.usage=Si.PIXELS:E.usage=Si.UPLOAD,E.texShape=b,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(w.dataId),y,v,i);const N=[[v,y]],C=!0,S=this.runWebGLProgram(p,[w],s,N,C),T=this.texData.get(S.dataId);n.texShape=T.texShape,n.isPacked=T.isPacked,n.usage=T.usage,de().get("ENGINE_COMPILE_ONLY")?this.disposeData(S.dataId):(n.texture=T.texture,n.values=null,this.texData.delete(S.dataId)),this.disposeIntermediateTensorInfo(w),c&&(this.uploadWaitMs+=Ls()-u)}else{const m=this.acquireTexture(h,a,s,l);n.texture=m}}convertAndCacheOnCPU(e,n){const r=this.texData.get(e),{dtype:s}=r;return n!=null&&(r.values=L5e(n,s)),r.values}acquireTexture(e,n,r,s){if(this.numBytesInGPU+=this.computeBytes(e,r),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){const i=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${i} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,n,s)}computeBytes(e,n){return e[0]*e[1]*I1(n)}checkCompileCompletion(){for(const[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}async checkCompileCompletionAsync(){const e=[];if(this.gpgpu.parallelCompilationExtension){for(const[,n]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(n));return Promise.all(e)}else{for(const[,n]of Object.entries(this.binaryCache)){const r=new Promise(s=>{try{this.checkCompletion_(n),s(!0)}catch(i){throw i}});e.push(r)}return Promise.all(e)}}async checkCompletionAsync_(e){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(await hU(),this.checkCompletionAsync_(e))}checkCompletion_(e){if(this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)===!1)throw console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)===!1?(cW(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(const e of Object.values(this.binaryCache)){this.gpgpu.buildVao(e.webGLProgram);const{variablesLocations:n,customUniformLocations:r,infLoc:s,nanLoc:i,outShapeLocation:o,outShapeStridesLocation:a,outTexShapeLocation:l}=mW(this.gpgpu,e.program,e.webGLProgram);e.variablesLocations=n,e.customUniformLocations=r,e.infLoc=s,e.nanLoc=i,e.outShapeLocation=o,e.outShapeStridesLocation=a,e.outTexShapeLocation=l}}createTensorFromGPUData(e,n,r){e.channels=e.channels||"RGBA";const{texture:s,height:i,width:o,channels:a}=e,l=ua().backend;if(!l.gpgpu.gl.isTexture(s))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");const c=l.writeTexture(s,n,r,i,o,a);return ua().makeTensorFromDataId(c,n,r,l)}}v2.nextDataId=0;function L5e(t,e){if(e==="float32"||e==="complex64")return t;if(e==="int32"||e==="bool"){const n=e==="int32"?new Int32Array(t.length):new Uint8Array(t.length);for(let r=0;r<n.length;++r)n[r]=Math.round(t[r]);return n}else throw new Error(`Unknown dtype ${e}`)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */a7()&&d7("webgl",()=>new v2,2);/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X3=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;class xd{constructor(e,n,r){this.variableNames=["A","B"],this.outputShape=ut(n,r),this.enableShapeUniforms=ms(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        ${e}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vd=`
  result.r = isNaN.r ? NAN : result.r;
  result.g = isNaN.g ? NAN : result.g;
  result.b = isNaN.b ? NAN : result.b;
  result.a = isNaN.a ? NAN : result.a;
`;class fm{constructor(e,n,r,s=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=ut(n,r);const i=this.outputShape.length;this.enableShapeUniforms=ms(i);let o="";if(s)if(i===0||pe(this.outputShape)===1)o=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(o=`
          ${cn(i)} coords = getOutputCoords();
        `,i===1)this.enableShapeUniforms?o+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:o+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{const l=ks("coords",i);this.enableShapeUniforms?o+=`
            bool nextRowOutOfBounds =
              (${l[i-2]} + 1) >= outShape[${i} - 2];
            bool nextColOutOfBounds =
              (${l[i-1]} + 1) >= outShape[${i} - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `:o+=`
            bool nextRowOutOfBounds =
              (${l[i-2]} + 1) >= ${this.outputShape[i-2]};
            bool nextColOutOfBounds =
              (${l[i-1]} + 1) >= ${this.outputShape[i-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${e}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${o}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function di(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const M5e={kernelName:R0,backendName:"webgl",kernelFunc:di};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function au(t){const{inputs:e,backend:n}=t,{real:r,imag:s}=e,i=n.makeTensorInfo(r.shape,"complex64"),o=n.texData.get(i.dataId),a=di({inputs:{x:r},backend:n}),l=di({inputs:{x:s},backend:n});return o.complexTensorInfos={real:a,imag:l},i}const z5e={kernelName:k$,backendName:"webgl",kernelFunc:au};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CW="return (a < 0.) ? b * a : a;",_W=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function F5e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{alpha:i}=r,o=n.makeTensorInfo([],"float32",Qc(i,"float32")),a=de().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new fm(_W,s.shape,o.shape):new xd(CW,s.shape,o.shape),l=n.runWebGLProgram(a,[s,o],"float32");return n.disposeIntermediateTensorInfo(o),l}const B5e={kernelName:fw,backendName:"webgl",kernelFunc:F5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SW="return (a < 0.) ? b * a : a;",TW=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function V5e(t){const{inputs:e,backend:n}=t,{x:r,alpha:s}=e,i=de().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new fm(TW,r.shape,s.shape):new xd(SW,r.shape,s.shape);return n.runWebGLProgram(i,[r,s],"float32")}const j5e={kernelName:Rw,backendName:"webgl",kernelFunc:V5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mm="if (isnan(x)) return x;";function zt({opSnippet:t,packedOpSnippet:e,cpuKernelImpl:n,dtype:r}){return({inputs:s,backend:i})=>{const{x:o}=s,a=i,l=r||o.dtype;if(a.shouldExecuteOnCPU([o])&&n!=null){const h=a.texData.get(o.dataId),m=n(h.values,l);return a.makeTensorInfo(o.shape,l,m)}const c=de().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&e!=null;let u;return c?u=new xc(o.shape,e):u=new ba(o.shape,t),a.runWebGLProgram(u,[o],l)}}function Jr({opSnippet:t,packedOpSnippet:e,checkOutOfBounds:n=!1,supportsComplex:r=!1,cpuKernelImpl:s,dtype:i}){return({inputs:o,backend:a})=>{const{a:l,b:c}=o,u=a;if(r&&l.dtype==="complex64"){const y=u.texData.get(l.dataId),v=u.texData.get(c.dataId),[x,b]=[[y.complexTensorInfos.real,v.complexTensorInfos.real],[y.complexTensorInfos.imag,v.complexTensorInfos.imag]].map(E=>{const[N,C]=E,S={dataId:N.dataId,dtype:N.dtype,shape:l.shape},T={dataId:C.dataId,dtype:C.dtype,shape:c.shape},I=new xd(t,l.shape,c.shape);return u.runWebGLProgram(I,[S,T],ci(N.dtype,C.dtype))}),w=au({inputs:{real:x,imag:b},backend:u});return u.disposeIntermediateTensorInfo(x),u.disposeIntermediateTensorInfo(b),w}const h=i||ci(l.dtype,c.dtype);if((l.dtype==="string"||c.dtype==="string"||u.shouldExecuteOnCPU([l,c]))&&s!=null){const y=u.texData.get(l.dataId).values,v=u.texData.get(c.dataId).values,x=l.dtype==="string"?Dl(y):y,b=l.dtype==="string"?Dl(v):v,[w,E]=s(l.shape,c.shape,x,b,h),N=u.makeTensorInfo(E,h),C=u.texData.get(N.dataId);return C.values=w,N}const m=de().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&e!=null;let p;return m?p=new fm(e,l.shape,c.shape,n):p=new xd(t,l.shape,c.shape),u.runWebGLProgram(p,[l,c],h)}}function Tg(t,e=!1){if(t==="linear")return e?k5e:b5e;if(t==="relu")return e?C5e:x5e;if(t==="elu")return e?N5e:v5e;if(t==="relu6")return e?_5e:w5e;if(t==="prelu")return e?TW:SW;if(t==="leakyrelu")return e?_W:CW;if(t==="sigmoid")return e?S5e:E5e;throw new Error(`Activation ${t} has not been implemented for the WebGL backend.`)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $W{constructor(e,n,r,s=!1,i=!1,o=!1,a=null,l=!1,c=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=ms(this.outputShape.length);const u=s?e[1]:e[2],h=Math.ceil(u/2),m=s?"i * 2, rc.y":"rc.y, i * 2",p=i?"rc.z, i * 2":"i * 2, rc.z",y=s?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],v=i?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let x="",b="";a&&(l?x=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${a}
        }`:c?x=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${a}
        }`:x=`vec4 activation(vec4 x) {
          ${a}
        }`,b="result = activation(result);");const w=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),l&&this.variableNames.push("preluActivationWeights"),c&&this.variableNames.push("leakyreluAlpha");let E="rc.x",N="rc.x";e[0]<n[0]?E=`imod(rc.x, ${e[0]})`:n[0]<e[0]&&(N=`imod(rc.x, ${n[0]})`),this.userCode=`
      ${x}
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = ${h}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        int batchA = ${E};
        int batchB = ${N};
        for (int i = 0; i < ${h}; i++) {
          vec4 a = getMatrixA(batchA, ${m});
          vec4 b = getMatrixB(batchB, ${p});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${y[0]} * ${v[0]});
          result += (${y[1]} * ${v[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${w}

        ${b}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JM={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class QM{constructor(e,n,r){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=ut(n,r),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${e}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ez="return a * b;";function Y3(t){const{inputs:e,backend:n}=t,{a:r,b:s}=e,i=ci(r.dtype,s.dtype);if(r.dtype==="complex64"){const a=n.texData.get(r.dataId),l=n.texData.get(s.dataId),c=new QM(JM.REAL,r.shape,s.shape),u=new QM(JM.IMAG,r.shape,s.shape),h=[{dataId:a.complexTensorInfos.real.dataId,dtype:a.complexTensorInfos.real.dtype,shape:r.shape},{dataId:a.complexTensorInfos.imag.dataId,dtype:a.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:l.complexTensorInfos.real.dataId,dtype:l.complexTensorInfos.real.dtype,shape:s.shape},{dataId:l.complexTensorInfos.imag.dataId,dtype:l.complexTensorInfos.imag.dtype,shape:s.shape}],m=n.runWebGLProgram(c,h,"float32"),p=n.runWebGLProgram(u,h,"float32"),y=au({inputs:{real:m,imag:p},backend:n});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(p),y}if(n.shouldExecuteOnCPU([r,s])){const a=n.texData.get(r.dataId),l=n.texData.get(s.dataId),[c,u]=VFe(r.shape,s.shape,a.values,l.values,i),h=n.makeTensorInfo(u,i),m=n.texData.get(h.dataId);return m.values=c,h}let o;return de().getBool("WEBGL_PACK_BINARY_OPERATIONS")?o=new fm(ez,r.shape,s.shape):o=new xd(ez,r.shape,s.shape),n.runWebGLProgram(o,[r,s],i)}const U5e={kernelName:V0,backendName:"webgl",kernelFunc:Y3};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H5e(t,e,n){const r=[Pf(t.shape),...Df(t.shape)],s={dtype:t.dtype,shape:r,dataId:t.dataId},i=[Pf(e),...Df(e)],o=new NW(i,r),a=!0,l=[r],c=n.runWebGLProgram(o,[s],t.dtype,l,a);return{dataId:c.dataId,shape:e,dtype:c.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ae(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{shape:i}=r,o=n,a=pe(s.shape),l=gj(i,a),c=pe(l);F(a===c,()=>`The new shape (${l}) has ${c} elements and the old shape (${s.shape}) has ${a} elements. The new shape and old shape must have the same number of elements.`);const u=o.texData.get(s.dataId);return u.isPacked&&!tx(s.shape,l)&&!(u.texture!==null&&tx(u.shape,l))?H5e(s,l,o):(o.incRef(s.dataId),{dataId:s.dataId,shape:l,dtype:s.dtype})}const G5e={kernelName:Dw,backendName:"webgl",kernelFunc:Ae};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tz{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:s,inSize:i,outSize:o}=e;this.outputShape=[s,o];const a=Math.floor(r/4)*4,l=r%4;let c="sumValue += dot(values, ones);";if(n!=null){const h=1/n;c=`sumValue += dot(values * ${Ef(h)?h.toPrecision(2):h}, ones);`}let u="";i%r>0&&(u=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${u}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        float sumValue = 0.0;

        for (int i = 0; i < ${a}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${c}
        }

        int inIdx = inOffset + ${a};
        if (${l===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${c}
        } else if (${l===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${c}
        } else if (${l===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${c}
        }
        setOutput(sumValue);
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class W5e{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:s,inSize:i,outSize:o}=e;this.outputShape=[s,o];let a="0.0",l="";n==="prod"?a="1.0":n==="min"?(a="1.0 / 1e-20",l="min"):n==="max"&&(a="-1.0 / 1e-20",l="max");let c=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="sum"?c="sumValue":n==="prod"?c="prodValue":n==="all"?c="allValue":n==="any"&&(c="anyValue");const u=Math.floor(r/4)*4,h=r%4;let m=`
      if (${n==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${n==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${l}(values, minMaxValue);
        if (${n==="min"} || ${n==="max"}) {
          minMaxValue = ${l}(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `,p="vec4";n==="all"?(a="1.0",m=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,p="bvec4"):n==="any"&&(a="0.0",m=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,p="bvec4");let y="";i%r>0&&(y=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${a};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${y}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        vec4 minMaxValue = vec4(${a});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${u}; i += 4) {
          int inIdx = inOffset + i;
          ${p} values = ${p}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${m}
        }

        int inIdx = inOffset + ${u};
        if (${h===1}) {
          ${p} values = ${p}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${m}
        } else if (${h===2}) {
          ${p} values = ${p}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${m}
        } else if (${h===3}) {
          ${p} values = ${p}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${m}
        }
        setOutput(${c});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q5e(t){const e=[];for(;e.length===0||e[e.length-1].outSize!==1;){const n=e.length?e[e.length-1].outSize:t[1],r=r2(n);e.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return e}function jd(t,e,n,r){const s=q5e(t.shape);let i=t;for(let o=0;o<s.length;o++){const{inSize:a,windowSize:l,outSize:c}=s[o];let u,h;n==="mean"?u=o===0?new tz({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:c},a):new tz({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:c}):u=new W5e({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:c},n),h=i,i=r.runWebGLProgram(u,[i],e),h.dataId!==t.dataId&&r.disposeIntermediateTensorInfo(h)}return i}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class K5e{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let o=0;o<r.length;o++)r[o]=e[n[o]];this.outputShape=r,this.rank=r.length;const s=cn(this.rank),i=Z5e(n);this.userCode=`
    void main() {
      ${s} resRC = getOutputCoords();
      setOutput(getA(${i}));
    }
    `}}function Z5e(t){const e=t.length;if(e>6)throw Error(`Transpose for rank ${e} is not yet supported`);const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(e);for(let s=0;s<t.length;s++)r[t[s]]=n[s];return r.join()}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class X5e{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const r=new Array(e.length);for(let u=0;u<r.length;u++)r[u]=e[n[u]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const s=cn(this.rank),i=kW("rc",this.rank),o=new Array(this.rank);for(let u=0;u<n.length;u++)o[n[u]]=i[u];const a=`vec2(${o.slice(-2).join()})`,l=`++${i[this.rank-1]} < ${r[this.rank-1]}`,c=`getChannel(getA(${o.join()}), ${a})`;this.userCode=`
    void main() {
      ${s} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${c};
      if(${l}) {
        result[1] = ${c};
      }
      --${i[this.rank-1]};
      if(++${i[this.rank-2]} < ${r[this.rank-2]}) {
        result[2] = ${c};
        if(${l}) {
          result[3] = ${c};
        }
      }
      setOutput(result);
    }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x2(t,e,n){const r=de().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new X5e(t.shape,e):new K5e(t.shape,e);return n.runWebGLProgram(r,[t],t.dtype)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y5e(t,e,n,r){const s=e,i=t.shape.length,o=xt(s,t.shape);let a=o;const l=jn(a,i),c=l!=null;let u=t;c&&(u=x2(t,l,r),a=tr(a.length,i)),Yr("sum",a,i);const[h,m]=Mr(u.shape,a);let p=h;n&&(p=ur(h,o));const y=pe(m),x=pe(t.shape)/y,b=Ae({inputs:{x:u},attrs:{shape:[x,y]},backend:r}),w=sI(t.dtype),E=jd(b,w,"sum",r),N=Ae({inputs:{x:E},attrs:{shape:p},backend:r});return r.disposeIntermediateTensorInfo(b),r.disposeIntermediateTensorInfo(E),c&&r.disposeIntermediateTensorInfo(u),N}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w2(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:o}=r;return Y5e(s,i,o,n)}const J5e={kernelName:Bw,backendName:"webgl",kernelFunc:w2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Is(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{perm:i}=r,o=n,a=s.shape.length,l=new Array(a);for(let u=0;u<l.length;u++)l[u]=s.shape[i[u]];let c;if(o.shouldExecuteOnCPU([s])){const h=o.texData.get(s.dataId).values,m=Z3(h,s.shape,s.dtype,i,l);c=o.makeTensorInfo(l,s.dtype);const p=o.texData.get(c.dataId);p.values=m}else c=x2(s,i,o);return c}const Q5e={kernelName:Xh,backendName:"webgl",kernelFunc:Is};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IW=1e3;function nx({a:t,b:e,transposeA:n,transposeB:r,backend:s,bias:i=null,preluActivationWeights:o=null,leakyreluAlpha:a=0,activation:l=null}){const c=t.shape.length,u=e.shape.length,h=n?t.shape[c-2]:t.shape[c-1],m=r?e.shape[u-1]:e.shape[u-2],p=n?t.shape[c-1]:t.shape[c-2],y=r?e.shape[u-2]:e.shape[u-1],v=t.shape.slice(0,-2),x=e.shape.slice(0,-2),b=pe(v),w=pe(x),N=ut(t.shape.slice(0,-2),e.shape.slice(0,-2)).concat([p,y]);F(h===m,()=>`Error in matMul: inner shapes (${h}) and (${m}) of Tensors with shapes ${t.shape} and ${e.shape} and transposeA=${n} and transposeB=${r} must match.`);const C=n?[b,h,p]:[b,p,h],S=r?[w,y,m]:[w,m,y],T=Ae({inputs:{x:t},backend:s,attrs:{shape:C}}),I=Ae({inputs:{x:e},backend:s,attrs:{shape:S}}),P=[T,I],R=Math.max(b,w),D=n?T.shape[1]:T.shape[2],B=i!=null,Z=o!=null,z=l==="leakyrelu",q=l!=null?Tg(l,!0):null,M=B||Z||z||q!=null;let U;if((p===1||y===1)&&D>IW&&M===!1){let ne=T,J=I;n&&(ne=Is({inputs:{x:T},backend:s,attrs:{perm:[0,2,1]}}),P.push(ne)),r&&(J=Is({inputs:{x:I},backend:s,attrs:{perm:[0,2,1]}}),P.push(J));const G=y!==1,X=y===1;let H=ne;G&&(H=Ae({inputs:{x:ne},backend:s,attrs:{shape:[R,D,1]}}),P.push(H));const W=y===1?2:1;let te=J;X&&(te=Ae({inputs:{x:J},backend:s,attrs:{shape:[R,1,D]}}),P.push(te));const ae=Y3({inputs:{a:H,b:te},backend:s});U=w2({inputs:{x:ae},backend:s,attrs:{axis:W,keepDims:!0}}),P.push(ae)}else{const ne=ci(t.dtype,e.dtype),J=new $W(C,S,[R,p,y],n,r,B,q,Z,z),G=[T,I];if(i!=null&&G.push(i),Z&&G.push(o),z){const X=s.makeTensorInfo([],"float32",Qc(a,"float32"));G.push(X),P.push(X)}U=s.runWebGLProgram(J,G,ne)}const V=Ae({inputs:{x:U},backend:s,attrs:{shape:N}});P.push(U);for(const ne of P)s.disposeIntermediateTensorInfo(ne);return V}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e6e(t){const{inputs:e,backend:n,attrs:r}=t,{a:s,b:i,bias:o,preluActivationWeights:a}=e,{transposeA:l,transposeB:c,activation:u,leakyreluAlpha:h}=r;return nx({a:s,b:i,transposeA:l,transposeB:c,backend:n,bias:o,preluActivationWeights:a,leakyreluAlpha:h,activation:u})}const t6e={kernelName:A1,backendName:"webgl",kernelFunc:e6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nz="return abs(x);";function n6e(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])&&r.dtype!=="complex64"){const i=n.texData.get(r.dataId),o=wW(i.values);return n.makeTensorInfo(r.shape,r.dtype,o)}let s;return de().getBool("WEBGL_PACK_UNARY_OPERATIONS")?s=new xc(r.shape,nz):s=new ba(r.shape,nz),n.runWebGLProgram(s,[r],r.dtype)}const r6e={kernelName:qx,backendName:"webgl",kernelFunc:n6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const s6e=Eo+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,i6e=zt({opSnippet:s6e}),o6e={kernelName:h0,backendName:"webgl",kernelFunc:i6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const a6e=Eo+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,l6e=zt({opSnippet:a6e}),c6e={kernelName:f0,backendName:"webgl",kernelFunc:l6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rz="return a + b;",u6e=Jr({opSnippet:rz,packedOpSnippet:rz,supportsComplex:!0,cpuKernelImpl:xFe}),d6e={kernelName:tm,backendName:"webgl",kernelFunc:u6e};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class h6e{constructor(e,n){this.outputShape=[],this.outputShape=e,this.variableNames=n.map((i,o)=>`T${o}`);const r=[];this.variableNames.forEach(i=>{r.push(`float v${i} = get${i}AtOutCoords();`)});const s=this.variableNames.map(i=>`v${i}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        float result = ${s};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class f6e{constructor(e,n){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=n.map((i,o)=>`T${o}`);const r=[];this.variableNames.forEach(i=>{r.push(`vec4 v${i} = get${i}AtOutCoords();`)});const s=this.variableNames.map(i=>`v${i}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        vec4 result = ${s};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $v(t){const{inputs:e,backend:n}=t,r=e;if(r.length===1)return di({inputs:{x:r[0]},backend:n});if(r.length>de().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const l=Math.floor(r.length/2),c=$v({inputs:r.slice(0,l),backend:n}),u=$v({inputs:r.slice(l),backend:n});return $v({inputs:[c,u],backend:n})}const s=r.map(l=>l.dtype).reduce((l,c)=>ci(l,c)),i=r.map(l=>l.shape),a=de().getBool("WEBGL_PACK")?new f6e(r[0].shape,i):new h6e(r[0].shape,i);return n.runWebGLProgram(a,r,s)}const m6e={kernelName:g$,backendName:"webgl",kernelFunc:$v};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:o}=r,a=s.shape.length,l=xt(i,s.shape);let c=l;const u=jn(c,a);let h=s;u!=null&&(h=Is({inputs:{x:s},backend:n,attrs:{perm:u}}),c=tr(c.length,a)),Yr("all",c,a);const[m,p]=Mr(h.shape,c),y=pe(p),v=Ae({inputs:{x:h},backend:n,attrs:{shape:[-1,y]}}),x=jd(v,v.dtype,"all",n);let b;if(o){const w=ur(m,l);b=Ae({inputs:{x},backend:n,attrs:{shape:w}})}else b=Ae({inputs:{x},backend:n,attrs:{shape:m}});return n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(x),u!=null&&n.disposeIntermediateTensorInfo(h),b}const g6e={kernelName:y$,backendName:"webgl",kernelFunc:p6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:o}=r,a=s.shape.length,l=xt(i,s.shape);let c=l;const u=jn(c,a);let h=s;u!=null&&(h=Is({inputs:{x:s},backend:n,attrs:{perm:u}}),c=tr(c.length,a)),Yr("any",c,a);const[m,p]=Mr(h.shape,c),y=pe(p),v=Ae({inputs:{x:h},backend:n,attrs:{shape:[-1,y]}}),x=jd(v,v.dtype,"any",n);let b;if(o){const w=ur(m,l);b=Ae({inputs:{x},backend:n,attrs:{shape:w}})}else b=Ae({inputs:{x},backend:n,attrs:{shape:m}});return n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(x),u!=null&&n.disposeIntermediateTensorInfo(h),b}const b6e={kernelName:b$,backendName:"webgl",kernelFunc:y6e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class v6e{constructor(e,n,r){this.variableNames=["A"];const{windowSize:s,batchSize:i,outSize:o}=e;r||this.variableNames.push("bestIndicesA"),this.outputShape=[i,o];const a=n==="max"?">":"<",l=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${s};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${s}; i++) {
          int inIdx = ${l};
          float candidate = getA(batch, inIdx);
          if (candidate ${a} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class x6e{constructor(e,n,r,s){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,F(e.length>2,()=>`Packed arg${r.charAt(0).toUpperCase()+r.slice(1)} supports only inputs with rank above 2.`);const i=e[e.length-1],o=Math.ceil(i/n);this.outputShape=e.slice(0,-1),o>1&&this.outputShape.push(o),s||this.variableNames.push("bestIndicesA");const a=this.outputShape,l=a.length,c=cn(l),u=ks("coords",l);let h,m;if(o===1){m=l+1;const I=cn(m);h=`
        ${I} sourceLocR = ${I}(${u.join()}, 0);
        ++${u[l-1]};
        ${I} sourceLocG = ${I}(${u.join()}, 0);
        ++${u[l-2]};
        ${I} sourceLocA = ${I}(${u.join()}, 0);
        --${u[l-1]};
        ${I} sourceLocB = ${I}(${u.join()}, 0);
        --${u[l-2]};`}else m=l,h=`
        ${c} sourceLocR = coords;
        ++${u[l-1]};
        ${c} sourceLocG = coords;
        ++${u[l-2]};
        ${c} sourceLocA = coords;
        --${u[l-1]};
        ${c} sourceLocB = coords;
        --${u[l-2]};`;const p=["x","y","z","w","u","v"].slice(0,m),y="."+p[m-1],v=p.map(I=>"int "+I),x=ks("sourceLocR",m-1).concat("inIdx.r"),b=ks("sourceLocG",m-1).concat("inIdx.g"),w=ks("sourceLocB",m-1).concat("inIdx.b"),E=ks("sourceLocA",m-1).concat("inIdx.a"),N=r==="max"?"greaterThan":"lessThan",C=s?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${x.join()}),
                             getBestIndicesAChannel(${b.join()}),
                             getBestIndicesAChannel(${w.join()}),
                             getBestIndicesAChannel(${E.join()})));`,S=`vec4(
            getAChannel(${x.join()}),
            hasNextCol ? getAChannel(${b.join()}) : 0.,
            hasNextRow ? getAChannel(${w.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${E.join()}) : 0.)`,T=s?"":`
      float getBestIndicesAChannel(${v.join()}) {
        return getChannel(getBestIndicesA(${p.join()}),
                                          vec2(${p.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${v.join()}) {
        return getChannel(getA(${p.join()}),
                               vec2(${p.slice(-2).join()}));
      }
      ${T}
      void main() {
        ${c} coords = getOutputCoords();
        bool hasNextCol = ${u[l-1]} < ${a[l-1]-1};
        bool hasNextRow = ${u[l-2]} < ${a[l-2]-1};
        ${h}
        ivec4 srcIdx = ivec4(sourceLocR${y}, sourceLocG${y},
          sourceLocB${y}, sourceLocA${y}) * ${n};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${S};

        for (int i = 0; i < ${n}; i++) {
          inIdx = srcIdx;
          ${C}
          vec4 candidate = ${S};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${N}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AW(t,e,n,r=null){let s=e.shape[0],i=e.shape[1];r!=null&&(s=r.shape[0],i=r.shape[1]);const o=r2(i),a={windowSize:o,inSize:i,batchSize:s,outSize:Math.ceil(i/o)},l=new v6e(a,n,r==null),c=[e];r!=null&&c.push(r);const u=t.runWebGLProgram(l,c,"int32");if(u.shape[1]===1)return u;const h=AW(t,e,n,u);return t.disposeIntermediateTensorInfo(u),h}function RW(t,e,n,r=null){const s=r!=null?r.shape:e.shape,i=s[s.length-1],o=r2(i),a=new x6e(s,o,n,r==null),l=r==null?[e]:[e,r],c=t.runWebGLProgram(a,l,"int32");if(c.shape.length===e.shape.length){const u=RW(t,e,n,c);return t.disposeIntermediateTensorInfo(c),u}return c}function PW(t,e,n,r){const s=[n];if(Yr("arg"+r.charAt(0).toUpperCase()+r.slice(1),s,e.shape.length),!de().getBool("WEBGL_PACK_REDUCE")||e.shape.length<=2){const i=[],o=t.texData.get(e.dataId),a=o!==null&&o.isPacked;let l=e;a&&(l=t.unpackTensor(e),i.push(l));const[c,u]=Mr(l.shape,s),h=pe(u),m=Ae({inputs:{x:l},backend:t,attrs:{shape:[-1,h]}});i.push(m);const p=AW(t,m,r);i.push(p);const y=Ae({inputs:{x:p},backend:t,attrs:{shape:c}});return i.forEach(v=>t.disposeIntermediateTensorInfo(v)),y}return RW(t,e,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i}=r;let o=xt(i,s.shape);const a=jn(o,s.shape.length);let l=s;const c=[];a!=null&&(l=Is({inputs:{x:s},backend:n,attrs:{perm:a}}),c.push(l),o=tr(o.length,l.shape.length)),Yr("argMax",[o[0]],l.shape.length);const u=PW(n,l,o[0],"max");return c.forEach(h=>n.disposeIntermediateTensorInfo(h)),u}const E6e={kernelName:Kx,backendName:"webgl",kernelFunc:w6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i}=r;let o=xt(i,s.shape);const a=jn(o,s.shape.length);let l=s;const c=[];a!=null&&(l=Is({inputs:{x:s},backend:n,attrs:{perm:a}}),c.push(l),o=tr(o.length,l.shape.length)),Yr("argMin",[o[0]],l.shape.length);const u=PW(n,l,o[0],"min");return c.forEach(h=>n.disposeIntermediateTensorInfo(h)),u}const N6e={kernelName:Zx,backendName:"webgl",kernelFunc:k6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const C6e=Eo+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,_6e=zt({opSnippet:C6e}),S6e={kernelName:m0,backendName:"webgl",kernelFunc:_6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const T6e=Eo+"return log(x + sqrt(x * x + 1.0));",$6e=zt({opSnippet:T6e}),I6e={kernelName:p0,backendName:"webgl",kernelFunc:$6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A6e=Eo+`
  return atan(x);
`,R6e=zt({opSnippet:A6e}),P6e={kernelName:g0,backendName:"webgl",kernelFunc:R6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const D6e=X3+`
  return atan(a, b);
`,O6e=`
  vec4 result = atan(a, b);
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Vd+`
  return result;
`,L6e=Jr({opSnippet:D6e,packedOpSnippet:O6e}),M6e={kernelName:b0,backendName:"webgl",kernelFunc:L6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const z6e=Eo+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,F6e=zt({opSnippet:z6e}),B6e={kernelName:y0,backendName:"webgl",kernelFunc:F6e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $g{constructor(e,n,r,s=!1,i=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const o=e.filterWidth,a=e.strideHeight,l=e.strideWidth,c=e.dilationHeight,u=e.dilationWidth,h=e.effectiveFilterHeight,m=e.effectiveFilterWidth,p=e.padInfo.top,y=e.padInfo.left;this.outputShape=e.outShape;const v=n==="avg",x=`((batch  * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + d`,b=`(xR * ${e.inWidth} + xC) * ${e.inChannels} + d`;let w="0.0";if(v||(w="-1.0 / 1e-20"),r){const I=">=";this.userCode=`
        const ivec2 strides = ivec2(${a}, ${l});
        const ivec2 pads = ivec2(${p}, ${y});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${h};
              wR += ${c}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${m};
                wC += ${u}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value ${I} currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${s?i?x:b:`wR * ${m} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const E="max";let N=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(N="avgValue / max(count, 1.0)");const C=Math.floor(o/4)*4,S=o%4,T=`
      if (${v}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${E}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${a}, ${l});
      const ivec2 pads = ivec2(${p}, ${y});
      const float initializationValue = ${w};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${w});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${h};
            wR += ${c}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${C}; wC += 4) {
            int xC = xCCorner + wC * ${u};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              getValue(batch, xR, xC + 2 * ${u}, d),
              getValue(batch, xR, xC + 3 * ${u}, d)
            );

            ${T}
          }

          int xC = xCCorner + ${C};
          if (${S===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${T}
          } else if (${S===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              initializationValue,
              initializationValue
            );

            ${T}
          } else if (${S===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              getValue(batch, xR, xC + 2 * ${u}, d),
              initializationValue
            );

            ${T}
          }
        }
        setOutput(${N});
      }
    `}}class J3{constructor(e,n,r,s=!1,i=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const o=e.filterWidth,a=e.strideDepth,l=e.strideHeight,c=e.strideWidth,u=e.dilationDepth,h=e.dilationHeight,m=e.dilationWidth,p=e.effectiveFilterDepth,y=e.effectiveFilterHeight,v=e.effectiveFilterWidth,x=e.padInfo.front,b=e.padInfo.top,w=e.padInfo.left;this.outputShape=e.outShape;const E=n==="avg";let N="0.0";if(E||(N="-1.0 / 1e-20"),r){const R=">=";this.userCode=`
        const ivec3 strides =
            ivec3(${a}, ${l}, ${c});
        const ivec3 pads = ivec3(${x}, ${b}, ${w});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${p};
              wD += ${u}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${e.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${y};
                wR += ${h}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${v};
                  wC += ${m}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value ${R} currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${s?i?`(((batch * ${e.inDepth} + xD) * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`((xD * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`wD * ${y} * ${v} +
                      wR * ${v} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const C="max";let S=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(S="avgValue / max(count, 1.0)");const T=Math.floor(o/4)*4,I=o%4,P=`
      if (${E}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${C}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${a}, ${l}, ${c});
      const ivec3 pads = ivec3(${x}, ${b}, ${w});
      const float initializationValue = ${N};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${N});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${p};
            wD += ${u}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${y};
            wR += ${h}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${T}; wC += 4) {
              int xC = xCCorner + wC * ${m};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${m}, ch),
                getValue(batch, xD, xR, xC + 2 * ${m}, ch),
                getValue(batch, xD, xR, xC + 3 * ${m}, ch)
              );

              ${P}
            }

            int xC = xCCorner + ${T};
            if (${I===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${P}
            } else if (${I===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${m}, ch),
                initializationValue,
                initializationValue
              );

              ${P}
            } else if (${I===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${m}, ch),
                getValue(batch, xD, xR, xC + 2 * ${m}, ch),
                initializationValue
              );

              ${P}
            }
          }
        }
        setOutput(${S});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e;Cy(s,"avgPool");const{filterSize:i,strides:o,pad:a,dimRoundingMode:l}=r,c=1;F(hs(o,c),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${c}'`);const u=xo(s.shape,i,o,c,a,l);if(u.filterWidth===1&&u.filterHeight===1&&Zt(u.inShape,u.outShape))return di({inputs:{x:s},backend:n});const h=new $g(u,"avg",!1);return n.runWebGLProgram(h,[s],"float32")}const j6e={kernelName:Xx,backendName:"webgl",kernelFunc:V6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{filterSize:i,strides:o,pad:a,dimRoundingMode:l,dataFormat:c}=r,u=[1,1,1],h=Vl(s.shape,i,o,u,a,l,c),m=new J3(h,"avg",!1);return n.runWebGLProgram(m,[s],"float32")}const H6e={kernelName:Yx,backendName:"webgl",kernelFunc:U6e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class G6e{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,s=e.strideHeight,i=e.strideWidth,o=e.dilationHeight,a=e.dilationWidth,l=e.effectiveFilterHeight,c=e.effectiveFilterWidth,u=l-1-e.padInfo.top,h=c-1-e.padInfo.left,m=1/(n*r);this.userCode=`
      const ivec2 pads = ivec2(${u}, ${h});
      const float avgMultiplier = float(${m});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${l};
            wR += ${o}) {
          float dyR = float(dyRCorner + wR) / ${s}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${c};
            wC+= ${a}) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}}class W6e{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,s=e.filterWidth,i=e.strideDepth,o=e.strideHeight,a=e.strideWidth,l=e.dilationDepth,c=e.dilationHeight,u=e.dilationWidth,h=e.effectiveFilterDepth,m=e.effectiveFilterHeight,p=e.effectiveFilterWidth,y=h-1-e.padInfo.front,v=m-1-e.padInfo.top,x=p-1-e.padInfo.left,b=1/(n*r*s);this.userCode=`
      const ivec3 pads = ivec3(${y}, ${v}, ${x});
      const float avgMultiplier = float(${b});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${h};
            wD += ${l}) {
          float dyD = float(dyDCorner + wD) / ${i}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${m};
              wR += ${c}) {
            float dyR = float(dyRCorner + wR) / ${o}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${p};
                wC += ${u}) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q6e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i}=e,o=i,{filterSize:a,strides:l,pad:c,dimRoundingMode:u}=r,h=[1,1,1],m=Vl(o.shape,a,l,h,c,u),p=new W6e(m);return n.runWebGLProgram(p,[s],o.dtype)}const K6e={kernelName:x$,backendName:"webgl",kernelFunc:q6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z6e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i}=e,o=i;Cy([s,i],"avgPoolGrad");const{filterSize:a,strides:l,pad:c}=r,u=xo(o.shape,a,l,1,c),h=new G6e(u);return n.runWebGLProgram(h,[s],o.dtype)}const X6e={kernelName:v$,backendName:"webgl",kernelFunc:Z6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y6e(t){const{inputs:e,backend:n,attrs:r}=t,{a:s,b:i}=e,{transposeA:o,transposeB:a}=r;return nx({a:s,b:i,transposeA:o,transposeB:a,backend:n})}const J6e={kernelName:Jx,backendName:"webgl",kernelFunc:Y6e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Q6e{constructor(e,n,r,s,i,o){this.outputShape=[],this.variableNames=["x","mean","variance"],ut(e,n),ut(e,r);let a="0.0";s!=null&&(ut(e,s),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let l="1.0";i!=null&&(ut(e,i),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${a};
        float scale = ${l};
        float inv = scale * inversesqrt(variance + float(${o}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class eBe{constructor(e,n,r,s,i,o){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],ut(e,n),ut(e,r);let a="vec4(0.0)";s!=null&&(ut(e,s),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let l="vec4(1.0)";i!=null&&(ut(e,i),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        vec4 offset = ${a};
        vec4 scale = ${l};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${o}));

        setOutput((x - mean) * inv + offset);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tBe=({inputs:t,backend:e,attrs:n})=>{const{x:r,mean:s,variance:i,offset:o,scale:a}=t;F(s.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),F(o==null||s.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),F(a==null||s.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:l}=n;l==null&&(l=.001);const c=[r,s,i];let u=null;o!=null&&(u=o.shape,c.push(o));let h=null;a!=null&&(h=a.shape,c.push(a));const m=de().getBool("WEBGL_PACK_NORMALIZATION")?new eBe(r.shape,s.shape,i.shape,u,h,l):new Q6e(r.shape,s.shape,i.shape,u,h,l);return e.runWebGLProgram(m,c,c[0].dtype)},nBe={kernelName:uw,backendName:"webgl",kernelFunc:tBe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rBe{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;const n=cn(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const r=sBe(this.rank);let s;const i=e.map((o,a)=>`sourceLoc.${P_[a]} = start[${a}] + coords.${P_[a]};`);s=`
        ${n} sourceLoc;
        ${n} coords = getOutputCoords();
        ${i.join(`
`)}
      `,this.userCode=`
      void main() {
        ${s}
        setOutput(getSource(${r}));
      }
    `}}const P_=["x","y","z","w","u","v"];function sBe(t){if(t===1)return"sourceLoc";if(t<=6)return P_.slice(0,t).map(e=>"sourceLoc."+e).join(",");throw Error(`Slicing for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class iBe{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const n=cn(this.rank),r=ks("coords",this.rank),s=ks("sourceLoc",this.rank),i=this.rank===1?"sourceLoc":`vec2(${s.slice(-2).join()})`,o=`getChannel(getSource(${s.join()}), ${i})`,a=`
      result.x = ${o};
      if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
        ++${s[this.rank-1]};
        result.y = ${o};
        --${s[this.rank-1]};
      }
    `,l=this.rank===1?"":`
      --${r[this.rank-1]};
      if (++${r[this.rank-2]} < ${e[this.rank-2]}) {
        ++${s[this.rank-2]};
        result.z = ${o};
        if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
          ++${s[this.rank-1]};
          result.w = ${o};
        }
      }
    `,c=this.rank<=4?`sourceLoc = coords +
            ${n}(${e.map((u,h)=>`start[${h}]`).join()});`:e.map((u,h)=>`${s[h]} = ${r[h]} + start[${h}];`).join(`
`);this.userCode=`
      void main() {
        ${n} coords = getOutputCoords();
        ${n} sourceLoc;
        ${c}
        vec4 result = vec4(0.);
        ${a}
        ${l}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oBe(t,e,n,r){const s=r.texData.get(t.dataId),i=r.makeTensorInfo(n,t.dtype),o=r.texData.get(i.dataId);Object.assign(o,s),o.refCount=1,o.shape=n,o.dtype=t.dtype;let a=WI(e,qe(t.shape));s.slice&&(a+=s.slice.flatOffset),o.slice={flatOffset:a,origDataId:s.slice&&s.slice.origDataId||t.dataId};const l=r.dataRefCount.get(o.slice.origDataId)||1;return r.dataRefCount.set(o.slice.origDataId,l+1),i}function pm(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{begin:i,size:o}=r,[a,l]=n2(s,i,o);if(UI(s,a,l),pe(l)===0)return n.makeTensorInfo(l,s.dtype,[]);if(n.shouldExecuteOnCPU([s])||s.dtype==="string"){const h=n.texData.get(s.dataId),m=JFe(h.values,a,l,s.shape,s.dtype);return n.makeTensorInfo(l,s.dtype,m)}const{isPacked:c}=n.texData.get(s.dataId),u=GI(s.shape,a,l);if(c||!u){const h=de().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new iBe(l):new rBe(l),m=[a];return n.runWebGLProgram(h,[s],s.dtype,m)}return n.uploadToGPU(s.dataId),oBe(s,a,l,n)}const aBe={kernelName:Fw,backendName:"webgl",kernelFunc:pm};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lBe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockShape:i,crops:o}=r;F(s.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const a=i.reduce((w,E)=>w*E),l=hy(s.shape,i,a),c=fy(l.length,i.length),u=my(s.shape,i,a),h=YI(o,i.length),m=JI(u,o,i.length),p=[],y=Ae({inputs:{x:s},backend:n,attrs:{shape:l}}),v=Is({inputs:{x:y},backend:n,attrs:{perm:c}}),x=Ae({inputs:{x:v},backend:n,attrs:{shape:u}}),b=pm({inputs:{x},backend:n,attrs:{begin:h,size:m}});return p.push(y),p.push(v),p.push(x),p.forEach(w=>n.disposeIntermediateTensorInfo(w)),b},cBe={kernelName:Qx,backendName:"webgl",kernelFunc:lBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uBe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,weights:i}=e,{size:o}=r,a=n.readSync(s.dataId),l=n.readSync(i.dataId),c=xW(a,l,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,c)}const dBe={kernelName:w$,backendName:"webgl",kernelFunc:uBe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hBe=`
  int r = int(a.r) & int(b.r);
  int g = int(a.g) & int(b.g);
  int rb = int(a.b) & int(b.b);
  int ra = int(a.a) & int(b.a);
  return vec4(r, g, rb, ra);
`,fBe=`
  return float(int(a.r) & int(b.r));
`;function mBe(t){const{inputs:e,backend:n}=t,{a:r,b:s}=e,i=de().getBool("WEBGL_PACK_BINARY_OPERATIONS"),o=de().getNumber("WEBGL_VERSION");if(n.shouldExecuteOnCPU([r,s])||o===1){const l=n.texData.get(r.dataId).values,c=n.texData.get(s.dataId).values,[u,h]=EFe(r.shape,s.shape,l,c,r.dtype),m=n.makeTensorInfo(h,r.dtype),p=n.texData.get(m.dataId);return p.values=u,m}let a;return i?a=new fm(hBe,r.shape,s.shape,!1):a=new xd(fBe,r.shape,s.shape),n.runWebGLProgram(a,[r,s],r.dtype)}const pBe={kernelName:E$,backendName:"webgl",kernelFunc:mBe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gBe(t){const{inputs:e,backend:n}=t,{s0:r,s1:s}=e,i=n.readSync(r.dataId),o=n.readSync(s.dataId),a=ut(Array.from(i),Array.from(o));return n.makeTensorInfo([a.length],"int32",Int32Array.from(a))}const yBe={kernelName:Ej,backendName:"webgl",kernelFunc:gBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bBe="return float(a != b);",DW=Jr({opSnippet:bBe,cpuKernelImpl:UFe,dtype:"bool"}),vBe={kernelName:Sw,backendName:"webgl",kernelFunc:DW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sy(t){const{inputs:e,backend:n}=t,{input:r}=e,s=n.texData.get(r.dataId);return di({inputs:{x:s.complexTensorInfos.real},backend:n})}const xBe={kernelName:q$,backendName:"webgl",kernelFunc:Sy};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wBe="return float(int(x));";function EBe(t,e){const n=new ba(t.shape,wBe),r=e.runWebGLProgram(n,[t],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D_(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{dtype:i}=r;if(i==="complex64"){if(s.dtype==="complex64")return di({inputs:{x:s},backend:n});const o=Pr(s.shape),a=D_({inputs:{x:s},backend:n,attrs:{dtype:"float32"}}),l=au({inputs:{real:a,imag:o},backend:n});return o.dispose(),n.disposeIntermediateTensorInfo(a),l}if(s.dtype==="complex64"){const o=Sy({inputs:{input:s},backend:n}),a=D_({inputs:{x:o},backend:n,attrs:{dtype:i}});return n.disposeIntermediateTensorInfo(o),a}if(!yj(s.dtype,i)){const o=di({inputs:{x:s},backend:n});return{dataId:o.dataId,shape:o.shape,dtype:i}}if(n.shouldExecuteOnCPU([s])){const o=n.texData.get(s.dataId).values,[a,l,c]=kFe(o,s.shape,s.dtype,i);return n.makeTensorInfo(a,l,c)}if(i==="int32")return EBe(s,n);if(i==="bool"){const o=n.makeTensorInfo([],"bool",ls("bool",1)),l=DW({inputs:{a:s,b:o},backend:n});return n.disposeIntermediateTensorInfo(o),l}throw new Error(`Error in Cast: failed to cast ${s.dtype} to ${i}`)}const kBe={kernelName:v0,backendName:"webgl",kernelFunc:D_};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sz="return ceil(x);",NBe=zt({opSnippet:sz,packedOpSnippet:sz,cpuKernelImpl:NFe}),CBe={kernelName:x0,backendName:"webgl",kernelFunc:NBe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _Be{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class SBe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TBe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{clipValueMin:i,clipValueMax:o}=r;let a;de().getBool("WEBGL_PACK_CLIP")?a=new SBe(s.shape):a=new _Be(s.shape);const l=[[i],[o]];return n.runWebGLProgram(a,[s],s.dtype,l)}const $Be={kernelName:w0,backendName:"webgl",kernelFunc:TBe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class IBe{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iz(t,e){return{dataId:e.dataId,dtype:e.dtype,shape:t.shape}}function ABe(t){const{inputs:e,backend:n}=t,{x:r}=e,s=n.texData.get(r.dataId),i=new IBe(r.shape),o=[iz(r,s.complexTensorInfos.real),iz(r,s.complexTensorInfos.imag)];return n.runWebGLProgram(i,o,o[0].dtype)}const RBe={kernelName:ew,backendName:"webgl",kernelFunc:ABe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class PBe{constructor(e){this.outputShape=[],this.outputShape=$a(e,1),this.variableNames=e.map((o,a)=>`T${a}`);const n=new Array(e.length-1);n[0]=e[0][1];for(let o=1;o<n.length;o++)n[o]=n[o-1]+e[o][1];const r=[`if (yC < ${n[0]}) setOutput(getT0(yR, yC));`];for(let o=1;o<n.length;o++){const a=n[o-1];r.push(`else if (yC < ${n[o]}) setOutput(getT${o}(yR, yC-${a}));`)}const s=n.length,i=n[n.length-1];r.push(`else setOutput(getT${s}(yR, yC-${i}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${r.join(`
        `)}
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class DBe{constructor(e,n){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=$a(e,n);const r=this.outputShape,s=r.length,i=cn(s),o=ks("coords",s),a=["x","y","z","w","u","v"].slice(0,s);this.variableNames=e.map((v,x)=>`T${x}`);const l=new Array(e.length-1);l[0]=e[0][n];for(let v=1;v<l.length;v++)l[v]=l[v-1]+e[v][n];const c=a[n],u=a.slice(-2),h=a.join();let m=`if (${c} < ${l[0]}) {
        return getChannel(
            getT0(${h}), vec2(${u.join()}));
        }`;for(let v=1;v<l.length;v++){const x=l[v-1];m+=`
        if (${c} < ${l[v]}  && ${c} >= ${l[v-1]}) {
          return getChannel(
            getT${v}(${tv(a,c,x)}),
            vec2(${tv(u,c,x)}));
        }`}const p=l.length,y=l[l.length-1];m+=`
        return getChannel(
          getT${p}(${tv(a,c,y)}),
          vec2(${tv(u,c,y)}));`,this.userCode=`
      float getValue(${a.map(v=>"int "+v)}) {
        ${m}
      }

      void main() {
        ${i} coords = getOutputCoords();
        vec4 result = vec4(getValue(${o}), 0., 0., 0.);

        ${o[s-1]} = ${o[s-1]} + 1;
        if (${o[s-1]} < ${r[s-1]}) {
          result.g = getValue(${o});
        }

        ${o[s-2]} = ${o[s-2]} + 1;
        if (${o[s-2]} < ${r[s-2]}) {
          result.a = getValue(${o});
        }

        ${o[s-1]} = ${o[s-1]} - 1;
        if (${o[s-2]} < ${r[s-2]} &&
            ${o[s-1]} < ${r[s-1]}) {
          result.b = getValue(${o});
        }
        setOutput(result);
      }
    `}}function tv(t,e,n){const r=t.indexOf(e);return t.map((i,o)=>o===r?`${i} - ${n}`:i).join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E2(t){const{inputs:e,backend:n}=t,{input:r}=e,s=n.texData.get(r.dataId);return di({inputs:{x:s.complexTensorInfos.imag},backend:n})}const OBe={kernelName:F$,backendName:"webgl",kernelFunc:E2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hp(t,e,n){const r=t[0].dtype;if(r==="complex64"){const p=t.map(w=>Sy({inputs:{input:w},backend:n})),y=t.map(w=>E2({inputs:{input:w},backend:n})),v=hp(p,e,n),x=hp(y,e,n),b=au({inputs:{real:v,imag:x},backend:n});return p.forEach(w=>n.disposeIntermediateTensorInfo(w)),y.forEach(w=>n.disposeIntermediateTensorInfo(w)),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(x),b}let s=n.shouldExecuteOnCPU(t);if(r==="string"&&(s=!0),s){const p=t.map(N=>{const S=[-1,pe(N.shape.slice(e))];return Ae({inputs:{x:N},backend:n,attrs:{shape:S}})}),y=p.map(N=>({vals:n.readSync(N.dataId),shape:N.shape})),v=$a(p.map(N=>N.shape),1),x=p[0].shape[0]===1,b=CFe(y,v,r,x),w=$a(t.map(N=>N.shape),e),E=n.makeTensorInfo(w,r,b);return p.forEach(N=>n.disposeIntermediateTensorInfo(N)),E}const i=t.filter(p=>pe(p.shape)>0),o=de().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&i[0].shape.length>1;if(i.length===1){const p=o?new ba(t[0].shape,sc):new xc(t[0].shape,sc);return n.runWebGLProgram(p,t,r)}const a=de().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(i.length>a){const p=[];for(let v=0;v<i.length;v+=a){const x=i.slice(v,v+a);p.push(hp(x,e,n))}const y=hp(p,e,n);for(const v of p)n.disposeIntermediateTensorInfo(v);return y}if(o){const p=new DBe(i.map(y=>y.shape),e);return n.runWebGLProgram(p,i,r)}const{tensors2D:l,outShape:c}=LBe(i,e,n),u=new PBe(l.map(p=>p.shape)),h=n.runWebGLProgram(u,l,r);l.forEach(p=>n.disposeIntermediateTensorInfo(p));const m=Ae({inputs:{x:h},attrs:{shape:c},backend:n});return n.disposeIntermediateTensorInfo(h),m}function LBe(t,e,n){const r=$a(t.map(i=>i.shape),e);return{tensors2D:t.map(i=>Ae({inputs:{x:i},attrs:{shape:[-1,pe(i.shape.slice(e))]},backend:n})),outShape:r}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OW(t){const{inputs:e,backend:n,attrs:r}=t,{axis:s}=r,i=xt(s,e[0].shape)[0],o=e.map(c=>c.shape);KI(o,i);const a=$a(e.map(c=>c.shape),i);if(pe(a)===0)return n.makeTensorInfo(a,e[0].dtype,[]);const l=e.filter(c=>pe(c.shape)>0);return l.length===1?di({inputs:{x:l[0]},backend:n}):hp(l,i,n)}const MBe={kernelName:tw,backendName:"webgl",kernelFunc:OW};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class LW{constructor(e,n=!1,r=null,s=!1,i=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;const o=e.padInfo.top,a=e.padInfo.left,l=e.strideHeight,c=e.strideWidth,u=e.dilationHeight,h=e.dilationWidth,m=e.filterHeight,p=e.filterWidth,y=Math.floor(e.inChannels/4)*4,v=e.inChannels%4,x=e.dataFormat==="channelsLast",b=x?1:2,w=x?2:3,E=x?3:1;let N="",C="";r&&(s?N=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:i?N=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:N=`
          float activation(float x) {
            ${r}
          }
        `,C="result = activation(result);");const S=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${N}

      const ivec2 strides = ivec2(${l}, ${c});
      const ivec2 pads = ivec2(${o}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${E}];

        ivec2 xRCCorner =
            ivec2(coords[${b}], coords[${w}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${m}; wR++) {
          int xR = xRCorner + wR * ${u};

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${p}; wC++) {
            int xC = xCCorner + wC * ${h};

            if (xC < 0 || xC >= ${e.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${y}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${x}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${v===1}) {

              if (${x}) {
                dotProd +=
                    getX(batch, xR, xC, ${y}) *
                    getW(wR, wC, ${y}, d2);
              } else {
                dotProd +=
                    getX(batch, ${y}, xR, xC) *
                    getW(wR, wC, ${y}, d2);
              }

            } else if (${v===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${y}, d2),
                getW(wR, wC, ${y} + 1, d2)
              );

              if (${x}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${y}),
                  getX(batch, xR, xC, ${y} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${y}, xR, xC),
                  getX(batch, ${y} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${v===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${y}, d2),
                getW(wR, wC, ${y} + 1, d2),
                getW(wR, wC, ${y} + 2, d2)
              );

              if (${x}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${y}),
                  getX(batch, xR, xC, ${y} + 1),
                  getX(batch, xR, xC, ${y} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${y}, xR, xC),
                  getX(batch, ${y} + 1, xR, xC),
                  getX(batch, ${y} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${S}
        ${C}
        setOutput(result);
      }
    `}}class zBe{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const n=e.padInfo.front,r=e.padInfo.top,s=e.padInfo.left,i=e.strideDepth,o=e.strideHeight,a=e.strideWidth,l=e.dilationDepth,c=e.dilationHeight,u=e.dilationWidth,h=e.filterDepth,m=e.filterHeight,p=e.filterWidth,y=Math.floor(e.inChannels/4)*4,v=e.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${i}, ${o}, ${a});
      const ivec3 pads = ivec3(${n}, ${r}, ${s});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${h}; wF++) {
          int xF = xFCorner + wF * ${l};

          if (xF < 0 || xF >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${m}; wR++) {
            int xR = xRCorner + wR * ${c};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${p}; wC++) {
              int xC = xCCorner + wC * ${u};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${y}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${v===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${y}) *
                  getW(wF, wR, wC, ${y}, d2);
              } else if (${v===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${y}),
                  getX(batch, xF, xR, xC, ${y} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${y}, d2),
                  getW(wF, wR, wC, ${y} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${v===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${y}),
                  getX(batch, xF, xR, xC, ${y} + 1),
                  getX(batch, xF, xR, xC, ${y} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${y}, d2),
                  getW(wF, wR, wC, ${y} + 1, d2),
                  getW(wF, wR, wC, ${y} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class MW{constructor(e,n=!1,r=null,s=!1,i=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=ms(this.outputShape.length);const o=e.padInfo.left,a=e.strideWidth,l=e.dilationWidth,c=e.filterHeight,u=e.filterWidth,h=u;let m=`
       int xR; int xC; int xCOffset;
       vec4 wTexel; vec4 previous; vec4 final;`;for(let x=0;x<u;x++)m+=`
           vec4 xTexelC${x*2};
           int xTexelC${x*2}Ready;
           vec4 xTexelC${x*2+1};
           int xTexelC${x*2+1}Ready;
           vec4 xC${x};`;m+=`
     for (int r = 0; r < ${c}; r++) {
      for (int d1 = 0; d1 < ${e.inChannels}; d1 += 2) {
       `;for(let x=0;x<u;x++)m+=`
           xTexelC${x*2} = vec4(0.0);
           xTexelC${x*2}Ready = 0;
           xTexelC${x*2+1} = vec4(0.0);
           xTexelC${x*2+1}Ready = 0;
           xC${x} = vec4(0.0);`;m+=`
         xR = xRCorner + r * dilations[0];
         if (xR >=0 && xR < inDims[0]) {
       `;for(let x=0;x<(h+1)/2;x++){const b=x*2;if(m+=`
           xC = xCCorner + ${b*l};
           `,a===1){if(b<u&&(o%2===1?(m+=`
                 xCOffset = xC + 1;
                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b}Ready == 0) {
                   xTexelC${b} = getX(batch, xR, xCOffset, d1);

                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${b}.zw = vec2(0.0);
                   }
                   xTexelC${b}Ready = 1;
                 }
               `,l===1&&b>0?m+=`
                 xC${b} = vec4(xTexelC${b-2}.zw, xTexelC${b}.xy);
                 `:m+=`
                   xCOffset = xC + 1 - 2;

                   if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       previous.zw = vec2(0.0);
                     }

                     xC${b} = vec4(previous.zw, xTexelC${b}.xy);
                   } else {
                     xC${b} = vec4(0.0, 0.0, xTexelC${b}.xy);
                   }
                   `):m+=`
                 if (xC >= 0 && xC < inDims[1] && xTexelC${b}Ready == 0) {
                   xTexelC${b} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${b}.zw = vec2(0.0);
                   }
                   xTexelC${b}Ready = 1;
                 }

                 xC${b} = xTexelC${b};
                 `,b+1<u)){const w=o%2===0?d$(l):l;l%2===0&&o%2===1||l%2!==0&&o%2!==1?(m+=`
                   xCOffset = xC + imod(pads[1], 2) + ${w};

                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                     xTexelC${b+1} = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       xTexelC${b+1}.zw = vec2(0.0);
                     }
                     xTexelC${b+1}Ready = 1;
                   }
                   `,l>1?m+=`
                     xCOffset -= 2;
                     if (xCOffset >= 0 && xCOffset < inDims[1]) {
                      previous = getX(batch, xR, xCOffset, d1);
                      xC${b+1} = vec4(previous.zw, xTexelC${b+1}.xy);
                     } else {
                      xC${b+1} = vec4(0.0, 0.0, xTexelC${b+1}.xy);
                     }
                     `:m+=`
                     xC${b+1} = vec4(xTexelC${b}.zw, xTexelC${b+1}.xy);
                     `):w===1?m+=`
                     xC${b+1} = xTexelC${b};
                     `:m+=`
                     xCOffset = xC + ${w};

                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                       xTexelC${b+1} = getX(batch, xR, xCOffset, d1);
                       if (xCOffset + 1 >= inDims[1]) {
                         xTexelC${b+1}.zw = vec2(0.0);
                       }
                       xTexelC${b+1}Ready = 1;
                     }

                     xC${b+1} = xTexelC${b+1};
                     `}}else b<u&&(o%2===1?(m+=`
                 xCOffset = xC + 1 - strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b}Ready == 0) {
                   xTexelC${b} = getX(batch, xR, xCOffset, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${b}.zw = vec2(0.0);
                   }
                   xTexelC${b}Ready = 1;
                 }

                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${b+1}Ready == 0) {
                   xTexelC${b+1} = getX(batch, xR, xC + 1, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xC + 2 >= inDims[1]) {
                     xTexelC${b+1}.zw = vec2(0.0);
                   }
                   xTexelC${b+1}Ready = 1;
                 }

                 xC${b} = vec4(xTexelC${b}.zw, xTexelC${b+1}.zw);
               `,b+1<u&&(m+=`
                   final = vec4(0.0);
                   xCOffset = xC + 1 + strides[1];
                   if(xCOffset >= 0 && xCOffset < inDims[1]) {
                     final = getX(batch, xR, xCOffset, d1);
                   }
                   xC${b+1} = vec4(xTexelC${b+1}.xy, final.xy);
                 `)):(m+=`
                 if(xC >= 0 && xC < inDims[1] && xTexelC${b}Ready == 0) {
                   xTexelC${b} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${b}.zw = vec2(0.0);
                   }
                   xTexelC${b}Ready = 1;
                 }

                 xCOffset = xC + strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                   xTexelC${b+1} = getX(batch, xR, xCOffset, d1);
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${b+1}.zw = vec2(0.);
                   }
                   xTexelC${b+1}Ready = 1;
                 }

                 xC${b} = vec4(
                   xTexelC${b}.xy, xTexelC${b+1}.xy);
               `,b+1<u&&(m+=`
                   xC${b+1} = vec4(xTexelC${b}.zw, xTexelC${b+1}.zw);
                 `)));b<u&&(m+=`
             wTexel = getW(r, ${b}, d1, d2);
             dotProd += xC${b}.xxzz * vec4(wTexel.xy, wTexel.xy);
             if(d1 + 1 < ${e.inChannels}) {
               dotProd += xC${b}.yyww * vec4(wTexel.zw, wTexel.zw);
             }
           `,b+1<u&&(m+=`
               wTexel = getW(r, ${b+1}, d1, d2);
               dotProd += xC${b+1}.xxzz * vec4(wTexel.xy, wTexel.xy);
               if(d1 + 1 < ${e.inChannels}) {
                 dotProd += xC${b+1}.yyww * vec4(wTexel.zw, wTexel.zw);
               }
             `))}m+=`
     }
   `,m+=`
     }
   `,m+=`
     }
   `;let p="",y="";r&&(s?p=`vec4 activation(vec4 a) {
           vec4 b = getPreluActivationWeightsAtOutCoords();
           ${r}
         }`:i?p=`vec4 activation(vec4 a) {
           vec4 b = getLeakyreluAlphaAtOutCoords();
           ${r}
         }`:p=`vec4 activation(vec4 x) {
           ${r}
         }`,y="result = activation(result);");const v=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
       ${p}

       void main() {
         ivec4 coords = getOutputCoords();
         int batch = coords.x;
         ivec2 xRCCorner = coords.yz * strides - pads;
         int d2 = coords.w;
         int xRCorner = xRCCorner.x;
         int xCCorner = xRCCorner.y;

         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
         vec4 dotProd = vec4(0.000000000000001);

         ${m}

         vec4 result = dotProd - vec4(0.000000000000001);
         ${v}
         ${y}
         setOutput(result);
       }
     `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class FBe{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=ms(this.outputShape.length);const{dataFormat:r}=n,s=As(),i=r==="channelsLast",o=i?1:2,a=i?2:3,l=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${e[2]} && pos < ${e[1]}) {`;let c="";for(let u=0;u<=1;u++)for(let h=0;h<=1;h++)c+=`
          blockIndex = rc.z + ${h};
          pos = rc.y + ${u};

          ${l}
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[${o}] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[${a}] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (${i}) {
                  innerDims = vec2(d1, ch);
                  result[${u*2+h}] = getChannel(
                    getA(rc.x, d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${u*2+h}] = getChannel(
                    getA(rc.x, ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${c}

        ${s.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rx(t,e){const n=t.length;return n>=3?e?[...t.slice(0,-3),t[n-3]*t[n-2],t[n-1]]:[...t.slice(0,-3),t[n-3],t[n-2]*t[n-1]]:!e&&n===1&&t[0]>1?[t[0],1]:null}function zW({x:t,filter:e,convInfo:n,backend:r,bias:s=null,preluActivationWeights:i=null,leakyreluAlpha:o=0,activation:a=null}){const l=t.shape,c=r.texData.get(t.dataId),u=n.inChannels,h=l[0]*l[1]*l[2],m=n.outChannels,p=n.dataFormat==="channelsLast",y=!1,v=!1;let x;const b=[];if(i!=null){const N=rx(i.shape,p);N!=null&&(i=Ae({inputs:{x:i},backend:r,attrs:{shape:N}}),b.push(i))}if(s!=null){const N=rx(s.shape,p);N!=null&&(s=Ae({inputs:{x:s},backend:r,attrs:{shape:N}}),b.push(s))}if(!((h===1||m===1)&&u>IW)&&c.isPacked&&p&&c.texture!=null&&l[2]%2!==0&&Zt(c.shape.slice(-3),l.slice(-3))){const N=l[0]*l[1]*(l[2]+1),C={dataId:t.dataId,shape:[1,N,n.inChannels],dtype:t.dtype},S=c.shape;c.shape=c.shape.slice(),c.shape[c.shape.length-2]++,F(tx(c.shape,C.shape),()=>`packed reshape ${c.shape} to ${C.shape} isn't free`);const T=Ae({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}});b.push(T);const I=nx({a:C,b:T,backend:r,transposeA:y,transposeB:v,bias:s,activation:a,preluActivationWeights:i,leakyreluAlpha:o}),P=r.texData.get(I.dataId);F(P.isPacked,()=>"batchMatMul result is expected to be packed"),c.shape=S,P.shape=n.outShape,x=di({inputs:{x:I},backend:r}),x.shape=n.outShape,b.push(I)}else{const N=n.outHeight*n.outWidth,C=Ae({inputs:{x:t},backend:r,attrs:{shape:p?[n.batchSize,N,n.inChannels]:[n.batchSize,n.inChannels,N]}}),S=Ae({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}}),T=nx({a:p?C:S,b:p?S:C,transposeA:!p,transposeB:v,backend:r,bias:s,activation:a,preluActivationWeights:i,leakyreluAlpha:o});x=Ae({inputs:{x:T},backend:r,attrs:{shape:n.outShape}}),b.push(C),b.push(S),b.push(T)}for(const N of b)r.disposeIntermediateTensorInfo(N);return x}function FW({x:t,filter:e,convInfo:n,backend:r,bias:s=null,preluActivationWeights:i=null,leakyreluAlpha:o=0,activation:a=null}){const{filterWidth:l,filterHeight:c,inChannels:u,outWidth:h,outHeight:m,dataFormat:p}=n,y=p==="channelsLast",v=l*c*u,x=m*h,b=[n.batchSize,v,x],w=!0,E=!1,N=[];if(i!=null){const V=rx(i.shape,y);V!=null&&(i=Ae({inputs:{x:i},backend:r,attrs:{shape:V}}),N.push(i))}if(s!=null){const V=rx(s.shape,y);V!=null&&(s=Ae({inputs:{x:s},backend:r,attrs:{shape:V}}),N.push(s))}const C=Ae({inputs:{x:e},backend:r,attrs:{shape:[1,v,pe(e.shape)/v]}});N.push(C);const S=new FBe(b,n),T=[t.shape,[n.padInfo.top,n.padInfo.left],[n.strideHeight,n.strideWidth],[n.dilationHeight,n.dilationWidth],[n.inChannels],[n.filterWidth*n.inChannels],[n.outWidth]],I=r.runWebGLProgram(S,[t],"float32",T),P=Ae({inputs:{x:I},backend:r,attrs:{shape:b}});N.push(I),N.push(P);const R=s!=null,D=i!=null,B=a==="leakyrelu",Z=a?Tg(a,!0):null,z=new $W(y?P.shape:C.shape,y?C.shape:P.shape,y?[n.batchSize,x,n.outChannels]:[n.batchSize,n.outChannels,x],w,E,R,Z,D,B),q=y?[P,C]:[C,P];if(s&&q.push(s),D&&q.push(i),B){const V=r.makeTensorInfo([],"float32",Qc(o,"float32"));q.push(V),N.push(V)}const M=r.runWebGLProgram(z,q,"float32"),U=Ae({inputs:{x:M},backend:r,attrs:{shape:n.outShape}});N.push(M);for(const V of N)r.disposeIntermediateTensorInfo(V);return U}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BBe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i}=e,{strides:o,pad:a,dataFormat:l,dilations:c,dimRoundingMode:u}=r,h=jl(l),m=Xr(s.shape,i.shape,o,c,a,u,!1,h);let p;if(m.filterHeight===1&&m.filterWidth===1&&m.dilationHeight===1&&m.dilationWidth===1&&m.strideHeight===1&&m.strideWidth===1&&(m.padInfo.type==="SAME"||m.padInfo.type==="VALID"))p=zW({x:s,filter:i,convInfo:m,backend:n});else if(m.strideWidth<=2&&h==="channelsLast"&&de().getBool("WEBGL_EXP_CONV")){const v=new MW(m),x=[[m.padInfo.top,m.padInfo.left],[m.strideHeight,m.strideWidth],[m.dilationHeight,m.dilationWidth],[m.inHeight,m.inWidth]];p=n.runWebGLProgram(v,[s,i],"float32",x)}else if(de().getBool("WEBGL_CONV_IM2COL"))p=FW({x:s,filter:i,convInfo:m,backend:n});else{const v=new LW(m);p=n.runWebGLProgram(v,[s,i],"float32")}const y=Ae({inputs:{x:p},backend:n,attrs:{shape:m.outShape}});return n.disposeIntermediateTensorInfo(p),y}const VBe={kernelName:nw,backendName:"webgl",kernelFunc:BBe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jBe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,s=e.padInfo.top,i=e.padInfo.left,o=e.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${s};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${i};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              ${o?`float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);`:`float dyValue = getDy(b, d2, yR, yC);
              float xValue = getX(b, d1, xR, xC);
              dotProd += (xValue * dyValue);`}
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class UBe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,s=e.strideHeight,i=e.strideWidth,o=e.dataFormat==="channelsLast",a=n-1-e.padInfo.top,l=r-1-e.padInfo.left,c=o?1:2,u=o?2:3,h=o?3:1;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${h}];

        ivec2 dyCorner = ivec2(coords[${c}], coords[${u}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${s}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            for (int d2 = 0; d2 < ${e.outChannels}; d2++) {

              if (${o}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class HBe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideDepth,r=e.strideHeight,s=e.strideWidth,i=e.padInfo.front,o=e.padInfo.top,a=e.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yF = 0; yF < ${e.outDepth}; yF++) {
            int xF = wF + yF * ${n} - ${i};

            if (xF < 0 || xF >= ${e.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${e.outHeight}; yR++) {
              int xR = wR + yR * ${r} - ${o};

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${e.outWidth}; yC++) {
                int xC = wC + yC * ${s} - ${a};

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class GBe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,s=e.filterWidth,i=e.strideDepth,o=e.strideHeight,a=e.strideWidth,l=n-1-e.padInfo.front,c=r-1-e.padInfo.top,u=s-1-e.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${l}, ${c}, ${u});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${n}; wF++) {
          float dyF = float(dyFCorner + wF) / ${i}.0;

          if (dyF < 0.0 || dyF >= ${e.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${n} - 1 - wF;

          for (int wR = 0; wR < ${r}; wR++) {
            float dyR = float(dyRCorner + wR) / ${o}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${r} - 1 - wR;

            for (int wC = 0; wC < ${s}; wC++) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${s} - 1 - wC;

              for (int d2 = 0; d2 < ${e.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WBe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:i}=e,{strides:o,pad:a,dataFormat:l,dimRoundingMode:c,filterShape:u}=r,h=jl(l),m=Xr(s.shape,u,o,1,a,c,!1,h),p=new jBe(m);return n.runWebGLProgram(p,[s,i],"float32")}const qBe={kernelName:N$,backendName:"webgl",kernelFunc:WBe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class KBe{constructor(e){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=e.inShape,this.enableShapeUniforms=ms(this.outputShape.length);const n=e.filterHeight,r=e.filterWidth,s=n-1-e.padInfo.top,i=r-1-e.padInfo.left;this.userCode=`
      const ivec2 pads = ivec2(${s}, ${i});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];

        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        vec4 result = vec4(0.);
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / strides[0];
          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);
          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            int wCPerm = ${r} - 1 - wC;

            float dyC = float(dyCCorner + wC) / strides[1];
            bool idyCVal = (dyC >= 0.0) && (dyC < ${e.outWidth}.0)
              && (fract(dyC) == 0.0);
            int idyC = int(dyC);

            float dyC2 = float(dyCCorner + wC + 1) / strides[1];
            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ${e.outWidth}.0)
              && (fract(dyC2) == 0.0);
            int idyC2 = int(dyC2);

            if (idyCVal && idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?
                  dySample : getDy(batch, idyR, idyC2, d2);

                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));

                dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample2.xy : dySample2.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC2, d2);
                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            }
          }
        }
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZBe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:i}=e,{inputShape:o,strides:a,pad:l,dataFormat:c,dimRoundingMode:u}=r,h=jl(c),m=Xr(o,i.shape,a,1,l,u,!1,h);if(de().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&h==="channelsLast"){const p=[[m.strideHeight,m.strideWidth]],y=new KBe(m);return n.runWebGLProgram(y,[s,i],"float32",p)}else{const p=new UBe(m);return n.runWebGLProgram(p,[s,i],"float32")}}const XBe={kernelName:rw,backendName:"webgl",kernelFunc:ZBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YBe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i}=e,{strides:o,pad:a,dilations:l}=r,c=eu(s.shape,i.shape,o,l,a),u=new zBe(c);return n.runWebGLProgram(u,[s,i],"float32")}const JBe={kernelName:sw,backendName:"webgl",kernelFunc:YBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QBe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:i}=e,{strides:o,pad:a,filterShape:l}=r,c=eu(s.shape,l,o,1,a),u=new HBe(c);return n.runWebGLProgram(u,[s,i],"float32")}const eVe={kernelName:C$,backendName:"webgl",kernelFunc:QBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tVe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:i}=e,{pad:o,strides:a,inputShape:l}=r,c=eu(l,i.shape,a,1,o),u=new GBe(c);return n.runWebGLProgram(u,[s,i],"float32")}const nVe={kernelName:_$,backendName:"webgl",kernelFunc:tVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rVe=mm+`
  return cos(x);
`,sVe=`
  vec4 result = cos(x);
  bvec4 isNaN = isnan(x);
  ${Vd}
  return result;
`,iVe=zt({opSnippet:rVe,packedOpSnippet:sVe}),oVe={kernelName:E0,backendName:"webgl",kernelFunc:iVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aVe=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,lVe=zt({opSnippet:aVe}),cVe={kernelName:k0,backendName:"webgl",kernelFunc:lVe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uVe{constructor(e,n,r,s,i){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[o,a,l,c]=e,[u]=n,[h,m]=r;this.outputShape=[u,h,m,c];const p=s==="bilinear"?1:0,[y,v]=[`${a-1}.0`,`${l-1}.0`],[x,b,w]=h>1?[`${(a-1)/(h-1)}`,"(y2-y1) * height_ratio",`y1*${y} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${y}`],[E,N,C]=m>1?[`${(l-1)/(m-1)}`,"(x2-x1) * width_ratio",`x1*${v} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${v}`];this.userCode=`
      const float height_ratio = float(${x});
      const float width_ratio = float(${E});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${o}) {
          return;
        }

        float height_scale = ${b};
        float width_scale = ${N};

        float in_y = ${w};
        if( in_y < 0.0 || in_y > ${y} ) {
          setOutput(float(${i}));
          return;
        }
        float in_x = ${C};
        if( in_x < 0.0 || in_x > ${v} ) {
          setOutput(float(${i}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${p} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dVe=t=>{const{inputs:e,backend:n,attrs:r}=t,{image:s,boxes:i,boxInd:o}=e,{cropSize:a,method:l,extrapolationValue:c}=r,u=new uVe(s.shape,i.shape,a,l,c);return n.runWebGLProgram(u,[s,i,o],"float32")},hVe={kernelName:T$,backendName:"webgl",kernelFunc:dVe};var Ig;(function(t){t.Prod="*",t.Sum="+"})(Ig||(Ig={}));class oz{constructor(e,n,r,s){this.op=e,this.outputShape=n,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const i=this.outputShape.length,o=this.op===Ig.Prod?"1.0":"0.0",a=r?o:`getX(${az(i,"coords",this.op)})`,l=this.outputShape[this.outputShape.length-1];let c="",u="";r?(c=s?`end != ${l-1}`:"end != 0",u=s?"end + 1":"end - 1"):(c=s?`end + pow2 < ${l}`:"end >= pow2",u=s?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${cn(i)} coords = getOutputCoords();
        int end = ${lz(i,"coords",this.op)};
        float val = ${a};
        int pow2 = int(pow(2.0, index));
        if (${c}) {
          int idx = ${u};
          ${lz(i,"coords",this.op)} = idx;
          val ${this.op}= getX(${az(i,"coords",this.op)});
        }
        setOutput(val);
      }
    `}}function az(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.x, ${e}.y`;if(t===3)return`${e}.x, ${e}.y, ${e}.z`;if(t===4)return`${e}.x, ${e}.y, ${e}.z, ${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}function lz(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.y`;if(t===3)return`${e}.z`;if(t===4)return`${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BW(t,e,n,r,s,i){const o=e.shape.length,a=jn([r],o);let l=e;a!=null&&(l=Is({inputs:{x:e},backend:n,attrs:{perm:a}}));const c=tr(1,o)[0];if(c!==o-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${e.shape.length-1} but got axis=${r}`);const u=l.shape[c];let h=di({inputs:{x:l},backend:n});for(let m=0;m<=Math.ceil(Math.log2(u))-1;m++){const p=new oz(t,l.shape,!1,i),y=[[m]],v=h;h=n.runWebGLProgram(p,[h],h.dtype,y),n.disposeIntermediateTensorInfo(v)}if(s){const m=new oz(t,l.shape,s,i),p=h;h=n.runWebGLProgram(m,[h],h.dtype),n.disposeIntermediateTensorInfo(p)}if(a!=null){const m=tu(a),p=Is({inputs:{x:h},backend:n,attrs:{perm:m}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(l),p}return h}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fVe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,exclusive:o,reverse:a}=r;return BW(Ig.Prod,s,n,i,o,a)}const mVe={kernelName:S$,backendName:"webgl",kernelFunc:fVe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pVe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,exclusive:o,reverse:a}=r;return BW(Ig.Sum,s,n,i,o,a)}const gVe={kernelName:iw,backendName:"webgl",kernelFunc:pVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yVe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,weights:i}=e,{size:o,binaryOutput:a}=r;if(s.shape.length===1){const l=n.readSync(s.dataId),c=n.readSync(i.dataId),u=xW(l,c,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,u)}else if(s.shape.length===2){const l=n.bufferSync(s),c=n.bufferSync(i),u=wFe(l,c,o,a);return n.makeTensorInfo(u.shape,i.dtype,u.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${s.shape.length}.`)}const bVe={kernelName:$$,backendName:"webgl",kernelFunc:yVe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vVe{constructor(e,n,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=n,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${n};
      int offset_h = imod(h, ${n});
      int in_w = w / ${n};
      int offset_w = imod(w, ${n});
      int offset_d = (offset_h * ${n} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xVe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockSize:i,dataFormat:o}=r,a=s.shape[0],l=o==="NHWC"?s.shape[1]:s.shape[2],c=o==="NHWC"?s.shape[2]:s.shape[3],u=o==="NHWC"?s.shape[3]:s.shape[1],h=l*i,m=c*i,p=u/(i*i),y=o==="NHWC"?[a,h,m,p]:[a,p,h,m],v=new vVe(y,i,o);return n.runWebGLProgram(v,[s],s.dtype)}const wVe={kernelName:I$,backendName:"webgl",kernelFunc:xVe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class VW{constructor(e,n=!1,r=null,s=!1,i=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=ms(this.outputShape.length);const o=e.filterHeight,a=e.filterWidth,l=e.outChannels/e.inChannels;let c="",u="";r&&(s?c=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:i?c=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:c=`
          float activation(float x) {
            ${r}
          }
        `,u="result = activation(result);");const h=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${c}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${l};
        int q = d2 - d1 * ${l};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${o}; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < ${a}; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${h}
        ${u}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jW{constructor(e,n=!1,r=null,s=!1,i=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=ms(this.outputShape.length);const o=e.outChannels/e.inChannels,a=e.padInfo.left,l=e.strideWidth,c=e.dilationWidth,u=e.filterHeight,h=e.filterWidth,m=h;let p=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`;for(let b=0;b<h;b++)p+=`
          vec4 xTexelC${b*2};
          int xTexelC${b*2}Ready;
          vec4 xTexelC${b*2+1};
          int xTexelC${b*2+1}Ready;
          vec4 xC${b};`;p+=`
    for (int r = 0; r < ${u}; r++) {
      `;for(let b=0;b<h;b++)p+=`
          xTexelC${b*2} = vec4(0.0);
          xTexelC${b*2}Ready = 0;
          xTexelC${b*2+1} = vec4(0.0);
          xTexelC${b*2+1}Ready = 0;
          xC${b} = vec4(0.0);`;p+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(let b=0;b<(m+1)/2;b++){const w=b*2;if(p+=`
          xC = xCCorner + ${w*c};
          `,l===1){if(w<h&&(a%2===1?(p+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${w}Ready == 0) {
                  xTexelC${w} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${w}.zw = vec2(0.0);
                  }
                  xTexelC${w}Ready = 1;
                }
              `,c===1&&w>0?p+=`
                xC${w} = vec4(xTexelC${w-2}.zw, xTexelC${w}.xy);
                `:p+=`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC${w} = vec4(previous.zw, xTexelC${w}.xy);
                  } else {
                    xC${w} = vec4(0.0, 0.0, xTexelC${w}.xy);
                  }
                  `):p+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC${w}Ready == 0) {
                  xTexelC${w} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${w}.zw = vec2(0.0);
                  }
                  xTexelC${w}Ready = 1;
                }

                xC${w} = xTexelC${w};
                `,w+1<h)){const E=a%2===0?d$(c):c;c%2===0&&a%2===1||c%2!==0&&a%2!==1?(p+=`
                  xCOffset = xC + imod(pads[1], 2) + ${E};

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${w+1}Ready == 0) {
                    xTexelC${w+1} = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC${w+1}.zw = vec2(0.0);
                    }
                    xTexelC${w+1}Ready = 1;
                  }
                  `,c>1?p+=`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);
                     xC${w+1} = vec4(previous.zw, xTexelC${w+1}.xy);
                    } else {
                     xC${w+1} = vec4(0.0, 0.0, xTexelC${w+1}.xy);
                    }
                    `:p+=`
                    xC${w+1} = vec4(xTexelC${w}.zw, xTexelC${w+1}.xy);
                    `):E===1?p+=`
                    xC${w+1} = xTexelC${w};
                    `:p+=`
                    xCOffset = xC + ${E};

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${w+1}Ready == 0) {
                      xTexelC${w+1} = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC${w+1}.zw = vec2(0.0);
                      }
                      xTexelC${w+1}Ready = 1;
                    }

                    xC${w+1} = xTexelC${w+1};
                    `}}else w<h&&(a%2===1?(p+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${w}Ready == 0) {
                  xTexelC${w} = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${w}.zw = vec2(0.0);
                  }
                  xTexelC${w}Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${w+1}Ready == 0) {
                  xTexelC${w+1} = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC${w+1}.zw = vec2(0.0);
                  }
                  xTexelC${w+1}Ready = 1;
                }

                xC${w} = vec4(xTexelC${w}.zw, xTexelC${w+1}.zw);
              `,w+1<h&&(p+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC${w+1} = vec4(xTexelC${w+1}.xy, final.xy);
                `)):(p+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC${w}Ready == 0) {
                  xTexelC${w} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${w}.zw = vec2(0.0);
                  }
                  xTexelC${w}Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${w+1}Ready == 0) {
                  xTexelC${w+1} = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${w+1}.zw = vec2(0.);
                  }
                  xTexelC${w+1}Ready = 1;
                }

                xC${w} = vec4(
                  xTexelC${w}.xy, xTexelC${w+1}.xy);
              `,w+1<h&&(p+=`
                  xC${w+1} = vec4(xTexelC${w}.zw, xTexelC${w+1}.zw);
                `)));w<h&&(p+=`
            wTexel = getW(r, ${w}, d1, q);
            dotProd += xC${w} * vec4(wTexel.xz, wTexel.xz);
          `,w+1<h&&(p+=`
              wTexel = getW(r, ${w+1}, d1, q);
              dotProd += xC${w+1} * vec4(wTexel.xz, wTexel.xz);
            `))}p+=`
    }
  `,p+=`
      }
    `;let y="",v="";r&&(s?y=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:i?y=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:y=`vec4 activation(vec4 x) {
          ${r}
        }`,v="result = activation(result);");const x=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${y}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${o};
        int q = d2 - d1 * ${o};
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        ${p}

        vec4 result = dotProd - vec4(0.000000000000001);
        ${x}
        ${v}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EVe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i}=e,{strides:o,pad:a,dilations:l,dimRoundingMode:c}=r;let u=l;u==null&&(u=[1,1]),F(hs(o,u),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${o} and dilations '${u}'`);const h=Xr(s.shape,i.shape,o,u,a,c,!0);let m;de().getBool("WEBGL_PACK_DEPTHWISECONV")&&h.strideWidth<=2&&h.outChannels/h.inChannels===1?m=new jW(h):m=new VW(h);const p=[[h.padInfo.top,h.padInfo.left],[h.strideHeight,h.strideWidth],[h.dilationHeight,h.dilationWidth],[h.inHeight,h.inWidth]];return n.runWebGLProgram(m,[s,i],"float32",p)}const kVe={kernelName:ow,backendName:"webgl",kernelFunc:EVe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class NVe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,s=e.padInfo.top,i=e.padInfo.left,o=e.outChannels/e.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${o} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${s};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${i};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class CVe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,s=e.strideHeight,i=e.strideWidth,o=n-1-e.padInfo.top,a=r-1-e.padInfo.left,l=e.outChannels/e.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${o}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${s}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${l}; dm++) {
              int d2 = d1 * ${l} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Ve(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:i}=e,{strides:o,dilations:a,pad:l,dimRoundingMode:c,filterShape:u}=r,h=Xr(s.shape,u,o,a,l,c,!0),m=new NVe(h);return n.runWebGLProgram(m,[s,i],"float32")}const SVe={kernelName:A$,backendName:"webgl",kernelFunc:_Ve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TVe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:i}=e,{strides:o,dilations:a,pad:l,dimRoundingMode:c,inputShape:u}=r,h=Xr(u,i.shape,o,a,l,c,!0),m=new CVe(h);return n.runWebGLProgram(m,[s,i],"float32")}const $Ve={kernelName:R$,backendName:"webgl",kernelFunc:TVe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class IVe{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AVe(t){const{inputs:e,backend:n}=t,{x:r}=e,s=[...r.shape,...r.shape],i=pe(r.shape),o=Ae({inputs:{x:r},backend:n,attrs:{shape:[i]}}),a=new IVe(i),l=n.runWebGLProgram(a,[o],o.dtype),c=Ae({inputs:{x:l},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(l),c}const RVe={kernelName:kj,backendName:"webgl",kernelFunc:AVe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class PVe{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const{inHeight:n,inWidth:r,padInfo:s,strideHeight:i,strideWidth:o,filterHeight:a,filterWidth:l,dilationHeight:c,dilationWidth:u}=e,{top:h,left:m}=s;this.userCode=`
      const ivec2 strides = ivec2(${i}, ${o});
      const ivec2 pads = ivec2(${h}, ${m});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${a}; h++) {
          int hIn = hBeg + h * ${c};

          if (hIn >= 0 && hIn < ${n}) {
            for (int w = 0; w < ${l}; w++) {
              int wIn = wBeg + w * ${u};

              if (wIn >= 0 && wIn < ${r}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DVe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i}=e,{strides:o,pad:a,dilations:l}=r,c=ay(s.shape,i.shape,o,a,"NHWC",l);let u;const h=new PVe(c);u=n.runWebGLProgram(h,[s,i],"float32");const m=Ae({inputs:{x:u},backend:n,attrs:{shape:c.outShape}});return n.disposeIntermediateTensorInfo(u),m}const OVe={kernelName:aw,backendName:"webgl",kernelFunc:DVe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LVe(t){const{inputs:e,backend:n,attrs:r}=t,{equation:s}=r,i=e,{allDims:o,summedDims:a,idDims:l}=o3(s,i.length);l3(o.length,l,i);const{path:c,steps:u}=c3(a,l),h=u.length;let m=null,p=o.length;const y=[];for(let v=0;v<h;++v){for(const x of u[v]){const{permutationIndices:b,expandDims:w}=a3(p,l[x]);let E;u3(b)?E=i[x]:(E=Is({inputs:{x:i[x]},backend:n,attrs:{perm:b}}),y.push(E));const N=E.shape.slice();for(let C=0;C<w.length;++C)N.splice(w[C],0,1);Zt(E.shape,N)||(E=Ae({inputs:{x:E},backend:n,attrs:{shape:N}}),y.push(E)),m===null?m=E:(m=Y3({inputs:{a:E,b:m},backend:n}),y.push(m))}v<h-1&&(c[v]>=0&&(m=w2({inputs:{x:m},backend:n,attrs:{axis:c[v]-(o.length-p),keepDims:!1}}),y.push(m)),p--)}for(const v of y)v!==m&&n.disposeIntermediateTensorInfo(v);return m}const MVe={kernelName:P$,backendName:"webgl",kernelFunc:LVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zVe="return (x >= 0.0) ? x : (exp(x) - 1.0);",FVe=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,BVe=zt({opSnippet:zVe,packedOpSnippet:FVe}),VVe={kernelName:C0,backendName:"webgl",kernelFunc:BVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jVe="return (b >= 0.0) ? a : a * (b + 1.0);",UVe=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,HVe=t=>{const{inputs:e,backend:n}=t,{dy:r,y:s}=e,i=de().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new fm(UVe,r.shape,s.shape):new xd(jVe,r.shape,s.shape);return n.runWebGLProgram(i,[r,s],r.dtype)},GVe={kernelName:D$,backendName:"webgl",kernelFunc:HVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WVe=`
  return vec4(equal(a, b));
`,qVe="return float(a == b);",KVe=Jr({opSnippet:qVe,packedOpSnippet:WVe,dtype:"bool",cpuKernelImpl:_Fe}),ZVe={kernelName:lw,backendName:"webgl",kernelFunc:KVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XVe=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${QI};
  float a1 = ${e3};
  float a2 = ${t3};
  float a3 = ${n3};
  float a4 = ${r3};
  float a5 = ${s3};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,YVe=zt({opSnippet:XVe}),JVe={kernelName:_0,backendName:"webgl",kernelFunc:YVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QVe=mm+`
  return exp(x);
`,e8e=`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,UW=zt({opSnippet:QVe,packedOpSnippet:e8e,cpuKernelImpl:SFe,dtype:"float32"}),t8e={kernelName:S0,backendName:"webgl",kernelFunc:UW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O_(t){const{inputs:e,attrs:n,backend:r}=t,{dim:s}=n,{input:i}=e,o=i.shape.length,a=i.shape.slice();let l=s;return s<0&&(F(-(o+1)<=s,()=>`Axis must be in the interval [${-(o+1)}, ${o}]`),l=o+s+1),a.splice(l,0,1),Ae({inputs:{x:i},backend:r,attrs:{shape:a}})}const n8e={kernelName:cw,backendName:"webgl",kernelFunc:O_};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cz="return exp(x) - 1.0;",r8e=zt({opSnippet:cz,packedOpSnippet:cz,cpuKernelImpl:TFe}),s8e={kernelName:T0,backendName:"webgl",kernelFunc:r8e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uz{constructor(e,n,r){this.variableNames=["real","imag"];const s=n[1];this.outputShape=n;const i=r?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,o=r?`${s}.0`:"1.0";let a;if(e==="real")a="return real * expR - imag * expI;";else if(e==="imag")a="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${e}.`);this.userCode=`
      const float exponentMultiplier = ${i};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${a}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${s});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${s}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${o};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HW(t,e,n){const r=n.texData.get(t.dataId),s=pe(t.shape),i=t.shape[t.shape.length-1],o=s/i,a=Ae({inputs:{x:t},backend:n,attrs:{shape:[o,i]}}),l=a.shape,c=new uz("real",l,e),u=new uz("imag",l,e),h=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:l},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:l}],m=n.runWebGLProgram(c,h,"float32"),p=n.runWebGLProgram(u,h,"float32"),y=au({inputs:{real:m,imag:p},backend:n});n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(p);const v=Ae({inputs:{x:y},backend:n,attrs:{shape:t.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(y),v}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i8e(t){const{inputs:e,backend:n}=t,{input:r}=e;return HW(r,!1,n)}const o8e={kernelName:O$,backendName:"webgl",kernelFunc:i8e};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class a8e{constructor(e,n){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ty(t){const{backend:e,attrs:n}=t,{shape:r,value:s}=n;let{dtype:i}=n;if(i=i||Qf(s),i==="string"){const o=Jn(i,pe(r));return o.fill(s),e.makeTensorInfo(r,i,o)}else{const o=new a8e(r,s),a=[[s]];return e.runWebGLProgram(o,[],i,a)}}const l8e={kernelName:L$,backendName:"webgl",kernelFunc:Ty};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class c8e{constructor(e){this.variableNames=["Image"],this.outputShape=[];const n=e[2];this.outputShape=e,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${n} - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < ${n}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const u8e={kernelName:M$,backendName:"webgl",kernelFunc:({inputs:t,backend:e})=>{const{image:n}=t,r=e,s=new c8e(n.shape);return r.runWebGLProgram(s,[n],n.dtype)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dz="return floor(x);",d8e=zt({opSnippet:dz,packedOpSnippet:dz,cpuKernelImpl:$Fe}),h8e={kernelName:$0,backendName:"webgl",kernelFunc:d8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const f8e=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,m8e=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,p8e=Jr({opSnippet:f8e,packedOpSnippet:m8e,dtype:"int32"}),g8e={kernelName:I0,backendName:"webgl",kernelFunc:p8e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class y8e{constructor(e){this.variableNames=["A"];const n=As(),[r,s]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${s}.0, ${r}.0);

        vec4 values = ${n.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class b8e{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const n=As(),[r,s]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${s}.0, ${r}.0);
            vec4 values = ${n.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const v8e={kernelName:LEe,backendName:"webgl",kernelFunc:x8e};let uh,jk=de().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function x8e(t){const{inputs:e,backend:n,attrs:r}=t;let{pixels:s}=e;const{numChannels:i}=r,o=typeof HTMLVideoElement<"u"&&s instanceof HTMLVideoElement,a=typeof HTMLImageElement<"u"&&s instanceof HTMLImageElement,[l,c]=o?[s.videoWidth,s.videoHeight]:[s.width,s.height],u=[c,l],h=[c,l,i];if(a||o){const v=de().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(uh==null||v!==jk)&&(jk=v,uh=document.createElement("canvas").getContext("2d",{willReadFrequently:jk})),uh.canvas.width=l,uh.canvas.height=c,uh.drawImage(s,0,0,l,c),s=uh.canvas}const m=n.makeTensorInfo(u,"int32");n.texData.get(m.dataId).usage=Si.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(m.dataId),s);const p=de().getBool("WEBGL_PACK")?new b8e(h):new y8e(h),y=n.runWebGLProgram(p,[m],"int32");return n.disposeData(m.dataId),y}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w8e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i,bias:o,preluActivationWeights:a}=e,{strides:l,pad:c,dataFormat:u,dilations:h,dimRoundingMode:m,activation:p,leakyreluAlpha:y}=r,v=jl(u),x=Xr(s.shape,i.shape,l,h,c,m,!1,v);let b;const w=[],E=o!=null,N=a!=null,C=p==="leakyrelu",S=()=>{const I=[s,i],P=(R,D)=>{if(D==="NCHW"&&R.shape.length===1&&R.shape[0]!==1){const B=Ae({inputs:{x:R},backend:n,attrs:{shape:[R.shape[0],1,1]}});return w.push(B),B}return R};if(E&&I.push(P(o,u)),N&&I.push(P(a,u)),C){const R=n.makeTensorInfo([],"float32",Qc(y,"float32"));I.push(R),w.push(R)}return I};if(x.filterHeight===1&&x.filterWidth===1&&x.dilationHeight===1&&x.dilationWidth===1&&x.strideHeight===1&&x.strideWidth===1&&(x.padInfo.type==="SAME"||x.padInfo.type==="VALID"))b=zW({x:s,filter:i,convInfo:x,backend:n,bias:o,activation:p,preluActivationWeights:a,leakyreluAlpha:y});else if(x.strideWidth<=2&&v==="channelsLast"&&de().getBool("WEBGL_EXP_CONV")){const I=p?Tg(p,!0):null,P=new MW(x,E,I,N,C),R=[[x.padInfo.top,x.padInfo.left],[x.strideHeight,x.strideWidth],[x.dilationHeight,x.dilationWidth],[x.inHeight,x.inWidth]],D=S();b=n.runWebGLProgram(P,D,"float32",R)}else if(de().getBool("WEBGL_CONV_IM2COL"))b=FW({x:s,filter:i,convInfo:x,backend:n,bias:o,activation:p,preluActivationWeights:a,leakyreluAlpha:y});else{const I=p?Tg(p,!1):null,P=new LW(x,E,I,N,C),R=S();b=n.runWebGLProgram(P,R,"float32")}const T=Ae({inputs:{x:b},backend:n,attrs:{shape:x.outShape}});return w.push(b),w.forEach(I=>n.disposeIntermediateTensorInfo(I)),T}const E8e={kernelName:R1,backendName:"webgl",kernelFunc:w8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k8e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i,bias:o,preluActivationWeights:a}=e,{strides:l,pad:c,dilations:u,dimRoundingMode:h,activation:m,leakyreluAlpha:p}=r,y=[];let v=u;v==null&&(v=[1,1]),F(hs(l,v),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${l} and dilations '${v}'`);const x=Xr(s.shape,i.shape,l,v,c,h,!0),b=de().getBool("WEBGL_PACK_DEPTHWISECONV")&&x.strideWidth<=2&&x.outChannels/x.inChannels===1,w=m?Tg(m,b):null,E=[s,i],N=o!=null,C=a!=null,S=m==="leakyrelu";if(N&&E.push(o),C&&E.push(a),S){const R=n.makeTensorInfo([],"float32",Qc(p,"float32"));E.push(R),y.push(R)}let T;b?T=new jW(x,N,w,C,S):T=new VW(x,N,w,C,S);const I=[[x.padInfo.top,x.padInfo.left],[x.strideHeight,x.strideWidth],[x.dilationHeight,x.dilationWidth],[x.inHeight,x.inWidth]],P=n.runWebGLProgram(T,E,"float32",I);return y.forEach(R=>n.disposeIntermediateTensorInfo(R)),P}const N8e={kernelName:jj,backendName:"webgl",kernelFunc:k8e};class C8e{constructor(e,n,r,s){this.sliceDim=e,this.strides=n,this.paramsShape=s,this.variableNames=["x","indices"],this.outputShape=r;const i=cn(r.length);let o=`
    int index;`;for(let a=0;a<this.sliceDim;a++)o+=`
          index = round(getIndices(coords[0], ${a}));
          out_of_bounds = out_of_bounds || index < 0;
          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[a]};
          flattenIndex += index * ${this.strides[a]};`;this.userCode=`
         void main() {
          ${i} coords = getOutputCoords();
          int flattenIndex = 0;
          bool out_of_bounds = false;

          ${o}

          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _8e(t){const{inputs:e,backend:n}=t,{params:r,indices:s}=e,i=s.shape,o=i[i.length-1],a=pe(r.shape),[l,c,u,h]=jI(r,s),m=Ae({inputs:{x:s},backend:n,attrs:{shape:[c,o]}}),p=Ae({inputs:{x:r},backend:n,attrs:{shape:[pe(r.shape)/u,u]}});if(n.shouldExecuteOnCPU([r,s])||r.dtype==="string"){const b=n.readSync(s.dataId),w=n.bufferSync(r),E=IFe(b,w,r.dtype,c,o,u,h,r.shape,a);return n.makeTensorInfo(l,r.dtype,E.values)}const y=new C8e(o,h,[c,u],r.shape),v=n.runWebGLProgram(y,[p,m],p.dtype),x=Ae({inputs:{x:v},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(v),x}const S8e={kernelName:Nj,backendName:"webgl",kernelFunc:_8e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class T8e{constructor(e,n){this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;const r=cn(this.rank),s=$8e(e);this.userCode=`
      void main() {
        ${r} resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < ${e[2]}) ? 1.0 : 0.0;
        setOutput(inBounds * getA(${s}));
      }
    `}}function $8e(t,e){const n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[];for(let s=0;s<t.length;s++)s===2?r.push("index"):r.push(`${n[s]}`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GW(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,indices:i}=e,{axis:o,batchDims:a}=r,l=xt(o,s.shape)[0];if(de().get("DEBUG")){const w=n.readSync(i.dataId),E=s.shape[l];for(let N=0;N<w.length;++N){const C=w[N];F(C<=E-1&&C>=0,()=>`GatherV2: the index value ${C} is not in [0, ${E-1}]`)}}const c=h3(s,i,l,a),u=pe(i.shape),h=[],m=Ae({inputs:{x:s},backend:n,attrs:{shape:[c.batchSize,c.outerSize,c.dimSize,c.sliceSize]}}),p=Ae({inputs:{x:i},backend:n,attrs:{shape:[c.batchSize,u/c.batchSize]}});h.push(m),h.push(p);const y=[c.batchSize,c.outerSize,u/c.batchSize,c.sliceSize];if(n.shouldExecuteOnCPU([s,i])||s.dtype==="string"){const w=n.bufferSync(p),E=n.bufferSync(m),N=AFe(E,w,y);return h.forEach(C=>n.disposeIntermediateTensorInfo(C)),n.makeTensorInfo(c.outputShape,N.dtype,N.values)}const v=new T8e(m.shape,y),x=n.runWebGLProgram(v,[m,p],m.dtype);h.push(x);const b=Ae({inputs:{x},backend:n,attrs:{shape:c.outputShape}});return h.forEach(w=>n.disposeIntermediateTensorInfo(w)),b}const I8e={kernelName:dw,backendName:"webgl",kernelFunc:GW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A8e="return float(a > b);",R8e=`
  return vec4(greaterThan(a, b));
`,P8e=Jr({opSnippet:A8e,packedOpSnippet:R8e,cpuKernelImpl:RFe,dtype:"bool"}),D8e={kernelName:hw,backendName:"webgl",kernelFunc:P8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const O8e="return float(a >= b);",L8e=`
  return vec4(greaterThanEqual(a, b));
`,M8e=Jr({opSnippet:O8e,packedOpSnippet:L8e,dtype:"bool",cpuKernelImpl:PFe}),z8e={kernelName:A0,backendName:"webgl",kernelFunc:M8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F8e(t){const{inputs:e,backend:n}=t,{input:r}=e;return HW(r,!0,n)}const B8e={kernelName:z$,backendName:"webgl",kernelFunc:F8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const V8e="return float(!isnan(x) && !isinf(x));",j8e=zt({opSnippet:V8e,dtype:"bool"}),U8e={kernelName:P0,backendName:"webgl",kernelFunc:j8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H8e="return float(isinf(x));",G8e=zt({opSnippet:H8e,dtype:"bool"}),W8e={kernelName:D0,backendName:"webgl",kernelFunc:G8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const q8e="return float(isnan(x));",K8e=zt({opSnippet:q8e,dtype:"bool"}),Z8e={kernelName:O0,backendName:"webgl",kernelFunc:K8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X8e="return float(a < b);",Y8e=`
  return vec4(lessThan(a, b));
`,J8e=Jr({opSnippet:X8e,packedOpSnippet:Y8e,cpuKernelImpl:DFe,dtype:"bool"}),Q8e={kernelName:mw,backendName:"webgl",kernelFunc:J8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eje="return float(a <= b);",tje=`
  return vec4(lessThanEqual(a, b));
`,nje=Jr({opSnippet:eje,packedOpSnippet:tje,cpuKernelImpl:OFe,dtype:"bool"}),rje={kernelName:pw,backendName:"webgl",kernelFunc:nje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sje(t){const{backend:e,attrs:n}=t,{start:r,stop:s,num:i}=n,o=LFe(r,s,i);return e.makeTensorInfo([o.length],"float32",o)}const ije={kernelName:Cj,backendName:"webgl",kernelFunc:sje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oje=mm+`
  return x < 0.0 ? 0./0. : log(x);
`,aje=`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,lje=zt({opSnippet:oje,packedOpSnippet:aje,cpuKernelImpl:MFe}),cje={kernelName:L0,backendName:"webgl",kernelFunc:lje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uje=mm+`
  return log(1.0 + x);
`,dje=zt({opSnippet:uje}),hje={kernelName:M0,backendName:"webgl",kernelFunc:dje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fje="return float(a >= 1.0 && b >= 1.0);",mje=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,pje=Jr({opSnippet:fje,packedOpSnippet:mje,dtype:"bool"}),gje={kernelName:gw,backendName:"webgl",kernelFunc:pje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yje="return float(!(x >= 1.0));",bje=zt({opSnippet:yje}),vje={kernelName:yw,backendName:"webgl",kernelFunc:bje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xje="return float(a >= 1.0 || b >= 1.0);",wje=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,Eje=Jr({opSnippet:xje,packedOpSnippet:wje,dtype:"bool"}),kje={kernelName:bw,backendName:"webgl",kernelFunc:Eje};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Nje{constructor(e,n,r,s,i){this.variableNames=["x"],this.outputShape=[];const o=n,a=e[3]-1;this.outputShape=e;let l;const c=`float(${r}) + float(${s}) * sum`;i===.5?l=`inversesqrt(${c})`:i===1?l=`1.0/(${c})`:l=`exp(log(${c}) * float(-${i}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${o}; j <= ${o}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${a}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${l};
        setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Cje{constructor(e,n,r,s,i){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const o=n,a=e[3]-1;this.outputShape=e;let l;const c=`float(${r}) + float(${s}) * sum`;i===.5?l=`inversesqrt(${c})`:i===1?l=`1.0/(${c})`:l=`exp(log(${c}) * float(-${i}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${o};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${o}; j <= ${o}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${a}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${l};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _je=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{depthRadius:i,bias:o,alpha:a,beta:l}=r,c=de().getBool("WEBGL_PACK_NORMALIZATION")?new Cje(s.shape,i,o,a,l):new Nje(s.shape,i,o,a,l);return n.runWebGLProgram(c,[s],s.dtype)},Sje={kernelName:vw,backendName:"webgl",kernelFunc:_je};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Tje{constructor(e,n,r,s,i){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=n,this.bias=r,this.alpha=s,this.beta=i,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${n})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${n} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${s}) * norm + float(${r});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${s})
                * float(${i})
                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${i});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $je=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s,y:i,dy:o}=e,{depthRadius:a,bias:l,alpha:c,beta:u}=r,h=new Tje(s.shape,a,l,c,u);return n.runWebGLProgram(h,[s,i,o],s.dtype)},Ije={kernelName:B$,backendName:"webgl",kernelFunc:$je};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Aje(t,e,n,r){const s=pe(e),o=pe(t.shape)/s,a=Ae({inputs:{x:t},attrs:{shape:[o,s]},backend:r}),l=jd(a,t.dtype,"max",r),c=Ae({inputs:{x:l},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(l),c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WW(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{reductionIndices:i,keepDims:o}=r,a=s.shape.length,l=xt(i,s.shape);let c=l;const u=jn(c,a),h=u!=null,m=n.shouldExecuteOnCPU([s]);let p=s;if(h){if(m){const E=n.texData.get(p.dataId).values,N=new Array(a);for(let T=0;T<N.length;T++)N[T]=s.shape[u[T]];const C=Z3(E,s.shape,s.dtype,u,N);p=n.makeTensorInfo(N,s.dtype);const S=n.texData.get(p.dataId);S.values=C}else p=x2(s,u,n);c=tr(c.length,a)}Yr("max",c,a);const[y,v]=Mr(p.shape,c);let x=y;o&&(x=ur(y,l));let b;if(m){const E=n.texData.get(p.dataId).values,N=zFe(E,pe(v),x,s.dtype);b=n.makeTensorInfo(x,s.dtype);const C=n.texData.get(b.dataId);C.values=N}else b=Aje(p,v,x,n);return h&&n.disposeIntermediateTensorInfo(p),b}const Rje={kernelName:xw,backendName:"webgl",kernelFunc:WW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pje=X3+`
  return max(a, b);
`,Dje=`
  vec4 result = vec4(max(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Vd+`
  return result;
`,Oje=Jr({opSnippet:Pje,packedOpSnippet:Dje,cpuKernelImpl:FFe}),Lje={kernelName:z0,backendName:"webgl",kernelFunc:Oje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mje(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e;Cy(s,"maxPool");const{filterSize:i,strides:o,pad:a,dimRoundingMode:l}=r,c=1;F(hs(o,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${c}'`);const u=xo(s.shape,i,o,c,a,l);if(u.filterWidth===1&&u.filterHeight===1&&Zt(u.inShape,u.outShape))return di({inputs:{x:s},backend:n});const h=new $g(u,"max",!1);return n.runWebGLProgram(h,[s],s.dtype)}const zje={kernelName:ww,backendName:"webgl",kernelFunc:Mje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fje(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{filterSize:i,strides:o,pad:a,dataFormat:l,dimRoundingMode:c}=r,u=[1,1,1],h=Vl(s.shape,i,o,u,a,c,l),m=new J3(h,"max",!1);return n.runWebGLProgram(m,[s],s.dtype)}const Bje={kernelName:Ew,backendName:"webgl",kernelFunc:Fje};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Vje{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideHeight,r=e.strideWidth,s=e.dilationHeight,i=e.effectiveFilterHeight,o=e.effectiveFilterWidth,a=i-1-e.padInfo.top,l=o-1-e.padInfo.left,c=i*o-1;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${i};
          wR += ${s}) {
          float dyR = float(dyRCorner + wR) / ${n}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${o}; wC++) {
            float dyC = float(dyCCorner + wC) / ${r}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${c} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${o} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}}class jje{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideDepth,r=e.strideHeight,s=e.strideWidth,i=e.dilationDepth,o=e.dilationHeight,a=e.dilationWidth,l=e.effectiveFilterDepth,c=e.effectiveFilterHeight,u=e.effectiveFilterWidth,h=l-1-e.padInfo.front,m=c-1-e.padInfo.top,p=u-1-e.padInfo.left,y=l*c*u-1;this.userCode=`
      const ivec3 pads = ivec3(${h}, ${m}, ${p});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${l};
           wD += ${i}) {
          float dyD = float(dyDCorner + wD) / ${n}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${c};
              wR += ${o}) {
            float dyR = float(dyRCorner + wR) / ${r}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${u};
                wC += ${a}) {
              float dyC = float(dyCCorner + wC) / ${s}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${y} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${c} * ${u} +
                  wR * ${u} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uje(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i}=e,o=i,{filterSize:a,strides:l,pad:c,dimRoundingMode:u}=r,h=[1,1,1],m=Vl(o.shape,a,l,h,c,u),p=new J3(m,"max",!0),y=n.runWebGLProgram(p,[o],o.dtype),v=new jje(m),x=n.runWebGLProgram(v,[s,y],o.dtype);return n.disposeIntermediateTensorInfo(y),x}const Hje={kernelName:j$,backendName:"webgl",kernelFunc:Uje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gje(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i,output:o}=e,a=i;Cy([i,o],"maxPoolGrad");const{filterSize:l,strides:c,pad:u,dimRoundingMode:h}=r,m=xo(a.shape,l,c,1,u,h),p=!0,y=new $g(m,"max",p),v=n.runWebGLProgram(y,[a],a.dtype),x=new Vje(m),b=n.runWebGLProgram(x,[s,v],a.dtype);return n.disposeIntermediateTensorInfo(v),b}const Wje={kernelName:V$,backendName:"webgl",kernelFunc:Gje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qje(t,e,n,r){let s=new $g(n,"max",!1);const i=r.runWebGLProgram(s,[t],"float32");s=new $g(n,"max",!0,!0,e);const o=r.runWebGLProgram(s,[t],"float32");return[i,o]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kje={kernelName:_j,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:s,strides:i,pad:o,includeBatchInIndex:a}=e,l=n;F(r.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${r.shape.length}.`);const c=[1,1];F(hs(i,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${c}'`);const u=xo(r.shape,s,i,c,o),[h,m]=qje(r,a,u,l);return[h,m]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zje(t,e,n,r){const s=pe(e),o=pe(t.shape)/s,a=Ae({inputs:{x:t},attrs:{shape:[o,s]},backend:r}),l=jd(a,"float32","mean",r),c=Ae({inputs:{x:l},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(l),c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xje={kernelName:kw,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{keepDims:s,axis:i}=e,o=n,a=r.shape.length,l=xt(i,r.shape);let c=l;const u=jn(c,a),h=u!=null,m=o.shouldExecuteOnCPU([r]),p=[];let y=r;if(h){if(m){const N=o.texData.get(y.dataId).values,C=new Array(a);for(let I=0;I<C.length;I++)C[I]=r.shape[u[I]];const S=Z3(N,r.shape,r.dtype,u,C);y=o.makeTensorInfo(C,r.dtype);const T=o.texData.get(y.dataId);T.values=S}else y=x2(r,u,o);p.push(y),c=tr(c.length,a)}Yr("sum",c,a);const[v,x]=Mr(y.shape,c);let b=v;s&&(b=ur(v,l));const w=Zje(y,x,b,o);for(const E of p)o.disposeIntermediateTensorInfo(E);return w}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yje(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:o}=r,a=s.shape.length,l=xt(i,s.shape);let c=l;const u=jn(c,a);let h=s;u!=null&&(h=Is({inputs:{x:s},backend:n,attrs:{perm:u}}),c=tr(c.length,s.shape.length)),Yr("min",c,a);const[m,p]=Mr(h.shape,c),y=pe(p),v=Ae({inputs:{x:h},backend:n,attrs:{shape:[-1,y]}}),x=jd(v,v.dtype,"min",n);let b;if(o){const w=ur(m,l);b=Ae({inputs:{x},backend:n,attrs:{shape:w}})}else b=Ae({inputs:{x},backend:n,attrs:{shape:m}});return n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(x),u!=null&&n.disposeIntermediateTensorInfo(h),b}const Jje={kernelName:Nw,backendName:"webgl",kernelFunc:Yje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qje=X3+`
  return min(a, b);
`,e7e=`
  vec4 result = vec4(min(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Vd+`
  return result;
`,t7e=Jr({opSnippet:Qje,packedOpSnippet:e7e,cpuKernelImpl:BFe}),n7e={kernelName:F0,backendName:"webgl",kernelFunc:t7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class r7e{constructor(e,n,r){this.variableNames=["x"],this.outputShape=n.map((u,h)=>u[0]+e[h]+u[1]);const s=e.length,i=cn(s),o=n.map(u=>u[0]).join(","),a=n.map((u,h)=>u[0]+e[h]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,s),c=r==="reflect"?0:1;if(s===1){this.userCode=`
        int start = ${o};
        int end = ${a};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${c};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${c};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${i} start = ${i}(${o});
      ${i} end = ${i}(${a});

      void main() {
        ${i} outC = getOutputCoords();
        for (int i = 0; i < ${s}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${c};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${c};
          }
        }
        ${i} coords = outC - start;
        setOutput(getX(${l}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class s7e{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((y,v)=>y[0]+e[v]+y[1]);const s=e.length,i=cn(s),o=n.map(y=>y[0]).join(","),a=n.map((y,v)=>y[0]+e[v]).join(","),l=ks("rc",s),c=ks("source",s),u=`${l[s-1]} < ${this.outputShape[s-1]}`,h=s===1?"source":`vec2(${c.slice(-2).join()})`,m=r==="reflect"?0:1;let p="";if(s===1){const y=`
        ${i} source = rc;
        if (source < start) {
          source = start * 2 - source - ${m};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${m};
        }
        source -= start;
      `;p=`
        ${i} rc = outputLoc;
        ${y}
        result[0] = getChannel(getX(${c.join()}), ${h});
        ${l[s-1]} += 1;
        if(${u}) {
          ${y}
          result[1] = getChannel(getX(${c.join()}), ${h});
        }
      `}else{const y=`
        ${i} source = rc;
        ${i} lt = ${i}(lessThan(source, start));
        ${i} gte = ${i}(greaterThanEqual(source, end));
        ${i} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${m}) +
                gte * ((end - 1) * 2 - source + ${m});
        source -= start;
      `;p=`
        ${i} rc = outputLoc;
        ${y}
        result[0] = getChannel(getX(${c.join()}), ${h});
        ${l[s-1]} += 1;
        if(${u}) {
          ${y}
          result[1] = getChannel(getX(${c.join()}), ${h});
        }
        rc = outputLoc;
        ${l[s-2]} += 1;
        if(${l[s-2]} < ${this.outputShape[s-2]}) {
          ${y}
          result[2] = getChannel(getX(${c.join()}), ${h});
          ${l[s-1]} += 1;
          if(${u}) {
            ${y}
            result[3] = getChannel(getX(${c.join()}), ${h});
          }
        }
      `}this.userCode=`
      const ${i} start = ${i}(${o});
      const ${i} end = ${i}(${a});

      void main() {
        ${i} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${p}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const i7e=({inputs:t,backend:e,attrs:n})=>{const{x:r}=t,{paddings:s,mode:i}=n,o=de().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new s7e(r.shape,s,i):new r7e(r.shape,s,i);return e.runWebGLProgram(o,[r],r.dtype)},o7e={kernelName:Cw,backendName:"webgl",kernelFunc:i7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const a7e=`if (b == 0.0) return NAN;
  return mod(a, b);`,l7e=`
  vec4 result = mod(a, b);
  bvec4 isNaN = equal(b, vec4(0.0));
  `+Vd+`
  return result;
`,c7e=Jr({opSnippet:a7e,packedOpSnippet:l7e}),u7e={kernelName:B0,backendName:"webgl",kernelFunc:c7e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class d7e{constructor(e,n,r){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,r],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${n-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${n-1}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const h7e=`
if (a == b) {
  return 1.0;
};
return a / b;`,f7e=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,qW=Jr({opSnippet:h7e,packedOpSnippet:f7e,checkOutOfBounds:!0}),m7e={kernelName:N0,backendName:"webgl",kernelFunc:qW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hz="return a - b;",KW=Jr({opSnippet:hz,packedOpSnippet:hz,supportsComplex:!0,cpuKernelImpl:a5e}),p7e={kernelName:ny,backendName:"webgl",kernelFunc:KW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZW(t){const{inputs:e,backend:n,attrs:r}=t,{logits:s}=e,{dim:i}=r,o=xt([i],s.shape),a=WW({inputs:{x:s},backend:n,attrs:{reductionIndices:o,keepDims:!1}}),l=ur(a.shape,o),c=Ae({inputs:{x:a},backend:n,attrs:{shape:l}}),u=KW({inputs:{a:s,b:c},backend:n}),h=UW({inputs:{x:u},backend:n}),m=w2({inputs:{x:h},backend:n,attrs:{axis:o,keepDims:!1}}),p=Ae({inputs:{x:m},backend:n,attrs:{shape:l}}),y=qW({inputs:{a:h,b:p},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(p),y}const g7e={kernelName:Uw,backendName:"webgl",kernelFunc:ZW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y7e(t){const{inputs:e,backend:n,attrs:r}=t,{logits:s}=e,{numSamples:i,seed:o,normalized:a}=r,l=a?s:ZW({inputs:{logits:s},backend:n,attrs:{dim:s.shape.length-1}}),c=l.shape[0],u=l.shape[1],h=new d7e(c,u,i),m=[[o]],p=n.runWebGLProgram(h,[l],"int32",m);return a||n.disposeIntermediateTensorInfo(l),p}const b7e={kernelName:Sj,backendName:"webgl",kernelFunc:y7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const v7e=Eo+`
  return -x;
`,x7e=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;function w7e(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])){const i=n.texData.get(r.dataId),[o,a]=jFe(i.values,r.shape,r.dtype);return n.makeTensorInfo(a,r.dtype,o)}let s;return de().getBool("WEBGL_PACK_UNARY_OPERATIONS")?s=new xc(r.shape,x7e):s=new ba(r.shape,v7e),n.runWebGLProgram(s,[r],r.dtype)}const E7e={kernelName:_w,backendName:"webgl",kernelFunc:w7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const k7e=MI;function N7e(t){Ni("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:i}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l}=r,c=n.readSync(s.dataId),u=n.readSync(i.dataId),{selectedIndices:h}=k7e(c,u,o,a,l);return n.makeTensorInfo([h.length],"int32",new Int32Array(h))}const C7e={kernelName:U$,backendName:"webgl",kernelFunc:N7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _7e=zI;function S7e(t){Ni("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:i}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l,padToMaxOutputSize:c}=r,u=n.readSync(s.dataId),h=n.readSync(i.dataId),{selectedIndices:m,validOutputs:p}=_7e(u,h,o,a,l,c);return[n.makeTensorInfo([m.length],"int32",new Int32Array(m)),n.makeTensorInfo([],"int32",new Int32Array([p]))]}const T7e={kernelName:H$,backendName:"webgl",kernelFunc:S7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $7e=FI;function I7e(t){Ni("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:i}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l,softNmsSigma:c}=r,u=n.readSync(s.dataId),h=n.readSync(i.dataId),m=o,p=a,y=l,v=c,{selectedIndices:x,selectedScores:b}=$7e(u,h,m,p,y,v);return[n.makeTensorInfo([x.length],"int32",new Int32Array(x)),n.makeTensorInfo([b.length],"float32",new Float32Array(b))]}const A7e={kernelName:G$,backendName:"webgl",kernelFunc:I7e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class R7e{constructor(e,n,r,s){this.variableNames=["indices"],this.outputShape=[e,n],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${s}), float(${r}),
                      float(index == coords.y)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const P7e=t=>{const{inputs:e,backend:n,attrs:r}=t,{indices:s}=e,{dtype:i,depth:o,onValue:a,offValue:l}=r,c=pe(s.shape),u=new R7e(c,o,a,l),h=Ae({inputs:{x:s},backend:n,attrs:{shape:[c]}}),m=n.runWebGLProgram(u,[h],i);n.disposeIntermediateTensorInfo(h);const p=[...s.shape,o],y=Ae({inputs:{x:m},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(m),y},D7e={kernelName:$w,backendName:"webgl",kernelFunc:P7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sx(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="complex64"){const s=Sy({inputs:{input:r},backend:n}),i=sx({inputs:{x:s},backend:n}),o=E2({inputs:{input:r},backend:n}),a=sx({inputs:{x:o},backend:n}),l=au({inputs:{real:i,imag:a},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(a),l}else return Ty({attrs:{shape:r.shape,dtype:r.dtype,value:r.dtype==="string"?"":0},backend:n})}const O7e={kernelName:Ww,backendName:"webgl",kernelFunc:sx};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XW(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(r.dtype==="complex64"){const s=Sy({inputs:{input:r},backend:n}),i=XW({inputs:{x:s},backend:n}),o=E2({inputs:{input:r},backend:n}),a=sx({inputs:{x:o},backend:n}),l=au({inputs:{real:i,imag:a},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(a),l}else return Ty({attrs:{shape:r.shape,dtype:r.dtype,value:1},backend:n})}const L7e={kernelName:Tw,backendName:"webgl",kernelFunc:XW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M7e(t){const{inputs:e,backend:n,attrs:r}=t,{axis:s}=r;if(e.length===1)return O_({inputs:{input:e[0]},backend:n,attrs:{dim:s}});const i=e[0].shape,o=e[0].dtype;e.forEach(u=>{h$(i,u.shape,"All tensors passed to stack must have matching shapes"),F(o===u.dtype,()=>"All tensors passed to stack must have matching dtypes")});const a=[],l=e.map(u=>{const h=O_({inputs:{input:u},backend:n,attrs:{dim:s}});return a.push(h),h}),c=OW({inputs:l,backend:n,attrs:{axis:s}});return a.forEach(u=>n.disposeIntermediateTensorInfo(u)),c}const z7e={kernelName:Iw,backendName:"webgl",kernelFunc:M7e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class F7e{constructor(e,n,r){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((c,u)=>c[0]+e[u]+c[1]);const s=e.length,i=cn(s),o=n.map(c=>c[0]).join(","),a=n.map((c,u)=>c[0]+e[u]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,s);if(s===1){this.userCode=`
        int start = ${o};
        int end = ${a};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${i} start = ${i}(${o});
      ${i} end = ${i}(${a});

      void main() {
        ${i} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          ${i} coords = outC - start;
          setOutput(getX(${l}));
        }
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class B7e{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((v,x)=>v[0]+e[x]+v[1]);const s=e.length,i=cn(s),o=n.map(v=>v[0]).join(","),a=n.map((v,x)=>v[0]+e[x]).join(","),l=ks("rc",s),c=ks("source",s),u=`${l[s-1]} < ${this.outputShape[s-1]}`,h=s===1?"source":`vec2(${c.slice(-2).join()})`,m=[`${i} rc = outputLoc;`,`${l[s-1]} += 1;
       if(${u}) {
      `,s===1?"":`}
       rc = outputLoc;
       ${l[s-2]} += 1;
       if(${l[s-2]} < ${this.outputShape[s-2]}) {`,s===1?"":`  ${l[s-1]} += 1;
         if(${u}) {`],p=s===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let y="";for(let v=0,x=s===1?2:4;v<x;v++)y+=`
        ${m[v]}
        if (${p}) {
          result[${v}] = float(value);
        } else {
          ${i} source = rc - start;
          result[${v}] = getChannel(getX(${c.join()}), ${h});
        }
      `;y+=s===1?"} ":"}}",this.userCode=`
      const ${i} start = ${i}(${o});
      const ${i} end = ${i}(${a});

      void main() {
        ${i} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${y}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YW=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{paddings:i,constantValue:o}=r;if(pe(s.shape)===0){const c=i.map((u,h)=>u[0]+s.shape[h]+u[1]);return Ty({backend:n,attrs:{shape:c,value:o,dtype:s.dtype}})}const a=de().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new B7e(s.shape,i,o):new F7e(s.shape,i,o),l=[[o]];return n.runWebGLProgram(a,[s],s.dtype,l)},V7e={kernelName:Aw,backendName:"webgl",kernelFunc:YW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j7e=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,U7e=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  bvec4 isNaN1 = lessThan(a, vec4(0.0));
  bvec4 isNaN2 = lessThan(floor(b), b);
  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);
  `+Vd+`
  return result;
`,H7e=Jr({opSnippet:j7e,packedOpSnippet:U7e}),G7e={kernelName:j0,backendName:"webgl",kernelFunc:H7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W7e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:o}=r,a=s.shape.length,l=[],c=xt(i,s.shape);let u=c;const h=jn(u,a);let m=s;h!=null&&(m=Is({inputs:{x:s},backend:n,attrs:{perm:h}}),u=tr(u.length,a),l.push(m)),Yr("prod",u,a);let p;if(n.shouldExecuteOnCPU([m])){const y=n.texData.get(m.dataId).values,{outVals:v,outShape:x,outDtype:b}=HFe(m.shape,m.dtype,y,u);p=n.makeTensorInfo(x,b,v)}else{const[y,v]=Mr(m.shape,u),x=pe(v),b=Ae({inputs:{x:m},backend:n,attrs:{shape:[-1,x]}}),w=sI(s.dtype),E=jd(b,w,"prod",n);p=Ae({inputs:{x:E},backend:n,attrs:{shape:y}}),l.push(b),l.push(E)}if(o){l.push(p);const y=ur(p.shape,c);p=Ae({inputs:{x:p},backend:n,attrs:{shape:y}})}return l.forEach(y=>n.disposeIntermediateTensorInfo(y)),p}const q7e={kernelName:Pw,backendName:"webgl",kernelFunc:W7e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K7e(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:s,paramsDenseValues:i,indices:o}=e,{outputRaggedRank:a}=r,l=s.map(b=>n.readSync(b.dataId)),c=s.map(b=>b.shape),u=n.readSync(i.dataId),h=n.readSync(o.dataId),[m,p,y]=GFe(l,c,u,i.shape,i.dtype,h,o.shape,a),v=m.map(b=>n.makeTensorInfo([b.length],"int32",b)),x=n.makeTensorInfo(y,i.dtype,p);return v.concat([x])}const Z7e={kernelName:Tj,backendName:"webgl",kernelFunc:K7e};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X7e(t){const{inputs:e,backend:n}=t,{starts:r,limits:s,deltas:i}=e,o=n.readSync(r.dataId),a=n.readSync(s.dataId),l=n.readSync(i.dataId),[c,u]=WFe(o,r.shape,r.dtype,a,s.shape,l,i.shape),h=n.makeTensorInfo([c.length],"int32",c),m=n.makeTensorInfo([u.length],r.dtype,u);return[h,m]}const Y7e={kernelName:$j,backendName:"webgl",kernelFunc:X7e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J7e(t){const{inputs:e,backend:n,attrs:r}=t,{shape:s,values:i,defaultValue:o,rowPartitionTensors:a}=e,{rowPartitionTypes:l}=r,c=n.readSync(s.dataId),u=n.readSync(i.dataId),h=n.readSync(o.dataId),m=a.map(x=>n.readSync(x.dataId)),p=a.map(x=>x.shape),[y,v]=qFe(c,s.shape,u,i.shape,i.dtype,h,o.shape,m,p,l);return n.makeTensorInfo(y,i.dtype,v)}const Q7e={kernelName:Ij,backendName:"webgl",kernelFunc:J7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JW=t=>{const{backend:e,attrs:n}=t,{start:r,stop:s,step:i,dtype:o}=n,a=KFe(r,s,i,o);return e.makeTensorInfo([a.length],o,a)},eUe={kernelName:W$,backendName:"webgl",kernelFunc:JW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tUe="return 1.0 / x;",nUe=zt({opSnippet:tUe}),rUe={kernelName:U0,backendName:"webgl",kernelFunc:nUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sUe=Eo+`
  return (x < 0.0) ? 0.0 : x;
`,iUe=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,oUe=zt({opSnippet:sUe,packedOpSnippet:iUe}),aUe={kernelName:H0,backendName:"webgl",kernelFunc:oUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lUe=Eo+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,cUe=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,uUe=zt({opSnippet:lUe,packedOpSnippet:cUe}),dUe={kernelName:G0,backendName:"webgl",kernelFunc:uUe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hUe{constructor(e,n,r,s,i){this.variableNames=["A"],this.outputShape=[];const[o,a,l,c]=e;this.outputShape=[o,n,r,c];const u=[s&&n>1?a-1:a,s&&r>1?l-1:l],h=[s&&n>1?n-1:n,s&&r>1?r-1:r];let m;i?m="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":m="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${u[0]/h[0]},
          ${u[1]/h[1]});
      const vec2 inputShapeRC = vec2(${a}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${m};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class fUe{constructor(e,n,r,s,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,a,l,c]=e;this.outputShape=[o,n,r,c];const u=[s&&n>1?a-1:a,s&&r>1?l-1:l],h=[s&&n>1?n-1:n,s&&r>1?r-1:r];let m;i?m="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":m="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${u[0]/h[0]},
          ${u[1]/h[1]},
          ${u[1]/h[1]});
      const vec3 inputShapeRC = vec3(${a}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${m};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${c-1};
        bool hasNextRow = coords.z < ${r-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mUe(t){const{inputs:e,backend:n,attrs:r}=t,{images:s}=e,{alignCorners:i,halfPixelCenters:o,size:a}=r,[l,c]=a,u=de().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new fUe(s.shape,l,c,i,o):new hUe(s.shape,l,c,i,o);return n.runWebGLProgram(u,[s],"float32")}const pUe={kernelName:Lw,backendName:"webgl",kernelFunc:mUe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gUe{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,s,i]=n,[,o,a]=e,l=[r&&o>1?s-1:s,r&&a>1?i-1:i],c=[r&&o>1?o-1:o,r&&a>1?a-1:a],u=l[0]/c[0],h=l[1]/c[1],m=1/u,p=1/h,y=Math.ceil(m)*2+2,v=Math.ceil(p)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${u});
        const float widthScale = float(${h});

        const float invHeightScale = float(${m});
        const float invWidthScale = float(${p});

        const int winHeight = int(${y});
        const int winWidth = int(${v});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${o}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${a}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${s-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${i-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yUe(t){const{inputs:e,backend:n,attrs:r}=t,{images:s,dy:i}=e,{alignCorners:o}=r,a=new gUe(i.shape,s.shape,o);return n.runWebGLProgram(a,[i],i.dtype)}const bUe={kernelName:Z$,backendName:"webgl",kernelFunc:yUe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vUe{constructor(e,n,r,s,i){this.variableNames=["A"],this.outputShape=[];const[o,a,l,c]=e;this.outputShape=[o,n,r,c];const u=[s&&n>1?a-1:a,s&&r>1?l-1:l],h=[s&&n>1?n-1:n,s&&r>1?r-1:r],m=s?"0.5":"0.0";let p;i?p="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":p="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${u[0]/h[0]},
          ${u[1]/h[1]});
      const vec2 inputShapeRC = vec2(${a}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${p};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${m})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xUe{constructor(e,n,r,s,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,a,l,c]=e;this.outputShape=[o,n,r,c];const u=[s&&n>1?a-1:a,s&&r>1?l-1:l],h=[s&&n>1?n-1:n,s&&r>1?r-1:r],m=s?"0.5":"0.0";let p;i?p="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":p="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${u[0]/h[0]},
          ${u[1]/h[1]},
          ${u[1]/h[1]});
      const vec3 inputShapeRC = vec3(${a}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${p};

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${m})));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${c-1};
        bool hasNextRow = coords.z < ${r-1};

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wUe(t){const{inputs:e,backend:n,attrs:r}=t,{images:s}=e,{alignCorners:i,halfPixelCenters:o,size:a}=r,[l,c]=a,u=de().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new xUe(s.shape,l,c,i,o):new vUe(s.shape,l,c,i,o);return n.runWebGLProgram(u,[s],s.dtype)}const EUe={kernelName:Ow,backendName:"webgl",kernelFunc:wUe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kUe{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,s,i]=n,[,o,a]=e,l=[r&&o>1?s-1:s,r&&a>1?i-1:i],c=[r&&o>1?o-1:o,r&&a>1?a-1:a],u=l[0]/c[0],h=l[1]/c[1],m=1/u,p=1/h,y=Math.ceil(m)*2+2,v=Math.ceil(p)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${u});
        const float widthScale = float(${h});

        const float invHeightScale = float(${m});
        const float invWidthScale = float(${p});

        const int winHeight = int(${y});
        const int winWidth = int(${v});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${o}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${a}) {
              continue;
            }

            float sourceFracRow =
              float(${l[0]}) *
                (float(dyR) / float(${c[0]}));

            float sourceFracCol =
                float(${l[1]}) *
                  (float(dyC) / float(${c[1]}));

            int sourceNearestRow = int(min(
                float(int(${s}) - 1),
                ${r} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${i}) - 1),
                ${r} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NUe(t){const{inputs:e,backend:n,attrs:r}=t,{images:s,dy:i}=e,{alignCorners:o}=r,a=new kUe(i.shape,s.shape,o);return n.runWebGLProgram(a,[i],i.dtype)}const CUe={kernelName:K$,backendName:"webgl",kernelFunc:NUe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _Ue{constructor(e,n){this.variableNames=["x"];const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);if(this.outputShape=e,r===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${e[0]} - coord - 1));
        }
      `;return}const s=a=>n.indexOf(a)!==-1&&e[a]!==1?`${e[a]} - coords[${a}] - 1`:`coords[${a}]`,i=e.map((a,l)=>s(l)).join(","),o=cn(r);this.userCode=`
      void main() {
        ${o} coords = getOutputCoords();
        setOutput(getX(${i}));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class SUe{constructor(e,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);this.outputShape=e;const s=ks("rc",r),i=`${s[r-1]} + 1 < ${this.outputShape[r-1]}`,o=`${s[r-2]} + 1 < ${this.outputShape[r-2]}`,a=cn(r);r===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${e[0]} - rc - 1),
            ${e[0]} - rc - 1);
          if(${i}){
              result.g = getChannel(getX(${e[0]} - (rc  + 1) - 1),
                ${e[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${a} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${l(s.slice())};
          if(${i}){
            result.g = ${c(s.slice())};
          }
          if(${o}) {
            result.b = ${u(s.slice())};
            if(${i}) {
              result.a = ${h(s.slice())};
            }
          }
          setOutput(result);
        }
    `;function l(y){return m(y)}function c(y){return y[r-1]="("+y[r-1]+" + 1)",m(y)}function u(y){return y[r-2]="("+y[r-2]+" + 1)",m(y)}function h(y){return y[r-1]="("+y[r-1]+" + 1)",y[r-2]="("+y[r-2]+" + 1)",m(y)}function m(y){const v=e.map((w,E)=>p(E,y)),x=v.join(","),b=v.slice(-2).join(",");return`getChannel(getX(${x}), vec2(${b}))`}function p(y,v){return n.indexOf(y)!==-1&&e[y]!==1?`${e[y]} - ${v[y]} - 1`:`${v[y]}`}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TUe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{dims:i}=r,o=s.shape.length,a=xt(i,s.shape);if(o===0)return di({inputs:{x:s},backend:n});const l=de().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new SUe(s.shape,a):new _Ue(s.shape,a);return n.runWebGLProgram(l,[s],s.dtype)}const $Ue={kernelName:Mw,backendName:"webgl",kernelFunc:TUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class IUe{constructor(e,n){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const r=e[1],s=e[2];this.outputShape=e;let i="";typeof n=="number"?i=`float outputValue = ${n.toFixed(2)};`:i=`
        vec3 fill = vec3(${n.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          ${i}
          if(coordX >= 0 && coordX < ${s} && coordY >= 0 && coordY < ${r}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AUe={kernelName:nI,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:s,fillValue:i,center:o}=e,a=n,l=new IUe(r.shape,i),[c,u]=XI(o,r.shape[1],r.shape[2]),h=[[c,u,Math.sin(s),Math.cos(s)]];return a.runWebGLProgram(l,[r],r.dtype,h)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RUe=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,PUe=zt({opSnippet:RUe}),DUe={kernelName:W0,backendName:"webgl",kernelFunc:PUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OUe="return inversesqrt(x);",LUe=zt({opSnippet:OUe,cpuKernelImpl:ZFe}),MUe={kernelName:q0,backendName:"webgl",kernelFunc:LUe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Q3{constructor(e,n,r,s,i,o,a=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;const c=cn(i.length),u=cn(o.length);let h="";r===1?h="i":r===2&&(h="i, j");const m=`getIndices(${h})`;let p="";s===1?p="i":s===2&&(p="i, coords[1]");const y=`getUpdates(${p})`;let v="";l&&(v="coords[0], coords[1]");const x=`getDefaultValue(${v})`,b=n>1?"strides[j]":"strides";this.userCode=`
        ${c} strides = ${c}(${i});

        void main() {
          ${u} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${e}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${n}; j++) {
              int index = round(${m});
              flattenedIndex += index * ${b};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${y};
              found = true;
            }
          }
          setOutput(mix(${x}, sum, float(found)));
        }
      `}}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class zUe{constructor(e,n,r,s,i,o,a=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=o;const c=cn(i.length),u=cn(o.length);let h="";r===1?h="i":r===2&&(h="i, j");const m=`getIndices(${h})`;let p="";s===1?p="i":s===2&&(p="i, coords[1]");const y=`getUpdates(${p})`;let v="";l&&(v="coords[0], coords[1]");const x=`getDefaultValue(${v})`,b=n>1?"strides[j]":"strides",w=n>1?"strides[j + 1]":"strides";this.userCode=`
        ${c} strides = ${c}(${i});

        void main() {
          ${u} coords = getOutputCoords();
          vec4 sum = vec4(0.);
          vec4 found = vec4(0.);
          for (int i = 0; i < ${e}; i+=2) {
            ivec2 flattenedIndex = ivec2(0);
            for (int j = 0; j < ${n}; j+=2) {
              ivec4 index = round(${m});
              flattenedIndex += index.xz * ${b};
              if (j + 1 < ${n}) {
                flattenedIndex += index.yw * ${w};
              }
            }
            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||
                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {
              vec4 updVals = ${y};
              if (flattenedIndex[0] == coords[0]) {
                sum.xy += updVals.xy;
                found.xy = vec2(1.);
              } else if (flattenedIndex[0] == coords[0] + 1) {
                sum.zw += updVals.xy;
                found.zw = vec2(1.);
              }
              if (flattenedIndex[1] == coords[0]) {
                sum.xy += updVals.zw;
                found.xy = vec2(1.);
              } else if (flattenedIndex[1] == coords[0] + 1) {
                sum.zw += updVals.zw;
                found.zw = vec2(1.);
              }
            }
          }
          setOutput(mix(${x}, sum, found));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FUe(t){const{inputs:e,backend:n,attrs:r}=t,{indices:s,updates:i}=e,{shape:o}=r,{sliceRank:a,numUpdates:l,sliceSize:c,strides:u,outputSize:h}=Ld(i,s,o),m=[h/c,c];if(h===0)return n.makeTensorInfo(o,s.dtype);const p=Ae({inputs:{x:s},backend:n,attrs:{shape:[l,a]}}),y=Ae({inputs:{x:i},backend:n,attrs:{shape:[l,c]}}),v=n.makeTensorInfo([],"float32",new Float32Array([0]));let x;de().getBool("WEBGL_PACK")?x=new zUe(l,a,p.shape.length,y.shape.length,u,m):x=new Q3(l,a,p.shape.length,y.shape.length,u,m);const b=n.runWebGLProgram(x,[y,p,v],y.dtype),w=Ae({inputs:{x:b},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(v),w}const BUe={kernelName:Aj,backendName:"webgl",kernelFunc:FUe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class VUe{constructor(e,n,r,s){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,r];const i="while (left < right) {",o=`for (int i = 0; i < ${Math.ceil(Math.log2(n+1))}; ++i) { if (left >= right) break;`,a=de().getNumber("WEBGL_VERSION")===2?i:o,l=s==="left"?"<":"<=";this.userCode=`
       int findBound(int batch, float value) {
         int left = 0;
         int right = numInputs;
         int mid;
         ${a}
           mid = (left + right) / 2;
           if (getSortedSequence(batch, mid) ${l} value) {
             left = mid + 1;
           } else {
             right = mid;
           }
         }
         return right;
       }

       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int valueIndex = coords[1];

         float value = getValues(batch, valueIndex);

         setOutput(float(findBound(batch, value)));
       }
     `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jUe(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:s,values:i}=e,{side:o}=r,a=new VUe(s.shape[0],s.shape[1],i.shape[1],o),l=[[s.shape[1]]];return n.runWebGLProgram(a,[s,i],"int32",l)}const UUe={kernelName:Pj,backendName:"webgl",kernelFunc:jUe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class HUe{constructor(e,n,r){this.variableNames=["c","a","b"],this.outputShape=n;let s,i;if(r>4)throw Error(`Where for rank ${r} is not yet supported`);if(r===1)i="resRC",s="resRC";else{const a=["resRC.x","resRC.y","resRC.z","resRC.w"],l=[],c=[];for(let u=0;u<n.length;u++)c.push(`${a[u]}`),u<e&&l.push(`${a[u]}`);s=l.join(),i=c.join()}const o=cn(r);this.userCode=`
      void main() {
        ${o} resRC = getOutputCoords();
        float cVal = getC(${s});
        if (cVal >= 1.0) {
          setOutput(getA(${i}));
        } else {
          setOutput(getB(${i}));
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GUe(t){const{inputs:e,backend:n}=t,{condition:r,t:s,e:i}=e,o=new HUe(r.shape.length,s.shape,s.shape.length);return n.runWebGLProgram(o,[r,s,i],ci(s.dtype,i.dtype))}const WUe={kernelName:zw,backendName:"webgl",kernelFunc:GUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qUe=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${s2};
  float scale = ${i2};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,KUe=zt({opSnippet:qUe}),ZUe={kernelName:K0,backendName:"webgl",kernelFunc:KUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XUe=mm+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,YUe=`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,JUe=zt({opSnippet:XUe,packedOpSnippet:YUe,cpuKernelImpl:YFe}),QUe={kernelName:J0,backendName:"webgl",kernelFunc:JUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eHe=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,tHe=zt({opSnippet:eHe}),nHe={kernelName:Y0,backendName:"webgl",kernelFunc:tHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rHe=mm+`
  return sin(x);
`,sHe=`
  vec4 result = sin(x);
  bvec4 isNaN = isnan(x);
  ${Vd}
  return result;
`,iHe=zt({opSnippet:rHe,packedOpSnippet:sHe}),oHe={kernelName:Z0,backendName:"webgl",kernelFunc:iHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aHe=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,lHe=zt({opSnippet:aHe}),cHe={kernelName:X0,backendName:"webgl",kernelFunc:lHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uHe=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,dHe=zt({opSnippet:uHe}),hHe={kernelName:Q0,backendName:"webgl",kernelFunc:dHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fHe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockShape:i,paddings:o}=r;F(s.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const a=i.reduce((b,w)=>b*w),l=[[0,0]];l.push(...o);for(let b=1+i.length;b<s.shape.length;++b)l.push([0,0]);const c=[],u=YW({inputs:{x:s},backend:n,attrs:{paddings:l,constantValue:0}}),h=hy(u.shape,i,a,!1),m=fy(h.length,i.length,!1),p=my(u.shape,i,a,!1),y=Ae({inputs:{x:u},backend:n,attrs:{shape:h}}),v=Is({inputs:{x:y},backend:n,attrs:{perm:m}}),x=Ae({inputs:{x:v},backend:n,attrs:{shape:p}});return c.push(u),c.push(y),c.push(v),c.forEach(b=>n.disposeIntermediateTensorInfo(b)),x},mHe={kernelName:Vw,backendName:"webgl",kernelFunc:fHe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pHe(t){const{inputs:e,backend:n}=t,{indices:r,values:s,denseShape:i,defaultValue:o}=e;if(i.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
         ${i.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
         ${r.shape}`);if(s.shape.length!==1)throw new Error(`Values must be a vector, saw:
         ${s.shape}`);if(o.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${o.shape}`);const a=n.readSync(r.dataId),l=n.readSync(s.dataId),c=n.readSync(i.dataId),u=n.readSync(o.dataId)[0],[h,m,p,y,v]=QFe(a,r.shape,r.dtype,l,s.dtype,c,u);return[n.makeTensorInfo(m,r.dtype,h),n.makeTensorInfo([m[0]],s.dtype,p),n.makeTensorInfo([y.length],"bool",new Uint8Array(y.map(x=>Number(x)))),n.makeTensorInfo([v.length],r.dtype,new Int32Array(v))]}const gHe={kernelName:Dj,backendName:"webgl",kernelFunc:pHe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yHe(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:s,newShape:i}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape ${r.shape}`);if(s.shape.length!==1)throw new Error(`Input shape should be a vector but received shape ${s.shape}`);if(i.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${i.shape}`);const o=Array.from(n.readSync(s.dataId)),a=n.readSync(r.dataId),l=Array.from(n.readSync(i.dataId)),[c,u,h]=e5e(a,r.shape,r.dtype,o,l);return[n.makeTensorInfo(u,r.dtype,c),n.makeTensorInfo([h.length],i.dtype,new Int32Array(h))]}const bHe={kernelName:Oj,backendName:"webgl",kernelFunc:yHe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vHe(t){const{inputs:e,backend:n}=t,{data:r,indices:s,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error(`Indices should be a vector but received shape
              ${s.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
              ${i.shape}`);const o=n.readSync(r.dataId),a=n.readSync(s.dataId),l=n.readSync(i.dataId),[c,u]=EW(o,r.shape,r.dtype,a,l,!0);return n.makeTensorInfo(u,r.dtype,c)}const xHe={kernelName:Lj,backendName:"webgl",kernelFunc:vHe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wHe(t){const{inputs:e,backend:n}=t,{data:r,indices:s,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error(`Indices should be a vector but received shape
             ${s.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
             ${i.shape}`);const o=n.readSync(r.dataId),a=n.readSync(s.dataId),l=n.readSync(i.dataId),[c,u]=EW(o,r.shape,r.dtype,a,l);return n.makeTensorInfo(u,r.dtype,c)}const EHe={kernelName:Mj,backendName:"webgl",kernelFunc:wHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kHe(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:s,sparseValues:i,defaultValue:o}=e,{outputShape:a}=r,{sliceRank:l,numUpdates:c,sliceSize:u,strides:h,outputSize:m}=Ld(i,s,a),p=!1;if(i.dtype==="string"){const b=n.bufferSync(s),w=n.bufferSync(i),E=jc(n.readSync(o.dataId)[0]),N=XFe(b,w,a,m,u,c,l,h,E,p);return n.makeTensorInfo(a,N.dtype,N.values)}const y=new Q3(c,l,s.shape.length,i.shape.length,h,[m,1],p),v=n.runWebGLProgram(y,[i,s,o],i.dtype),x=Ae({inputs:{x:v},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(v),x}const NHe={kernelName:zj,backendName:"webgl",kernelFunc:kHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CHe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{numOrSizeSplits:i,axis:o}=r,a=xt(o,s.shape)[0],l=d3(s,i,a),c=s.shape.length,u=new Array(c).fill(0),h=s.shape.slice();return l.map(m=>{const p=[...h];p[a]=m;const y=pm({inputs:{x:s},backend:n,attrs:{begin:u,size:p}});return u[a]+=m,y})}const _He={kernelName:jw,backendName:"webgl",kernelFunc:CHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fz="return sqrt(x);",SHe=zt({opSnippet:fz,packedOpSnippet:fz,cpuKernelImpl:t5e}),THe={kernelName:ey,backendName:"webgl",kernelFunc:SHe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $He="return x * x;",IHe=zt({opSnippet:$He}),AHe={kernelName:X$,backendName:"webgl",kernelFunc:IHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mz="return (a - b) * (a - b);",RHe=Jr({opSnippet:mz,packedOpSnippet:mz}),PHe={kernelName:ty,backendName:"webgl",kernelFunc:RHe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DHe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e;if(s.dtype!=="string")throw new Error("Input must be of datatype string");const i=n.readSync(s.dataId),o=Dl(i),a=n5e(o,"string",r);return n.makeTensorInfo(s.shape,"string",a)}const OHe={kernelName:Y$,backendName:"webgl",kernelFunc:DHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LHe({inputs:t,attrs:e,backend:n}){const{x:r}=t,s=Eo+`
    return x > 0.0 ? 1.0 : float(${e.alpha});
  `,i=new ba(r.shape,s);return n.runWebGLProgram(i,[r],r.dtype)}const MHe={kernelName:oy,backendName:"webgl",kernelFunc:LHe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class zHe{constructor(e,n,r){this.variableNames=["x"],this.outputShape=r;const s=r.length,i=cn(r.length),o=cn(r.length);let a="";if(s===1)a="coords * strides + begin";else{let l=0;a=r.map((c,u)=>(l++,r.length===1?`coords * strides[${u}] + begin[${u}]`:`coords[${l-1}] * strides[${u}] + begin[${u}]`)).join(",")}this.userCode=`
      ${i} begin = ${i}(${e});
      ${i} strides = ${i}(${n});

      void main() {
        ${o} coords = getOutputCoords();
        setOutput(getX(${a}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FHe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{begin:i,end:o,strides:a,beginMask:l,endMask:c,ellipsisMask:u,newAxisMask:h,shrinkAxisMask:m}=r,{finalShapeSparse:p,finalShape:y,isIdentity:v,sliceDim0:x,isSimpleSlice:b,begin:w,end:E,strides:N}=qI(s.shape,i,o,a,l,c,u,h,m);let C;if(v)C=Ae({inputs:{x:s},backend:n,attrs:{shape:y}});else if(x||b){F(s.shape.length>=1,()=>`Input must have rank at least 1, got: ${s.shape.length}`);const T=HI(w,E,N),I=pm({inputs:{x:s},backend:n,attrs:{begin:w,size:T}});C=Ae({inputs:{x:I},backend:n,attrs:{shape:y}}),n.disposeIntermediateTensorInfo(I)}else if(n.shouldExecuteOnCPU([s])){const I=n.readSync(s.dataId),P=bt(s.shape,s.dtype,I),R=r5e(p,P,N,w);C=n.makeTensorInfo(y,s.dtype,R.values)}else{const I=new zHe(w,N,p);C=n.runWebGLProgram(I,[s],s.dtype)}const S=Ae({inputs:{x:C},backend:n,attrs:{shape:y}});return n.disposeIntermediateTensorInfo(C),S}const BHe={kernelName:J$,backendName:"webgl",kernelFunc:FHe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VHe(t){const{inputs:e,backend:n,attrs:r}=t,{separator:s,nGramWidths:i,leftPad:o,rightPad:a,padWidth:l,preserveShortSequences:c}=r,{data:u,dataSplits:h}=e,m=n.readSync(u.dataId),p=n.readSync(h.dataId),[y,v]=s5e(m,p,s,i,o,a,l,c);return[n.makeTensorInfo([y.length],"string",y),n.makeTensorInfo(h.shape,"int32",v)]}const jHe={kernelName:Fj,backendName:"webgl",kernelFunc:VHe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UHe(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:s}=r,{input:i,delimiter:o}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(i.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${i.shape}`);if(o.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${o.shape}`);const a=n.readSync(i.dataId),l=n.readSync(o.dataId)[0],[c,u,h]=i5e(a,l,s),m=u.length;return[n.makeTensorInfo([m,2],"int32",c),n.makeTensorInfo([m],"string",u),n.makeTensorInfo([2],"int32",new Int32Array(h))]}const HHe={kernelName:Bj,backendName:"webgl",kernelFunc:UHe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GHe(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:s}=r,{input:i}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(s<=0)throw new Error("Number of buckets must be at least 1");const o=n.readSync(i.dataId),a=o5e(o,s);return n.makeTensorInfo(i.shape,"int32",a)}const WHe={kernelName:Vj,backendName:"webgl",kernelFunc:GHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qHe="return tan(x);",KHe=zt({opSnippet:qHe}),ZHe={kernelName:ry,backendName:"webgl",kernelFunc:KHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XHe=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,YHe=zt({opSnippet:XHe}),JHe={kernelName:sy,backendName:"webgl",kernelFunc:YHe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QHe(t){const{inputs:e,backend:n,attrs:r}=t,{tensor:s,indices:i,updates:o}=e,{sliceRank:a,numUpdates:l,sliceSize:c,strides:u,outputSize:h}=Ld(o,i,s.shape),m=[h/c,c];if(h===0)return n.makeTensorInfo(s.shape,i.dtype);const p=Ae({inputs:{x:i},backend:n,attrs:{shape:[l,a]}}),y=Ae({inputs:{x:o},backend:n,attrs:{shape:[l,c]}}),v=Ae({inputs:{x:s},backend:n,attrs:{shape:m}}),x=new Q3(l,a,p.shape.length,y.shape.length,u,m,!1,!0),b=n.runWebGLProgram(x,[y,p,v],v.dtype),w=Ae({inputs:{x:b},backend:n,attrs:{shape:s.shape}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(b),w}const eGe={kernelName:Rj,backendName:"webgl",kernelFunc:QHe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tGe{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let o=0;o<r.length;o++)r[o]=e[o]*n[o];this.outputShape=r,this.rank=r.length;const s=cn(this.rank),i=nGe(e);this.userCode=`
      void main() {
        ${s} resRC = getOutputCoords();
        setOutput(getA(${i}));
      }
    `}}function nGe(t){const e=t.length;if(e>5)throw Error(`Tile for rank ${e} is not yet supported`);if(e===1)return`imod(resRC, ${t[0]})`;const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let s=0;s<t.length;s++)r.push(`imod(${n[s]}, ${t[s]})`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QW(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{reps:i}=r;if(s.dtype==="string"||s.shape.length>5){const l=n.readSync(s.dataId),c=s.dtype==="string"?l.map(m=>jc(m)):l,u=bt(s.shape,s.dtype,c),h=l5e(u,i);return n.makeTensorInfo(h.shape,h.dtype,h.values)}const o=new tGe(s.shape,i);return n.runWebGLProgram(o,[s],s.dtype)}const rGe={kernelName:iy,backendName:"webgl",kernelFunc:QW};class sGe{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}}class iGe{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ku(t,e){e!==null&&t.disposeIntermediateTensorInfo(e)}function pz(t){let e=1;for(;e<t;)e*=2;return e}function oGe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{k:i,sorted:o}=r,a=de().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=de().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),c=s.shape,u=c[c.length-1];if(n.shouldExecuteOnCPU([s])||u<a||i>l){const R=n.readSync(s.dataId),[D,B]=c5e(R,c,s.dtype,i,o);return[n.makeTensorInfo(D.shape,D.dtype,D.values),n.makeTensorInfo(B.shape,B.dtype,B.values)]}if(i===0)return c[c.length-1]=0,[n.makeTensorInfo(c,s.dtype,[]),n.makeTensorInfo(c,"int32",[])];if(u===1)return[s,Ty({attrs:{shape:c,dtype:"int32",value:0},backend:n})];const h=n.texData.get(s.dataId),m=h!==null&&h.isPacked,p=m?n.unpackTensor(s):s,v=pe(c)/u,x=Ae({inputs:{x:p},attrs:{shape:[v,u]},backend:n});m&&ku(n,p);const b=pz(i),w=pz(u);let E=null;const N=()=>E===null?[x,x]:[x,E],C=(R,D,B)=>{const Z=N(),z=new sGe(B),M=[[u],[E===null?1:0],[Number.NEGATIVE_INFINITY],[R],[D]],U=E;E=n.runWebGLProgram(z,Z,"int32",M),ku(n,U)};for(let R=1;R<b;R*=2){const D=R*2;for(let B=R;B>=1;B/=2)C(D,B,[v,w])}for(let R=w;R>b;R/=2){const D=N(),B=new iGe([v,R/2]),z=[[u],[E===null?1:0],[b]],q=E;E=n.runWebGLProgram(B,D,"int32",z),ku(n,q);const M=b/2,U=M*2;for(let V=M;V>=1;V/=2)C(U,V,E.shape)}let S=E;E=pm({inputs:{x:E},backend:n,attrs:{begin:0,size:[v,i]}}),ku(n,S);let T=GW({inputs:{x,indices:E},backend:n,attrs:{axis:1,batchDims:1}});ku(n,x);const I=c.slice(0,-1);I.push(i),S=E,E=Ae({inputs:{x:E},attrs:{shape:I},backend:n}),ku(n,S);const P=T;return T=Ae({inputs:{x:T},attrs:{shape:I},backend:n}),ku(n,P),[T,E]}const aGe={kernelName:Q$,backendName:"webgl",kernelFunc:oGe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class lGe{constructor(e,n,r,s,i,o){this.variableNames=["Image","Transforms"],this.outputShape=o;const a=r==="nearest"?1:2;let l;switch(s){case"constant":l=1;break;case"reflect":l=2;break;case"wrap":l=3;break;case"nearest":l=4;break;default:l=1;break}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(${l} == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < ${e} && 0 <= coordX && coordX < ${n}) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(${i});
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(${i});
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(${n}));
                float mapY = mapCoord(inY, float(${e}));

                if (${a} == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cGe(t){const{inputs:e,backend:n,attrs:r}=t,{image:s,transforms:i}=e,{interpolation:o,fillMode:a,fillValue:l,outputShape:c}=r,[u,h,m,p]=s.shape,[y,v]=c??[h,m],x=[u,y,v,p],b=new lGe(h,m,o,a,l,x);return n.runWebGLProgram(b,[s,i],"float32")}const uGe={kernelName:eI,backendName:"webgl",kernelFunc:cGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dGe(t){const{inputs:e,attrs:n,backend:r}=t,{axis:s}=n,{x:i}=e;Cy(i,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const o=r.readSync(i.dataId),{outputValues:a,outputShape:l,indices:c}=u5e(o,s,i.shape,i.dtype);return[r.makeTensorInfo(l,i.dtype,a),r.makeTensorInfo([c.length],"int32",c)]}const hGe={kernelName:tI,backendName:"webgl",kernelFunc:dGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fGe(t){const{inputs:e,backend:n,attrs:r}=t,{value:s}=e;let{axis:i}=r;i<0&&(i+=s.shape.length);const o=s,a=o.shape.length,l=s.shape[i],c=new Array(a-1);let u=0;for(let v=0;v<a;v++)v!==i&&(c[u++]=o.shape[v]);const h=[],m=new Array(a).fill(0),p=o.shape.slice();p[i]=1;const y=new Array(l);for(let v=0;v<y.length;v++){m[i]=v;const x=pm({inputs:{x:o},backend:n,attrs:{begin:m,size:p}}),b=Ae({inputs:{x},backend:n,attrs:{shape:c}});y[v]=b,h.push(x)}return h.forEach(v=>n.disposeIntermediateTensorInfo(v)),y}const mGe={kernelName:Hw,backendName:"webgl",kernelFunc:fGe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class pGe{constructor(e,n){this.variableNames=["x","segmentIds"];const r=e.windowSize,s=e.batchSize,i=e.inSize,o=e.numSegments,a=o*Math.ceil(i/r);this.outputShape=[s,a];const l="0.0",c="sumValue",u=Math.floor(r/4)*4,h=r%4,m=`
        sumValue += dot(values, segFilter);
    `;let p="";i%r>0&&(p=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return initializationValue;
        }
      `);let y="";i%r>0&&(y=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${l};

      float getValue(int batch, int inIdx) {
        ${p}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${y}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${o})) * float(${r}));
        int currentSeg = int(mod(float(outIdx), float(${o})));

        float sumValue = 0.0;

        for (int i = 0; i < ${u}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${m}
        }

        int inIdx = inOffset + ${u};
        if (${h===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${m}
        } else if (${h===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${m}
        } else if (${h===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${m}
        }
        setOutput(${c});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gGe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,segmentIds:i}=e,{numSegments:o}=r,a=s.shape.length,l=[];let c=0;const u=jn([c],a);let h=s;u!=null&&(h=Is({inputs:{x:s},backend:n,attrs:{perm:u}}),l.push(h),c=tr(1,a)[0]);const m=OU(h.shape,c,o),p=pe([h.shape[c]]),y=Ae({inputs:{x:h},backend:n,attrs:{shape:[-1,p]}});l.push(y);const v=sI(s.dtype),x=(N,C,S,T,I)=>{const P=N.shape[0],R=N.shape[1],D=DU(R,I),B={windowSize:D,inSize:R,batchSize:P,numSegments:I},Z=new pGe(B,C),z=n.compileAndRun(Z,[N,S],T);if(l.push(z),z.shape[1]===I)return z;const q=JW({backend:n,attrs:{start:0,stop:I,step:1,dtype:"float32"}}),M=QW({inputs:{x:q},backend:n,attrs:{reps:[R/D]}});return l.push(q),l.push(M),x(z,C,M,T,I)},b=x(y,"unsortedSegmentSum",i,v,o),w=Ae({inputs:{x:b},backend:n,attrs:{shape:m}});let E=w;if(u!=null){l.push(w);const N=tu(u);E=Is({inputs:{x:E},backend:n,attrs:{perm:N}})}return l.forEach(N=>n.disposeIntermediateTensorInfo(N)),E}const yGe={kernelName:Gw,backendName:"webgl",kernelFunc:gGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bGe=[t6e,r6e,o6e,c6e,d6e,m6e,g6e,b6e,E6e,N6e,S6e,I6e,P6e,M6e,B6e,j6e,H6e,K6e,X6e,J6e,nBe,cBe,dBe,pBe,yBe,kBe,CBe,$Be,z5e,RBe,MBe,VBe,qBe,XBe,JBe,eVe,nVe,oVe,cVe,hVe,mVe,gVe,bVe,wVe,kVe,SVe,$Ve,RVe,OVe,MVe,VVe,GVe,ZVe,JVe,t8e,n8e,s8e,o8e,l8e,u8e,h8e,g8e,v8e,E8e,N8e,S8e,I8e,D8e,z8e,M5e,B8e,OBe,U8e,W8e,Z8e,B5e,Q8e,rje,ije,cje,hje,gje,vje,kje,Sje,Ije,Rje,Lje,zje,Bje,Hje,Wje,Kje,Xje,Jje,n7e,o7e,u7e,b7e,U5e,E7e,C7e,T7e,A7e,vBe,D7e,L7e,z7e,V7e,G7e,j5e,q7e,Z7e,Y7e,Q7e,eUe,xBe,m7e,rUe,aUe,dUe,G5e,pUe,bUe,EUe,CUe,$Ue,AUe,DUe,MUe,BUe,UUe,WUe,ZUe,QUe,nHe,oHe,cHe,aBe,g7e,hHe,mHe,gHe,bHe,xHe,EHe,NHe,_He,THe,AHe,PHe,OHe,MHe,BHe,jHe,HHe,WHe,p7e,J5e,ZHe,JHe,eGe,rGe,aGe,uGe,Q5e,hGe,mGe,yGe,O7e];for(const t of bGe)Uj(t);const eA={search:[" ","  "," ","  ","  ","  "," ","    ","    ","     "],booking:["  ","  ","  "," "," ","   "," ","  ","   ","  "],profile:[" ","","",""," "," "," ","  ","  ","  "],requests:["","","",""," "," ","  "," "," "," "],settings:["","  "," "," "," "," "," "," "," "," "],help:["","",""," "," ","",""," "," "," "],greeting:[""," "," "," ","","",""," "," "," "],thanks:[""," "," ","","","  ","  "," ","  ","  "],goodbye:[" "," ","","","  "," "," "," "," ","  "]},ix=Object.keys(eA);let Ag=[],tA=null,L_=!1;const vGe=async()=>{if(!L_)try{xGe(),tA=wGe(),await EGe(),L_=!0,console.log("     ")}catch(t){console.error("     :",t)}},xGe=()=>{const t=new Set;Object.values(eA).forEach(e=>{e.forEach(n=>{n.split(/\s+/).forEach(s=>{s.length>1&&t.add(s)})})}),Ag=Array.from(t),console.log(`  : ${Ag.length} `)},eq=t=>{const e=new Array(Ag.length).fill(0);return t.split(/\s+/).forEach(r=>{const s=Ag.indexOf(r);s!==-1&&(e[s]=1)}),e},wGe=()=>{const t=LAe();return t.add(Lk({units:128,activation:"relu",inputShape:[Ag.length]})),t.add(Lk({units:64,activation:"relu"})),t.add(Lk({units:ix.length,activation:"softmax"})),t.compile({optimizer:"adam",loss:"categoricalCrossentropy",metrics:["accuracy"]}),t},EGe=async()=>{const t=[],e=[];ix.forEach((s,i)=>{eA[s].forEach(o=>{const a=eq(o);t.push(a);const l=new Array(ix.length).fill(0);l[i]=1,e.push(l)})});const n=Jh(t),r=Jh(e);await tA.fit(n,r,{epochs:100,batchSize:8,shuffle:!0,verbose:0}),n.dispose(),r.dispose(),console.log("   ")},Uk=async t=>{L_||await vGe();try{const e=eq(t),n=Jh([e]),r=await tA.predict(n).data();n.dispose();let s=0,i=r[0];for(let o=1;o<r.length;o++)r[o]>i&&(s=o,i=r[o]);return i<.3?{intent:"unknown",confidence:i}:{intent:ix[s],confidence:i}}catch(e){return console.error("   :",e),{intent:"unknown",confidence:0}}},tq={INITIAL:"initial",SEARCHING:"searching",BOOKING:"booking",PROFILE:"profile",REQUESTS:"requests",SETTINGS:"settings",HELP:"help"},kGe=()=>({id:IGe(),state:tq.INITIAL,context:{},history:[],createdAt:new Date,updatedAt:new Date}),NGe=(t,e)=>({...t,history:[...t.history,e],updatedAt:new Date}),CGe=(t,e)=>({...t,state:e,updatedAt:new Date}),_Ge=(t,e)=>({...t,context:{...t.context,...e},updatedAt:new Date}),SGe=t=>{const e=t.history.filter(n=>n.isUser);return e.length>0?e[e.length-1]:null},TGe=t=>{const e=t.history.filter(n=>!n.isUser);return e.length>0?e[e.length-1]:null},$Ge=(t,e=30)=>{const n=new Date,r=new Date(t.updatedAt),s=n-r;return Math.floor(s/6e4)<e},IGe=()=>`conv_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,Wi={createConversation:kGe,addMessage:NGe,updateState:CGe,updateContext:_Ge,getLastUserMessage:SGe,getLastBotMessage:TGe,isConversationActive:$Ge,CONVERSATION_STATES:tq},AGe=({question:t,darkMode:e,onSelect:n})=>d.createElement("button",{onClick:()=>n(t),className:`w-full text-right p-2 rounded-md mb-1 transition-colors flex items-center ${e?"bg-gray-700 hover:bg-gray-600 text-white":"bg-indigo-50 hover:bg-indigo-100 text-gray-800"}`},d.createElement(r8,{size:16,className:e?"text-indigo-300 ml-2":"text-indigo-500 ml-2"}),d.createElement("span",{className:"text-sm"},t)),RGe=({title:t,questions:e,darkMode:n,onSelect:r,isExpanded:s,onToggle:i})=>d.createElement("div",{className:"mb-3"},d.createElement("div",{className:`flex justify-between items-center p-2 rounded-md mb-2 cursor-pointer ${n?"bg-gray-700 text-white hover:bg-gray-600":"bg-indigo-100 text-gray-800 hover:bg-indigo-200"}`,onClick:i},d.createElement("div",{className:"flex items-center"},s?d.createElement(NC,{size:18,className:"ml-1"}):d.createElement(fg,{size:18,className:"ml-1"}),d.createElement("span",{className:"font-semibold"},t))),s&&d.createElement("div",{className:"pr-2"},e.map((o,a)=>d.createElement(AGe,{key:a,question:o,darkMode:n,onSelect:r})))),PGe=({darkMode:t,onSelectQuestion:e})=>{const n=[{title:" ",questions:["   ","    ","    ","    ","    "]},{title:" ",questions:["    ","   ","   ","   ","    "]},{title:" ",questions:["   ","     ","    "]},{title:" ",questions:["    ","   ","     "]},{title:" ",questions:["    ","   ","    "]}],[r,s]=A.useState({}),i=o=>{s(a=>({...a,[o]:!a[o]}))};return A.useEffect(()=>{s(o=>({...o,[n[0].title]:!0}))},[]),d.createElement("div",{className:"w-full"},d.createElement("div",{className:"mb-3"},d.createElement("h3",{className:`text-md font-bold mb-2 ${t?"text-white":"text-gray-800"}`}," "),d.createElement("div",null,n.map((o,a)=>d.createElement(RGe,{key:a,title:o.title,questions:o.questions,darkMode:t,onSelect:e,isExpanded:r[o.title]||!1,onToggle:()=>i(o.title)})))))},DGe="/assets/11zon_cropped-889cc5ec.png",OGe="/assets/user-avatar-85e106b2.svg",Hk={"   ":'        " "          .',"   ":'             ""          .',"     ":'          " "     "".',"    ":'         ""     "  ".',"   ":'        ""    " "        " "  " "            "5 ".',"   ":'          ""    " "       " "   .',"    ":'         ""        .',"    ":"       : support@jobscope.com    : +963 11 123 4567","   ":"              9   5     .","     ":"                  .","    ":'         " "     ""          "".',"    ":'         " "     ""          "".',"    ":'         " "     ""        .',"    ":'                    ""   " ".',"   ":'                    ""    .',"    ":'         ""         (    ).',"   ":'        ""    " "        " ".         " "       5 .',"      ":"           .            .","        ":"                  .","   ":'           ""    " "       .',"    ":"   JobScope    .         ."},LGe=["   ","   ","     ","    ","   "],gz=({message:t,isUser:e,darkMode:n,isThinking:r})=>d.createElement("div",{className:`flex ${e?"justify-end":"justify-start"} mb-3`},d.createElement("div",{className:"flex items-start max-w-[80%]"},!e&&d.createElement("img",{src:DGe,alt:"Bot",className:"w-10 h-10 rounded-full mr-2 mt-1 object-contain"}),d.createElement("div",{className:`px-4 py-2 rounded-lg ${e?n?"bg-indigo-600 text-white":"bg-indigo-500 text-white":n?"bg-gray-700 text-white":"bg-white text-gray-800 border border-gray-200"} ${r?"animate-pulse":""}`},r?d.createElement("div",{className:"flex items-center"},d.createElement("span",null," "),d.createElement("div",{className:"ml-2 flex space-x-1"},d.createElement("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),d.createElement("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),d.createElement("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}}))):t),e&&d.createElement("img",{src:OGe,alt:"User",className:"w-8 h-8 rounded-full ml-2 mt-1"}))),MGe=({suggestions:t,onSelect:e,darkMode:n})=>d.createElement("div",{className:"flex flex-wrap gap-2 my-3 justify-center"},t.map((r,s)=>d.createElement("button",{key:s,onClick:()=>e(r),className:`px-3 py-1.5 text-sm rounded-full ${n?"bg-gray-700 text-white hover:bg-gray-600":"bg-indigo-100 text-indigo-700 hover:bg-indigo-200"} transition-colors duration-200 text-right shadow-sm hover:shadow-md border ${n?"border-gray-600":"border-indigo-200"} cursor-pointer flex items-center gap-1`},d.createElement(o8,{size:14,className:n?"text-gray-300":"text-indigo-500"}),d.createElement("span",null,r)))),zGe=()=>{const[t,e]=A.useState(!1),[n,r]=A.useState([]),[s,i]=A.useState(""),[o,a]=A.useState(LGe),[l,c]=A.useState(!0),[u,h]=A.useState(!1),[m,p]=A.useState(null),[y,v]=A.useState(!1),[x,b]=A.useState(!1),[w,E]=A.useState(!1),N=A.useRef(null),C=A.useRef(null),S=We(M=>M.darkMode),T=mg(M=>M.language),I=Dt(M=>M.isAuthenticated),P=Lr();A.useEffect(()=>{if(t&&!m){const M=Wi.createConversation();p(M)}},[t,m]);const R=()=>{var M;(M=N.current)==null||M.scrollIntoView({behavior:"smooth"})};A.useEffect(()=>{if(t&&n.length===0&&y){const M={text:"    JobScope!     .    ",isUser:!1};if(r([M]),m){const U=Wi.addMessage(m,M);p(U)}}else t&&n.length===0&&!y&&!x&&r([{text:"    JobScope!    ...                .",isUser:!1}]);t&&setTimeout(()=>{var M;(M=C.current)==null||M.focus()},100)},[t,m,n.length,y,x]),A.useEffect(()=>{R()},[n]),A.useEffect(()=>{t&&!y&&!x&&(async()=>{try{b(!0),console.log("     ...");const U={text:"   ...     .",isUser:!1};r(V=>[...V,U]),await Uk(""),v(!0),console.log("      "),r([{text:"    JobScope!     .    ",isUser:!1}])}catch(U){console.error("      :",U),r(V=>[...V.filter(ne=>!ne.text.includes("   ")),{text:" !      .        .",isUser:!1}])}finally{b(!1)}})()},[t,y,x]);const D=async()=>{if(!s.trim())return;const M={text:s,isUser:!0},U=s;if(r(V=>[...V,M]),i(""),c(!1),h(!0),m){const V=Wi.addMessage(m,M);p(V)}setTimeout(async()=>{try{let V=null,ne=0,J=null;const G=U.trim().replace(/[.,!]/g,"");for(const[X,H]of Object.entries(Hk)){const W=X.trim().replace(/[.,!]/g,"");if(G===W){V={text:H,isUser:!1};break}if(G.includes(W)||W.includes(G)){const ae=Math.min(G.length,W.length)/Math.max(G.length,W.length);ae>ne&&(ne=ae,J=H)}}if(!V&&ne>.7&&(V={text:J,isUser:!1}),!V){const X=AL(U),H=RL(n,X),W=y?await Uk(U):{intent:"unknown",confidence:0},te=W.confidence>H.confidence?{...H,intent:W.intent,confidence:W.confidence}:H,ae=PL(te);if(V={text:ae.text,isUser:!1},a(ae.suggestions),m){const ve=Wi.updateState(m,te.intent),Ce=Wi.updateContext(ve,{lastIntent:te.intent,profession:te.profession,city:te.city,hospital:te.hospital,mosque:te.mosque});p(Ce)}}if(h(!1),r(X=>[...X,V]),c(!0),m){const X=Wi.addMessage(m,V);p(X)}}catch(V){console.error("   :",V),h(!1),r(ne=>[...ne,{text:"     .    .",isUser:!1}]),c(!0)}},1e3)},B=M=>{E(!1);const U={text:M,isUser:!0};if(r(ne=>[...ne,U]),h(!0),m){const ne=Wi.addMessage(m,U);p(ne)}let V=null;for(const[ne,J]of Object.entries(Hk))if(ne===M){V=J;break}setTimeout(()=>{const ne={text:V||"        .",isUser:!1};if(h(!1),r(J=>[...J,ne]),c(!0),m){const J=Wi.addMessage(m,ne);p(J)}},500)},Z=M=>{c(!1);const U={text:M,isUser:!0};if(r(V=>[...V,U]),h(!0),m){const V=Wi.addMessage(m,U);p(V)}setTimeout(async()=>{try{let V=null,ne=0,J=null;const G=M.trim().replace(/[.,!]/g,"");for(const[X,H]of Object.entries(Hk)){const W=X.trim().replace(/[.,!]/g,"");if(G===W){V={text:H,isUser:!1};break}if(G.includes(W)||W.includes(G)){const ae=Math.min(G.length,W.length)/Math.max(G.length,W.length);ae>ne&&(ne=ae,J=H)}}if(!V&&ne>.7&&(V={text:J,isUser:!1}),!V){const X=AL(M),H=RL(n,X),W=y?await Uk(M):{intent:"unknown",confidence:0},te=W.confidence>H.confidence?{...H,intent:W.intent,confidence:W.confidence}:H,ae=PL(te);if(V={text:ae.text,isUser:!1},a(ae.suggestions),m){const ve=Wi.updateState(m,te.intent),Ce=Wi.updateContext(ve,{lastIntent:te.intent,profession:te.profession,city:te.city,hospital:te.hospital,mosque:te.mosque});p(Ce)}}if(h(!1),r(X=>[...X,V]),c(!0),m){const X=Wi.addMessage(m,V);p(X)}}catch(V){console.error("   :",V),h(!1),r(ne=>[...ne,{text:"     .    .",isUser:!1}]),c(!0)}},1e3)},q={ar:{title:"   JobScope ",placeholder:"  ...",send:""},en:{title:"JobScope AI Assistant",placeholder:"Type your message here...",send:"Send"}}[T];return I?d.createElement(d.Fragment,null,t&&x&&d.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-[200] cursor-not-allowed flex items-center justify-center"},d.createElement("div",{className:`${S?"bg-gray-800 text-white":"bg-white text-gray-800"} p-6 rounded-lg shadow-xl flex flex-col items-center`},d.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-500 mb-4"}),d.createElement("p",{className:"text-lg font-semibold"},"   ..."),d.createElement("p",{className:`text-sm ${S?"text-gray-300":"text-gray-500"} mt-2`},"  "),d.createElement("p",{className:`text-xs ${S?"text-gray-400":"text-gray-600"} mt-3 text-center max-w-xs`},"        .        ."))),!t&&d.createElement("button",{onClick:()=>e(!0),className:`fixed bottom-6 left-6 w-14 h-14 rounded-full flex items-center justify-center shadow-lg z-[100] transition-all duration-200 hover:scale-105 ${S?"bg-indigo-600 hover:bg-indigo-700":"bg-indigo-500 hover:bg-indigo-600"} animate-pulse-subtle`},d.createElement("div",{className:"relative"},d.createElement(Sie,{size:24,className:"text-white"}),d.createElement("div",{className:"absolute -top-1 -right-1"},d.createElement(yoe,{size:12,className:"text-yellow-300 animate-sparkle-spin"})))),t&&d.createElement("div",{className:`fixed bottom-6 left-6 z-[100] shadow-xl rounded-lg overflow-hidden ${S?"border border-gray-700":"border border-gray-200"} animate-fadeIn w-[350px]`},d.createElement("div",{className:`p-3 ${S?"bg-indigo-700":"bg-indigo-600"} text-white flex justify-between items-center`},d.createElement("div",{className:"flex items-center"},d.createElement($ie,{size:18,className:"mr-2 text-yellow-300"}),d.createElement("h3",{className:"font-bold"},q.title)),d.createElement("div",{className:"flex items-center"},d.createElement("button",{onClick:()=>E(!w),className:`hover:bg-indigo-800 rounded-full p-1 transition-colors mr-1 ${w?"bg-indigo-800":""}`,title:w?"  ":" "},w?d.createElement(o8,{size:20,className:"text-white"}):d.createElement(r8,{size:20,className:"text-white"})),d.createElement("button",{onClick:()=>e(!1),className:"hover:bg-indigo-800 rounded-full p-1 transition-colors",title:""},d.createElement(fo,{size:20,className:"text-white"})))),d.createElement("div",{className:`p-2 flex justify-around items-center border-b ${S?"bg-gray-800 border-gray-700":"bg-gray-100 border-gray-200"}`},d.createElement("button",{onClick:()=>{e(!1),P("/")},className:`p-2 rounded-full flex flex-col items-center justify-center ${S?"hover:bg-gray-700":"hover:bg-gray-200"}`,title:" "},d.createElement(HT,{size:20,className:S?"text-white":"text-gray-700"}),d.createElement("span",{className:`text-xs mt-1 ${S?"text-gray-300":"text-gray-600"}`},"")),d.createElement("button",{onClick:()=>{e(!1),P("/search")},className:`p-2 rounded-full flex flex-col items-center justify-center ${S?"hover:bg-gray-700":"hover:bg-gray-200"}`,title:"  "},d.createElement(xf,{size:20,className:S?"text-white":"text-gray-700"}),d.createElement("span",{className:`text-xs mt-1 ${S?"text-gray-300":"text-gray-600"}`},"")),d.createElement("button",{onClick:()=>{e(!1),P("/bookings")},className:`p-2 rounded-full flex flex-col items-center justify-center ${S?"hover:bg-gray-700":"hover:bg-gray-200"}`,title:""},d.createElement(UT,{size:20,className:S?"text-white":"text-gray-700"}),d.createElement("span",{className:`text-xs mt-1 ${S?"text-gray-300":"text-gray-600"}`},"")),d.createElement("button",{onClick:()=>{e(!1),P("/settings")},className:`p-2 rounded-full flex flex-col items-center justify-center ${S?"hover:bg-gray-700":"hover:bg-gray-200"}`,title:""},d.createElement(qT,{size:20,className:S?"text-white":"text-gray-700"}),d.createElement("span",{className:`text-xs mt-1 ${S?"text-gray-300":"text-gray-600"}`},""))),d.createElement("div",{className:`h-[350px] overflow-y-auto p-4 ${S?"bg-gray-800":"bg-gray-50"}`},w?d.createElement(PGe,{darkMode:S,onSelectQuestion:B}):d.createElement(d.Fragment,null,n.map((M,U)=>d.createElement(gz,{key:U,message:M.text,isUser:M.isUser,darkMode:S})),u&&d.createElement(gz,{message:"",isUser:!1,darkMode:S,isThinking:!0}),l&&!u&&!x&&d.createElement(MGe,{suggestions:o,onSelect:Z,darkMode:S}),x&&d.createElement("div",{className:`flex items-center justify-center p-4 ${S?"text-gray-300":"text-gray-600"}`},d.createElement("div",{className:"flex flex-col items-center"},d.createElement("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-indigo-500 mb-2"}),d.createElement("p",{className:"text-sm"},"   ..."),d.createElement("p",{className:"text-xs mt-2 text-center max-w-xs opacity-80"},"     .       .")))),d.createElement("div",{ref:N})),!w&&d.createElement("div",{className:`p-3 ${S?"bg-gray-900":"bg-white"} border-t ${S?"border-gray-700":"border-gray-200"}`},d.createElement("form",{onSubmit:M=>{M.preventDefault(),D()},className:"flex items-center"},d.createElement("input",{ref:C,type:"text",value:s,onChange:M=>i(M.target.value),placeholder:x?"   ...":q.placeholder,className:`flex-grow p-2 rounded-l-md ${S?"bg-gray-800 text-white border-gray-700":"bg-gray-100 text-gray-900 border-gray-300"} border focus:outline-none focus:ring-2 focus:ring-indigo-500 ${x?"opacity-70":""}`,dir:T==="ar"?"rtl":"ltr",disabled:u||x}),d.createElement("button",{type:"submit",className:`p-2 rounded-r-md mr-2 ${S?"bg-indigo-600 hover:bg-indigo-700":"bg-indigo-500 hover:bg-indigo-600"} text-white transition-colors ${u||x?"opacity-50 cursor-not-allowed":""}`,disabled:u||x},d.createElement(moe,{size:20})))))):null},ds=({children:t,user:e,onLogout:n,hideFooter:r=!1,hideHeader:s=!1})=>{const i=We(o=>o.darkMode);return d.createElement("div",{className:`flex flex-col min-h-screen ${i?"bg-gray-900 text-white":"bg-gradient-to-br from-blue-50 to-indigo-100 text-black"} transition-colors duration-300`},!s&&d.createElement(Xoe,{user:e,onLogout:n}),d.createElement("main",{className:"flex-grow"},t),!r&&d.createElement(Yoe,null),d.createElement(zGe,null))},yr=({label:t,type:e="text",name:n,value:r,onChange:s,placeholder:i,error:o,required:a=!1,className:l="",...c})=>{const u=We(y=>y.darkMode),[h,m]=A.useState(!1),p=e==="password"&&h?"text":e;return d.createElement("div",{className:"mb-4"},t&&d.createElement("label",{htmlFor:n,className:`block font-medium mb-2 ${u?"text-gray-200":"text-gray-700"}`},t),d.createElement("div",{className:"relative"},d.createElement("input",{type:p,id:n,name:n,value:r,onChange:s,placeholder:i,className:`input ${o?"border-red-500 focus:ring-red-500":""} ${e==="password"?"pr-3 pl-10":""} ${l}`,required:a,...c}),e==="password"&&d.createElement("button",{type:"button",className:`absolute left-3 top-1/2 transform -translate-y-1/2 ${u?"text-gray-400 hover:text-gray-300":"text-gray-500 hover:text-gray-700"}`,onClick:()=>m(!h),tabIndex:"-1"},h?d.createElement(CC,{size:18}):d.createElement(_C,{size:18}))),o&&d.createElement("p",{className:"text-red-500 text-sm mt-1"},o))},wc=({isLoading:t=!1,loadingText:e=" ...",children:n,className:r="",onClick:s,variant:i="primary",fullWidth:o=!1,disabled:a=!1,...l})=>d.createElement(Oe,{onClick:s,variant:i,fullWidth:o,disabled:t||a,className:`relative ${r}`,...l},t?d.createElement("div",{className:"flex items-center justify-center"},d.createElement("div",{className:"absolute left-0 right-0 flex items-center justify-center"},d.createElement("svg",{className:"animate-spin h-6 w-6 ml-2 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},d.createElement("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),d.createElement("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})),d.createElement("span",{className:"text-base font-bold whitespace-nowrap px-2 py-1 bg-indigo-600 bg-opacity-30 rounded-md"},e)),d.createElement("div",{className:"opacity-0"},n)):n);function nq(t,e){return function(){return t.apply(e,arguments)}}const{toString:FGe}=Object.prototype,{getPrototypeOf:nA}=Object,{iterator:k2,toStringTag:rq}=Symbol,N2=(t=>e=>{const n=FGe.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),na=t=>(t=t.toLowerCase(),e=>N2(e)===t),C2=t=>e=>typeof e===t,{isArray:gm}=Array,Rg=C2("undefined");function BGe(t){return t!==null&&!Rg(t)&&t.constructor!==null&&!Rg(t.constructor)&&ii(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const sq=na("ArrayBuffer");function VGe(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&sq(t.buffer),e}const jGe=C2("string"),ii=C2("function"),iq=C2("number"),_2=t=>t!==null&&typeof t=="object",UGe=t=>t===!0||t===!1,Iv=t=>{if(N2(t)!=="object")return!1;const e=nA(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(rq in t)&&!(k2 in t)},HGe=na("Date"),GGe=na("File"),WGe=na("Blob"),qGe=na("FileList"),KGe=t=>_2(t)&&ii(t.pipe),ZGe=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||ii(t.append)&&((e=N2(t))==="formdata"||e==="object"&&ii(t.toString)&&t.toString()==="[object FormData]"))},XGe=na("URLSearchParams"),[YGe,JGe,QGe,e9e]=["ReadableStream","Request","Response","Headers"].map(na),t9e=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function $y(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,s;if(typeof t!="object"&&(t=[t]),gm(t))for(r=0,s=t.length;r<s;r++)e.call(null,t[r],r,t);else{const i=n?Object.getOwnPropertyNames(t):Object.keys(t),o=i.length;let a;for(r=0;r<o;r++)a=i[r],e.call(null,t[a],a,t)}}function oq(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,s;for(;r-- >0;)if(s=n[r],e===s.toLowerCase())return s;return null}const ju=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),aq=t=>!Rg(t)&&t!==ju;function M_(){const{caseless:t}=aq(this)&&this||{},e={},n=(r,s)=>{const i=t&&oq(e,s)||s;Iv(e[i])&&Iv(r)?e[i]=M_(e[i],r):Iv(r)?e[i]=M_({},r):gm(r)?e[i]=r.slice():e[i]=r};for(let r=0,s=arguments.length;r<s;r++)arguments[r]&&$y(arguments[r],n);return e}const n9e=(t,e,n,{allOwnKeys:r}={})=>($y(e,(s,i)=>{n&&ii(s)?t[i]=nq(s,n):t[i]=s},{allOwnKeys:r}),t),r9e=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),s9e=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},i9e=(t,e,n,r)=>{let s,i,o;const a={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),i=s.length;i-- >0;)o=s[i],(!r||r(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&nA(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},o9e=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},a9e=t=>{if(!t)return null;if(gm(t))return t;let e=t.length;if(!iq(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},l9e=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&nA(Uint8Array)),c9e=(t,e)=>{const r=(t&&t[k2]).call(t);let s;for(;(s=r.next())&&!s.done;){const i=s.value;e.call(t,i[0],i[1])}},u9e=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},d9e=na("HTMLFormElement"),h9e=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),yz=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),f9e=na("RegExp"),lq=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};$y(n,(s,i)=>{let o;(o=e(s,i,t))!==!1&&(r[i]=o||s)}),Object.defineProperties(t,r)},m9e=t=>{lq(t,(e,n)=>{if(ii(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(ii(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},p9e=(t,e)=>{const n={},r=s=>{s.forEach(i=>{n[i]=!0})};return gm(t)?r(t):r(String(t).split(e)),n},g9e=()=>{},y9e=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function b9e(t){return!!(t&&ii(t.append)&&t[rq]==="FormData"&&t[k2])}const v9e=t=>{const e=new Array(10),n=(r,s)=>{if(_2(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[s]=r;const i=gm(r)?[]:{};return $y(r,(o,a)=>{const l=n(o,s+1);!Rg(l)&&(i[a]=l)}),e[s]=void 0,i}}return r};return n(t,0)},x9e=na("AsyncFunction"),w9e=t=>t&&(_2(t)||ii(t))&&ii(t.then)&&ii(t.catch),cq=((t,e)=>t?setImmediate:e?((n,r)=>(ju.addEventListener("message",({source:s,data:i})=>{s===ju&&i===n&&r.length&&r.shift()()},!1),s=>{r.push(s),ju.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",ii(ju.postMessage)),E9e=typeof queueMicrotask<"u"?queueMicrotask.bind(ju):typeof process<"u"&&process.nextTick||cq,k9e=t=>t!=null&&ii(t[k2]),me={isArray:gm,isArrayBuffer:sq,isBuffer:BGe,isFormData:ZGe,isArrayBufferView:VGe,isString:jGe,isNumber:iq,isBoolean:UGe,isObject:_2,isPlainObject:Iv,isReadableStream:YGe,isRequest:JGe,isResponse:QGe,isHeaders:e9e,isUndefined:Rg,isDate:HGe,isFile:GGe,isBlob:WGe,isRegExp:f9e,isFunction:ii,isStream:KGe,isURLSearchParams:XGe,isTypedArray:l9e,isFileList:qGe,forEach:$y,merge:M_,extend:n9e,trim:t9e,stripBOM:r9e,inherits:s9e,toFlatObject:i9e,kindOf:N2,kindOfTest:na,endsWith:o9e,toArray:a9e,forEachEntry:c9e,matchAll:u9e,isHTMLForm:d9e,hasOwnProperty:yz,hasOwnProp:yz,reduceDescriptors:lq,freezeMethods:m9e,toObjectSet:p9e,toCamelCase:h9e,noop:g9e,toFiniteNumber:y9e,findKey:oq,global:ju,isContextDefined:aq,isSpecCompliantForm:b9e,toJSONObject:v9e,isAsyncFn:x9e,isThenable:w9e,setImmediate:cq,asap:E9e,isIterable:k9e};function mt(t,e,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s,this.status=s.status?s.status:null)}me.inherits(mt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:me.toJSONObject(this.config),code:this.code,status:this.status}}});const uq=mt.prototype,dq={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{dq[t]={value:t}});Object.defineProperties(mt,dq);Object.defineProperty(uq,"isAxiosError",{value:!0});mt.from=(t,e,n,r,s,i)=>{const o=Object.create(uq);return me.toFlatObject(t,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),mt.call(o,t.message,e,n,r,s),o.cause=t,o.name=t.name,i&&Object.assign(o,i),o};const N9e=null;function z_(t){return me.isPlainObject(t)||me.isArray(t)}function hq(t){return me.endsWith(t,"[]")?t.slice(0,-2):t}function bz(t,e,n){return t?t.concat(e).map(function(s,i){return s=hq(s),!n&&i?"["+s+"]":s}).join(n?".":""):e}function C9e(t){return me.isArray(t)&&!t.some(z_)}const _9e=me.toFlatObject(me,{},null,function(e){return/^is[A-Z]/.test(e)});function S2(t,e,n){if(!me.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=me.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(v,x){return!me.isUndefined(x[v])});const r=n.metaTokens,s=n.visitor||u,i=n.dots,o=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&me.isSpecCompliantForm(e);if(!me.isFunction(s))throw new TypeError("visitor must be a function");function c(y){if(y===null)return"";if(me.isDate(y))return y.toISOString();if(!l&&me.isBlob(y))throw new mt("Blob is not supported. Use a Buffer instead.");return me.isArrayBuffer(y)||me.isTypedArray(y)?l&&typeof Blob=="function"?new Blob([y]):Buffer.from(y):y}function u(y,v,x){let b=y;if(y&&!x&&typeof y=="object"){if(me.endsWith(v,"{}"))v=r?v:v.slice(0,-2),y=JSON.stringify(y);else if(me.isArray(y)&&C9e(y)||(me.isFileList(y)||me.endsWith(v,"[]"))&&(b=me.toArray(y)))return v=hq(v),b.forEach(function(E,N){!(me.isUndefined(E)||E===null)&&e.append(o===!0?bz([v],N,i):o===null?v:v+"[]",c(E))}),!1}return z_(y)?!0:(e.append(bz(x,v,i),c(y)),!1)}const h=[],m=Object.assign(_9e,{defaultVisitor:u,convertValue:c,isVisitable:z_});function p(y,v){if(!me.isUndefined(y)){if(h.indexOf(y)!==-1)throw Error("Circular reference detected in "+v.join("."));h.push(y),me.forEach(y,function(b,w){(!(me.isUndefined(b)||b===null)&&s.call(e,b,me.isString(w)?w.trim():w,v,m))===!0&&p(b,v?v.concat(w):[w])}),h.pop()}}if(!me.isObject(t))throw new TypeError("data must be an object");return p(t),e}function vz(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function rA(t,e){this._pairs=[],t&&S2(t,this,e)}const fq=rA.prototype;fq.append=function(e,n){this._pairs.push([e,n])};fq.toString=function(e){const n=e?function(r){return e.call(this,r,vz)}:vz;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function S9e(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function mq(t,e,n){if(!e)return t;const r=n&&n.encode||S9e;me.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let i;if(s?i=s(e,n):i=me.isURLSearchParams(e)?e.toString():new rA(e,n).toString(r),i){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class T9e{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){me.forEach(this.handlers,function(r){r!==null&&e(r)})}}const xz=T9e,pq={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},$9e=typeof URLSearchParams<"u"?URLSearchParams:rA,I9e=typeof FormData<"u"?FormData:null,A9e=typeof Blob<"u"?Blob:null,R9e={isBrowser:!0,classes:{URLSearchParams:$9e,FormData:I9e,Blob:A9e},protocols:["http","https","file","blob","url","data"]},sA=typeof window<"u"&&typeof document<"u",F_=typeof navigator=="object"&&navigator||void 0,P9e=sA&&(!F_||["ReactNative","NativeScript","NS"].indexOf(F_.product)<0),D9e=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),O9e=sA&&window.location.href||"http://localhost",L9e=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:sA,hasStandardBrowserEnv:P9e,hasStandardBrowserWebWorkerEnv:D9e,navigator:F_,origin:O9e},Symbol.toStringTag,{value:"Module"})),Ns={...L9e,...R9e};function M9e(t,e){return S2(t,new Ns.classes.URLSearchParams,Object.assign({visitor:function(n,r,s,i){return Ns.isNode&&me.isBuffer(n)?(this.append(r,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},e))}function z9e(t){return me.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function F9e(t){const e={},n=Object.keys(t);let r;const s=n.length;let i;for(r=0;r<s;r++)i=n[r],e[i]=t[i];return e}function gq(t){function e(n,r,s,i){let o=n[i++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=i>=n.length;return o=!o&&me.isArray(s)?s.length:o,l?(me.hasOwnProp(s,o)?s[o]=[s[o],r]:s[o]=r,!a):((!s[o]||!me.isObject(s[o]))&&(s[o]=[]),e(n,r,s[o],i)&&me.isArray(s[o])&&(s[o]=F9e(s[o])),!a)}if(me.isFormData(t)&&me.isFunction(t.entries)){const n={};return me.forEachEntry(t,(r,s)=>{e(z9e(r),s,n,0)}),n}return null}function B9e(t,e,n){if(me.isString(t))try{return(e||JSON.parse)(t),me.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const iA={transitional:pq,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,i=me.isObject(e);if(i&&me.isHTMLForm(e)&&(e=new FormData(e)),me.isFormData(e))return s?JSON.stringify(gq(e)):e;if(me.isArrayBuffer(e)||me.isBuffer(e)||me.isStream(e)||me.isFile(e)||me.isBlob(e)||me.isReadableStream(e))return e;if(me.isArrayBufferView(e))return e.buffer;if(me.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return M9e(e,this.formSerializer).toString();if((a=me.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return S2(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return i||s?(n.setContentType("application/json",!1),B9e(e)):e}],transformResponse:[function(e){const n=this.transitional||iA.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if(me.isResponse(e)||me.isReadableStream(e))return e;if(e&&me.isString(e)&&(r&&!this.responseType||s)){const o=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?mt.from(a,mt.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ns.classes.FormData,Blob:Ns.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};me.forEach(["delete","get","head","post","put","patch"],t=>{iA.headers[t]={}});const oA=iA,V9e=me.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),j9e=t=>{const e={};let n,r,s;return t&&t.split(`
`).forEach(function(o){s=o.indexOf(":"),n=o.substring(0,s).trim().toLowerCase(),r=o.substring(s+1).trim(),!(!n||e[n]&&V9e[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},wz=Symbol("internals");function Jm(t){return t&&String(t).trim().toLowerCase()}function Av(t){return t===!1||t==null?t:me.isArray(t)?t.map(Av):String(t)}function U9e(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const H9e=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Gk(t,e,n,r,s){if(me.isFunction(r))return r.call(this,e,n);if(s&&(e=n),!!me.isString(e)){if(me.isString(r))return e.indexOf(r)!==-1;if(me.isRegExp(r))return r.test(e)}}function G9e(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function W9e(t,e){const n=me.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(s,i,o){return this[r].call(this,e,s,i,o)},configurable:!0})})}class T2{constructor(e){e&&this.set(e)}set(e,n,r){const s=this;function i(a,l,c){const u=Jm(l);if(!u)throw new Error("header name must be a non-empty string");const h=me.findKey(s,u);(!h||s[h]===void 0||c===!0||c===void 0&&s[h]!==!1)&&(s[h||l]=Av(a))}const o=(a,l)=>me.forEach(a,(c,u)=>i(c,u,l));if(me.isPlainObject(e)||e instanceof this.constructor)o(e,n);else if(me.isString(e)&&(e=e.trim())&&!H9e(e))o(j9e(e),n);else if(me.isObject(e)&&me.isIterable(e)){let a={},l,c;for(const u of e){if(!me.isArray(u))throw TypeError("Object iterator must return a key-value pair");a[c=u[0]]=(l=a[c])?me.isArray(l)?[...l,u[1]]:[l,u[1]]:u[1]}o(a,n)}else e!=null&&i(n,e,r);return this}get(e,n){if(e=Jm(e),e){const r=me.findKey(this,e);if(r){const s=this[r];if(!n)return s;if(n===!0)return U9e(s);if(me.isFunction(n))return n.call(this,s,r);if(me.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Jm(e),e){const r=me.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||Gk(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let s=!1;function i(o){if(o=Jm(o),o){const a=me.findKey(r,o);a&&(!n||Gk(r,r[a],a,n))&&(delete r[a],s=!0)}}return me.isArray(e)?e.forEach(i):i(e),s}clear(e){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const i=n[r];(!e||Gk(this,this[i],i,e,!0))&&(delete this[i],s=!0)}return s}normalize(e){const n=this,r={};return me.forEach(this,(s,i)=>{const o=me.findKey(r,i);if(o){n[o]=Av(s),delete n[i];return}const a=e?G9e(i):String(i).trim();a!==i&&delete n[i],n[a]=Av(s),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return me.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=e&&me.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(s=>r.set(s)),r}static accessor(e){const r=(this[wz]=this[wz]={accessors:{}}).accessors,s=this.prototype;function i(o){const a=Jm(o);r[a]||(W9e(s,o),r[a]=!0)}return me.isArray(e)?e.forEach(i):i(e),this}}T2.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);me.reduceDescriptors(T2.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});me.freezeMethods(T2);const Ho=T2;function Wk(t,e){const n=this||oA,r=e||n,s=Ho.from(r.headers);let i=r.data;return me.forEach(t,function(a){i=a.call(n,i,s.normalize(),e?e.status:void 0)}),s.normalize(),i}function yq(t){return!!(t&&t.__CANCEL__)}function ym(t,e,n){mt.call(this,t??"canceled",mt.ERR_CANCELED,e,n),this.name="CanceledError"}me.inherits(ym,mt,{__CANCEL__:!0});function bq(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new mt("Request failed with status code "+n.status,[mt.ERR_BAD_REQUEST,mt.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function q9e(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function K9e(t,e){t=t||10;const n=new Array(t),r=new Array(t);let s=0,i=0,o;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),u=r[i];o||(o=c),n[s]=l,r[s]=c;let h=i,m=0;for(;h!==s;)m+=n[h++],h=h%t;if(s=(s+1)%t,s===i&&(i=(i+1)%t),c-o<e)return;const p=u&&c-u;return p?Math.round(m*1e3/p):void 0}}function Z9e(t,e){let n=0,r=1e3/e,s,i;const o=(c,u=Date.now())=>{n=u,s=null,i&&(clearTimeout(i),i=null),t.apply(null,c)};return[(...c)=>{const u=Date.now(),h=u-n;h>=r?o(c,u):(s=c,i||(i=setTimeout(()=>{i=null,o(s)},r-h)))},()=>s&&o(s)]}const ox=(t,e,n=3)=>{let r=0;const s=K9e(50,250);return Z9e(i=>{const o=i.loaded,a=i.lengthComputable?i.total:void 0,l=o-r,c=s(l),u=o<=a;r=o;const h={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:c||void 0,estimated:c&&a&&u?(a-o)/c:void 0,event:i,lengthComputable:a!=null,[e?"download":"upload"]:!0};t(h)},n)},Ez=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},kz=t=>(...e)=>me.asap(()=>t(...e)),X9e=Ns.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,Ns.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(Ns.origin),Ns.navigator&&/(msie|trident)/i.test(Ns.navigator.userAgent)):()=>!0,Y9e=Ns.hasStandardBrowserEnv?{write(t,e,n,r,s,i){const o=[t+"="+encodeURIComponent(e)];me.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),me.isString(r)&&o.push("path="+r),me.isString(s)&&o.push("domain="+s),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function J9e(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Q9e(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function vq(t,e,n){let r=!J9e(e);return t&&(r||n==!1)?Q9e(t,e):e}const Nz=t=>t instanceof Ho?{...t}:t;function wd(t,e){e=e||{};const n={};function r(c,u,h,m){return me.isPlainObject(c)&&me.isPlainObject(u)?me.merge.call({caseless:m},c,u):me.isPlainObject(u)?me.merge({},u):me.isArray(u)?u.slice():u}function s(c,u,h,m){if(me.isUndefined(u)){if(!me.isUndefined(c))return r(void 0,c,h,m)}else return r(c,u,h,m)}function i(c,u){if(!me.isUndefined(u))return r(void 0,u)}function o(c,u){if(me.isUndefined(u)){if(!me.isUndefined(c))return r(void 0,c)}else return r(void 0,u)}function a(c,u,h){if(h in e)return r(c,u);if(h in t)return r(void 0,c)}const l={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,u,h)=>s(Nz(c),Nz(u),h,!0)};return me.forEach(Object.keys(Object.assign({},t,e)),function(u){const h=l[u]||s,m=h(t[u],e[u],u);me.isUndefined(m)&&h!==a||(n[u]=m)}),n}const xq=t=>{const e=wd({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:i,headers:o,auth:a}=e;e.headers=o=Ho.from(o),e.url=mq(vq(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let l;if(me.isFormData(n)){if(Ns.hasStandardBrowserEnv||Ns.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((l=o.getContentType())!==!1){const[c,...u]=l?l.split(";").map(h=>h.trim()).filter(Boolean):[];o.setContentType([c||"multipart/form-data",...u].join("; "))}}if(Ns.hasStandardBrowserEnv&&(r&&me.isFunction(r)&&(r=r(e)),r||r!==!1&&X9e(e.url))){const c=s&&i&&Y9e.read(i);c&&o.set(s,c)}return e},eWe=typeof XMLHttpRequest<"u",tWe=eWe&&function(t){return new Promise(function(n,r){const s=xq(t);let i=s.data;const o=Ho.from(s.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:c}=s,u,h,m,p,y;function v(){p&&p(),y&&y(),s.cancelToken&&s.cancelToken.unsubscribe(u),s.signal&&s.signal.removeEventListener("abort",u)}let x=new XMLHttpRequest;x.open(s.method.toUpperCase(),s.url,!0),x.timeout=s.timeout;function b(){if(!x)return;const E=Ho.from("getAllResponseHeaders"in x&&x.getAllResponseHeaders()),C={data:!a||a==="text"||a==="json"?x.responseText:x.response,status:x.status,statusText:x.statusText,headers:E,config:t,request:x};bq(function(T){n(T),v()},function(T){r(T),v()},C),x=null}"onloadend"in x?x.onloadend=b:x.onreadystatechange=function(){!x||x.readyState!==4||x.status===0&&!(x.responseURL&&x.responseURL.indexOf("file:")===0)||setTimeout(b)},x.onabort=function(){x&&(r(new mt("Request aborted",mt.ECONNABORTED,t,x)),x=null)},x.onerror=function(){r(new mt("Network Error",mt.ERR_NETWORK,t,x)),x=null},x.ontimeout=function(){let N=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const C=s.transitional||pq;s.timeoutErrorMessage&&(N=s.timeoutErrorMessage),r(new mt(N,C.clarifyTimeoutError?mt.ETIMEDOUT:mt.ECONNABORTED,t,x)),x=null},i===void 0&&o.setContentType(null),"setRequestHeader"in x&&me.forEach(o.toJSON(),function(N,C){x.setRequestHeader(C,N)}),me.isUndefined(s.withCredentials)||(x.withCredentials=!!s.withCredentials),a&&a!=="json"&&(x.responseType=s.responseType),c&&([m,y]=ox(c,!0),x.addEventListener("progress",m)),l&&x.upload&&([h,p]=ox(l),x.upload.addEventListener("progress",h),x.upload.addEventListener("loadend",p)),(s.cancelToken||s.signal)&&(u=E=>{x&&(r(!E||E.type?new ym(null,t,x):E),x.abort(),x=null)},s.cancelToken&&s.cancelToken.subscribe(u),s.signal&&(s.signal.aborted?u():s.signal.addEventListener("abort",u)));const w=q9e(s.url);if(w&&Ns.protocols.indexOf(w)===-1){r(new mt("Unsupported protocol "+w+":",mt.ERR_BAD_REQUEST,t));return}x.send(i||null)})},nWe=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,s;const i=function(c){if(!s){s=!0,a();const u=c instanceof Error?c:this.reason;r.abort(u instanceof mt?u:new ym(u instanceof Error?u.message:u))}};let o=e&&setTimeout(()=>{o=null,i(new mt(`timeout ${e} of ms exceeded`,mt.ETIMEDOUT))},e);const a=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(c=>{c.unsubscribe?c.unsubscribe(i):c.removeEventListener("abort",i)}),t=null)};t.forEach(c=>c.addEventListener("abort",i));const{signal:l}=r;return l.unsubscribe=()=>me.asap(a),l}},rWe=nWe,sWe=function*(t,e){let n=t.byteLength;if(!e||n<e){yield t;return}let r=0,s;for(;r<n;)s=r+e,yield t.slice(r,s),r=s},iWe=async function*(t,e){for await(const n of oWe(t))yield*sWe(n,e)},oWe=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},Cz=(t,e,n,r)=>{const s=iWe(t,e);let i=0,o,a=l=>{o||(o=!0,r&&r(l))};return new ReadableStream({async pull(l){try{const{done:c,value:u}=await s.next();if(c){a(),l.close();return}let h=u.byteLength;if(n){let m=i+=h;n(m)}l.enqueue(new Uint8Array(u))}catch(c){throw a(c),c}},cancel(l){return a(l),s.return()}},{highWaterMark:2})},$2=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",wq=$2&&typeof ReadableStream=="function",aWe=$2&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),Eq=(t,...e)=>{try{return!!t(...e)}catch{return!1}},lWe=wq&&Eq(()=>{let t=!1;const e=new Request(Ns.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),_z=64*1024,B_=wq&&Eq(()=>me.isReadableStream(new Response("").body)),ax={stream:B_&&(t=>t.body)};$2&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!ax[e]&&(ax[e]=me.isFunction(t[e])?n=>n[e]():(n,r)=>{throw new mt(`Response type '${e}' is not supported`,mt.ERR_NOT_SUPPORT,r)})})})(new Response);const cWe=async t=>{if(t==null)return 0;if(me.isBlob(t))return t.size;if(me.isSpecCompliantForm(t))return(await new Request(Ns.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(me.isArrayBufferView(t)||me.isArrayBuffer(t))return t.byteLength;if(me.isURLSearchParams(t)&&(t=t+""),me.isString(t))return(await aWe(t)).byteLength},uWe=async(t,e)=>{const n=me.toFiniteNumber(t.getContentLength());return n??cWe(e)},dWe=$2&&(async t=>{let{url:e,method:n,data:r,signal:s,cancelToken:i,timeout:o,onDownloadProgress:a,onUploadProgress:l,responseType:c,headers:u,withCredentials:h="same-origin",fetchOptions:m}=xq(t);c=c?(c+"").toLowerCase():"text";let p=rWe([s,i&&i.toAbortSignal()],o),y;const v=p&&p.unsubscribe&&(()=>{p.unsubscribe()});let x;try{if(l&&lWe&&n!=="get"&&n!=="head"&&(x=await uWe(u,r))!==0){let C=new Request(e,{method:"POST",body:r,duplex:"half"}),S;if(me.isFormData(r)&&(S=C.headers.get("content-type"))&&u.setContentType(S),C.body){const[T,I]=Ez(x,ox(kz(l)));r=Cz(C.body,_z,T,I)}}me.isString(h)||(h=h?"include":"omit");const b="credentials"in Request.prototype;y=new Request(e,{...m,signal:p,method:n.toUpperCase(),headers:u.normalize().toJSON(),body:r,duplex:"half",credentials:b?h:void 0});let w=await fetch(y);const E=B_&&(c==="stream"||c==="response");if(B_&&(a||E&&v)){const C={};["status","statusText","headers"].forEach(P=>{C[P]=w[P]});const S=me.toFiniteNumber(w.headers.get("content-length")),[T,I]=a&&Ez(S,ox(kz(a),!0))||[];w=new Response(Cz(w.body,_z,T,()=>{I&&I(),v&&v()}),C)}c=c||"text";let N=await ax[me.findKey(ax,c)||"text"](w,t);return!E&&v&&v(),await new Promise((C,S)=>{bq(C,S,{data:N,headers:Ho.from(w.headers),status:w.status,statusText:w.statusText,config:t,request:y})})}catch(b){throw v&&v(),b&&b.name==="TypeError"&&/Load failed|fetch/i.test(b.message)?Object.assign(new mt("Network Error",mt.ERR_NETWORK,t,y),{cause:b.cause||b}):mt.from(b,b&&b.code,t,y)}}),V_={http:N9e,xhr:tWe,fetch:dWe};me.forEach(V_,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const Sz=t=>`- ${t}`,hWe=t=>me.isFunction(t)||t===null||t===!1,kq={getAdapter:t=>{t=me.isArray(t)?t:[t];const{length:e}=t;let n,r;const s={};for(let i=0;i<e;i++){n=t[i];let o;if(r=n,!hWe(n)&&(r=V_[(o=String(n)).toLowerCase()],r===void 0))throw new mt(`Unknown adapter '${o}'`);if(r)break;s[o||"#"+i]=r}if(!r){const i=Object.entries(s).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=e?i.length>1?`since :
`+i.map(Sz).join(`
`):" "+Sz(i[0]):"as no adapter specified";throw new mt("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:V_};function qk(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new ym(null,t)}function Tz(t){return qk(t),t.headers=Ho.from(t.headers),t.data=Wk.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),kq.getAdapter(t.adapter||oA.adapter)(t).then(function(r){return qk(t),r.data=Wk.call(t,t.transformResponse,r),r.headers=Ho.from(r.headers),r},function(r){return yq(r)||(qk(t),r&&r.response&&(r.response.data=Wk.call(t,t.transformResponse,r.response),r.response.headers=Ho.from(r.response.headers))),Promise.reject(r)})}const Nq="1.9.0",I2={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{I2[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const $z={};I2.transitional=function(e,n,r){function s(i,o){return"[Axios v"+Nq+"] Transitional option '"+i+"'"+o+(r?". "+r:"")}return(i,o,a)=>{if(e===!1)throw new mt(s(o," has been removed"+(n?" in "+n:"")),mt.ERR_DEPRECATED);return n&&!$z[o]&&($z[o]=!0,console.warn(s(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(i,o,a):!0}};I2.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function fWe(t,e,n){if(typeof t!="object")throw new mt("options must be an object",mt.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let s=r.length;for(;s-- >0;){const i=r[s],o=e[i];if(o){const a=t[i],l=a===void 0||o(a,i,t);if(l!==!0)throw new mt("option "+i+" must be "+l,mt.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new mt("Unknown option "+i,mt.ERR_BAD_OPTION)}}const Rv={assertOptions:fWe,validators:I2},ca=Rv.validators;class lx{constructor(e){this.defaults=e||{},this.interceptors={request:new xz,response:new xz}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const i=s.stack?s.stack.replace(/^.+\n/,""):"";try{r.stack?i&&!String(r.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+i):r.stack=i}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=wd(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:i}=n;r!==void 0&&Rv.assertOptions(r,{silentJSONParsing:ca.transitional(ca.boolean),forcedJSONParsing:ca.transitional(ca.boolean),clarifyTimeoutError:ca.transitional(ca.boolean)},!1),s!=null&&(me.isFunction(s)?n.paramsSerializer={serialize:s}:Rv.assertOptions(s,{encode:ca.function,serialize:ca.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Rv.assertOptions(n,{baseUrl:ca.spelling("baseURL"),withXsrfToken:ca.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=i&&me.merge(i.common,i[n.method]);i&&me.forEach(["delete","get","head","post","put","patch","common"],y=>{delete i[y]}),n.headers=Ho.concat(o,i);const a=[];let l=!0;this.interceptors.request.forEach(function(v){typeof v.runWhen=="function"&&v.runWhen(n)===!1||(l=l&&v.synchronous,a.unshift(v.fulfilled,v.rejected))});const c=[];this.interceptors.response.forEach(function(v){c.push(v.fulfilled,v.rejected)});let u,h=0,m;if(!l){const y=[Tz.bind(this),void 0];for(y.unshift.apply(y,a),y.push.apply(y,c),m=y.length,u=Promise.resolve(n);h<m;)u=u.then(y[h++],y[h++]);return u}m=a.length;let p=n;for(h=0;h<m;){const y=a[h++],v=a[h++];try{p=y(p)}catch(x){v.call(this,x);break}}try{u=Tz.call(this,p)}catch(y){return Promise.reject(y)}for(h=0,m=c.length;h<m;)u=u.then(c[h++],c[h++]);return u}getUri(e){e=wd(this.defaults,e);const n=vq(e.baseURL,e.url,e.allowAbsoluteUrls);return mq(n,e.params,e.paramsSerializer)}}me.forEach(["delete","get","head","options"],function(e){lx.prototype[e]=function(n,r){return this.request(wd(r||{},{method:e,url:n,data:(r||{}).data}))}});me.forEach(["post","put","patch"],function(e){function n(r){return function(i,o,a){return this.request(wd(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}lx.prototype[e]=n(),lx.prototype[e+"Form"]=n(!0)});const Pv=lx;class aA{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const r=this;this.promise.then(s=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](s);r._listeners=null}),this.promise.then=s=>{let i;const o=new Promise(a=>{r.subscribe(a),i=a}).then(s);return o.cancel=function(){r.unsubscribe(i)},o},e(function(i,o,a){r.reason||(r.reason=new ym(i,o,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new aA(function(s){e=s}),cancel:e}}}const mWe=aA;function pWe(t){return function(n){return t.apply(null,n)}}function gWe(t){return me.isObject(t)&&t.isAxiosError===!0}const j_={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(j_).forEach(([t,e])=>{j_[e]=t});const yWe=j_;function Cq(t){const e=new Pv(t),n=nq(Pv.prototype.request,e);return me.extend(n,Pv.prototype,e,{allOwnKeys:!0}),me.extend(n,e,null,{allOwnKeys:!0}),n.create=function(s){return Cq(wd(t,s))},n}const _r=Cq(oA);_r.Axios=Pv;_r.CanceledError=ym;_r.CancelToken=mWe;_r.isCancel=yq;_r.VERSION=Nq;_r.toFormData=S2;_r.AxiosError=mt;_r.Cancel=_r.CanceledError;_r.all=function(e){return Promise.all(e)};_r.spread=pWe;_r.isAxiosError=gWe;_r.mergeConfig=wd;_r.AxiosHeaders=Ho;_r.formToJSON=t=>gq(me.isHTMLForm(t)?new FormData(t):t);_r.getAdapter=kq.getAdapter;_r.HttpStatusCode=yWe;_r.default=_r;const _q=_r,A2="https://jobscope-8t58.onrender.com/api",U_="https://jobscope-8t58.onrender.com",bWe={appName:"JobScope",map:{defaultCenter:{lat:33.5138,lng:36.2765},defaultZoom:13,maxZoom:18,minZoom:5},upload:{maxFileSize:5*1024*1024,allowedImageTypes:["image/jpeg","image/png","image/webp"]},auth:{tokenExpiryDays:30,googleClientId:"79461320705-ru94lkf71prenrqpv9v9pnvnlvndcseb.apps.googleusercontent.com"}},vWe=Object.freeze(Object.defineProperty({__proto__:null,API_URL:A2,APP_CONFIG:bWe,SERVER_URL:U_},Symbol.toStringTag,{value:"Module"})),sl=_q.create({baseURL:A2,headers:{"Content-Type":"application/json"},timeout:1e5});sl.interceptors.request.use(t=>{const e=localStorage.getItem("token");return e&&(t.headers.Authorization=`Bearer ${e}`),t},t=>Promise.reject(t));const Gr={register:async t=>{var e;try{console.log("Registering user:",t);const n=await sl.post("/auth/register",t);if(console.log("Registration response:",n.data),n.data.token&&(localStorage.setItem("token",n.data.token),localStorage.setItem("user",JSON.stringify(n.data.user)),t.rememberMe)){const r=new Date;r.setDate(r.getDate()+30),localStorage.setItem("tokenExpiry",r.toISOString())}return n.data}catch(n){throw console.error("Registration error:",n),((e=n.response)==null?void 0:e.data)||{message:"   "}}},googleLogin:async t=>{var e;try{console.log("Google login attempt for account type:",t),await new Promise(s=>setTimeout(s,1500));const r={client:{exists:!0,user:{id:101,name:" ",phone:"+963934567890",email:"rami@example.com",userType:"client",googleId:"g-12345",image:"https://randomuser.me/api/portraits/men/6.jpg"}},craftsman:{exists:!0,user:{id:102,name:" ",phone:"+963934567891",email:"mahmoud@example.com",userType:"craftsman",googleId:"g-67890",profession:"",specialization:" ",location:{lng:36.28,lat:33.51},workRadius:8,rating:4.5,image:"https://randomuser.me/api/portraits/men/2.jpg"}}}[t];if(r.exists){const s="google-mock-token-"+Math.random().toString(36).substring(2);localStorage.setItem("token",s),localStorage.setItem("user",JSON.stringify(r.user));const i=new Date;return i.setDate(i.getDate()+30),localStorage.setItem("tokenExpiry",i.toISOString()),{success:!0,isNewAccount:!1,token:s,user:r.user}}else return{success:!0,isNewAccount:!0,googleProfile:{email:"new.user@gmail.com",name:" ",picture:"https://randomuser.me/api/portraits/men/22.jpg",googleId:"g-"+Math.random().toString(36).substring(2)}}}catch(n){throw console.error("Google login error:",n),((e=n.response)==null?void 0:e.data)||{message:"      Google"}}},linkGoogleAccount:async(t,e)=>{var n;try{return console.log("Linking Google account for user:",t),await new Promise(r=>setTimeout(r,1e3)),{success:!0,message:"   Google "}}catch(r){throw console.error("Link Google account error:",r),((n=r.response)==null?void 0:n.data)||{message:"     Google"}}},login:async t=>{var e;try{console.log("Logging in with:",t);const n=await sl.post("/auth/login",t);if(console.log("Login response:",n.data),n.data.token){if(localStorage.setItem("token",n.data.token),localStorage.setItem("user",JSON.stringify(n.data.user)),t.rememberMe){const r=new Date;r.setDate(r.getDate()+30),localStorage.setItem("tokenExpiry",r.toISOString())}return n.data}else throw{message:"      "}}catch(n){throw console.error("Login error:",n),((e=n.response)==null?void 0:e.data)||{message:"    "}}},adminLogin:async t=>{var e;try{console.log("Admin login with:",t);const n=await sl.post("/auth/admin/login",t);if(console.log("Admin login response:",n.data),n.data.token&&(localStorage.setItem("adminToken",n.data.token),localStorage.setItem("admin",JSON.stringify(n.data.admin)),t.rememberMe)){const r=new Date;r.setDate(r.getDate()+30),localStorage.setItem("adminTokenExpiry",r.toISOString())}return n.data}catch(n){throw console.error("Admin login error:",n),((e=n.response)==null?void 0:e.data)||{message:"     "}}},logout:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("tokenExpiry"),localStorage.removeItem("jobscope-user-storage"),sessionStorage.clear(),console.log("     authService")},adminLogout:()=>{localStorage.removeItem("adminToken"),localStorage.removeItem("admin"),localStorage.removeItem("adminTokenExpiry"),window.location.href="/admin/login"},getCurrentUser:async()=>{var t;try{console.log("Getting current user");const e=await sl.get("/auth/me");return console.log("Current user response:",e.data),e.data}catch(e){throw console.error("Get current user error:",e),((t=e.response)==null?void 0:t.data)||{message:"     "}}},isLoggedIn:()=>!!localStorage.getItem("token"),isAdminLoggedIn:()=>!!localStorage.getItem("adminToken"),getUser:()=>{const t=localStorage.getItem("user");return t?JSON.parse(t):null},getAdmin:()=>{const t=localStorage.getItem("admin");return t?JSON.parse(t):null},checkEmailExists:async t=>{try{console.log("Checking if email exists:",t);const e=await sl.get(`/auth/check-email?email=${encodeURIComponent(t)}`);return console.log("Check email response:",e.data),e.data}catch(e){return console.error("Check email error:",e),console.log("Falling back to default behavior - assuming email exists"),{exists:!0,message:"       "}}},checkPhoneExists:async t=>{var e;try{console.log("Checking if phone exists:",t);const n=await sl.get(`/auth/check-phone?phone=${encodeURIComponent(t)}`);return console.log("Check phone response:",n.data),n.data}catch(n){throw console.error("Check phone error:",n),((e=n.response)==null?void 0:e.data)||{message:"      "}}},registerFirebaseUser:async t=>{try{if(console.log("Registering Firebase user:",t),!t.uid)throw new Error("  (uid) ");console.log("API URL:",A2),console.log("Trying new endpoint first: /auth/register-firebase-user");try{const e=await sl.post("/auth/register-firebase-user",t,{timeout:15e3,headers:{"Content-Type":"application/json","X-Client-Info":"JobScope Web App"}});if(console.log("Firebase user registration response:",e.data),e.data.token){localStorage.setItem("token",e.data.token),localStorage.setItem("user",JSON.stringify(e.data.user));const n=new Date;n.setDate(n.getDate()+30),localStorage.setItem("tokenExpiry",n.toISOString())}return e.data}catch(e){console.warn("New endpoint failed, trying legacy endpoint:",e),console.log("Falling back to legacy endpoint: /auth/register-firebase");const n=await sl.post("/auth/register-firebase",t,{timeout:15e3,headers:{"Content-Type":"application/json","X-Client-Info":"JobScope Web App"}});if(console.log("Firebase registration response (legacy):",n.data),n.data.token){localStorage.setItem("token",n.data.token),localStorage.setItem("user",JSON.stringify(n.data.user));const r=new Date;r.setDate(r.getDate()+30),localStorage.setItem("tokenExpiry",r.toISOString())}return n.data}}catch(e){console.error("Firebase registration error:",e),console.error("Error details:",{message:e.message,response:e.response?{status:e.response.status,data:e.response.data}:"No response",request:e.request?"Request sent but no response received":"Request setup failed"}),console.log("Using emergency mode for user registration"),localStorage.setItem("user",JSON.stringify(t));const n="firebase-"+Math.random().toString(36).substring(2);localStorage.setItem("token",n);const r=new Date;return r.setDate(r.getDate()+30),localStorage.setItem("tokenExpiry",r.toISOString()),{success:!0,user:t,token:n,message:"    ( )"}}}},xWe=()=>{};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sq=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},wWe=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Tq={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,u=i>>2,h=(i&3)<<4|a>>4;let m=(a&15)<<2|c>>6,p=c&63;l||(p=64,o||(m=64)),r.push(n[u],n[h],n[m],n[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Sq(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):wWe(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||h==null)throw new EWe;const m=i<<2|a>>4;if(r.push(m),c!==64){const p=a<<4&240|c>>2;if(r.push(p),h!==64){const y=c<<6&192|h;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class EWe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const kWe=function(t){const e=Sq(t);return Tq.encodeByteArray(e,!0)},$q=function(t){return kWe(t).replace(/\./g,"")},Iq=function(t){try{return Tq.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NWe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CWe=()=>NWe().__FIREBASE_DEFAULTS__,_We=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},SWe=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Iq(t[1]);return e&&JSON.parse(e)},lA=()=>{try{return xWe()||CWe()||_We()||SWe()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},TWe=t=>{var e,n;return(n=(e=lA())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Aq=()=>{var t;return(t=lA())===null||t===void 0?void 0:t.config},Rq=t=>{var e;return(e=lA())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $We{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ws(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function IWe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ws())}function AWe(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function RWe(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function PWe(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function DWe(){const t=Ws();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function OWe(){try{return typeof indexedDB=="object"}catch{return!1}}function LWe(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MWe="FirebaseError";class lu extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=MWe,Object.setPrototypeOf(this,lu.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Iy.prototype.create)}}class Iy{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?zWe(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new lu(s,a,r)}}function zWe(t,e){return t.replace(FWe,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const FWe=/\{\$([^}]+)}/g;function BWe(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Of(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Iz(i)&&Iz(o)){if(!Of(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Iz(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bm(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function fp(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function mp(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function VWe(t,e){const n=new jWe(t,e);return n.subscribe.bind(n)}class jWe{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");UWe(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Kk),s.error===void 0&&(s.error=Kk),s.complete===void 0&&(s.complete=Kk);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function UWe(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Kk(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ua(t){return t&&t._delegate?t._delegate:t}class Lf{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iu="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HWe{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new $We;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(WWe(e))try{this.getOrInitializeService({instanceIdentifier:Iu})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Iu){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Iu){return this.instances.has(e)}getOptions(e=Iu){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:GWe(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Iu){return this.component?this.component.multipleInstances?e:Iu:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function GWe(t){return t===Iu?void 0:t}function WWe(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qWe{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new HWe(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gn;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(gn||(gn={}));const KWe={debug:gn.DEBUG,verbose:gn.VERBOSE,info:gn.INFO,warn:gn.WARN,error:gn.ERROR,silent:gn.SILENT},ZWe=gn.INFO,XWe={[gn.DEBUG]:"log",[gn.VERBOSE]:"log",[gn.INFO]:"info",[gn.WARN]:"warn",[gn.ERROR]:"error"},YWe=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=XWe[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Pq{constructor(e){this.name=e,this._logLevel=ZWe,this._logHandler=YWe,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in gn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?KWe[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,gn.DEBUG,...e),this._logHandler(this,gn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,gn.VERBOSE,...e),this._logHandler(this,gn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,gn.INFO,...e),this._logHandler(this,gn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,gn.WARN,...e),this._logHandler(this,gn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,gn.ERROR,...e),this._logHandler(this,gn.ERROR,...e)}}const JWe=(t,e)=>e.some(n=>t instanceof n);let Az,Rz;function QWe(){return Az||(Az=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function eqe(){return Rz||(Rz=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Dq=new WeakMap,H_=new WeakMap,Oq=new WeakMap,Zk=new WeakMap,cA=new WeakMap;function tqe(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Oc(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Dq.set(n,t)}).catch(()=>{}),cA.set(e,t),e}function nqe(t){if(H_.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});H_.set(t,e)}let G_={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return H_.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Oq.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Oc(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function rqe(t){G_=t(G_)}function sqe(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Xk(this),e,...n);return Oq.set(r,e.sort?e.sort():[e]),Oc(r)}:eqe().includes(t)?function(...e){return t.apply(Xk(this),e),Oc(Dq.get(this))}:function(...e){return Oc(t.apply(Xk(this),e))}}function iqe(t){return typeof t=="function"?sqe(t):(t instanceof IDBTransaction&&nqe(t),JWe(t,QWe())?new Proxy(t,G_):t)}function Oc(t){if(t instanceof IDBRequest)return tqe(t);if(Zk.has(t))return Zk.get(t);const e=iqe(t);return e!==t&&(Zk.set(t,e),cA.set(e,t)),e}const Xk=t=>cA.get(t);function oqe(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Oc(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Oc(o.result),l.oldVersion,l.newVersion,Oc(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const aqe=["get","getKey","getAll","getAllKeys","count"],lqe=["put","add","delete","clear"],Yk=new Map;function Pz(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Yk.get(e))return Yk.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=lqe.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||aqe.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return Yk.set(e,i),i}rqe(t=>({...t,get:(e,n,r)=>Pz(e,n)||t.get(e,n,r),has:(e,n)=>!!Pz(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cqe{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(uqe(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function uqe(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const W_="@firebase/app",Dz="0.11.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ol=new Pq("@firebase/app"),dqe="@firebase/app-compat",hqe="@firebase/analytics-compat",fqe="@firebase/analytics",mqe="@firebase/app-check-compat",pqe="@firebase/app-check",gqe="@firebase/auth",yqe="@firebase/auth-compat",bqe="@firebase/database",vqe="@firebase/data-connect",xqe="@firebase/database-compat",wqe="@firebase/functions",Eqe="@firebase/functions-compat",kqe="@firebase/installations",Nqe="@firebase/installations-compat",Cqe="@firebase/messaging",_qe="@firebase/messaging-compat",Sqe="@firebase/performance",Tqe="@firebase/performance-compat",$qe="@firebase/remote-config",Iqe="@firebase/remote-config-compat",Aqe="@firebase/storage",Rqe="@firebase/storage-compat",Pqe="@firebase/firestore",Dqe="@firebase/vertexai",Oqe="@firebase/firestore-compat",Lqe="firebase",Mqe="11.6.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q_="[DEFAULT]",zqe={[W_]:"fire-core",[dqe]:"fire-core-compat",[fqe]:"fire-analytics",[hqe]:"fire-analytics-compat",[pqe]:"fire-app-check",[mqe]:"fire-app-check-compat",[gqe]:"fire-auth",[yqe]:"fire-auth-compat",[bqe]:"fire-rtdb",[vqe]:"fire-data-connect",[xqe]:"fire-rtdb-compat",[wqe]:"fire-fn",[Eqe]:"fire-fn-compat",[kqe]:"fire-iid",[Nqe]:"fire-iid-compat",[Cqe]:"fire-fcm",[_qe]:"fire-fcm-compat",[Sqe]:"fire-perf",[Tqe]:"fire-perf-compat",[$qe]:"fire-rc",[Iqe]:"fire-rc-compat",[Aqe]:"fire-gcs",[Rqe]:"fire-gcs-compat",[Pqe]:"fire-fst",[Oqe]:"fire-fst-compat",[Dqe]:"fire-vertex","fire-js":"fire-js",[Lqe]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cx=new Map,Fqe=new Map,K_=new Map;function Oz(t,e){try{t.container.addComponent(e)}catch(n){Ol.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Pg(t){const e=t.name;if(K_.has(e))return Ol.debug(`There were multiple attempts to register component ${e}.`),!1;K_.set(e,t);for(const n of cx.values())Oz(n,t);for(const n of Fqe.values())Oz(n,t);return!0}function Lq(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ci(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bqe={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Lc=new Iy("app","Firebase",Bqe);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vqe{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Lf("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Lc.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ay=Mqe;function Mq(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:q_,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Lc.create("bad-app-name",{appName:String(s)});if(n||(n=Aq()),!n)throw Lc.create("no-options");const i=cx.get(s);if(i){if(Of(n,i.options)&&Of(r,i.config))return i;throw Lc.create("duplicate-app",{appName:s})}const o=new qWe(s);for(const l of K_.values())o.addComponent(l);const a=new Vqe(n,r,o);return cx.set(s,a),a}function jqe(t=q_){const e=cx.get(t);if(!e&&t===q_&&Aq())return Mq();if(!e)throw Lc.create("no-app",{appName:t});return e}function tf(t,e,n){var r;let s=(r=zqe[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ol.warn(a.join(" "));return}Pg(new Lf(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uqe="firebase-heartbeat-database",Hqe=1,Dg="firebase-heartbeat-store";let Jk=null;function zq(){return Jk||(Jk=oqe(Uqe,Hqe,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Dg)}catch(n){console.warn(n)}}}}).catch(t=>{throw Lc.create("idb-open",{originalErrorMessage:t.message})})),Jk}async function Gqe(t){try{const n=(await zq()).transaction(Dg),r=await n.objectStore(Dg).get(Fq(t));return await n.done,r}catch(e){if(e instanceof lu)Ol.warn(e.message);else{const n=Lc.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ol.warn(n.message)}}}async function Lz(t,e){try{const r=(await zq()).transaction(Dg,"readwrite");await r.objectStore(Dg).put(e,Fq(t)),await r.done}catch(n){if(n instanceof lu)Ol.warn(n.message);else{const r=Lc.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ol.warn(r.message)}}}function Fq(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wqe=1024,qqe=30;class Kqe{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Xqe(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Mz();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>qqe){const o=Yqe(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Ol.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Mz(),{heartbeatsToSend:r,unsentEntries:s}=Zqe(this._heartbeatsCache.heartbeats),i=$q(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Ol.warn(n),""}}}function Mz(){return new Date().toISOString().substring(0,10)}function Zqe(t,e=Wqe){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),zz(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),zz(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Xqe{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return OWe()?LWe().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Gqe(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Lz(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Lz(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function zz(t){return $q(JSON.stringify({version:2,heartbeats:t})).length}function Yqe(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jqe(t){Pg(new Lf("platform-logger",e=>new cqe(e),"PRIVATE")),Pg(new Lf("heartbeat",e=>new Kqe(e),"PRIVATE")),tf(W_,Dz,t),tf(W_,Dz,"esm2017"),tf("fire-js","")}Jqe("");function uA(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function Bq(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Qqe=Bq,Vq=new Iy("auth","Firebase",Bq());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ux=new Pq("@firebase/auth");function eKe(t,...e){ux.logLevel<=gn.WARN&&ux.warn(`Auth (${Ay}): ${t}`,...e)}function Dv(t,...e){ux.logLevel<=gn.ERROR&&ux.error(`Auth (${Ay}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bo(t,...e){throw hA(t,...e)}function oi(t,...e){return hA(t,...e)}function dA(t,e,n){const r=Object.assign(Object.assign({},Qqe()),{[e]:n});return new Iy("auth","Firebase",r).create(e,{appName:t.name})}function Ra(t){return dA(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function tKe(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&bo(t,"argument-error"),dA(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function hA(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Vq.create(t,...e)}function ze(t,e,...n){if(!t)throw hA(e,...n)}function bl(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Dv(e),new Error(e)}function Ll(t,e){t||bl(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function jq(){return Fz()==="http:"||Fz()==="https:"}function Fz(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nKe(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(jq()||RWe()||"connection"in navigator)?navigator.onLine:!0}function rKe(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ry{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ll(n>e,"Short delay should be less than long delay!"),this.isMobile=IWe()||PWe()}get(){return nKe()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fA(t,e){Ll(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uq{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;bl("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;bl("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;bl("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sKe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iKe=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],oKe=new Ry(3e4,6e4);function Zs(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function mi(t,e,n,r,s={}){return Hq(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=bm(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},i);return AWe()||(c.referrerPolicy="no-referrer"),Uq.fetch()(await Gq(t,t.config.apiHost,n,a),c)})}async function Hq(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},sKe),e);try{const s=new lKe(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw pp(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw pp(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw pp(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw pp(t,"user-disabled",o);const u=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw dA(t,u,c);bo(t,u)}}catch(s){if(s instanceof lu)throw s;bo(t,"network-request-failed",{message:String(s)})}}async function cu(t,e,n,r,s={}){const i=await mi(t,e,n,r,s);return"mfaPendingCredential"in i&&bo(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function Gq(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?fA(t.config,s):`${t.config.apiScheme}://${s}`;return iKe.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function aKe(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class lKe{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(oi(this.auth,"network-request-failed")),oKe.get())})}}function pp(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=oi(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bz(t){return t!==void 0&&t.getResponse!==void 0}function Vz(t){return t!==void 0&&t.enterprise!==void 0}class Wq{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return aKe(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cKe(t){return(await mi(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function qq(t,e){return mi(t,"GET","/v2/recaptchaConfig",Zs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uKe(t,e){return mi(t,"POST","/v1/accounts:delete",e)}async function dx(t,e){return mi(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fp(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function dKe(t,e=!1){const n=Ua(t),r=await n.getIdToken(e),s=mA(r);ze(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Fp(Qk(s.auth_time)),issuedAtTime:Fp(Qk(s.iat)),expirationTime:Fp(Qk(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Qk(t){return Number(t)*1e3}function mA(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Dv("JWT malformed, contained fewer than 3 sections"),null;try{const s=Iq(n);return s?JSON.parse(s):(Dv("Failed to decode base64 JWT payload"),null)}catch(s){return Dv("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function jz(t){const e=mA(t);return ze(e,"internal-error"),ze(typeof e.exp<"u","internal-error"),ze(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mf(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof lu&&hKe(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function hKe({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fKe{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X_{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Fp(this.lastLoginAt),this.creationTime=Fp(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hx(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Mf(t,dx(n,{idToken:r}));ze(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?Kq(i.providerUserInfo):[],a=pKe(t.providerData,o),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),u=l?c:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new X_(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function mKe(t){const e=Ua(t);await hx(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function pKe(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function Kq(t){return t.map(e=>{var{providerId:n}=e,r=uA(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gKe(t,e){const n=await Hq(t,{},async()=>{const r=bm({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await Gq(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Uq.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function yKe(t,e){return mi(t,"POST","/v2/accounts:revokeToken",Zs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ze(e.idToken,"internal-error"),ze(typeof e.idToken<"u","internal-error"),ze(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):jz(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ze(e.length!==0,"internal-error");const n=jz(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ze(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await gKe(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new nf;return r&&(ze(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(ze(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(ze(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new nf,this.toJSON())}_performRefresh(){return bl("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jl(t,e){ze(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Fo{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=uA(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new fKe(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new X_(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Mf(this,this.stsTokenManager.getToken(this.auth,e));return ze(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return dKe(this,e)}reload(){return mKe(this)}_assign(e){this!==e&&(ze(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Fo(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ze(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await hx(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ci(this.auth.app))return Promise.reject(Ra(this.auth));const e=await this.getIdToken();return await Mf(this,uKe(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,l,c,u;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(s=n.email)!==null&&s!==void 0?s:void 0,p=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,y=(o=n.photoURL)!==null&&o!==void 0?o:void 0,v=(a=n.tenantId)!==null&&a!==void 0?a:void 0,x=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,b=(c=n.createdAt)!==null&&c!==void 0?c:void 0,w=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:E,emailVerified:N,isAnonymous:C,providerData:S,stsTokenManager:T}=n;ze(E&&T,e,"internal-error");const I=nf.fromJSON(this.name,T);ze(typeof E=="string",e,"internal-error"),Jl(h,e.name),Jl(m,e.name),ze(typeof N=="boolean",e,"internal-error"),ze(typeof C=="boolean",e,"internal-error"),Jl(p,e.name),Jl(y,e.name),Jl(v,e.name),Jl(x,e.name),Jl(b,e.name),Jl(w,e.name);const P=new Fo({uid:E,auth:e,email:m,emailVerified:N,displayName:h,isAnonymous:C,photoURL:y,phoneNumber:p,tenantId:v,stsTokenManager:I,createdAt:b,lastLoginAt:w});return S&&Array.isArray(S)&&(P.providerData=S.map(R=>Object.assign({},R))),x&&(P._redirectEventId=x),P}static async _fromIdTokenResponse(e,n,r=!1){const s=new nf;s.updateFromServerResponse(n);const i=new Fo({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await hx(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];ze(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?Kq(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new nf;a.updateFromIdToken(r);const l=new Fo({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new X_(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uz=new Map;function vl(t){Ll(t instanceof Function,"Expected a class definition");let e=Uz.get(t);return e?(Ll(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Uz.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zq{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Zq.type="NONE";const Hz=Zq;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ov(t,e,n){return`firebase:${t}:${e}:${n}`}class rf{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Ov(this.userKey,s.apiKey,i),this.fullPersistenceKey=Ov("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await dx(this.auth,{idToken:e}).catch(()=>{});return n?Fo._fromGetAccountInfoResponse(this.auth,n,e):null}return Fo._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new rf(vl(Hz),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||vl(Hz);const o=Ov(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const u=await c._get(o);if(u){let h;if(typeof u=="string"){const m=await dx(e,{idToken:u}).catch(()=>{});if(!m)break;h=await Fo._fromGetAccountInfoResponse(e,m,u)}else h=Fo._fromJSON(e,u);c!==i&&(a=h),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new rf(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new rf(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gz(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Qq(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Xq(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(tK(e))return"Blackberry";if(nK(e))return"Webos";if(Yq(e))return"Safari";if((e.includes("chrome/")||Jq(e))&&!e.includes("edge/"))return"Chrome";if(eK(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Xq(t=Ws()){return/firefox\//i.test(t)}function Yq(t=Ws()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Jq(t=Ws()){return/crios\//i.test(t)}function Qq(t=Ws()){return/iemobile/i.test(t)}function eK(t=Ws()){return/android/i.test(t)}function tK(t=Ws()){return/blackberry/i.test(t)}function nK(t=Ws()){return/webos/i.test(t)}function pA(t=Ws()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function bKe(t=Ws()){var e;return pA(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function vKe(){return DWe()&&document.documentMode===10}function rK(t=Ws()){return pA(t)||eK(t)||nK(t)||tK(t)||/windows phone/i.test(t)||Qq(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sK(t,e=[]){let n;switch(t){case"Browser":n=Gz(Ws());break;case"Worker":n=`${Gz(Ws())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ay}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xKe{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wKe(t,e={}){return mi(t,"GET","/v2/passwordPolicy",Zs(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EKe=6;class kKe{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:EKe,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NKe{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Wz(this),this.idTokenSubscription=new Wz(this),this.beforeStateQueue=new xKe(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Vq,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=vl(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await rf.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await dx(this,{idToken:e}),r=await Fo._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Ci(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ze(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await hx(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=rKe()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ci(this.app))return Promise.reject(Ra(this));const n=e?Ua(e):null;return n&&ze(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ze(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ci(this.app)?Promise.reject(Ra(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ci(this.app)?Promise.reject(Ra(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(vl(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await wKe(this),n=new kKe(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Iy("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await yKe(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&vl(e)||this._popupRedirectResolver;ze(n,this,"argument-error"),this.redirectPersistenceManager=await rf.create(this,[vl(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ze(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ze(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=sK(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;if(Ci(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&eKe(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ko(t){return Ua(t)}class Wz{constructor(e){this.auth=e,this.observer=null,this.addObserver=VWe(n=>this.observer=n)}get next(){return ze(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Py={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function CKe(t){Py=t}function gA(t){return Py.loadJS(t)}function _Ke(){return Py.recaptchaV2Script}function SKe(){return Py.recaptchaEnterpriseScript}function TKe(){return Py.gapiScript}function iK(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $Ke=500,IKe=6e4,nv=1e12;class AKe{constructor(e){this.auth=e,this.counter=nv,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new DKe(e,this.auth.name,n||{})),this.counter++,r}reset(e){var n;const r=e||nv;(n=this._widgets.get(r))===null||n===void 0||n.delete(),this._widgets.delete(r)}getResponse(e){var n;const r=e||nv;return((n=this._widgets.get(r))===null||n===void 0?void 0:n.getResponse())||""}async execute(e){var n;const r=e||nv;return(n=this._widgets.get(r))===null||n===void 0||n.execute(),""}}class RKe{constructor(){this.enterprise=new PKe}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class PKe{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class DKe{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const s=typeof e=="string"?document.getElementById(e):e;ze(s,"argument-error",{appName:n}),this.container=s,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=OKe(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},IKe)},$Ke))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function OKe(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}const LKe="recaptcha-enterprise",Bp="NO_RECAPTCHA";class oK{constructor(e){this.type=LKe,this.auth=ko(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{qq(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new Wq(l);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function s(i,o,a){const l=window.grecaptcha;Vz(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(c=>{o(c)}).catch(()=>{o(Bp)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new RKe().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&Vz(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=SKe();l.length!==0&&(l+=a),gA(l).then(()=>{s(a,i,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function Qm(t,e,n,r=!1,s=!1){const i=new oK(t);let o;if(s)o=Bp;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const a=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function td(t,e,n,r,s){var i,o;if(s==="EMAIL_PASSWORD_PROVIDER")if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await Qm(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await Qm(t,e,n,n==="getOobCode");return r(t,l)}else return Promise.reject(a)});else if(s==="PHONE_PROVIDER")if(!((o=t._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("PHONE_PROVIDER")){const a=await Qm(t,e,n);return r(t,a).catch(async l=>{var c;if(((c=t._getRecaptchaConfig())===null||c===void 0?void 0:c.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(l.code==="auth/missing-recaptcha-token"||l.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const u=await Qm(t,e,n,!1,!0);return r(t,u)}return Promise.reject(l)})}else{const a=await Qm(t,e,n,!1,!0);return r(t,a)}else return Promise.reject(s+" provider is not supported.")}async function MKe(t){const e=ko(t),n=await qq(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new Wq(n);e.tenantId==null?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.isAnyProviderEnabled()&&new oK(e).verify()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zKe(t,e){const n=Lq(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Of(i,e??{}))return s;bo(s,"already-initialized")}return n.initialize({options:e})}function FKe(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(vl);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function BKe(t,e,n){const r=ko(t);ze(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),i=aK(e),{host:o,port:a}=VKe(e),l=a===null?"":`:${a}`,c={url:`${i}//${o}${l}/`},u=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){ze(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ze(Of(c,r.config.emulator)&&Of(u,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=c,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,s||jKe()}function aK(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function VKe(t){const e=aK(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:qz(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:qz(o)}}}function qz(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function jKe(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R2{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return bl("not implemented")}_getIdTokenResponse(e){return bl("not implemented")}_linkToIdToken(e,n){return bl("not implemented")}_getReauthenticationResolver(e){return bl("not implemented")}}async function UKe(t,e){return mi(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HKe(t,e){return cu(t,"POST","/v1/accounts:signInWithPassword",Zs(t,e))}async function lK(t,e){return mi(t,"POST","/v1/accounts:sendOobCode",Zs(t,e))}async function GKe(t,e){return lK(t,e)}async function WKe(t,e){return lK(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qKe(t,e){return cu(t,"POST","/v1/accounts:signInWithEmailLink",Zs(t,e))}async function KKe(t,e){return cu(t,"POST","/v1/accounts:signInWithEmailLink",Zs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Og extends R2{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Og(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Og(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return td(e,n,"signInWithPassword",HKe,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return qKe(e,{email:this._email,oobCode:this._password});default:bo(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return td(e,r,"signUpPassword",UKe,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return KKe(e,{idToken:n,email:this._email,oobCode:this._password});default:bo(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sf(t,e){return cu(t,"POST","/v1/accounts:signInWithIdp",Zs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZKe="http://localhost";class Ed extends R2{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ed(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):bo("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=uA(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new Ed(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return sf(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,sf(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,sf(e,n)}buildRequest(){const e={requestUri:ZKe,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=bm(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kz(t,e){return mi(t,"POST","/v1/accounts:sendVerificationCode",Zs(t,e))}async function XKe(t,e){return cu(t,"POST","/v1/accounts:signInWithPhoneNumber",Zs(t,e))}async function YKe(t,e){const n=await cu(t,"POST","/v1/accounts:signInWithPhoneNumber",Zs(t,e));if(n.temporaryProof)throw pp(t,"account-exists-with-different-credential",n);return n}const JKe={USER_NOT_FOUND:"user-not-found"};async function QKe(t,e){const n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return cu(t,"POST","/v1/accounts:signInWithPhoneNumber",Zs(t,n),JKe)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp extends R2{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new Vp({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new Vp({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return XKe(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return YKe(e,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return QKe(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:s}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:s}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:s,temporaryProof:i}=e;return!r&&!n&&!s&&!i?null:new Vp({verificationId:n,verificationCode:r,phoneNumber:s,temporaryProof:i})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eZe(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function tZe(t){const e=fp(mp(t)).link,n=e?fp(mp(e)).deep_link_id:null,r=fp(mp(t)).deep_link_id;return(r?fp(mp(r)).link:null)||r||n||e||t}class yA{constructor(e){var n,r,s,i,o,a;const l=fp(mp(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,u=(r=l.oobCode)!==null&&r!==void 0?r:null,h=eZe((s=l.mode)!==null&&s!==void 0?s:null);ze(c&&u&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=u,this.continueUrl=(i=l.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=l.lang)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=tZe(e);try{return new yA(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm{constructor(){this.providerId=vm.PROVIDER_ID}static credential(e,n){return Og._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=yA.parseLink(n);return ze(r,"argument-error"),Og._fromEmailAndCode(e,r.code,r.tenantId)}}vm.PROVIDER_ID="password";vm.EMAIL_PASSWORD_SIGN_IN_METHOD="password";vm.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dy extends bA{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc extends Dy{constructor(){super("facebook.com")}static credential(e){return Ed._fromParams({providerId:cc.PROVIDER_ID,signInMethod:cc.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return cc.credentialFromTaggedObject(e)}static credentialFromError(e){return cc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return cc.credential(e.oauthAccessToken)}catch{return null}}}cc.FACEBOOK_SIGN_IN_METHOD="facebook.com";cc.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl extends Dy{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ed._fromParams({providerId:dl.PROVIDER_ID,signInMethod:dl.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return dl.credentialFromTaggedObject(e)}static credentialFromError(e){return dl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return dl.credential(n,r)}catch{return null}}}dl.GOOGLE_SIGN_IN_METHOD="google.com";dl.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc extends Dy{constructor(){super("github.com")}static credential(e){return Ed._fromParams({providerId:uc.PROVIDER_ID,signInMethod:uc.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return uc.credentialFromTaggedObject(e)}static credentialFromError(e){return uc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return uc.credential(e.oauthAccessToken)}catch{return null}}}uc.GITHUB_SIGN_IN_METHOD="github.com";uc.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc extends Dy{constructor(){super("twitter.com")}static credential(e,n){return Ed._fromParams({providerId:dc.PROVIDER_ID,signInMethod:dc.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return dc.credentialFromTaggedObject(e)}static credentialFromError(e){return dc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return dc.credential(n,r)}catch{return null}}}dc.TWITTER_SIGN_IN_METHOD="twitter.com";dc.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nZe(t,e){return cu(t,"POST","/v1/accounts:signUp",Zs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kd{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Fo._fromIdTokenResponse(e,r,s),o=Zz(r);return new kd({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Zz(r);return new kd({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Zz(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx extends lu{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,fx.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new fx(e,n,r,s)}}function cK(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?fx._fromErrorAndOperation(t,i,e,r):i})}async function rZe(t,e,n=!1){const r=await Mf(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return kd._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sZe(t,e,n=!1){const{auth:r}=t;if(Ci(r.app))return Promise.reject(Ra(r));const s="reauthenticate";try{const i=await Mf(t,cK(r,s,e,t),n);ze(i.idToken,r,"internal-error");const o=mA(i.idToken);ze(o,r,"internal-error");const{sub:a}=o;return ze(t.uid===a,r,"user-mismatch"),kd._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&bo(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uK(t,e,n=!1){if(Ci(t.app))return Promise.reject(Ra(t));const r="signIn",s=await cK(t,r,e),i=await kd._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function dK(t,e){return uK(ko(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hK(t,e,n){var r;ze(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),ze(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),ze(typeof n.linkDomain>"u"||n.linkDomain.length>0,t,"invalid-hosting-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.linkDomain=n.linkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(ze(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(ze(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fK(t){const e=ko(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function iZe(t,e,n){const r=ko(t),s={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&hK(r,s,n),await td(r,s,"getOobCode",WKe,"EMAIL_PASSWORD_PROVIDER")}async function oZe(t,e,n){if(Ci(t.app))return Promise.reject(Ra(t));const r=ko(t),o=await td(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",nZe,"EMAIL_PASSWORD_PROVIDER").catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&fK(t),l}),a=await kd._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function aZe(t,e,n){return Ci(t.app)?Promise.reject(Ra(t)):dK(Ua(t),vm.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&fK(t),r})}async function Xz(t,e){const n=Ua(t),s={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&hK(n.auth,s,e);const{email:i}=await GKe(n.auth,s);i!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lZe(t,e){return mi(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cZe(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Ua(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Mf(r,lZe(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function uZe(t,e,n,r){return Ua(t).onIdTokenChanged(e,n,r)}function dZe(t,e,n){return Ua(t).beforeAuthStateChanged(e,n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yz(t,e){return mi(t,"POST","/v2/accounts/mfaEnrollment:start",Zs(t,e))}const mx="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mK{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(mx,"1"),this.storage.removeItem(mx),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hZe=1e3,fZe=10;class pK extends mK{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=rK(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);vKe()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,fZe):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},hZe)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}pK.type="LOCAL";const mZe=pK;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gK extends mK{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}gK.type="SESSION";const yK=gK;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pZe(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P2{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new P2(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async c=>c(n.origin,i)),l=await pZe(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}P2.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vA(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gZe{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const c=vA("",20);s.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(h){const m=h;if(m.data.eventId===c)switch(m.data.status){case"ack":clearTimeout(u),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(m.data.response);break;default:clearTimeout(u),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mr(){return window}function yZe(t){mr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xA(){return typeof mr().WorkerGlobalScope<"u"&&typeof mr().importScripts=="function"}async function bZe(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function vZe(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function xZe(){return xA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bK="firebaseLocalStorageDb",wZe=1,px="firebaseLocalStorage",vK="fbase_key";class Oy{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function D2(t,e){return t.transaction([px],e?"readwrite":"readonly").objectStore(px)}function EZe(){const t=indexedDB.deleteDatabase(bK);return new Oy(t).toPromise()}function Y_(){const t=indexedDB.open(bK,wZe);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(px,{keyPath:vK})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(px)?e(r):(r.close(),await EZe(),e(await Y_()))})})}async function Jz(t,e,n){const r=D2(t,!0).put({[vK]:e,value:n});return new Oy(r).toPromise()}async function kZe(t,e){const n=D2(t,!1).get(e),r=await new Oy(n).toPromise();return r===void 0?null:r.value}function Qz(t,e){const n=D2(t,!0).delete(e);return new Oy(n).toPromise()}const NZe=800,CZe=3;class xK{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Y_(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>CZe)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return xA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=P2._getInstance(xZe()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await bZe(),!this.activeServiceWorker)return;this.sender=new gZe(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||vZe()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Y_();return await Jz(e,mx,"1"),await Qz(e,mx),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Jz(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>kZe(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Qz(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=D2(s,!1).getAll();return new Oy(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),NZe)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}xK.type="LOCAL";const _Ze=xK;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eF(t,e){return mi(t,"POST","/v2/accounts/mfaSignIn:start",Zs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eN=iK("rcb"),SZe=new Ry(3e4,6e4);class TZe{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=mr().grecaptcha)===null||e===void 0)&&e.render)}load(e,n=""){return ze($Ze(n),e,"argument-error"),this.shouldResolveImmediately(n)&&Bz(mr().grecaptcha)?Promise.resolve(mr().grecaptcha):new Promise((r,s)=>{const i=mr().setTimeout(()=>{s(oi(e,"network-request-failed"))},SZe.get());mr()[eN]=()=>{mr().clearTimeout(i),delete mr()[eN];const a=mr().grecaptcha;if(!a||!Bz(a)){s(oi(e,"internal-error"));return}const l=a.render;a.render=(c,u)=>{const h=l(c,u);return this.counter++,h},this.hostLanguage=n,r(a)};const o=`${_Ke()}?${bm({onload:eN,render:"explicit",hl:n})}`;gA(o).catch(()=>{clearTimeout(i),s(oi(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!(!((n=mr().grecaptcha)===null||n===void 0)&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function $Ze(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class IZe{async load(e){return new AKe(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jp="recaptcha",AZe={theme:"light",type:"image"};class RZe{constructor(e,n,r=Object.assign({},AZe)){this.parameters=r,this.type=jp,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ko(e),this.isInvisible=this.parameters.size==="invisible",ze(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const s=typeof n=="string"?document.getElementById(n):n;ze(s,this.auth,"argument-error"),this.container=s,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new IZe:new TZe,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(s=>{const i=o=>{o&&(this.tokenChangeListeners.delete(i),s(o))};this.tokenChangeListeners.add(i),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){ze(!this.parameters.sitekey,this.auth,"argument-error"),ze(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ze(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=mr()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){ze(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){ze(jq()&&!xA(),this.auth,"internal-error"),await PZe(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await cKe(this.auth);ze(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return ze(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function PZe(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DZe{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=Vp._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function OZe(t,e,n){if(Ci(t.app))return Promise.reject(Ra(t));const r=ko(t),s=await LZe(r,e,Ua(n));return new DZe(s,i=>dK(r,i))}async function LZe(t,e,n){var r;if(!t._getRecaptchaConfig())try{await MKe(t)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let s;if(typeof e=="string"?s={phoneNumber:e}:s=e,"session"in s){const i=s.session;if("phoneNumber"in s){ze(i.type==="enroll",t,"internal-error");const o={idToken:i.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await td(t,o,"mfaSmsEnrollment",async(u,h)=>{if(h.phoneEnrollmentInfo.captchaResponse===Bp){ze((n==null?void 0:n.type)===jp,u,"argument-error");const m=await tN(u,h,n);return Yz(u,m)}return Yz(u,h)},"PHONE_PROVIDER").catch(u=>Promise.reject(u))).phoneSessionInfo.sessionInfo}else{ze(i.type==="signin",t,"internal-error");const o=((r=s.multiFactorHint)===null||r===void 0?void 0:r.uid)||s.multiFactorUid;ze(o,t,"missing-multi-factor-info");const a={mfaPendingCredential:i.credential,mfaEnrollmentId:o,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await td(t,a,"mfaSmsSignIn",async(h,m)=>{if(m.phoneSignInInfo.captchaResponse===Bp){ze((n==null?void 0:n.type)===jp,h,"argument-error");const p=await tN(h,m,n);return eF(h,p)}return eF(h,m)},"PHONE_PROVIDER").catch(h=>Promise.reject(h))).phoneResponseInfo.sessionInfo}}else{const i={phoneNumber:s.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await td(t,i,"sendVerificationCode",async(c,u)=>{if(u.captchaResponse===Bp){ze((n==null?void 0:n.type)===jp,c,"argument-error");const h=await tN(c,u,n);return Kz(c,h)}return Kz(c,u)},"PHONE_PROVIDER").catch(c=>Promise.reject(c))).sessionInfo}}finally{n==null||n._reset()}}async function tN(t,e,n){ze(n.type===jp,t,"argument-error");const r=await n.verify();ze(typeof r=="string",t,"argument-error");const s=Object.assign({},e);if("phoneEnrollmentInfo"in s){const i=s.phoneEnrollmentInfo.phoneNumber,o=s.phoneEnrollmentInfo.captchaResponse,a=s.phoneEnrollmentInfo.clientType,l=s.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:i,recaptchaToken:r,captchaResponse:o,clientType:a,recaptchaVersion:l}}),s}else if("phoneSignInInfo"in s){const i=s.phoneSignInInfo.captchaResponse,o=s.phoneSignInInfo.clientType,a=s.phoneSignInInfo.recaptchaVersion;return Object.assign(s,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:i,clientType:o,recaptchaVersion:a}}),s}else return Object.assign(s,{recaptchaToken:r}),s}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wK(t,e){return e?vl(e):(ze(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA extends R2{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return sf(e,this._buildIdpRequest())}_linkToIdToken(e,n){return sf(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return sf(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function MZe(t){return uK(t.auth,new wA(t),t.bypassAuthState)}function zZe(t){const{auth:e,user:n}=t;return ze(n,e,"internal-error"),sZe(n,new wA(t),t.bypassAuthState)}async function FZe(t){const{auth:e,user:n}=t;return ze(n,e,"internal-error"),rZe(n,new wA(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EK{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return MZe;case"linkViaPopup":case"linkViaRedirect":return FZe;case"reauthViaPopup":case"reauthViaRedirect":return zZe;default:bo(this.auth,"internal-error")}}resolve(e){Ll(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ll(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BZe=new Ry(2e3,1e4);async function VZe(t,e,n){if(Ci(t.app))return Promise.reject(oi(t,"operation-not-supported-in-this-environment"));const r=ko(t);tKe(t,e,bA);const s=wK(r,n);return new Uu(r,"signInViaPopup",e,s).executeNotNull()}class Uu extends EK{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Uu.currentPopupAction&&Uu.currentPopupAction.cancel(),Uu.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ze(e,this.auth,"internal-error"),e}async onExecution(){Ll(this.filter.length===1,"Popup operations only handle one event");const e=vA();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(oi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(oi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Uu.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(oi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,BZe.get())};e()}}Uu.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jZe="pendingRedirect",Lv=new Map;class UZe extends EK{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Lv.get(this.auth._key());if(!e){try{const r=await HZe(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Lv.set(this.auth._key(),e)}return this.bypassAuthState||Lv.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function HZe(t,e){const n=qZe(e),r=WZe(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function GZe(t,e){Lv.set(t._key(),e)}function WZe(t){return vl(t._redirectPersistence)}function qZe(t){return Ov(jZe,t.config.apiKey,t.name)}async function KZe(t,e,n=!1){if(Ci(t.app))return Promise.reject(Ra(t));const r=ko(t),s=wK(r,e),o=await new UZe(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZZe=10*60*1e3;class XZe{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!YZe(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!kK(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(oi(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=ZZe&&this.cachedEventUids.clear(),this.cachedEventUids.has(tF(e))}saveEventToCache(e){this.cachedEventUids.add(tF(e)),this.lastProcessedEventTime=Date.now()}}function tF(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function kK({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function YZe(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return kK(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JZe(t,e={}){return mi(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QZe=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,eXe=/^https?/;async function tXe(t){if(t.config.emulator)return;const{authorizedDomains:e}=await JZe(t);for(const n of e)try{if(nXe(n))return}catch{}bo(t,"unauthorized-domain")}function nXe(t){const e=Z_(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!eXe.test(n))return!1;if(QZe.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rXe=new Ry(3e4,6e4);function nF(){const t=mr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function sXe(t){return new Promise((e,n)=>{var r,s,i;function o(){nF(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{nF(),n(oi(t,"network-request-failed"))},timeout:rXe.get()})}if(!((s=(r=mr().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=mr().gapi)===null||i===void 0)&&i.load)o();else{const a=iK("iframefcb");return mr()[a]=()=>{gapi.load?o():n(oi(t,"network-request-failed"))},gA(`${TKe()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Mv=null,e})}let Mv=null;function iXe(t){return Mv=Mv||sXe(t),Mv}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oXe=new Ry(5e3,15e3),aXe="__/auth/iframe",lXe="emulator/auth/iframe",cXe={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},uXe=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function dXe(t){const e=t.config;ze(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?fA(e,lXe):`https://${t.config.authDomain}/${aXe}`,r={apiKey:e.apiKey,appName:t.name,v:Ay},s=uXe.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${bm(r).slice(1)}`}async function hXe(t){const e=await iXe(t),n=mr().gapi;return ze(n,t,"internal-error"),e.open({where:document.body,url:dXe(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:cXe,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=oi(t,"network-request-failed"),a=mr().setTimeout(()=>{i(o)},oXe.get());function l(){mr().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fXe={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},mXe=500,pXe=600,gXe="_blank",yXe="http://localhost";class rF{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function bXe(t,e,n,r=mXe,s=pXe){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},fXe),{width:r.toString(),height:s.toString(),top:i,left:o}),c=Ws().toLowerCase();n&&(a=Jq(c)?gXe:n),Xq(c)&&(e=e||yXe,l.scrollbars="yes");const u=Object.entries(l).reduce((m,[p,y])=>`${m}${p}=${y},`,"");if(bKe(c)&&a!=="_self")return vXe(e||"",a),new rF(null);const h=window.open(e||"",a,u);ze(h,t,"popup-blocked");try{h.focus()}catch{}return new rF(h)}function vXe(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xXe="__/auth/handler",wXe="emulator/auth/handler",EXe=encodeURIComponent("fac");async function sF(t,e,n,r,s,i){ze(t.config.authDomain,t,"auth-domain-config-required"),ze(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ay,eventId:s};if(e instanceof bA){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",BWe(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,h]of Object.entries(i||{}))o[u]=h}if(e instanceof Dy){const u=e.getScopes().filter(h=>h!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const l=await t._getAppCheckToken(),c=l?`#${EXe}=${encodeURIComponent(l)}`:"";return`${kXe(t)}?${bm(a).slice(1)}${c}`}function kXe({config:t}){return t.emulator?fA(t,wXe):`https://${t.authDomain}/${xXe}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nN="webStorageSupport";class NXe{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=yK,this._completeRedirectFn=KZe,this._overrideRedirectResult=GZe}async _openPopup(e,n,r,s){var i;Ll((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await sF(e,n,r,Z_(),s);return bXe(e,o,vA())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await sF(e,n,r,Z_(),s);return yZe(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Ll(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await hXe(e),r=new XZe(e);return n.register("authEvent",s=>(ze(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(nN,{type:nN},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[nN];o!==void 0&&n(!!o),bo(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=tXe(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return rK()||Yq()||pA()}}const CXe=NXe;var iF="@firebase/auth",oF="1.10.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _Xe{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ze(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SXe(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function TXe(t){Pg(new Lf("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ze(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:sK(t)},c=new NKe(r,s,i,l);return FKe(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Pg(new Lf("auth-internal",e=>{const n=ko(e.getProvider("auth").getImmediate());return(r=>new _Xe(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),tf(iF,oF,SXe(t)),tf(iF,oF,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $Xe=5*60,IXe=Rq("authIdTokenMaxAge")||$Xe;let aF=null;const AXe=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>IXe)return;const s=n==null?void 0:n.token;aF!==s&&(aF=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function RXe(t=jqe()){const e=Lq(t,"auth");if(e.isInitialized())return e.getImmediate();const n=zKe(t,{popupRedirectResolver:CXe,persistence:[_Ze,mZe,yK]}),r=Rq("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=AXe(i.toString());dZe(n,o,()=>o(n.currentUser)),uZe(n,a=>o(a))}}const s=TWe("auth");return s&&BKe(n,`http://${s}`),n}function PXe(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}CKe({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=oi("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",PXe().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});TXe("Browser");var DXe="firebase",OXe="11.6.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */tf(DXe,OXe,"app");const LXe={apiKey:"AIzaSyAr4xtIZgS6t_MHmhDwNDcgVtmZ5_ua-BI",authDomain:"jobscope-6cfe6.firebaseapp.com",projectId:"jobscope-6cfe6",storageBucket:"jobscope-6cfe6.firebasestorage.app",messagingSenderId:"329127698057",appId:"1:329127698057:web:97f5d6144219c7bedbf058",measurementId:"G-MBQ5LW9TWP"},MXe=Mq(LXe),Zi=RXe(MXe),zXe=new dl,Ec={registerWithEmailAndPassword:async(t,e,n)=>{try{const s=(await oZe(Zi,t,e)).user;return await cZe(s,{displayName:n}),await Xz(s),{success:!0,user:{uid:s.uid,email:s.email,name:s.displayName,emailVerified:s.emailVerified}}}catch(r){return console.error("Error registering with email and password:",r),{success:!1,error:{code:r.code,message:Ao(r.code)}}}},loginWithEmailAndPassword:async(t,e)=>{try{console.log("Firebase: Attempting login with email:",t),console.log("Firebase auth state before login:",Zi.currentUser?"User logged in":"No user");const r=(await aZe(Zi,t,e)).user;return console.log("Firebase login successful, user details:",{uid:r.uid,email:r.email,displayName:r.displayName,emailVerified:r.emailVerified,providerId:r.providerId,providerData:r.providerData}),{success:!0,user:{uid:r.uid,email:r.email,name:r.displayName,emailVerified:r.emailVerified}}}catch(n){return console.error("Error logging in with email and password:",n),console.error("Firebase error details:",{code:n.code,message:n.message,customMessage:Ao(n.code)}),{success:!1,error:{code:n.code,message:Ao(n.code)}}}},setupRecaptcha:async t=>{try{if(window.recaptchaVerifier)try{window.recaptchaVerifier.clear()}catch(e){console.warn("Failed to clear existing recaptcha:",e)}return window.recaptchaVerifier=new RZe(Zi,t,{size:"invisible",callback:e=>{console.log("reCAPTCHA verified successfully")},"expired-callback":()=>{console.log("reCAPTCHA expired")}}),{success:!0}}catch(e){return console.error("Error setting up recaptcha:",e),{success:!1,error:{code:e.code||"recaptcha-error",message:e.message||Ao("recaptcha-error")}}}},sendOtpToPhone:async t=>{try{if(!t)throw new Error("  ");const e=FXe(t);if(console.log("Formatted phone number:",e),!/^\+\d{8,15}$/.test(e))throw new Error("   ");const n=e.startsWith("+1");n&&console.log("US phone number detected, checking if billing is enabled");try{const r=await OZe(Zi,e,window.recaptchaVerifier);return window.confirmationResult=r,{success:!0,message:"    "}}catch(r){return console.error("Error sending OTP to phone:",r),r.code==="auth/billing-not-enabled"?n?{success:!1,error:{code:r.code,message:"        .          ."}}:{success:!1,error:{code:r.code,message:"      Firebase.     ."}}:{success:!1,error:{code:r.code,message:Ao(r.code)}}}}catch(e){return console.error("Error in sendOtpToPhone:",e),{success:!1,error:{code:e.code||"unknown",message:e.message||Ao("unknown")}}}},verifyPhoneOtp:async t=>{try{const n=(await window.confirmationResult.confirm(t)).user;return{success:!0,user:{uid:n.uid,phoneNumber:n.phoneNumber}}}catch(e){return console.error("Error verifying phone OTP:",e),{success:!1,error:{code:e.code,message:Ao(e.code)}}}},loginWithGoogle:async()=>{try{const e=(await VZe(Zi,zXe)).user;return{success:!0,user:{uid:e.uid,email:e.email,name:e.displayName,photoURL:e.photoURL}}}catch(t){return console.error("Error logging in with Google:",t),{success:!1,error:{code:t.code,message:Ao(t.code)}}}},sendPasswordResetEmail:async t=>{try{return await iZe(Zi,t),{success:!0,message:"       "}}catch(e){return console.error("Error sending password reset email:",e),{success:!1,error:{code:e.code,message:Ao(e.code)}}}},sendEmailVerificationAgain:async t=>{try{return await Xz(t),{success:!0,message:"    "}}catch(e){return console.error("Error sending verification email:",e),{success:!1,error:{code:e.code,message:Ao(e.code)}}}},logout:async()=>{try{return await Zi.signOut(),{success:!0}}catch(t){return console.error("Error logging out:",t),{success:!1,error:{code:t.code,message:Ao(t.code)}}}},getCurrentUser:()=>Zi.currentUser,getUserInfo:async t=>{try{const e=Zi.currentUser;return e?{uid:e.uid,displayName:e.displayName,email:e.email,phoneNumber:e.phoneNumber,photoURL:e.photoURL,emailVerified:e.emailVerified}:{uid:t,displayName:" ",email:"",phoneNumber:"",photoURL:"",emailVerified:!1}}catch(e){return console.error("Error getting user info:",e),null}}},FXe=t=>{if(!t)return"+963";if(console.log("Formatting phone number:",t),t=t.replace("undefined",""),/^\+\d{1,3}\d{7,14}$/.test(t))return console.log("Phone number already in international format:",t),t;let e=t.replace(/[^\d+]/g,"");return e.startsWith("+1")?(console.log("US phone number with country code:",e),e):e.startsWith("1")&&e.length===11?(console.log("US phone number without + sign:",e),"+"+e):e.length===10&&/^[2-9]\d{9}$/.test(e)?(console.log("US phone number without country code:",e),"+1"+e):e.startsWith("+")?(console.log("Formatted phone number:",e),e):(e.startsWith("0")&&(e=e.substring(1)),e.length>0?e.startsWith("9")&&e.length===9?(console.log("Syrian phone number:",e),`+963${e}`):(console.log("Adding default country code to:",e),`+963${e}`):"+963")},Ao=t=>{switch(t){case"auth/email-already-in-use":return"   ";case"auth/invalid-email":return"   ";case"auth/user-disabled":return"   ";case"auth/user-not-found":return"       ";case"auth/wrong-password":return"   ";case"auth/weak-password":return"   ";case"auth/invalid-verification-code":return"   ";case"auth/invalid-phone-number":return"   ";case"auth/too-many-requests":return"        ";case"auth/popup-closed-by-user":return"      ";case"auth/captcha-check-failed":return"   reCAPTCHA    ";case"auth/billing-not-enabled":return"    .          ";case"auth/quota-exceeded":return"          ";case"auth/missing-phone-number":return"  ";case"auth/invalid-recipient-email":return"    ";case"auth/invalid-sender":return"  ";case"auth/invalid-message-payload":return"   ";case"auth/invalid-recipient-phone-number":return"    ";case"recaptcha-error":return"    reCAPTCHA";case"unknown":return"   ";default:return"   "}},BXe=()=>{const t=Lr(),e=Qo(),n=Dt(R=>R.login),r=We(R=>R.darkMode),s=Dt(R=>R.savedCredentials),i=Dt(R=>R.rememberMe),o=Dt(R=>R.setRememberMe),a=Dt(R=>R.setSavedCredentials),c=new URLSearchParams(e.search).get("type"),[u,h]=A.useState(c||(s==null?void 0:s.accountType)||"client"),[m,p]=A.useState({email:(s==null?void 0:s.email)||"",password:(s==null?void 0:s.password)||""}),[y,v]=A.useState({}),[x,b]=A.useState(i),[w,E]=A.useState(!1),N=A.useRef(null);A.useEffect(()=>{s!=null&&s.identifier&&(s.identifier.includes("@")?setLoginIdentifierType("email"):setLoginIdentifierType("phone"))},[s]);const C=R=>{const{name:D,value:B}=R.target;p({...m,[D]:B}),y[D]&&v(D==="identifier"?{...y,identifier:"",general:""}:{...y,[D]:""})},S=()=>{let R=!0;const D={};return m.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(m.email)||(D.email="    ",R=!1):(D.email="  ",R=!1),m.password?m.password.length<6&&(D.password="      6   ",R=!1):(D.password="  ",R=!1),v(D),R},T=async R=>{if(R.preventDefault(),S()){E(!0);try{const D=await Gr.checkEmailExists(m.email);console.log("Email check result:",D);let B;try{B=await Gr.login({email:m.email,password:m.password,userType:u,rememberMe:x}),console.log("Login result:",B)}catch(z){if(console.error("Login failed with error:",z),z.message==="   "){console.log("Attempting to verify with Firebase..."),console.log("Attempting Firebase login with:",{email:m.email,passwordLength:m.password.length});const q=await Ec.loginWithEmailAndPassword(m.email,m.password);if(console.log("Firebase login result:",q),q.success){console.log("Firebase login successful:",q);const M={uid:q.user.uid,name:q.user.name||m.email.split("@")[0],email:m.email,phone:"",userType:u,emailVerified:q.user.emailVerified};console.log("Registering Firebase user with backend:",M),B=await Gr.registerFirebaseUser(M),console.log("Registration result:",B)}else throw z}else throw z}const Z=B.user||{uid:B.uid||"temp-uid",name:B.name||"",email:m.email,phone:B.phone||"",userType:u,emailVerified:!0};if(console.log("User data:",Z),x){const z={email:m.email,password:m.password,accountType:u};a(z)}else a(null);o(x),n(Z,u,x,x?{email:m.email,password:m.password,accountType:u}:null),u==="craftsman"?(da.createBookingNotification({id:1001,clientName:" ",craftsmanName:Z.name,createdAt:new Date().toISOString()},"craftsman"),da.createSystemNotification("  ","     .   .")):(da.createStatusChangeNotification({id:1003,clientName:Z.name,craftsmanName:" ",createdAt:new Date().toISOString()},"accepted","client"),da.createSystemNotification(" ","   10%     !")),t(u==="craftsman"?"/profile/my":"/home")}catch(D){console.error("Login error:",D),v({...y,general:D.message||"    "})}finally{E(!1)}}},I=async R=>{console.log("Google OAuth response:",R),E(!0);try{const D=Goe(R.credential);console.log("Decoded Google token:",D);const B={uid:D.sub,name:D.name,email:D.email,phone:"",userType:u,googleId:D.sub,image:D.picture||"/img/user-avatar.svg",emailVerified:D.email_verified};console.log("Registering Google user with API:",B);let Z;try{let z=0;const q=3;for(;z<q;)try{Z=await Gr.registerFirebaseUser(B),console.log("Registration response:",Z);break}catch(M){if(z++,console.error(`Error registering user with API (attempt ${z}/${q}):`,M),z>=q)throw M;await new Promise(U=>setTimeout(U,1e3))}}catch(z){console.error("All attempts to register user with API failed:",z),Z={user:B}}n(Z.user||B,u),u==="craftsman"?(da.createBookingNotification({id:2001,clientName:" ",craftsmanName:B.name,createdAt:new Date().toISOString()},"craftsman"),da.createSystemNotification("   JobScope",` ${B.name}    .     .`)):da.createSystemNotification("   JobScope",` ${B.name}    .       .`),t(u==="craftsman"?"/profile/my":"/home")}catch(D){console.error("Error with Google login:",D),v({...y,general:D.message||"      Google"}),P()}finally{E(!1)}},P=()=>{console.error("Google login failed")};return d.createElement(ds,{hideFooter:!0},d.createElement("div",{className:`min-h-screen py-8 md:py-12 ${r?"bg-gray-900":"bg-gradient-to-br from-blue-50 to-indigo-100"} transition-colors duration-300`},d.createElement("style",{dangerouslySetInnerHTML:{__html:`
          @keyframes pulse {
            0% {
              box-shadow: 0 0 0 0 rgba(99, 102, 241, 0.4);
            }
            70% {
              box-shadow: 0 0 0 10px rgba(99, 102, 241, 0);
            }
            100% {
              box-shadow: 0 0 0 0 rgba(99, 102, 241, 0);
            }
          }
        `}}),d.createElement("div",{className:"container mx-auto px-4 pb-4"},d.createElement(At.div,{className:`max-w-lg mx-auto rounded-lg shadow-xl overflow-hidden border-2 ${r?"bg-gray-800 border-gray-700":"bg-white border-indigo-200"} transition-colors duration-300`,initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{duration:.5,ease:"easeOut"}},d.createElement("div",{className:"p-4 sm:p-6"},d.createElement("h2",{className:`text-2xl font-bold text-center mb-4 ${r?"text-indigo-300":"text-indigo-800"} relative transition-colors duration-300`},d.createElement("span",{className:"relative z-10"}," "),d.createElement("span",{className:`absolute bottom-0 left-0 right-0 h-3 ${r?"bg-indigo-500":"bg-indigo-300"} opacity-40 transform -rotate-1 z-0`})),d.createElement("div",{className:"mb-6"},d.createElement("label",{className:"block text-indigo-700 font-medium mb-2"}," "),d.createElement("div",{className:"grid grid-cols-2 gap-4"},d.createElement("button",{type:"button",className:`p-2 rounded-md border transition-all duration-300 shadow-sm relative overflow-hidden group ${u==="craftsman"?"border-indigo-500 bg-gradient-to-r from-blue-50 to-indigo-100 text-indigo-700 shadow-md":"border-indigo-200 text-indigo-600 hover:bg-indigo-50"}`,onClick:()=>h("craftsman")},d.createElement("span",{className:"relative z-10"},""),d.createElement("span",{className:`absolute inset-0 bg-indigo-50 opacity-0 transform -skew-x-12 -translate-x-full transition-all duration-500 ${u!=="craftsman"?"group-hover:translate-x-full group-hover:opacity-50":""}`})),d.createElement("button",{type:"button",className:`p-2 rounded-md border transition-all duration-300 shadow-sm relative overflow-hidden group ${u==="client"?"border-indigo-500 bg-gradient-to-r from-blue-50 to-indigo-100 text-indigo-700 shadow-md":"border-indigo-200 text-indigo-600 hover:bg-indigo-50"}`,onClick:()=>h("client")},d.createElement("span",{className:"relative z-10"}," "),d.createElement("span",{className:`absolute inset-0 bg-indigo-50 opacity-0 transform -skew-x-12 -translate-x-full transition-all duration-500 ${u!=="client"?"group-hover:translate-x-full group-hover:opacity-50":""}`})))),y.general&&d.createElement("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded"},y.general),d.createElement("div",{id:"recaptcha-container",ref:N}),d.createElement("form",{onSubmit:T},d.createElement(yr,{label:" ",type:"email",name:"email",value:m.email,onChange:C,placeholder:"  ",error:y.email,required:!0,className:"text-base py-2 border-indigo-200 focus:border-indigo-500 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 mb-3",dir:"ltr"}),d.createElement(yr,{label:" ",type:"password",name:"password",value:m.password,onChange:C,placeholder:"  ",error:y.password,required:!0,className:"text-base py-2 border-indigo-200 focus:border-indigo-500 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"}),d.createElement("div",{className:"mt-4 flex items-center"},d.createElement("input",{type:"checkbox",id:"rememberMe",checked:x,onChange:R=>b(R.target.checked),className:"ml-2 h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),d.createElement("label",{htmlFor:"rememberMe",className:`${r?"text-gray-300":"text-indigo-700"} text-sm font-medium`},"")),d.createElement(wc,{type:"submit",variant:"primary",fullWidth:!0,isLoading:w,loadingText:"  ...",className:`mt-4 ${r?"bg-gradient-to-r from-[#3730A3] to-[#4238C8] hover:from-[#322e92] hover:to-[#3b32b4]":"bg-gradient-to-r from-[#4238C8] to-[#3730A3] hover:from-[#3b32b4] hover:to-[#322e92]"} text-white transition-all duration-200 shadow-md hover:shadow-lg text-base py-2 relative overflow-hidden group`,style:{animation:w?"none":"pulse 2s infinite"}},d.createElement("span",{className:"relative z-10"}," "),d.createElement("span",{className:"absolute inset-0 bg-white opacity-20 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-700"}))),d.createElement("div",{className:"mt-8 mb-6 relative flex items-center"},d.createElement("div",{className:"flex-grow border-t border-gray-300"}),d.createElement("span",{className:`flex items-center justify-center w-10 h-10 rounded-full ${r?"bg-gray-700 text-indigo-300":"bg-indigo-100 text-indigo-600"} mx-4 text-sm font-medium`},""),d.createElement("div",{className:"flex-grow border-t border-gray-300"})),d.createElement("div",{className:"mb-6"},d.createElement("div",{className:"flex justify-center w-full"},d.createElement("div",{className:`w-full max-w-xs ${r?"opacity-90 hover:opacity-100":""} transition-all duration-300 hover:shadow-md rounded-full`},d.createElement(Oee,{onSuccess:I,onError:P,text:"signin_with",shape:"pill",locale:"ar",theme:r?"filled_black":"outline",logo_alignment:"center",width:"300",useOneTap:!0,auto_select:!1}))),d.createElement("p",{className:`text-xs text-center mt-2 ${r?"text-gray-400":"text-gray-500"}`},"   Google  ")),d.createElement("div",{className:"mt-8 mb-6"},d.createElement("div",{className:`p-4 rounded-lg ${r?"bg-gray-700/50":"bg-indigo-50"} border ${r?"border-gray-600":"border-indigo-200"}`},d.createElement("h3",{className:`text-lg font-bold mb-3 text-center ${r?"text-indigo-300":"text-indigo-700"}`},"  "),d.createElement("p",{className:`text-sm mb-4 text-center ${r?"text-gray-300":"text-gray-600"}`},"     :"),d.createElement("div",{className:"grid grid-cols-2 gap-3"},d.createElement(at,{to:"/register/client",className:"w-full"},d.createElement(Oe,{variant:"primary",className:`${r?"bg-gradient-to-r from-indigo-600 to-blue-700 hover:from-indigo-700 hover:to-blue-800":"bg-gradient-to-r from-indigo-500 to-blue-600 hover:from-indigo-600 hover:to-blue-700"} text-white transition-all duration-200 shadow-md hover:shadow-lg relative overflow-hidden group py-2 px-4 w-full`},d.createElement("span",{className:"relative z-10 font-medium"}," "),d.createElement("span",{className:"absolute inset-0 bg-white opacity-20 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-700"}))),d.createElement(at,{to:"/register/craftsman",className:"w-full"},d.createElement(Oe,{variant:"primary",className:`${r?"bg-gradient-to-r from-purple-600 to-indigo-700 hover:from-purple-700 hover:to-indigo-800":"bg-gradient-to-r from-purple-500 to-indigo-600 hover:from-purple-600 hover:to-indigo-700"} text-white transition-all duration-200 shadow-md hover:shadow-lg relative overflow-hidden group py-2 px-4 w-full`},d.createElement("span",{className:"relative z-10 font-medium"},""),d.createElement("span",{className:"absolute inset-0 bg-white opacity-20 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-700"})))))),d.createElement("div",{className:"mt-4 text-center"},d.createElement(at,{to:"/",className:`inline-flex items-center gap-1 text-indigo-500 hover:text-indigo-700 transition-colors duration-200 ${r?"hover:bg-gray-700/50":"hover:bg-indigo-50"} px-3 py-1 rounded-md`},d.createElement("span",null,"   "),d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 rtl:rotate-180",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},d.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})))),d.createElement("div",{className:"h-2"}))))))},rN=[{id:1,name:" ",professions:[12]},{id:2,name:"  ",professions:[1,2,6,9,13,14,28,30,33]},{id:3,name:" ",professions:[3,4,7,8,21,22,31,34,38]},{id:4,name:" ",professions:[5,10,11,25]},{id:5,name:" ",professions:[15,26]},{id:6,name:" ",professions:[16,17,18,19,20]},{id:7,name:"  ",professions:[40,41,42,43]},{id:8,name:"  ",professions:[50,51,52]},{id:9,name:"  ",professions:[60,61,62]}],sN=[{id:1,name:"",specializations:[" "," ","  "," "," "," ","  "," "]},{id:2,name:"",specializations:[" "," "," ","  "," ","  "," ","  "]},{id:3,name:"",specializations:[" "," "," ",""," "," "," ","  "]},{id:4,name:"",specializations:[" "," "," "," "," "," "," ","  "]},{id:5,name:" ",specializations:[" "," "," ","  "," "," "," ","  "]},{id:6,name:"",specializations:[" "," "," "," "," "," "," ","  "]},{id:7,name:"",specializations:[" "," "," ",""," "," ","","  "]},{id:8,name:"",specializations:[" ",""," ","","",""," "," "]},{id:9,name:"",specializations:["","","",""," ","  "," "," "]},{id:10,name:"",specializations:[" "," "," "," "," "," ",""," "]},{id:11,name:"",specializations:[" ",""," ","",""," "," "," "]},{id:12,name:"",specializations:[" ","  "," ","  "," "," "," "," "]},{id:13,name:"  ",specializations:["","","","",""," "," "," "]},{id:14,name:"  ",specializations:[" "," "," ","  "," "," "]},{id:15,name:"",specializations:[" "," "," ","  "," "," ","",""]},{id:16,name:"",specializations:[" "," "," "," "," ",""," "," "]},{id:17,name:"",specializations:["","",""," "," ",""," "," "]},{id:20,name:"",specializations:["  "," ","  "," ",""," ",""," "]},{id:21,name:"   ",specializations:["  "," "," "," "," "," "," ","  "]},{id:22,name:" ",specializations:[" ","  ","  "," "," "," ","   ","  "]},{id:25,name:" ",specializations:[" "," ","  ","  "," ","  "," ","   "]},{id:26,name:" ",specializations:["  "," "," ","   ","  "," "," "," "]},{id:28,name:"  ",specializations:["  ","  ","  "," "," "," "," ","  "]},{id:30,name:"  ",specializations:[" ","  ","  ","  ","  "," ","  ","   "]},{id:31,name:" ",specializations:["  ","  "," ()","  ","  "," ( )"," ","  ()"]},{id:33,name:"  ",specializations:[" ","  "," "," "," ","  "," ","  "]},{id:34,name:"  ",specializations:["  "," "," ","  "," "," ","  ","  "]},{id:38,name:"    ",specializations:["  ","  "," ","  "," "," "," "," "]},{id:40,name:"",specializations:[" "," "," "," "," "," ","  "," "]},{id:41,name:"",specializations:[" "," "," "," ","  "," ","   "," "]},{id:42,name:" ",specializations:["  ","  ","   "," ","  ","  "," ","  "]},{id:43,name:" ",specializations:[" "," "," "," "," ","  "," "," "]},{id:50,name:"",specializations:[" "," ","",""," ",""," "," "]},{id:51,name:"",specializations:[" "," "," "," "," "," ","  "," "]},{id:52,name:" ",specializations:[" "," "," ","  ","  "," ","  "," "]},{id:60,name:" ",specializations:["  ","  ","  ","  ","  ","  ","  ","  "]},{id:61,name:" ",specializations:["  ","  ","  ","  ","  ","  ","  ","  "]},{id:62,name:" ",specializations:["  ","  ","  ","   "," ","  ","  ","  "]}],NK=({professions:t=[],specializations:e=[],onChange:n,errors:r={}})=>{var Z;const s=We(z=>z.darkMode),[i,o]=A.useState(!1),[a,l]=A.useState(!1),[c,u]=A.useState([]),[h,m]=A.useState(""),[p,y]=A.useState(""),[v,x]=A.useState(!1),[b,w]=A.useState(!1),[E,N]=A.useState(0),C=A.useRef(null),S=A.useRef(null);A.useEffect(()=>{const z=[];t.forEach(q=>{const M=sN.find(U=>U.name===q);M&&z.push(...M.specializations)}),u([...new Set(z)])},[t]),A.useEffect(()=>{const z=q=>{C.current&&!C.current.contains(q.target)&&o(!1),S.current&&!S.current.contains(q.target)&&l(!1)};return document.addEventListener("mousedown",z),()=>{document.removeEventListener("mousedown",z)}},[]);const T=z=>{if(!t.includes(z)){const q=[...t,z];n("professions",q)}o(!1)},I=z=>{if(!e.includes(z)){const q=[...e,z];n("specializations",q)}l(!1)},P=z=>{const q=t.filter(U=>U!==z);n("professions",q);const M=sN.find(U=>U.name===z);if(M){const U=M.specializations,V=e.filter(ne=>!U.includes(ne));n("specializations",V)}},R=z=>{const q=e.filter(M=>M!==z);n("specializations",q)},D=()=>{if(h.trim()!==""&&!t.includes(h.trim())){const z=[...t,h.trim()];n("professions",z),m(""),x(!1)}},B=()=>{if(p.trim()!==""&&!e.includes(p.trim())){const z=[...e,p.trim()];n("specializations",z),y(""),w(!1)}};return d.createElement("div",{className:"space-y-4"},d.createElement("div",null,d.createElement("label",{className:`block font-medium mb-2 ${s?"text-gray-200":"text-gray-700"}`}," ",d.createElement("span",{className:"text-red-500"},"*")),d.createElement("div",{className:"flex flex-wrap gap-2 mb-2"},t.map((z,q)=>d.createElement("div",{key:q,className:`flex items-center gap-1 px-3 py-1 rounded-full text-sm ${s?"bg-indigo-900 text-indigo-200":"bg-indigo-100 text-indigo-800"}`},d.createElement("span",null,z),d.createElement("button",{type:"button",onClick:()=>P(z),className:`rounded-full p-0.5 ${s?"hover:bg-indigo-800":"hover:bg-indigo-200"}`},d.createElement(fo,{size:14}))))),d.createElement("div",{className:"relative",ref:C},d.createElement("button",{type:"button",onClick:()=>o(!i),className:`flex items-center justify-between w-full px-4 py-2 rounded-md border ${s?"bg-gray-800 border-gray-700 text-gray-200":"bg-white border-gray-300 text-gray-700"} ${r.professions?"border-red-500":""}`},d.createElement("span",null," "),d.createElement(fg,{size:18})),i&&d.createElement("div",{className:`absolute z-10 mt-1 w-full rounded-md shadow-lg ${s?"bg-gray-800 border border-gray-700":"bg-white border border-gray-200"}`},d.createElement("div",{className:"border-b border-gray-300 dark:border-gray-700 py-2 px-2"},d.createElement("div",{className:"mb-2 text-sm font-medium text-gray-500 dark:text-gray-400"},"  :"),d.createElement("div",{className:"flex flex-wrap gap-2"},d.createElement("button",{type:"button",onClick:()=>N(0),className:`px-3 py-1 rounded-full text-sm transition-colors duration-200 ${E===0?s?"bg-indigo-700 text-white":"bg-indigo-500 text-white":s?"bg-gray-700 text-gray-200 hover:bg-gray-600":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`},""),rN.map(z=>d.createElement("button",{key:z.id,type:"button",onClick:()=>N(z.id),className:`px-3 py-1 rounded-full text-sm transition-colors duration-200 ${E===z.id?s?"bg-indigo-700 text-white":"bg-indigo-500 text-white":s?"bg-gray-700 text-gray-200 hover:bg-gray-600":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`},z.name)))),d.createElement("div",{className:"py-1 max-h-60 overflow-y-auto"},d.createElement("div",{className:"px-4 py-1 text-xs font-medium text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-800"},E===0?" ":` ${(Z=rN.find(z=>z.id===E))==null?void 0:Z.name}`),sN.filter(z=>E===0||rN.find(q=>q.id===E&&q.professions.includes(z.id))).map(z=>d.createElement("button",{key:z.id,type:"button",onClick:()=>T(z.name),className:`block w-full text-right px-4 py-2 text-sm transition-colors duration-200 ${s?"text-gray-200 hover:bg-gray-700":"text-gray-700 hover:bg-gray-100"} ${t.includes(z.name)?s?"bg-indigo-900":"bg-indigo-100":""}`},z.name)),d.createElement("div",{className:"border-t px-4 py-2"},v?d.createElement("div",{className:"flex items-center gap-2"},d.createElement("input",{type:"text",value:h,onChange:z=>m(z.target.value),placeholder:"  ",className:`flex-1 px-3 py-1 rounded-md border ${s?"bg-gray-700 border-gray-600 text-gray-200":"bg-white border-gray-300 text-gray-700"}`,autoFocus:!0}),d.createElement("button",{type:"button",onClick:D,className:`px-3 py-1 rounded-md ${s?"bg-indigo-700 text-white hover:bg-indigo-600":"bg-indigo-500 text-white hover:bg-indigo-600"}`},"")):d.createElement("button",{type:"button",onClick:()=>x(!0),className:`flex items-center gap-1 text-sm ${s?"text-indigo-400 hover:text-indigo-300":"text-indigo-600 hover:text-indigo-700"}`},d.createElement(C4,{size:16}),d.createElement("span",null,"  ")))))),r.professions&&d.createElement("p",{className:"text-red-500 text-sm mt-1"},r.professions)),t.length>0&&d.createElement("div",null,d.createElement("label",{className:`block font-medium mb-2 ${s?"text-gray-200":"text-gray-700"}`}," ",d.createElement("span",{className:"text-red-500"},"*")),d.createElement("div",{className:"flex flex-wrap gap-2 mb-2"},e.map((z,q)=>d.createElement("div",{key:q,className:`flex items-center gap-1 px-3 py-1 rounded-full text-sm ${s?"bg-indigo-900 text-indigo-200":"bg-indigo-100 text-indigo-800"}`},d.createElement("span",null,z),d.createElement("button",{type:"button",onClick:()=>R(z),className:`rounded-full p-0.5 ${s?"hover:bg-indigo-800":"hover:bg-indigo-200"}`},d.createElement(fo,{size:14}))))),d.createElement("div",{className:"relative",ref:S},d.createElement("button",{type:"button",onClick:()=>l(!a),className:`flex items-center justify-between w-full px-4 py-2 rounded-md border ${s?"bg-gray-800 border-gray-700 text-gray-200":"bg-white border-gray-300 text-gray-700"} ${r.specializations?"border-red-500":""}`},d.createElement("span",null," "),d.createElement(fg,{size:18})),a&&d.createElement("div",{className:`absolute z-10 mt-1 w-full rounded-md shadow-lg ${s?"bg-gray-800 border border-gray-700":"bg-white border border-gray-200"}`},d.createElement("div",{className:"py-1 max-h-60 overflow-y-auto"},c.map((z,q)=>d.createElement("button",{key:q,type:"button",onClick:()=>I(z),className:`block w-full text-right px-4 py-2 text-sm ${s?"text-gray-200 hover:bg-gray-700":"text-gray-700 hover:bg-gray-100"} ${e.includes(z)?s?"bg-indigo-900":"bg-indigo-100":""}`},z)),d.createElement("div",{className:"border-t px-4 py-2"},b?d.createElement("div",{className:"flex items-center gap-2"},d.createElement("input",{type:"text",value:p,onChange:z=>y(z.target.value),placeholder:"  ",className:`flex-1 px-3 py-1 rounded-md border ${s?"bg-gray-700 border-gray-600 text-gray-200":"bg-white border-gray-300 text-gray-700"}`,autoFocus:!0}),d.createElement("button",{type:"button",onClick:B,className:`px-3 py-1 rounded-md ${s?"bg-indigo-700 text-white hover:bg-indigo-600":"bg-indigo-500 text-white hover:bg-indigo-600"}`},"")):d.createElement("button",{type:"button",onClick:()=>w(!0),className:`flex items-center gap-1 text-sm ${s?"text-indigo-400 hover:text-indigo-300":"text-indigo-600 hover:text-indigo-700"}`},d.createElement(C4,{size:16}),d.createElement("span",null,"  ")))))),r.specializations&&d.createElement("p",{className:"text-red-500 text-sm mt-1"},r.specializations)))};function VXe(t,e){const n=A.useRef(e);A.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}function jXe(t,e,n){e.center!==n.center&&t.setLatLng(e.center),e.radius!=null&&e.radius!==n.radius&&t.setRadius(e.radius)}const UXe=1;function HXe(t){return Object.freeze({__version:UXe,map:t})}function CK(t,e){return Object.freeze({...t,...e})}const EA=A.createContext(null);function kA(){const t=A.use(EA);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function _K(t){function e(n,r){const{instance:s,context:i}=t(n).current;A.useImperativeHandle(r,()=>s);const{children:o}=n;return o==null?null:d.createElement(EA,{value:i},o)}return A.forwardRef(e)}function GXe(t){function e(n,r){const{instance:s}=t(n).current;return A.useImperativeHandle(r,()=>s),null}return A.forwardRef(e)}function SK(t,e){const n=A.useRef(void 0);A.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function NA(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}var J_={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,r){r(e)})(Ml,function(n){var r="1.9.4";function s(f){var g,k,_,$;for(k=1,_=arguments.length;k<_;k++){$=arguments[k];for(g in $)f[g]=$[g]}return f}var i=Object.create||function(){function f(){}return function(g){return f.prototype=g,new f}}();function o(f,g){var k=Array.prototype.slice;if(f.bind)return f.bind.apply(f,k.call(arguments,1));var _=k.call(arguments,2);return function(){return f.apply(g,_.length?_.concat(k.call(arguments)):arguments)}}var a=0;function l(f){return"_leaflet_id"in f||(f._leaflet_id=++a),f._leaflet_id}function c(f,g,k){var _,$,O,Y;return Y=function(){_=!1,$&&(O.apply(k,$),$=!1)},O=function(){_?$=arguments:(f.apply(k,arguments),setTimeout(Y,g),_=!0)},O}function u(f,g,k){var _=g[1],$=g[0],O=_-$;return f===_&&k?f:((f-$)%O+O)%O+$}function h(){return!1}function m(f,g){if(g===!1)return f;var k=Math.pow(10,g===void 0?6:g);return Math.round(f*k)/k}function p(f){return f.trim?f.trim():f.replace(/^\s+|\s+$/g,"")}function y(f){return p(f).split(/\s+/)}function v(f,g){Object.prototype.hasOwnProperty.call(f,"options")||(f.options=f.options?i(f.options):{});for(var k in g)f.options[k]=g[k];return f.options}function x(f,g,k){var _=[];for(var $ in f)_.push(encodeURIComponent(k?$.toUpperCase():$)+"="+encodeURIComponent(f[$]));return(!g||g.indexOf("?")===-1?"?":"&")+_.join("&")}var b=/\{ *([\w_ -]+) *\}/g;function w(f,g){return f.replace(b,function(k,_){var $=g[_];if($===void 0)throw new Error("No value provided for variable "+k);return typeof $=="function"&&($=$(g)),$})}var E=Array.isArray||function(f){return Object.prototype.toString.call(f)==="[object Array]"};function N(f,g){for(var k=0;k<f.length;k++)if(f[k]===g)return k;return-1}var C="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function S(f){return window["webkit"+f]||window["moz"+f]||window["ms"+f]}var T=0;function I(f){var g=+new Date,k=Math.max(0,16-(g-T));return T=g+k,window.setTimeout(f,k)}var P=window.requestAnimationFrame||S("RequestAnimationFrame")||I,R=window.cancelAnimationFrame||S("CancelAnimationFrame")||S("CancelRequestAnimationFrame")||function(f){window.clearTimeout(f)};function D(f,g,k){if(k&&P===I)f.call(g);else return P.call(window,o(f,g))}function B(f){f&&R.call(window,f)}var Z={__proto__:null,extend:s,create:i,bind:o,get lastId(){return a},stamp:l,throttle:c,wrapNum:u,falseFn:h,formatNum:m,trim:p,splitWords:y,setOptions:v,getParamString:x,template:w,isArray:E,indexOf:N,emptyImageUrl:C,requestFn:P,cancelFn:R,requestAnimFrame:D,cancelAnimFrame:B};function z(){}z.extend=function(f){var g=function(){v(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},k=g.__super__=this.prototype,_=i(k);_.constructor=g,g.prototype=_;for(var $ in this)Object.prototype.hasOwnProperty.call(this,$)&&$!=="prototype"&&$!=="__super__"&&(g[$]=this[$]);return f.statics&&s(g,f.statics),f.includes&&(q(f.includes),s.apply(null,[_].concat(f.includes))),s(_,f),delete _.statics,delete _.includes,_.options&&(_.options=k.options?i(k.options):{},s(_.options,f.options)),_._initHooks=[],_.callInitHooks=function(){if(!this._initHooksCalled){k.callInitHooks&&k.callInitHooks.call(this),this._initHooksCalled=!0;for(var O=0,Y=_._initHooks.length;O<Y;O++)_._initHooks[O].call(this)}},g},z.include=function(f){var g=this.prototype.options;return s(this.prototype,f),f.options&&(this.prototype.options=g,this.mergeOptions(f.options)),this},z.mergeOptions=function(f){return s(this.prototype.options,f),this},z.addInitHook=function(f){var g=Array.prototype.slice.call(arguments,1),k=typeof f=="function"?f:function(){this[f].apply(this,g)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(k),this};function q(f){if(!(typeof L>"u"||!L||!L.Mixin)){f=E(f)?f:[f];for(var g=0;g<f.length;g++)f[g]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var M={on:function(f,g,k){if(typeof f=="object")for(var _ in f)this._on(_,f[_],g);else{f=y(f);for(var $=0,O=f.length;$<O;$++)this._on(f[$],g,k)}return this},off:function(f,g,k){if(!arguments.length)delete this._events;else if(typeof f=="object")for(var _ in f)this._off(_,f[_],g);else{f=y(f);for(var $=arguments.length===1,O=0,Y=f.length;O<Y;O++)$?this._off(f[O]):this._off(f[O],g,k)}return this},_on:function(f,g,k,_){if(typeof g!="function"){console.warn("wrong listener type: "+typeof g);return}if(this._listens(f,g,k)===!1){k===this&&(k=void 0);var $={fn:g,ctx:k};_&&($.once=!0),this._events=this._events||{},this._events[f]=this._events[f]||[],this._events[f].push($)}},_off:function(f,g,k){var _,$,O;if(this._events&&(_=this._events[f],!!_)){if(arguments.length===1){if(this._firingCount)for($=0,O=_.length;$<O;$++)_[$].fn=h;delete this._events[f];return}if(typeof g!="function"){console.warn("wrong listener type: "+typeof g);return}var Y=this._listens(f,g,k);if(Y!==!1){var ce=_[Y];this._firingCount&&(ce.fn=h,this._events[f]=_=_.slice()),_.splice(Y,1)}}},fire:function(f,g,k){if(!this.listens(f,k))return this;var _=s({},g,{type:f,target:this,sourceTarget:g&&g.sourceTarget||this});if(this._events){var $=this._events[f];if($){this._firingCount=this._firingCount+1||1;for(var O=0,Y=$.length;O<Y;O++){var ce=$[O],he=ce.fn;ce.once&&this.off(f,he,ce.ctx),he.call(ce.ctx||this,_)}this._firingCount--}}return k&&this._propagateEvent(_),this},listens:function(f,g,k,_){typeof f!="string"&&console.warn('"string" type argument expected');var $=g;typeof g!="function"&&(_=!!g,$=void 0,k=void 0);var O=this._events&&this._events[f];if(O&&O.length&&this._listens(f,$,k)!==!1)return!0;if(_){for(var Y in this._eventParents)if(this._eventParents[Y].listens(f,g,k,_))return!0}return!1},_listens:function(f,g,k){if(!this._events)return!1;var _=this._events[f]||[];if(!g)return!!_.length;k===this&&(k=void 0);for(var $=0,O=_.length;$<O;$++)if(_[$].fn===g&&_[$].ctx===k)return $;return!1},once:function(f,g,k){if(typeof f=="object")for(var _ in f)this._on(_,f[_],g,!0);else{f=y(f);for(var $=0,O=f.length;$<O;$++)this._on(f[$],g,k,!0)}return this},addEventParent:function(f){return this._eventParents=this._eventParents||{},this._eventParents[l(f)]=f,this},removeEventParent:function(f){return this._eventParents&&delete this._eventParents[l(f)],this},_propagateEvent:function(f){for(var g in this._eventParents)this._eventParents[g].fire(f.type,s({layer:f.target,propagatedFrom:f.target},f),!0)}};M.addEventListener=M.on,M.removeEventListener=M.clearAllEventListeners=M.off,M.addOneTimeEventListener=M.once,M.fireEvent=M.fire,M.hasEventListeners=M.listens;var U=z.extend(M);function V(f,g,k){this.x=k?Math.round(f):f,this.y=k?Math.round(g):g}var ne=Math.trunc||function(f){return f>0?Math.floor(f):Math.ceil(f)};V.prototype={clone:function(){return new V(this.x,this.y)},add:function(f){return this.clone()._add(J(f))},_add:function(f){return this.x+=f.x,this.y+=f.y,this},subtract:function(f){return this.clone()._subtract(J(f))},_subtract:function(f){return this.x-=f.x,this.y-=f.y,this},divideBy:function(f){return this.clone()._divideBy(f)},_divideBy:function(f){return this.x/=f,this.y/=f,this},multiplyBy:function(f){return this.clone()._multiplyBy(f)},_multiplyBy:function(f){return this.x*=f,this.y*=f,this},scaleBy:function(f){return new V(this.x*f.x,this.y*f.y)},unscaleBy:function(f){return new V(this.x/f.x,this.y/f.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ne(this.x),this.y=ne(this.y),this},distanceTo:function(f){f=J(f);var g=f.x-this.x,k=f.y-this.y;return Math.sqrt(g*g+k*k)},equals:function(f){return f=J(f),f.x===this.x&&f.y===this.y},contains:function(f){return f=J(f),Math.abs(f.x)<=Math.abs(this.x)&&Math.abs(f.y)<=Math.abs(this.y)},toString:function(){return"Point("+m(this.x)+", "+m(this.y)+")"}};function J(f,g,k){return f instanceof V?f:E(f)?new V(f[0],f[1]):f==null?f:typeof f=="object"&&"x"in f&&"y"in f?new V(f.x,f.y):new V(f,g,k)}function G(f,g){if(f)for(var k=g?[f,g]:f,_=0,$=k.length;_<$;_++)this.extend(k[_])}G.prototype={extend:function(f){var g,k;if(!f)return this;if(f instanceof V||typeof f[0]=="number"||"x"in f)g=k=J(f);else if(f=X(f),g=f.min,k=f.max,!g||!k)return this;return!this.min&&!this.max?(this.min=g.clone(),this.max=k.clone()):(this.min.x=Math.min(g.x,this.min.x),this.max.x=Math.max(k.x,this.max.x),this.min.y=Math.min(g.y,this.min.y),this.max.y=Math.max(k.y,this.max.y)),this},getCenter:function(f){return J((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,f)},getBottomLeft:function(){return J(this.min.x,this.max.y)},getTopRight:function(){return J(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(f){var g,k;return typeof f[0]=="number"||f instanceof V?f=J(f):f=X(f),f instanceof G?(g=f.min,k=f.max):g=k=f,g.x>=this.min.x&&k.x<=this.max.x&&g.y>=this.min.y&&k.y<=this.max.y},intersects:function(f){f=X(f);var g=this.min,k=this.max,_=f.min,$=f.max,O=$.x>=g.x&&_.x<=k.x,Y=$.y>=g.y&&_.y<=k.y;return O&&Y},overlaps:function(f){f=X(f);var g=this.min,k=this.max,_=f.min,$=f.max,O=$.x>g.x&&_.x<k.x,Y=$.y>g.y&&_.y<k.y;return O&&Y},isValid:function(){return!!(this.min&&this.max)},pad:function(f){var g=this.min,k=this.max,_=Math.abs(g.x-k.x)*f,$=Math.abs(g.y-k.y)*f;return X(J(g.x-_,g.y-$),J(k.x+_,k.y+$))},equals:function(f){return f?(f=X(f),this.min.equals(f.getTopLeft())&&this.max.equals(f.getBottomRight())):!1}};function X(f,g){return!f||f instanceof G?f:new G(f,g)}function H(f,g){if(f)for(var k=g?[f,g]:f,_=0,$=k.length;_<$;_++)this.extend(k[_])}H.prototype={extend:function(f){var g=this._southWest,k=this._northEast,_,$;if(f instanceof te)_=f,$=f;else if(f instanceof H){if(_=f._southWest,$=f._northEast,!_||!$)return this}else return f?this.extend(ae(f)||W(f)):this;return!g&&!k?(this._southWest=new te(_.lat,_.lng),this._northEast=new te($.lat,$.lng)):(g.lat=Math.min(_.lat,g.lat),g.lng=Math.min(_.lng,g.lng),k.lat=Math.max($.lat,k.lat),k.lng=Math.max($.lng,k.lng)),this},pad:function(f){var g=this._southWest,k=this._northEast,_=Math.abs(g.lat-k.lat)*f,$=Math.abs(g.lng-k.lng)*f;return new H(new te(g.lat-_,g.lng-$),new te(k.lat+_,k.lng+$))},getCenter:function(){return new te((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new te(this.getNorth(),this.getWest())},getSouthEast:function(){return new te(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(f){typeof f[0]=="number"||f instanceof te||"lat"in f?f=ae(f):f=W(f);var g=this._southWest,k=this._northEast,_,$;return f instanceof H?(_=f.getSouthWest(),$=f.getNorthEast()):_=$=f,_.lat>=g.lat&&$.lat<=k.lat&&_.lng>=g.lng&&$.lng<=k.lng},intersects:function(f){f=W(f);var g=this._southWest,k=this._northEast,_=f.getSouthWest(),$=f.getNorthEast(),O=$.lat>=g.lat&&_.lat<=k.lat,Y=$.lng>=g.lng&&_.lng<=k.lng;return O&&Y},overlaps:function(f){f=W(f);var g=this._southWest,k=this._northEast,_=f.getSouthWest(),$=f.getNorthEast(),O=$.lat>g.lat&&_.lat<k.lat,Y=$.lng>g.lng&&_.lng<k.lng;return O&&Y},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(f,g){return f?(f=W(f),this._southWest.equals(f.getSouthWest(),g)&&this._northEast.equals(f.getNorthEast(),g)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function W(f,g){return f instanceof H?f:new H(f,g)}function te(f,g,k){if(isNaN(f)||isNaN(g))throw new Error("Invalid LatLng object: ("+f+", "+g+")");this.lat=+f,this.lng=+g,k!==void 0&&(this.alt=+k)}te.prototype={equals:function(f,g){if(!f)return!1;f=ae(f);var k=Math.max(Math.abs(this.lat-f.lat),Math.abs(this.lng-f.lng));return k<=(g===void 0?1e-9:g)},toString:function(f){return"LatLng("+m(this.lat,f)+", "+m(this.lng,f)+")"},distanceTo:function(f){return Ce.distance(this,ae(f))},wrap:function(){return Ce.wrapLatLng(this)},toBounds:function(f){var g=180*f/40075017,k=g/Math.cos(Math.PI/180*this.lat);return W([this.lat-g,this.lng-k],[this.lat+g,this.lng+k])},clone:function(){return new te(this.lat,this.lng,this.alt)}};function ae(f,g,k){return f instanceof te?f:E(f)&&typeof f[0]!="object"?f.length===3?new te(f[0],f[1],f[2]):f.length===2?new te(f[0],f[1]):null:f==null?f:typeof f=="object"&&"lat"in f?new te(f.lat,"lng"in f?f.lng:f.lon,f.alt):g===void 0?null:new te(f,g,k)}var ve={latLngToPoint:function(f,g){var k=this.projection.project(f),_=this.scale(g);return this.transformation._transform(k,_)},pointToLatLng:function(f,g){var k=this.scale(g),_=this.transformation.untransform(f,k);return this.projection.unproject(_)},project:function(f){return this.projection.project(f)},unproject:function(f){return this.projection.unproject(f)},scale:function(f){return 256*Math.pow(2,f)},zoom:function(f){return Math.log(f/256)/Math.LN2},getProjectedBounds:function(f){if(this.infinite)return null;var g=this.projection.bounds,k=this.scale(f),_=this.transformation.transform(g.min,k),$=this.transformation.transform(g.max,k);return new G(_,$)},infinite:!1,wrapLatLng:function(f){var g=this.wrapLng?u(f.lng,this.wrapLng,!0):f.lng,k=this.wrapLat?u(f.lat,this.wrapLat,!0):f.lat,_=f.alt;return new te(k,g,_)},wrapLatLngBounds:function(f){var g=f.getCenter(),k=this.wrapLatLng(g),_=g.lat-k.lat,$=g.lng-k.lng;if(_===0&&$===0)return f;var O=f.getSouthWest(),Y=f.getNorthEast(),ce=new te(O.lat-_,O.lng-$),he=new te(Y.lat-_,Y.lng-$);return new H(ce,he)}},Ce=s({},ve,{wrapLng:[-180,180],R:6371e3,distance:function(f,g){var k=Math.PI/180,_=f.lat*k,$=g.lat*k,O=Math.sin((g.lat-f.lat)*k/2),Y=Math.sin((g.lng-f.lng)*k/2),ce=O*O+Math.cos(_)*Math.cos($)*Y*Y,he=2*Math.atan2(Math.sqrt(ce),Math.sqrt(1-ce));return this.R*he}}),Ie=6378137,Fe={R:Ie,MAX_LATITUDE:85.0511287798,project:function(f){var g=Math.PI/180,k=this.MAX_LATITUDE,_=Math.max(Math.min(k,f.lat),-k),$=Math.sin(_*g);return new V(this.R*f.lng*g,this.R*Math.log((1+$)/(1-$))/2)},unproject:function(f){var g=180/Math.PI;return new te((2*Math.atan(Math.exp(f.y/this.R))-Math.PI/2)*g,f.x*g/this.R)},bounds:function(){var f=Ie*Math.PI;return new G([-f,-f],[f,f])}()};function De(f,g,k,_){if(E(f)){this._a=f[0],this._b=f[1],this._c=f[2],this._d=f[3];return}this._a=f,this._b=g,this._c=k,this._d=_}De.prototype={transform:function(f,g){return this._transform(f.clone(),g)},_transform:function(f,g){return g=g||1,f.x=g*(this._a*f.x+this._b),f.y=g*(this._c*f.y+this._d),f},untransform:function(f,g){return g=g||1,new V((f.x/g-this._b)/this._a,(f.y/g-this._d)/this._c)}};function Ke(f,g,k,_){return new De(f,g,k,_)}var Je=s({},Ce,{code:"EPSG:3857",projection:Fe,transformation:function(){var f=.5/(Math.PI*Fe.R);return Ke(f,.5,-f,.5)}()}),dt=s({},Je,{code:"EPSG:900913"});function Et(f){return document.createElementNS("http://www.w3.org/2000/svg",f)}function kt(f,g){var k="",_,$,O,Y,ce,he;for(_=0,O=f.length;_<O;_++){for(ce=f[_],$=0,Y=ce.length;$<Y;$++)he=ce[$],k+=($?"L":"M")+he.x+" "+he.y;k+=g?Ze.svg?"z":"x":""}return k||"M0 0"}var Ot=document.documentElement.style,St="ActiveXObject"in window,Qr=St&&!document.addEventListener,Yt="msLaunchUri"in navigator&&!("documentMode"in document),Tr=ra("webkit"),Un=ra("android"),ps=ra("android 2")||ra("android 3"),es=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),be=Un&&ra("Google")&&es<537&&!("AudioNode"in window),le=!!window.opera,Ee=!Yt&&ra("chrome"),Ne=ra("gecko")&&!Tr&&!le&&!St,Qe=!Ee&&ra("safari"),lt=ra("phantom"),Nt="OTransition"in Ot,j=navigator.platform.indexOf("Win")===0,Q=St&&"transition"in Ot,ge="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!ps,Se="MozPerspective"in Ot,$e=!window.L_DISABLE_3D&&(Q||ge||Se)&&!Nt&&!lt,Be=typeof orientation<"u"||ra("mobile"),Tt=Be&&Tr,Ut=Be&&ge,Ft=!window.PointerEvent&&window.MSPointerEvent,pn=!!(window.PointerEvent||Ft),Jt="ontouchstart"in window||!!window.TouchEvent,Pn=!window.L_NO_TOUCH&&(Jt||pn),Dn=Be&&le,gs=Be&&Ne,$r=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Hl=function(){var f=!1;try{var g=Object.defineProperty({},"passive",{get:function(){f=!0}});window.addEventListener("testPassiveEventSupport",h,g),window.removeEventListener("testPassiveEventSupport",h,g)}catch{}return f}(),zy=function(){return!!document.createElement("canvas").getContext}(),O2=!!(document.createElementNS&&Et("svg").createSVGRect),BK=!!O2&&function(){var f=document.createElement("div");return f.innerHTML="<svg/>",(f.firstChild&&f.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),VK=!O2&&function(){try{var f=document.createElement("div");f.innerHTML='<v:shape adj="1"/>';var g=f.firstChild;return g.style.behavior="url(#default#VML)",g&&typeof g.adj=="object"}catch{return!1}}(),jK=navigator.platform.indexOf("Mac")===0,UK=navigator.platform.indexOf("Linux")===0;function ra(f){return navigator.userAgent.toLowerCase().indexOf(f)>=0}var Ze={ie:St,ielt9:Qr,edge:Yt,webkit:Tr,android:Un,android23:ps,androidStock:be,opera:le,chrome:Ee,gecko:Ne,safari:Qe,phantom:lt,opera12:Nt,win:j,ie3d:Q,webkit3d:ge,gecko3d:Se,any3d:$e,mobile:Be,mobileWebkit:Tt,mobileWebkit3d:Ut,msPointer:Ft,pointer:pn,touch:Pn,touchNative:Jt,mobileOpera:Dn,mobileGecko:gs,retina:$r,passiveEvents:Hl,canvas:zy,svg:O2,vml:VK,inlineSvg:BK,mac:jK,linux:UK},IA=Ze.msPointer?"MSPointerDown":"pointerdown",AA=Ze.msPointer?"MSPointerMove":"pointermove",RA=Ze.msPointer?"MSPointerUp":"pointerup",PA=Ze.msPointer?"MSPointerCancel":"pointercancel",L2={touchstart:IA,touchmove:AA,touchend:RA,touchcancel:PA},DA={touchstart:ZK,touchmove:Fy,touchend:Fy,touchcancel:Fy},Hd={},OA=!1;function HK(f,g,k){return g==="touchstart"&&KK(),DA[g]?(k=DA[g].bind(this,k),f.addEventListener(L2[g],k,!1),k):(console.warn("wrong event specified:",g),h)}function GK(f,g,k){if(!L2[g]){console.warn("wrong event specified:",g);return}f.removeEventListener(L2[g],k,!1)}function WK(f){Hd[f.pointerId]=f}function qK(f){Hd[f.pointerId]&&(Hd[f.pointerId]=f)}function LA(f){delete Hd[f.pointerId]}function KK(){OA||(document.addEventListener(IA,WK,!0),document.addEventListener(AA,qK,!0),document.addEventListener(RA,LA,!0),document.addEventListener(PA,LA,!0),OA=!0)}function Fy(f,g){if(g.pointerType!==(g.MSPOINTER_TYPE_MOUSE||"mouse")){g.touches=[];for(var k in Hd)g.touches.push(Hd[k]);g.changedTouches=[g],f(g)}}function ZK(f,g){g.MSPOINTER_TYPE_TOUCH&&g.pointerType===g.MSPOINTER_TYPE_TOUCH&&ts(g),Fy(f,g)}function XK(f){var g={},k,_;for(_ in f)k=f[_],g[_]=k&&k.bind?k.bind(f):k;return f=g,g.type="dblclick",g.detail=2,g.isTrusted=!1,g._simulated=!0,g}var YK=200;function JK(f,g){f.addEventListener("dblclick",g);var k=0,_;function $(O){if(O.detail!==1){_=O.detail;return}if(!(O.pointerType==="mouse"||O.sourceCapabilities&&!O.sourceCapabilities.firesTouchEvents)){var Y=VA(O);if(!(Y.some(function(he){return he instanceof HTMLLabelElement&&he.attributes.for})&&!Y.some(function(he){return he instanceof HTMLInputElement||he instanceof HTMLSelectElement}))){var ce=Date.now();ce-k<=YK?(_++,_===2&&g(XK(O))):_=1,k=ce}}}return f.addEventListener("click",$),{dblclick:g,simDblclick:$}}function QK(f,g){f.removeEventListener("dblclick",g.dblclick),f.removeEventListener("click",g.simDblclick)}var M2=jy(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Em=jy(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),MA=Em==="webkitTransition"||Em==="OTransition"?Em+"End":"transitionend";function zA(f){return typeof f=="string"?document.getElementById(f):f}function km(f,g){var k=f.style[g]||f.currentStyle&&f.currentStyle[g];if((!k||k==="auto")&&document.defaultView){var _=document.defaultView.getComputedStyle(f,null);k=_?_[g]:null}return k==="auto"?null:k}function Gt(f,g,k){var _=document.createElement(f);return _.className=g||"",k&&k.appendChild(_),_}function Hn(f){var g=f.parentNode;g&&g.removeChild(f)}function By(f){for(;f.firstChild;)f.removeChild(f.firstChild)}function Gd(f){var g=f.parentNode;g&&g.lastChild!==f&&g.appendChild(f)}function Wd(f){var g=f.parentNode;g&&g.firstChild!==f&&g.insertBefore(f,g.firstChild)}function z2(f,g){if(f.classList!==void 0)return f.classList.contains(g);var k=Vy(f);return k.length>0&&new RegExp("(^|\\s)"+g+"(\\s|$)").test(k)}function yt(f,g){if(f.classList!==void 0)for(var k=y(g),_=0,$=k.length;_<$;_++)f.classList.add(k[_]);else if(!z2(f,g)){var O=Vy(f);F2(f,(O?O+" ":"")+g)}}function sr(f,g){f.classList!==void 0?f.classList.remove(g):F2(f,p((" "+Vy(f)+" ").replace(" "+g+" "," ")))}function F2(f,g){f.className.baseVal===void 0?f.className=g:f.className.baseVal=g}function Vy(f){return f.correspondingElement&&(f=f.correspondingElement),f.className.baseVal===void 0?f.className:f.className.baseVal}function zi(f,g){"opacity"in f.style?f.style.opacity=g:"filter"in f.style&&eZ(f,g)}function eZ(f,g){var k=!1,_="DXImageTransform.Microsoft.Alpha";try{k=f.filters.item(_)}catch{if(g===1)return}g=Math.round(g*100),k?(k.Enabled=g!==100,k.Opacity=g):f.style.filter+=" progid:"+_+"(opacity="+g+")"}function jy(f){for(var g=document.documentElement.style,k=0;k<f.length;k++)if(f[k]in g)return f[k];return!1}function du(f,g,k){var _=g||new V(0,0);f.style[M2]=(Ze.ie3d?"translate("+_.x+"px,"+_.y+"px)":"translate3d("+_.x+"px,"+_.y+"px,0)")+(k?" scale("+k+")":"")}function dr(f,g){f._leaflet_pos=g,Ze.any3d?du(f,g):(f.style.left=g.x+"px",f.style.top=g.y+"px")}function hu(f){return f._leaflet_pos||new V(0,0)}var Nm,Cm,B2;if("onselectstart"in document)Nm=function(){ft(window,"selectstart",ts)},Cm=function(){wn(window,"selectstart",ts)};else{var _m=jy(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Nm=function(){if(_m){var f=document.documentElement.style;B2=f[_m],f[_m]="none"}},Cm=function(){_m&&(document.documentElement.style[_m]=B2,B2=void 0)}}function V2(){ft(window,"dragstart",ts)}function j2(){wn(window,"dragstart",ts)}var Uy,U2;function H2(f){for(;f.tabIndex===-1;)f=f.parentNode;f.style&&(Hy(),Uy=f,U2=f.style.outlineStyle,f.style.outlineStyle="none",ft(window,"keydown",Hy))}function Hy(){Uy&&(Uy.style.outlineStyle=U2,Uy=void 0,U2=void 0,wn(window,"keydown",Hy))}function FA(f){do f=f.parentNode;while((!f.offsetWidth||!f.offsetHeight)&&f!==document.body);return f}function G2(f){var g=f.getBoundingClientRect();return{x:g.width/f.offsetWidth||1,y:g.height/f.offsetHeight||1,boundingClientRect:g}}var tZ={__proto__:null,TRANSFORM:M2,TRANSITION:Em,TRANSITION_END:MA,get:zA,getStyle:km,create:Gt,remove:Hn,empty:By,toFront:Gd,toBack:Wd,hasClass:z2,addClass:yt,removeClass:sr,setClass:F2,getClass:Vy,setOpacity:zi,testProp:jy,setTransform:du,setPosition:dr,getPosition:hu,get disableTextSelection(){return Nm},get enableTextSelection(){return Cm},disableImageDrag:V2,enableImageDrag:j2,preventOutline:H2,restoreOutline:Hy,getSizedParentNode:FA,getScale:G2};function ft(f,g,k,_){if(g&&typeof g=="object")for(var $ in g)q2(f,$,g[$],k);else{g=y(g);for(var O=0,Y=g.length;O<Y;O++)q2(f,g[O],k,_)}return this}var sa="_leaflet_events";function wn(f,g,k,_){if(arguments.length===1)BA(f),delete f[sa];else if(g&&typeof g=="object")for(var $ in g)K2(f,$,g[$],k);else if(g=y(g),arguments.length===2)BA(f,function(ce){return N(g,ce)!==-1});else for(var O=0,Y=g.length;O<Y;O++)K2(f,g[O],k,_);return this}function BA(f,g){for(var k in f[sa]){var _=k.split(/\d/)[0];(!g||g(_))&&K2(f,_,null,null,k)}}var W2={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function q2(f,g,k,_){var $=g+l(k)+(_?"_"+l(_):"");if(f[sa]&&f[sa][$])return this;var O=function(ce){return k.call(_||f,ce||window.event)},Y=O;!Ze.touchNative&&Ze.pointer&&g.indexOf("touch")===0?O=HK(f,g,O):Ze.touch&&g==="dblclick"?O=JK(f,O):"addEventListener"in f?g==="touchstart"||g==="touchmove"||g==="wheel"||g==="mousewheel"?f.addEventListener(W2[g]||g,O,Ze.passiveEvents?{passive:!1}:!1):g==="mouseenter"||g==="mouseleave"?(O=function(ce){ce=ce||window.event,X2(f,ce)&&Y(ce)},f.addEventListener(W2[g],O,!1)):f.addEventListener(g,Y,!1):f.attachEvent("on"+g,O),f[sa]=f[sa]||{},f[sa][$]=O}function K2(f,g,k,_,$){$=$||g+l(k)+(_?"_"+l(_):"");var O=f[sa]&&f[sa][$];if(!O)return this;!Ze.touchNative&&Ze.pointer&&g.indexOf("touch")===0?GK(f,g,O):Ze.touch&&g==="dblclick"?QK(f,O):"removeEventListener"in f?f.removeEventListener(W2[g]||g,O,!1):f.detachEvent("on"+g,O),f[sa][$]=null}function fu(f){return f.stopPropagation?f.stopPropagation():f.originalEvent?f.originalEvent._stopped=!0:f.cancelBubble=!0,this}function Z2(f){return q2(f,"wheel",fu),this}function Sm(f){return ft(f,"mousedown touchstart dblclick contextmenu",fu),f._leaflet_disable_click=!0,this}function ts(f){return f.preventDefault?f.preventDefault():f.returnValue=!1,this}function mu(f){return ts(f),fu(f),this}function VA(f){if(f.composedPath)return f.composedPath();for(var g=[],k=f.target;k;)g.push(k),k=k.parentNode;return g}function jA(f,g){if(!g)return new V(f.clientX,f.clientY);var k=G2(g),_=k.boundingClientRect;return new V((f.clientX-_.left)/k.x-g.clientLeft,(f.clientY-_.top)/k.y-g.clientTop)}var nZ=Ze.linux&&Ze.chrome?window.devicePixelRatio:Ze.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function UA(f){return Ze.edge?f.wheelDeltaY/2:f.deltaY&&f.deltaMode===0?-f.deltaY/nZ:f.deltaY&&f.deltaMode===1?-f.deltaY*20:f.deltaY&&f.deltaMode===2?-f.deltaY*60:f.deltaX||f.deltaZ?0:f.wheelDelta?(f.wheelDeltaY||f.wheelDelta)/2:f.detail&&Math.abs(f.detail)<32765?-f.detail*20:f.detail?f.detail/-32765*60:0}function X2(f,g){var k=g.relatedTarget;if(!k)return!0;try{for(;k&&k!==f;)k=k.parentNode}catch{return!1}return k!==f}var rZ={__proto__:null,on:ft,off:wn,stopPropagation:fu,disableScrollPropagation:Z2,disableClickPropagation:Sm,preventDefault:ts,stop:mu,getPropagationPath:VA,getMousePosition:jA,getWheelDelta:UA,isExternalTarget:X2,addListener:ft,removeListener:wn},HA=U.extend({run:function(f,g,k,_){this.stop(),this._el=f,this._inProgress=!0,this._duration=k||.25,this._easeOutPower=1/Math.max(_||.5,.2),this._startPos=hu(f),this._offset=g.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=D(this._animate,this),this._step()},_step:function(f){var g=+new Date-this._startTime,k=this._duration*1e3;g<k?this._runFrame(this._easeOut(g/k),f):(this._runFrame(1),this._complete())},_runFrame:function(f,g){var k=this._startPos.add(this._offset.multiplyBy(f));g&&k._round(),dr(this._el,k),this.fire("step")},_complete:function(){B(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(f){return 1-Math.pow(1-f,this._easeOutPower)}}),Bt=U.extend({options:{crs:Je,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(f,g){g=v(this,g),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(f),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),g.maxBounds&&this.setMaxBounds(g.maxBounds),g.zoom!==void 0&&(this._zoom=this._limitZoom(g.zoom)),g.center&&g.zoom!==void 0&&this.setView(ae(g.center),g.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Em&&Ze.any3d&&!Ze.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ft(this._proxy,MA,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(f,g,k){if(g=g===void 0?this._zoom:this._limitZoom(g),f=this._limitCenter(ae(f),g,this.options.maxBounds),k=k||{},this._stop(),this._loaded&&!k.reset&&k!==!0){k.animate!==void 0&&(k.zoom=s({animate:k.animate},k.zoom),k.pan=s({animate:k.animate,duration:k.duration},k.pan));var _=this._zoom!==g?this._tryAnimatedZoom&&this._tryAnimatedZoom(f,g,k.zoom):this._tryAnimatedPan(f,k.pan);if(_)return clearTimeout(this._sizeTimer),this}return this._resetView(f,g,k.pan&&k.pan.noMoveStart),this},setZoom:function(f,g){return this._loaded?this.setView(this.getCenter(),f,{zoom:g}):(this._zoom=f,this)},zoomIn:function(f,g){return f=f||(Ze.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+f,g)},zoomOut:function(f,g){return f=f||(Ze.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-f,g)},setZoomAround:function(f,g,k){var _=this.getZoomScale(g),$=this.getSize().divideBy(2),O=f instanceof V?f:this.latLngToContainerPoint(f),Y=O.subtract($).multiplyBy(1-1/_),ce=this.containerPointToLatLng($.add(Y));return this.setView(ce,g,{zoom:k})},_getBoundsCenterZoom:function(f,g){g=g||{},f=f.getBounds?f.getBounds():W(f);var k=J(g.paddingTopLeft||g.padding||[0,0]),_=J(g.paddingBottomRight||g.padding||[0,0]),$=this.getBoundsZoom(f,!1,k.add(_));if($=typeof g.maxZoom=="number"?Math.min(g.maxZoom,$):$,$===1/0)return{center:f.getCenter(),zoom:$};var O=_.subtract(k).divideBy(2),Y=this.project(f.getSouthWest(),$),ce=this.project(f.getNorthEast(),$),he=this.unproject(Y.add(ce).divideBy(2).add(O),$);return{center:he,zoom:$}},fitBounds:function(f,g){if(f=W(f),!f.isValid())throw new Error("Bounds are not valid.");var k=this._getBoundsCenterZoom(f,g);return this.setView(k.center,k.zoom,g)},fitWorld:function(f){return this.fitBounds([[-90,-180],[90,180]],f)},panTo:function(f,g){return this.setView(f,this._zoom,{pan:g})},panBy:function(f,g){if(f=J(f).round(),g=g||{},!f.x&&!f.y)return this.fire("moveend");if(g.animate!==!0&&!this.getSize().contains(f))return this._resetView(this.unproject(this.project(this.getCenter()).add(f)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new HA,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),g.noMoveStart||this.fire("movestart"),g.animate!==!1){yt(this._mapPane,"leaflet-pan-anim");var k=this._getMapPanePos().subtract(f).round();this._panAnim.run(this._mapPane,k,g.duration||.25,g.easeLinearity)}else this._rawPanBy(f),this.fire("move").fire("moveend");return this},flyTo:function(f,g,k){if(k=k||{},k.animate===!1||!Ze.any3d)return this.setView(f,g,k);this._stop();var _=this.project(this.getCenter()),$=this.project(f),O=this.getSize(),Y=this._zoom;f=ae(f),g=g===void 0?Y:g;var ce=Math.max(O.x,O.y),he=ce*this.getZoomScale(Y,g),ke=$.distanceTo(_)||1,Ve=1.42,it=Ve*Ve;function $t(hr){var nb=hr?-1:1,GZ=hr?he:ce,WZ=he*he-ce*ce+nb*it*it*ke*ke,qZ=2*GZ*it*ke,aE=WZ/qZ,NR=Math.sqrt(aE*aE+1)-aE,KZ=NR<1e-9?-18:Math.log(NR);return KZ}function Rs(hr){return(Math.exp(hr)-Math.exp(-hr))/2}function zr(hr){return(Math.exp(hr)+Math.exp(-hr))/2}function Bi(hr){return Rs(hr)/zr(hr)}var Xs=$t(0);function Jd(hr){return ce*(zr(Xs)/zr(Xs+Ve*hr))}function VZ(hr){return ce*(zr(Xs)*Bi(Xs+Ve*hr)-Rs(Xs))/it}function jZ(hr){return 1-Math.pow(1-hr,1.5)}var UZ=Date.now(),ER=($t(1)-Xs)/Ve,HZ=k.duration?1e3*k.duration:1e3*ER*.8;function kR(){var hr=(Date.now()-UZ)/HZ,nb=jZ(hr)*ER;hr<=1?(this._flyToFrame=D(kR,this),this._move(this.unproject(_.add($.subtract(_).multiplyBy(VZ(nb)/ke)),Y),this.getScaleZoom(ce/Jd(nb),Y),{flyTo:!0})):this._move(f,g)._moveEnd(!0)}return this._moveStart(!0,k.noMoveStart),kR.call(this),this},flyToBounds:function(f,g){var k=this._getBoundsCenterZoom(f,g);return this.flyTo(k.center,k.zoom,g)},setMaxBounds:function(f){return f=W(f),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),f.isValid()?(this.options.maxBounds=f,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(f){var g=this.options.minZoom;return this.options.minZoom=f,this._loaded&&g!==f&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(f):this},setMaxZoom:function(f){var g=this.options.maxZoom;return this.options.maxZoom=f,this._loaded&&g!==f&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(f):this},panInsideBounds:function(f,g){this._enforcingBounds=!0;var k=this.getCenter(),_=this._limitCenter(k,this._zoom,W(f));return k.equals(_)||this.panTo(_,g),this._enforcingBounds=!1,this},panInside:function(f,g){g=g||{};var k=J(g.paddingTopLeft||g.padding||[0,0]),_=J(g.paddingBottomRight||g.padding||[0,0]),$=this.project(this.getCenter()),O=this.project(f),Y=this.getPixelBounds(),ce=X([Y.min.add(k),Y.max.subtract(_)]),he=ce.getSize();if(!ce.contains(O)){this._enforcingBounds=!0;var ke=O.subtract(ce.getCenter()),Ve=ce.extend(O).getSize().subtract(he);$.x+=ke.x<0?-Ve.x:Ve.x,$.y+=ke.y<0?-Ve.y:Ve.y,this.panTo(this.unproject($),g),this._enforcingBounds=!1}return this},invalidateSize:function(f){if(!this._loaded)return this;f=s({animate:!1,pan:!0},f===!0?{animate:!0}:f);var g=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var k=this.getSize(),_=g.divideBy(2).round(),$=k.divideBy(2).round(),O=_.subtract($);return!O.x&&!O.y?this:(f.animate&&f.pan?this.panBy(O):(f.pan&&this._rawPanBy(O),this.fire("move"),f.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:g,newSize:k}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(f){if(f=this._locateOptions=s({timeout:1e4,watch:!1},f),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var g=o(this._handleGeolocationResponse,this),k=o(this._handleGeolocationError,this);return f.watch?this._locationWatchId=navigator.geolocation.watchPosition(g,k,f):navigator.geolocation.getCurrentPosition(g,k,f),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(f){if(this._container._leaflet_id){var g=f.code,k=f.message||(g===1?"permission denied":g===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:g,message:"Geolocation error: "+k+"."})}},_handleGeolocationResponse:function(f){if(this._container._leaflet_id){var g=f.coords.latitude,k=f.coords.longitude,_=new te(g,k),$=_.toBounds(f.coords.accuracy*2),O=this._locateOptions;if(O.setView){var Y=this.getBoundsZoom($);this.setView(_,O.maxZoom?Math.min(Y,O.maxZoom):Y)}var ce={latlng:_,bounds:$,timestamp:f.timestamp};for(var he in f.coords)typeof f.coords[he]=="number"&&(ce[he]=f.coords[he]);this.fire("locationfound",ce)}},addHandler:function(f,g){if(!g)return this;var k=this[f]=new g(this);return this._handlers.push(k),this.options[f]&&k.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Hn(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(B(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var f;for(f in this._layers)this._layers[f].remove();for(f in this._panes)Hn(this._panes[f]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(f,g){var k="leaflet-pane"+(f?" leaflet-"+f.replace("Pane","")+"-pane":""),_=Gt("div",k,g||this._mapPane);return f&&(this._panes[f]=_),_},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var f=this.getPixelBounds(),g=this.unproject(f.getBottomLeft()),k=this.unproject(f.getTopRight());return new H(g,k)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(f,g,k){f=W(f),k=J(k||[0,0]);var _=this.getZoom()||0,$=this.getMinZoom(),O=this.getMaxZoom(),Y=f.getNorthWest(),ce=f.getSouthEast(),he=this.getSize().subtract(k),ke=X(this.project(ce,_),this.project(Y,_)).getSize(),Ve=Ze.any3d?this.options.zoomSnap:1,it=he.x/ke.x,$t=he.y/ke.y,Rs=g?Math.max(it,$t):Math.min(it,$t);return _=this.getScaleZoom(Rs,_),Ve&&(_=Math.round(_/(Ve/100))*(Ve/100),_=g?Math.ceil(_/Ve)*Ve:Math.floor(_/Ve)*Ve),Math.max($,Math.min(O,_))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new V(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(f,g){var k=this._getTopLeftPoint(f,g);return new G(k,k.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(f){return this.options.crs.getProjectedBounds(f===void 0?this.getZoom():f)},getPane:function(f){return typeof f=="string"?this._panes[f]:f},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(f,g){var k=this.options.crs;return g=g===void 0?this._zoom:g,k.scale(f)/k.scale(g)},getScaleZoom:function(f,g){var k=this.options.crs;g=g===void 0?this._zoom:g;var _=k.zoom(f*k.scale(g));return isNaN(_)?1/0:_},project:function(f,g){return g=g===void 0?this._zoom:g,this.options.crs.latLngToPoint(ae(f),g)},unproject:function(f,g){return g=g===void 0?this._zoom:g,this.options.crs.pointToLatLng(J(f),g)},layerPointToLatLng:function(f){var g=J(f).add(this.getPixelOrigin());return this.unproject(g)},latLngToLayerPoint:function(f){var g=this.project(ae(f))._round();return g._subtract(this.getPixelOrigin())},wrapLatLng:function(f){return this.options.crs.wrapLatLng(ae(f))},wrapLatLngBounds:function(f){return this.options.crs.wrapLatLngBounds(W(f))},distance:function(f,g){return this.options.crs.distance(ae(f),ae(g))},containerPointToLayerPoint:function(f){return J(f).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(f){return J(f).add(this._getMapPanePos())},containerPointToLatLng:function(f){var g=this.containerPointToLayerPoint(J(f));return this.layerPointToLatLng(g)},latLngToContainerPoint:function(f){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ae(f)))},mouseEventToContainerPoint:function(f){return jA(f,this._container)},mouseEventToLayerPoint:function(f){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(f))},mouseEventToLatLng:function(f){return this.layerPointToLatLng(this.mouseEventToLayerPoint(f))},_initContainer:function(f){var g=this._container=zA(f);if(g){if(g._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");ft(g,"scroll",this._onScroll,this),this._containerId=l(g)},_initLayout:function(){var f=this._container;this._fadeAnimated=this.options.fadeAnimation&&Ze.any3d,yt(f,"leaflet-container"+(Ze.touch?" leaflet-touch":"")+(Ze.retina?" leaflet-retina":"")+(Ze.ielt9?" leaflet-oldie":"")+(Ze.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var g=km(f,"position");g!=="absolute"&&g!=="relative"&&g!=="fixed"&&g!=="sticky"&&(f.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var f=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),dr(this._mapPane,new V(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(yt(f.markerPane,"leaflet-zoom-hide"),yt(f.shadowPane,"leaflet-zoom-hide"))},_resetView:function(f,g,k){dr(this._mapPane,new V(0,0));var _=!this._loaded;this._loaded=!0,g=this._limitZoom(g),this.fire("viewprereset");var $=this._zoom!==g;this._moveStart($,k)._move(f,g)._moveEnd($),this.fire("viewreset"),_&&this.fire("load")},_moveStart:function(f,g){return f&&this.fire("zoomstart"),g||this.fire("movestart"),this},_move:function(f,g,k,_){g===void 0&&(g=this._zoom);var $=this._zoom!==g;return this._zoom=g,this._lastCenter=f,this._pixelOrigin=this._getNewPixelOrigin(f),_?k&&k.pinch&&this.fire("zoom",k):(($||k&&k.pinch)&&this.fire("zoom",k),this.fire("move",k)),this},_moveEnd:function(f){return f&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return B(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(f){dr(this._mapPane,this._getMapPanePos().subtract(f))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(f){this._targets={},this._targets[l(this._container)]=this;var g=f?wn:ft;g(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&g(window,"resize",this._onResize,this),Ze.any3d&&this.options.transform3DLimit&&(f?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){B(this._resizeRequest),this._resizeRequest=D(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var f=this._getMapPanePos();Math.max(Math.abs(f.x),Math.abs(f.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(f,g){for(var k=[],_,$=g==="mouseout"||g==="mouseover",O=f.target||f.srcElement,Y=!1;O;){if(_=this._targets[l(O)],_&&(g==="click"||g==="preclick")&&this._draggableMoved(_)){Y=!0;break}if(_&&_.listens(g,!0)&&($&&!X2(O,f)||(k.push(_),$))||O===this._container)break;O=O.parentNode}return!k.length&&!Y&&!$&&this.listens(g,!0)&&(k=[this]),k},_isClickDisabled:function(f){for(;f&&f!==this._container;){if(f._leaflet_disable_click)return!0;f=f.parentNode}},_handleDOMEvent:function(f){var g=f.target||f.srcElement;if(!(!this._loaded||g._leaflet_disable_events||f.type==="click"&&this._isClickDisabled(g))){var k=f.type;k==="mousedown"&&H2(g),this._fireDOMEvent(f,k)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(f,g,k){if(f.type==="click"){var _=s({},f);_.type="preclick",this._fireDOMEvent(_,_.type,k)}var $=this._findEventTargets(f,g);if(k){for(var O=[],Y=0;Y<k.length;Y++)k[Y].listens(g,!0)&&O.push(k[Y]);$=O.concat($)}if($.length){g==="contextmenu"&&ts(f);var ce=$[0],he={originalEvent:f};if(f.type!=="keypress"&&f.type!=="keydown"&&f.type!=="keyup"){var ke=ce.getLatLng&&(!ce._radius||ce._radius<=10);he.containerPoint=ke?this.latLngToContainerPoint(ce.getLatLng()):this.mouseEventToContainerPoint(f),he.layerPoint=this.containerPointToLayerPoint(he.containerPoint),he.latlng=ke?ce.getLatLng():this.layerPointToLatLng(he.layerPoint)}for(Y=0;Y<$.length;Y++)if($[Y].fire(g,he,!0),he.originalEvent._stopped||$[Y].options.bubblingMouseEvents===!1&&N(this._mouseEvents,g)!==-1)return}},_draggableMoved:function(f){return f=f.dragging&&f.dragging.enabled()?f:this,f.dragging&&f.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var f=0,g=this._handlers.length;f<g;f++)this._handlers[f].disable()},whenReady:function(f,g){return this._loaded?f.call(g||this,{target:this}):this.on("load",f,g),this},_getMapPanePos:function(){return hu(this._mapPane)||new V(0,0)},_moved:function(){var f=this._getMapPanePos();return f&&!f.equals([0,0])},_getTopLeftPoint:function(f,g){var k=f&&g!==void 0?this._getNewPixelOrigin(f,g):this.getPixelOrigin();return k.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(f,g){var k=this.getSize()._divideBy(2);return this.project(f,g)._subtract(k)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(f,g,k){var _=this._getNewPixelOrigin(k,g);return this.project(f,g)._subtract(_)},_latLngBoundsToNewLayerBounds:function(f,g,k){var _=this._getNewPixelOrigin(k,g);return X([this.project(f.getSouthWest(),g)._subtract(_),this.project(f.getNorthWest(),g)._subtract(_),this.project(f.getSouthEast(),g)._subtract(_),this.project(f.getNorthEast(),g)._subtract(_)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(f){return this.latLngToLayerPoint(f).subtract(this._getCenterLayerPoint())},_limitCenter:function(f,g,k){if(!k)return f;var _=this.project(f,g),$=this.getSize().divideBy(2),O=new G(_.subtract($),_.add($)),Y=this._getBoundsOffset(O,k,g);return Math.abs(Y.x)<=1&&Math.abs(Y.y)<=1?f:this.unproject(_.add(Y),g)},_limitOffset:function(f,g){if(!g)return f;var k=this.getPixelBounds(),_=new G(k.min.add(f),k.max.add(f));return f.add(this._getBoundsOffset(_,g))},_getBoundsOffset:function(f,g,k){var _=X(this.project(g.getNorthEast(),k),this.project(g.getSouthWest(),k)),$=_.min.subtract(f.min),O=_.max.subtract(f.max),Y=this._rebound($.x,-O.x),ce=this._rebound($.y,-O.y);return new V(Y,ce)},_rebound:function(f,g){return f+g>0?Math.round(f-g)/2:Math.max(0,Math.ceil(f))-Math.max(0,Math.floor(g))},_limitZoom:function(f){var g=this.getMinZoom(),k=this.getMaxZoom(),_=Ze.any3d?this.options.zoomSnap:1;return _&&(f=Math.round(f/_)*_),Math.max(g,Math.min(k,f))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){sr(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(f,g){var k=this._getCenterOffset(f)._trunc();return(g&&g.animate)!==!0&&!this.getSize().contains(k)?!1:(this.panBy(k,g),!0)},_createAnimProxy:function(){var f=this._proxy=Gt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(f),this.on("zoomanim",function(g){var k=M2,_=this._proxy.style[k];du(this._proxy,this.project(g.center,g.zoom),this.getZoomScale(g.zoom,1)),_===this._proxy.style[k]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Hn(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var f=this.getCenter(),g=this.getZoom();du(this._proxy,this.project(f,g),this.getZoomScale(g,1))},_catchTransitionEnd:function(f){this._animatingZoom&&f.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(f,g,k){if(this._animatingZoom)return!0;if(k=k||{},!this._zoomAnimated||k.animate===!1||this._nothingToAnimate()||Math.abs(g-this._zoom)>this.options.zoomAnimationThreshold)return!1;var _=this.getZoomScale(g),$=this._getCenterOffset(f)._divideBy(1-1/_);return k.animate!==!0&&!this.getSize().contains($)?!1:(D(function(){this._moveStart(!0,k.noMoveStart||!1)._animateZoom(f,g,!0)},this),!0)},_animateZoom:function(f,g,k,_){this._mapPane&&(k&&(this._animatingZoom=!0,this._animateToCenter=f,this._animateToZoom=g,yt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:f,zoom:g,noUpdate:_}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&sr(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function sZ(f,g){return new Bt(f,g)}var No=z.extend({options:{position:"topright"},initialize:function(f){v(this,f)},getPosition:function(){return this.options.position},setPosition:function(f){var g=this._map;return g&&g.removeControl(this),this.options.position=f,g&&g.addControl(this),this},getContainer:function(){return this._container},addTo:function(f){this.remove(),this._map=f;var g=this._container=this.onAdd(f),k=this.getPosition(),_=f._controlCorners[k];return yt(g,"leaflet-control"),k.indexOf("bottom")!==-1?_.insertBefore(g,_.firstChild):_.appendChild(g),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Hn(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(f){this._map&&f&&f.screenX>0&&f.screenY>0&&this._map.getContainer().focus()}}),Tm=function(f){return new No(f)};Bt.include({addControl:function(f){return f.addTo(this),this},removeControl:function(f){return f.remove(),this},_initControlPos:function(){var f=this._controlCorners={},g="leaflet-",k=this._controlContainer=Gt("div",g+"control-container",this._container);function _($,O){var Y=g+$+" "+g+O;f[$+O]=Gt("div",Y,k)}_("top","left"),_("top","right"),_("bottom","left"),_("bottom","right")},_clearControlPos:function(){for(var f in this._controlCorners)Hn(this._controlCorners[f]);Hn(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var GA=No.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(f,g,k,_){return k<_?-1:_<k?1:0}},initialize:function(f,g,k){v(this,k),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var _ in f)this._addLayer(f[_],_);for(_ in g)this._addLayer(g[_],_,!0)},onAdd:function(f){this._initLayout(),this._update(),this._map=f,f.on("zoomend",this._checkDisabledLayers,this);for(var g=0;g<this._layers.length;g++)this._layers[g].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(f){return No.prototype.addTo.call(this,f),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var f=0;f<this._layers.length;f++)this._layers[f].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(f,g){return this._addLayer(f,g),this._map?this._update():this},addOverlay:function(f,g){return this._addLayer(f,g,!0),this._map?this._update():this},removeLayer:function(f){f.off("add remove",this._onLayerChange,this);var g=this._getLayer(l(f));return g&&this._layers.splice(this._layers.indexOf(g),1),this._map?this._update():this},expand:function(){yt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var f=this._map.getSize().y-(this._container.offsetTop+50);return f<this._section.clientHeight?(yt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=f+"px"):sr(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return sr(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var f="leaflet-control-layers",g=this._container=Gt("div",f),k=this.options.collapsed;g.setAttribute("aria-haspopup",!0),Sm(g),Z2(g);var _=this._section=Gt("section",f+"-list");k&&(this._map.on("click",this.collapse,this),ft(g,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var $=this._layersLink=Gt("a",f+"-toggle",g);$.href="#",$.title="Layers",$.setAttribute("role","button"),ft($,{keydown:function(O){O.keyCode===13&&this._expandSafely()},click:function(O){ts(O),this._expandSafely()}},this),k||this.expand(),this._baseLayersList=Gt("div",f+"-base",_),this._separator=Gt("div",f+"-separator",_),this._overlaysList=Gt("div",f+"-overlays",_),g.appendChild(_)},_getLayer:function(f){for(var g=0;g<this._layers.length;g++)if(this._layers[g]&&l(this._layers[g].layer)===f)return this._layers[g]},_addLayer:function(f,g,k){this._map&&f.on("add remove",this._onLayerChange,this),this._layers.push({layer:f,name:g,overlay:k}),this.options.sortLayers&&this._layers.sort(o(function(_,$){return this.options.sortFunction(_.layer,$.layer,_.name,$.name)},this)),this.options.autoZIndex&&f.setZIndex&&(this._lastZIndex++,f.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;By(this._baseLayersList),By(this._overlaysList),this._layerControlInputs=[];var f,g,k,_,$=0;for(k=0;k<this._layers.length;k++)_=this._layers[k],this._addItem(_),g=g||_.overlay,f=f||!_.overlay,$+=_.overlay?0:1;return this.options.hideSingleBase&&(f=f&&$>1,this._baseLayersList.style.display=f?"":"none"),this._separator.style.display=g&&f?"":"none",this},_onLayerChange:function(f){this._handlingClick||this._update();var g=this._getLayer(l(f.target)),k=g.overlay?f.type==="add"?"overlayadd":"overlayremove":f.type==="add"?"baselayerchange":null;k&&this._map.fire(k,g)},_createRadioElement:function(f,g){var k='<input type="radio" class="leaflet-control-layers-selector" name="'+f+'"'+(g?' checked="checked"':"")+"/>",_=document.createElement("div");return _.innerHTML=k,_.firstChild},_addItem:function(f){var g=document.createElement("label"),k=this._map.hasLayer(f.layer),_;f.overlay?(_=document.createElement("input"),_.type="checkbox",_.className="leaflet-control-layers-selector",_.defaultChecked=k):_=this._createRadioElement("leaflet-base-layers_"+l(this),k),this._layerControlInputs.push(_),_.layerId=l(f.layer),ft(_,"click",this._onInputClick,this);var $=document.createElement("span");$.innerHTML=" "+f.name;var O=document.createElement("span");g.appendChild(O),O.appendChild(_),O.appendChild($);var Y=f.overlay?this._overlaysList:this._baseLayersList;return Y.appendChild(g),this._checkDisabledLayers(),g},_onInputClick:function(){if(!this._preventClick){var f=this._layerControlInputs,g,k,_=[],$=[];this._handlingClick=!0;for(var O=f.length-1;O>=0;O--)g=f[O],k=this._getLayer(g.layerId).layer,g.checked?_.push(k):g.checked||$.push(k);for(O=0;O<$.length;O++)this._map.hasLayer($[O])&&this._map.removeLayer($[O]);for(O=0;O<_.length;O++)this._map.hasLayer(_[O])||this._map.addLayer(_[O]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var f=this._layerControlInputs,g,k,_=this._map.getZoom(),$=f.length-1;$>=0;$--)g=f[$],k=this._getLayer(g.layerId).layer,g.disabled=k.options.minZoom!==void 0&&_<k.options.minZoom||k.options.maxZoom!==void 0&&_>k.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var f=this._section;this._preventClick=!0,ft(f,"click",ts),this.expand();var g=this;setTimeout(function(){wn(f,"click",ts),g._preventClick=!1})}}),iZ=function(f,g,k){return new GA(f,g,k)},Y2=No.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(f){var g="leaflet-control-zoom",k=Gt("div",g+" leaflet-bar"),_=this.options;return this._zoomInButton=this._createButton(_.zoomInText,_.zoomInTitle,g+"-in",k,this._zoomIn),this._zoomOutButton=this._createButton(_.zoomOutText,_.zoomOutTitle,g+"-out",k,this._zoomOut),this._updateDisabled(),f.on("zoomend zoomlevelschange",this._updateDisabled,this),k},onRemove:function(f){f.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(f){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(f.shiftKey?3:1))},_zoomOut:function(f){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(f.shiftKey?3:1))},_createButton:function(f,g,k,_,$){var O=Gt("a",k,_);return O.innerHTML=f,O.href="#",O.title=g,O.setAttribute("role","button"),O.setAttribute("aria-label",g),Sm(O),ft(O,"click",mu),ft(O,"click",$,this),ft(O,"click",this._refocusOnMap,this),O},_updateDisabled:function(){var f=this._map,g="leaflet-disabled";sr(this._zoomInButton,g),sr(this._zoomOutButton,g),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||f._zoom===f.getMinZoom())&&(yt(this._zoomOutButton,g),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||f._zoom===f.getMaxZoom())&&(yt(this._zoomInButton,g),this._zoomInButton.setAttribute("aria-disabled","true"))}});Bt.mergeOptions({zoomControl:!0}),Bt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Y2,this.addControl(this.zoomControl))});var oZ=function(f){return new Y2(f)},WA=No.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(f){var g="leaflet-control-scale",k=Gt("div",g),_=this.options;return this._addScales(_,g+"-line",k),f.on(_.updateWhenIdle?"moveend":"move",this._update,this),f.whenReady(this._update,this),k},onRemove:function(f){f.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(f,g,k){f.metric&&(this._mScale=Gt("div",g,k)),f.imperial&&(this._iScale=Gt("div",g,k))},_update:function(){var f=this._map,g=f.getSize().y/2,k=f.distance(f.containerPointToLatLng([0,g]),f.containerPointToLatLng([this.options.maxWidth,g]));this._updateScales(k)},_updateScales:function(f){this.options.metric&&f&&this._updateMetric(f),this.options.imperial&&f&&this._updateImperial(f)},_updateMetric:function(f){var g=this._getRoundNum(f),k=g<1e3?g+" m":g/1e3+" km";this._updateScale(this._mScale,k,g/f)},_updateImperial:function(f){var g=f*3.2808399,k,_,$;g>5280?(k=g/5280,_=this._getRoundNum(k),this._updateScale(this._iScale,_+" mi",_/k)):($=this._getRoundNum(g),this._updateScale(this._iScale,$+" ft",$/g))},_updateScale:function(f,g,k){f.style.width=Math.round(this.options.maxWidth*k)+"px",f.innerHTML=g},_getRoundNum:function(f){var g=Math.pow(10,(Math.floor(f)+"").length-1),k=f/g;return k=k>=10?10:k>=5?5:k>=3?3:k>=2?2:1,g*k}}),aZ=function(f){return new WA(f)},lZ='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',J2=No.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Ze.inlineSvg?lZ+" ":"")+"Leaflet</a>"},initialize:function(f){v(this,f),this._attributions={}},onAdd:function(f){f.attributionControl=this,this._container=Gt("div","leaflet-control-attribution"),Sm(this._container);for(var g in f._layers)f._layers[g].getAttribution&&this.addAttribution(f._layers[g].getAttribution());return this._update(),f.on("layeradd",this._addAttribution,this),this._container},onRemove:function(f){f.off("layeradd",this._addAttribution,this)},_addAttribution:function(f){f.layer.getAttribution&&(this.addAttribution(f.layer.getAttribution()),f.layer.once("remove",function(){this.removeAttribution(f.layer.getAttribution())},this))},setPrefix:function(f){return this.options.prefix=f,this._update(),this},addAttribution:function(f){return f?(this._attributions[f]||(this._attributions[f]=0),this._attributions[f]++,this._update(),this):this},removeAttribution:function(f){return f?(this._attributions[f]&&(this._attributions[f]--,this._update()),this):this},_update:function(){if(this._map){var f=[];for(var g in this._attributions)this._attributions[g]&&f.push(g);var k=[];this.options.prefix&&k.push(this.options.prefix),f.length&&k.push(f.join(", ")),this._container.innerHTML=k.join(' <span aria-hidden="true">|</span> ')}}});Bt.mergeOptions({attributionControl:!0}),Bt.addInitHook(function(){this.options.attributionControl&&new J2().addTo(this)});var cZ=function(f){return new J2(f)};No.Layers=GA,No.Zoom=Y2,No.Scale=WA,No.Attribution=J2,Tm.layers=iZ,Tm.zoom=oZ,Tm.scale=aZ,Tm.attribution=cZ;var ia=z.extend({initialize:function(f){this._map=f},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});ia.addTo=function(f,g){return f.addHandler(g,this),this};var uZ={Events:M},qA=Ze.touch?"touchstart mousedown":"mousedown",Gl=U.extend({options:{clickTolerance:3},initialize:function(f,g,k,_){v(this,_),this._element=f,this._dragStartTarget=g||f,this._preventOutline=k},enable:function(){this._enabled||(ft(this._dragStartTarget,qA,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Gl._dragging===this&&this.finishDrag(!0),wn(this._dragStartTarget,qA,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(f){if(this._enabled&&(this._moved=!1,!z2(this._element,"leaflet-zoom-anim"))){if(f.touches&&f.touches.length!==1){Gl._dragging===this&&this.finishDrag();return}if(!(Gl._dragging||f.shiftKey||f.which!==1&&f.button!==1&&!f.touches)&&(Gl._dragging=this,this._preventOutline&&H2(this._element),V2(),Nm(),!this._moving)){this.fire("down");var g=f.touches?f.touches[0]:f,k=FA(this._element);this._startPoint=new V(g.clientX,g.clientY),this._startPos=hu(this._element),this._parentScale=G2(k);var _=f.type==="mousedown";ft(document,_?"mousemove":"touchmove",this._onMove,this),ft(document,_?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(f){if(this._enabled){if(f.touches&&f.touches.length>1){this._moved=!0;return}var g=f.touches&&f.touches.length===1?f.touches[0]:f,k=new V(g.clientX,g.clientY)._subtract(this._startPoint);!k.x&&!k.y||Math.abs(k.x)+Math.abs(k.y)<this.options.clickTolerance||(k.x/=this._parentScale.x,k.y/=this._parentScale.y,ts(f),this._moved||(this.fire("dragstart"),this._moved=!0,yt(document.body,"leaflet-dragging"),this._lastTarget=f.target||f.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),yt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(k),this._moving=!0,this._lastEvent=f,this._updatePosition())}},_updatePosition:function(){var f={originalEvent:this._lastEvent};this.fire("predrag",f),dr(this._element,this._newPos),this.fire("drag",f)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(f){sr(document.body,"leaflet-dragging"),this._lastTarget&&(sr(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),wn(document,"mousemove touchmove",this._onMove,this),wn(document,"mouseup touchend touchcancel",this._onUp,this),j2(),Cm();var g=this._moved&&this._moving;this._moving=!1,Gl._dragging=!1,g&&this.fire("dragend",{noInertia:f,distance:this._newPos.distanceTo(this._startPos)})}});function KA(f,g,k){var _,$=[1,4,2,8],O,Y,ce,he,ke,Ve,it,$t;for(O=0,Ve=f.length;O<Ve;O++)f[O]._code=pu(f[O],g);for(ce=0;ce<4;ce++){for(it=$[ce],_=[],O=0,Ve=f.length,Y=Ve-1;O<Ve;Y=O++)he=f[O],ke=f[Y],he._code&it?ke._code&it||($t=Gy(ke,he,it,g,k),$t._code=pu($t,g),_.push($t)):(ke._code&it&&($t=Gy(ke,he,it,g,k),$t._code=pu($t,g),_.push($t)),_.push(he));f=_}return f}function ZA(f,g){var k,_,$,O,Y,ce,he,ke,Ve;if(!f||f.length===0)throw new Error("latlngs not passed");Fi(f)||(console.warn("latlngs are not flat! Only the first ring will be used"),f=f[0]);var it=ae([0,0]),$t=W(f),Rs=$t.getNorthWest().distanceTo($t.getSouthWest())*$t.getNorthEast().distanceTo($t.getNorthWest());Rs<1700&&(it=Q2(f));var zr=f.length,Bi=[];for(k=0;k<zr;k++){var Xs=ae(f[k]);Bi.push(g.project(ae([Xs.lat-it.lat,Xs.lng-it.lng])))}for(ce=he=ke=0,k=0,_=zr-1;k<zr;_=k++)$=Bi[k],O=Bi[_],Y=$.y*O.x-O.y*$.x,he+=($.x+O.x)*Y,ke+=($.y+O.y)*Y,ce+=Y*3;ce===0?Ve=Bi[0]:Ve=[he/ce,ke/ce];var Jd=g.unproject(J(Ve));return ae([Jd.lat+it.lat,Jd.lng+it.lng])}function Q2(f){for(var g=0,k=0,_=0,$=0;$<f.length;$++){var O=ae(f[$]);g+=O.lat,k+=O.lng,_++}return ae([g/_,k/_])}var dZ={__proto__:null,clipPolygon:KA,polygonCenter:ZA,centroid:Q2};function XA(f,g){if(!g||!f.length)return f.slice();var k=g*g;return f=mZ(f,k),f=fZ(f,k),f}function YA(f,g,k){return Math.sqrt($m(f,g,k,!0))}function hZ(f,g,k){return $m(f,g,k)}function fZ(f,g){var k=f.length,_=typeof Uint8Array!=void 0+""?Uint8Array:Array,$=new _(k);$[0]=$[k-1]=1,eE(f,$,g,0,k-1);var O,Y=[];for(O=0;O<k;O++)$[O]&&Y.push(f[O]);return Y}function eE(f,g,k,_,$){var O=0,Y,ce,he;for(ce=_+1;ce<=$-1;ce++)he=$m(f[ce],f[_],f[$],!0),he>O&&(Y=ce,O=he);O>k&&(g[Y]=1,eE(f,g,k,_,Y),eE(f,g,k,Y,$))}function mZ(f,g){for(var k=[f[0]],_=1,$=0,O=f.length;_<O;_++)pZ(f[_],f[$])>g&&(k.push(f[_]),$=_);return $<O-1&&k.push(f[O-1]),k}var JA;function QA(f,g,k,_,$){var O=_?JA:pu(f,k),Y=pu(g,k),ce,he,ke;for(JA=Y;;){if(!(O|Y))return[f,g];if(O&Y)return!1;ce=O||Y,he=Gy(f,g,ce,k,$),ke=pu(he,k),ce===O?(f=he,O=ke):(g=he,Y=ke)}}function Gy(f,g,k,_,$){var O=g.x-f.x,Y=g.y-f.y,ce=_.min,he=_.max,ke,Ve;return k&8?(ke=f.x+O*(he.y-f.y)/Y,Ve=he.y):k&4?(ke=f.x+O*(ce.y-f.y)/Y,Ve=ce.y):k&2?(ke=he.x,Ve=f.y+Y*(he.x-f.x)/O):k&1&&(ke=ce.x,Ve=f.y+Y*(ce.x-f.x)/O),new V(ke,Ve,$)}function pu(f,g){var k=0;return f.x<g.min.x?k|=1:f.x>g.max.x&&(k|=2),f.y<g.min.y?k|=4:f.y>g.max.y&&(k|=8),k}function pZ(f,g){var k=g.x-f.x,_=g.y-f.y;return k*k+_*_}function $m(f,g,k,_){var $=g.x,O=g.y,Y=k.x-$,ce=k.y-O,he=Y*Y+ce*ce,ke;return he>0&&(ke=((f.x-$)*Y+(f.y-O)*ce)/he,ke>1?($=k.x,O=k.y):ke>0&&($+=Y*ke,O+=ce*ke)),Y=f.x-$,ce=f.y-O,_?Y*Y+ce*ce:new V($,O)}function Fi(f){return!E(f[0])||typeof f[0][0]!="object"&&typeof f[0][0]<"u"}function eR(f){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Fi(f)}function tR(f,g){var k,_,$,O,Y,ce,he,ke;if(!f||f.length===0)throw new Error("latlngs not passed");Fi(f)||(console.warn("latlngs are not flat! Only the first ring will be used"),f=f[0]);var Ve=ae([0,0]),it=W(f),$t=it.getNorthWest().distanceTo(it.getSouthWest())*it.getNorthEast().distanceTo(it.getNorthWest());$t<1700&&(Ve=Q2(f));var Rs=f.length,zr=[];for(k=0;k<Rs;k++){var Bi=ae(f[k]);zr.push(g.project(ae([Bi.lat-Ve.lat,Bi.lng-Ve.lng])))}for(k=0,_=0;k<Rs-1;k++)_+=zr[k].distanceTo(zr[k+1])/2;if(_===0)ke=zr[0];else for(k=0,O=0;k<Rs-1;k++)if(Y=zr[k],ce=zr[k+1],$=Y.distanceTo(ce),O+=$,O>_){he=(O-_)/$,ke=[ce.x-he*(ce.x-Y.x),ce.y-he*(ce.y-Y.y)];break}var Xs=g.unproject(J(ke));return ae([Xs.lat+Ve.lat,Xs.lng+Ve.lng])}var gZ={__proto__:null,simplify:XA,pointToSegmentDistance:YA,closestPointOnSegment:hZ,clipSegment:QA,_getEdgeIntersection:Gy,_getBitCode:pu,_sqClosestPointOnSegment:$m,isFlat:Fi,_flat:eR,polylineCenter:tR},tE={project:function(f){return new V(f.lng,f.lat)},unproject:function(f){return new te(f.y,f.x)},bounds:new G([-180,-90],[180,90])},nE={R:6378137,R_MINOR:6356752314245179e-9,bounds:new G([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(f){var g=Math.PI/180,k=this.R,_=f.lat*g,$=this.R_MINOR/k,O=Math.sqrt(1-$*$),Y=O*Math.sin(_),ce=Math.tan(Math.PI/4-_/2)/Math.pow((1-Y)/(1+Y),O/2);return _=-k*Math.log(Math.max(ce,1e-10)),new V(f.lng*g*k,_)},unproject:function(f){for(var g=180/Math.PI,k=this.R,_=this.R_MINOR/k,$=Math.sqrt(1-_*_),O=Math.exp(-f.y/k),Y=Math.PI/2-2*Math.atan(O),ce=0,he=.1,ke;ce<15&&Math.abs(he)>1e-7;ce++)ke=$*Math.sin(Y),ke=Math.pow((1-ke)/(1+ke),$/2),he=Math.PI/2-2*Math.atan(O*ke)-Y,Y+=he;return new te(Y*g,f.x*g/k)}},yZ={__proto__:null,LonLat:tE,Mercator:nE,SphericalMercator:Fe},bZ=s({},Ce,{code:"EPSG:3395",projection:nE,transformation:function(){var f=.5/(Math.PI*nE.R);return Ke(f,.5,-f,.5)}()}),nR=s({},Ce,{code:"EPSG:4326",projection:tE,transformation:Ke(1/180,1,-1/180,.5)}),vZ=s({},ve,{projection:tE,transformation:Ke(1,0,-1,0),scale:function(f){return Math.pow(2,f)},zoom:function(f){return Math.log(f)/Math.LN2},distance:function(f,g){var k=g.lng-f.lng,_=g.lat-f.lat;return Math.sqrt(k*k+_*_)},infinite:!0});ve.Earth=Ce,ve.EPSG3395=bZ,ve.EPSG3857=Je,ve.EPSG900913=dt,ve.EPSG4326=nR,ve.Simple=vZ;var Co=U.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(f){return f.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(f){return f&&f.removeLayer(this),this},getPane:function(f){return this._map.getPane(f?this.options[f]||f:this.options.pane)},addInteractiveTarget:function(f){return this._map._targets[l(f)]=this,this},removeInteractiveTarget:function(f){return delete this._map._targets[l(f)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(f){var g=f.target;if(g.hasLayer(this)){if(this._map=g,this._zoomAnimated=g._zoomAnimated,this.getEvents){var k=this.getEvents();g.on(k,this),this.once("remove",function(){g.off(k,this)},this)}this.onAdd(g),this.fire("add"),g.fire("layeradd",{layer:this})}}});Bt.include({addLayer:function(f){if(!f._layerAdd)throw new Error("The provided object is not a Layer.");var g=l(f);return this._layers[g]?this:(this._layers[g]=f,f._mapToAdd=this,f.beforeAdd&&f.beforeAdd(this),this.whenReady(f._layerAdd,f),this)},removeLayer:function(f){var g=l(f);return this._layers[g]?(this._loaded&&f.onRemove(this),delete this._layers[g],this._loaded&&(this.fire("layerremove",{layer:f}),f.fire("remove")),f._map=f._mapToAdd=null,this):this},hasLayer:function(f){return l(f)in this._layers},eachLayer:function(f,g){for(var k in this._layers)f.call(g,this._layers[k]);return this},_addLayers:function(f){f=f?E(f)?f:[f]:[];for(var g=0,k=f.length;g<k;g++)this.addLayer(f[g])},_addZoomLimit:function(f){(!isNaN(f.options.maxZoom)||!isNaN(f.options.minZoom))&&(this._zoomBoundLayers[l(f)]=f,this._updateZoomLevels())},_removeZoomLimit:function(f){var g=l(f);this._zoomBoundLayers[g]&&(delete this._zoomBoundLayers[g],this._updateZoomLevels())},_updateZoomLevels:function(){var f=1/0,g=-1/0,k=this._getZoomSpan();for(var _ in this._zoomBoundLayers){var $=this._zoomBoundLayers[_].options;f=$.minZoom===void 0?f:Math.min(f,$.minZoom),g=$.maxZoom===void 0?g:Math.max(g,$.maxZoom)}this._layersMaxZoom=g===-1/0?void 0:g,this._layersMinZoom=f===1/0?void 0:f,k!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var qd=Co.extend({initialize:function(f,g){v(this,g),this._layers={};var k,_;if(f)for(k=0,_=f.length;k<_;k++)this.addLayer(f[k])},addLayer:function(f){var g=this.getLayerId(f);return this._layers[g]=f,this._map&&this._map.addLayer(f),this},removeLayer:function(f){var g=f in this._layers?f:this.getLayerId(f);return this._map&&this._layers[g]&&this._map.removeLayer(this._layers[g]),delete this._layers[g],this},hasLayer:function(f){var g=typeof f=="number"?f:this.getLayerId(f);return g in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(f){var g=Array.prototype.slice.call(arguments,1),k,_;for(k in this._layers)_=this._layers[k],_[f]&&_[f].apply(_,g);return this},onAdd:function(f){this.eachLayer(f.addLayer,f)},onRemove:function(f){this.eachLayer(f.removeLayer,f)},eachLayer:function(f,g){for(var k in this._layers)f.call(g,this._layers[k]);return this},getLayer:function(f){return this._layers[f]},getLayers:function(){var f=[];return this.eachLayer(f.push,f),f},setZIndex:function(f){return this.invoke("setZIndex",f)},getLayerId:function(f){return l(f)}}),xZ=function(f,g){return new qd(f,g)},Ha=qd.extend({addLayer:function(f){return this.hasLayer(f)?this:(f.addEventParent(this),qd.prototype.addLayer.call(this,f),this.fire("layeradd",{layer:f}))},removeLayer:function(f){return this.hasLayer(f)?(f in this._layers&&(f=this._layers[f]),f.removeEventParent(this),qd.prototype.removeLayer.call(this,f),this.fire("layerremove",{layer:f})):this},setStyle:function(f){return this.invoke("setStyle",f)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var f=new H;for(var g in this._layers){var k=this._layers[g];f.extend(k.getBounds?k.getBounds():k.getLatLng())}return f}}),wZ=function(f,g){return new Ha(f,g)},Kd=z.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(f){v(this,f)},createIcon:function(f){return this._createIcon("icon",f)},createShadow:function(f){return this._createIcon("shadow",f)},_createIcon:function(f,g){var k=this._getIconUrl(f);if(!k){if(f==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var _=this._createImg(k,g&&g.tagName==="IMG"?g:null);return this._setIconStyles(_,f),(this.options.crossOrigin||this.options.crossOrigin==="")&&(_.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),_},_setIconStyles:function(f,g){var k=this.options,_=k[g+"Size"];typeof _=="number"&&(_=[_,_]);var $=J(_),O=J(g==="shadow"&&k.shadowAnchor||k.iconAnchor||$&&$.divideBy(2,!0));f.className="leaflet-marker-"+g+" "+(k.className||""),O&&(f.style.marginLeft=-O.x+"px",f.style.marginTop=-O.y+"px"),$&&(f.style.width=$.x+"px",f.style.height=$.y+"px")},_createImg:function(f,g){return g=g||document.createElement("img"),g.src=f,g},_getIconUrl:function(f){return Ze.retina&&this.options[f+"RetinaUrl"]||this.options[f+"Url"]}});function EZ(f){return new Kd(f)}var Im=Kd.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(f){return typeof Im.imagePath!="string"&&(Im.imagePath=this._detectIconPath()),(this.options.imagePath||Im.imagePath)+Kd.prototype._getIconUrl.call(this,f)},_stripUrl:function(f){var g=function(k,_,$){var O=_.exec(k);return O&&O[$]};return f=g(f,/^url\((['"])?(.+)\1\)$/,2),f&&g(f,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var f=Gt("div","leaflet-default-icon-path",document.body),g=km(f,"background-image")||km(f,"backgroundImage");if(document.body.removeChild(f),g=this._stripUrl(g),g)return g;var k=document.querySelector('link[href$="leaflet.css"]');return k?k.href.substring(0,k.href.length-11-1):""}}),rR=ia.extend({initialize:function(f){this._marker=f},addHooks:function(){var f=this._marker._icon;this._draggable||(this._draggable=new Gl(f,f,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),yt(f,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&sr(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(f){var g=this._marker,k=g._map,_=this._marker.options.autoPanSpeed,$=this._marker.options.autoPanPadding,O=hu(g._icon),Y=k.getPixelBounds(),ce=k.getPixelOrigin(),he=X(Y.min._subtract(ce).add($),Y.max._subtract(ce).subtract($));if(!he.contains(O)){var ke=J((Math.max(he.max.x,O.x)-he.max.x)/(Y.max.x-he.max.x)-(Math.min(he.min.x,O.x)-he.min.x)/(Y.min.x-he.min.x),(Math.max(he.max.y,O.y)-he.max.y)/(Y.max.y-he.max.y)-(Math.min(he.min.y,O.y)-he.min.y)/(Y.min.y-he.min.y)).multiplyBy(_);k.panBy(ke,{animate:!1}),this._draggable._newPos._add(ke),this._draggable._startPos._add(ke),dr(g._icon,this._draggable._newPos),this._onDrag(f),this._panRequest=D(this._adjustPan.bind(this,f))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(f){this._marker.options.autoPan&&(B(this._panRequest),this._panRequest=D(this._adjustPan.bind(this,f)))},_onDrag:function(f){var g=this._marker,k=g._shadow,_=hu(g._icon),$=g._map.layerPointToLatLng(_);k&&dr(k,_),g._latlng=$,f.latlng=$,f.oldLatLng=this._oldLatLng,g.fire("move",f).fire("drag",f)},_onDragEnd:function(f){B(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",f)}}),Wy=Co.extend({options:{icon:new Im,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(f,g){v(this,g),this._latlng=ae(f)},onAdd:function(f){this._zoomAnimated=this._zoomAnimated&&f.options.markerZoomAnimation,this._zoomAnimated&&f.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(f){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&f.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(f){var g=this._latlng;return this._latlng=ae(f),this.update(),this.fire("move",{oldLatLng:g,latlng:this._latlng})},setZIndexOffset:function(f){return this.options.zIndexOffset=f,this.update()},getIcon:function(){return this.options.icon},setIcon:function(f){return this.options.icon=f,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var f=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(f)}return this},_initIcon:function(){var f=this.options,g="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),k=f.icon.createIcon(this._icon),_=!1;k!==this._icon&&(this._icon&&this._removeIcon(),_=!0,f.title&&(k.title=f.title),k.tagName==="IMG"&&(k.alt=f.alt||"")),yt(k,g),f.keyboard&&(k.tabIndex="0",k.setAttribute("role","button")),this._icon=k,f.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ft(k,"focus",this._panOnFocus,this);var $=f.icon.createShadow(this._shadow),O=!1;$!==this._shadow&&(this._removeShadow(),O=!0),$&&(yt($,g),$.alt=""),this._shadow=$,f.opacity<1&&this._updateOpacity(),_&&this.getPane().appendChild(this._icon),this._initInteraction(),$&&O&&this.getPane(f.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&wn(this._icon,"focus",this._panOnFocus,this),Hn(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Hn(this._shadow),this._shadow=null},_setPos:function(f){this._icon&&dr(this._icon,f),this._shadow&&dr(this._shadow,f),this._zIndex=f.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(f){this._icon&&(this._icon.style.zIndex=this._zIndex+f)},_animateZoom:function(f){var g=this._map._latLngToNewLayerPoint(this._latlng,f.zoom,f.center).round();this._setPos(g)},_initInteraction:function(){if(this.options.interactive&&(yt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),rR)){var f=this.options.draggable;this.dragging&&(f=this.dragging.enabled(),this.dragging.disable()),this.dragging=new rR(this),f&&this.dragging.enable()}},setOpacity:function(f){return this.options.opacity=f,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var f=this.options.opacity;this._icon&&zi(this._icon,f),this._shadow&&zi(this._shadow,f)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var f=this._map;if(f){var g=this.options.icon.options,k=g.iconSize?J(g.iconSize):J(0,0),_=g.iconAnchor?J(g.iconAnchor):J(0,0);f.panInside(this._latlng,{paddingTopLeft:_,paddingBottomRight:k.subtract(_)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function kZ(f,g){return new Wy(f,g)}var Wl=Co.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(f){this._renderer=f.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(f){return v(this,f),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&f&&Object.prototype.hasOwnProperty.call(f,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),qy=Wl.extend({options:{fill:!0,radius:10},initialize:function(f,g){v(this,g),this._latlng=ae(f),this._radius=this.options.radius},setLatLng:function(f){var g=this._latlng;return this._latlng=ae(f),this.redraw(),this.fire("move",{oldLatLng:g,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(f){return this.options.radius=this._radius=f,this.redraw()},getRadius:function(){return this._radius},setStyle:function(f){var g=f&&f.radius||this._radius;return Wl.prototype.setStyle.call(this,f),this.setRadius(g),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var f=this._radius,g=this._radiusY||f,k=this._clickTolerance(),_=[f+k,g+k];this._pxBounds=new G(this._point.subtract(_),this._point.add(_))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(f){return f.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function NZ(f,g){return new qy(f,g)}var rE=qy.extend({initialize:function(f,g,k){if(typeof g=="number"&&(g=s({},k,{radius:g})),v(this,g),this._latlng=ae(f),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(f){return this._mRadius=f,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var f=[this._radius,this._radiusY||this._radius];return new H(this._map.layerPointToLatLng(this._point.subtract(f)),this._map.layerPointToLatLng(this._point.add(f)))},setStyle:Wl.prototype.setStyle,_project:function(){var f=this._latlng.lng,g=this._latlng.lat,k=this._map,_=k.options.crs;if(_.distance===Ce.distance){var $=Math.PI/180,O=this._mRadius/Ce.R/$,Y=k.project([g+O,f]),ce=k.project([g-O,f]),he=Y.add(ce).divideBy(2),ke=k.unproject(he).lat,Ve=Math.acos((Math.cos(O*$)-Math.sin(g*$)*Math.sin(ke*$))/(Math.cos(g*$)*Math.cos(ke*$)))/$;(isNaN(Ve)||Ve===0)&&(Ve=O/Math.cos(Math.PI/180*g)),this._point=he.subtract(k.getPixelOrigin()),this._radius=isNaN(Ve)?0:he.x-k.project([ke,f-Ve]).x,this._radiusY=he.y-Y.y}else{var it=_.unproject(_.project(this._latlng).subtract([this._mRadius,0]));this._point=k.latLngToLayerPoint(this._latlng),this._radius=this._point.x-k.latLngToLayerPoint(it).x}this._updateBounds()}});function CZ(f,g,k){return new rE(f,g,k)}var Ga=Wl.extend({options:{smoothFactor:1,noClip:!1},initialize:function(f,g){v(this,g),this._setLatLngs(f)},getLatLngs:function(){return this._latlngs},setLatLngs:function(f){return this._setLatLngs(f),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(f){for(var g=1/0,k=null,_=$m,$,O,Y=0,ce=this._parts.length;Y<ce;Y++)for(var he=this._parts[Y],ke=1,Ve=he.length;ke<Ve;ke++){$=he[ke-1],O=he[ke];var it=_(f,$,O,!0);it<g&&(g=it,k=_(f,$,O))}return k&&(k.distance=Math.sqrt(g)),k},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return tR(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(f,g){return g=g||this._defaultShape(),f=ae(f),g.push(f),this._bounds.extend(f),this.redraw()},_setLatLngs:function(f){this._bounds=new H,this._latlngs=this._convertLatLngs(f)},_defaultShape:function(){return Fi(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(f){for(var g=[],k=Fi(f),_=0,$=f.length;_<$;_++)k?(g[_]=ae(f[_]),this._bounds.extend(g[_])):g[_]=this._convertLatLngs(f[_]);return g},_project:function(){var f=new G;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,f),this._bounds.isValid()&&f.isValid()&&(this._rawPxBounds=f,this._updateBounds())},_updateBounds:function(){var f=this._clickTolerance(),g=new V(f,f);this._rawPxBounds&&(this._pxBounds=new G([this._rawPxBounds.min.subtract(g),this._rawPxBounds.max.add(g)]))},_projectLatlngs:function(f,g,k){var _=f[0]instanceof te,$=f.length,O,Y;if(_){for(Y=[],O=0;O<$;O++)Y[O]=this._map.latLngToLayerPoint(f[O]),k.extend(Y[O]);g.push(Y)}else for(O=0;O<$;O++)this._projectLatlngs(f[O],g,k)},_clipPoints:function(){var f=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(f))){if(this.options.noClip){this._parts=this._rings;return}var g=this._parts,k,_,$,O,Y,ce,he;for(k=0,$=0,O=this._rings.length;k<O;k++)for(he=this._rings[k],_=0,Y=he.length;_<Y-1;_++)ce=QA(he[_],he[_+1],f,_,!0),ce&&(g[$]=g[$]||[],g[$].push(ce[0]),(ce[1]!==he[_+1]||_===Y-2)&&(g[$].push(ce[1]),$++))}},_simplifyPoints:function(){for(var f=this._parts,g=this.options.smoothFactor,k=0,_=f.length;k<_;k++)f[k]=XA(f[k],g)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(f,g){var k,_,$,O,Y,ce,he=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(f))return!1;for(k=0,O=this._parts.length;k<O;k++)for(ce=this._parts[k],_=0,Y=ce.length,$=Y-1;_<Y;$=_++)if(!(!g&&_===0)&&YA(f,ce[$],ce[_])<=he)return!0;return!1}});function _Z(f,g){return new Ga(f,g)}Ga._flat=eR;var Zd=Ga.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return ZA(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(f){var g=Ga.prototype._convertLatLngs.call(this,f),k=g.length;return k>=2&&g[0]instanceof te&&g[0].equals(g[k-1])&&g.pop(),g},_setLatLngs:function(f){Ga.prototype._setLatLngs.call(this,f),Fi(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Fi(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var f=this._renderer._bounds,g=this.options.weight,k=new V(g,g);if(f=new G(f.min.subtract(k),f.max.add(k)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(f))){if(this.options.noClip){this._parts=this._rings;return}for(var _=0,$=this._rings.length,O;_<$;_++)O=KA(this._rings[_],f,!0),O.length&&this._parts.push(O)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(f){var g=!1,k,_,$,O,Y,ce,he,ke;if(!this._pxBounds||!this._pxBounds.contains(f))return!1;for(O=0,he=this._parts.length;O<he;O++)for(k=this._parts[O],Y=0,ke=k.length,ce=ke-1;Y<ke;ce=Y++)_=k[Y],$=k[ce],_.y>f.y!=$.y>f.y&&f.x<($.x-_.x)*(f.y-_.y)/($.y-_.y)+_.x&&(g=!g);return g||Ga.prototype._containsPoint.call(this,f,!0)}});function SZ(f,g){return new Zd(f,g)}var Wa=Ha.extend({initialize:function(f,g){v(this,g),this._layers={},f&&this.addData(f)},addData:function(f){var g=E(f)?f:f.features,k,_,$;if(g){for(k=0,_=g.length;k<_;k++)$=g[k],($.geometries||$.geometry||$.features||$.coordinates)&&this.addData($);return this}var O=this.options;if(O.filter&&!O.filter(f))return this;var Y=Ky(f,O);return Y?(Y.feature=Yy(f),Y.defaultOptions=Y.options,this.resetStyle(Y),O.onEachFeature&&O.onEachFeature(f,Y),this.addLayer(Y)):this},resetStyle:function(f){return f===void 0?this.eachLayer(this.resetStyle,this):(f.options=s({},f.defaultOptions),this._setLayerStyle(f,this.options.style),this)},setStyle:function(f){return this.eachLayer(function(g){this._setLayerStyle(g,f)},this)},_setLayerStyle:function(f,g){f.setStyle&&(typeof g=="function"&&(g=g(f.feature)),f.setStyle(g))}});function Ky(f,g){var k=f.type==="Feature"?f.geometry:f,_=k?k.coordinates:null,$=[],O=g&&g.pointToLayer,Y=g&&g.coordsToLatLng||sE,ce,he,ke,Ve;if(!_&&!k)return null;switch(k.type){case"Point":return ce=Y(_),sR(O,f,ce,g);case"MultiPoint":for(ke=0,Ve=_.length;ke<Ve;ke++)ce=Y(_[ke]),$.push(sR(O,f,ce,g));return new Ha($);case"LineString":case"MultiLineString":return he=Zy(_,k.type==="LineString"?0:1,Y),new Ga(he,g);case"Polygon":case"MultiPolygon":return he=Zy(_,k.type==="Polygon"?1:2,Y),new Zd(he,g);case"GeometryCollection":for(ke=0,Ve=k.geometries.length;ke<Ve;ke++){var it=Ky({geometry:k.geometries[ke],type:"Feature",properties:f.properties},g);it&&$.push(it)}return new Ha($);case"FeatureCollection":for(ke=0,Ve=k.features.length;ke<Ve;ke++){var $t=Ky(k.features[ke],g);$t&&$.push($t)}return new Ha($);default:throw new Error("Invalid GeoJSON object.")}}function sR(f,g,k,_){return f?f(g,k):new Wy(k,_&&_.markersInheritOptions&&_)}function sE(f){return new te(f[1],f[0],f[2])}function Zy(f,g,k){for(var _=[],$=0,O=f.length,Y;$<O;$++)Y=g?Zy(f[$],g-1,k):(k||sE)(f[$]),_.push(Y);return _}function iE(f,g){return f=ae(f),f.alt!==void 0?[m(f.lng,g),m(f.lat,g),m(f.alt,g)]:[m(f.lng,g),m(f.lat,g)]}function Xy(f,g,k,_){for(var $=[],O=0,Y=f.length;O<Y;O++)$.push(g?Xy(f[O],Fi(f[O])?0:g-1,k,_):iE(f[O],_));return!g&&k&&$.length>0&&$.push($[0].slice()),$}function Xd(f,g){return f.feature?s({},f.feature,{geometry:g}):Yy(g)}function Yy(f){return f.type==="Feature"||f.type==="FeatureCollection"?f:{type:"Feature",properties:{},geometry:f}}var oE={toGeoJSON:function(f){return Xd(this,{type:"Point",coordinates:iE(this.getLatLng(),f)})}};Wy.include(oE),rE.include(oE),qy.include(oE),Ga.include({toGeoJSON:function(f){var g=!Fi(this._latlngs),k=Xy(this._latlngs,g?1:0,!1,f);return Xd(this,{type:(g?"Multi":"")+"LineString",coordinates:k})}}),Zd.include({toGeoJSON:function(f){var g=!Fi(this._latlngs),k=g&&!Fi(this._latlngs[0]),_=Xy(this._latlngs,k?2:g?1:0,!0,f);return g||(_=[_]),Xd(this,{type:(k?"Multi":"")+"Polygon",coordinates:_})}}),qd.include({toMultiPoint:function(f){var g=[];return this.eachLayer(function(k){g.push(k.toGeoJSON(f).geometry.coordinates)}),Xd(this,{type:"MultiPoint",coordinates:g})},toGeoJSON:function(f){var g=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(g==="MultiPoint")return this.toMultiPoint(f);var k=g==="GeometryCollection",_=[];return this.eachLayer(function($){if($.toGeoJSON){var O=$.toGeoJSON(f);if(k)_.push(O.geometry);else{var Y=Yy(O);Y.type==="FeatureCollection"?_.push.apply(_,Y.features):_.push(Y)}}}),k?Xd(this,{geometries:_,type:"GeometryCollection"}):{type:"FeatureCollection",features:_}}});function iR(f,g){return new Wa(f,g)}var TZ=iR,Jy=Co.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(f,g,k){this._url=f,this._bounds=W(g),v(this,k)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(yt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Hn(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(f){return this.options.opacity=f,this._image&&this._updateOpacity(),this},setStyle:function(f){return f.opacity&&this.setOpacity(f.opacity),this},bringToFront:function(){return this._map&&Gd(this._image),this},bringToBack:function(){return this._map&&Wd(this._image),this},setUrl:function(f){return this._url=f,this._image&&(this._image.src=f),this},setBounds:function(f){return this._bounds=W(f),this._map&&this._reset(),this},getEvents:function(){var f={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(f.zoomanim=this._animateZoom),f},setZIndex:function(f){return this.options.zIndex=f,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var f=this._url.tagName==="IMG",g=this._image=f?this._url:Gt("img");if(yt(g,"leaflet-image-layer"),this._zoomAnimated&&yt(g,"leaflet-zoom-animated"),this.options.className&&yt(g,this.options.className),g.onselectstart=h,g.onmousemove=h,g.onload=o(this.fire,this,"load"),g.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(g.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),f){this._url=g.src;return}g.src=this._url,g.alt=this.options.alt},_animateZoom:function(f){var g=this._map.getZoomScale(f.zoom),k=this._map._latLngBoundsToNewLayerBounds(this._bounds,f.zoom,f.center).min;du(this._image,k,g)},_reset:function(){var f=this._image,g=new G(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),k=g.getSize();dr(f,g.min),f.style.width=k.x+"px",f.style.height=k.y+"px"},_updateOpacity:function(){zi(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var f=this.options.errorOverlayUrl;f&&this._url!==f&&(this._url=f,this._image.src=f)},getCenter:function(){return this._bounds.getCenter()}}),$Z=function(f,g,k){return new Jy(f,g,k)},oR=Jy.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var f=this._url.tagName==="VIDEO",g=this._image=f?this._url:Gt("video");if(yt(g,"leaflet-image-layer"),this._zoomAnimated&&yt(g,"leaflet-zoom-animated"),this.options.className&&yt(g,this.options.className),g.onselectstart=h,g.onmousemove=h,g.onloadeddata=o(this.fire,this,"load"),f){for(var k=g.getElementsByTagName("source"),_=[],$=0;$<k.length;$++)_.push(k[$].src);this._url=k.length>0?_:[g.src];return}E(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(g.style,"objectFit")&&(g.style.objectFit="fill"),g.autoplay=!!this.options.autoplay,g.loop=!!this.options.loop,g.muted=!!this.options.muted,g.playsInline=!!this.options.playsInline;for(var O=0;O<this._url.length;O++){var Y=Gt("source");Y.src=this._url[O],g.appendChild(Y)}}});function IZ(f,g,k){return new oR(f,g,k)}var aR=Jy.extend({_initImage:function(){var f=this._image=this._url;yt(f,"leaflet-image-layer"),this._zoomAnimated&&yt(f,"leaflet-zoom-animated"),this.options.className&&yt(f,this.options.className),f.onselectstart=h,f.onmousemove=h}});function AZ(f,g,k){return new aR(f,g,k)}var oa=Co.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(f,g){f&&(f instanceof te||E(f))?(this._latlng=ae(f),v(this,g)):(v(this,f),this._source=g),this.options.content&&(this._content=this.options.content)},openOn:function(f){return f=arguments.length?f:this._source._map,f.hasLayer(this)||f.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(f){return this._map?this.close():(arguments.length?this._source=f:f=this._source,this._prepareOpen(),this.openOn(f._map)),this},onAdd:function(f){this._zoomAnimated=f._zoomAnimated,this._container||this._initLayout(),f._fadeAnimated&&zi(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),f._fadeAnimated&&zi(this._container,1),this.bringToFront(),this.options.interactive&&(yt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(f){f._fadeAnimated?(zi(this._container,0),this._removeTimeout=setTimeout(o(Hn,void 0,this._container),200)):Hn(this._container),this.options.interactive&&(sr(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(f){return this._latlng=ae(f),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(f){return this._content=f,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var f={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(f.zoomanim=this._animateZoom),f},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Gd(this._container),this},bringToBack:function(){return this._map&&Wd(this._container),this},_prepareOpen:function(f){var g=this._source;if(!g._map)return!1;if(g instanceof Ha){g=null;var k=this._source._layers;for(var _ in k)if(k[_]._map){g=k[_];break}if(!g)return!1;this._source=g}if(!f)if(g.getCenter)f=g.getCenter();else if(g.getLatLng)f=g.getLatLng();else if(g.getBounds)f=g.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(f),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var f=this._contentNode,g=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof g=="string")f.innerHTML=g;else{for(;f.hasChildNodes();)f.removeChild(f.firstChild);f.appendChild(g)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var f=this._map.latLngToLayerPoint(this._latlng),g=J(this.options.offset),k=this._getAnchor();this._zoomAnimated?dr(this._container,f.add(k)):g=g.add(f).add(k);var _=this._containerBottom=-g.y,$=this._containerLeft=-Math.round(this._containerWidth/2)+g.x;this._container.style.bottom=_+"px",this._container.style.left=$+"px"}},_getAnchor:function(){return[0,0]}});Bt.include({_initOverlay:function(f,g,k,_){var $=g;return $ instanceof f||($=new f(_).setContent(g)),k&&$.setLatLng(k),$}}),Co.include({_initOverlay:function(f,g,k,_){var $=k;return $ instanceof f?(v($,_),$._source=this):($=g&&!_?g:new f(_,this),$.setContent(k)),$}});var Qy=oa.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(f){return f=arguments.length?f:this._source._map,!f.hasLayer(this)&&f._popup&&f._popup.options.autoClose&&f.removeLayer(f._popup),f._popup=this,oa.prototype.openOn.call(this,f)},onAdd:function(f){oa.prototype.onAdd.call(this,f),f.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Wl||this._source.on("preclick",fu))},onRemove:function(f){oa.prototype.onRemove.call(this,f),f.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Wl||this._source.off("preclick",fu))},getEvents:function(){var f=oa.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(f.preclick=this.close),this.options.keepInView&&(f.moveend=this._adjustPan),f},_initLayout:function(){var f="leaflet-popup",g=this._container=Gt("div",f+" "+(this.options.className||"")+" leaflet-zoom-animated"),k=this._wrapper=Gt("div",f+"-content-wrapper",g);if(this._contentNode=Gt("div",f+"-content",k),Sm(g),Z2(this._contentNode),ft(g,"contextmenu",fu),this._tipContainer=Gt("div",f+"-tip-container",g),this._tip=Gt("div",f+"-tip",this._tipContainer),this.options.closeButton){var _=this._closeButton=Gt("a",f+"-close-button",g);_.setAttribute("role","button"),_.setAttribute("aria-label","Close popup"),_.href="#close",_.innerHTML='<span aria-hidden="true">&#215;</span>',ft(_,"click",function($){ts($),this.close()},this)}},_updateLayout:function(){var f=this._contentNode,g=f.style;g.width="",g.whiteSpace="nowrap";var k=f.offsetWidth;k=Math.min(k,this.options.maxWidth),k=Math.max(k,this.options.minWidth),g.width=k+1+"px",g.whiteSpace="",g.height="";var _=f.offsetHeight,$=this.options.maxHeight,O="leaflet-popup-scrolled";$&&_>$?(g.height=$+"px",yt(f,O)):sr(f,O),this._containerWidth=this._container.offsetWidth},_animateZoom:function(f){var g=this._map._latLngToNewLayerPoint(this._latlng,f.zoom,f.center),k=this._getAnchor();dr(this._container,g.add(k))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var f=this._map,g=parseInt(km(this._container,"marginBottom"),10)||0,k=this._container.offsetHeight+g,_=this._containerWidth,$=new V(this._containerLeft,-k-this._containerBottom);$._add(hu(this._container));var O=f.layerPointToContainerPoint($),Y=J(this.options.autoPanPadding),ce=J(this.options.autoPanPaddingTopLeft||Y),he=J(this.options.autoPanPaddingBottomRight||Y),ke=f.getSize(),Ve=0,it=0;O.x+_+he.x>ke.x&&(Ve=O.x+_-ke.x+he.x),O.x-Ve-ce.x<0&&(Ve=O.x-ce.x),O.y+k+he.y>ke.y&&(it=O.y+k-ke.y+he.y),O.y-it-ce.y<0&&(it=O.y-ce.y),(Ve||it)&&(this.options.keepInView&&(this._autopanning=!0),f.fire("autopanstart").panBy([Ve,it]))}},_getAnchor:function(){return J(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),RZ=function(f,g){return new Qy(f,g)};Bt.mergeOptions({closePopupOnClick:!0}),Bt.include({openPopup:function(f,g,k){return this._initOverlay(Qy,f,g,k).openOn(this),this},closePopup:function(f){return f=arguments.length?f:this._popup,f&&f.close(),this}}),Co.include({bindPopup:function(f,g){return this._popup=this._initOverlay(Qy,this._popup,f,g),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(f){return this._popup&&(this instanceof Ha||(this._popup._source=this),this._popup._prepareOpen(f||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(f){return this._popup&&this._popup.setContent(f),this},getPopup:function(){return this._popup},_openPopup:function(f){if(!(!this._popup||!this._map)){mu(f);var g=f.layer||f.target;if(this._popup._source===g&&!(g instanceof Wl)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(f.latlng);return}this._popup._source=g,this.openPopup(f.latlng)}},_movePopup:function(f){this._popup.setLatLng(f.latlng)},_onKeyPress:function(f){f.originalEvent.keyCode===13&&this._openPopup(f)}});var eb=oa.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(f){oa.prototype.onAdd.call(this,f),this.setOpacity(this.options.opacity),f.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(f){oa.prototype.onRemove.call(this,f),f.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var f=oa.prototype.getEvents.call(this);return this.options.permanent||(f.preclick=this.close),f},_initLayout:function(){var f="leaflet-tooltip",g=f+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Gt("div",g),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+l(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(f){var g,k,_=this._map,$=this._container,O=_.latLngToContainerPoint(_.getCenter()),Y=_.layerPointToContainerPoint(f),ce=this.options.direction,he=$.offsetWidth,ke=$.offsetHeight,Ve=J(this.options.offset),it=this._getAnchor();ce==="top"?(g=he/2,k=ke):ce==="bottom"?(g=he/2,k=0):ce==="center"?(g=he/2,k=ke/2):ce==="right"?(g=0,k=ke/2):ce==="left"?(g=he,k=ke/2):Y.x<O.x?(ce="right",g=0,k=ke/2):(ce="left",g=he+(Ve.x+it.x)*2,k=ke/2),f=f.subtract(J(g,k,!0)).add(Ve).add(it),sr($,"leaflet-tooltip-right"),sr($,"leaflet-tooltip-left"),sr($,"leaflet-tooltip-top"),sr($,"leaflet-tooltip-bottom"),yt($,"leaflet-tooltip-"+ce),dr($,f)},_updatePosition:function(){var f=this._map.latLngToLayerPoint(this._latlng);this._setPosition(f)},setOpacity:function(f){this.options.opacity=f,this._container&&zi(this._container,f)},_animateZoom:function(f){var g=this._map._latLngToNewLayerPoint(this._latlng,f.zoom,f.center);this._setPosition(g)},_getAnchor:function(){return J(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),PZ=function(f,g){return new eb(f,g)};Bt.include({openTooltip:function(f,g,k){return this._initOverlay(eb,f,g,k).openOn(this),this},closeTooltip:function(f){return f.close(),this}}),Co.include({bindTooltip:function(f,g){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(eb,this._tooltip,f,g),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(f){if(!(!f&&this._tooltipHandlersAdded)){var g=f?"off":"on",k={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?k.add=this._openTooltip:(k.mouseover=this._openTooltip,k.mouseout=this.closeTooltip,k.click=this._openTooltip,this._map?this._addFocusListeners():k.add=this._addFocusListeners),this._tooltip.options.sticky&&(k.mousemove=this._moveTooltip),this[g](k),this._tooltipHandlersAdded=!f}},openTooltip:function(f){return this._tooltip&&(this instanceof Ha||(this._tooltip._source=this),this._tooltip._prepareOpen(f)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(f){return this._tooltip&&this._tooltip.setContent(f),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(f){var g=typeof f.getElement=="function"&&f.getElement();g&&(ft(g,"focus",function(){this._tooltip._source=f,this.openTooltip()},this),ft(g,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(f){var g=typeof f.getElement=="function"&&f.getElement();g&&g.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(f){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var g=this;this._map.once("moveend",function(){g._openOnceFlag=!1,g._openTooltip(f)});return}this._tooltip._source=f.layer||f.target,this.openTooltip(this._tooltip.options.sticky?f.latlng:void 0)}},_moveTooltip:function(f){var g=f.latlng,k,_;this._tooltip.options.sticky&&f.originalEvent&&(k=this._map.mouseEventToContainerPoint(f.originalEvent),_=this._map.containerPointToLayerPoint(k),g=this._map.layerPointToLatLng(_)),this._tooltip.setLatLng(g)}});var lR=Kd.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(f){var g=f&&f.tagName==="DIV"?f:document.createElement("div"),k=this.options;if(k.html instanceof Element?(By(g),g.appendChild(k.html)):g.innerHTML=k.html!==!1?k.html:"",k.bgPos){var _=J(k.bgPos);g.style.backgroundPosition=-_.x+"px "+-_.y+"px"}return this._setIconStyles(g,"icon"),g},createShadow:function(){return null}});function DZ(f){return new lR(f)}Kd.Default=Im;var Am=Co.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Ze.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(f){v(this,f)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(f){f._addZoomLimit(this)},onRemove:function(f){this._removeAllTiles(),Hn(this._container),f._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Gd(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Wd(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(f){return this.options.opacity=f,this._updateOpacity(),this},setZIndex:function(f){return this.options.zIndex=f,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var f=this._clampZoom(this._map.getZoom());f!==this._tileZoom&&(this._tileZoom=f,this._updateLevels()),this._update()}return this},getEvents:function(){var f={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=c(this._onMoveEnd,this.options.updateInterval,this)),f.move=this._onMove),this._zoomAnimated&&(f.zoomanim=this._animateZoom),f},createTile:function(){return document.createElement("div")},getTileSize:function(){var f=this.options.tileSize;return f instanceof V?f:new V(f,f)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(f){for(var g=this.getPane().children,k=-f(-1/0,1/0),_=0,$=g.length,O;_<$;_++)O=g[_].style.zIndex,g[_]!==this._container&&O&&(k=f(k,+O));isFinite(k)&&(this.options.zIndex=k+f(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Ze.ielt9){zi(this._container,this.options.opacity);var f=+new Date,g=!1,k=!1;for(var _ in this._tiles){var $=this._tiles[_];if(!(!$.current||!$.loaded)){var O=Math.min(1,(f-$.loaded)/200);zi($.el,O),O<1?g=!0:($.active?k=!0:this._onOpaqueTile($),$.active=!0)}}k&&!this._noPrune&&this._pruneTiles(),g&&(B(this._fadeFrame),this._fadeFrame=D(this._updateOpacity,this))}},_onOpaqueTile:h,_initContainer:function(){this._container||(this._container=Gt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var f=this._tileZoom,g=this.options.maxZoom;if(f!==void 0){for(var k in this._levels)k=Number(k),this._levels[k].el.children.length||k===f?(this._levels[k].el.style.zIndex=g-Math.abs(f-k),this._onUpdateLevel(k)):(Hn(this._levels[k].el),this._removeTilesAtZoom(k),this._onRemoveLevel(k),delete this._levels[k]);var _=this._levels[f],$=this._map;return _||(_=this._levels[f]={},_.el=Gt("div","leaflet-tile-container leaflet-zoom-animated",this._container),_.el.style.zIndex=g,_.origin=$.project($.unproject($.getPixelOrigin()),f).round(),_.zoom=f,this._setZoomTransform(_,$.getCenter(),$.getZoom()),h(_.el.offsetWidth),this._onCreateLevel(_)),this._level=_,_}},_onUpdateLevel:h,_onRemoveLevel:h,_onCreateLevel:h,_pruneTiles:function(){if(this._map){var f,g,k=this._map.getZoom();if(k>this.options.maxZoom||k<this.options.minZoom){this._removeAllTiles();return}for(f in this._tiles)g=this._tiles[f],g.retain=g.current;for(f in this._tiles)if(g=this._tiles[f],g.current&&!g.active){var _=g.coords;this._retainParent(_.x,_.y,_.z,_.z-5)||this._retainChildren(_.x,_.y,_.z,_.z+2)}for(f in this._tiles)this._tiles[f].retain||this._removeTile(f)}},_removeTilesAtZoom:function(f){for(var g in this._tiles)this._tiles[g].coords.z===f&&this._removeTile(g)},_removeAllTiles:function(){for(var f in this._tiles)this._removeTile(f)},_invalidateAll:function(){for(var f in this._levels)Hn(this._levels[f].el),this._onRemoveLevel(Number(f)),delete this._levels[f];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(f,g,k,_){var $=Math.floor(f/2),O=Math.floor(g/2),Y=k-1,ce=new V(+$,+O);ce.z=+Y;var he=this._tileCoordsToKey(ce),ke=this._tiles[he];return ke&&ke.active?(ke.retain=!0,!0):(ke&&ke.loaded&&(ke.retain=!0),Y>_?this._retainParent($,O,Y,_):!1)},_retainChildren:function(f,g,k,_){for(var $=2*f;$<2*f+2;$++)for(var O=2*g;O<2*g+2;O++){var Y=new V($,O);Y.z=k+1;var ce=this._tileCoordsToKey(Y),he=this._tiles[ce];if(he&&he.active){he.retain=!0;continue}else he&&he.loaded&&(he.retain=!0);k+1<_&&this._retainChildren($,O,k+1,_)}},_resetView:function(f){var g=f&&(f.pinch||f.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),g,g)},_animateZoom:function(f){this._setView(f.center,f.zoom,!0,f.noUpdate)},_clampZoom:function(f){var g=this.options;return g.minNativeZoom!==void 0&&f<g.minNativeZoom?g.minNativeZoom:g.maxNativeZoom!==void 0&&g.maxNativeZoom<f?g.maxNativeZoom:f},_setView:function(f,g,k,_){var $=Math.round(g);this.options.maxZoom!==void 0&&$>this.options.maxZoom||this.options.minZoom!==void 0&&$<this.options.minZoom?$=void 0:$=this._clampZoom($);var O=this.options.updateWhenZooming&&$!==this._tileZoom;(!_||O)&&(this._tileZoom=$,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),$!==void 0&&this._update(f),k||this._pruneTiles(),this._noPrune=!!k),this._setZoomTransforms(f,g)},_setZoomTransforms:function(f,g){for(var k in this._levels)this._setZoomTransform(this._levels[k],f,g)},_setZoomTransform:function(f,g,k){var _=this._map.getZoomScale(k,f.zoom),$=f.origin.multiplyBy(_).subtract(this._map._getNewPixelOrigin(g,k)).round();Ze.any3d?du(f.el,$,_):dr(f.el,$)},_resetGrid:function(){var f=this._map,g=f.options.crs,k=this._tileSize=this.getTileSize(),_=this._tileZoom,$=this._map.getPixelWorldBounds(this._tileZoom);$&&(this._globalTileRange=this._pxBoundsToTileRange($)),this._wrapX=g.wrapLng&&!this.options.noWrap&&[Math.floor(f.project([0,g.wrapLng[0]],_).x/k.x),Math.ceil(f.project([0,g.wrapLng[1]],_).x/k.y)],this._wrapY=g.wrapLat&&!this.options.noWrap&&[Math.floor(f.project([g.wrapLat[0],0],_).y/k.x),Math.ceil(f.project([g.wrapLat[1],0],_).y/k.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(f){var g=this._map,k=g._animatingZoom?Math.max(g._animateToZoom,g.getZoom()):g.getZoom(),_=g.getZoomScale(k,this._tileZoom),$=g.project(f,this._tileZoom).floor(),O=g.getSize().divideBy(_*2);return new G($.subtract(O),$.add(O))},_update:function(f){var g=this._map;if(g){var k=this._clampZoom(g.getZoom());if(f===void 0&&(f=g.getCenter()),this._tileZoom!==void 0){var _=this._getTiledPixelBounds(f),$=this._pxBoundsToTileRange(_),O=$.getCenter(),Y=[],ce=this.options.keepBuffer,he=new G($.getBottomLeft().subtract([ce,-ce]),$.getTopRight().add([ce,-ce]));if(!(isFinite($.min.x)&&isFinite($.min.y)&&isFinite($.max.x)&&isFinite($.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var ke in this._tiles){var Ve=this._tiles[ke].coords;(Ve.z!==this._tileZoom||!he.contains(new V(Ve.x,Ve.y)))&&(this._tiles[ke].current=!1)}if(Math.abs(k-this._tileZoom)>1){this._setView(f,k);return}for(var it=$.min.y;it<=$.max.y;it++)for(var $t=$.min.x;$t<=$.max.x;$t++){var Rs=new V($t,it);if(Rs.z=this._tileZoom,!!this._isValidTile(Rs)){var zr=this._tiles[this._tileCoordsToKey(Rs)];zr?zr.current=!0:Y.push(Rs)}}if(Y.sort(function(Xs,Jd){return Xs.distanceTo(O)-Jd.distanceTo(O)}),Y.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Bi=document.createDocumentFragment();for($t=0;$t<Y.length;$t++)this._addTile(Y[$t],Bi);this._level.el.appendChild(Bi)}}}},_isValidTile:function(f){var g=this._map.options.crs;if(!g.infinite){var k=this._globalTileRange;if(!g.wrapLng&&(f.x<k.min.x||f.x>k.max.x)||!g.wrapLat&&(f.y<k.min.y||f.y>k.max.y))return!1}if(!this.options.bounds)return!0;var _=this._tileCoordsToBounds(f);return W(this.options.bounds).overlaps(_)},_keyToBounds:function(f){return this._tileCoordsToBounds(this._keyToTileCoords(f))},_tileCoordsToNwSe:function(f){var g=this._map,k=this.getTileSize(),_=f.scaleBy(k),$=_.add(k),O=g.unproject(_,f.z),Y=g.unproject($,f.z);return[O,Y]},_tileCoordsToBounds:function(f){var g=this._tileCoordsToNwSe(f),k=new H(g[0],g[1]);return this.options.noWrap||(k=this._map.wrapLatLngBounds(k)),k},_tileCoordsToKey:function(f){return f.x+":"+f.y+":"+f.z},_keyToTileCoords:function(f){var g=f.split(":"),k=new V(+g[0],+g[1]);return k.z=+g[2],k},_removeTile:function(f){var g=this._tiles[f];g&&(Hn(g.el),delete this._tiles[f],this.fire("tileunload",{tile:g.el,coords:this._keyToTileCoords(f)}))},_initTile:function(f){yt(f,"leaflet-tile");var g=this.getTileSize();f.style.width=g.x+"px",f.style.height=g.y+"px",f.onselectstart=h,f.onmousemove=h,Ze.ielt9&&this.options.opacity<1&&zi(f,this.options.opacity)},_addTile:function(f,g){var k=this._getTilePos(f),_=this._tileCoordsToKey(f),$=this.createTile(this._wrapCoords(f),o(this._tileReady,this,f));this._initTile($),this.createTile.length<2&&D(o(this._tileReady,this,f,null,$)),dr($,k),this._tiles[_]={el:$,coords:f,current:!0},g.appendChild($),this.fire("tileloadstart",{tile:$,coords:f})},_tileReady:function(f,g,k){g&&this.fire("tileerror",{error:g,tile:k,coords:f});var _=this._tileCoordsToKey(f);k=this._tiles[_],k&&(k.loaded=+new Date,this._map._fadeAnimated?(zi(k.el,0),B(this._fadeFrame),this._fadeFrame=D(this._updateOpacity,this)):(k.active=!0,this._pruneTiles()),g||(yt(k.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:k.el,coords:f})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Ze.ielt9||!this._map._fadeAnimated?D(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(f){return f.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(f){var g=new V(this._wrapX?u(f.x,this._wrapX):f.x,this._wrapY?u(f.y,this._wrapY):f.y);return g.z=f.z,g},_pxBoundsToTileRange:function(f){var g=this.getTileSize();return new G(f.min.unscaleBy(g).floor(),f.max.unscaleBy(g).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var f in this._tiles)if(!this._tiles[f].loaded)return!1;return!0}});function OZ(f){return new Am(f)}var Yd=Am.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(f,g){this._url=f,g=v(this,g),g.detectRetina&&Ze.retina&&g.maxZoom>0?(g.tileSize=Math.floor(g.tileSize/2),g.zoomReverse?(g.zoomOffset--,g.minZoom=Math.min(g.maxZoom,g.minZoom+1)):(g.zoomOffset++,g.maxZoom=Math.max(g.minZoom,g.maxZoom-1)),g.minZoom=Math.max(0,g.minZoom)):g.zoomReverse?g.minZoom=Math.min(g.maxZoom,g.minZoom):g.maxZoom=Math.max(g.minZoom,g.maxZoom),typeof g.subdomains=="string"&&(g.subdomains=g.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(f,g){return this._url===f&&g===void 0&&(g=!0),this._url=f,g||this.redraw(),this},createTile:function(f,g){var k=document.createElement("img");return ft(k,"load",o(this._tileOnLoad,this,g,k)),ft(k,"error",o(this._tileOnError,this,g,k)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(k.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(k.referrerPolicy=this.options.referrerPolicy),k.alt="",k.src=this.getTileUrl(f),k},getTileUrl:function(f){var g={r:Ze.retina?"@2x":"",s:this._getSubdomain(f),x:f.x,y:f.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var k=this._globalTileRange.max.y-f.y;this.options.tms&&(g.y=k),g["-y"]=k}return w(this._url,s(g,this.options))},_tileOnLoad:function(f,g){Ze.ielt9?setTimeout(o(f,this,null,g),0):f(null,g)},_tileOnError:function(f,g,k){var _=this.options.errorTileUrl;_&&g.getAttribute("src")!==_&&(g.src=_),f(k,g)},_onTileRemove:function(f){f.tile.onload=null},_getZoomForUrl:function(){var f=this._tileZoom,g=this.options.maxZoom,k=this.options.zoomReverse,_=this.options.zoomOffset;return k&&(f=g-f),f+_},_getSubdomain:function(f){var g=Math.abs(f.x+f.y)%this.options.subdomains.length;return this.options.subdomains[g]},_abortLoading:function(){var f,g;for(f in this._tiles)if(this._tiles[f].coords.z!==this._tileZoom&&(g=this._tiles[f].el,g.onload=h,g.onerror=h,!g.complete)){g.src=C;var k=this._tiles[f].coords;Hn(g),delete this._tiles[f],this.fire("tileabort",{tile:g,coords:k})}},_removeTile:function(f){var g=this._tiles[f];if(g)return g.el.setAttribute("src",C),Am.prototype._removeTile.call(this,f)},_tileReady:function(f,g,k){if(!(!this._map||k&&k.getAttribute("src")===C))return Am.prototype._tileReady.call(this,f,g,k)}});function cR(f,g){return new Yd(f,g)}var uR=Yd.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(f,g){this._url=f;var k=s({},this.defaultWmsParams);for(var _ in g)_ in this.options||(k[_]=g[_]);g=v(this,g);var $=g.detectRetina&&Ze.retina?2:1,O=this.getTileSize();k.width=O.x*$,k.height=O.y*$,this.wmsParams=k},onAdd:function(f){this._crs=this.options.crs||f.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var g=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[g]=this._crs.code,Yd.prototype.onAdd.call(this,f)},getTileUrl:function(f){var g=this._tileCoordsToNwSe(f),k=this._crs,_=X(k.project(g[0]),k.project(g[1])),$=_.min,O=_.max,Y=(this._wmsVersion>=1.3&&this._crs===nR?[$.y,$.x,O.y,O.x]:[$.x,$.y,O.x,O.y]).join(","),ce=Yd.prototype.getTileUrl.call(this,f);return ce+x(this.wmsParams,ce,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+Y},setParams:function(f,g){return s(this.wmsParams,f),g||this.redraw(),this}});function LZ(f,g){return new uR(f,g)}Yd.WMS=uR,cR.wms=LZ;var qa=Co.extend({options:{padding:.1},initialize:function(f){v(this,f),l(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),yt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var f={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(f.zoomanim=this._onAnimZoom),f},_onAnimZoom:function(f){this._updateTransform(f.center,f.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(f,g){var k=this._map.getZoomScale(g,this._zoom),_=this._map.getSize().multiplyBy(.5+this.options.padding),$=this._map.project(this._center,g),O=_.multiplyBy(-k).add($).subtract(this._map._getNewPixelOrigin(f,g));Ze.any3d?du(this._container,O,k):dr(this._container,O)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var f in this._layers)this._layers[f]._reset()},_onZoomEnd:function(){for(var f in this._layers)this._layers[f]._project()},_updatePaths:function(){for(var f in this._layers)this._layers[f]._update()},_update:function(){var f=this.options.padding,g=this._map.getSize(),k=this._map.containerPointToLayerPoint(g.multiplyBy(-f)).round();this._bounds=new G(k,k.add(g.multiplyBy(1+f*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),dR=qa.extend({options:{tolerance:0},getEvents:function(){var f=qa.prototype.getEvents.call(this);return f.viewprereset=this._onViewPreReset,f},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){qa.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var f=this._container=document.createElement("canvas");ft(f,"mousemove",this._onMouseMove,this),ft(f,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ft(f,"mouseout",this._handleMouseOut,this),f._leaflet_disable_events=!0,this._ctx=f.getContext("2d")},_destroyContainer:function(){B(this._redrawRequest),delete this._ctx,Hn(this._container),wn(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var f;this._redrawBounds=null;for(var g in this._layers)f=this._layers[g],f._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){qa.prototype._update.call(this);var f=this._bounds,g=this._container,k=f.getSize(),_=Ze.retina?2:1;dr(g,f.min),g.width=_*k.x,g.height=_*k.y,g.style.width=k.x+"px",g.style.height=k.y+"px",Ze.retina&&this._ctx.scale(2,2),this._ctx.translate(-f.min.x,-f.min.y),this.fire("update")}},_reset:function(){qa.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(f){this._updateDashArray(f),this._layers[l(f)]=f;var g=f._order={layer:f,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=g),this._drawLast=g,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(f){this._requestRedraw(f)},_removePath:function(f){var g=f._order,k=g.next,_=g.prev;k?k.prev=_:this._drawLast=_,_?_.next=k:this._drawFirst=k,delete f._order,delete this._layers[l(f)],this._requestRedraw(f)},_updatePath:function(f){this._extendRedrawBounds(f),f._project(),f._update(),this._requestRedraw(f)},_updateStyle:function(f){this._updateDashArray(f),this._requestRedraw(f)},_updateDashArray:function(f){if(typeof f.options.dashArray=="string"){var g=f.options.dashArray.split(/[, ]+/),k=[],_,$;for($=0;$<g.length;$++){if(_=Number(g[$]),isNaN(_))return;k.push(_)}f.options._dashArray=k}else f.options._dashArray=f.options.dashArray},_requestRedraw:function(f){this._map&&(this._extendRedrawBounds(f),this._redrawRequest=this._redrawRequest||D(this._redraw,this))},_extendRedrawBounds:function(f){if(f._pxBounds){var g=(f.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new G,this._redrawBounds.extend(f._pxBounds.min.subtract([g,g])),this._redrawBounds.extend(f._pxBounds.max.add([g,g]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var f=this._redrawBounds;if(f){var g=f.getSize();this._ctx.clearRect(f.min.x,f.min.y,g.x,g.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var f,g=this._redrawBounds;if(this._ctx.save(),g){var k=g.getSize();this._ctx.beginPath(),this._ctx.rect(g.min.x,g.min.y,k.x,k.y),this._ctx.clip()}this._drawing=!0;for(var _=this._drawFirst;_;_=_.next)f=_.layer,(!g||f._pxBounds&&f._pxBounds.intersects(g))&&f._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(f,g){if(this._drawing){var k,_,$,O,Y=f._parts,ce=Y.length,he=this._ctx;if(ce){for(he.beginPath(),k=0;k<ce;k++){for(_=0,$=Y[k].length;_<$;_++)O=Y[k][_],he[_?"lineTo":"moveTo"](O.x,O.y);g&&he.closePath()}this._fillStroke(he,f)}}},_updateCircle:function(f){if(!(!this._drawing||f._empty())){var g=f._point,k=this._ctx,_=Math.max(Math.round(f._radius),1),$=(Math.max(Math.round(f._radiusY),1)||_)/_;$!==1&&(k.save(),k.scale(1,$)),k.beginPath(),k.arc(g.x,g.y/$,_,0,Math.PI*2,!1),$!==1&&k.restore(),this._fillStroke(k,f)}},_fillStroke:function(f,g){var k=g.options;k.fill&&(f.globalAlpha=k.fillOpacity,f.fillStyle=k.fillColor||k.color,f.fill(k.fillRule||"evenodd")),k.stroke&&k.weight!==0&&(f.setLineDash&&f.setLineDash(g.options&&g.options._dashArray||[]),f.globalAlpha=k.opacity,f.lineWidth=k.weight,f.strokeStyle=k.color,f.lineCap=k.lineCap,f.lineJoin=k.lineJoin,f.stroke())},_onClick:function(f){for(var g=this._map.mouseEventToLayerPoint(f),k,_,$=this._drawFirst;$;$=$.next)k=$.layer,k.options.interactive&&k._containsPoint(g)&&(!(f.type==="click"||f.type==="preclick")||!this._map._draggableMoved(k))&&(_=k);this._fireEvent(_?[_]:!1,f)},_onMouseMove:function(f){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var g=this._map.mouseEventToLayerPoint(f);this._handleMouseHover(f,g)}},_handleMouseOut:function(f){var g=this._hoveredLayer;g&&(sr(this._container,"leaflet-interactive"),this._fireEvent([g],f,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(f,g){if(!this._mouseHoverThrottled){for(var k,_,$=this._drawFirst;$;$=$.next)k=$.layer,k.options.interactive&&k._containsPoint(g)&&(_=k);_!==this._hoveredLayer&&(this._handleMouseOut(f),_&&(yt(this._container,"leaflet-interactive"),this._fireEvent([_],f,"mouseover"),this._hoveredLayer=_)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,f),this._mouseHoverThrottled=!0,setTimeout(o(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(f,g,k){this._map._fireDOMEvent(g,k||g.type,f)},_bringToFront:function(f){var g=f._order;if(g){var k=g.next,_=g.prev;if(k)k.prev=_;else return;_?_.next=k:k&&(this._drawFirst=k),g.prev=this._drawLast,this._drawLast.next=g,g.next=null,this._drawLast=g,this._requestRedraw(f)}},_bringToBack:function(f){var g=f._order;if(g){var k=g.next,_=g.prev;if(_)_.next=k;else return;k?k.prev=_:_&&(this._drawLast=_),g.prev=null,g.next=this._drawFirst,this._drawFirst.prev=g,this._drawFirst=g,this._requestRedraw(f)}}});function hR(f){return Ze.canvas?new dR(f):null}var Rm=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(f){return document.createElement("<lvml:"+f+' class="lvml">')}}catch{}return function(f){return document.createElement("<"+f+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),MZ={_initContainer:function(){this._container=Gt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(qa.prototype._update.call(this),this.fire("update"))},_initPath:function(f){var g=f._container=Rm("shape");yt(g,"leaflet-vml-shape "+(this.options.className||"")),g.coordsize="1 1",f._path=Rm("path"),g.appendChild(f._path),this._updateStyle(f),this._layers[l(f)]=f},_addPath:function(f){var g=f._container;this._container.appendChild(g),f.options.interactive&&f.addInteractiveTarget(g)},_removePath:function(f){var g=f._container;Hn(g),f.removeInteractiveTarget(g),delete this._layers[l(f)]},_updateStyle:function(f){var g=f._stroke,k=f._fill,_=f.options,$=f._container;$.stroked=!!_.stroke,$.filled=!!_.fill,_.stroke?(g||(g=f._stroke=Rm("stroke")),$.appendChild(g),g.weight=_.weight+"px",g.color=_.color,g.opacity=_.opacity,_.dashArray?g.dashStyle=E(_.dashArray)?_.dashArray.join(" "):_.dashArray.replace(/( *, *)/g," "):g.dashStyle="",g.endcap=_.lineCap.replace("butt","flat"),g.joinstyle=_.lineJoin):g&&($.removeChild(g),f._stroke=null),_.fill?(k||(k=f._fill=Rm("fill")),$.appendChild(k),k.color=_.fillColor||_.color,k.opacity=_.fillOpacity):k&&($.removeChild(k),f._fill=null)},_updateCircle:function(f){var g=f._point.round(),k=Math.round(f._radius),_=Math.round(f._radiusY||k);this._setPath(f,f._empty()?"M0 0":"AL "+g.x+","+g.y+" "+k+","+_+" 0,"+65535*360)},_setPath:function(f,g){f._path.v=g},_bringToFront:function(f){Gd(f._container)},_bringToBack:function(f){Wd(f._container)}},tb=Ze.vml?Rm:Et,Pm=qa.extend({_initContainer:function(){this._container=tb("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=tb("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Hn(this._container),wn(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){qa.prototype._update.call(this);var f=this._bounds,g=f.getSize(),k=this._container;(!this._svgSize||!this._svgSize.equals(g))&&(this._svgSize=g,k.setAttribute("width",g.x),k.setAttribute("height",g.y)),dr(k,f.min),k.setAttribute("viewBox",[f.min.x,f.min.y,g.x,g.y].join(" ")),this.fire("update")}},_initPath:function(f){var g=f._path=tb("path");f.options.className&&yt(g,f.options.className),f.options.interactive&&yt(g,"leaflet-interactive"),this._updateStyle(f),this._layers[l(f)]=f},_addPath:function(f){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(f._path),f.addInteractiveTarget(f._path)},_removePath:function(f){Hn(f._path),f.removeInteractiveTarget(f._path),delete this._layers[l(f)]},_updatePath:function(f){f._project(),f._update()},_updateStyle:function(f){var g=f._path,k=f.options;g&&(k.stroke?(g.setAttribute("stroke",k.color),g.setAttribute("stroke-opacity",k.opacity),g.setAttribute("stroke-width",k.weight),g.setAttribute("stroke-linecap",k.lineCap),g.setAttribute("stroke-linejoin",k.lineJoin),k.dashArray?g.setAttribute("stroke-dasharray",k.dashArray):g.removeAttribute("stroke-dasharray"),k.dashOffset?g.setAttribute("stroke-dashoffset",k.dashOffset):g.removeAttribute("stroke-dashoffset")):g.setAttribute("stroke","none"),k.fill?(g.setAttribute("fill",k.fillColor||k.color),g.setAttribute("fill-opacity",k.fillOpacity),g.setAttribute("fill-rule",k.fillRule||"evenodd")):g.setAttribute("fill","none"))},_updatePoly:function(f,g){this._setPath(f,kt(f._parts,g))},_updateCircle:function(f){var g=f._point,k=Math.max(Math.round(f._radius),1),_=Math.max(Math.round(f._radiusY),1)||k,$="a"+k+","+_+" 0 1,0 ",O=f._empty()?"M0 0":"M"+(g.x-k)+","+g.y+$+k*2+",0 "+$+-k*2+",0 ";this._setPath(f,O)},_setPath:function(f,g){f._path.setAttribute("d",g)},_bringToFront:function(f){Gd(f._path)},_bringToBack:function(f){Wd(f._path)}});Ze.vml&&Pm.include(MZ);function fR(f){return Ze.svg||Ze.vml?new Pm(f):null}Bt.include({getRenderer:function(f){var g=f.options.renderer||this._getPaneRenderer(f.options.pane)||this.options.renderer||this._renderer;return g||(g=this._renderer=this._createRenderer()),this.hasLayer(g)||this.addLayer(g),g},_getPaneRenderer:function(f){if(f==="overlayPane"||f===void 0)return!1;var g=this._paneRenderers[f];return g===void 0&&(g=this._createRenderer({pane:f}),this._paneRenderers[f]=g),g},_createRenderer:function(f){return this.options.preferCanvas&&hR(f)||fR(f)}});var mR=Zd.extend({initialize:function(f,g){Zd.prototype.initialize.call(this,this._boundsToLatLngs(f),g)},setBounds:function(f){return this.setLatLngs(this._boundsToLatLngs(f))},_boundsToLatLngs:function(f){return f=W(f),[f.getSouthWest(),f.getNorthWest(),f.getNorthEast(),f.getSouthEast()]}});function zZ(f,g){return new mR(f,g)}Pm.create=tb,Pm.pointsToPath=kt,Wa.geometryToLayer=Ky,Wa.coordsToLatLng=sE,Wa.coordsToLatLngs=Zy,Wa.latLngToCoords=iE,Wa.latLngsToCoords=Xy,Wa.getFeature=Xd,Wa.asFeature=Yy,Bt.mergeOptions({boxZoom:!0});var pR=ia.extend({initialize:function(f){this._map=f,this._container=f._container,this._pane=f._panes.overlayPane,this._resetStateTimeout=0,f.on("unload",this._destroy,this)},addHooks:function(){ft(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){wn(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Hn(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(f){if(!f.shiftKey||f.which!==1&&f.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Nm(),V2(),this._startPoint=this._map.mouseEventToContainerPoint(f),ft(document,{contextmenu:mu,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(f){this._moved||(this._moved=!0,this._box=Gt("div","leaflet-zoom-box",this._container),yt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(f);var g=new G(this._point,this._startPoint),k=g.getSize();dr(this._box,g.min),this._box.style.width=k.x+"px",this._box.style.height=k.y+"px"},_finish:function(){this._moved&&(Hn(this._box),sr(this._container,"leaflet-crosshair")),Cm(),j2(),wn(document,{contextmenu:mu,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(f){if(!(f.which!==1&&f.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var g=new H(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(g).fire("boxzoomend",{boxZoomBounds:g})}},_onKeyDown:function(f){f.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Bt.addInitHook("addHandler","boxZoom",pR),Bt.mergeOptions({doubleClickZoom:!0});var gR=ia.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(f){var g=this._map,k=g.getZoom(),_=g.options.zoomDelta,$=f.originalEvent.shiftKey?k-_:k+_;g.options.doubleClickZoom==="center"?g.setZoom($):g.setZoomAround(f.containerPoint,$)}});Bt.addInitHook("addHandler","doubleClickZoom",gR),Bt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var yR=ia.extend({addHooks:function(){if(!this._draggable){var f=this._map;this._draggable=new Gl(f._mapPane,f._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),f.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),f.on("zoomend",this._onZoomEnd,this),f.whenReady(this._onZoomEnd,this))}yt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){sr(this._map._container,"leaflet-grab"),sr(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var f=this._map;if(f._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var g=W(this._map.options.maxBounds);this._offsetLimit=X(this._map.latLngToContainerPoint(g.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(g.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;f.fire("movestart").fire("dragstart"),f.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(f){if(this._map.options.inertia){var g=this._lastTime=+new Date,k=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(k),this._times.push(g),this._prunePositions(g)}this._map.fire("move",f).fire("drag",f)},_prunePositions:function(f){for(;this._positions.length>1&&f-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var f=this._map.getSize().divideBy(2),g=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=g.subtract(f).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(f,g){return f-(f-g)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var f=this._draggable._newPos.subtract(this._draggable._startPos),g=this._offsetLimit;f.x<g.min.x&&(f.x=this._viscousLimit(f.x,g.min.x)),f.y<g.min.y&&(f.y=this._viscousLimit(f.y,g.min.y)),f.x>g.max.x&&(f.x=this._viscousLimit(f.x,g.max.x)),f.y>g.max.y&&(f.y=this._viscousLimit(f.y,g.max.y)),this._draggable._newPos=this._draggable._startPos.add(f)}},_onPreDragWrap:function(){var f=this._worldWidth,g=Math.round(f/2),k=this._initialWorldOffset,_=this._draggable._newPos.x,$=(_-g+k)%f+g-k,O=(_+g+k)%f-g-k,Y=Math.abs($+k)<Math.abs(O+k)?$:O;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=Y},_onDragEnd:function(f){var g=this._map,k=g.options,_=!k.inertia||f.noInertia||this._times.length<2;if(g.fire("dragend",f),_)g.fire("moveend");else{this._prunePositions(+new Date);var $=this._lastPos.subtract(this._positions[0]),O=(this._lastTime-this._times[0])/1e3,Y=k.easeLinearity,ce=$.multiplyBy(Y/O),he=ce.distanceTo([0,0]),ke=Math.min(k.inertiaMaxSpeed,he),Ve=ce.multiplyBy(ke/he),it=ke/(k.inertiaDeceleration*Y),$t=Ve.multiplyBy(-it/2).round();!$t.x&&!$t.y?g.fire("moveend"):($t=g._limitOffset($t,g.options.maxBounds),D(function(){g.panBy($t,{duration:it,easeLinearity:Y,noMoveStart:!0,animate:!0})}))}}});Bt.addInitHook("addHandler","dragging",yR),Bt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var bR=ia.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(f){this._map=f,this._setPanDelta(f.options.keyboardPanDelta),this._setZoomDelta(f.options.zoomDelta)},addHooks:function(){var f=this._map._container;f.tabIndex<=0&&(f.tabIndex="0"),ft(f,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),wn(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var f=document.body,g=document.documentElement,k=f.scrollTop||g.scrollTop,_=f.scrollLeft||g.scrollLeft;this._map._container.focus(),window.scrollTo(_,k)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(f){var g=this._panKeys={},k=this.keyCodes,_,$;for(_=0,$=k.left.length;_<$;_++)g[k.left[_]]=[-1*f,0];for(_=0,$=k.right.length;_<$;_++)g[k.right[_]]=[f,0];for(_=0,$=k.down.length;_<$;_++)g[k.down[_]]=[0,f];for(_=0,$=k.up.length;_<$;_++)g[k.up[_]]=[0,-1*f]},_setZoomDelta:function(f){var g=this._zoomKeys={},k=this.keyCodes,_,$;for(_=0,$=k.zoomIn.length;_<$;_++)g[k.zoomIn[_]]=f;for(_=0,$=k.zoomOut.length;_<$;_++)g[k.zoomOut[_]]=-f},_addHooks:function(){ft(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){wn(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(f){if(!(f.altKey||f.ctrlKey||f.metaKey)){var g=f.keyCode,k=this._map,_;if(g in this._panKeys){if(!k._panAnim||!k._panAnim._inProgress)if(_=this._panKeys[g],f.shiftKey&&(_=J(_).multiplyBy(3)),k.options.maxBounds&&(_=k._limitOffset(J(_),k.options.maxBounds)),k.options.worldCopyJump){var $=k.wrapLatLng(k.unproject(k.project(k.getCenter()).add(_)));k.panTo($)}else k.panBy(_)}else if(g in this._zoomKeys)k.setZoom(k.getZoom()+(f.shiftKey?3:1)*this._zoomKeys[g]);else if(g===27&&k._popup&&k._popup.options.closeOnEscapeKey)k.closePopup();else return;mu(f)}}});Bt.addInitHook("addHandler","keyboard",bR),Bt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var vR=ia.extend({addHooks:function(){ft(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){wn(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(f){var g=UA(f),k=this._map.options.wheelDebounceTime;this._delta+=g,this._lastMousePos=this._map.mouseEventToContainerPoint(f),this._startTime||(this._startTime=+new Date);var _=Math.max(k-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),_),mu(f)},_performZoom:function(){var f=this._map,g=f.getZoom(),k=this._map.options.zoomSnap||0;f._stop();var _=this._delta/(this._map.options.wheelPxPerZoomLevel*4),$=4*Math.log(2/(1+Math.exp(-Math.abs(_))))/Math.LN2,O=k?Math.ceil($/k)*k:$,Y=f._limitZoom(g+(this._delta>0?O:-O))-g;this._delta=0,this._startTime=null,Y&&(f.options.scrollWheelZoom==="center"?f.setZoom(g+Y):f.setZoomAround(this._lastMousePos,g+Y))}});Bt.addInitHook("addHandler","scrollWheelZoom",vR);var FZ=600;Bt.mergeOptions({tapHold:Ze.touchNative&&Ze.safari&&Ze.mobile,tapTolerance:15});var xR=ia.extend({addHooks:function(){ft(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){wn(this._map._container,"touchstart",this._onDown,this)},_onDown:function(f){if(clearTimeout(this._holdTimeout),f.touches.length===1){var g=f.touches[0];this._startPos=this._newPos=new V(g.clientX,g.clientY),this._holdTimeout=setTimeout(o(function(){this._cancel(),this._isTapValid()&&(ft(document,"touchend",ts),ft(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",g))},this),FZ),ft(document,"touchend touchcancel contextmenu",this._cancel,this),ft(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function f(){wn(document,"touchend",ts),wn(document,"touchend touchcancel",f)},_cancel:function(){clearTimeout(this._holdTimeout),wn(document,"touchend touchcancel contextmenu",this._cancel,this),wn(document,"touchmove",this._onMove,this)},_onMove:function(f){var g=f.touches[0];this._newPos=new V(g.clientX,g.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(f,g){var k=new MouseEvent(f,{bubbles:!0,cancelable:!0,view:window,screenX:g.screenX,screenY:g.screenY,clientX:g.clientX,clientY:g.clientY});k._simulated=!0,g.target.dispatchEvent(k)}});Bt.addInitHook("addHandler","tapHold",xR),Bt.mergeOptions({touchZoom:Ze.touch,bounceAtZoomLimits:!0});var wR=ia.extend({addHooks:function(){yt(this._map._container,"leaflet-touch-zoom"),ft(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){sr(this._map._container,"leaflet-touch-zoom"),wn(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(f){var g=this._map;if(!(!f.touches||f.touches.length!==2||g._animatingZoom||this._zooming)){var k=g.mouseEventToContainerPoint(f.touches[0]),_=g.mouseEventToContainerPoint(f.touches[1]);this._centerPoint=g.getSize()._divideBy(2),this._startLatLng=g.containerPointToLatLng(this._centerPoint),g.options.touchZoom!=="center"&&(this._pinchStartLatLng=g.containerPointToLatLng(k.add(_)._divideBy(2))),this._startDist=k.distanceTo(_),this._startZoom=g.getZoom(),this._moved=!1,this._zooming=!0,g._stop(),ft(document,"touchmove",this._onTouchMove,this),ft(document,"touchend touchcancel",this._onTouchEnd,this),ts(f)}},_onTouchMove:function(f){if(!(!f.touches||f.touches.length!==2||!this._zooming)){var g=this._map,k=g.mouseEventToContainerPoint(f.touches[0]),_=g.mouseEventToContainerPoint(f.touches[1]),$=k.distanceTo(_)/this._startDist;if(this._zoom=g.getScaleZoom($,this._startZoom),!g.options.bounceAtZoomLimits&&(this._zoom<g.getMinZoom()&&$<1||this._zoom>g.getMaxZoom()&&$>1)&&(this._zoom=g._limitZoom(this._zoom)),g.options.touchZoom==="center"){if(this._center=this._startLatLng,$===1)return}else{var O=k._add(_)._divideBy(2)._subtract(this._centerPoint);if($===1&&O.x===0&&O.y===0)return;this._center=g.unproject(g.project(this._pinchStartLatLng,this._zoom).subtract(O),this._zoom)}this._moved||(g._moveStart(!0,!1),this._moved=!0),B(this._animRequest);var Y=o(g._move,g,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=D(Y,this,!0),ts(f)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,B(this._animRequest),wn(document,"touchmove",this._onTouchMove,this),wn(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Bt.addInitHook("addHandler","touchZoom",wR),Bt.BoxZoom=pR,Bt.DoubleClickZoom=gR,Bt.Drag=yR,Bt.Keyboard=bR,Bt.ScrollWheelZoom=vR,Bt.TapHold=xR,Bt.TouchZoom=wR,n.Bounds=G,n.Browser=Ze,n.CRS=ve,n.Canvas=dR,n.Circle=rE,n.CircleMarker=qy,n.Class=z,n.Control=No,n.DivIcon=lR,n.DivOverlay=oa,n.DomEvent=rZ,n.DomUtil=tZ,n.Draggable=Gl,n.Evented=U,n.FeatureGroup=Ha,n.GeoJSON=Wa,n.GridLayer=Am,n.Handler=ia,n.Icon=Kd,n.ImageOverlay=Jy,n.LatLng=te,n.LatLngBounds=H,n.Layer=Co,n.LayerGroup=qd,n.LineUtil=gZ,n.Map=Bt,n.Marker=Wy,n.Mixin=uZ,n.Path=Wl,n.Point=V,n.PolyUtil=dZ,n.Polygon=Zd,n.Polyline=Ga,n.Popup=Qy,n.PosAnimation=HA,n.Projection=yZ,n.Rectangle=mR,n.Renderer=qa,n.SVG=Pm,n.SVGOverlay=aR,n.TileLayer=Yd,n.Tooltip=eb,n.Transformation=De,n.Util=Z,n.VideoOverlay=oR,n.bind=o,n.bounds=X,n.canvas=hR,n.circle=CZ,n.circleMarker=NZ,n.control=Tm,n.divIcon=DZ,n.extend=s,n.featureGroup=wZ,n.geoJSON=iR,n.geoJson=TZ,n.gridLayer=OZ,n.icon=EZ,n.imageOverlay=$Z,n.latLng=ae,n.latLngBounds=W,n.layerGroup=xZ,n.map=sZ,n.marker=kZ,n.point=J,n.polygon=SZ,n.polyline=_Z,n.popup=RZ,n.rectangle=zZ,n.setOptions=v,n.stamp=l,n.svg=fR,n.svgOverlay=AZ,n.tileLayer=cR,n.tooltip=PZ,n.transformation=Ke,n.version=r,n.videoOverlay=IZ;var BZ=window.L;n.noConflict=function(){return window.L=BZ,this},window.L=n})})(J_,J_.exports);var Ly=J_.exports;const si=yx(Ly);function CA(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function _A(t,e){return e==null?function(r,s){const i=A.useRef(void 0);return i.current||(i.current=t(r,s)),i}:function(r,s){const i=A.useRef(void 0);i.current||(i.current=t(r,s));const o=A.useRef(r),{instance:a}=i.current;return A.useEffect(function(){o.current!==r&&(e(a,r,o.current),o.current=r)},[a,r,e]),i}}function TK(t,e){A.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var i;(i=e.layerContainer)==null||i.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function $K(t){return function(n){const r=kA(),s=t(NA(n,r),r);return VXe(r.map,n.attribution),SK(s.current,n.eventHandlers),TK(s.current,r),s}}function WXe(t,e){const n=A.useRef(void 0);A.useEffect(function(){if(e.pathOptions!==n.current){const s=e.pathOptions??{};t.instance.setStyle(s),n.current=s}},[t,e])}function qXe(t){return function(n){const r=kA(),s=t(NA(n,r),r);return SK(s.current,n.eventHandlers),TK(s.current,r),WXe(s.current,n),s}}function KXe(t,e){const n=_A(t,e),r=$K(n);return _K(r)}function ZXe(t,e){const n=_A(t,e),r=qXe(n);return _K(r)}function XXe(t,e){const n=_A(t,e),r=$K(n);return GXe(r)}function YXe(t,e,n){const{opacity:r,zIndex:s}=e;r!=null&&r!==n.opacity&&t.setOpacity(r),s!=null&&s!==n.zIndex&&t.setZIndex(s)}function uu(){return kA().map}function IK(t){const e=uu();return A.useEffect(function(){return e.on(t),function(){e.off(t)}},[e,t]),e}const AK=ZXe(function({center:e,children:n,...r},s){const i=new Ly.Circle(e,r);return CA(i,CK(s,{overlayContainer:i}))},jXe);function JXe({bounds:t,boundsOptions:e,center:n,children:r,className:s,id:i,placeholder:o,style:a,whenReady:l,zoom:c,...u},h){const[m]=A.useState({className:s,id:i,style:a}),[p,y]=A.useState(null),v=A.useRef(void 0);A.useImperativeHandle(h,()=>(p==null?void 0:p.map)??null,[p]);const x=A.useCallback(w=>{if(w!==null&&!v.current){const E=new Ly.Map(w,u);v.current=E,n!=null&&c!=null?E.setView(n,c):t!=null&&E.fitBounds(t,e),l!=null&&E.whenReady(l),y(HXe(E))}},[]);A.useEffect(()=>()=>{p==null||p.map.remove()},[p]);const b=p?d.createElement(EA,{value:p},r):o??null;return d.createElement("div",{...m,ref:x},b)}const SA=A.forwardRef(JXe),gx=KXe(function({position:e,...n},r){const s=new Ly.Marker(e,n);return CA(s,CK(r,{overlayContainer:s}))},function(e,n,r){n.position!==r.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==r.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==r.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==r.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==r.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),TA=XXe(function({url:e,...n},r){const s=new Ly.TileLayer(e,NA(n,r));return CA(s,r)},function(e,n,r){YXe(e,n,r);const{url:s}=n;s!=null&&s!==r.url&&e.setUrl(s)});const RK="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=",PK="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAQAAAACach9AAACMUlEQVR4Ae3ShY7jQBAE0Aoz/f9/HTMzhg1zrdKUrJbdx+Kd2nD8VNudfsL/Th///dyQN2TH6f3y/BGpC379rV+S+qqetBOxImNQXL8JCAr2V4iMQXHGNJxeCfZXhSRBcQMfvkOWUdtfzlLgAENmZDcmo2TVmt8OSM2eXxBp3DjHSMFutqS7SbmemzBiR+xpKCNUIRkdkkYxhAkyGoBvyQFEJEefwSmmvBfJuJ6aKqKWnAkvGZOaZXTUgFqYULWNSHUckZuR1HIIimUExutRxwzOLROIG4vKmCKQt364mIlhSyzAf1m9lHZHJZrlAOMMztRRiKimp/rpdJDc9Awry5xTZCte7FHtuS8wJgeYGrex28xNTd086Dik7vUMscQOa8y4DoGtCCSkAKlNwpgNtphjrC6MIHUkR6YWxxs6Sc5xqn222mmCRFzIt8lEdKx+ikCtg91qS2WpwVfBelJCiQJwvzixfI9cxZQWgiSJelKnwBElKYtDOb2MFbhmUigbReQBV0Cg4+qMXSxXSyGUn4UbF8l+7qdSGnTC0XLCmahIgUHLhLOhpVCtw4CzYXvLQWQbJNmxoCsOKAxSgBJno75avolkRw8iIAFcsdc02e9iyCd8tHwmeSSoKTowIgvscSGZUOA7PuCN5b2BX9mQM7S0wYhMNU74zgsPBj3HU7wguAfnxxjFQGBE6pwN+GjME9zHY7zGp8wVxMShYX9NXvEWD3HbwJf4giO4CFIQxXScH1/TM+04kkBiAAAAAElFTkSuQmCC";async function lF(t,e,n){try{const r=`
      [out:json];
      (
        way["highway"]["name"](around:${n*1e3},${t},${e});
        node["amenity"="hospital"](around:${n*1e3},${t},${e});
        node["amenity"="clinic"](around:${n*1e3},${t},${e});
        node["amenity"="doctors"](around:${n*1e3},${t},${e});
        node["amenity"="mosque"](around:${n*1e3},${t},${e});
        node["building"="mosque"](around:${n*1e3},${t},${e});
      );
      out tags;
    `,i=await fetch("https://overpass-api.de/api/interpreter",{method:"POST",body:r,headers:{"Content-Type":"text/plain"}});if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);const o=await i.json();if(!o||!Array.isArray(o.elements))return console.error("Invalid data structure from Overpass API:",o),{streets:[],hospitals:[],mosques:[]};const a=[],l=[],c=[];return o.elements.forEach(u=>{if(!u.tags||!u.tags.name)return;const h=u.tags.name.trim();u.type==="way"&&u.tags.highway?a.push(h):u.type==="node"&&(u.tags.amenity==="hospital"||u.tags.amenity==="clinic"||u.tags.amenity==="doctors")?l.push(h):u.type==="node"&&(u.tags.amenity==="mosque"||u.tags.building==="mosque")&&c.push(h)}),{streets:[...new Set(a)],hospitals:[...new Set(l)],mosques:[...new Set(c)]}}catch(r){return console.error("Error fetching data:",r),{streets:[],hospitals:[],mosques:[]}}}let QXe=si.icon({iconUrl:RK,shadowUrl:PK,iconSize:[25,41],iconAnchor:[12,41]});si.Marker.prototype.options.icon=QXe;function eYe({onLocationSelect:t,onNeighborhoodsChange:e,radius:n,onStreetsChange:r,isUserInitiatedUpdateRef:s}){const i=uu();return IK({click(o){const{lat:a,lng:l}=o.latlng;console.log("Map clicked at:",a,l),s&&(s.current=!0),r&&r([],[],!0),t&&t({lat:a,lng:l}),i.setView([a,l],i.getZoom(),{animate:!0,duration:.5}),e&&setTimeout(()=>{e([])},100)}}),null}function tYe({center:t}){const e=uu(),{useEffect:n}=d;return n(()=>{t&&e&&(console.log("Centering map to:",t),e.setView([t.lat,t.lng],13,{animate:!0,duration:1}))},[t,e]),null}const nYe=({location:t,setLocation:e,radius:n=5,setRadius:r,setAreas:s,height:i="400px",interactive:o=!0,showRadius:a=!0,markers:l=[],onStreetsChange:c})=>{const u=We(H=>H.darkMode),[h,m]=A.useState(t||{lat:33.5138,lng:36.2765}),[p,y]=A.useState([]),[v,x]=A.useState([]),[b,w]=A.useState([]),[E,N]=A.useState([]),[C,S]=A.useState([]),[T,I]=A.useState([]),[P,R]=A.useState(!1),[D,B]=A.useState(!1),[Z,z]=A.useState(!1),q=H=>{J.current=!0,e&&e(H),m(H),c&&c([],[],!0)},M=H=>{const W=parseFloat(H.target.value);J.current=!0,r(W),s&&t&&setTimeout(()=>{s([])},100),c&&(c([],[],!0),t&&lF(t.lat,t.lng,W).then(te=>{setTimeout(()=>{const ae={streets:te.streets,hospitals:te.hospitals,mosques:te.mosques};c(ae,[],!0)},1e3)}).catch(te=>{console.error("Error fetching data on radius change:",te),setTimeout(()=>{c([],[],!1)},1e3)}))};A.useEffect(()=>{if(s&&t){const H=setTimeout(()=>{s([])},500);return()=>clearTimeout(H)}},[t,n,s]),A.useEffect(()=>{t&&m(t)},[t]);const U=H=>{N(W=>[...W,H])},V=H=>{S(W=>[...W,H])},ne=H=>{I(W=>[...W,H])},J=A.useRef(!1),G=A.useRef(null),X=A.useRef(null);return A.useEffect(()=>{if(!t)return;const H=!G.current||G.current.lat!==t.lat||G.current.lng!==t.lng,W=X.current!==n;if(G.current={...t},X.current=n,!H&&!W&&!J.current)return;const te=J.current;J.current=!1,(async()=>{try{const ve=await lF(t.lat,t.lng,n);setTimeout(()=>{if(y(ve.streets),x(ve.hospitals),w(ve.mosques),c){const Ce={streets:ve.streets,hospitals:ve.hospitals,mosques:ve.mosques};c(Ce,[],te)}},2e3)}catch(ve){console.error("Error fetching places data:",ve),c&&setTimeout(()=>{c([],[],!1)},2e3)}})()},[t,n,c,E,C,T]),d.createElement("div",{className:"relative"},a&&r&&!c&&o&&d.createElement("div",{className:"mb-4"},d.createElement("div",{className:"flex items-center"},d.createElement("div",{className:"flex-1"},d.createElement("label",{className:`block text-base font-medium mb-1 ${u?"text-indigo-300":"text-gray-700"} transition-colors duration-300`}," :"," ",d.createElement("span",{className:`text-xl font-bold ${u?"text-indigo-400":"text-indigo-500"} transition-colors duration-300`},n," ")),d.createElement("input",{type:"range",min:"1",max:"5",step:"0.5",value:n,onChange:M,className:`w-full accent-indigo-500 ${u?"bg-gray-700":""} transition-colors duration-300`}))),!c&&d.createElement(d.Fragment,null,d.createElement("div",{className:"mt-3 h-[150px]"},d.createElement("h3",{className:`text-base font-bold mb-2 ${u?"text-indigo-300":""} transition-colors duration-300`},"   :"),p.length>0?d.createElement("div",{className:"h-[100px]"},d.createElement("div",{className:"flex flex-wrap gap-2 h-full overflow-y-auto p-1"},p.filter(H=>!E.includes(H)).slice(0,P?25:10).map((H,W)=>d.createElement("div",{key:`street-${W}`,className:`flex items-center rounded-full px-3 py-1 ${u?"bg-gray-700 text-gray-200":"bg-indigo-100"} transition-colors duration-300`},d.createElement("span",{className:"mr-1"},H),o&&d.createElement("button",{type:"button",onClick:()=>U(H),className:`ml-2 focus:outline-none ${u?"text-red-400 hover:text-red-300":"text-red-500 hover:text-red-700"} transition-colors duration-300`},"")))),p.filter(H=>!E.includes(H)).length>10&&d.createElement("button",{type:"button",onClick:()=>R(!P),className:`mt-2 focus:outline-none ${u?"text-indigo-400 hover:text-indigo-300":"text-blue-500 hover:text-blue-700"} transition-colors duration-300`},P?" ":" ")):d.createElement("div",{className:"h-[100px] flex items-center justify-center text-gray-500 italic"},"      ")),d.createElement("div",{className:"mt-3 h-[150px]"},d.createElement("h3",{className:`text-base font-bold mb-2 ${u?"text-indigo-300":""} transition-colors duration-300`},"    :"),v.length>0?d.createElement("div",{className:"h-[100px]"},d.createElement("div",{className:"flex flex-wrap gap-2 h-full overflow-y-auto p-1"},v.filter(H=>!C.includes(H)).slice(0,D?25:5).map((H,W)=>d.createElement("div",{key:`hospital-${W}`,className:`flex items-center rounded-full px-3 py-1 ${u?"bg-gray-700 text-gray-200":"bg-red-100"} transition-colors duration-300`},d.createElement("span",{className:"mr-1"},H),o&&d.createElement("button",{type:"button",onClick:()=>V(H),className:`ml-2 focus:outline-none ${u?"text-red-400 hover:text-red-300":"text-red-500 hover:text-red-700"} transition-colors duration-300`},"")))),v.filter(H=>!C.includes(H)).length>5&&d.createElement("button",{type:"button",onClick:()=>B(!D),className:`mt-2 focus:outline-none ${u?"text-indigo-400 hover:text-indigo-300":"text-blue-500 hover:text-blue-700"} transition-colors duration-300`},D?" ":" ")):d.createElement("div",{className:"h-[100px] flex items-center justify-center text-gray-500 italic"},"      ")),d.createElement("div",{className:"mt-3 h-[150px]"},d.createElement("h3",{className:`text-base font-bold mb-2 ${u?"text-indigo-300":""} transition-colors duration-300`},"   :"),b.length>0?d.createElement("div",{className:"h-[100px]"},d.createElement("div",{className:"flex flex-wrap gap-2 h-full overflow-y-auto p-1"},b.filter(H=>!T.includes(H)).slice(0,Z?25:5).map((H,W)=>d.createElement("div",{key:`mosque-${W}`,className:`flex items-center rounded-full px-3 py-1 ${u?"bg-gray-700 text-gray-200":"bg-green-100"} transition-colors duration-300`},d.createElement("span",{className:"mr-1"},H),o&&d.createElement("button",{type:"button",onClick:()=>ne(H),className:`ml-2 focus:outline-none ${u?"text-red-400 hover:text-red-300":"text-red-500 hover:text-red-700"} transition-colors duration-300`},"")))),b.filter(H=>!T.includes(H)).length>5&&d.createElement("button",{type:"button",onClick:()=>z(!Z),className:`mt-2 focus:outline-none ${u?"text-indigo-400 hover:text-indigo-300":"text-blue-500 hover:text-blue-700"} transition-colors duration-300`},Z?" ":" ")):d.createElement("div",{className:"h-[100px] flex items-center justify-center text-gray-500 italic"},"      ")))),d.createElement("div",{style:{height:i},className:"rounded-lg overflow-hidden"},d.createElement(SA,{center:[h.lat,h.lng],zoom:13,scrollWheelZoom:o,style:{height:"100%",width:"100%"},attributionControl:!0,zoomControl:!0},d.createElement(TA,{attribution:' <a href="https://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),d.createElement(eYe,{onLocationSelect:q,onNeighborhoodsChange:s,radius:n,onStreetsChange:c,isUserInitiatedUpdateRef:J}),d.createElement(tYe,{center:h}),t&&d.createElement(d.Fragment,null,d.createElement(gx,{position:[t.lat,t.lng]}),a&&d.createElement(AK,{center:[t.lat,t.lng],radius:n*1e3,pathOptions:{color:"#6366F1",fillColor:"#6366F1",fillOpacity:.2}})),l&&l.length>0&&l.map((H,W)=>d.createElement(gx,{key:`marker-${W}`,position:[H.lat,H.lng],title:H.title||""})))))},DK=A.forwardRef(({initialCenter:t={lng:36.2765,lat:33.5138},markers:e=[],onLocationSelect:n,onRadiusChange:r,onNeighborhoodsChange:s,onStreetsChange:i,radius:o=5,height:a="400px",interactive:l=!0},c)=>{const u={lat:t.lat,lng:t.lng},[h,m]=A.useState(u),[p,y]=A.useState(o),[v,x]=A.useState([]);A.useImperativeHandle(c,()=>({updateLocation:N=>{console.log("Updating map location to:",N),m({lat:N.lat,lng:N.lng})},updateRadius:N=>{console.log("Updating map radius to:",N),y(N)}}));const b=N=>{console.log("Location selected:",N),m(N),n&&n(N)},w=N=>{y(N),r&&r(N)},E=N=>{x(N),s&&s(N)};return A.useEffect(()=>{},[h,p]),d.createElement(nYe,{location:h,setLocation:b,radius:p,setRadius:w,areas:v,setAreas:E,height:a,interactive:l,showRadius:!0,markers:e,onStreetsChange:i})}),It=_q.create({baseURL:A2,headers:{"Content-Type":"application/json"}});It.interceptors.request.use(t=>{const e=localStorage.getItem("token");return e&&(t.headers.Authorization=`Bearer ${e}`),t},t=>Promise.reject(t));It.interceptors.response.use(t=>t,t=>{var e,n,r,s,i;return console.error("API Error:",{url:(e=t.config)==null?void 0:e.url,method:(n=t.config)==null?void 0:n.method,status:(r=t.response)==null?void 0:r.status,data:(s=t.response)==null?void 0:s.data,message:t.message}),t.response&&t.response.status===401&&(t.config.url.includes("/auth/login")||(localStorage.removeItem("token"),window.location.href="/login")),t.response?t.customMessage=((i=t.response.data)==null?void 0:i.message)||"    ":t.request?t.customMessage="     ":t.customMessage="    ",Promise.reject(t)});const rYe={register:async t=>(await It.post("/auth/register",t)).data,login:async t=>(await It.post("/auth/login",t)).data,adminLogin:async t=>(await It.post("/auth/admin/login",t)).data,getCurrentUser:async()=>(await It.get("/auth/me")).data},sYe={updateProfile:async t=>(await It.put("/users/me",t)).data,changePassword:async t=>(await It.put("/users/change-password",t)).data,uploadProfileImage:async t=>(await It.post("/users/upload-profile-image",t,{headers:{"Content-Type":"multipart/form-data"}})).data},Q_={getAllCraftsmen:async()=>(await It.get("/craftsmen")).data,getCraftsmanById:async t=>(await It.get(`/craftsmen/${t}`)).data,getStreetsInWorkRange:async t=>(await It.get(`/craftsmen/${t}/streets`)).data,searchCraftsmen:async t=>(await It.post("/craftsmen/search",t)).data,searchCraftsmenByStreet:async(t,e={})=>(await It.post("/craftsmen/search",{...e,street:t})).data,searchCraftsmenByNeighborhood:async(t,e={})=>(await It.post("/craftsmen/search",{...e,neighborhood:t})).data,getMyProfile:async()=>(await It.get("/craftsmen/me/profile")).data,updateProfile:async t=>(await It.put("/craftsmen/me/profile",t)).data,updateGallery:async t=>(await It.put("/craftsmen/me/gallery",t)).data,updateAvailability:async t=>(await It.put("/craftsmen/me/availability",{available:t})).data,updateStreetsInWorkRange:async()=>(await It.put("/craftsmen/me/streets")).data,uploadGalleryImages:async t=>(await It.post("/craftsmen/me/upload-gallery",t,{headers:{"Content-Type":"multipart/form-data"}})).data},iYe={createBooking:async t=>(await It.post("/bookings",t)).data,getMyBookings:async()=>(await It.get("/bookings/me")).data,getBookingById:async t=>(await It.get(`/bookings/${t}`)).data,updateBookingStatus:async(t,e)=>(await It.put(`/bookings/${t}/status`,{status:e})).data,updateBooking:async(t,e)=>(await It.put(`/bookings/${t}`,e)).data},oYe={createReview:async t=>(await It.post("/reviews",t)).data,getCraftsmanReviews:async t=>(await It.get(`/reviews/craftsman/${t}`)).data,getCraftsmanDetailedRatings:async t=>(await It.get(`/reviews/craftsman/${t}/ratings`)).data,getReviewById:async t=>(await It.get(`/reviews/${t}`)).data,uploadReviewImages:async t=>(await It.post("/reviews/upload-images",t,{headers:{"Content-Type":"multipart/form-data"}})).data},aYe={getAllProfessions:async()=>(await It.get("/professions")).data,getProfessionById:async t=>(await It.get(`/professions/${t}`)).data},lYe={getMyNotifications:async()=>(await It.get("/notifications/me")).data,markAsRead:async t=>(await It.put(`/notifications/${t}/read`)).data,markAllAsRead:async()=>(await It.put("/notifications/read-all")).data,deleteNotification:async t=>(await It.delete(`/notifications/${t}`)).data},cF=Object.freeze(Object.defineProperty({__proto__:null,authService:rYe,bookingService:iYe,craftsmanService:Q_,default:It,notificationService:lYe,professionService:aYe,reviewService:oYe,userService:sYe},Symbol.toStringTag,{value:"Module"})),OK=async(t,e,n)=>{try{const r=`
      [out:json];
      (
        way["highway"]["name"](around:${n*1e3},${t},${e});
        node["amenity"="hospital"](around:${n*1e3},${t},${e});
        node["amenity"="clinic"](around:${n*1e3},${t},${e});
        node["amenity"="doctors"](around:${n*1e3},${t},${e});
        node["healthcare"](around:${n*1e3},${t},${e});
        node["amenity"="mosque"](around:${n*1e3},${t},${e});
        way["amenity"="mosque"](around:${n*1e3},${t},${e});
        node["building"="mosque"](around:${n*1e3},${t},${e});
        way["building"="mosque"](around:${n*1e3},${t},${e});
      );
      out tags;
    `,i=await fetch("https://overpass-api.de/api/interpreter",{method:"POST",body:r,headers:{"Content-Type":"text/plain"}});if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);const o=await i.json();if(!o||!Array.isArray(o.elements))return console.error("Invalid data structure from Overpass API:",o),{streets:[],hospitals:[],mosques:[]};const a=[],l=[],c=[];return o.elements.forEach(u=>{if(!u.tags||!u.tags.name)return;const h=u.tags.name.trim();u.tags.highway&&(u.type==="way"||u.type==="relation")?!u.tags.footway&&!u.tags.cycleway&&!u.tags.path&&!h.includes("")&&!h.includes("")&&!h.includes("")&&!h.includes("")&&!h.includes("")&&!h.includes("clinic")&&!h.includes("hospital")&&!h.includes("mosque")&&a.push(h):(u.tags.amenity==="hospital"||u.tags.amenity==="clinic"||u.tags.amenity==="doctors"||u.tags.healthcare)&&!u.tags.mosque&&!u.tags.religion?!h.includes("")&&!h.includes("")&&!h.includes("mosque")&&l.push(h):(u.tags.amenity==="mosque"||u.tags.building==="mosque"||u.tags.religion==="muslim"&&u.tags.building||u.tags.religion==="islam"||h.includes("")||h.includes(""))&&!h.includes("")&&!h.includes("")&&!h.includes("")&&!h.includes("clinic")&&!h.includes("hospital")&&c.push(h)}),{streets:[...new Set(a)],hospitals:[...new Set(l)],mosques:[...new Set(c)]}}catch(r){return console.error("Error fetching data from Overpass API:",r),{streets:[],hospitals:[],mosques:[]}}},cYe=()=>{const t=Lr(),e=Dt(G=>G.login),n=We(G=>G.darkMode),r=A.useRef(null),[s,i]=A.useState({fullName:"",phone:"",email:"",password:"",confirmPassword:"",professions:[],specializations:[],location:{lng:36.2765,lat:33.5138},workRadius:5,bio:"",image:null,streetsInWorkRange:[],hospitalsInWorkRange:[],mosquesInWorkRange:[],workingHours:{saturday:{isWorking:!1,from:"09:00",to:"17:00"},sunday:{isWorking:!1,from:"09:00",to:"17:00"},monday:{isWorking:!1,from:"09:00",to:"17:00"},tuesday:{isWorking:!1,from:"09:00",to:"17:00"},wednesday:{isWorking:!1,from:"09:00",to:"17:00"},thursday:{isWorking:!1,from:"09:00",to:"17:00"},friday:{isWorking:!1,from:"09:00",to:"17:00"}},verificationCode:""}),[o,a]=A.useState({}),[l,c]=A.useState(1),[u,h]=A.useState([]),[m,p]=A.useState([]),[y,v]=A.useState([]),[x,b]=A.useState(null),[w,E]=A.useState(!1),[N,C]=A.useState({sent:!1,verified:!1,sending:!1,firebaseUser:null}),S=G=>{const{name:X,value:H}=G.target;i({...s,[X]:H}),o[X]&&a({...o,[X]:""})},T=(G,X)=>{i({...s,[G]:X}),o[G]&&a({...o,[G]:""})},I=G=>{i({...s,location:{lat:G.lat,lng:G.lng}})},P=G=>{console.log("Radius changed to:",G),i({...s,workRadius:G}),r.current&&(console.log("Updating map radius via ref"),r.current.updateRadius(G))},R=(G,X,H=!1)=>{if(H)E(!0),OK(s.location.lat,s.location.lng,s.workRadius).then(W=>{setTimeout(()=>{const te=W.streets.map((Ce,Ie)=>({id:Ie+1,name:Ce,location:{lat:s.location.lat,lng:s.location.lng}})),ae=W.hospitals.map((Ce,Ie)=>({id:Ie+1,name:Ce,location:{lat:s.location.lat,lng:s.location.lng}})),ve=W.mosques.map((Ce,Ie)=>({id:Ie+1,name:Ce,location:{lat:s.location.lat,lng:s.location.lng}}));h(te),p(ae),v(ve),i(Ce=>({...Ce,streetsInWorkRange:W.streets,hospitalsInWorkRange:W.hospitals,mosquesInWorkRange:W.mosques})),E(!1)},2e3)}).catch(W=>{console.error("Error fetching data from Overpass API:",W),setTimeout(()=>{E(!1)},2e3)});else if(G&&Array.isArray(G)){if(typeof G[0]=="string"){const W=G.map((te,ae)=>({id:ae+1,name:te,location:{lat:s.location.lat,lng:s.location.lng}}));h(W),i(te=>({...te,streetsInWorkRange:G}))}else if(G.streets||G.hospitals||G.mosques){const W=G.streets||[],te=G.hospitals||[],ae=G.mosques||[],ve=W.map((Fe,De)=>({id:De+1,name:Fe,location:{lat:s.location.lat,lng:s.location.lng}})),Ce=te.map((Fe,De)=>({id:De+1,name:Fe,location:{lat:s.location.lat,lng:s.location.lng}})),Ie=ae.map((Fe,De)=>({id:De+1,name:Fe,location:{lat:s.location.lat,lng:s.location.lng}}));h(ve),p(Ce),v(Ie),i(Fe=>({...Fe,streetsInWorkRange:W,hospitalsInWorkRange:te,mosquesInWorkRange:ae}))}}},D=G=>{if(!G)return;const X=Array.isArray(G)?G:[],H=X.map((W,te)=>({id:te+1,name:W,location:{lat:s.location.lat,lng:s.location.lng}}));p(H),i(W=>({...W,hospitalsInWorkRange:X}))},B=G=>{if(!G)return;const X=Array.isArray(G)?G:[],H=X.map((W,te)=>({id:te+1,name:W,location:{lat:s.location.lat,lng:s.location.lng}}));v(H),i(W=>({...W,mosquesInWorkRange:X}))},Z=G=>{const X=G.target.files[0];if(X){const H=new FileReader;H.onloadend=()=>{const W=H.result;b(W),i({...s,image:W})},H.readAsDataURL(X)}},z=async()=>{var G;if(!s.email||!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.email)){a({...o,email:"    "});return}try{if(C(H=>({...H,sending:!0})),(await Gr.checkEmailExists(s.email)).exists)try{const H=Math.random().toString(36).slice(-8);await Ec.loginWithEmailAndPassword(s.email,H).catch(()=>{}),await Ec.sendPasswordResetEmail(s.email),C(W=>({...W,sent:!0,sending:!1})),alert("       .         .")}catch(H){console.error("Error sending password reset:",H),a({...o,email:"        "}),C(W=>({...W,sending:!1}))}else{const H=Math.random().toString(36).slice(-8),W=await Ec.registerWithEmailAndPassword(s.email,H,s.fullName);if(W.success){C(ae=>({...ae,sent:!0,sending:!1}));const te=setInterval(async()=>{try{const ae=Zi.currentUser;ae&&(await ae.reload(),ae.emailVerified&&(clearInterval(te),C(ve=>({...ve,verified:!0}))))}catch(ae){console.error("Error checking verification status:",ae)}},5e3);window.verificationTimer=te}else a({...o,email:((G=W.error)==null?void 0:G.message)||"     "}),C(te=>({...te,sending:!1}))}}catch(X){console.error("Error sending verification code:",X),a({...o,email:"     "}),C(H=>({...H,sending:!1}))}};A.useEffect(()=>()=>{window.verificationTimer&&clearInterval(window.verificationTimer)},[]);const q=()=>{let G=!0;const X={};let H=null;if(s.fullName||(X.fullName="  ",H=H||"fullName",G=!1),!s.phone)X.phone="  ",H=H||"phone",G=!1;else if(s.phone.startsWith("+1")||s.phone.startsWith("1")){const W=s.phone.replace(/^\+?1/,"").trim();/^\d{10}$/.test(W)||(X.phone="      (10 )",H=H||"phone",G=!1)}else/^(\+?963|0)?9\d{8}$/.test(s.phone)||(X.phone="     ",H=H||"phone",G=!1);return s.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.email)&&(X.email="    ",H=H||"email",G=!1),s.email&&!N.verified&&(X.email="     ",H=H||"email",G=!1),s.password?s.password.length<6&&(X.password="      6   ",H=H||"password",G=!1):(X.password="  ",H=H||"password",G=!1),s.confirmPassword?s.password!==s.confirmPassword&&(X.confirmPassword="   ",H=H||"confirmPassword",G=!1):(X.confirmPassword="   ",H=H||"confirmPassword",G=!1),a(X),H&&setTimeout(()=>{const W=document.querySelector(`[name="${H}"]`);W&&(W.scrollIntoView({behavior:"smooth",block:"center"}),W.focus())},100),G},M=()=>{let G=!0;const X={};let H=null;return(!s.professions||s.professions.length===0)&&(X.professions="     ",H=H||"professions-section",G=!1),(!s.specializations||s.specializations.length===0)&&(X.specializations="     ",H=H||"professions-section",G=!1),a(X),H&&setTimeout(()=>{const W=document.getElementById(H);W&&W.scrollIntoView({behavior:"smooth",block:"center"})},100),G},U=()=>{let G=!0;const X={};let H=null;return s.bio?s.bio.length<10&&(X.bio="    20   ",H=H||"bio",G=!1):(X.bio=" ",H=H||"bio",G=!1),a(X),H&&setTimeout(()=>{const W=document.querySelector(`[name="${H}"]`);W&&(W.scrollIntoView({behavior:"smooth",block:"center"}),W.focus())},100),G},V=async()=>{if(l===1){if(q()){E(!0);try{if(s.email&&(await Gr.checkEmailExists(s.email)).exists){a({...o,email:"        "}),E(!1),setTimeout(()=>{const H=document.getElementById("email");H&&(H.scrollIntoView({behavior:"smooth",block:"center"}),H.focus(),H.select(),H.classList.add("error-flash"),setTimeout(()=>{H.classList.remove("error-flash")},2e3))},100);return}if((await Gr.checkPhoneExists(s.phone)).exists){a({...o,phone:"        "}),E(!1),setTimeout(()=>{const X=document.getElementById("phone");X&&(X.scrollIntoView({behavior:"smooth",block:"center"}),X.focus(),X.select(),X.classList.add("error-flash"),setTimeout(()=>{X.classList.remove("error-flash")},2e3))},100);return}E(!1),c(2)}catch(G){console.error("Error checking credentials:",G),a({...o,general:"         "}),E(!1),setTimeout(()=>{const X=document.querySelector(".bg-red-100.border-red-400");X&&X.scrollIntoView({behavior:"smooth",block:"center"})},100)}}}else l===2&&M()&&(c(3),setTimeout(()=>{window.dispatchEvent(new Event("resize")),setTimeout(()=>{if(window.dispatchEvent(new Event("resize")),r.current){const G={lat:33.5138,lng:36.2765},X=2;i(W=>({...W,location:G,workRadius:X})),(async(W,te,ae)=>{try{const ve=`
                  [out:json];
                  (
                    way["highway"]["name"](around:${ae*1e3},${W},${te});
                    node["amenity"="hospital"](around:${ae*1e3},${W},${te});
                    node["amenity"="clinic"](around:${ae*1e3},${W},${te});
                    node["amenity"="doctors"](around:${ae*1e3},${W},${te});
                    node["amenity"="mosque"](around:${ae*1e3},${W},${te});
                    node["building"="mosque"](around:${ae*1e3},${W},${te});
                  );
                  out tags;
                `,Ie=await fetch("https://overpass-api.de/api/interpreter",{method:"POST",body:ve,headers:{"Content-Type":"text/plain"}});if(!Ie.ok)throw new Error(`HTTP error! status: ${Ie.status}`);const Fe=await Ie.json();if(!Fe||!Array.isArray(Fe.elements))return console.error("Invalid data structure from Overpass API:",Fe),{streets:[],hospitals:[],mosques:[]};const De=[],Ke=[],Je=[];return Fe.elements.forEach(dt=>{if(!dt.tags||!dt.tags.name)return;const Et=dt.tags.name.trim();dt.type==="way"&&dt.tags.highway?De.push(Et):dt.type==="node"&&(dt.tags.amenity==="hospital"||dt.tags.amenity==="clinic"||dt.tags.amenity==="doctors")?Ke.push(Et):dt.type==="node"&&(dt.tags.amenity==="mosque"||dt.tags.building==="mosque")&&Je.push(Et)}),{streets:[...new Set(De)],hospitals:[...new Set(Ke)],mosques:[...new Set(Je)]}}catch(ve){return console.error("Error fetching data:",ve),{streets:[],hospitals:[],mosques:[]}}})(G.lat,G.lng,X).then(W=>{console.log("   :",W);const te=W.streets.map(Ce=>({name:Ce}));h(te),i(Ce=>({...Ce,streetsInWorkRange:te.map(Ie=>Ie.name)}));const ae=W.mosques.map(Ce=>({name:Ce}));v(ae),i(Ce=>({...Ce,mosquesInWorkRange:ae.map(Ie=>Ie.name)}));const ve=W.hospitals.map(Ce=>({name:Ce}));p(ve),i(Ce=>({...Ce,hospitalsInWorkRange:ve.map(Ie=>Ie.name)}))}).catch(W=>{console.error("   :",W)})}},500)},100))},ne=()=>{l>1&&c(l-1)},J=async G=>{if(G&&G.preventDefault(),U()){E(!0);try{if(s.email&&(await Gr.checkEmailExists(s.email)).exists){a({...o,email:"        "}),E(!1),c(1),setTimeout(()=>{const ve=document.getElementById("email");ve&&(ve.scrollIntoView({behavior:"smooth",block:"center"}),ve.focus(),ve.select(),ve.classList.add("error-flash"),setTimeout(()=>{ve.classList.remove("error-flash")},2e3))},100);return}if((await Gr.checkPhoneExists(s.phone)).exists){a({...o,phone:"        "}),E(!1),c(1),setTimeout(()=>{const ae=document.getElementById("phone");ae&&(ae.scrollIntoView({behavior:"smooth",block:"center"}),ae.focus(),ae.select(),ae.classList.add("error-flash"),setTimeout(()=>{ae.classList.remove("error-flash")},2e3))},100);return}const H={name:s.fullName,phone:s.phone,email:s.email,password:s.password,userType:"craftsman",rememberMe:!0,profilePicture:s.image,craftsmanData:{professions:s.professions,specializations:s.specializations,location:s.location,workRadius:s.workRadius,bio:s.bio,streetsInWorkRange:s.streetsInWorkRange,hospitalsInWorkRange:s.hospitalsInWorkRange,mosquesInWorkRange:s.mosquesInWorkRange,workingHours:s.workingHours}};console.log("Registering craftsman with:",H);const W=await Gr.register(H);console.log("Registration response:",W);const te={...W.user,profession:s.professions.join(", "),specialization:s.specializations.join(", "),professions:s.professions,specializations:s.specializations,location:s.location,workRadius:s.workRadius,bio:s.bio,image:x||"/img/user-avatar.svg",rating:0,available:!0,gallery:[],streetsInWorkRange:s.streetsInWorkRange,hospitalsInWorkRange:s.hospitalsInWorkRange,mosquesInWorkRange:s.mosquesInWorkRange,workingHours:s.workingHours};console.log("User data for login:",te),e(te,"craftsman"),E(!1),t("/profile/my")}catch(X){console.error("Registration error:",X),a({...o,general:X.message||"   "}),E(!1),setTimeout(()=>{const H=document.querySelector(".bg-red-100.border-red-400");H&&H.scrollIntoView({behavior:"smooth",block:"center"})},100)}}};return d.createElement(ds,null,d.createElement("div",{className:`py-12 ${n?"bg-gray-900":"bg-gradient-to-br from-blue-50 to-indigo-100"} transition-colors duration-300`},d.createElement("div",{className:"container mx-auto px-4"},d.createElement("div",{className:`max-w-3xl mx-auto rounded-lg shadow-lg overflow-hidden border ${n?"bg-gray-800 text-gray-200 border-gray-700":"bg-white border-indigo-100"} transition-colors duration-300`},d.createElement("div",{className:"p-6"},d.createElement("h2",{className:`text-3xl font-bold text-center mb-6 ${n?"text-indigo-300":"text-indigo-800"} relative transition-colors duration-300`},d.createElement("span",{className:"relative z-10"}," "),d.createElement("span",{className:`absolute bottom-0 left-0 right-0 h-3 ${n?"bg-indigo-500":"bg-indigo-300"} opacity-40 transform -rotate-1 z-0`})),d.createElement("div",{className:"flex justify-between mb-8"},d.createElement("div",{className:"flex flex-col items-center"},d.createElement("div",{className:`w-10 h-10 rounded-full flex items-center justify-center shadow-md transition-all duration-300 ${l>=1?"bg-gradient-to-br from-indigo-500 to-indigo-700 text-white":"bg-gray-200 text-gray-600"}`},"1"),d.createElement("span",{className:"text-sm mt-1"}," ")),d.createElement("div",{className:"flex-1 h-1 self-center bg-gray-200 mx-2 rounded-full overflow-hidden"},d.createElement("div",{className:`h-full transition-all duration-500 ${l>=2?"bg-gradient-to-r from-indigo-400 to-indigo-600":"bg-gray-200"}`,style:{width:l>=2?"100%":"0%"}})),d.createElement("div",{className:"flex flex-col items-center"},d.createElement("div",{className:`w-10 h-10 rounded-full flex items-center justify-center shadow-md transition-all duration-300 ${l>=2?"bg-gradient-to-br from-indigo-500 to-indigo-700 text-white":"bg-gray-200 text-gray-600"}`},"2"),d.createElement("span",{className:"text-sm mt-1"}," ")),d.createElement("div",{className:"flex-1 h-1 self-center bg-gray-200 mx-2 rounded-full overflow-hidden"},d.createElement("div",{className:`h-full transition-all duration-500 ${l>=3?"bg-gradient-to-r from-indigo-400 to-indigo-600":"bg-gray-200"}`,style:{width:l>=3?"100%":"0%"}})),d.createElement("div",{className:"flex flex-col items-center"},d.createElement("div",{className:`w-10 h-10 rounded-full flex items-center justify-center shadow-md transition-all duration-300 ${l>=3?"bg-gradient-to-br from-indigo-500 to-indigo-700 text-white":"bg-gray-200 text-gray-600"}`},"3"),d.createElement("span",{className:"text-sm mt-1"}," "))),o.general&&d.createElement("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded"},o.general),w&&d.createElement("div",{className:"flex justify-center items-center py-4 mb-4"},d.createElement("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-500 ml-2"}),d.createElement("span",{className:"text-indigo-500"},l===1?"   ...":l===3?"  ...":" ...")),d.createElement("form",{onSubmit:G=>G.preventDefault()},l===1&&d.createElement("div",null,d.createElement(yr,{label:" ",type:"text",name:"fullName",id:"fullName",value:s.fullName,onChange:S,placeholder:"  ",error:o.fullName,required:!0}),d.createElement(yr,{label:" ",type:"tel",name:"phone",id:"phone",value:s.phone,onChange:S,placeholder:"  ",error:o.phone,required:!0}),d.createElement("div",{className:"mb-4"},d.createElement("label",{className:"block text-gray-700 font-medium mb-2"},"  ()"),d.createElement("div",{className:"flex items-center gap-2"},d.createElement("div",{className:"flex-grow"},d.createElement("input",{type:"email",name:"email",id:"email",value:s.email,onChange:S,placeholder:"  ",className:`input w-full ${o.email?"border-red-500 focus:ring-red-500":""} ${N.verified?"border-green-500":""}`,disabled:N.verified})),N.verified?d.createElement("div",{className:"bg-green-100 text-green-700 py-2 px-4 rounded-md flex items-center gap-1"},d.createElement(n8,{size:16})," "):d.createElement(wc,{type:"button",variant:"primary",isLoading:N.sending,loadingText:" ...",onClick:z,disabled:!s.email||!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.email),className:`text-white flex items-center justify-center gap-2 shadow-md hover:shadow-lg transition-all duration-200 relative overflow-hidden group py-2 px-4 ${n?"bg-gradient-to-r from-indigo-700 to-purple-800 hover:from-indigo-800 hover:to-purple-900":"bg-gradient-to-r from-blue-500 to-indigo-500 hover:from-blue-600 hover:to-indigo-600"}`},d.createElement("span",{className:"relative z-10 font-bold text-white flex items-center gap-1"},d.createElement(N4,{size:16}),"  "))),o.email&&d.createElement("p",{className:"text-red-500 text-sm mt-1"},o.email)),N.sent&&!N.verified&&d.createElement("div",{className:"mb-4 p-4 bg-blue-50 border border-blue-200 rounded-md"},d.createElement("h4",{className:"text-blue-700 font-medium mb-2"},"   "),d.createElement("p",{className:"text-gray-600 mb-3"},"      .          ."),d.createElement("div",{className:"flex flex-col gap-3"},d.createElement(Oe,{type:"button",variant:"primary",className:`text-white flex items-center justify-center gap-2 shadow-md hover:shadow-lg transition-all duration-200 relative overflow-hidden group py-2 px-4 ${n?"bg-gradient-to-r from-indigo-700 to-purple-800 hover:from-indigo-800 hover:to-purple-900":"bg-gradient-to-r from-blue-500 to-indigo-500 hover:from-blue-600 hover:to-indigo-600"}`,onClick:()=>window.open("https://mail.google.com","_blank")},d.createElement("span",{className:"relative z-10 font-bold text-white flex items-center gap-1"},d.createElement(N4,{size:16}),"  ")),d.createElement("div",{className:"flex items-center justify-between"},d.createElement("div",{className:"text-sm text-gray-500"},"   "," ",d.createElement("button",{type:"button",onClick:z,className:"text-indigo-600 hover:text-indigo-800 font-medium"},"  ")),d.createElement(wc,{type:"button",variant:"secondary",isLoading:!1,className:"text-indigo-600 border border-indigo-200 hover:bg-indigo-50 py-1 px-3 text-sm",onClick:()=>{try{const G=Zi.currentUser;G?G.reload().then(()=>{G.emailVerified?C(X=>({...X,verified:!0})):alert("      .       .")}).catch(X=>{console.error("Error reloading user:",X),alert("       .    .")}):alert("     .     .")}catch(G){console.error("Error checking verification status:",G),alert("       .    .")}}},d.createElement("span",null," "))))),d.createElement(yr,{label:" ",type:"password",name:"password",id:"password",value:s.password,onChange:S,placeholder:"  ",error:o.password,required:!0}),d.createElement(yr,{label:"  ",type:"password",name:"confirmPassword",id:"confirmPassword",value:s.confirmPassword,onChange:S,placeholder:"   ",error:o.confirmPassword,required:!0}),d.createElement("div",{className:"mb-4"},d.createElement("label",{className:"block text-gray-700 font-medium mb-2"},"   ()"),d.createElement("div",{className:"flex items-center"},d.createElement("div",{className:"w-20 h-20 bg-gradient-to-br from-gray-100 to-gray-200 rounded-full overflow-hidden mr-4 border-2 border-indigo-200 shadow-md"},x?d.createElement("img",{src:x,alt:"Preview",className:"w-full h-full object-cover"}):d.createElement("div",{className:"w-full h-full flex items-center justify-center text-indigo-400"},d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},d.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})))),d.createElement("input",{type:"file",id:"image",name:"image",accept:"image/*",onChange:Z,className:"hidden"}),d.createElement("label",{htmlFor:"image",className:`cursor-pointer text-white flex items-center justify-center gap-2 shadow-md hover:shadow-lg transition-all duration-200 relative overflow-hidden group py-2 px-4 rounded-md mr-2 ${n?"bg-gradient-to-r from-indigo-700 to-purple-800 hover:from-indigo-800 hover:to-purple-900":"bg-gradient-to-r from-blue-500 to-indigo-500 hover:from-blue-600 hover:to-indigo-600"}`},d.createElement("span",{className:"relative z-10 font-bold text-white"}," "),d.createElement("span",{className:"absolute inset-0 bg-white opacity-20 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-700"}))))),l===2&&d.createElement("div",null,d.createElement("div",{className:"mb-4",id:"professions-section"},d.createElement(NK,{professions:s.professions,specializations:s.specializations,onChange:T,errors:{professions:o.professions,specializations:o.specializations}})),d.createElement("div",{className:`p-4 rounded-md mb-4 border-r-4 shadow-sm ${n?"bg-gray-800 border-indigo-600":"bg-gradient-to-r from-indigo-50 to-blue-50 border-indigo-400"} transition-colors duration-300`},d.createElement("h3",{className:`text-lg font-medium mb-2 ${n?"text-indigo-300":""} transition-colors duration-300`}," "),d.createElement("p",{className:`mb-2 ${n?"text-gray-300":"text-gray-600"} transition-colors duration-300`},"     .       ."),d.createElement("p",{className:`${n?"text-gray-300":"text-gray-600"} transition-colors duration-300`},"        .")),d.createElement("div",{className:"mb-6"},d.createElement("h3",{className:`text-lg font-medium mb-4 ${n?"text-indigo-300":"text-indigo-700"}`}," "),d.createElement("p",{className:`mb-4 ${n?"text-gray-300":"text-gray-600"}`},"         "),d.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},d.createElement("div",{className:`p-4 rounded-lg shadow-sm ${n?"bg-gray-800":"bg-white"}`},d.createElement("div",{className:"flex justify-between items-center mb-3"},d.createElement("h4",{className:`font-medium ${n?"text-indigo-300":"text-indigo-600"}`}," "),d.createElement("div",{className:"flex gap-2"},d.createElement("button",{type:"button",onClick:()=>{const G={...s.workingHours};Object.keys(G).forEach(X=>{G[X]={...G[X],isWorking:!0}}),i({...s,workingHours:G})},className:`text-xs px-2 py-1 rounded-md ${n?"bg-indigo-700 text-white hover:bg-indigo-600":"bg-indigo-100 text-indigo-700 hover:bg-indigo-200"} transition-colors duration-200`}," "),d.createElement("button",{type:"button",onClick:()=>{const G={...s.workingHours};Object.keys(G).forEach(X=>{G[X]={...G[X],isWorking:!1}}),i({...s,workingHours:G})},className:`text-xs px-2 py-1 rounded-md ${n?"bg-gray-700 text-white hover:bg-gray-600":"bg-gray-100 text-gray-700 hover:bg-gray-200"} transition-colors duration-200`},"  "))),Object.entries({saturday:"",sunday:"",monday:"",tuesday:"",wednesday:"",thursday:"",friday:""}).map(([G,X])=>d.createElement("div",{key:G,className:"flex items-center mb-3"},d.createElement("input",{type:"checkbox",id:`working-${G}`,checked:s.workingHours[G].isWorking,onChange:H=>{const W=H.target.checked;i({...s,workingHours:{...s.workingHours,[G]:{...s.workingHours[G],isWorking:W}}})},className:"w-5 h-5 accent-indigo-600 ml-2"}),d.createElement("label",{htmlFor:`working-${G}`,className:`${n?"text-gray-300":"text-gray-700"} cursor-pointer`},X)))),d.createElement("div",{className:`p-4 rounded-lg shadow-sm ${n?"bg-gray-800":"bg-white"}`},d.createElement("h4",{className:`font-medium mb-3 ${n?"text-indigo-300":"text-indigo-600"}`}," "),Object.values(s.workingHours).some(G=>G.isWorking)?d.createElement("div",{className:"mb-3"},d.createElement("p",{className:`text-sm mb-3 ${n?"text-gray-300":"text-gray-600"}`},"      "),d.createElement("div",{className:"flex items-center gap-2 mb-4"},d.createElement("div",{className:"flex items-center"},d.createElement("span",{className:`ml-2 ${n?"text-gray-400":"text-gray-600"}`},""),d.createElement("input",{type:"time",value:s.workingHours.monday.from,onChange:G=>{const X={...s.workingHours};Object.keys(X).forEach(H=>{X[H].isWorking&&(X[H].from=G.target.value)}),i({...s,workingHours:X})},className:`p-1 rounded border ${n?"bg-gray-700 border-gray-600 text-gray-200":"bg-white border-gray-300"}`})),d.createElement("div",{className:"flex items-center"},d.createElement("span",{className:`ml-2 ${n?"text-gray-400":"text-gray-600"}`},""),d.createElement("input",{type:"time",value:s.workingHours.monday.to,onChange:G=>{const X={...s.workingHours};Object.keys(X).forEach(H=>{X[H].isWorking&&(X[H].to=G.target.value)}),i({...s,workingHours:X})},className:`p-1 rounded border ${n?"bg-gray-700 border-gray-600 text-gray-200":"bg-white border-gray-300"}`}))),d.createElement("div",{className:"mt-4"},d.createElement("h5",{className:`text-sm font-medium mb-2 ${n?"text-gray-300":"text-gray-600"}`},"  :"),d.createElement("div",{className:"flex flex-wrap gap-2"},Object.entries({saturday:"",sunday:"",monday:"",tuesday:"",wednesday:"",thursday:"",friday:""}).map(([G,X])=>s.workingHours[G].isWorking&&d.createElement("span",{key:`selected-${G}`,className:`px-2 py-1 rounded-full text-xs ${n?"bg-indigo-700 text-gray-200":"bg-indigo-100 text-indigo-800"}`},X))))):d.createElement("p",{className:`text-center py-4 ${n?"text-gray-400":"text-gray-500"}`},"    "))),d.createElement("div",{className:`mt-4 p-3 rounded-md ${n?"bg-gray-700":"bg-indigo-50"}`},d.createElement("p",{className:`text-sm ${n?"text-gray-300":"text-indigo-700"}`},d.createElement("span",{className:"font-bold"},":"),"             .         .")))),l===3&&d.createElement("div",null,d.createElement("div",{className:"mb-4"},d.createElement("label",{className:"block text-gray-700 font-medium mb-2"},"  "," ",d.createElement("span",{className:"text-red-500"},"*")),d.createElement("p",{className:"text-gray-600 mb-2"},"         ()."),d.createElement(DK,{ref:r,initialCenter:{lng:36.2765,lat:33.5138},initialZoom:13,onLocationSelect:I,onRadiusChange:P,onStreetsChange:R,onHospitalsChange:D,onMosquesChange:B,radius:s.workRadius,height:"400px",showRadius:!0}),d.createElement("div",{className:"mt-4 mb-4"},d.createElement("div",{className:"flex items-center justify-between mb-2"},d.createElement("div",{className:`text-sm ${n?"text-gray-400":"text-gray-600"} transition-colors duration-300`}," :"," ",d.createElement("span",{className:"font-bold text-indigo-600"},s.workRadius," "))),d.createElement("input",{type:"range",min:"1",max:"5",step:"0.5",value:s.workRadius,onChange:G=>{const X=parseFloat(G.target.value);P(X)},className:"w-full accent-indigo-500 mb-2"}),d.createElement("div",{className:"flex justify-between text-xs text-gray-500"},d.createElement("span",null,"1 "),d.createElement("span",null,"3 "),d.createElement("span",null,"5 "))),d.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"},d.createElement("div",{className:`p-4 rounded-md border-r-4 shadow-sm ${n?"bg-gray-800 border-indigo-600":"bg-gradient-to-r from-blue-50 to-indigo-50 border-blue-400"} transition-colors duration-300`},d.createElement("div",{className:"flex justify-between items-center mb-2"},d.createElement("h4",{className:`font-medium ${n?"text-indigo-300":""} transition-colors duration-300`},"   :"),w&&d.createElement("div",{className:"flex items-center"},d.createElement("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-indigo-500 mr-2"}),d.createElement("span",{className:"text-xs text-indigo-500"}," ..."))),d.createElement("ul",{className:`list-disc list-inside ${n?"text-gray-300":"text-gray-600"} transition-colors duration-300 max-h-40 overflow-y-auto`},!w&&u.length>0?u.map((G,X)=>d.createElement("li",{key:X,className:`flex justify-between items-center py-1 ${n?"text-gray-300":""} transition-colors duration-300`},d.createElement("span",null,G.name),d.createElement("button",{type:"button",onClick:H=>{H.preventDefault(),H.stopPropagation();const W=[...u];W.splice(X,1),h(W),i(te=>({...te,streetsInWorkRange:W.map(ae=>ae.name)}))},className:"text-red-500 hover:text-red-700 transition-colors duration-200"},d.createElement(fo,{size:16})))):w?null:d.createElement("li",{className:`${n?"text-gray-400":""} transition-colors duration-300`},"     ."))),d.createElement("div",{className:`p-4 rounded-md border-r-4 shadow-sm ${n?"bg-gray-800 border-indigo-600":"bg-gradient-to-r from-blue-50 to-indigo-50 border-blue-400"} transition-colors duration-300`},d.createElement("div",{className:"mb-4"},d.createElement("div",{className:"flex justify-between items-center mb-2"},d.createElement("h4",{className:`font-medium ${n?"text-indigo-300":""} transition-colors duration-300`},"   :"),w&&d.createElement("div",{className:"flex items-center"},d.createElement("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-indigo-500 mr-2"}),d.createElement("span",{className:"text-xs text-indigo-500"}," ..."))),d.createElement("ul",{className:`list-disc list-inside ${n?"text-gray-300":"text-gray-600"} transition-colors duration-300 max-h-20 overflow-y-auto`},!w&&y.length>0?y.map((G,X)=>d.createElement("li",{key:X,className:`flex justify-between items-center py-1 ${n?"text-gray-300":""} transition-colors duration-300`},d.createElement("span",null,G.name),d.createElement("button",{type:"button",onClick:H=>{H.preventDefault(),H.stopPropagation();const W=[...y];W.splice(X,1),v(W),i(te=>({...te,mosquesInWorkRange:W.map(ae=>ae.name)}))},className:"text-red-500 hover:text-red-700 transition-colors duration-200"},d.createElement(fo,{size:16})))):w?null:d.createElement("li",{className:`${n?"text-gray-400":""} transition-colors duration-300`},"     ."))),d.createElement("div",null,d.createElement("div",{className:"flex justify-between items-center mb-2"},d.createElement("h4",{className:`font-medium ${n?"text-indigo-300":""} transition-colors duration-300`},"   :"),w&&d.createElement("div",{className:"flex items-center"},d.createElement("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-indigo-500 mr-2"}),d.createElement("span",{className:"text-xs text-indigo-500"}," ..."))),d.createElement("ul",{className:`list-disc list-inside ${n?"text-gray-300":"text-gray-600"} transition-colors duration-300 max-h-20 overflow-y-auto`},!w&&m.length>0?m.map((G,X)=>d.createElement("li",{key:X,className:`flex justify-between items-center py-1 ${n?"text-gray-300":""} transition-colors duration-300`},d.createElement("span",null,G.name),d.createElement("button",{type:"button",onClick:H=>{H.preventDefault(),H.stopPropagation();const W=[...m];W.splice(X,1),p(W),i(te=>({...te,hospitalsInWorkRange:W.map(ae=>ae.name)}))},className:"text-red-500 hover:text-red-700 transition-colors duration-200"},d.createElement(fo,{size:16})))):w?null:d.createElement("li",{className:`${n?"text-gray-400":""} transition-colors duration-300`},"     .")))))),d.createElement("div",{className:"mb-4"},d.createElement("label",{className:"block text-gray-700 font-medium mb-2"},"  ",d.createElement("span",{className:"text-red-500"},"*")),d.createElement("textarea",{name:"bio",id:"bio",value:s.bio,onChange:S,placeholder:"     ...",className:`input min-h-[120px] ${o.bio?"border-red-500 focus:ring-red-500":""}`,required:!0}),o.bio&&d.createElement("p",{className:"text-red-500 text-sm mt-1"},o.bio))),d.createElement("div",{className:"flex justify-between mt-8 pt-4 border-t border-gray-200"},l>1?d.createElement(Oe,{type:"button",variant:"secondary",className:`transition-all duration-200 shadow-sm hover:shadow-md py-2 px-4 relative overflow-hidden group ${n?"border-gray-700 text-indigo-300 hover:bg-gray-700":"border-indigo-200 text-indigo-600 hover:bg-indigo-50"}`,onClick:ne},d.createElement("span",{className:"relative z-10 font-bold"},""),d.createElement("span",{className:`absolute inset-0 ${n?"bg-gray-600":"bg-indigo-50"} opacity-0 transform -skew-x-12 -translate-x-full group-hover:translate-x-full group-hover:opacity-100 transition-all duration-700`})):d.createElement("div",null),l<3?d.createElement(wc,{type:"button",variant:"primary",isLoading:w&&l===1,loadingText:l===1?" ...":" ...",className:`text-white flex items-center justify-center gap-2 shadow-md hover:shadow-lg transition-all duration-200 relative overflow-hidden group py-3 px-6 text-lg ${n?"bg-gradient-to-r from-indigo-700 to-purple-800 hover:from-indigo-800 hover:to-purple-900":"bg-gradient-to-r from-blue-500 to-indigo-500 hover:from-blue-600 hover:to-indigo-600"}`,onClick:V},d.createElement("span",{className:"relative z-10 font-bold text-white"},""),d.createElement("span",{className:"absolute inset-0 bg-white opacity-20 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-700"})):d.createElement(wc,{type:"button",variant:"primary",isLoading:w&&l===3,loadingText:"  ...",className:`text-white flex items-center justify-center gap-2 shadow-md hover:shadow-lg transition-all duration-200 relative overflow-hidden group py-3 px-6 text-lg ${n?"bg-gradient-to-r from-indigo-700 to-purple-800 hover:from-indigo-800 hover:to-purple-900":"bg-gradient-to-r from-blue-500 to-indigo-500 hover:from-blue-600 hover:to-indigo-600"}`,onClick:J},d.createElement("span",{className:"relative z-10 font-bold text-white"}," "),d.createElement("span",{className:"absolute inset-0 bg-white opacity-20 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-700"})))),d.createElement("div",{className:"mt-8 text-center"},d.createElement("p",{className:`${n?"text-gray-300":"text-indigo-600"} text-lg`},"       "," ",d.createElement(at,{to:"/register/client",className:`${n?"text-indigo-400":"text-indigo-600"} font-medium hover:text-indigo-800 transition-colors duration-200 border-b-2 border-indigo-200 hover:border-indigo-600 relative inline-block group`},d.createElement("span",{className:"relative z-10"},"    "),d.createElement("span",{className:"absolute bottom-0 left-0 right-0 h-1 bg-indigo-100 transform scale-x-0 group-hover:scale-x-100 transition-transform duration-300 origin-left"})))))))))},iN=[{code:"+963",country:"",flag:"SY"},{code:"+966",country:"",flag:"SA"},{code:"+971",country:"",flag:"AE"},{code:"+20",country:"",flag:"EG"},{code:"+962",country:"",flag:"JO"},{code:"+961",country:"",flag:"LB"},{code:"+974",country:"",flag:"QA"},{code:"+965",country:"",flag:"KW"},{code:"+968",country:"",flag:"OM"},{code:"+973",country:"",flag:"BH"}],uYe=({value:t,onChange:e,disabled:n})=>{const{darkMode:r}=We(),[s,i]=A.useState(!1),o=A.useRef(null),a=iN.find(c=>c.code===t)||iN[0];A.useEffect(()=>{const c=u=>{o.current&&!o.current.contains(u.target)&&i(!1)};return document.addEventListener("mousedown",c),()=>{document.removeEventListener("mousedown",c)}},[]);const l=c=>{e(c.code),i(!1)};return d.createElement("div",{className:"relative h-full",ref:o},d.createElement("button",{type:"button",className:`flex items-center justify-between px-3 py-2 w-full h-full ${r?"bg-gray-800 text-gray-200":"bg-white text-gray-700"} ${n?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,onClick:()=>{n||(console.log("Country code button clicked, toggling dropdown"),i(!s))},disabled:n},d.createElement("div",{className:"flex items-center"},d.createElement("span",{className:"text-sm font-medium"},a.code),d.createElement("span",{className:"mx-1 text-xs font-bold bg-indigo-100 text-indigo-800 rounded px-1 py-0.5"},a.flag)),d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-4 w-4 transition-transform ${s?"transform rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},d.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"}))),s&&d.createElement("div",{className:`absolute z-50 mt-1 left-0 w-64 rounded-md shadow-lg ${r?"bg-gray-800 border border-gray-700":"bg-white border border-gray-200"}`,style:{maxHeight:"300px",overflowY:"auto"}},d.createElement("ul",{className:`py-1 max-h-60 overflow-auto ${r?"text-gray-200":"text-gray-700"}`},iN.map(c=>d.createElement("li",{key:c.code,className:`px-3 py-2 flex items-center justify-between cursor-pointer ${r?"hover:bg-gray-700":"hover:bg-indigo-50"} ${c.code===t?r?"bg-indigo-900/30 font-medium":"bg-indigo-50 font-medium":""}`,onClick:()=>{console.log("Selected country code:",c.code),l(c)}},d.createElement("div",{className:"flex items-center"},d.createElement("span",{className:"text-sm"},c.country)),d.createElement("div",{className:"flex items-center"},d.createElement("span",{className:"ml-2"},c.code),d.createElement("span",{className:"mr-2 ml-2 text-xs font-bold bg-indigo-100 text-indigo-800 rounded px-1 py-0.5"},c.flag)))))))},dYe=()=>{var R;const t=Lr(),e=Qo(),n=Dt(D=>D.login),r=We(D=>D.darkMode),s=(R=e.state)==null?void 0:R.googleProfile,[i,o]=A.useState(1),[a,l]=A.useState(!1),[c,u]=A.useState({name:(s==null?void 0:s.name)||"",phone:"",countryCode:"+963",email:(s==null?void 0:s.email)||"",password:"",confirmPassword:"",otp:"",googleId:(s==null?void 0:s.googleId)||"",image:(s==null?void 0:s.picture)||""}),[h,m]=A.useState({}),[p,y]=A.useState(!1),[v,x]=A.useState(!1),[b,w]=A.useState(0),E=A.useRef(null);A.useEffect(()=>()=>{if(window.recaptchaVerifier)try{window.recaptchaVerifier.clear(),window.recaptchaVerifier=null}catch(D){console.error("Error clearing recaptcha:",D)}},[]),A.useEffect(()=>{s&&(setRegisterMethod("email"),u(D=>({...D,name:s.name||D.name,email:s.email||D.email,googleId:s.googleId||D.googleId,image:s.picture||D.image})))},[s]);const N=D=>{const{name:B,value:Z}=D.target;u({...c,[B]:Z}),h[B]&&m({...h,[B]:""})},C=()=>{let D=!0;const B={};if(c.name?c.name.length<3&&(B.name="     3   ",D=!1):(B.name=" ",D=!1),!c.phone)B.phone="  ",D=!1;else if(c.countryCode==="+963"){const Z=c.phone.replace(/^0+/,"").replace(/\D/g,"");/^9\d{8}$/.test(Z)||(B.phone="      (9    9)",D=!1)}else if(c.countryCode==="+1"){const Z=c.phone.replace(/\D/g,"");console.log("Validating US phone:",Z),Z.length!==10&&(B.phone="      (10 )",D=!1)}else{const Z=c.phone.replace(/^0+/,"").replace(/\D/g,"");(Z.length<7||Z.length>15)&&(B.phone="    ",D=!1)}return c.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(c.email)||(B.email="    ",D=!1):(B.email="  ",D=!1),c.password?c.password.length<6&&(B.password="      6   ",D=!1):(B.password="  ",D=!1),c.confirmPassword?c.confirmPassword!==c.password&&(B.confirmPassword="   ",D=!1):(B.confirmPassword="   ",D=!1),m(B),D};A.useEffect(()=>{let D;return b>0?D=setTimeout(()=>{w(b-1)},1e3):x(!1),()=>clearTimeout(D)},[b]);const S=async()=>{try{y(!0),m({});const D=await Ec.registerWithEmailAndPassword(c.email,c.password,c.name);if(!D.success)throw new Error(D.error.message);return console.log("Email registration response:",D),u({...c,uid:D.user.uid}),l(!0),x(!0),w(60),o(2),!0}catch(D){return console.error("Error sending verification code:",D),D.message&&D.message.includes("")?m({...h,general:d.createElement("div",null,d.createElement("p",null,D.message),d.createElement("button",{type:"button",onClick:()=>setRegisterMethod("email"),className:"mt-2 text-indigo-600 hover:text-indigo-800 underline"},"      "))}):m({...h,general:D.message||"     "}),!1}finally{y(!1)}},T=async()=>{if(!v){y(!0);try{const D=Ec.getCurrentUser();if(D)await Ec.sendEmailVerificationAgain(D),x(!0),w(60),m({...h,general:"     .     ."});else throw new Error("    ")}catch(D){console.error("Error resending verification email:",D),m({...h,general:D.message||"      "})}finally{y(!1)}}},I=async D=>{if(D.preventDefault(),C()){y(!0);try{const B=c.phone.replace(/\D/g,"").replace(/^0+/,""),Z=c.countryCode||"+963";let z;if(Z==="+1")if(B.length===10)z=Z+B;else{m({...h,phone:"      (10 )"}),y(!1);return}else z=Z+B;if(console.log("Checking phone number:",z),(await Gr.checkPhoneExists(z)).exists){m({...h,phone:"        "}),y(!1);return}if((await Gr.checkEmailExists(c.email)).exists){m({...h,email:"        "}),y(!1);return}await S()}catch(B){console.error("Error checking existing account:",B),m({...h,general:B.message||"     "}),y(!1)}}},P=async D=>{D.preventDefault(),y(!0);try{const B=Ec.getCurrentUser();if(B)if(B.emailVerified){const Z=c.phone.replace(/\D/g,"").replace(/^0+/,""),q=(c.countryCode||"+963")+Z,M={uid:B.uid,name:c.name,phone:q,email:B.email,userType:"client",googleId:c.googleId||null,image:c.image||B.photoURL||null};console.log("Registering client with Firebase:",M);const U=await Gr.registerFirebaseUser(M);console.log("Registration response:",U),n(U.user||M,"client"),t("/home")}else m({...h,general:"     "});else m({...h,general:"   "}),o(1)}catch(B){console.error("Registration error:",B),m({...h,general:B.message||"   "})}finally{y(!1)}};return d.createElement(ds,{hideFooter:!0},d.createElement("div",{className:`min-h-screen py-12 ${r?"bg-gray-900":"bg-gradient-to-br from-blue-50 to-indigo-100"} transition-colors duration-300`},d.createElement("div",{className:"container mx-auto px-4"},d.createElement(At.div,{className:`max-w-lg mx-auto rounded-lg shadow-xl overflow-hidden border-2 ${r?"bg-gray-800 border-gray-700":"bg-white border-indigo-200"} transition-colors duration-300`,initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{duration:.5,ease:"easeOut"}},d.createElement("div",{className:"p-6"},d.createElement("h2",{className:`text-2xl font-bold text-center mb-4 ${r?"text-indigo-300":"text-indigo-800"} relative transition-colors duration-300`},d.createElement("span",{className:"relative z-10"},"  "),d.createElement("span",{className:`absolute bottom-0 left-0 right-0 h-3 ${r?"bg-indigo-500":"bg-indigo-300"} opacity-40 transform -rotate-1 z-0`})),d.createElement("div",{className:"mb-4 text-center"},d.createElement("p",{className:`${r?"text-gray-300":"text-gray-600"} text-sm`},"        ")),h.general&&d.createElement("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded"},(typeof h.general=="string",h.general)),d.createElement("div",{id:"recaptcha-container",ref:E}),i===1?d.createElement("form",{onSubmit:I},d.createElement(yr,{label:" ",type:"text",name:"name",value:c.name,onChange:N,placeholder:"  ",error:h.name,required:!0,className:"text-base py-2 border-indigo-200 focus:border-indigo-500 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 mb-3"}),d.createElement("div",{className:"mb-3"},d.createElement("label",{className:"block text-indigo-700 font-medium mb-2"}," "),d.createElement("div",{className:"grid grid-cols-3 gap-2"},d.createElement("div",{className:"col-span-2 rounded-md border border-indigo-200 focus-within:border-indigo-500 focus-within:ring focus-within:ring-indigo-200 focus-within:ring-opacity-50"},d.createElement("input",{type:"tel",name:"phone",value:c.phone,onChange:N,placeholder:"  ",required:!0,className:"w-full py-2 px-3 outline-none border-0 focus:ring-0 text-base",dir:"ltr"})),d.createElement("div",{className:"relative rounded-md border border-indigo-200 focus-within:border-indigo-500 focus-within:ring focus-within:ring-indigo-200 focus-within:ring-opacity-50"},d.createElement(uYe,{value:c.countryCode||"+963",onChange:D=>{console.log("Country code changed to:",D),u({...c,countryCode:D})},disabled:p}))),h.phone&&d.createElement("p",{className:"mt-1 text-sm text-red-600"},h.phone)),d.createElement(yr,{label:" ",type:"email",name:"email",value:c.email,onChange:N,placeholder:"  ",error:h.email,required:!0,className:"text-base py-2 border-indigo-200 focus:border-indigo-500 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 mb-3",dir:"ltr"}),d.createElement(yr,{label:" ",type:"password",name:"password",value:c.password,onChange:N,placeholder:"  ",error:h.password,required:!0,className:"text-base py-2 border-indigo-200 focus:border-indigo-500 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 "}),d.createElement(yr,{label:"  ",type:"password",name:"confirmPassword",value:c.confirmPassword,onChange:N,placeholder:"   ",error:h.confirmPassword,required:!0,className:"text-base py-2 border-indigo-200 focus:border-indigo-500 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"}),d.createElement(wc,{type:"submit",variant:"primary",fullWidth:!0,isLoading:p,loadingText:" ...",className:"mt-4 bg-gradient-to-r from-blue-500 to-indigo-500 hover:from-blue-600 hover:to-indigo-600 text-white transition-all duration-200 shadow-md hover:shadow-lg text-base py-2 relative overflow-hidden group"},d.createElement("span",{className:"relative z-10"},""),d.createElement("span",{className:"absolute inset-0 bg-white opacity-20 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-700"}))):d.createElement("form",{onSubmit:P},d.createElement("div",{className:`mb-6 p-4 rounded-lg ${r?"bg-indigo-900/20":"bg-indigo-50"} border ${r?"border-indigo-800":"border-indigo-200"}`},d.createElement("div",{className:"flex items-center mb-3"},d.createElement("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${r?"bg-indigo-800":"bg-indigo-100"} mr-3`},d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-5 w-5 ${r?"text-indigo-300":"text-indigo-600"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},d.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"}))),d.createElement("div",null,d.createElement("h3",{className:`font-bold ${r?"text-indigo-300":"text-indigo-700"}`},"   "),d.createElement("p",{className:`text-sm ${r?"text-gray-400":"text-gray-600"}`},"    "," ",d.createElement("span",{className:"font-medium"},c.email)))),d.createElement("div",{className:"mt-4 p-4 bg-white rounded-lg border border-indigo-100 shadow-sm"},d.createElement("p",{className:"text-gray-700 mb-3"},"   :"),d.createElement("ol",{className:"list-decimal list-inside space-y-2 text-gray-600 text-sm"},d.createElement("li",null,"  "),d.createElement("li",null,"    JobScope"),d.createElement("li",null,"     "),d.createElement("li",null,'       "  "'))),d.createElement("div",{className:"flex justify-between items-center mt-4"},d.createElement("button",{type:"button",className:`text-sm ${r?"text-indigo-400":"text-indigo-600"} hover:underline flex items-center`,onClick:()=>o(1)},d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},d.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 17l-5-5m0 0l5-5m-5 5h12"}))," "),d.createElement("button",{type:"button",className:`text-sm ${r?"text-indigo-400":"text-indigo-600"} hover:underline flex items-center ${v?"opacity-50 cursor-not-allowed":""}`,onClick:T,disabled:v},d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},d.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})),v?`  (${b})`:"   "))),d.createElement(wc,{type:"submit",variant:"primary",fullWidth:!0,isLoading:p,loadingText:" ...",className:`mt-4 ${r?"bg-gradient-to-r from-indigo-700 to-blue-700 hover:from-indigo-800 hover:to-blue-800":"bg-gradient-to-r from-indigo-600 to-blue-600 hover:from-indigo-700 hover:to-blue-700"} text-white transition-all duration-200 shadow-md hover:shadow-lg text-base py-2 relative overflow-hidden group`},d.createElement("span",{className:"relative z-10"},"  "),d.createElement("span",{className:"absolute inset-0 bg-white opacity-20 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-700"})),d.createElement("div",{className:"mt-4 text-center"},d.createElement("p",{className:"text-sm text-gray-600 mb-2"},"     "),d.createElement("button",{type:"button",className:`text-sm ${r?"text-indigo-400":"text-indigo-600"} hover:underline`,onClick:()=>t("/login")},"    "))),d.createElement("div",{className:"mt-6 text-center"},d.createElement("p",{className:`${r?"text-gray-300":"text-indigo-600"} text-sm mb-3`},"      "," ",d.createElement(at,{to:"/register/craftsman",className:`${r?"text-indigo-400":"text-indigo-600"} font-medium hover:text-indigo-800 transition-colors duration-200 border-b-2 border-indigo-200 hover:border-indigo-600 relative inline-block group`},d.createElement("span",{className:"relative z-10"},"   "),d.createElement("span",{className:"absolute bottom-0 left-0 right-0 h-1 bg-indigo-100 transform scale-x-0 group-hover:scale-x-100 transition-transform duration-300 origin-left"})))),d.createElement("div",{className:"mt-4 text-center"},d.createElement(at,{to:"/",className:"text-indigo-500 text-sm hover:text-indigo-700 transition-colors duration-200 border-b border-transparent hover:border-indigo-500 inline-block"},"   ")))))))},pt=({children:t,className:e="",onClick:n,...r})=>d.createElement("div",{className:`card ${n?"cursor-pointer hover:shadow-lg transition-shadow":""} ${e}`,onClick:n,...r},t),Ud=({src:t,alt:e,className:n,placeholderClassName:r,onError:s})=>{const[i,o]=A.useState(!1),[a,l]=A.useState(!1),[c,u]=A.useState(""),[h,m]=A.useState(!1),[p,y]=A.useState(!1),v=A.useRef();A.useEffect(()=>{const w=new IntersectionObserver(E=>{E[0].isIntersecting&&(l(!0),w.disconnect())},{threshold:.1});return v.current&&w.observe(v.current),()=>{v.current&&w.disconnect()}},[]),A.useEffect(()=>{if(m(!1),y(!1),!t)u("/img/user-avatar.svg");else if(t.startsWith("data:"))u(t);else if(t.startsWith("https://jobscope-8t58.onrender.com/uploads/")){const w=t.replace("https://jobscope-8t58.onrender.com","");u(w),y(!0)}else t.startsWith("http")?u(t):t.startsWith("/uploads/")?(u(t),y(!0)):t.startsWith("/")?u(t):u(`${U_}${t.startsWith("/")?"":"/"}${t}`)},[t]);const x=()=>{console.log("Image loaded successfully:",c),o(!0)},b=()=>{if(console.log("Error loading image:",c),!h){if(m(!0),o(!0),p){const w=`${U_}${c}`;console.log("Trying full URL:",w),u(w),y(!1);return}if(c.startsWith("https://jobscope-8t58.onrender.com")){const w=c.replace("https://jobscope-8t58.onrender.com","");console.log("Trying relative path:",w),u(w);return}c.includes("user-avatar.svg")||(console.log("Switching to default user avatar"),u("/img/user-avatar.svg"))}s&&s()};return d.createElement("div",{ref:v,className:n||""},a?d.createElement(d.Fragment,null,d.createElement("img",{src:c,alt:e,className:`${n||""} ${i?"block":"hidden"}`,onLoad:x,onError:b}),!i&&d.createElement("div",{className:r||`${n||""} bg-gray-200 animate-pulse`})):d.createElement("div",{className:r||`${n||""} bg-gray-200`}))},hYe=(t,e)=>{let n=!1;for(let r=0,s=e.length-1;r<e.length;s=r++){const i=e[r].lng,o=e[r].lat,a=e[s].lng,l=e[s].lat;o>t.lat!=l>t.lat&&t.lng<(a-i)*(t.lat-o)/(l-o)+i&&(n=!n)}return n},Lg=Fl((t,e)=>({craftsmen:[],filteredCraftsmen:[],loading:!1,error:null,fetchCraftsmen:async()=>{if(e().loading||e().craftsmen.length>0)return e().craftsmen;t({loading:!0,error:null});try{const n=await Q_.getAllCraftsmen();n&&(Array.isArray(n)?n.length>0:n.craftsmen&&n.craftsmen.length>0)&&console.log("API Response:",n);const r=Array.isArray(n)?n:n.craftsmen||[];return t({craftsmen:r,filteredCraftsmen:r,loading:!1}),r}catch(n){return console.error("Error fetching craftsmen:",n),t({craftsmen:[],filteredCraftsmen:[],loading:!1,error:n.message}),[]}},fetchCraftsman:async n=>{t({loading:!0,error:null});try{const r=e().craftsmen.find(o=>o.id===parseInt(n)||o.id===n);if(r)return t({loading:!1}),r;const s=await Q_.getCraftsmanById(n);console.log("Craftsman data from API:",s);const i=s.craftsman||s;return i&&!i.id&&i._id&&(i.id=i._id),t(o=>({craftsmen:[...o.craftsmen,i],loading:!1})),i}catch(r){return console.error("Error fetching craftsman:",r),t({loading:!1,error:r.message}),null}},filterCraftsmen:({profession:n,professions:r,specialization:s,available:i,rating:o,location:a,radius:l,serviceAreas:c})=>{t(u=>{let h=[...u.craftsmen];if(console.log("  :"),console.log("-   :",u.craftsmen.length),console.log("-  :",n),console.log("-  :",r),u.craftsmen.length>0&&console.log("   :",JSON.stringify(u.craftsmen[0],null,2)),r&&r.length>0){console.log("  :",r);const m=r.map(p=>typeof p=="string"?p.trim().toLowerCase():typeof p=="object"&&p.name?p.name.trim().toLowerCase():"").filter(p=>p!=="");console.log("   :",m),h=h.filter(p=>{console.log(` : ${p.name}, :`,p.professions||p.profession||" ");let y=[];p.professions&&Array.isArray(p.professions)&&p.professions.length>0&&(y=[...y,...p.professions.map(x=>typeof x=="string"?x.trim().toLowerCase():typeof x=="object"&&x.name?x.name.trim().toLowerCase():"").filter(x=>x!=="")]),p.profession&&(typeof p.profession=="string"?y.push(p.profession.trim().toLowerCase()):typeof p.profession=="object"&&p.profession.name&&y.push(p.profession.name.trim().toLowerCase())),p.profession_id,console.log("   :",y);const v=m.some(x=>y.includes(x));return v&&console.log(` ${p.name}    `),v}),console.log(`   : ${h.length}  `)}else if(n){console.log("   :",n);let m="";typeof n=="string"?m=n.trim().toLowerCase():typeof n=="object"&&n.name&&(m=n.name.trim().toLowerCase()),console.log("   :",m),h=h.filter(p=>{let y=[];p.professions&&Array.isArray(p.professions)&&p.professions.length>0&&(y=[...y,...p.professions.map(x=>typeof x=="string"?x.trim().toLowerCase():typeof x=="object"&&x.name?x.name.trim().toLowerCase():"").filter(x=>x!=="")]),p.profession&&(typeof p.profession=="string"?y.push(p.profession.trim().toLowerCase()):typeof p.profession=="object"&&p.profession.name&&y.push(p.profession.name.trim().toLowerCase()));const v=y.includes(m);return v&&console.log(` ${p.name}    `),v}),console.log(`    : ${h.length}  `)}return s&&(h=h.filter(m=>m.specialization===s)),i!==void 0&&(h=h.filter(m=>m.available===i)),o&&(h=h.filter(m=>m.rating>=o)),a&&l&&(h=h.filter(m=>{const p=m.latitude||m.location&&m.location.lat,y=m.longitude||m.location&&m.location.lng;if(!p||!y)return console.log("Craftsman without location:",m),!1;const v=6371,x=(a.lat-p)*Math.PI/180,b=(a.lng-y)*Math.PI/180,w=Math.sin(x/2)*Math.sin(x/2)+Math.cos(p*Math.PI/180)*Math.cos(a.lat*Math.PI/180)*Math.sin(b/2)*Math.sin(b/2),E=2*Math.atan2(Math.sqrt(w),Math.sqrt(1-w));return v*E<=l})),c&&c.length>0&&(console.log("      :",c),h=h.filter(m=>{const p=m.latitude||m.location&&m.location.lat,y=m.longitude||m.location&&m.location.lng;return!p||!y?!1:c.some(v=>{if(v.type==="polygon")return hYe({lat:p,lng:y},v.coordinates.map(x=>({lat:x[0],lng:x[1]})));if(v.type==="circle"){const b=(v.center[0]-p)*Math.PI/180,w=(v.center[1]-y)*Math.PI/180,E=Math.sin(b/2)*Math.sin(b/2)+Math.cos(p*Math.PI/180)*Math.cos(v.center[0]*Math.PI/180)*Math.sin(w/2)*Math.sin(w/2);return 6371*(2*Math.atan2(Math.sqrt(E),Math.sqrt(1-E)))<=v.radius/1e3}return!1})})),{filteredCraftsmen:h}})},getCraftsmanById:n=>Lg.getState().craftsmen.find(r=>r.id===parseInt(n))})),My=Fl(Xc((t,e)=>({reviews:[{id:1,bookingId:1,craftsmanId:1,clientId:1,overallRating:5,qualityRating:5,punctualityRating:4,priceRating:5,communicationRating:5,comment:"          .   .",images:["https://images.unsplash.com/photo-1621905252507-b35492cc74b4?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2069&q=80","https://images.unsplash.com/photo-1581141849291-1125c7b692b5?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80"],createdAt:"2023-06-15T10:30:00.000Z"},{id:2,bookingId:2,craftsmanId:1,clientId:2,overallRating:4,qualityRating:4,punctualityRating:3,priceRating:4,communicationRating:5,comment:"   .     .",images:[],createdAt:"2023-06-02T14:20:00.000Z"},{id:3,bookingId:3,craftsmanId:1,clientId:3,overallRating:5,qualityRating:5,punctualityRating:5,priceRating:4,communicationRating:5,comment:"     .     .     .",images:["https://images.unsplash.com/photo-1504148455328-c376907d081c?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80"],createdAt:"2023-05-20T09:15:00.000Z"},{id:4,bookingId:4,craftsmanId:2,clientId:1,overallRating:5,qualityRating:5,punctualityRating:5,priceRating:4,communicationRating:5,comment:"     .     .",images:["https://images.unsplash.com/photo-1621905252507-b35492cc74b4?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2069&q=80"],createdAt:"2023-06-10T11:45:00.000Z"},{id:5,bookingId:5,craftsmanId:2,clientId:2,overallRating:4,qualityRating:4,punctualityRating:3,priceRating:5,communicationRating:4,comment:"   .        .",images:[],createdAt:"2023-05-28T16:30:00.000Z"},{id:6,bookingId:6,craftsmanId:2,clientId:3,overallRating:5,qualityRating:5,punctualityRating:4,priceRating:5,communicationRating:5,comment:"  .        .   .",images:["https://images.unsplash.com/photo-1581141849291-1125c7b692b5?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80"],createdAt:"2023-06-18T13:20:00.000Z"},{id:7,bookingId:7,craftsmanId:2,clientId:1,overallRating:4,qualityRating:5,punctualityRating:3,priceRating:4,communicationRating:4,comment:"         .    .",images:[],createdAt:"2023-06-05T10:15:00.000Z"},{id:8,bookingId:8,craftsmanId:2,clientId:4,overallRating:5,qualityRating:5,punctualityRating:5,priceRating:4,communicationRating:5,comment:"     .     .     .",images:["https://images.unsplash.com/photo-1504148455328-c376907d081c?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80"],createdAt:"2023-06-22T14:30:00.000Z"}],addReview:n=>{const r={...n,id:Date.now(),createdAt:new Date().toISOString()};return t(s=>({reviews:[...s.reviews,r]})),r},getCraftsmanReviews:n=>{const{reviews:r}=e(),s=Number(n);return r.filter(i=>i.craftsmanId===s)},getReviewById:n=>{const{reviews:r}=e();return r.find(s=>s.id===n)},getCraftsmanAverageRating:n=>{const r=e().getCraftsmanReviews(n);return r.length===0?0:(r.reduce((i,o)=>i+o.overallRating,0)/r.length).toFixed(1)},getCraftsmanDetailedRatings:n=>{const r=Number(n),s=e().getCraftsmanReviews(r);if(s.length===0)return{quality:0,punctuality:0,price:0,communication:0,overall:0};const i=s.reduce((u,h)=>u+h.qualityRating,0)/s.length,o=s.reduce((u,h)=>u+h.punctualityRating,0)/s.length,a=s.reduce((u,h)=>u+h.priceRating,0)/s.length,l=s.reduce((u,h)=>u+h.communicationRating,0)/s.length,c=s.reduce((u,h)=>u+h.overallRating,0)/s.length;return{quality:i.toFixed(1),punctuality:o.toFixed(1),price:a.toFixed(1),communication:l.toFixed(1),overall:c.toFixed(1)}}}),{name:"jobscope-reviews-storage"})),xm=Fl(Xc((t,e)=>({bookings:[{id:1,craftsmanId:1,craftsmanName:" ",craftsmanPhone:"+963 912 345 678",clientId:2,clientName:" ",clientPhone:"0923456789",date:"2023-06-15",time:"14:30",description:"       ",status:"completed",createdAt:"2023-06-10T10:30:00.000Z",reviewId:1},{id:2,craftsmanId:3,craftsmanName:" ",craftsmanPhone:"+963 934 567 890",clientId:2,clientName:" ",clientPhone:"0923456789",date:"2023-06-20",time:"10:00",description:"         ",status:"pending",createdAt:"2023-06-18T09:15:00.000Z"},{id:3,craftsmanId:2,craftsmanName:" ",craftsmanPhone:"+963 945 678 901",clientId:2,clientName:" ",clientPhone:"0923456789",date:"2023-06-25",time:"16:00",description:"    ",status:"completed",createdAt:"2023-06-20T11:45:00.000Z"},{id:4,craftsmanId:1,craftsmanName:" ",craftsmanPhone:"+963 912 345 678",clientId:3,clientName:" ",clientPhone:"0956789012",date:"2023-06-18",time:"09:30",description:"    ",status:"completed",createdAt:"2023-06-15T08:20:00.000Z",reviewId:4},{id:5,craftsmanId:2,craftsmanName:" ",craftsmanPhone:"+963 945 678 901",clientId:4,clientName:" ",clientPhone:"0967890123",date:"2023-06-22",time:"11:00",description:"    ",status:"completed",createdAt:"2023-06-19T14:10:00.000Z",reviewId:5}],addBooking:n=>{const r={...n,id:Date.now(),status:"pending",createdAt:new Date().toISOString(),canEdit:!0};t(i=>({bookings:[...i.bookings,r]}));const s=Dt.getState().userType;return da.createBookingNotification(r,s),r},updateBookingStatus:(n,r)=>{let s=null;if(t(i=>({bookings:i.bookings.map(a=>a.id===n?(s={...a,status:r,updatedAt:new Date().toISOString()},s):a)})),s){const i=Dt.getState().userType;da.createStatusChangeNotification(s,r,i)}},updateBooking:(n,r)=>{t(s=>({bookings:s.bookings.map(i=>i.id===n?{...i,...r,updatedAt:new Date().toISOString()}:i)}))},canEditBooking:n=>{const r=e().getBookingById(n);if(!r)return!1;const s=new Date(r.createdAt);return(new Date-s)/(1e3*60)<=5},addReview:(n,r)=>{const s=e().getBookingById(n);if(!s)return console.error("No se encontr la reserva con ID:",n),null;if(s.reviewId)return console.warn("Esta reserva ya tiene una evaluacin"),null;const i={bookingId:n,craftsmanId:s.craftsmanId,clientId:s.clientId,overallRating:r.overallRating,qualityRating:r.qualityRating,punctualityRating:r.punctualityRating,priceRating:r.priceRating,communicationRating:r.communicationRating,comment:r.comment,images:r.images||[]};try{const o=My.getState().addReview(i);return console.log("Evaluacin creada:",o),t(a=>({bookings:a.bookings.map(l=>l.id===n?{...l,reviewId:o.id,status:"completed"}:l)})),da.createReviewNotification(o,s),o}catch(o){return console.error("Error al aadir la evaluacin:",o),null}},getUserBookings:(n,r)=>{const{bookings:s}=e();let i=[];return r==="client"?i=s.filter(o=>o.clientId===n):r==="craftsman"&&(i=s.filter(o=>o.craftsmanId===n)),i.sort((o,a)=>new Date(a.createdAt)-new Date(o.createdAt))},getBookingById:n=>{const{bookings:r}=e();return r.find(s=>s.id===n)}}),{name:"jobscope-booking-storage"})),wm=()=>{const t=Lr(),e=We(n=>n.darkMode);return A.useEffect(()=>{window.scrollTo(0,0)},[]),d.createElement(ds,null,d.createElement("div",{className:`min-h-screen ${e?"bg-gray-900":"bg-gradient-to-br from-blue-50 to-indigo-100"} py-20 transition-colors duration-300`},d.createElement("style",{dangerouslySetInnerHTML:{__html:`
          @keyframes pulse {
            0% {
              box-shadow: 0 0 0 0 rgba(99, 102, 241, 0.4);
            }
            70% {
              box-shadow: 0 0 0 10px rgba(99, 102, 241, 0);
            }
            100% {
              box-shadow: 0 0 0 0 rgba(99, 102, 241, 0);
            }
          }
        `}}),d.createElement("div",{className:"container mx-auto px-4"},d.createElement(At.div,{className:`max-w-xl mx-auto rounded-lg shadow-xl overflow-hidden border-2 ${e?"bg-gray-800 border-gray-700":"bg-white border-indigo-200"} transition-colors duration-300`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,ease:"easeOut"}},d.createElement("div",{className:"p-8"},d.createElement("h2",{className:`text-3xl font-bold text-center mb-8 ${e?"text-indigo-300":"text-indigo-800"} relative transition-colors duration-300`},d.createElement("span",{className:"relative z-10"},"  "),d.createElement("span",{className:`absolute bottom-0 left-0 right-0 h-2 ${e?"bg-indigo-500":"bg-indigo-300"} opacity-40 transform -rotate-1 z-0`})),d.createElement("p",{className:`text-center mb-8 text-lg ${e?"text-indigo-400":"text-indigo-600"} transition-colors duration-300`},"      "),d.createElement("div",{className:"flex flex-col gap-3"},d.createElement(Oe,{variant:"primary",onClick:()=>t("/login"),className:`text-white transition-all duration-200 shadow-md hover:shadow-lg w-full text-lg py-3 relative overflow-hidden group ${e?"bg-gradient-to-r from-indigo-700 to-purple-800 hover:from-indigo-800 hover:to-purple-900":"bg-gradient-to-r from-blue-500 to-indigo-500 hover:from-blue-600 hover:to-indigo-600"}`,style:{animation:"pulse 2s infinite"}},d.createElement("span",{className:"relative z-10 font-bold text-white"}," "),d.createElement("span",{className:"absolute inset-0 bg-white opacity-20 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-700"})),d.createElement(Oe,{variant:"outline",onClick:()=>t("/"),className:`transition-all duration-200 shadow-sm hover:shadow-md w-full text-lg py-3 relative overflow-hidden group ${e?"border-gray-700 text-indigo-300 hover:bg-gray-700":"border-indigo-200 text-indigo-600 hover:bg-indigo-50"}`},d.createElement("span",{className:"relative z-10 font-bold"},"   "),d.createElement("span",{className:`absolute inset-0 ${e?"bg-gray-600":"bg-indigo-50"} opacity-0 transform -skew-x-12 -translate-x-full group-hover:translate-x-full group-hover:opacity-100 transition-all duration-700`}))))))))},fYe=({booking:t,onClose:e,onSave:n})=>{const r=We(w=>w.darkMode),{updateBooking:s,updateBookingStatus:i}=xm(),[o,a]=A.useState(!1),l=A.useRef(null);A.useEffect(()=>{const w=E=>{l.current&&!l.current.contains(E.target)&&e()};return document.addEventListener("mousedown",w),()=>{document.removeEventListener("mousedown",w)}},[e]);const c=()=>{if(t.status!=="pending")return!1;const w=new Date(`${t.date}T${t.time}`);return new Date>w};A.useEffect(()=>{c()&&(console.log(`La reserva #${t.id} ha expirado. Cancelando automticamente.`),i(t.id,"cancelled"),n())},[t,i,n]);const[u,h]=A.useState({startDate:t.date,endDate:t.endDate||"",startTime:t.time,endTime:t.endTime||"",description:t.description}),[m,p]=A.useState({}),y=w=>{const{name:E,value:N}=w.target;h({...u,[E]:N})},v=()=>{let w=!0;const E={};return u.startDate||(E.startDate="  ",w=!1),u.endDate?u.startDate&&new Date(u.endDate)<new Date(u.startDate)&&(E.endDate="       ",w=!1):(E.endDate="  ",w=!1),u.startTime||(E.startTime="  ",w=!1),u.endTime?u.startTime&&u.endTime<u.startTime&&(E.endTime="       ",w=!1):(E.endTime="  ",w=!1),u.description||(E.description="  ",w=!1),p(E),w},x=w=>{if(w.preventDefault(),v()){const E={date:u.startDate,endDate:u.endDate,time:u.startTime,endTime:u.endTime,description:u.description,dateRange:`${u.startDate} - ${u.endDate}`,timeRange:`${u.startTime} - ${u.endTime}`};s(t.id,E),n()}},b=()=>{i(t.id,"cancelled"),n()};return d.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-[100] p-4 backdrop-blur-sm"},o?d.createElement(At.div,{ref:l,className:`${r?"bg-gradient-to-br from-gray-800 to-gray-900 text-gray-200":"bg-gradient-to-br from-white to-indigo-50"} rounded-lg shadow-xl w-full max-w-md transition-colors duration-300 border ${r?"border-indigo-800/30":"border-indigo-200"}`,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1}},d.createElement("div",{className:"p-6"},d.createElement("div",{className:"flex justify-between items-center mb-6"},d.createElement("h2",{className:`text-xl font-bold ${r?"text-red-300":"text-red-600"} relative inline-block transition-colors duration-300`},d.createElement("span",{className:"relative z-10"},"  "),d.createElement("span",{className:`absolute bottom-0 left-0 right-0 h-2 ${r?"bg-red-500":"bg-red-300"} opacity-40 transform -rotate-1 z-0`})),d.createElement("button",{onClick:()=>a(!1),className:`${r?"text-gray-400 hover:text-gray-300":"text-gray-500 hover:text-gray-700"} transition-colors duration-300 p-1 rounded-full hover:bg-gray-100/10`},d.createElement(fo,{size:20}))),d.createElement("div",{className:`p-4 mb-4 rounded-md ${r?"bg-red-900/30 border border-red-800":"bg-red-50 border border-red-100"}`},d.createElement("p",{className:`text-sm ${r?"text-red-300":"text-red-700"}`},d.createElement("span",{className:"font-bold"},":"),"               .")),d.createElement("div",{className:"flex justify-between mt-6"},d.createElement(Oe,{type:"button",variant:"secondary",onClick:()=>a(!1),className:`text-white flex items-center justify-center gap-2 shadow-md hover:shadow-lg transition-all duration-200 relative overflow-hidden group py-3 px-6 ${r?"bg-gradient-to-r from-gray-600 to-gray-800 hover:from-gray-700 hover:to-gray-900":"bg-gradient-to-r from-gray-500 to-gray-600 hover:from-gray-600 hover:to-gray-700"}`},d.createElement("span",{className:"relative z-10 flex items-center"},d.createElement(fo,{size:18,className:"ml-1"}),""),d.createElement("span",{className:"absolute inset-0 bg-white opacity-20 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-700"})),d.createElement(Oe,{type:"button",variant:"primary",onClick:b,className:`text-white flex items-center justify-center gap-2 shadow-md hover:shadow-lg transition-all duration-200 relative overflow-hidden group py-3 px-6 ${r?"bg-gradient-to-r from-red-600 to-red-800 hover:from-red-700 hover:to-red-900":"bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700"}`},d.createElement("span",{className:"relative z-10 flex items-center"},d.createElement(n8,{size:18,className:"ml-1"})," "),d.createElement("span",{className:"absolute inset-0 bg-white opacity-20 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-700"}))))):d.createElement(At.div,{ref:l,className:`${r?"bg-gradient-to-br from-gray-800 to-gray-900 text-gray-200":"bg-gradient-to-br from-white to-indigo-50"} rounded-lg shadow-xl w-full max-w-2xl transition-colors duration-300 border ${r?"border-indigo-800/30":"border-indigo-200"}`,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1}},d.createElement("div",{className:"p-6"},d.createElement("div",{className:"flex justify-between items-center mb-6"},d.createElement("h2",{className:`text-xl font-bold ${r?"text-indigo-300":"text-indigo-800"} relative inline-block transition-colors duration-300`},d.createElement("span",{className:"relative z-10"}," "),d.createElement("span",{className:`absolute bottom-0 left-0 right-0 h-2 ${r?"bg-indigo-500":"bg-indigo-300"} opacity-40 transform -rotate-1 z-0`})),d.createElement("button",{onClick:e,className:`${r?"text-gray-400 hover:text-gray-300":"text-gray-500 hover:text-gray-700"} transition-colors duration-300 p-1 rounded-full hover:bg-gray-100/10`},d.createElement(fo,{size:20}))),d.createElement("div",{className:`p-4 mb-4 rounded-md ${r?"bg-indigo-900/30 border border-indigo-800":"bg-indigo-50 border border-indigo-100"}`},d.createElement("p",{className:`text-sm ${r?"text-indigo-300":"text-indigo-700"}`},d.createElement("span",{className:"font-bold"},":"),"       5     .         .")),d.createElement("form",{onSubmit:x},d.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"},d.createElement("div",null,d.createElement("label",{className:`block ${r?"text-indigo-300":"text-indigo-800"} font-medium mb-2 transition-colors duration-300`},"  ",d.createElement("span",{className:"text-red-500"},"*")),d.createElement("input",{type:"date",name:"startDate",value:u.startDate,onChange:y,className:`input w-full ${r?"bg-gray-700 border-gray-600 text-gray-200 focus:border-indigo-400 focus:ring-indigo-400":"border-indigo-200 focus:border-indigo-500 focus:ring-indigo-200"} focus:ring focus:ring-opacity-50 rounded-md shadow-sm ${m.startDate?"border-red-500 focus:ring-red-500":""}`,min:new Date().toISOString().split("T")[0],required:!0}),m.startDate&&d.createElement("p",{className:"text-red-500 text-sm mt-1"},m.startDate)),d.createElement("div",null,d.createElement("label",{className:`block ${r?"text-indigo-300":"text-indigo-800"} font-medium mb-2 transition-colors duration-300`},"  ",d.createElement("span",{className:"text-red-500"},"*")),d.createElement("input",{type:"date",name:"endDate",value:u.endDate,onChange:y,className:`input w-full ${r?"bg-gray-700 border-gray-600 text-gray-200 focus:border-indigo-400 focus:ring-indigo-400":"border-indigo-200 focus:border-indigo-500 focus:ring-indigo-200"} focus:ring focus:ring-opacity-50 rounded-md shadow-sm ${m.endDate?"border-red-500 focus:ring-red-500":""}`,min:u.startDate||new Date().toISOString().split("T")[0],required:!0}),m.endDate&&d.createElement("p",{className:"text-red-500 text-sm mt-1"},m.endDate))),d.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"},d.createElement("div",null,d.createElement("label",{className:`block ${r?"text-indigo-300":"text-indigo-800"} font-medium mb-2 transition-colors duration-300`},"  ",d.createElement("span",{className:"text-red-500"},"*")),d.createElement("input",{type:"time",name:"startTime",value:u.startTime,onChange:y,className:`input w-full ${r?"bg-gray-700 border-gray-600 text-gray-200 focus:border-indigo-400 focus:ring-indigo-400":"border-indigo-200 focus:border-indigo-500 focus:ring-indigo-200"} focus:ring focus:ring-opacity-50 rounded-md shadow-sm ${m.startTime?"border-red-500 focus:ring-red-500":""}`,required:!0}),m.startTime&&d.createElement("p",{className:"text-red-500 text-sm mt-1"},m.startTime)),d.createElement("div",null,d.createElement("label",{className:`block ${r?"text-indigo-300":"text-indigo-800"} font-medium mb-2 transition-colors duration-300`},"  ",d.createElement("span",{className:"text-red-500"},"*")),d.createElement("input",{type:"time",name:"endTime",value:u.endTime,onChange:y,className:`input w-full ${r?"bg-gray-700 border-gray-600 text-gray-200 focus:border-indigo-400 focus:ring-indigo-400":"border-indigo-200 focus:border-indigo-500 focus:ring-indigo-200"} focus:ring focus:ring-opacity-50 rounded-md shadow-sm ${m.endTime?"border-red-500 focus:ring-red-500":""}`,required:!0}),m.endTime&&d.createElement("p",{className:"text-red-500 text-sm mt-1"},m.endTime))),d.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"},d.createElement("div",{className:`px-3 py-2 rounded-md shadow-sm ${r?"bg-gray-700/80 border border-gray-600":"bg-white/80 border border-indigo-100"} transition-colors duration-300`},d.createElement("div",{className:"flex items-center"},d.createElement(Xf,{size:20,className:`${r?"text-indigo-400":"text-indigo-500"} ml-2`}),d.createElement("div",null,d.createElement("p",{className:`text-sm ${r?"text-indigo-300":"text-indigo-500"} transition-colors duration-300`},""),d.createElement("p",{className:`font-medium ${r?"text-indigo-200":"text-indigo-700"} transition-colors duration-300`},t.craftsmanName)))),d.createElement("div",{className:`px-3 py-2 rounded-md shadow-sm ${r?"bg-gray-700/80 border border-gray-600":"bg-white/80 border border-indigo-100"} transition-colors duration-300`},d.createElement("div",{className:"flex items-center"},d.createElement(vf,{size:20,className:`${r?"text-indigo-400":"text-indigo-500"} ml-2`}),d.createElement("div",null,d.createElement("p",{className:`text-sm ${r?"text-indigo-300":"text-indigo-500"} transition-colors duration-300`},"  "),d.createElement("p",{className:`font-medium ${r?"text-indigo-200":"text-indigo-700"} transition-colors duration-300`},t.craftsmanPhone?t.craftsmanPhone:"    "))))),d.createElement("div",{className:"mb-4"},d.createElement("label",{className:`block ${r?"text-indigo-300":"text-indigo-800"} font-medium mb-2 transition-colors duration-300`},"  ",d.createElement("span",{className:"text-red-500"},"*")),d.createElement("textarea",{name:"description",value:u.description,onChange:y,placeholder:"      ...",className:`input min-h-[100px] max-h-[200px] w-full overflow-y-auto ${r?"bg-gray-700 border-gray-600 text-gray-200 focus:border-indigo-400 focus:ring-indigo-400":"border-indigo-200 focus:border-indigo-500 focus:ring-indigo-200"} focus:ring focus:ring-opacity-50 rounded-md shadow-sm ${m.description?"border-red-500 focus:ring-red-500":""}`,required:!0}),m.description&&d.createElement("p",{className:"text-red-500 text-sm mt-1"},m.description)),d.createElement("div",{className:"flex justify-between mt-6"},d.createElement("div",{className:"flex gap-2"},d.createElement(Oe,{type:"button",variant:"secondary",onClick:()=>a(!0),className:`text-white flex items-center justify-center gap-2 shadow-md hover:shadow-lg transition-all duration-200 relative overflow-hidden group py-3 px-6 ${r?"bg-gradient-to-r from-red-600 to-red-800 hover:from-red-700 hover:to-red-900":"bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700"}`},d.createElement("span",{className:"relative z-10 flex items-center"},d.createElement(Coe,{size:18,className:"ml-1"})," "),d.createElement("span",{className:"absolute inset-0 bg-white opacity-20 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-700"})),d.createElement(Oe,{type:"button",variant:"secondary",onClick:e,className:`text-white flex items-center justify-center gap-2 shadow-md hover:shadow-lg transition-all duration-200 relative overflow-hidden group py-3 px-6 ${r?"bg-gradient-to-r from-gray-600 to-gray-800 hover:from-gray-700 hover:to-gray-900":"bg-gradient-to-r from-gray-500 to-gray-600 hover:from-gray-600 hover:to-gray-700"}`},d.createElement("span",{className:"relative z-10 flex items-center"},d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 ml-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},d.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})),""),d.createElement("span",{className:"absolute inset-0 bg-white opacity-20 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-700"}))),d.createElement(Oe,{type:"submit",variant:"primary",className:`text-white flex items-center justify-center gap-2 shadow-md hover:shadow-lg transition-all duration-200 relative overflow-hidden group py-3 px-6 ${r?"bg-gradient-to-r from-indigo-700 to-purple-800 hover:from-indigo-800 hover:to-purple-900":"bg-gradient-to-r from-blue-500 to-indigo-500 hover:from-blue-600 hover:to-indigo-600"}`},d.createElement("span",{className:"relative z-10 flex items-center"},d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 ml-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},d.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"}))," "),d.createElement("span",{className:"absolute inset-0 bg-white opacity-20 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-700"})))))))},mYe=({booking:t,onClose:e,userType:n,showEditForm:r,setShowEditForm:s})=>{const i=We(S=>S.darkMode),{updateBookingStatus:o}=xm(),a=My(S=>S.getReviewById),[l,c]=A.useState(!1),[u,h]=A.useState(""),m=A.useRef(null);A.useEffect(()=>{const S=T=>{m.current&&!m.current.contains(T.target)&&e()};return document.addEventListener("mousedown",S),()=>{document.removeEventListener("mousedown",S)}},[e]);const p=t.reviewId?a(t.reviewId):null,y=()=>{if(t.status!=="pending")return!1;const S=new Date(`${t.date}T${t.time}`);return new Date>S};A.useEffect(()=>{const S=()=>{if(y()){console.log(`La reserva #${t.id} ha expirado. Cancelando automticamente.`),o(t.id,"cancelled"),e();return}if(t.status!=="pending"){c(!1);return}const I=new Date(t.createdAt),R=(new Date-I)/(1e3*60);if(R<=5){c(!0);const D=Math.max(0,5*60-R*60),B=Math.floor(D/60),Z=Math.floor(D%60);h(`${B}:${Z<10?"0":""}${Z}`)}else c(!1)};S();const T=setInterval(S,1e3);return()=>clearInterval(T)},[t,o,e]);const v=S=>{o(t.id,S),e()},x=S=>new Date(S).toLocaleDateString("ar-SY"),b=S=>{const[T,I]=S.split(":"),P=parseInt(T,10),R=P>=12?"":"";return`${P%12||12}:${I} ${R}`},w=n==="client",E=n==="craftsman",N=w?t.craftsmanName:t.clientName,C=t.craftsmanPhone||"";return d.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-[100] p-4 backdrop-blur-sm"},d.createElement(At.div,{ref:m,className:`${i?"bg-gradient-to-br from-gray-800 to-gray-900 text-gray-200":"bg-gradient-to-br from-white to-indigo-50"} rounded-lg shadow-xl w-full max-w-2xl transition-colors duration-300 border ${i?"border-indigo-800/30":"border-indigo-200"}`,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1}},d.createElement("div",{className:"p-6"},d.createElement("div",{className:"flex justify-between items-center mb-6"},d.createElement("h2",{className:`text-xl font-bold ${i?"text-indigo-300":"text-indigo-800"} relative inline-block transition-colors duration-300`},d.createElement("span",{className:"relative z-10"}," "),d.createElement("span",{className:`absolute bottom-0 left-0 right-0 h-2 ${i?"bg-indigo-500":"bg-indigo-300"} opacity-40 transform -rotate-1 z-0`})),d.createElement("button",{onClick:e,className:`${i?"text-gray-400 hover:text-gray-300":"text-gray-500 hover:text-gray-700"} transition-colors duration-300 p-1 rounded-full hover:bg-gray-100/10`},d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},d.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})))),d.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6"},d.createElement("div",{className:`px-3 py-2 rounded-md shadow-sm ${i?"bg-gray-700/80 border border-gray-600":"bg-white/80 border border-indigo-100"} transition-colors duration-300`},d.createElement("div",{className:"flex items-center"},d.createElement(Pa,{size:20,className:`${i?"text-indigo-400":"text-indigo-500"} ml-2`}),d.createElement("div",null,d.createElement("p",{className:`text-sm ${i?"text-indigo-300":"text-indigo-500"} transition-colors duration-300`},""),d.createElement("p",{className:`font-medium ${i?"text-indigo-200":"text-indigo-700"} transition-colors duration-300`},t.endDate?`${x(t.date)} - ${x(t.endDate)}`:x(t.date))))),d.createElement("div",{className:`px-3 py-2 rounded-md shadow-sm ${i?"bg-gray-700/80 border border-gray-600":"bg-white/80 border border-indigo-100"} transition-colors duration-300`},d.createElement("div",{className:"flex items-center"},d.createElement(jx,{size:20,className:`${i?"text-indigo-400":"text-indigo-500"} ml-2`}),d.createElement("div",null,d.createElement("p",{className:`text-sm ${i?"text-indigo-300":"text-indigo-500"} transition-colors duration-300`},""),d.createElement("p",{className:`font-medium ${i?"text-indigo-200":"text-indigo-700"} transition-colors duration-300`},t.endTime?`${b(t.time)} - ${b(t.endTime)}`:b(t.time))))),d.createElement("div",{className:`px-3 py-2 rounded-md shadow-sm ${i?"bg-gray-700/80 border border-gray-600":"bg-white/80 border border-indigo-100"} transition-colors duration-300`},d.createElement("div",{className:"flex items-center"},d.createElement(Xf,{size:20,className:`${i?"text-indigo-400":"text-indigo-500"} ml-2`}),d.createElement("div",null,d.createElement("p",{className:`text-sm ${i?"text-indigo-300":"text-indigo-500"} transition-colors duration-300`},w?"":""),d.createElement("p",{className:`font-medium ${i?"text-indigo-200":"text-indigo-700"} transition-colors duration-300`},N)))),d.createElement("div",{className:`px-3 py-2 rounded-md shadow-sm ${i?"bg-gray-700/80 border border-gray-600":"bg-white/80 border border-indigo-100"} transition-colors duration-300`},d.createElement("div",{className:"flex items-center"},d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-5 w-5 ${i?"text-indigo-400":"text-indigo-500"} ml-2`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},d.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})),d.createElement("div",null,d.createElement("p",{className:`text-sm ${i?"text-indigo-300":"text-indigo-500"} transition-colors duration-300`},"  "),d.createElement("p",{className:`font-medium ${i?"text-indigo-200":"text-indigo-700"} transition-colors duration-300`},C||"    "))))),d.createElement("div",{className:"mb-6"},d.createElement("h3",{className:`font-bold mb-2 ${i?"text-indigo-300":"text-indigo-700"} transition-colors duration-300 flex items-center`},d.createElement(i8,{size:18,className:"ml-1"})," "),d.createElement("div",{className:`p-3 rounded-md shadow-sm ${i?"bg-gray-700/80 border border-gray-600 text-gray-300":"bg-white/80 border border-indigo-100 text-gray-700"} transition-colors duration-300 max-h-40 overflow-y-auto`},d.createElement("p",{className:"leading-relaxed break-words"},t.description))),t.status==="pending"&&E&&d.createElement("div",{className:"flex flex-wrap gap-3 justify-center mt-6"},d.createElement(Oe,{variant:"primary",onClick:()=>v("completed"),className:`text-white flex items-center justify-center gap-2 shadow-md hover:shadow-lg transition-all duration-200 relative overflow-hidden group py-2 px-6 ${i?"bg-gradient-to-r from-green-600 to-emerald-700 hover:from-green-700 hover:to-emerald-800":"bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700"}`},d.createElement("span",{className:"relative z-10 flex items-center"},d.createElement(E1,{size:18,className:"ml-1"}),"  "),d.createElement("span",{className:"absolute inset-0 bg-white opacity-20 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-700"})),d.createElement(Oe,{variant:"outline",onClick:()=>v("cancelled"),className:`flex items-center justify-center gap-2 shadow-md hover:shadow-lg transition-all duration-200 relative overflow-hidden group py-2 px-6 ${i?"bg-gradient-to-r from-red-600 to-rose-700 hover:from-red-700 hover:to-rose-800 text-white":"bg-gradient-to-r from-red-500 to-rose-600 hover:from-red-600 hover:to-rose-700 text-white"}`},d.createElement("span",{className:"relative z-10 flex items-center"},d.createElement(jT,{size:18,className:"ml-1"})," "),d.createElement("span",{className:"absolute inset-0 bg-white opacity-20 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-700"}))),t.status==="completed"&&p&&d.createElement("div",{className:"mt-6"},d.createElement("h3",{className:`font-bold mb-3 ${i?"text-indigo-300":"text-indigo-700"} transition-colors duration-300 flex items-center`},d.createElement(Yn,{size:18,className:`ml-1 ${i?"text-yellow-400":"text-yellow-500"}`}),""),d.createElement("div",{className:`p-4 rounded-md shadow-sm ${i?"bg-gray-700/80 border border-gray-600":"bg-white/80 border border-indigo-100"} transition-colors duration-300`},d.createElement("div",{className:"flex items-center mb-4"},d.createElement("div",{className:"flex ml-2"},[1,2,3,4,5].map(S=>d.createElement(Yn,{key:S,size:20,className:`${S<=p.overallRating?`${i?"text-yellow-400 fill-yellow-400":"text-yellow-500 fill-yellow-500"}`:`${i?"text-gray-600":"text-gray-300"}`} transition-colors duration-300`}))),d.createElement("span",{className:`font-bold ${i?"text-yellow-400":"text-yellow-600"} transition-colors duration-300`},p.overallRating,"/5")),d.createElement("div",{className:"grid grid-cols-2 gap-4 mb-4"},d.createElement("div",{className:`flex flex-col p-2 rounded-md ${i?"bg-gray-800/50":"bg-indigo-50/70"} transition-colors duration-300`},d.createElement("span",{className:`text-sm font-medium ${i?"text-indigo-300":"text-indigo-600"} transition-colors duration-300 mb-1`}," "),d.createElement("div",{className:"flex items-center"},d.createElement("div",{className:"flex"},[1,2,3,4,5].map(S=>d.createElement(Yn,{key:S,size:16,className:`${S<=p.qualityRating?`${i?"text-yellow-400 fill-yellow-400":"text-yellow-500 fill-yellow-500"}`:`${i?"text-gray-600":"text-gray-300"}`} transition-colors duration-300`}))))),d.createElement("div",{className:`flex flex-col p-2 rounded-md ${i?"bg-gray-800/50":"bg-indigo-50/70"} transition-colors duration-300`},d.createElement("span",{className:`text-sm font-medium ${i?"text-indigo-300":"text-indigo-600"} transition-colors duration-300 mb-1`}," "),d.createElement("div",{className:"flex items-center"},d.createElement("div",{className:"flex"},[1,2,3,4,5].map(S=>d.createElement(Yn,{key:S,size:16,className:`${S<=p.punctualityRating?`${i?"text-yellow-400 fill-yellow-400":"text-yellow-500 fill-yellow-500"}`:`${i?"text-gray-600":"text-gray-300"}`} transition-colors duration-300`}))))),d.createElement("div",{className:`flex flex-col p-2 rounded-md ${i?"bg-gray-800/50":"bg-indigo-50/70"} transition-colors duration-300`},d.createElement("span",{className:`text-sm font-medium ${i?"text-indigo-300":"text-indigo-600"} transition-colors duration-300 mb-1`},"  "),d.createElement("div",{className:"flex items-center"},d.createElement("div",{className:"flex"},[1,2,3,4,5].map(S=>d.createElement(Yn,{key:S,size:16,className:`${S<=p.priceRating?`${i?"text-yellow-400 fill-yellow-400":"text-yellow-500 fill-yellow-500"}`:`${i?"text-gray-600":"text-gray-300"}`} transition-colors duration-300`}))))),d.createElement("div",{className:`flex flex-col p-2 rounded-md ${i?"bg-gray-800/50":"bg-indigo-50/70"} transition-colors duration-300`},d.createElement("span",{className:`text-sm font-medium ${i?"text-indigo-300":"text-indigo-600"} transition-colors duration-300 mb-1`},""),d.createElement("div",{className:"flex items-center"},d.createElement("div",{className:"flex"},[1,2,3,4,5].map(S=>d.createElement(Yn,{key:S,size:16,className:`${S<=p.communicationRating?`${i?"text-yellow-400 fill-yellow-400":"text-yellow-500 fill-yellow-500"}`:`${i?"text-gray-600":"text-gray-300"}`} transition-colors duration-300`})))))),d.createElement("div",{className:`p-3 rounded-md ${i?"bg-gray-800/70":"bg-white/90"} transition-colors duration-300`},d.createElement("p",{className:`text-sm ${i?"text-gray-300":"text-gray-700"} transition-colors duration-300 leading-relaxed`},p.comment)),p.images&&p.images.length>0&&d.createElement("div",{className:"mt-4"},d.createElement("h4",{className:`font-bold mb-2 ${i?"text-indigo-300":"text-indigo-700"} transition-colors duration-300 flex items-center`},d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-4 w-4 ml-1 ${i?"text-indigo-400":"text-indigo-500"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},d.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})),"  "),d.createElement("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2"},p.images.map((S,T)=>d.createElement("div",{key:T,className:"rounded-md overflow-hidden h-24 shadow-md hover:shadow-lg transition-all duration-300 transform hover:scale-105"},d.createElement(Ud,{src:S,alt:` ${T+1}`,className:"w-full h-full object-cover",placeholderClassName:"w-full h-full bg-gray-200 animate-pulse"}))))))),t.status==="pending"&&l&&n==="client"&&d.createElement("div",{className:"mb-6"},d.createElement("div",{className:`p-4 rounded-md mb-4 ${i?"bg-indigo-900/30 border border-indigo-800":"bg-indigo-50 border border-indigo-100"}`},d.createElement("p",{className:`text-sm ${i?"text-indigo-300":"text-indigo-700"}`},d.createElement("span",{className:"font-bold"},":"),"       5     .  :",u)),d.createElement(Oe,{variant:"primary",className:`text-white flex items-center justify-center gap-2 shadow-md hover:shadow-lg transition-all duration-200 relative overflow-hidden group py-2 px-4 w-full ${i?"bg-gradient-to-r from-amber-600 to-amber-700 hover:from-amber-700 hover:to-amber-800":"bg-gradient-to-r from-amber-500 to-amber-600 hover:from-amber-600 hover:to-amber-700"}`,onClick:()=>s(!0)},d.createElement("span",{className:"relative z-10 flex items-center"},d.createElement(l8,{size:18,className:"ml-1"})," "),d.createElement("span",{className:"absolute inset-0 bg-white opacity-20 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-700"}))))))},LK=t=>{const[e,n]=A.useState(!1);return d.createElement(d.Fragment,null,d.createElement(mYe,{...t,showEditForm:e,setShowEditForm:n}),e&&d.createElement(fYe,{booking:t.booking,onClose:()=>n(!1),onSave:()=>{n(!1),t.onClose()}}))},pYe=()=>{const t=Dt(b=>b.user),e=Dt(b=>b.userType),n=Dt(b=>b.logout),r=We(b=>b.darkMode),{craftsmen:s,fetchCraftsmen:i}=Lg(),{getUserBookings:o}=xm(),[a,l]=A.useState([]),[c,u]=A.useState([]),[h,m]=A.useState(null),[p,y]=A.useState(!1),v=b=>{const[w,E]=b.split(":"),N=parseInt(w,10),C=N>=12?"":"";return`${N%12||12}:${E} ${C}`};A.useEffect(()=>{i()},[]);const x=localStorage.getItem("token")!==null;return A.useEffect(()=>{!x&&t&&n()},[x,t,n]),A.useEffect(()=>{if(t){const b=o(t.id,e);l(b)}s.length>0&&u(s.slice(0,3))},[t,e,s,o]),t?d.createElement(ds,{user:t,onLogout:n},d.createElement("div",{className:`min-h-screen ${r?"bg-gray-900":"bg-gradient-to-br from-blue-50 to-indigo-100"} transition-colors duration-300`},d.createElement("section",{className:`${r?"bg-gradient-to-r from-gray-800 to-gray-700":"bg-gradient-to-r from-blue-600 to-indigo-800"} text-white py-8 shadow-lg transition-colors duration-300`},d.createElement("div",{className:"container mx-auto px-4"},d.createElement("h1",{className:"text-2xl font-bold mb-2 relative inline-block"},d.createElement("span",{className:"relative z-10"}," ",t.name,"!"),d.createElement("span",{className:`absolute bottom-0 left-0 right-0 h-2 ${r?"bg-indigo-500":"bg-indigo-300"} opacity-30 transform -rotate-1 z-0`})),d.createElement("p",{className:"text-lg"},e==="client"?"     ":"     "))),d.createElement("div",{className:"container mx-auto px-4 py-8"},d.createElement("section",{className:"mb-8"},d.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4"},d.createElement(At.div,{whileHover:{y:-5},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3}},d.createElement(pt,{className:`flex flex-col items-center p-6 text-center ${r?"bg-gray-800 text-gray-200":"bg-gradient-to-br from-blue-50 to-indigo-100"} shadow-lg transition-colors duration-300`},d.createElement("div",{className:`w-16 h-16 ${r?"bg-indigo-900 text-indigo-300":"bg-indigo-200 text-indigo-700"} rounded-full flex items-center justify-center mb-4 shadow-md transition-colors duration-300`},d.createElement(xf,{size:32})),d.createElement("h3",{className:`text-xl font-bold mb-2 ${r?"text-indigo-300":"text-indigo-800"} relative inline-block transition-colors duration-300`},d.createElement("span",{className:"relative z-10"},"  "),d.createElement("span",{className:`absolute bottom-0 left-0 right-0 h-2 ${r?"bg-indigo-500":"bg-indigo-300"} opacity-40 transform -rotate-1 z-0`})),d.createElement("p",{className:`${r?"text-gray-400":"text-gray-600"} mb-4 transition-colors duration-300`},"     "),d.createElement(at,{to:"/search",className:"mt-auto"},d.createElement(Oe,{variant:"primary",className:`text-white flex items-center justify-center gap-2 shadow-md hover:shadow-lg transition-all duration-200  relative overflow-hidden group py-2 px-4 ${r?"bg-gradient-to-r from-indigo-700 to-purple-800 hover:from-indigo-800 hover:to-purple-900":"bg-gradient-to-r from-blue-500 to-indigo-500 hover:from-blue-600 hover:to-indigo-600"}`},d.createElement("span",{className:"relative z-10"}," "),d.createElement("span",{className:"absolute inset-0 bg-white opacity-20 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-700"}))))),d.createElement(At.div,{whileHover:{y:-5},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1}},d.createElement(pt,{className:`flex flex-col items-center p-6 text-center ${r?"bg-gray-800 text-gray-200":"bg-gradient-to-br from-blue-50 to-indigo-100"} shadow-lg transition-colors duration-300`},d.createElement("div",{className:`w-16 h-16 ${r?"bg-indigo-900 text-indigo-300":"bg-indigo-200 text-indigo-700"} rounded-full flex items-center justify-center mb-4 shadow-md transition-colors duration-300`},d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},d.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"}))),d.createElement("h3",{className:`text-xl font-bold mb-2 ${r?"text-indigo-300":"text-indigo-800"} relative inline-block transition-colors duration-300`},d.createElement("span",{className:"relative z-10"},""),d.createElement("span",{className:`absolute bottom-0 left-0 right-0 h-2 ${r?"bg-indigo-500":"bg-indigo-300"} opacity-40 transform -rotate-1 z-0`})),d.createElement("p",{className:`${r?"text-gray-400":"text-gray-600"} mb-4 transition-colors duration-300`},"   "),d.createElement(at,{to:"/bookings",className:"mt-auto"},d.createElement(Oe,{variant:"secondary",className:`text-white flex items-center justify-center gap-2 shadow-md hover:shadow-lg transition-all duration-200  relative overflow-hidden group py-2 px-4 ${r?"bg-gradient-to-r from-indigo-700 to-purple-800 hover:from-indigo-800 hover:to-purple-900":"bg-gradient-to-r from-blue-500 to-indigo-500 hover:from-blue-600 hover:to-indigo-600"}`},d.createElement("span",{className:"relative z-10"}," "),d.createElement("span",{className:"absolute inset-0 bg-white opacity-20 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-700"}))))),d.createElement(At.div,{whileHover:{y:-5},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.2}},d.createElement(pt,{className:`flex flex-col items-center p-6 text-center ${r?"bg-gray-800 text-gray-200":"bg-gradient-to-br from-blue-50 to-indigo-100"} shadow-lg transition-colors duration-300`},d.createElement("div",{className:`w-16 h-16 ${r?"bg-indigo-900 text-indigo-300":"bg-indigo-200 text-indigo-700"} rounded-full flex items-center justify-center mb-4 shadow-md transition-colors duration-300`},d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},d.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"}))),d.createElement("h3",{className:`text-xl font-bold mb-2 ${r?"text-indigo-300":"text-indigo-800"} relative inline-block transition-colors duration-300`},d.createElement("span",{className:"relative z-10"}," "),d.createElement("span",{className:`absolute bottom-0 left-0 right-0 h-2 ${r?"bg-indigo-500":"bg-indigo-300"} opacity-40 transform -rotate-1 z-0`})),d.createElement("p",{className:`${r?"text-gray-400":"text-gray-600"} mb-4 transition-colors duration-300`},"    "),d.createElement(at,{to:"/profile/my",className:"mt-auto"},d.createElement(Oe,{variant:"secondary",className:`text-white flex items-center justify-center gap-2 shadow-md hover:shadow-lg transition-all duration-200  relative overflow-hidden group py-2 px-4 ${r?"bg-gradient-to-r from-indigo-700 to-purple-800 hover:from-indigo-800 hover:to-purple-900":"bg-gradient-to-r from-blue-500 to-indigo-500 hover:from-blue-600 hover:to-indigo-600"}`},d.createElement("span",{className:"relative z-10"}," "),d.createElement("span",{className:"absolute inset-0 bg-white opacity-20 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-700"}))))))),d.createElement("section",{className:"mb-8"},d.createElement("div",{className:"flex justify-between items-center mb-4"},d.createElement("h2",{className:`text-2xl font-bold ${r?"text-indigo-300":"text-indigo-800"} relative inline-block transition-colors duration-300`},d.createElement("span",{className:"relative z-10"}," "),d.createElement("span",{className:`absolute bottom-0 left-0 right-0 h-2 ${r?"bg-indigo-500":"bg-indigo-300"} opacity-40 transform -rotate-1 z-0`})),d.createElement(at,{to:"/bookings",className:`${r?"text-indigo-400 hover:text-indigo-300":"text-indigo-600 hover:text-indigo-800"} font-medium transition-colors duration-200`}," ")),a.length>0?d.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 "},a.slice(0,2).map(b=>d.createElement(pt,{key:b.id,className:`p-4 ${r?"bg-gray-800 text-gray-200":"bg-gradient-to-br from-[#E2E9FF] to-[#DCE4FC]"} shadow-md transition-colors duration-300`},d.createElement("div",{className:"flex flex-col h-full "},d.createElement("div",{className:"mb-2"},d.createElement("h3",{className:`font-bold text-lg mb-1 ${r?"text-indigo-300":""} transition-colors duration-300`},e==="client"?b.craftsmanName:b.clientName),d.createElement("p",{className:`${r?"text-gray-400":"text-gray-600"} transition-colors duration-300`},new Date(b.date).toLocaleDateString("ar-SY")," -"," ",v(b.time))),d.createElement("div",{className:"mb-2 flex-grow"},d.createElement("div",{className:`p-2 rounded-md ${r?"bg-gray-700/50":"bg-gradient-to-br from-[#E2E9FF] to-[#E6EDFF] shadow-md border border-indigo-200"} max-h-16 overflow-y-auto`},d.createElement("p",{className:`${r?"text-gray-300":""} break-words text-sm`},b.description))),d.createElement("div",{className:"flex justify-between items-center mt-auto"},d.createElement("span",{className:`px-2 py-1 rounded-full text-sm ${b.status==="completed"?"bg-green-100 text-green-800":b.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`},b.status==="completed"?"":b.status==="pending"?" ":""),d.createElement(Oe,{variant:"secondary",className:`text-white flex items-center justify-center gap-2 shadow-md hover:shadow-lg transition-all duration-200 relative overflow-hidden group text-sm py-2 px-4 ${r?"bg-gradient-to-r from-indigo-700 to-purple-800 hover:from-indigo-800 hover:to-purple-900":"bg-gradient-to-r from-blue-500 to-indigo-500 hover:from-blue-600 hover:to-indigo-600"}`,onClick:()=>{m(b),y(!0)}},d.createElement("span",{className:"relative z-10"}," "),d.createElement("span",{className:"absolute inset-0 bg-white opacity-20 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-700"}))))))):d.createElement(pt,{className:`p-6 text-center ${r?"bg-gray-800 text-gray-200":"bg-gradient-to-br from-blue-50 to-indigo-100"} shadow-md transition-colors duration-300`},d.createElement("p",{className:`${r?"text-gray-400":"text-gray-600"} mb-4 transition-colors duration-300`},"     "),d.createElement(at,{to:"/search"},d.createElement(Oe,{variant:"primary",className:`text-white flex items-center justify-center gap-2 shadow-md hover:shadow-lg transition-all duration-200  relative overflow-hidden group py-2 px-4 ${r?"bg-gradient-to-r from-indigo-700 to-purple-800 hover:from-indigo-800 hover:to-purple-900":"bg-gradient-to-r from-blue-500 to-indigo-500 hover:from-blue-600 hover:to-indigo-600"}`},d.createElement("span",{className:"relative z-10"},"  "),d.createElement("span",{className:"absolute inset-0 bg-white opacity-20 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-700"}))))),e==="client"&&d.createElement("section",null,d.createElement("div",{className:"flex justify-between items-center mb-4"},d.createElement("h2",{className:`text-2xl font-bold ${r?"text-indigo-300":"text-indigo-800"} relative inline-block transition-colors duration-300`},d.createElement("span",{className:"relative z-10"},"  "),d.createElement("span",{className:`absolute bottom-0 left-0 right-0 h-2 ${r?"bg-indigo-500":"bg-indigo-300"} opacity-40 transform -rotate-1 z-0`})),d.createElement(at,{to:"/search",className:`${r?"text-indigo-400 hover:text-indigo-300":"text-indigo-600 hover:text-indigo-800"} font-medium transition-colors duration-200`}," ")),d.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4"},c.map(b=>d.createElement(At.div,{key:b.id,whileHover:{y:-5},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3}},d.createElement(pt,{className:`overflow-hidden ${r?"bg-gray-800 text-gray-200":"bg-gradient-to-br from-blue-50 to-indigo-100"} shadow-md transition-colors duration-300`},d.createElement("div",{className:"h-40 overflow-hidden"},d.createElement(Ud,{src:b.image,alt:b.name,className:"w-full h-full object-cover",placeholderClassName:"w-full h-full bg-gray-200 animate-pulse"})),d.createElement("div",{className:"p-4"},d.createElement("h3",{className:"font-bold text-lg mb-1"},b.name),d.createElement("p",{className:`${r?"text-gray-400":"text-gray-600"} mb-2 transition-colors duration-300`},b.profession," - ",b.specialization),d.createElement("div",{className:"flex items-center mb-2"},d.createElement(Yn,{size:16,className:`${r?"text-yellow-400 fill-yellow-400":"text-accent fill-accent"}`}),d.createElement("span",{className:`mr-1 ${r?"text-gray-300":""}`},b.rating)),d.createElement("div",{className:"flex items-center mb-4"},d.createElement(Ux,{size:16,className:`${r?"text-gray-400":"text-gray-500"}`}),d.createElement("span",{className:`mr-1 ${r?"text-gray-400":"text-gray-500"} transition-colors duration-300`}," : ",b.workRadius," ")),d.createElement(at,{to:`/profile/craftsman/${b.id}`},d.createElement(Oe,{variant:"primary",fullWidth:!0,className:`text-white flex items-center justify-center gap-2 shadow-md hover:shadow-lg transition-all duration-200  relative overflow-hidden group py-2 px-4 ${r?"bg-gradient-to-r from-indigo-700 to-purple-800 hover:from-indigo-800 hover:to-purple-900":"bg-gradient-to-r from-blue-500 to-indigo-500 hover:from-blue-600 hover:to-indigo-600"}`},d.createElement("span",{className:"relative z-10"}," "),d.createElement("span",{className:"absolute inset-0 bg-white opacity-20 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-700"}))))))))))),p&&h&&d.createElement(LK,{booking:h,onClose:()=>{if(y(!1),m(null),t){const b=o(t.id,e);l(b)}},userType:e})):d.createElement(wm,null)};var uF={exports:{}};(function(t,e){(function(n,r){r(e)})(Ml,function(n){var r=L.MarkerClusterGroup=L.FeatureGroup.extend({options:{maxClusterRadius:80,iconCreateFunction:null,clusterPane:L.Marker.prototype.options.pane,spiderfyOnEveryZoom:!1,spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0,singleMarkerMode:!1,disableClusteringAtZoom:null,removeOutsideVisibleBounds:!0,animate:!0,animateAddingMarkers:!1,spiderfyShapePositions:null,spiderfyDistanceMultiplier:1,spiderLegPolylineOptions:{weight:1.5,color:"#222",opacity:.5},chunkedLoading:!1,chunkInterval:200,chunkDelay:50,chunkProgress:null,polygonOptions:{}},initialize:function(i){L.Util.setOptions(this,i),this.options.iconCreateFunction||(this.options.iconCreateFunction=this._defaultIconCreateFunction),this._featureGroup=L.featureGroup(),this._featureGroup.addEventParent(this),this._nonPointGroup=L.featureGroup(),this._nonPointGroup.addEventParent(this),this._inZoomAnimation=0,this._needsClustering=[],this._needsRemoving=[],this._currentShownBounds=null,this._queue=[],this._childMarkerEventHandlers={dragstart:this._childMarkerDragStart,move:this._childMarkerMoved,dragend:this._childMarkerDragEnd};var o=L.DomUtil.TRANSITION&&this.options.animate;L.extend(this,o?this._withAnimation:this._noAnimation),this._markerCluster=o?L.MarkerCluster:L.MarkerClusterNonAnimated},addLayer:function(i){if(i instanceof L.LayerGroup)return this.addLayers([i]);if(!i.getLatLng)return this._nonPointGroup.addLayer(i),this.fire("layeradd",{layer:i}),this;if(!this._map)return this._needsClustering.push(i),this.fire("layeradd",{layer:i}),this;if(this.hasLayer(i))return this;this._unspiderfy&&this._unspiderfy(),this._addLayer(i,this._maxZoom),this.fire("layeradd",{layer:i}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons();var o=i,a=this._zoom;if(i.__parent)for(;o.__parent._zoom>=a;)o=o.__parent;return this._currentShownBounds.contains(o.getLatLng())&&(this.options.animateAddingMarkers?this._animationAddLayer(i,o):this._animationAddLayerNonAnimated(i,o)),this},removeLayer:function(i){return i instanceof L.LayerGroup?this.removeLayers([i]):i.getLatLng?this._map?i.__parent?(this._unspiderfy&&(this._unspiderfy(),this._unspiderfyLayer(i)),this._removeLayer(i,!0),this.fire("layerremove",{layer:i}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),i.off(this._childMarkerEventHandlers,this),this._featureGroup.hasLayer(i)&&(this._featureGroup.removeLayer(i),i.clusterShow&&i.clusterShow()),this):this:(!this._arraySplice(this._needsClustering,i)&&this.hasLayer(i)&&this._needsRemoving.push({layer:i,latlng:i._latlng}),this.fire("layerremove",{layer:i}),this):(this._nonPointGroup.removeLayer(i),this.fire("layerremove",{layer:i}),this)},addLayers:function(i,o){if(!L.Util.isArray(i))return this.addLayer(i);var a=this._featureGroup,l=this._nonPointGroup,c=this.options.chunkedLoading,u=this.options.chunkInterval,h=this.options.chunkProgress,m=i.length,p=0,y=!0,v;if(this._map){var x=new Date().getTime(),b=L.bind(function(){var E=new Date().getTime();for(this._map&&this._unspiderfy&&this._unspiderfy();p<m;p++){if(c&&p%200===0){var N=new Date().getTime()-E;if(N>u)break}if(v=i[p],v instanceof L.LayerGroup){y&&(i=i.slice(),y=!1),this._extractNonGroupLayers(v,i),m=i.length;continue}if(!v.getLatLng){l.addLayer(v),o||this.fire("layeradd",{layer:v});continue}if(!this.hasLayer(v)&&(this._addLayer(v,this._maxZoom),o||this.fire("layeradd",{layer:v}),v.__parent&&v.__parent.getChildCount()===2)){var C=v.__parent.getAllChildMarkers(),S=C[0]===v?C[1]:C[0];a.removeLayer(S)}}h&&h(p,m,new Date().getTime()-x),p===m?(this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds)):setTimeout(b,this.options.chunkDelay)},this);b()}else for(var w=this._needsClustering;p<m;p++){if(v=i[p],v instanceof L.LayerGroup){y&&(i=i.slice(),y=!1),this._extractNonGroupLayers(v,i),m=i.length;continue}if(!v.getLatLng){l.addLayer(v);continue}this.hasLayer(v)||w.push(v)}return this},removeLayers:function(i){var o,a,l=i.length,c=this._featureGroup,u=this._nonPointGroup,h=!0;if(!this._map){for(o=0;o<l;o++){if(a=i[o],a instanceof L.LayerGroup){h&&(i=i.slice(),h=!1),this._extractNonGroupLayers(a,i),l=i.length;continue}this._arraySplice(this._needsClustering,a),u.removeLayer(a),this.hasLayer(a)&&this._needsRemoving.push({layer:a,latlng:a._latlng}),this.fire("layerremove",{layer:a})}return this}if(this._unspiderfy){this._unspiderfy();var m=i.slice(),p=l;for(o=0;o<p;o++){if(a=m[o],a instanceof L.LayerGroup){this._extractNonGroupLayers(a,m),p=m.length;continue}this._unspiderfyLayer(a)}}for(o=0;o<l;o++){if(a=i[o],a instanceof L.LayerGroup){h&&(i=i.slice(),h=!1),this._extractNonGroupLayers(a,i),l=i.length;continue}if(!a.__parent){u.removeLayer(a),this.fire("layerremove",{layer:a});continue}this._removeLayer(a,!0,!0),this.fire("layerremove",{layer:a}),c.hasLayer(a)&&(c.removeLayer(a),a.clusterShow&&a.clusterShow())}return this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds),this},clearLayers:function(){return this._map||(this._needsClustering=[],this._needsRemoving=[],delete this._gridClusters,delete this._gridUnclustered),this._noanimationUnspiderfy&&this._noanimationUnspiderfy(),this._featureGroup.clearLayers(),this._nonPointGroup.clearLayers(),this.eachLayer(function(i){i.off(this._childMarkerEventHandlers,this),delete i.__parent},this),this._map&&this._generateInitialClusters(),this},getBounds:function(){var i=new L.LatLngBounds;this._topClusterLevel&&i.extend(this._topClusterLevel._bounds);for(var o=this._needsClustering.length-1;o>=0;o--)i.extend(this._needsClustering[o].getLatLng());return i.extend(this._nonPointGroup.getBounds()),i},eachLayer:function(i,o){var a=this._needsClustering.slice(),l=this._needsRemoving,c,u,h;for(this._topClusterLevel&&this._topClusterLevel.getAllChildMarkers(a),u=a.length-1;u>=0;u--){for(c=!0,h=l.length-1;h>=0;h--)if(l[h].layer===a[u]){c=!1;break}c&&i.call(o,a[u])}this._nonPointGroup.eachLayer(i,o)},getLayers:function(){var i=[];return this.eachLayer(function(o){i.push(o)}),i},getLayer:function(i){var o=null;return i=parseInt(i,10),this.eachLayer(function(a){L.stamp(a)===i&&(o=a)}),o},hasLayer:function(i){if(!i)return!1;var o,a=this._needsClustering;for(o=a.length-1;o>=0;o--)if(a[o]===i)return!0;for(a=this._needsRemoving,o=a.length-1;o>=0;o--)if(a[o].layer===i)return!1;return!!(i.__parent&&i.__parent._group===this)||this._nonPointGroup.hasLayer(i)},zoomToShowLayer:function(i,o){var a=this._map;typeof o!="function"&&(o=function(){});var l=function(){(a.hasLayer(i)||a.hasLayer(i.__parent))&&!this._inZoomAnimation&&(this._map.off("moveend",l,this),this.off("animationend",l,this),a.hasLayer(i)?o():i.__parent._icon&&(this.once("spiderfied",o,this),i.__parent.spiderfy()))};i._icon&&this._map.getBounds().contains(i.getLatLng())?o():i.__parent._zoom<Math.round(this._map._zoom)?(this._map.on("moveend",l,this),this._map.panTo(i.getLatLng())):(this._map.on("moveend",l,this),this.on("animationend",l,this),i.__parent.zoomToBounds())},onAdd:function(i){this._map=i;var o,a,l;if(!isFinite(this._map.getMaxZoom()))throw"Map has no maxZoom specified";for(this._featureGroup.addTo(i),this._nonPointGroup.addTo(i),this._gridClusters||this._generateInitialClusters(),this._maxLat=i.options.crs.projection.MAX_LATITUDE,o=0,a=this._needsRemoving.length;o<a;o++)l=this._needsRemoving[o],l.newlatlng=l.layer._latlng,l.layer._latlng=l.latlng;for(o=0,a=this._needsRemoving.length;o<a;o++)l=this._needsRemoving[o],this._removeLayer(l.layer,!0),l.layer._latlng=l.newlatlng;this._needsRemoving=[],this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds(),this._map.on("zoomend",this._zoomEnd,this),this._map.on("moveend",this._moveEnd,this),this._spiderfierOnAdd&&this._spiderfierOnAdd(),this._bindEvents(),a=this._needsClustering,this._needsClustering=[],this.addLayers(a,!0)},onRemove:function(i){i.off("zoomend",this._zoomEnd,this),i.off("moveend",this._moveEnd,this),this._unbindEvents(),this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim",""),this._spiderfierOnRemove&&this._spiderfierOnRemove(),delete this._maxLat,this._hideCoverage(),this._featureGroup.remove(),this._nonPointGroup.remove(),this._featureGroup.clearLayers(),this._map=null},getVisibleParent:function(i){for(var o=i;o&&!o._icon;)o=o.__parent;return o||null},_arraySplice:function(i,o){for(var a=i.length-1;a>=0;a--)if(i[a]===o)return i.splice(a,1),!0},_removeFromGridUnclustered:function(i,o){for(var a=this._map,l=this._gridUnclustered,c=Math.floor(this._map.getMinZoom());o>=c&&l[o].removeObject(i,a.project(i.getLatLng(),o));o--);},_childMarkerDragStart:function(i){i.target.__dragStart=i.target._latlng},_childMarkerMoved:function(i){if(!this._ignoreMove&&!i.target.__dragStart){var o=i.target._popup&&i.target._popup.isOpen();this._moveChild(i.target,i.oldLatLng,i.latlng),o&&i.target.openPopup()}},_moveChild:function(i,o,a){i._latlng=o,this.removeLayer(i),i._latlng=a,this.addLayer(i)},_childMarkerDragEnd:function(i){var o=i.target.__dragStart;delete i.target.__dragStart,o&&this._moveChild(i.target,o,i.target._latlng)},_removeLayer:function(i,o,a){var l=this._gridClusters,c=this._gridUnclustered,u=this._featureGroup,h=this._map,m=Math.floor(this._map.getMinZoom());o&&this._removeFromGridUnclustered(i,this._maxZoom);var p=i.__parent,y=p._markers,v;for(this._arraySplice(y,i);p&&(p._childCount--,p._boundsNeedUpdate=!0,!(p._zoom<m));)o&&p._childCount<=1?(v=p._markers[0]===i?p._markers[1]:p._markers[0],l[p._zoom].removeObject(p,h.project(p._cLatLng,p._zoom)),c[p._zoom].addObject(v,h.project(v.getLatLng(),p._zoom)),this._arraySplice(p.__parent._childClusters,p),p.__parent._markers.push(v),v.__parent=p.__parent,p._icon&&(u.removeLayer(p),a||u.addLayer(v))):p._iconNeedsUpdate=!0,p=p.__parent;delete i.__parent},_isOrIsParent:function(i,o){for(;o;){if(i===o)return!0;o=o.parentNode}return!1},fire:function(i,o,a){if(o&&o.layer instanceof L.MarkerCluster){if(o.originalEvent&&this._isOrIsParent(o.layer._icon,o.originalEvent.relatedTarget))return;i="cluster"+i}L.FeatureGroup.prototype.fire.call(this,i,o,a)},listens:function(i,o){return L.FeatureGroup.prototype.listens.call(this,i,o)||L.FeatureGroup.prototype.listens.call(this,"cluster"+i,o)},_defaultIconCreateFunction:function(i){var o=i.getChildCount(),a=" marker-cluster-";return o<10?a+="small":o<100?a+="medium":a+="large",new L.DivIcon({html:"<div><span>"+o+"</span></div>",className:"marker-cluster"+a,iconSize:new L.Point(40,40)})},_bindEvents:function(){var i=this._map,o=this.options.spiderfyOnMaxZoom,a=this.options.showCoverageOnHover,l=this.options.zoomToBoundsOnClick,c=this.options.spiderfyOnEveryZoom;(o||l||c)&&this.on("clusterclick clusterkeypress",this._zoomOrSpiderfy,this),a&&(this.on("clustermouseover",this._showCoverage,this),this.on("clustermouseout",this._hideCoverage,this),i.on("zoomend",this._hideCoverage,this))},_zoomOrSpiderfy:function(i){var o=i.layer,a=o;if(!(i.type==="clusterkeypress"&&i.originalEvent&&i.originalEvent.keyCode!==13)){for(;a._childClusters.length===1;)a=a._childClusters[0];a._zoom===this._maxZoom&&a._childCount===o._childCount&&this.options.spiderfyOnMaxZoom?o.spiderfy():this.options.zoomToBoundsOnClick&&o.zoomToBounds(),this.options.spiderfyOnEveryZoom&&o.spiderfy(),i.originalEvent&&i.originalEvent.keyCode===13&&this._map._container.focus()}},_showCoverage:function(i){var o=this._map;this._inZoomAnimation||(this._shownPolygon&&o.removeLayer(this._shownPolygon),i.layer.getChildCount()>2&&i.layer!==this._spiderfied&&(this._shownPolygon=new L.Polygon(i.layer.getConvexHull(),this.options.polygonOptions),o.addLayer(this._shownPolygon)))},_hideCoverage:function(){this._shownPolygon&&(this._map.removeLayer(this._shownPolygon),this._shownPolygon=null)},_unbindEvents:function(){var i=this.options.spiderfyOnMaxZoom,o=this.options.showCoverageOnHover,a=this.options.zoomToBoundsOnClick,l=this.options.spiderfyOnEveryZoom,c=this._map;(i||a||l)&&this.off("clusterclick clusterkeypress",this._zoomOrSpiderfy,this),o&&(this.off("clustermouseover",this._showCoverage,this),this.off("clustermouseout",this._hideCoverage,this),c.off("zoomend",this._hideCoverage,this))},_zoomEnd:function(){this._map&&(this._mergeSplitClusters(),this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds())},_moveEnd:function(){if(!this._inZoomAnimation){var i=this._getExpandedVisibleBounds();this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,i),this._topClusterLevel._recursivelyAddChildrenToMap(null,Math.round(this._map._zoom),i),this._currentShownBounds=i}},_generateInitialClusters:function(){var i=Math.ceil(this._map.getMaxZoom()),o=Math.floor(this._map.getMinZoom()),a=this.options.maxClusterRadius,l=a;typeof a!="function"&&(l=function(){return a}),this.options.disableClusteringAtZoom!==null&&(i=this.options.disableClusteringAtZoom-1),this._maxZoom=i,this._gridClusters={},this._gridUnclustered={};for(var c=i;c>=o;c--)this._gridClusters[c]=new L.DistanceGrid(l(c)),this._gridUnclustered[c]=new L.DistanceGrid(l(c));this._topClusterLevel=new this._markerCluster(this,o-1)},_addLayer:function(i,o){var a=this._gridClusters,l=this._gridUnclustered,c=Math.floor(this._map.getMinZoom()),u,h;for(this.options.singleMarkerMode&&this._overrideMarkerIcon(i),i.on(this._childMarkerEventHandlers,this);o>=c;o--){u=this._map.project(i.getLatLng(),o);var m=a[o].getNearObject(u);if(m){m._addChild(i),i.__parent=m;return}if(m=l[o].getNearObject(u),m){var p=m.__parent;p&&this._removeLayer(m,!1);var y=new this._markerCluster(this,o,m,i);a[o].addObject(y,this._map.project(y._cLatLng,o)),m.__parent=y,i.__parent=y;var v=y;for(h=o-1;h>p._zoom;h--)v=new this._markerCluster(this,h,v),a[h].addObject(v,this._map.project(m.getLatLng(),h));p._addChild(v),this._removeFromGridUnclustered(m,o);return}l[o].addObject(i,u)}this._topClusterLevel._addChild(i),i.__parent=this._topClusterLevel},_refreshClustersIcons:function(){this._featureGroup.eachLayer(function(i){i instanceof L.MarkerCluster&&i._iconNeedsUpdate&&i._updateIcon()})},_enqueue:function(i){this._queue.push(i),this._queueTimeout||(this._queueTimeout=setTimeout(L.bind(this._processQueue,this),300))},_processQueue:function(){for(var i=0;i<this._queue.length;i++)this._queue[i].call(this);this._queue.length=0,clearTimeout(this._queueTimeout),this._queueTimeout=null},_mergeSplitClusters:function(){var i=Math.round(this._map._zoom);this._processQueue(),this._zoom<i&&this._currentShownBounds.intersects(this._getExpandedVisibleBounds())?(this._animationStart(),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,this._getExpandedVisibleBounds()),this._animationZoomIn(this._zoom,i)):this._zoom>i?(this._animationStart(),this._animationZoomOut(this._zoom,i)):this._moveEnd()},_getExpandedVisibleBounds:function(){if(this.options.removeOutsideVisibleBounds){if(L.Browser.mobile)return this._checkBoundsMaxLat(this._map.getBounds())}else return this._mapBoundsInfinite;return this._checkBoundsMaxLat(this._map.getBounds().pad(1))},_checkBoundsMaxLat:function(i){var o=this._maxLat;return o!==void 0&&(i.getNorth()>=o&&(i._northEast.lat=1/0),i.getSouth()<=-o&&(i._southWest.lat=-1/0)),i},_animationAddLayerNonAnimated:function(i,o){if(o===i)this._featureGroup.addLayer(i);else if(o._childCount===2){o._addToMap();var a=o.getAllChildMarkers();this._featureGroup.removeLayer(a[0]),this._featureGroup.removeLayer(a[1])}else o._updateIcon()},_extractNonGroupLayers:function(i,o){var a=i.getLayers(),l=0,c;for(o=o||[];l<a.length;l++){if(c=a[l],c instanceof L.LayerGroup){this._extractNonGroupLayers(c,o);continue}o.push(c)}return o},_overrideMarkerIcon:function(i){var o=i.options.icon=this.options.iconCreateFunction({getChildCount:function(){return 1},getAllChildMarkers:function(){return[i]}});return o}});L.MarkerClusterGroup.include({_mapBoundsInfinite:new L.LatLngBounds(new L.LatLng(-1/0,-1/0),new L.LatLng(1/0,1/0))}),L.MarkerClusterGroup.include({_noAnimation:{_animationStart:function(){},_animationZoomIn:function(i,o){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),i),this._topClusterLevel._recursivelyAddChildrenToMap(null,o,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationZoomOut:function(i,o){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),i),this._topClusterLevel._recursivelyAddChildrenToMap(null,o,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationAddLayer:function(i,o){this._animationAddLayerNonAnimated(i,o)}},_withAnimation:{_animationStart:function(){this._map._mapPane.className+=" leaflet-cluster-anim",this._inZoomAnimation++},_animationZoomIn:function(i,o){var a=this._getExpandedVisibleBounds(),l=this._featureGroup,c=Math.floor(this._map.getMinZoom()),u;this._ignoreMove=!0,this._topClusterLevel._recursively(a,i,c,function(h){var m=h._latlng,p=h._markers,y;for(a.contains(m)||(m=null),h._isSingleParent()&&i+1===o?(l.removeLayer(h),h._recursivelyAddChildrenToMap(null,o,a)):(h.clusterHide(),h._recursivelyAddChildrenToMap(m,o,a)),u=p.length-1;u>=0;u--)y=p[u],a.contains(y._latlng)||l.removeLayer(y)}),this._forceLayout(),this._topClusterLevel._recursivelyBecomeVisible(a,o),l.eachLayer(function(h){!(h instanceof L.MarkerCluster)&&h._icon&&h.clusterShow()}),this._topClusterLevel._recursively(a,i,o,function(h){h._recursivelyRestoreChildPositions(o)}),this._ignoreMove=!1,this._enqueue(function(){this._topClusterLevel._recursively(a,i,c,function(h){l.removeLayer(h),h.clusterShow()}),this._animationEnd()})},_animationZoomOut:function(i,o){this._animationZoomOutSingle(this._topClusterLevel,i-1,o),this._topClusterLevel._recursivelyAddChildrenToMap(null,o,this._getExpandedVisibleBounds()),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),i,this._getExpandedVisibleBounds())},_animationAddLayer:function(i,o){var a=this,l=this._featureGroup;l.addLayer(i),o!==i&&(o._childCount>2?(o._updateIcon(),this._forceLayout(),this._animationStart(),i._setPos(this._map.latLngToLayerPoint(o.getLatLng())),i.clusterHide(),this._enqueue(function(){l.removeLayer(i),i.clusterShow(),a._animationEnd()})):(this._forceLayout(),a._animationStart(),a._animationZoomOutSingle(o,this._map.getMaxZoom(),this._zoom)))}},_animationZoomOutSingle:function(i,o,a){var l=this._getExpandedVisibleBounds(),c=Math.floor(this._map.getMinZoom());i._recursivelyAnimateChildrenInAndAddSelfToMap(l,c,o+1,a);var u=this;this._forceLayout(),i._recursivelyBecomeVisible(l,a),this._enqueue(function(){if(i._childCount===1){var h=i._markers[0];this._ignoreMove=!0,h.setLatLng(h.getLatLng()),this._ignoreMove=!1,h.clusterShow&&h.clusterShow()}else i._recursively(l,a,c,function(m){m._recursivelyRemoveChildrenFromMap(l,c,o+1)});u._animationEnd()})},_animationEnd:function(){this._map&&(this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim","")),this._inZoomAnimation--,this.fire("animationend")},_forceLayout:function(){L.Util.falseFn(document.body.offsetWidth)}}),L.markerClusterGroup=function(i){return new L.MarkerClusterGroup(i)};var s=L.MarkerCluster=L.Marker.extend({options:L.Icon.prototype.options,initialize:function(i,o,a,l){L.Marker.prototype.initialize.call(this,a?a._cLatLng||a.getLatLng():new L.LatLng(0,0),{icon:this,pane:i.options.clusterPane}),this._group=i,this._zoom=o,this._markers=[],this._childClusters=[],this._childCount=0,this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._bounds=new L.LatLngBounds,a&&this._addChild(a),l&&this._addChild(l)},getAllChildMarkers:function(i,o){i=i||[];for(var a=this._childClusters.length-1;a>=0;a--)this._childClusters[a].getAllChildMarkers(i,o);for(var l=this._markers.length-1;l>=0;l--)o&&this._markers[l].__dragStart||i.push(this._markers[l]);return i},getChildCount:function(){return this._childCount},zoomToBounds:function(i){for(var o=this._childClusters.slice(),a=this._group._map,l=a.getBoundsZoom(this._bounds),c=this._zoom+1,u=a.getZoom(),h;o.length>0&&l>c;){c++;var m=[];for(h=0;h<o.length;h++)m=m.concat(o[h]._childClusters);o=m}l>c?this._group._map.setView(this._latlng,c):l<=u?this._group._map.setView(this._latlng,u+1):this._group._map.fitBounds(this._bounds,i)},getBounds:function(){var i=new L.LatLngBounds;return i.extend(this._bounds),i},_updateIcon:function(){this._iconNeedsUpdate=!0,this._icon&&this.setIcon(this)},createIcon:function(){return this._iconNeedsUpdate&&(this._iconObj=this._group.options.iconCreateFunction(this),this._iconNeedsUpdate=!1),this._iconObj.createIcon()},createShadow:function(){return this._iconObj.createShadow()},_addChild:function(i,o){this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._setClusterCenter(i),i instanceof L.MarkerCluster?(o||(this._childClusters.push(i),i.__parent=this),this._childCount+=i._childCount):(o||this._markers.push(i),this._childCount++),this.__parent&&this.__parent._addChild(i,!0)},_setClusterCenter:function(i){this._cLatLng||(this._cLatLng=i._cLatLng||i._latlng)},_resetBounds:function(){var i=this._bounds;i._southWest&&(i._southWest.lat=1/0,i._southWest.lng=1/0),i._northEast&&(i._northEast.lat=-1/0,i._northEast.lng=-1/0)},_recalculateBounds:function(){var i=this._markers,o=this._childClusters,a=0,l=0,c=this._childCount,u,h,m,p;if(c!==0){for(this._resetBounds(),u=0;u<i.length;u++)m=i[u]._latlng,this._bounds.extend(m),a+=m.lat,l+=m.lng;for(u=0;u<o.length;u++)h=o[u],h._boundsNeedUpdate&&h._recalculateBounds(),this._bounds.extend(h._bounds),m=h._wLatLng,p=h._childCount,a+=m.lat*p,l+=m.lng*p;this._latlng=this._wLatLng=new L.LatLng(a/c,l/c),this._boundsNeedUpdate=!1}},_addToMap:function(i){i&&(this._backupLatlng=this._latlng,this.setLatLng(i)),this._group._featureGroup.addLayer(this)},_recursivelyAnimateChildrenIn:function(i,o,a){this._recursively(i,this._group._map.getMinZoom(),a-1,function(l){var c=l._markers,u,h;for(u=c.length-1;u>=0;u--)h=c[u],h._icon&&(h._setPos(o),h.clusterHide())},function(l){var c=l._childClusters,u,h;for(u=c.length-1;u>=0;u--)h=c[u],h._icon&&(h._setPos(o),h.clusterHide())})},_recursivelyAnimateChildrenInAndAddSelfToMap:function(i,o,a,l){this._recursively(i,l,o,function(c){c._recursivelyAnimateChildrenIn(i,c._group._map.latLngToLayerPoint(c.getLatLng()).round(),a),c._isSingleParent()&&a-1===l?(c.clusterShow(),c._recursivelyRemoveChildrenFromMap(i,o,a)):c.clusterHide(),c._addToMap()})},_recursivelyBecomeVisible:function(i,o){this._recursively(i,this._group._map.getMinZoom(),o,null,function(a){a.clusterShow()})},_recursivelyAddChildrenToMap:function(i,o,a){this._recursively(a,this._group._map.getMinZoom()-1,o,function(l){if(o!==l._zoom)for(var c=l._markers.length-1;c>=0;c--){var u=l._markers[c];a.contains(u._latlng)&&(i&&(u._backupLatlng=u.getLatLng(),u.setLatLng(i),u.clusterHide&&u.clusterHide()),l._group._featureGroup.addLayer(u))}},function(l){l._addToMap(i)})},_recursivelyRestoreChildPositions:function(i){for(var o=this._markers.length-1;o>=0;o--){var a=this._markers[o];a._backupLatlng&&(a.setLatLng(a._backupLatlng),delete a._backupLatlng)}if(i-1===this._zoom)for(var l=this._childClusters.length-1;l>=0;l--)this._childClusters[l]._restorePosition();else for(var c=this._childClusters.length-1;c>=0;c--)this._childClusters[c]._recursivelyRestoreChildPositions(i)},_restorePosition:function(){this._backupLatlng&&(this.setLatLng(this._backupLatlng),delete this._backupLatlng)},_recursivelyRemoveChildrenFromMap:function(i,o,a,l){var c,u;this._recursively(i,o-1,a-1,function(h){for(u=h._markers.length-1;u>=0;u--)c=h._markers[u],(!l||!l.contains(c._latlng))&&(h._group._featureGroup.removeLayer(c),c.clusterShow&&c.clusterShow())},function(h){for(u=h._childClusters.length-1;u>=0;u--)c=h._childClusters[u],(!l||!l.contains(c._latlng))&&(h._group._featureGroup.removeLayer(c),c.clusterShow&&c.clusterShow())})},_recursively:function(i,o,a,l,c){var u=this._childClusters,h=this._zoom,m,p;if(o<=h&&(l&&l(this),c&&h===a&&c(this)),h<o||h<a)for(m=u.length-1;m>=0;m--)p=u[m],p._boundsNeedUpdate&&p._recalculateBounds(),i.intersects(p._bounds)&&p._recursively(i,o,a,l,c)},_isSingleParent:function(){return this._childClusters.length>0&&this._childClusters[0]._childCount===this._childCount}});L.Marker.include({clusterHide:function(){var i=this.options.opacity;return this.setOpacity(0),this.options.opacity=i,this},clusterShow:function(){return this.setOpacity(this.options.opacity)}}),L.DistanceGrid=function(i){this._cellSize=i,this._sqCellSize=i*i,this._grid={},this._objectPoint={}},L.DistanceGrid.prototype={addObject:function(i,o){var a=this._getCoord(o.x),l=this._getCoord(o.y),c=this._grid,u=c[l]=c[l]||{},h=u[a]=u[a]||[],m=L.Util.stamp(i);this._objectPoint[m]=o,h.push(i)},updateObject:function(i,o){this.removeObject(i),this.addObject(i,o)},removeObject:function(i,o){var a=this._getCoord(o.x),l=this._getCoord(o.y),c=this._grid,u=c[l]=c[l]||{},h=u[a]=u[a]||[],m,p;for(delete this._objectPoint[L.Util.stamp(i)],m=0,p=h.length;m<p;m++)if(h[m]===i)return h.splice(m,1),p===1&&delete u[a],!0},eachObject:function(i,o){var a,l,c,u,h,m,p,y=this._grid;for(a in y){h=y[a];for(l in h)for(m=h[l],c=0,u=m.length;c<u;c++)p=i.call(o,m[c]),p&&(c--,u--)}},getNearObject:function(i){var o=this._getCoord(i.x),a=this._getCoord(i.y),l,c,u,h,m,p,y,v,x=this._objectPoint,b=this._sqCellSize,w=null;for(l=a-1;l<=a+1;l++)if(h=this._grid[l],h){for(c=o-1;c<=o+1;c++)if(m=h[c],m)for(u=0,p=m.length;u<p;u++)y=m[u],v=this._sqDist(x[L.Util.stamp(y)],i),(v<b||v<=b&&w===null)&&(b=v,w=y)}return w},_getCoord:function(i){var o=Math.floor(i/this._cellSize);return isFinite(o)?o:i},_sqDist:function(i,o){var a=o.x-i.x,l=o.y-i.y;return a*a+l*l}},function(){L.QuickHull={getDistant:function(i,o){var a=o[1].lat-o[0].lat,l=o[0].lng-o[1].lng;return l*(i.lat-o[0].lat)+a*(i.lng-o[0].lng)},findMostDistantPointFromBaseLine:function(i,o){var a=0,l=null,c=[],u,h,m;for(u=o.length-1;u>=0;u--){if(h=o[u],m=this.getDistant(h,i),m>0)c.push(h);else continue;m>a&&(a=m,l=h)}return{maxPoint:l,newPoints:c}},buildConvexHull:function(i,o){var a=[],l=this.findMostDistantPointFromBaseLine(i,o);return l.maxPoint?(a=a.concat(this.buildConvexHull([i[0],l.maxPoint],l.newPoints)),a=a.concat(this.buildConvexHull([l.maxPoint,i[1]],l.newPoints)),a):[i[0]]},getConvexHull:function(i){var o=!1,a=!1,l=!1,c=!1,u=null,h=null,m=null,p=null,y=null,v=null,x;for(x=i.length-1;x>=0;x--){var b=i[x];(o===!1||b.lat>o)&&(u=b,o=b.lat),(a===!1||b.lat<a)&&(h=b,a=b.lat),(l===!1||b.lng>l)&&(m=b,l=b.lng),(c===!1||b.lng<c)&&(p=b,c=b.lng)}a!==o?(v=h,y=u):(v=p,y=m);var w=[].concat(this.buildConvexHull([v,y],i),this.buildConvexHull([y,v],i));return w}}}(),L.MarkerCluster.include({getConvexHull:function(){var i=this.getAllChildMarkers(),o=[],a,l;for(l=i.length-1;l>=0;l--)a=i[l].getLatLng(),o.push(a);return L.QuickHull.getConvexHull(o)}}),L.MarkerCluster.include({_2PI:Math.PI*2,_circleFootSeparation:25,_circleStartAngle:0,_spiralFootSeparation:28,_spiralLengthStart:11,_spiralLengthFactor:5,_circleSpiralSwitchover:9,spiderfy:function(){if(!(this._group._spiderfied===this||this._group._inZoomAnimation)){var i=this.getAllChildMarkers(null,!0),o=this._group,a=o._map,l=a.latLngToLayerPoint(this._latlng),c;this._group._unspiderfy(),this._group._spiderfied=this,this._group.options.spiderfyShapePositions?c=this._group.options.spiderfyShapePositions(i.length,l):i.length>=this._circleSpiralSwitchover?c=this._generatePointsSpiral(i.length,l):(l.y+=10,c=this._generatePointsCircle(i.length,l)),this._animationSpiderfy(i,c)}},unspiderfy:function(i){this._group._inZoomAnimation||(this._animationUnspiderfy(i),this._group._spiderfied=null)},_generatePointsCircle:function(i,o){var a=this._group.options.spiderfyDistanceMultiplier*this._circleFootSeparation*(2+i),l=a/this._2PI,c=this._2PI/i,u=[],h,m;for(l=Math.max(l,35),u.length=i,h=0;h<i;h++)m=this._circleStartAngle+h*c,u[h]=new L.Point(o.x+l*Math.cos(m),o.y+l*Math.sin(m))._round();return u},_generatePointsSpiral:function(i,o){var a=this._group.options.spiderfyDistanceMultiplier,l=a*this._spiralLengthStart,c=a*this._spiralFootSeparation,u=a*this._spiralLengthFactor*this._2PI,h=0,m=[],p;for(m.length=i,p=i;p>=0;p--)p<i&&(m[p]=new L.Point(o.x+l*Math.cos(h),o.y+l*Math.sin(h))._round()),h+=c/l+p*5e-4,l+=u/h;return m},_noanimationUnspiderfy:function(){var i=this._group,o=i._map,a=i._featureGroup,l=this.getAllChildMarkers(null,!0),c,u;for(i._ignoreMove=!0,this.setOpacity(1),u=l.length-1;u>=0;u--)c=l[u],a.removeLayer(c),c._preSpiderfyLatlng&&(c.setLatLng(c._preSpiderfyLatlng),delete c._preSpiderfyLatlng),c.setZIndexOffset&&c.setZIndexOffset(0),c._spiderLeg&&(o.removeLayer(c._spiderLeg),delete c._spiderLeg);i.fire("unspiderfied",{cluster:this,markers:l}),i._ignoreMove=!1,i._spiderfied=null}}),L.MarkerClusterNonAnimated=L.MarkerCluster.extend({_animationSpiderfy:function(i,o){var a=this._group,l=a._map,c=a._featureGroup,u=this._group.options.spiderLegPolylineOptions,h,m,p,y;for(a._ignoreMove=!0,h=0;h<i.length;h++)y=l.layerPointToLatLng(o[h]),m=i[h],p=new L.Polyline([this._latlng,y],u),l.addLayer(p),m._spiderLeg=p,m._preSpiderfyLatlng=m._latlng,m.setLatLng(y),m.setZIndexOffset&&m.setZIndexOffset(1e6),c.addLayer(m);this.setOpacity(.3),a._ignoreMove=!1,a.fire("spiderfied",{cluster:this,markers:i})},_animationUnspiderfy:function(){this._noanimationUnspiderfy()}}),L.MarkerCluster.include({_animationSpiderfy:function(i,o){var a=this,l=this._group,c=l._map,u=l._featureGroup,h=this._latlng,m=c.latLngToLayerPoint(h),p=L.Path.SVG,y=L.extend({},this._group.options.spiderLegPolylineOptions),v=y.opacity,x,b,w,E,N,C;for(v===void 0&&(v=L.MarkerClusterGroup.prototype.options.spiderLegPolylineOptions.opacity),p?(y.opacity=0,y.className=(y.className||"")+" leaflet-cluster-spider-leg"):y.opacity=v,l._ignoreMove=!0,x=0;x<i.length;x++)b=i[x],C=c.layerPointToLatLng(o[x]),w=new L.Polyline([h,C],y),c.addLayer(w),b._spiderLeg=w,p&&(E=w._path,N=E.getTotalLength()+.1,E.style.strokeDasharray=N,E.style.strokeDashoffset=N),b.setZIndexOffset&&b.setZIndexOffset(1e6),b.clusterHide&&b.clusterHide(),u.addLayer(b),b._setPos&&b._setPos(m);for(l._forceLayout(),l._animationStart(),x=i.length-1;x>=0;x--)C=c.layerPointToLatLng(o[x]),b=i[x],b._preSpiderfyLatlng=b._latlng,b.setLatLng(C),b.clusterShow&&b.clusterShow(),p&&(w=b._spiderLeg,E=w._path,E.style.strokeDashoffset=0,w.setStyle({opacity:v}));this.setOpacity(.3),l._ignoreMove=!1,setTimeout(function(){l._animationEnd(),l.fire("spiderfied",{cluster:a,markers:i})},200)},_animationUnspiderfy:function(i){var o=this,a=this._group,l=a._map,c=a._featureGroup,u=i?l._latLngToNewLayerPoint(this._latlng,i.zoom,i.center):l.latLngToLayerPoint(this._latlng),h=this.getAllChildMarkers(null,!0),m=L.Path.SVG,p,y,v,x,b,w;for(a._ignoreMove=!0,a._animationStart(),this.setOpacity(1),y=h.length-1;y>=0;y--)p=h[y],p._preSpiderfyLatlng&&(p.closePopup(),p.setLatLng(p._preSpiderfyLatlng),delete p._preSpiderfyLatlng,w=!0,p._setPos&&(p._setPos(u),w=!1),p.clusterHide&&(p.clusterHide(),w=!1),w&&c.removeLayer(p),m&&(v=p._spiderLeg,x=v._path,b=x.getTotalLength()+.1,x.style.strokeDashoffset=b,v.setStyle({opacity:0})));a._ignoreMove=!1,setTimeout(function(){var E=0;for(y=h.length-1;y>=0;y--)p=h[y],p._spiderLeg&&E++;for(y=h.length-1;y>=0;y--)p=h[y],p._spiderLeg&&(p.clusterShow&&p.clusterShow(),p.setZIndexOffset&&p.setZIndexOffset(0),E>1&&c.removeLayer(p),l.removeLayer(p._spiderLeg),delete p._spiderLeg);a._animationEnd(),a.fire("unspiderfied",{cluster:o,markers:h})},200)}}),L.MarkerClusterGroup.include({_spiderfied:null,unspiderfy:function(){this._unspiderfy.apply(this,arguments)},_spiderfierOnAdd:function(){this._map.on("click",this._unspiderfyWrapper,this),this._map.options.zoomAnimation&&this._map.on("zoomstart",this._unspiderfyZoomStart,this),this._map.on("zoomend",this._noanimationUnspiderfy,this),L.Browser.touch||this._map.getRenderer(this)},_spiderfierOnRemove:function(){this._map.off("click",this._unspiderfyWrapper,this),this._map.off("zoomstart",this._unspiderfyZoomStart,this),this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._map.off("zoomend",this._noanimationUnspiderfy,this),this._noanimationUnspiderfy()},_unspiderfyZoomStart:function(){this._map&&this._map.on("zoomanim",this._unspiderfyZoomAnim,this)},_unspiderfyZoomAnim:function(i){L.DomUtil.hasClass(this._map._mapPane,"leaflet-touching")||(this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._unspiderfy(i))},_unspiderfyWrapper:function(){this._unspiderfy()},_unspiderfy:function(i){this._spiderfied&&this._spiderfied.unspiderfy(i)},_noanimationUnspiderfy:function(){this._spiderfied&&this._spiderfied._noanimationUnspiderfy()},_unspiderfyLayer:function(i){i._spiderLeg&&(this._featureGroup.removeLayer(i),i.clusterShow&&i.clusterShow(),i.setZIndexOffset&&i.setZIndexOffset(0),this._map.removeLayer(i._spiderLeg),delete i._spiderLeg)}}),L.MarkerClusterGroup.include({refreshClusters:function(i){return i?i instanceof L.MarkerClusterGroup?i=i._topClusterLevel.getAllChildMarkers():i instanceof L.LayerGroup?i=i._layers:i instanceof L.MarkerCluster?i=i.getAllChildMarkers():i instanceof L.Marker&&(i=[i]):i=this._topClusterLevel.getAllChildMarkers(),this._flagParentsIconsNeedUpdate(i),this._refreshClustersIcons(),this.options.singleMarkerMode&&this._refreshSingleMarkerModeMarkers(i),this},_flagParentsIconsNeedUpdate:function(i){var o,a;for(o in i)for(a=i[o].__parent;a;)a._iconNeedsUpdate=!0,a=a.__parent},_refreshSingleMarkerModeMarkers:function(i){var o,a;for(o in i)a=i[o],this.hasLayer(a)&&a.setIcon(this._overrideMarkerIcon(a))}}),L.Marker.include({refreshIconOptions:function(i,o){var a=this.options.icon;return L.setOptions(a,i),this.setIcon(a),o&&this.__parent&&this.__parent._group.refreshClusters(this),this}}),n.MarkerClusterGroup=r,n.MarkerCluster=s,Object.defineProperty(n,"__esModule",{value:!0})})})(uF,uF.exports);const je={electrician:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#3730A3" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon></svg>',plumber:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#3B82F6" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"></path></svg>',carpenter:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#8B5CF6" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="m15 12-8.5 8.5c-.83.83-2.17.83-3 0 0 0 0 0 0 0a2.12 2.12 0 0 1 0-3L12 9"></path><path d="M17.64 15 22 10.64"></path><path d="m20.91 11.7-1.25-1.25c-.6-.6-.93-1.4-.93-2.25v-.86L16.01 4.6a5.56 5.56 0 0 0-3.94-1.64H9l.92.82A6.18 6.18 0 0 1 12 8.4v1.56l2 2h2.47l2.26 1.91"></path></svg>',painter:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#EC4899" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M18.37 2.63 14 7l-1.74-1.74a1 1 0 0 0-1.42 0L9.16 7l-7.53 7.53a1 1 0 0 0 0 1.42l4.24 4.24a1 1 0 0 0 1.42 0L15 12.58l1.74 1.74a1 1 0 0 0 1.42 0L20 12.5V7l1.9-1.9a.93.93 0 0 0 .63-.27.94.94 0 0 0 0-1.33l-2.83-2.83a.94.94 0 0 0-1.33 0 .93.93 0 0 0-.27.63Z"></path><path d="M11.5 15.5 8 19"></path></svg>',designer:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#10B981" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="m12 19 7-7 3 3-7 7-3-3z"></path><path d="m18 13-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"></path><path d="m2 2 7.586 7.586"></path><circle cx="11" cy="11" r="2"></circle></svg>',mechanic:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#F59E0B" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"></path><circle cx="12" cy="12" r="3"></circle></svg>',barber:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#6366F1" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="6" cy="6" r="3"></circle><circle cx="6" cy="18" r="3"></circle><line x1="20" y1="4" x2="8.12" y2="15.88"></line><line x1="14.47" y1="14.48" x2="20" y2="20"></line><line x1="8.12" y1="8.12" x2="12" y2="12"></line></svg>',blacksmith:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#EF4444" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="m15 12-8.5 8.5c-.83.83-2.17.83-3 0 0 0 0 0 0 0a2.12 2.12 0 0 1 0-3L12 9"></path><path d="M17.64 15 22 10.64"></path><path d="m20.91 11.7-1.25-1.25c-.6-.6-.93-1.4-.93-2.25v-.86L16.01 4.6a5.56 5.56 0 0 0-3.94-1.64H9l.92.82A6.18 6.18 0 0 1 12 8.4v1.56l2 2h2.47l2.26 1.91"></path></svg>',builder:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#94A3B8" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><rect x="4" y="2" width="16" height="20" rx="2" ry="2"></rect><path d="M9 22v-4h6v4"></path><path d="M8 6h.01"></path><path d="M16 6h.01"></path><path d="M12 6h.01"></path><path d="M12 10h.01"></path><path d="M12 14h.01"></path><path d="M16 10h.01"></path><path d="M16 14h.01"></path><path d="M8 10h.01"></path><path d="M8 14h.01"></path></svg>',ac:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#0EA5E9" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M9.59 4.59A2 2 0 1 1 11 8H2m10.59 11.41A2 2 0 1 0 14 16H2m15.73-8.27A2.5 2.5 0 1 1 19.5 12H2"></path></svg>',tailor:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#D946EF" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="6" cy="6" r="3"></circle><circle cx="6" cy="18" r="3"></circle><line x1="20" y1="4" x2="8.12" y2="15.88"></line><line x1="14.47" y1="14.48" x2="20" y2="20"></line><line x1="8.12" y1="8.12" x2="12" y2="12"></line></svg>',chef:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#FB923C" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2"></path><path d="M7 2v20"></path><path d="M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7"></path></svg>',farmer:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#84CC16" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M12 7.5a4.5 4.5 0 1 1 4.5 4.5M12 7.5A4.5 4.5 0 1 0 7.5 12M12 7.5V9m-4.5 3a4.5 4.5 0 1 0 4.5 4.5M7.5 12H9m7.5 0a4.5 4.5 0 1 1-4.5 4.5m4.5-4.5H15m-3 4.5V15"></path><circle cx="12" cy="12" r="3"></circle><path d="m8 16 1.5-1.5"></path><path d="M14.5 9.5 16 8"></path><path d="m8 8 1.5 1.5"></path><path d="M14.5 14.5 16 16"></path></svg>',appliance_repair:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#0284C7" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="7" width="20" height="15" rx="2" ry="2"></rect><polyline points="17 2 12 7 7 2"></polyline></svg>',phone_repair:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#7C3AED" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><rect x="5" y="2" width="14" height="20" rx="2" ry="2"></rect><line x1="12" y1="18" x2="12.01" y2="18"></line></svg>',doctor:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#06B6D4" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M4.8 2.3A.3.3 0 1 0 5 2H4a2 2 0 0 0-2 2v5a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6V4a2 2 0 0 0-2-2h-1a.2.2 0 1 0 .3.3"></path><path d="M8 15v1a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6v-4"></path><circle cx="20" cy="10" r="2"></circle></svg>',nurse:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#0EA5E9" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="m18 2 4 4"></path><path d="m17 7 3-3"></path><path d="M19 9 8.7 19.3c-1 1-2.5 1-3.4 0v0c-1-1-1-2.5 0-3.4L15.6 5.6"></path><path d="m14 6 7.5-3.5"></path><path d="m5 14-1 1"></path><path d="m3 12 7.5-7.5"></path><path d="m7 18 1 1"></path><path d="m5 16 2 2"></path></svg>',physiotherapist:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#0891B2" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="22 12 18 12 15 21 9 3 6 12 2 12"></polyline></svg>',beauty_expert:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#D946EF" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"></path><path d="M5 3v4"></path><path d="M19 17v4"></path><path d="M3 5h4"></path><path d="M17 19h4"></path></svg>',chef_hat:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#FB923C" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M6 13.87A4 4 0 0 1 7.41 6a5.11 5.11 0 0 1 1.05-1.54 5 5 0 0 1 7.08 0A5.11 5.11 0 0 1 16.59 6 4 4 0 0 1 18 13.87V21H6Z"></path><line x1="6" y1="17" x2="18" y2="17"></line></svg>',waiter:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#F97316" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M17 8h1a4 4 0 1 1 0 8h-1"></path><path d="M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z"></path><line x1="6" y1="2" x2="6" y2="4"></line><line x1="10" y1="2" x2="10" y2="4"></line><line x1="14" y1="2" x2="14" y2="4"></line></svg>',event_planner:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#F43F5E" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>',electronics_technician:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#2563EB" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><rect x="4" y="4" width="16" height="16" rx="2" ry="2"></rect><rect x="9" y="9" width="6" height="6"></rect><line x1="9" y1="2" x2="9" y2="4"></line><line x1="15" y1="2" x2="15" y2="4"></line><line x1="9" y1="20" x2="9" y2="22"></line><line x1="15" y1="20" x2="15" y2="22"></line><line x1="20" y1="9" x2="22" y2="9"></line><line x1="20" y1="14" x2="22" y2="14"></line><line x1="2" y1="9" x2="4" y2="9"></line><line x1="2" y1="14" x2="4" y2="14"></line></svg>',web_designer:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#8B5CF6" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="2" y1="12" x2="22" y2="12"></line><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path></svg>',app_developer:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#4F46E5" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="16 18 22 12 16 6"></polyline><polyline points="8 6 2 12 8 18"></polyline></svg>',default:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#3730A3" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="7" width="20" height="14" rx="2" ry="2"></rect><path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"></path></svg>'},Ue=(t,e="#3730A3")=>{const n=`
    <div style="
      background-color: white;
      border-radius: 50%;
      padding: 8px;
      border: 2px solid ${e};
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 3px 6px rgba(0, 0, 0, 0.25);
      width: 40px;
      height: 40px;
    ">
      ${t}
    </div>
  `;return si.divIcon({html:n,className:"custom-profession-icon",iconSize:[44,44],iconAnchor:[22,22],popupAnchor:[0,-22]})},on={default:Ue(je.default),:Ue(je.electrician,"#3730A3"),:Ue(je.plumber,"#3B82F6"),:Ue(je.carpenter,"#8B5CF6"),:Ue(je.painter,"#EC4899")," ":Ue(je.designer,"#10B981")," ":Ue(je.designer,"#10B981"),:Ue(je.mechanic,"#F59E0B"),:Ue(je.barber,"#6366F1"),:Ue(je.blacksmith,"#EF4444"),:Ue(je.builder,"#94A3B8"),:Ue(je.ac,"#0EA5E9"),:Ue(je.tailor,"#D946EF"),:Ue(je.chef,"#FB923C"),:Ue(je.farmer,"#84CC16"),"  ":Ue(je.appliance_repair,"#0284C7"),"  ":Ue(je.phone_repair,"#7C3AED"),"   ":Ue(je.blacksmith,"#64748B")," ":Ue(je.builder,"#475569")," ":Ue(je.default,"#06B6D4")," ":Ue(je.default,"#F97316"),"  ":Ue(je.mechanic,"#4F46E5"),"  ":Ue(je.ac,"#0EA5E9")," ":Ue(je.builder,"#94A3B8"),"  ":Ue(je.plumber,"#3B82F6"),"  ":Ue(je.blacksmith,"#EF4444"),"    ":Ue(je.blacksmith,"#DC2626"),:Ue(je.default,"#8B5CF6"),:Ue(je.default,"#EC4899"),:Ue(je.default,"#F97316"),:Ue(je.doctor,"#06B6D4"),:Ue(je.nurse,"#0EA5E9")," ":Ue(je.physiotherapist,"#0891B2")," ":Ue(je.beauty_expert,"#D946EF"),:Ue(je.chef_hat,"#FB923C"),:Ue(je.waiter,"#F97316")," ":Ue(je.event_planner,"#F43F5E")," ":Ue(je.electronics_technician,"#2563EB")," ":Ue(je.web_designer,"#8B5CF6")," ":Ue(je.app_developer,"#4F46E5"),electrician:Ue(je.electrician,"#3730A3"),plumber:Ue(je.plumber,"#3B82F6"),carpenter:Ue(je.carpenter,"#8B5CF6"),painter:Ue(je.painter,"#EC4899"),designer:Ue(je.designer,"#10B981"),mechanic:Ue(je.mechanic,"#F59E0B"),barber:Ue(je.barber,"#6366F1"),blacksmith:Ue(je.blacksmith,"#EF4444"),builder:Ue(je.builder,"#94A3B8"),ac:Ue(je.ac,"#0EA5E9"),tailor:Ue(je.tailor,"#D946EF"),chef:Ue(je.chef,"#FB923C"),farmer:Ue(je.farmer,"#84CC16"),appliance_repair:Ue(je.appliance_repair,"#0284C7"),phone_repair:Ue(je.phone_repair,"#7C3AED"),doctor:Ue(je.doctor,"#06B6D4"),nurse:Ue(je.nurse,"#0EA5E9"),physiotherapist:Ue(je.physiotherapist,"#0891B2"),beauty_expert:Ue(je.beauty_expert,"#D946EF"),chef_hat:Ue(je.chef_hat,"#FB923C"),waiter:Ue(je.waiter,"#F97316"),event_planner:Ue(je.event_planner,"#F43F5E"),electronics_technician:Ue(je.electronics_technician,"#2563EB"),web_designer:Ue(je.web_designer,"#8B5CF6"),app_developer:Ue(je.app_developer,"#4F46E5")},gYe=({onMapReady:t,userLocation:e})=>{const n=uu();return A.useEffect(()=>(n&&t&&t(n),n.on("moveend",()=>{}),n.on("zoomend",()=>{n.eachLayer(r=>{r instanceof si.Circle&&r.redraw()})}),()=>{n.off("moveend"),n.off("zoomend")}),[n,t]),A.useEffect(()=>{n&&e&&(console.log("    :",e),n.setView([e.latitude,e.longitude],n.getZoom(),{animate:!0,duration:.5}))},[n,e]),null},yYe=({center:t,radius:e})=>{const n=uu(),r=A.useRef(null),s=A.useRef(null),i=A.useRef(t),o=A.useRef(null);A.useEffect(()=>{const l=()=>{if(console.log("   /  SearchRadiusController"),r.current){r.current.remove();const c=si.circle([t.latitude,t.longitude],{radius:e,color:"#4238C8",fillColor:"#4238C8",fillOpacity:.1,weight:2}).addTo(n);r.current=c}};return n.on("zoomend",l),()=>{n.off("zoomend",l)}},[n,t,e]);const a=A.useCallback(()=>{if(!i.current||!e||!n)return;r.current&&n.removeLayer(r.current),s.current&&n.removeLayer(s.current),n.setView([i.current.latitude,i.current.longitude],n.getZoom(),{animate:!0,duration:.5});const l=si.circle([i.current.latitude,i.current.longitude],{radius:e,color:"#6366F1",fillColor:"#6366F1",fillOpacity:.2,weight:2,interactive:!1,bubblingMouseEvents:!1,renderer:si.svg({padding:100})}).addTo(n);r.current=l;const c=si.circleMarker([i.current.latitude,i.current.longitude],{radius:5,color:"#6366F1",fillColor:"#6366F1",fillOpacity:1,weight:2,interactive:!1,zIndexOffset:1e3}).addTo(n);s.current=c},[n,e]);return A.useEffect(()=>{(!o.current||o.current.latitude!==t.latitude||o.current.longitude!==t.longitude)&&(console.log("      "),i.current=t,o.current={...t},a())},[t,a]),A.useEffect(()=>{a()},[a,e]),A.useEffect(()=>{if(!n)return;const l=()=>{r.current&&a()},c=()=>{r.current&&(n.getBounds().contains(r.current.getLatLng())||n.panTo(r.current.getLatLng()))};return n.on("zoomend",l),n.on("moveend",c),()=>{n.off("zoomend",l),n.off("moveend",c),r.current&&n.removeLayer(r.current),s.current&&n.removeLayer(s.current)}},[n,a]),null},bYe=({children:t})=>{const e=uu(),n=A.useRef(null);return A.useEffect(()=>(n.current=si.markerClusterGroup({showCoverageOnHover:!1,maxClusterRadius:50,iconCreateFunction:r=>si.divIcon({html:`<div class="cluster-icon">${r.getChildCount()}</div>`,className:"custom-marker-cluster",iconSize:si.point(40,40)}),singleMarkerMode:!1,spiderfyOnMaxZoom:!0,zoomToBoundsOnClick:!0,disableClusteringAtZoom:16,animate:!0,animateAddingMarkers:!1,removeOutsideVisibleBounds:!0,chunkedLoading:!0}),e.addLayer(n.current),e.on("zoomend",()=>{n.current&&n.current.refreshClusters()}),()=>{e.off("zoomend"),e.removeLayer(n.current)}),[e]),A.useEffect(()=>{if(!n.current){console.warn("Cluster group reference is not available");return}try{n.current.clearLayers(),d.Children.forEach(t,r=>{if(r)try{const{position:s,icon:i,eventHandlers:o,children:a}=r.props;if(!s||!Array.isArray(s)||s.length!==2){console.warn("Invalid marker position:",s);return}const l=si.marker(s);if(i&&l.setIcon(i),o&&o.click&&l.on("click",o.click),a)try{const c=document.createElement("div");c.className="craftsman-popup-container";try{lB.createRoot(c).render(a)}catch(u){console.error("Error rendering popup content:",u),c.innerHTML=" "}l.bindPopup(c,{className:"craftsman-popup",minWidth:300,maxWidth:350,offset:[0,-10],autoPan:!0,closeButton:!0,autoClose:!1,closeOnClick:!1,closeOnEscapeKey:!0,autoPanPadding:[50,50]}),l.on("click",function(){e.closePopup(),this.openPopup()})}catch(c){console.error("Error creating popup:",c)}n.current.addLayer(l)}catch(s){console.error("Error processing marker:",s)}})}catch(r){console.error("Error in MarkerClusterGroup useEffect:",r)}},[t]),null},vYe=({craftsmen:t=[],selectedProfessions:e=[],selectedRating:n=0,userLocation:r=null,searchRadius:s=5e3,onCraftsmanSelect:i=()=>{}})=>{const o=We(E=>E.darkMode),[a]=A.useState([33.5138,36.2765]),[l]=A.useState(13),[c,u]=A.useState([]),h=A.useRef(null),m=A.useRef(!0),p=A.useCallback(E=>{if(h.current=E,r&&m.current){const N=[r.latitude,r.longitude];E.setView(N,E.getZoom(),{animate:!0,duration:.5}),m.current=!1}},[r]),y=A.useRef(null);A.useEffect(()=>{if(r&&h.current){const E=m.current,N=!y.current||Math.abs(y.current.latitude-r.latitude)>.01||Math.abs(y.current.longitude-r.longitude)>.01;if(E||N){const C=[r.latitude,r.longitude];console.log("Centering map to:",C),h.current.setView(C,h.current.getZoom(),{animate:!0,duration:.5}),y.current={...r},E&&(m.current=!1)}}},[r]);const v=()=>{const E=uu();return A.useEffect(()=>{const N=()=>{console.log("   /:",E.getZoom()),E.invalidateSize()};if(E.on("zoomend",N),!(localStorage.getItem("token")!==null)){E.getContainer().classList.add("unregistered-user-map");const S=T=>{T.target.classList.contains("leaflet-marker-icon")&&(T.target.title="     ")};return E.getContainer().addEventListener("mouseover",S),()=>{E.off("zoomend",N),E.getContainer().classList.remove("unregistered-user-map"),E.getContainer().removeEventListener("mouseover",S)}}return()=>{E.off("zoomend",N)}},[E]),null},x=A.useRef({craftsmen:[],selectedProfessions:[],selectedRating:0,userLocation:null,searchRadius:0});A.useEffect(()=>{if(!t||t.length===0){c.length!==0&&u([]);return}const E={craftsmenLength:t.length,selectedProfessions:e||[],selectedRating:n,userLocation:r,searchRadius:s},N=x.current;if(!(E.craftsmenLength!==N.craftsmenLength||JSON.stringify(E.selectedProfessions)!==JSON.stringify(N.selectedProfessions)||E.selectedRating!==N.selectedRating||E.userLocation&&!N.userLocation||N.userLocation&&!E.userLocation||E.userLocation&&N.userLocation&&(Math.abs(E.userLocation.latitude-N.userLocation.latitude)>1e-4||Math.abs(E.userLocation.longitude-N.userLocation.longitude)>1e-4)||E.searchRadius!==N.searchRadius))return;x.current={craftsmenLength:t.length,selectedProfessions:[...e||[]],selectedRating:n,userLocation:r?{...r}:null,searchRadius:s};let S=[...t];e&&e.length>0&&(S=S.filter(T=>{if(T.professions&&Array.isArray(T.professions)&&T.professions.length>0)return T.professions.some(P=>e.some(R=>typeof P=="string"?P.trim().toLowerCase()===R.trim().toLowerCase():P.name&&P.name.trim().toLowerCase()===R.trim().toLowerCase()));const I=T.profession||"";return e.some(P=>I.trim().toLowerCase()===P.trim().toLowerCase())}),console.log(`Filtered by profession: ${S.length} craftsmen remain`)),n>0&&(S=S.filter(T=>T.rating>=n)),r&&(S=S.filter(T=>{var D,B;const I=T.latitude||((D=T.location)==null?void 0:D.lat),P=T.longitude||((B=T.location)==null?void 0:B.lng);return!I||!P?!1:b(r.latitude,r.longitude,I,P)<=s})),console.log(`Filtering results:
      - Total craftsmen: ${t.length}
      - After profession filter: ${S.length}
      - Selected professions: ${e?e.join(", "):"none"}
      - Selected rating: ${n}
      - Search radius: ${s} meters
    `),u(S)},[t,e,n,r,s]);const b=(E,N,C,S)=>{const I=E*Math.PI/180,P=C*Math.PI/180,R=(C-E)*Math.PI/180,D=(S-N)*Math.PI/180,B=Math.sin(R/2)*Math.sin(R/2)+Math.cos(I)*Math.cos(P)*Math.sin(D/2)*Math.sin(D/2);return 6371e3*(2*Math.atan2(Math.sqrt(B),Math.sqrt(1-B)))},w=E=>{if(!E)return console.log("No profession provided, using default icon"),on.default;if(typeof E=="object"&&E!==null)if(E.name)E=E.name;else return console.log("Profession object without name property:",E),on.default;const N=E.toString();if(console.log(`Getting icon for profession: "${N}"`),on[N])return console.log(`Found exact match for "${N}"`),on[N];const C=N.toLowerCase();return C.includes("")?on.:C.includes("")||C.includes("")?on.:C.includes("")?on.:C.includes("")||C.includes("")?on.:C.includes("")||C.includes("")?on[" "]:C.includes("")?on.:C.includes("")||C.includes("")?on.:C.includes("")||C.includes("")?on.:C.includes("")||C.includes("")?on.:C.includes("")||C.includes("")?on.:C.includes("")||C.includes("")?on.:C.includes("")||C.includes("")||C.includes("")||C.includes("")?on.:C.includes("")||C.includes("")?on.:C.includes("")||C.includes("")?on["  "]:C.includes("")||C.includes("")||C.includes("")?on["  "]:C.includes("")||C.includes("")?on.:C.includes("")||C.includes("")?on.:C.includes("")||C.includes("")||C.includes(" ")?on[" "]:C.includes("")||C.includes("")||C.includes("")?on[" "]:C.includes("")||C.includes("")||C.includes("")?on.:C.includes("")||C.includes("")||C.includes("")?on[" "]:C.includes("")||C.includes("")?on[" "]:C.includes(" ")||C.includes(" ")||C.includes("")?on[" "]:C.includes("")||C.includes("")||C.includes("")?on[" "]:(console.log(`No matching icon found for "${N}", using default`),on.default)};return d.createElement("div",{className:`advanced-map-container rounded-lg overflow-hidden shadow-lg ${o?"border border-gray-700":"border border-gray-200"}`},d.createElement(SA,{center:a,zoom:l,style:{height:"500px",width:"100%"},className:"z-0",zoomControl:!0,doubleClickZoom:!0,scrollWheelZoom:!0,dragging:!0,zoomSnap:.5,zoomDelta:.5,minZoom:3,maxZoom:18,maxBounds:[[-90,-180],[90,180]]},d.createElement(TA,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),d.createElement(gYe,{onMapReady:p,userLocation:r}),d.createElement(v,null),r&&d.createElement(yYe,{center:r,radius:s}),d.createElement(bYe,{chunkedLoading:!0,zoomToBoundsOnClick:!0,showCoverageOnHover:!1,spiderfyOnMaxZoom:!0,disableClusteringAtZoom:16,maxClusterRadius:50},c.map(E=>{const N=E.latitude||E.location&&E.location.lat,C=E.longitude||E.location&&E.location.lng;let S="default";if(E.professions&&Array.isArray(E.professions)&&E.professions.length>0)if(e&&e.length>0){for(const T of E.professions){const I=typeof T=="string"?T:T.name||"";if(e.some(P=>P.trim().toLowerCase()===I.trim().toLowerCase())){S=I;break}}if(S==="default"){const T=E.professions[0];S=typeof T=="string"?T:T.name||"default"}}else{const T=E.professions[0];S=typeof T=="string"?T:T.name||"default"}else E.profession&&(S=E.profession);if(console.log(`Craftsman ${E.id||E._id||"unknown"} data:`,{name:E.name||E.user&&E.user.name||"unknown",displayProfession:S,selectedProfessions:e||[],hasMatchingProfession:e&&e.length>0?E.professions&&E.professions.some(T=>e.includes(typeof T=="string"?T:T.name||"")):"N/A",icon:w(S)}),!N||!C)return console.warn(`Craftsman ${E.id||E._id} has invalid location`),null;if(r){const T=b(r.latitude,r.longitude,N,C);if(T>s)return console.log(`Craftsman ${E.id||E._id} outside search radius:`,{distance:T,searchRadius:s}),null}return d.createElement(gx,{key:E.id||E._id||`craftsman-${Math.random()}`,position:[N,C],icon:w(S),zIndexOffset:2e3,eventHandlers:{click:T=>{localStorage.getItem("token")!==null&&(h.current&&h.current.closePopup(),setTimeout(()=>{T.target.openPopup()},50))}},className:localStorage.getItem("token")===null?"disabled-marker":""},localStorage.getItem("token")&&d.createElement("div",{className:"craftsman-popup-content"},d.createElement("div",{className:"flex flex-col items-start w-full"},d.createElement("div",{className:"craftsman-popup-name mb-1 w-full text-right"},d.createElement(Xf,{size:18,className:"ml-1"}),E.name||E.user&&E.user.name||""),d.createElement("div",{className:"craftsman-popup-profession mb-2 w-full text-right"},d.createElement("div",{className:"font-medium text-indigo-600 dark:text-indigo-400 text-right"},E.profession||E.professions&&E.professions.length>0&&E.professions[0]||"  "),(E.specialization||E.specializations&&E.specializations.length>0&&E.specializations[0])&&d.createElement("div",{className:"text-xs opacity-75 text-right"},E.specialization||E.specializations&&E.specializations.length>0&&E.specializations[0]))),d.createElement("div",{className:"craftsman-popup-rating mt-1"},d.createElement(Yn,{size:16}),d.createElement("span",null,(E.rating||0).toFixed(1)),d.createElement("span",{className:"text-xs"},"(",E.reviewCount||0," )")),(E.phone||E.user&&E.user.phone)&&d.createElement("div",{className:"craftsman-popup-phone mt-1"},d.createElement(vf,{size:14}),E.phone||E.user&&E.user.phone),d.createElement("button",{onClick:T=>{T.stopPropagation();const I=E.id||E._id;i({...E,id:I},!0)},className:"craftsman-popup-button"},"  ",d.createElement(Hie,{size:14}))))}))),d.createElement("div",{className:`p-3 ${o?"bg-gray-800 text-gray-200":"bg-white text-gray-800"}`},d.createElement("div",{className:"flex justify-between items-center"},d.createElement("div",null,d.createElement("span",{className:"font-bold"},c.length),d.createElement("span",{className:"mr-1"},"   ")),r&&d.createElement("div",{className:"text-sm opacity-75"},d.createElement("span",null," : "),d.createElement("span",{className:"font-medium"},(s/1e3).toFixed(1)," ")))))},xYe=({professions:t=[],selectedProfessions:e=[],onProfessionChange:n,selectedRating:r=0,onRatingChange:s,searchRadius:i=5,onRadiusChange:o})=>{const a=We(u=>u.darkMode),l=u=>{e.includes(u)?n(e.filter(h=>h!==u)):n([...e,u])};A.useEffect(()=>{e.length>0&&n([])},[]);const c=u=>{s(u===r?0:u)};return d.createElement("div",{className:`map-filter-container ${a?"bg-gray-800 text-gray-200":"bg-white text-gray-800"} shadow-md`},d.createElement("div",{className:"flex justify-between items-center mb-4"},d.createElement("h3",{className:"text-lg font-bold"}," ")),d.createElement("div",{className:"map-filter-group"},d.createElement("div",{className:"map-filter-title flex items-center"},d.createElement(VT,{size:16,className:"ml-1"}),""),d.createElement("div",{className:"map-filter-options"},t.map(u=>d.createElement("div",{key:u,onClick:()=>l(u),className:`map-filter-option ${e.includes(u)?"active":""} ${a?"bg-gray-700 hover:bg-gray-600":"bg-gray-100 hover:bg-gray-200"}`},u)))),d.createElement("div",{className:"map-filter-group"},d.createElement("div",{className:"map-filter-title flex items-center"},d.createElement(Yn,{size:16,className:"ml-1"}),""),d.createElement("div",{className:"map-filter-options"},[1,2,3,4,5].map(u=>d.createElement("div",{key:u,onClick:()=>c(u),className:`map-filter-option ${r>=u&&r>0?"active":""} ${a?"bg-gray-700 hover:bg-gray-600":"bg-gray-100 hover:bg-gray-200"}`},u,"+")))))},wYe=({suggestions:t,onSelectSuggestion:e})=>{const{darkMode:n}=We();return!t||t.length===0?null:d.createElement(At.div,{className:`absolute z-10 w-full mt-1 rounded-md shadow-lg ${n?"bg-gray-800":"bg-white"} border ${n?"border-gray-700":"border-gray-200"}`,initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.2}},d.createElement("ul",{className:"py-1"},t.map((r,s)=>d.createElement("li",{key:s,className:`px-4 py-2 cursor-pointer text-right ${n?"hover:bg-gray-700 text-gray-200":"hover:bg-indigo-50 text-gray-700"} transition-colors duration-150`,onClick:()=>e(r)},r))))},EYe=({criteria:t,onClose:e})=>{const{darkMode:n}=We();return!t||!(t.profession||t.city||t.street||t.hospital||t.mosque||t.rating>0||t.radius)?null:d.createElement(At.div,{className:`mb-4 p-4 rounded-lg shadow-md ${n?"bg-indigo-900/50 text-gray-200 border border-indigo-700":"bg-indigo-50 text-gray-800 border border-indigo-200"}`,initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3}},d.createElement("div",{className:"flex justify-between items-start"},d.createElement("div",{className:"flex-1"},d.createElement("h3",{className:`text-base font-bold mb-2 ${n?"text-indigo-300":"text-indigo-700"}`},"   :"),d.createElement("ul",{className:"space-y-1 text-sm"},t.profession&&d.createElement("li",{className:"flex items-center"},d.createElement("span",{className:`inline-block w-20 font-medium ${n?"text-indigo-300":"text-indigo-600"}`},":"),d.createElement("span",null,t.profession)),t.city&&d.createElement("li",{className:"flex items-center"},d.createElement("span",{className:`inline-block w-20 font-medium ${n?"text-indigo-300":"text-indigo-600"}`},":"),d.createElement("span",null,t.city)),t.street&&d.createElement("li",{className:"flex items-center"},d.createElement("span",{className:`inline-block w-20 font-medium ${n?"text-indigo-300":"text-indigo-600"}`},":"),d.createElement("span",null,t.street)),t.hospital&&d.createElement("li",{className:"flex items-center"},d.createElement("span",{className:`inline-block w-20 font-medium ${n?"text-indigo-300":"text-indigo-600"}`},":"),d.createElement("span",null,t.hospital)),t.mosque&&d.createElement("li",{className:"flex items-center"},d.createElement("span",{className:`inline-block w-20 font-medium ${n?"text-indigo-300":"text-indigo-600"}`},":"),d.createElement("span",null,t.mosque)),t.rating>0&&d.createElement("li",{className:"flex items-center"},d.createElement("span",{className:`inline-block w-20 font-medium ${n?"text-indigo-300":"text-indigo-600"}`},":"),d.createElement("span",null,t.rating," ")),t.radius&&d.createElement("li",{className:"flex items-center"},d.createElement("span",{className:`inline-block w-20 font-medium ${n?"text-indigo-300":"text-indigo-600"}`}," :"),d.createElement("span",null,t.radius," "))),d.createElement("h1",{className:`text-sm  mb-1 mt-3 ${n?"text-indigo-300":"text-indigo-700"}`},"     ."," ")),d.createElement("button",{onClick:e,className:`p-1 rounded-full ${n?"text-gray-400 hover:text-white hover:bg-gray-700":"text-gray-500 hover:text-gray-700 hover:bg-gray-200"} transition-colors duration-200`,"aria-label":""},d.createElement(fo,{size:16}))))},eS=[{id:1,name:" ",professions:[{id:12,name:""}]},{id:2,name:"  ",professions:[{id:1,name:""},{id:2,name:""},{id:6,name:""},{id:9,name:""},{id:13,name:"  "},{id:14,name:"  "},{id:28,name:"  "},{id:30,name:"  "},{id:33,name:"  "}]},{id:3,name:" ",professions:[{id:3,name:""},{id:4,name:""},{id:7,name:""},{id:8,name:""},{id:21,name:"   "},{id:22,name:" "},{id:31,name:" "},{id:34,name:"  "},{id:38,name:"    "}]},{id:4,name:" ",professions:[{id:5,name:" "},{id:10,name:""},{id:11,name:""},{id:25,name:" "}]},{id:5,name:" ",professions:[{id:15,name:""},{id:26,name:" "}]},{id:6,name:" ",professions:[{id:16,name:""},{id:17,name:""},{id:20,name:""}]},{id:7,name:"  ",professions:[{id:40,name:""},{id:41,name:""},{id:42,name:" "},{id:43,name:" "}]},{id:8,name:"  ",professions:[{id:50,name:""},{id:51,name:""},{id:52,name:" "}]}],kYe=eS.reduce((t,e)=>[...t,...e.professions],[]),NYe=()=>{var Nt;const t=Dt(j=>j.user),e=Dt(j=>j.logout),n=We(j=>j.darkMode),r=t!==null;A.useEffect(()=>{!r&&t&&(e(),console.log("       ")),a(z)},[r,t,e]),A.useEffect(()=>{o(),a(z)},[r]);const{craftsmen:s,filteredCraftsmen:i,fetchCraftsmen:o,filterCraftsmen:a}=Lg(),[l,c]=A.useState("map"),[u,h]=A.useState(!1),[m,p]=A.useState(""),[y,v]=A.useState([]),[x,b]=A.useState(!1),[w,E]=A.useState(null),[N,C]=A.useState(!1),S=A.useRef(null),T=A.useRef(null),[I,P]=A.useState([]),[R,D]=A.useState(null);A.useEffect(()=>{P([]),q(j=>({...j,profession:"",professions:[]}))},[]);const[B,Z]=A.useState(0),[z,q]=A.useState({profession:"",professions:[],available:!0,rating:0,location:(t==null?void 0:t.location)||{lng:36.2765,lat:33.5138},radius:1}),[M,U]=A.useState([]),[V,ne]=A.useState([]),[J,G]=A.useState(!1),[X,H]=A.useState([]),[W,te]=A.useState([]),[ae,ve]=A.useState(!1),[Ce,Ie]=A.useState([]),[Fe,De]=A.useState([]),[Ke,Je]=A.useState(!1);A.useEffect(()=>{o(),a(z)},[]),A.useEffect(()=>{console.log("Location changed:",z.location),T.current&&z.location&&T.current.updateLocation(z.location)},[z.location]);const dt=j=>{const{name:Q,value:ge,type:Se,checked:$e}=j.target,Be=Se==="checkbox"?$e:ge;q({...z,[Q]:Be}),Q==="rating"&&Z(parseFloat(ge)),a({...z,[Q]:Be})},Et=j=>{q({...z,location:j}),(async(ge,Se,$e)=>{try{Yt(!0);const Be=`
          [out:json];
          (
            way["highway"]["name"](around:${$e*1e3},${ge},${Se});
            node["amenity"="hospital"](around:${$e*1e3},${ge},${Se});
            node["amenity"="clinic"](around:${$e*1e3},${ge},${Se});
            node["amenity"="doctors"](around:${$e*1e3},${ge},${Se});
            node["amenity"="mosque"](around:${$e*1e3},${ge},${Se});
            node["building"="mosque"](around:${$e*1e3},${ge},${Se});
          );
          out tags;
        `,Ut=await fetch("https://overpass-api.de/api/interpreter",{method:"POST",body:Be,headers:{"Content-Type":"text/plain"}});if(!Ut.ok)throw new Error(`HTTP error! status: ${Ut.status}`);const Ft=await Ut.json();if(!Ft||!Array.isArray(Ft.elements))return console.error("Invalid data structure from Overpass API:",Ft),{streets:[],hospitals:[],mosques:[]};const pn=[],Jt=[],Pn=[];return Ft.elements.forEach(Dn=>{if(!Dn.tags||!Dn.tags.name)return;const gs=Dn.tags.name.trim();Dn.type==="way"&&Dn.tags.highway?pn.push(gs):Dn.type==="node"&&(Dn.tags.amenity==="hospital"||Dn.tags.amenity==="clinic"||Dn.tags.amenity==="doctors")?Jt.push(gs):Dn.type==="node"&&(Dn.tags.amenity==="mosque"||Dn.tags.building==="mosque")&&Pn.push(gs)}),{streets:[...new Set(pn)],hospitals:[...new Set(Jt)],mosques:[...new Set(Pn)]}}catch(Be){return console.error("Error fetching data:",Be),{streets:[],hospitals:[],mosques:[]}}})(j.lat,j.lng,z.radius).then(ge=>{setTimeout(()=>{U(ge.streets||[]),ne([]),Ie(ge.mosques||[]),De([]),H(ge.hospitals||[]),te([]),Yt(!1)},1e3)}).catch(ge=>{console.error("   :",ge),setTimeout(()=>{Yt(!1)},1e3)})},kt=j=>{const Q=typeof j=="object"?parseFloat(j.target.value):j,ge={...z,radius:Q};q(ge),a(ge),T.current&&T.current.updateRadius(Q),Tr(null,[],!0)},Ot=j=>{if(j.preventDefault(),m.trim()){const Q=$1(m);console.log("  :",Q);let ge=[...z.professions];Q.profession&&!ge.includes(Q.profession)&&ge.push(Q.profession);const Se={...z,profession:Q.profession||z.profession,professions:ge,rating:Q.rating>0?Q.rating:z.rating,location:Q.location||z.location,radius:Q.radius||z.radius};if(console.log(" :",Se),q(Se),Q.profession&&!I.includes(Q.profession)&&P([...I,Q.profession]),Q.street&&!M.includes(Q.street)&&U(Be=>[...Be,Q.street]),a(Se),b(!1),Q.profession||Q.city||Q.street||Q.rating>0||Q.radius){E(Q),C(!0);let Be="  : ";Q.profession&&(Be+=`
- : ${Q.profession}`),Q.city&&(Be+=`
- : ${Q.city}`),Q.street&&(Be+=`
- : ${Q.street}`),Q.hospital&&(Be+=`
- : ${Q.hospital}`),Q.mosque&&(Be+=`
- : ${Q.mosque}`),Q.rating>0&&(Be+=`
- : ${Q.rating} `),Q.radius&&(Be+=`
-  : ${Q.radius} `),console.log(Be)}}else console.log("   :",z),a(z)},St=()=>{console.log("   ");const j={profession:"",professions:[],available:!0,rating:0,location:(t==null?void 0:t.location)||{lng:36.2765,lat:33.5138},radius:1};q(j),P([]),D(null),p(""),Z(0),U([]),ne([]),H([]),te([]),Ie([]),De([]),G(!1),ve(!1),Je(!1),v([]),C(!1),E(null),console.log("    "),a(j)},[Qr,Yt]=A.useState(!1),Tr=(j,Q,ge=!1)=>{ge?(Yt(!0),(async($e,Be,Tt)=>{try{const Ut=`
            [out:json];
            (
              way["highway"]["name"](around:${Tt*1e3},${$e},${Be});
              node["amenity"="hospital"](around:${Tt*1e3},${$e},${Be});
              node["amenity"="clinic"](around:${Tt*1e3},${$e},${Be});
              node["amenity"="doctors"](around:${Tt*1e3},${$e},${Be});
              node["amenity"="mosque"](around:${Tt*1e3},${$e},${Be});
              node["building"="mosque"](around:${Tt*1e3},${$e},${Be});
            );
            out tags;
          `,pn=await fetch("https://overpass-api.de/api/interpreter",{method:"POST",body:Ut,headers:{"Content-Type":"text/plain"}});if(!pn.ok)throw new Error(`HTTP error! status: ${pn.status}`);const Jt=await pn.json();if(!Jt||!Array.isArray(Jt.elements))return console.error("Invalid data structure from Overpass API:",Jt),{streets:[],hospitals:[],mosques:[]};const Pn=[],Dn=[],gs=[];return Jt.elements.forEach($r=>{if(!$r.tags||!$r.tags.name)return;const Hl=$r.tags.name.trim();$r.type==="way"&&$r.tags.highway?Pn.push(Hl):$r.type==="node"&&($r.tags.amenity==="hospital"||$r.tags.amenity==="clinic"||$r.tags.amenity==="doctors")?Dn.push(Hl):$r.type==="node"&&($r.tags.amenity==="mosque"||$r.tags.building==="mosque")&&gs.push(Hl)}),{streets:[...new Set(Pn)],hospitals:[...new Set(Dn)],mosques:[...new Set(gs)]}}catch(Ut){return console.error("Error fetching data:",Ut),{streets:[],hospitals:[],mosques:[]}}})(z.location.lat,z.location.lng,z.radius).then($e=>{setTimeout(()=>{U($e.streets||[]),ne(Q||[]),Ie($e.mosques||[]),De([]),H($e.hospitals||[]),te([]),Yt(!1)},1e3)}).catch($e=>{console.error("   :",$e),setTimeout(()=>{Yt(!1)},1e3)})):(j&&typeof j=="object"&&j.streets?(U(j.streets||[]),H(j.hospitals||[]),Ie(j.mosques||[])):U(Array.isArray(j)?j:[]),ne(Q||[]))},Un=j=>{ne(Q=>[...Q,j])},ps=j=>{te(Q=>[...Q,j])},es=j=>{De(Q=>[...Q,j])},be=j=>{P(j);const Q={...z,professions:j};q(Q),a(Q)},le=j=>{console.log("   :",j);let Q;I.includes(j)?(console.log(" :",j),Q=I.filter(Se=>Se!==j)):(console.log(" :",j),Q=[...I,j]),P(Q);const ge={...z,professions:Q};console.log(" :",ge),q(ge),console.log("   :",Q),console.log("   :",Q),a(ge),c("list")},Ee=()=>{console.log("   "),P([]),D(null);const j={...z,professions:[]};console.log("  :",j),q(j),console.log("    "),a(j)},Ne=j=>{Z(j);const Q={...z,rating:j};q(Q),a(Q),console.log("   :",j)},Qe=m?i.filter(j=>!!(j.name&&j.name.toLowerCase().includes(m.toLowerCase())||j.profession&&j.profession.toLowerCase().includes(m.toLowerCase())||j.specialization&&j.specialization.toLowerCase().includes(m.toLowerCase())||j.professions&&Array.isArray(j.professions)&&j.professions.some(ge=>typeof ge=="string"?ge.toLowerCase().includes(m.toLowerCase()):ge&&ge.name?ge.name.toLowerCase().includes(m.toLowerCase()):!1)||j.specializations&&Array.isArray(j.specializations)&&j.specializations.some(ge=>typeof ge=="string"?ge.toLowerCase().includes(m.toLowerCase()):ge&&ge.name?ge.name.toLowerCase().includes(m.toLowerCase()):!1))):i,lt=Dt(j=>j.user);return d.createElement(ds,{user:lt,onLogout:e},d.createElement("div",{className:`min-h-screen ${n?"bg-gray-900":"bg-gradient-to-br from-blue-50 to-indigo-100"} transition-colors duration-300`},d.createElement("section",{className:`${n?"bg-gradient-to-r from-gray-800 to-gray-700":"bg-gradient-to-r from-blue-700 to-indigo-800"} text-white py-8 shadow-lg transition-colors duration-300`},d.createElement("div",{className:"container mx-auto px-4"},d.createElement("h1",{className:"text-2xl font-bold mb-4 relative inline-block"},d.createElement("span",{className:"relative z-10"},"  "),d.createElement("span",{className:"absolute bottom-0 left-0 right-0 h-2 bg-indigo-500 opacity-30 transform -rotate-1 z-0"})),d.createElement("div",{className:"relative"},d.createElement("div",{className:"flex"},d.createElement("div",{className:"relative flex-grow"},d.createElement("input",{ref:S,type:"text",value:m,onChange:j=>{if(p(j.target.value),j.target.value.length>=3){const Q=IL(j.target.value);v(Q),b(Q.length>0)}else b(!1)},onKeyDown:j=>{j.key==="Enter"&&(j.preventDefault(),Ot(j))},onFocus:()=>{if(m.length>=3){const j=IL(m);v(j),b(j.length>0)}},onBlur:()=>{setTimeout(()=>b(!1),200)},placeholder:"    :               2 ...",className:`w-full py-3 px-4 pr-12 rounded-r-none rounded-l-md ${n?"bg-gray-700 border-gray-600 text-white":"bg-white border-indigo-200 text-black"} focus:border-indigo-500 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 shadow-sm transition-colors duration-300`}),d.createElement(xf,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-indigo-500",size:20})),d.createElement("button",{type:"button",onClick:Ot,className:`px-4 py-3 mr-2 rounded-l-md rounded-r-none flex items-center justify-center ${n?"bg-indigo-600 text-white hover:bg-indigo-700":"bg-indigo-500 text-white hover:bg-indigo-600"} transition-all duration-200 hover:scale-105 transform relative overflow-hidden group shadow-md hover:shadow-lg`},d.createElement("span",{className:"relative z-10 flex items-center gap-1"},d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},d.createElement("path",{d:"m21 21-6.05-6.05M17 10a7 7 0 1 1-14 0 7 7 0 0 1 14 0Z"})),d.createElement("span",null,"")),d.createElement("span",{className:"absolute inset-0 bg-white opacity-20 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-700"}))),N&&w&&d.createElement(EYe,{criteria:w,onClose:()=>C(!1)}),x&&d.createElement("div",{className:"relative "},d.createElement(wYe,{suggestions:y,onSelectSuggestion:j=>{p(j),b(!1);const Q=$1(j),ge={...z,profession:Q.profession||z.profession,professions:Q.profession?[...z.professions.filter(Se=>Se!==Q.profession),Q.profession]:z.professions,rating:Q.rating>0?Q.rating:z.rating,location:Q.location||z.location,radius:Q.radius||z.radius};q(ge),Q.street&&!M.includes(Q.street)&&U(Se=>[...Se,Q.street]),a(ge),E(Q),C(!0)}}))))),!t&&d.createElement("div",{className:"login-notice"},d.createElement("div",{className:"login-notice-icon"},d.createElement(Ev,{size:22})),d.createElement("div",{className:"login-notice-content"},d.createElement("div",{className:"login-notice-title"},":   "),d.createElement("div",{className:"login-notice-text"},"             .             ."),d.createElement(at,{to:"/login",className:"login-notice-button"}," ",d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"mr-1"},d.createElement("path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"}),d.createElement("polyline",{points:"10 17 15 12 10 7"}),d.createElement("line",{x1:"15",y1:"12",x2:"3",y2:"12"}))))),d.createElement("div",{className:"container mx-auto px-4 py-8"},d.createElement("div",{className:"flex flex-col md:flex-row gap-6"},d.createElement("div",{className:`md:w-1/3 ${u?"block":"hidden md:block"}`},d.createElement(pt,{className:`sticky top-4 p-4 overflow-hidden ${n?"bg-gray-800 text-gray-200":"bg-gradient-to-br from-blue-50 to-indigo-100"} shadow-lg transition-colors duration-300`},d.createElement("div",{className:"flex justify-between items-center mb-4"},d.createElement("h2",{className:`text-xl font-bold ${n?"text-indigo-300":"text-indigo-800"} relative inline-block transition-colors duration-300`},d.createElement("span",{className:"relative z-10"},""),d.createElement("span",{className:`absolute bottom-0 left-0 right-0 h-2 ${n?"bg-indigo-500":"bg-indigo-300"} opacity-40 transform -rotate-1 z-0`})),d.createElement("button",{onClick:St,className:"text-indigo-600 font-medium hover:text-indigo-800 transition-colors duration-200 text-sm"}," ")),d.createElement("form",{onSubmit:Ot,onKeyDown:j=>{j.key==="Enter"&&j.target.tagName!=="FORM"&&(j.preventDefault(),Ot(j))}},d.createElement("div",{className:"mb-4"},d.createElement("label",{className:`block ${n?"text-gray-300":"text-gray-700"} font-medium mb-2 transition-colors duration-300`},""),d.createElement("div",{className:"mb-3"},d.createElement("h3",{className:`text-sm font-medium mb-2 ${n?"text-gray-400":"text-gray-600"}`}," :"),d.createElement("div",{className:"flex flex-wrap gap-2 mb-3"},eS.map(j=>d.createElement("div",{key:j.id,onClick:()=>{D(R===j.id?null:j.id)},className:`cursor-pointer px-3 py-2 rounded-md text-sm transition-all duration-200 ${R===j.id?n?"bg-indigo-700 text-white":"bg-indigo-500 text-white":n?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`},j.name)))),R&&d.createElement("div",{className:"mt-2"},d.createElement("h3",{className:`text-sm font-medium mb-2 ${n?"text-gray-400":"text-gray-600"}`}," :"),d.createElement("div",{className:"flex flex-wrap gap-2"},(Nt=eS.find(j=>j.id===R))==null?void 0:Nt.professions.map(j=>d.createElement("div",{key:j.id,onClick:()=>le(j.name),className:`cursor-pointer px-3 py-2 rounded-md text-sm transition-all duration-200 ${I.includes(j.name)?n?"bg-indigo-700 text-white":"bg-indigo-500 text-white":n?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`},j.name)))),I.length>0&&d.createElement("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-700"},d.createElement("h3",{className:`text-sm font-medium mb-2 ${n?"text-gray-400":"text-gray-600"}`}," :"),d.createElement("div",{className:"flex flex-wrap gap-2"},I.map((j,Q)=>d.createElement("div",{key:Q,className:`flex items-center px-3 py-2 rounded-md text-sm ${n?"bg-indigo-700 text-white":"bg-indigo-500 text-white"}`},d.createElement("span",null,j),d.createElement("button",{onClick:()=>{P(I.filter(ge=>ge!==j)),q(ge=>({...ge,professions:ge.professions.filter(Se=>Se!==j)}))},className:"mr-2 text-white hover:text-red-200 focus:outline-none"},""))),d.createElement("div",{onClick:()=>Ee(),className:`cursor-pointer px-3 py-2 rounded-md text-sm transition-all duration-200 ${n?"bg-red-700 text-white hover:bg-red-800":"bg-red-500 text-white hover:bg-red-600"}`}," ")))),d.createElement("div",{className:"mb-4"},d.createElement("label",{className:`block ${n?"text-gray-300":"text-gray-700"} font-medium mb-2 transition-colors duration-300`},""),d.createElement("div",{className:"flex items-center"},d.createElement("input",{type:"range",name:"rating",min:"0",max:"5",step:"0.5",value:z.rating,onChange:dt,className:"w-full accent-indigo-500"}),d.createElement("span",{className:"mr-2 min-w-[30px]"},z.rating))),d.createElement("div",{className:"mb-4"},d.createElement("label",{className:"flex items-center"},d.createElement("input",{type:"checkbox",name:"available",checked:z.available,onChange:dt,className:"ml-2"}),d.createElement("span",null,"    "))),d.createElement("div",{className:"mb-4"},d.createElement("label",{className:`block ${n?"text-gray-300":"text-gray-700"} font-medium mb-2 transition-colors duration-300`},"  "),d.createElement("div",{className:"mb-2"},d.createElement(DK,{ref:T,initialCenter:z.location,radius:z.radius,height:"200px",onLocationSelect:Et,onRadiusChange:j=>kt(j),onStreetsChange:Tr,showRadius:!0})),d.createElement("div",{className:"flex items-center justify-between mb-2"},d.createElement("div",{className:`text-sm ${n?"text-gray-400":"text-gray-600"} transition-colors duration-300`}," :"," ",d.createElement("span",{className:"font-bold text-indigo-600"},z.radius," "))),d.createElement("input",{type:"range",min:"1",max:"5",step:"0.5",value:z.radius,onChange:kt,className:"w-full accent-indigo-500 mb-2"})),d.createElement("div",{className:"mb-4 h-[180px]"},d.createElement("div",{className:"mb-2"},d.createElement("h3",{className:`text-base font-bold ${n?"text-indigo-300":"text-indigo-800"} relative inline-block transition-colors duration-300`},d.createElement("span",{className:"relative z-10"},"   :"),d.createElement("span",{className:`absolute bottom-0 left-0 right-0 h-1 ${n?"bg-indigo-500":"bg-indigo-300"} opacity-40 transform -rotate-1 z-0`})),d.createElement("div",{className:`mt-1 text-xs ${n?"text-gray-400":"text-gray-600"} flex items-center`},"       .        .")),Qr?d.createElement("div",{className:"h-[120px] flex flex-col items-center justify-center"},d.createElement("div",{className:"w-8 h-8 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin mb-2"}),d.createElement("p",{className:`text-sm ${n?"text-gray-300":"text-gray-600"}`},"  ...")):M.length>0?d.createElement("div",{className:"h-[120px] flex flex-col"},d.createElement("div",{className:"flex-1 flex flex-wrap gap-2 overflow-y-auto p-1"},M.filter(j=>!V.includes(j)).slice(0,J?25:10).map((j,Q)=>d.createElement("div",{key:`street-${Q}`,className:`flex items-center ${n?"bg-gray-700 border-gray-600 text-gray-200":"bg-blue-50 border-blue-200"} rounded-full px-3 py-1 shadow-sm transition-colors duration-300`},d.createElement("span",{className:"mr-1"},j),d.createElement("button",{type:"button",onClick:()=>Un(j),className:"ml-2 text-red-500 hover:text-red-700 focus:outline-none transition-colors duration-200"},"")))),M.filter(j=>!V.includes(j)).length>10&&d.createElement("div",{className:"mt-2 text-center"},d.createElement("button",{type:"button",onClick:()=>G(!J),className:"text-indigo-600 hover:text-indigo-800 focus:outline-none transition-colors duration-200"},J?" ":" "))):d.createElement("div",{className:"h-[120px] flex items-center justify-center text-gray-500 italic"},"      ")),d.createElement("div",{className:"mb-4 h-[180px]"},d.createElement("div",{className:"mb-2"},d.createElement("h3",{className:`text-base font-bold ${n?"text-indigo-300":"text-indigo-800"} relative inline-block transition-colors duration-300`},d.createElement("span",{className:"relative z-10"},"    :"),d.createElement("span",{className:`absolute bottom-0 left-0 right-0 h-1 ${n?"bg-indigo-500":"bg-indigo-300"} opacity-40 transform -rotate-1 z-0`}))),Qr?d.createElement("div",{className:"h-[120px] flex flex-col items-center justify-center"},d.createElement("div",{className:"w-8 h-8 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin mb-2"}),d.createElement("p",{className:`text-sm ${n?"text-gray-300":"text-gray-600"}`},"   ...")):X.length>0?d.createElement("div",{className:"h-[120px] flex flex-col"},d.createElement("div",{className:"flex-1 flex flex-wrap gap-2 overflow-y-auto p-1"},X.filter(j=>!W.includes(j)).slice(0,ae?25:10).map((j,Q)=>d.createElement("div",{key:`hospital-${Q}`,className:`flex items-center ${n?"bg-gray-700 border-gray-600 text-gray-200":"bg-red-50 border-red-200"} rounded-full px-3 py-1 shadow-sm transition-colors duration-300`},d.createElement("span",{className:"mr-1"},j),d.createElement("button",{type:"button",onClick:()=>ps(j),className:"ml-2 text-red-500 hover:text-red-700 focus:outline-none transition-colors duration-200"},"")))),X.filter(j=>!W.includes(j)).length>10&&d.createElement("div",{className:"mt-2 text-center"},d.createElement("button",{type:"button",onClick:()=>ve(!ae),className:"text-indigo-600 hover:text-indigo-800 focus:outline-none transition-colors duration-200"},ae?" ":" "))):d.createElement("div",{className:"h-[120px] flex items-center justify-center text-gray-500 italic"},"      ")),d.createElement("div",{className:"mb-4 h-[180px]"},d.createElement("div",{className:"mb-2"},d.createElement("h3",{className:`text-base font-bold ${n?"text-indigo-300":"text-indigo-800"} relative inline-block transition-colors duration-300`},d.createElement("span",{className:"relative z-10"},"   :"),d.createElement("span",{className:`absolute bottom-0 left-0 right-0 h-1 ${n?"bg-indigo-500":"bg-indigo-300"} opacity-40 transform -rotate-1 z-0`}))),Qr?d.createElement("div",{className:"h-[120px] flex flex-col items-center justify-center"},d.createElement("div",{className:"w-8 h-8 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin mb-2"}),d.createElement("p",{className:`text-sm ${n?"text-gray-300":"text-gray-600"}`},"  ...")):Ce.length>0?d.createElement("div",{className:"h-[120px] flex flex-col"},d.createElement("div",{className:"flex-1 flex flex-wrap gap-2 overflow-y-auto p-1"},Ce.filter(j=>!Fe.includes(j)).slice(0,Ke?25:10).map((j,Q)=>d.createElement("div",{key:`mosque-${Q}`,className:`flex items-center ${n?"bg-gray-700 border-gray-600 text-gray-200":"bg-green-50 border-green-200"} rounded-full px-3 py-1 shadow-sm transition-colors duration-300`},d.createElement("span",{className:"mr-1"},j),d.createElement("button",{type:"button",onClick:()=>es(j),className:"ml-2 text-red-500 hover:text-red-700 focus:outline-none transition-colors duration-200"},"")))),Ce.filter(j=>!Fe.includes(j)).length>10&&d.createElement("div",{className:"mt-2 text-center"},d.createElement("button",{type:"button",onClick:()=>Je(!Ke),className:"text-indigo-600 hover:text-indigo-800 focus:outline-none transition-colors duration-200"},Ke?" ":" "))):d.createElement("div",{className:"h-[120px] flex items-center justify-center text-gray-500 italic"},"      ")),d.createElement(Oe,{type:"submit",variant:"primary",fullWidth:!0,onClick:j=>{Ot(j),c("list")},className:`text-white flex items-center justify-center gap-2 shadow-md hover:shadow-lg transition-all duration-200  relative overflow-hidden group py-3 px-4 ${n?"bg-gradient-to-r from-indigo-700 to-purple-800 hover:from-indigo-800 hover:to-purple-900":"bg-gradient-to-r from-blue-500 to-indigo-500 hover:from-blue-600 hover:to-indigo-600"}`},d.createElement("span",{className:"relative z-10 flex items-center justify-center gap-2"},d.createElement(k4,{size:18,className:"ml-1"}),"   "),d.createElement("span",{className:"absolute inset-0 bg-white opacity-20 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-700"}))))),d.createElement("div",{className:"md:w-2/3"},d.createElement("div",{className:"flex justify-between items-center mb-4"},d.createElement("div",{className:"flex items-center"},d.createElement("button",{onClick:()=>h(!u),className:"md:hidden flex items-center text-gray-700 ml-4"},d.createElement(k4,{size:20,className:"ml-1"}),d.createElement("span",null,"")),d.createElement("span",{className:"text-gray-600"},Qe.length," ")),d.createElement("div",{className:"flex items-center"},d.createElement("button",{onClick:()=>c("list"),className:`p-2 rounded-l-md ${l==="list"?"bg-gradient-to-r from-blue-500 to-indigo-500 text-white shadow-sm":"bg-gray-200 text-gray-700"} transition-all duration-200`},d.createElement(toe,{size:20})),d.createElement("button",{onClick:()=>c("map"),className:`p-2 rounded-r-md ${l==="map"?"bg-gradient-to-r from-blue-500 to-indigo-500 text-white shadow-sm":"bg-gray-200 text-gray-700"} transition-all duration-200`},d.createElement(aoe,{size:20})))),l==="list"?d.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},Qe.length>0?Qe.map(j=>d.createElement(At.div,{key:j.id,whileHover:{y:-5},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3}},d.createElement(pt,{className:`overflow-hidden hover:shadow-lg transition-all duration-300 ${n?"bg-gray-800 text-gray-200":"bg-gradient-to-br from-blue-50 to-indigo-100"} shadow-md`},d.createElement("div",{className:"flex"},d.createElement("div",{className:"w-1/3 relative"},d.createElement("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent opacity-30"}),d.createElement("img",{src:j.image,alt:j.name,className:"w-full h-full object-cover"}),d.createElement("div",{className:"absolute top-2 right-2"},d.createElement("span",{className:`px-2 py-1 rounded-full text-xs font-medium shadow-sm ${j.available?"bg-green-500 text-white":"bg-red-500 text-white"}`},j.available?"":" "))),d.createElement("div",{className:"w-2/3 p-4 flex flex-col rounded-r-lg"},d.createElement("div",{className:"flex-1"},d.createElement("h3",{className:`font-bold text-lg ${n?"text-indigo-300":"text-indigo-800"} mb-1 transition-colors duration-300`},j.name),d.createElement("div",{className:`${n?"text-gray-400":"text-gray-600"} mb-3 transition-colors duration-300`},j.professions&&j.specializations?d.createElement("div",{className:"space-y-1"},j.professions.map((Q,ge)=>{const Se=[],Be=[{id:1,name:"",specializations:[" "," ","  "]},{id:2,name:"",specializations:[" "," "," "]},{id:3,name:"",specializations:[" "," "," "]},{id:4,name:"",specializations:[" "," "," "]},{id:5,name:" ",specializations:[" "," "," "]},{id:6,name:"",specializations:[" "," "," "]},{id:7,name:"",specializations:[" "," "," "]},{id:8,name:"",specializations:[" ",""," "]}].find(Tt=>Tt.name===Q);return Be&&j.specializations.forEach(Tt=>{Be.specializations.includes(Tt)&&Se.push(Tt)}),d.createElement("div",{key:ge,className:"flex items-center"},d.createElement("span",{className:"inline-block w-2 h-2 rounded-full bg-indigo-500 ml-2"}),d.createElement("div",{className:"flex flex-col"},d.createElement("div",{className:`font-medium ${n?"text-indigo-300":"text-indigo-700"}`},Q),d.createElement("div",{className:"mr-4 text-xs"},Se.length>0?Se.join(", "):" ")))})):j.profession?d.createElement("div",{className:"flex items-center"},d.createElement("span",{className:"inline-block w-2 h-2 rounded-full bg-indigo-500 ml-2"}),d.createElement("div",{className:"flex flex-col"},d.createElement("div",{className:`font-medium ${n?"text-indigo-300":"text-indigo-700"}`},j.profession),j.specialization&&d.createElement("div",{className:"mr-4 text-xs"},j.specialization))):null),d.createElement("div",{className:`flex items-center mb-3 ${n?"bg-gray-700 border-gray-600":"bg-white border-indigo-200"} p-2 rounded-md shadow-sm transition-colors duration-300`},d.createElement("div",{className:"flex items-center"},d.createElement(Yn,{size:18,className:`${n?"text-yellow-400 fill-yellow-400":"text-yellow-500 fill-yellow-500"} transition-colors duration-300`}),d.createElement("span",{className:"mr-1 font-bold"},j.rating)),d.createElement("span",{className:"mx-2 text-gray-300"},"|"),d.createElement("div",{className:`flex items-center ${n?"text-gray-400":"text-gray-500"} transition-colors duration-300`},d.createElement(Ux,{size:16}),d.createElement("span",{className:"mr-1"}," : ",j.workRadius," ")))),d.createElement("div",{className:"mt-auto"},d.createElement(at,{to:`/profile/craftsman/${j.id}`,className:"block w-full"},d.createElement(Oe,{variant:"primary",className:`text-sm w-full text-white flex items-center justify-center gap-2 shadow-md hover:shadow-lg transition-all duration-200  relative overflow-hidden group py-2 px-4 ${n?"bg-gradient-to-r from-indigo-700 to-purple-800 hover:from-indigo-800 hover:to-purple-900":"bg-gradient-to-r from-blue-500 to-indigo-500 hover:from-blue-600 hover:to-indigo-600"}`},d.createElement("span",{className:"relative z-10 flex items-center justify-center gap-2"},d.createElement("span",null," "),d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},d.createElement("path",{d:"M5 12h14"}),d.createElement("path",{d:"m12 5 7 7-7 7"}))),d.createElement("span",{className:"absolute inset-0 bg-white opacity-20 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-700"}))))))))):d.createElement("div",{className:"col-span-2"},d.createElement(pt,{className:`p-6 text-center ${n?"bg-gray-800 text-gray-200":"bg-gradient-to-br from-blue-50 to-indigo-100"} shadow-md transition-colors duration-300`},d.createElement("p",{className:`${n?"text-gray-400":"text-gray-600"} mb-4 transition-colors duration-300`},"    "),d.createElement(Oe,{variant:"secondary",onClick:St,className:`text-white flex items-center justify-center gap-2 shadow-md hover:shadow-lg transition-all duration-200  relative overflow-hidden group py-2 px-4 ${n?"bg-gradient-to-r from-indigo-700 to-purple-800 hover:from-indigo-800 hover:to-purple-900":"bg-gradient-to-r from-blue-500 to-indigo-500 hover:from-blue-600 hover:to-indigo-600"}`},d.createElement("span",{className:"relative z-10 flex items-center justify-center gap-2"},"  "),d.createElement("span",{className:"absolute inset-0 bg-white opacity-20 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-700"}))))):d.createElement("div",{className:"flex flex-col gap-4"},d.createElement("div",{className:"flex flex-col gap-2"},d.createElement(xYe,{professions:kYe.map(j=>j.name),selectedProfessions:I,onProfessionChange:be,selectedRating:B,onRatingChange:Ne,searchRadius:z.radius,onRadiusChange:j=>{console.log("      :",j),kt(j)}})),d.createElement(pt,{className:`overflow-hidden ${n?"bg-gray-800 text-gray-200":"bg-gradient-to-br from-blue-50 to-indigo-100"} shadow-md transition-colors duration-300`},d.createElement("div",{className:"h-[600px]"},d.createElement(vYe,{craftsmen:i,selectedProfessions:I,selectedRating:B,userLocation:z.location?{latitude:z.location.lat,longitude:z.location.lng}:null,searchRadius:z.radius*1e3,onCraftsmanSelect:(j,Q=!1)=>{Q&&(window.location.href=`/profile/craftsman/${j.id}`)}})))))))))},CYe=({darkMode:t})=>d.createElement("div",{className:"flex flex-col items-center justify-center h-64"},d.createElement("div",{className:`animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 ${t?"border-indigo-400":"border-indigo-500"}`}),d.createElement("p",{className:`mt-4 text-lg ${t?"text-indigo-300":"text-indigo-700"}`},"   ...")),_Ye=({error:t,darkMode:e})=>{const n=Lr();return d.createElement("div",{className:"container mx-auto px-4 py-8"},d.createElement("div",{className:`p-4 rounded-md ${e?"bg-red-900/30":"bg-red-100"} ${e?"text-red-200":"text-red-700"} text-center transition-colors duration-300`},d.createElement("h2",{className:"text-xl font-bold mb-2"},""),d.createElement("p",null,t||"    "),d.createElement(Oe,{onClick:()=>n(-1),className:"mt-4",variant:"secondary"},"")))},SYe=({craftsman:t,darkMode:e,onBookingClick:n})=>{const r=localStorage.getItem("token")!==null;return d.createElement(pt,{className:`overflow-hidden ${e?"bg-gray-800 text-gray-200":"bg-gradient-to-br from-blue-50 to-indigo-100"} transition-colors duration-300`},d.createElement("div",{className:"h-96 overflow-hidden"},d.createElement(Ud,{src:t.image||"/img/user-avatar.svg",alt:t.name||"",className:"w-full h-full object-cover",placeholderClassName:"w-full h-full bg-gray-200 animate-pulse",onError:()=>{console.log("Error in CraftsmanInfo image:",t.image)}})),d.createElement("div",{className:"p-4"},d.createElement("h1",{className:`text-2xl font-bold mb-1 ${e?"text-indigo-300":"text-indigo-800"} transition-colors duration-300`},t.name),d.createElement("div",{className:`${e?"text-indigo-400":"text-indigo-600"} mb-4 transition-colors duration-300`},t.professions&&t.professions.length>0?d.createElement("div",{className:"space-y-2"},t.professions.map((s,i)=>{let o=[];return t.specializations&&t.specializations.length>0&&(o=t.specializations),d.createElement("div",{key:i,className:"flex flex-col"},d.createElement("div",{className:`font-medium ${e?"text-indigo-300":"text-indigo-700"}`},s),d.createElement("div",{className:"mr-4 text-sm"},o.length>0?o.join(", "):"  "))})):t.profession?d.createElement("div",{className:"flex flex-col"},d.createElement("div",{className:`font-medium ${e?"text-indigo-300":"text-indigo-700"}`},t.profession),t.specialization&&d.createElement("div",{className:"mr-4 text-sm"},t.specialization)):d.createElement("div",{className:"text-sm text-gray-500"},"   ")),d.createElement("div",{className:"flex items-center mb-4"},d.createElement(Yn,{size:20,className:"text-indigo-500 fill-indigo-500"}),d.createElement("span",{className:"mr-1 text-lg"},t.rating),d.createElement("span",{className:`mr-2 ${e?"text-indigo-400":"text-indigo-500"} transition-colors duration-300`},"(12 )")),d.createElement("div",{className:"flex items-center mb-4"},d.createElement(Ux,{size:20,className:`${e?"text-indigo-400":"text-indigo-500"} transition-colors duration-300`}),d.createElement("span",{className:`mr-1 ${e?"text-indigo-300":"text-indigo-700"} transition-colors duration-300`}," : ",t.workRadius," ")),d.createElement("div",{className:"flex items-center mb-4"},d.createElement("span",{className:`px-3 py-1 rounded-full text-sm ${t.available?"bg-indigo-200 text-green-80":"bg-red-100 text-red-800"}`},t.available?" ":"  ")),d.createElement("div",{className:"flex flex-col space-y-2"},r?d.createElement(Oe,{variant:"primary",className:`text-white flex items-center justify-center gap-2 shadow-md hover:shadow-lg transition-all duration-200 relative overflow-hidden group py-2 px-4 ${e?"bg-gradient-to-r from-indigo-700 to-purple-800 hover:from-indigo-800 hover:to-purple-900":"bg-gradient-to-r from-blue-500 to-indigo-500 hover:from-blue-600 hover:to-indigo-600"}`,onClick:()=>t.phone?window.open(`tel:${t.phone}`):alert("   ")},d.createElement("span",{className:"relative z-10 flex items-center"},d.createElement(vf,{size:18,className:"ml-2"})," "),d.createElement("span",{className:"absolute inset-0 bg-white opacity-20 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-700"})):d.createElement(at,{to:"/login",className:"w-full"},d.createElement(Oe,{variant:"primary",className:`text-white flex items-center justify-center gap-2 shadow-md hover:shadow-lg transition-all duration-200 relative overflow-hidden group py-2 px-4 w-full ${e?"bg-gradient-to-r from-indigo-700 to-purple-800 hover:from-indigo-800 hover:to-purple-900":"bg-gradient-to-r from-blue-500 to-indigo-500 hover:from-blue-600 hover:to-indigo-600"}`},d.createElement("span",{className:"relative z-10 flex items-center"},d.createElement(vf,{size:18,className:"ml-2"}),"  "),d.createElement("span",{className:"absolute inset-0 bg-white opacity-20 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-700"}))),r?d.createElement(Oe,{variant:"primary",className:`text-white flex items-center justify-center gap-2 shadow-md hover:shadow-lg transition-all duration-200 relative overflow-hidden group py-2 px-4 ${e?"bg-gradient-to-r from-indigo-700 to-purple-800 hover:from-indigo-800 hover:to-purple-900":"bg-gradient-to-r from-blue-500 to-indigo-500 hover:from-blue-600 hover:to-indigo-600"}`,onClick:n,disabled:!t.available},d.createElement("span",{className:"relative z-10 flex items-center"},d.createElement(Pa,{size:18,className:"ml-2"})," "),d.createElement("span",{className:"absolute inset-0 bg-white opacity-20 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-700"})):d.createElement("div",{className:"w-full"},d.createElement(at,{to:"/login",className:"w-full"},d.createElement(Oe,{variant:"primary",className:`text-white flex items-center justify-center gap-2 shadow-md hover:shadow-lg transition-all duration-200 relative overflow-hidden group py-2 px-4 w-full ${e?"bg-gradient-to-r from-indigo-700 to-purple-800 hover:from-indigo-800 hover:to-purple-900":"bg-gradient-to-r from-blue-500 to-indigo-500 hover:from-blue-600 hover:to-indigo-600"}`},d.createElement("span",{className:"relative z-10 flex items-center"},d.createElement(Pa,{size:18,className:"ml-2"}),"  "),d.createElement("span",{className:"absolute inset-0 bg-white opacity-20 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-700"}))),d.createElement("div",{className:`flex items-center mt-2 text-sm ${e?"text-yellow-300":"text-yellow-600"}`},d.createElement(Lie,{size:16,className:"ml-1"}),d.createElement("span",null,"      "))))))},TYe=({craftsman:t,darkMode:e})=>{const n=localStorage.getItem("token")!==null;return d.createElement(pt,{className:`mt-4 p-4 ${e?"bg-gray-800 text-gray-200":"bg-gradient-to-br from-blue-50 to-indigo-100"} shadow-md transition-colors duration-300`},d.createElement("h2",{className:`text-xl font-bold mb-4 ${e?"text-indigo-300":"text-indigo-800"} relative inline-block transition-colors duration-300`},d.createElement("span",{className:"relative z-10"}," "),d.createElement("span",{className:`absolute bottom-0 left-0 right-0 h-2 ${e?"bg-indigo-500":"bg-indigo-300"} opacity-40 transform -rotate-1 z-0`})),d.createElement("div",{className:"space-y-2"},d.createElement("div",{className:"flex items-center"},d.createElement(vf,{size:18,className:`${e?"text-indigo-400":"text-indigo-500"} ml-2 transition-colors duration-300`}),n?d.createElement("span",null,t.phone||"   "):d.createElement("div",{className:"flex items-center"},d.createElement("span",{className:`${e?"text-yellow-300":"text-yellow-600"} text-sm`},d.createElement(at,{to:"/login",className:"underline hover:text-indigo-500 transition-colors duration-200"}," ")," ","  "))),t.email&&d.createElement("div",{className:"flex items-center"},d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-5 w-5 ${e?"text-indigo-400":"text-indigo-500"} ml-2 transition-colors duration-300`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},d.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})),n?d.createElement("span",null,t.email):d.createElement("span",{className:`${e?"text-yellow-300":"text-yellow-600"} text-sm`},d.createElement(at,{to:"/login",className:"underline hover:text-indigo-500 transition-colors duration-200"}," ")," ","  "))))},$Ye=({craftsman:t,darkMode:e})=>d.createElement(pt,{className:`p-6 mb-6 ${e?"bg-gray-800 text-gray-200":"bg-gradient-to-br from-blue-50 to-indigo-100"} shadow-md transition-colors duration-300`},d.createElement("h2",{className:`text-xl font-bold mb-4 ${e?"text-indigo-300":"text-indigo-800"} relative inline-block transition-colors duration-300`},d.createElement("span",{className:"relative z-10"},"  "),d.createElement("span",{className:`absolute bottom-0 left-0 right-0 h-2 ${e?"bg-indigo-500":"bg-indigo-300"} opacity-40 transform -rotate-1 z-0`})),d.createElement("p",{className:`${e?"text-gray-300":"text-indigo-700"} leading-relaxed transition-colors duration-300`},t.bio||" 15       .          .       .")),IYe=({craftsman:t,darkMode:e})=>d.createElement(pt,{className:`p-6 mb-6 ${e?"bg-gray-800 text-gray-200":"bg-gradient-to-br from-blue-50 to-indigo-100"} shadow-md transition-colors duration-300`},d.createElement("h2",{className:`text-xl font-bold mb-4 ${e?"text-indigo-300":"text-indigo-800"} relative inline-block transition-colors duration-300`},d.createElement("span",{className:"relative z-10"}," "),d.createElement("span",{className:`absolute bottom-0 left-0 right-0 h-2 ${e?"bg-indigo-500":"bg-indigo-300"} opacity-40 transform -rotate-1 z-0`})),t.gallery&&t.gallery.length>0?d.createElement("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4"},t.gallery.map((n,r)=>d.createElement(At.div,{key:r,whileHover:{scale:1.05},className:"h-40 rounded-lg overflow-hidden"},d.createElement(Ud,{src:n,alt:` ${r+1}`,className:"w-full h-full object-cover",placeholderClassName:"w-full h-full bg-gray-200 animate-pulse"})))):d.createElement("p",{className:`text-center p-3 rounded-md border ${e?"text-indigo-400 bg-gray-700 border-gray-600":"text-indigo-500 bg-indigo-50 border-indigo-100"} transition-colors duration-300`},"    "));let AYe=si.icon({iconUrl:RK,shadowUrl:PK,iconSize:[25,41],iconAnchor:[12,41]});si.Marker.prototype.options.icon=AYe;function RYe({isEditing:t,location:e,setLocation:n}){return IK({click(r){if(t&&n){const{lat:s,lng:i}=r.latlng;n({lat:s,lng:i})}}}),null}function PYe({location:t}){const e=uu();return A.useEffect(()=>{t&&e&&e.setView([t.lat,t.lng],e.getZoom())},[t,e]),null}const DYe=({location:t={lat:33.5138,lng:36.2765},setLocation:e,radius:n=1,setRadius:r,height:s="400px",isEditing:i=!1,showRadius:o=!0,streetsInWorkRange:a=[],hospitalsInWorkRange:l=[],mosquesInWorkRange:c=[]})=>{const u=We(R=>R.darkMode),[h,m]=A.useState(a||[]),[p,y]=A.useState(l||[]),[v,x]=A.useState(c||[]),[b,w]=A.useState(!1),[E,N]=A.useState(!1),[C,S]=A.useState(!1),[T,I]=A.useState(!1);A.useEffect(()=>{if(!t)return;if(a.length>0||l.length>0||c.length>0){m(a),y(l),x(c);return}(async()=>{try{i||I(!0),console.log("  :",t);const D=await OK(t.lat,t.lng,n);m(D.streets||[]),y(D.hospitals||[]),x(D.mosques||[]),i||I(!1)}catch(D){console.error("Error fetching places data:",D),i||I(!1)}})()},[t,n,a,l,c,i]);const P=R=>{const D=parseFloat(R.target.value);r&&r(D)};return d.createElement("div",{className:"space-y-4"},d.createElement("div",{className:"space-y-2"},i&&d.createElement("div",{className:`p-3 rounded-md border mb-2 ${u?"bg-gray-800 border-gray-700":"bg-blue-50 border-blue-200"} transition-colors duration-300`},d.createElement("p",{className:`font-medium flex items-center justify-center ${u?"text-indigo-300":"text-indigo-700"} transition-colors duration-300`},"    ",d.createElement("span",{className:`inline-block animate-pulse p-1 rounded-full mr-2 ${u?"bg-indigo-900":"bg-blue-200"} transition-colors duration-300`},d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-5 w-5 ${u?"text-indigo-400":"text-blue-700"} transition-colors duration-300`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},d.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))))),d.createElement("div",{style:{height:s},className:`rounded-lg overflow-hidden shadow-md border ${u?"border-gray-700":"border-indigo-200"} transition-colors duration-300`},d.createElement(SA,{center:[t.lat,t.lng],zoom:13,scrollWheelZoom:i,style:{height:"100%",width:"100%"},attributionControl:!0,zoomControl:!0},d.createElement(TA,{attribution:' <a href="https://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),d.createElement(RYe,{isEditing:i,location:t,setLocation:e}),d.createElement(PYe,{location:t}),d.createElement(gx,{position:[t.lat,t.lng]}),o&&d.createElement(AK,{center:[t.lat,t.lng],radius:n*1e3,pathOptions:{color:"#6366F1",fillColor:"#6366F1",fillOpacity:.2}})))),i&&d.createElement("div",{className:`p-4 rounded-md shadow-sm border mb-4 ${u?"bg-gray-800 border-gray-700":"bg-gradient-to-r from-blue-50 to-indigo-100 border-indigo-200"} transition-colors duration-300`},d.createElement("div",{className:"flex items-center"},d.createElement("div",{className:"flex-1"},d.createElement("label",{className:`block text-base font-medium mb-1 ${u?"text-indigo-300":"text-indigo-700"} transition-colors duration-300`}," :"," ",d.createElement("span",{className:`text-xl font-bold ${u?"text-indigo-400":"text-indigo-500"} transition-colors duration-300`},n," ")),d.createElement("div",{className:"relative pt-1"},d.createElement("input",{type:"range",min:"1",max:"5",step:"0.5",value:n,onChange:P,className:`w-full h-2 rounded-lg appearance-none cursor-pointer accent-indigo-500 ${u?"bg-indigo-900":"bg-indigo-200"} transition-colors duration-300`}),d.createElement("div",{className:`flex justify-between text-xs px-1 pt-2 ${u?"text-indigo-400":"text-indigo-600"} transition-colors duration-300`},d.createElement("span",null,"1 "),d.createElement("span",null,"2 "),d.createElement("span",null,"3 "),d.createElement("span",null,"4 "),d.createElement("span",null,"5 ")))))),d.createElement("div",{className:`p-4 rounded-md shadow-sm border ${u?"bg-gray-800 border-gray-700":"bg-gradient-to-r from-blue-50 to-indigo-100 border-indigo-200"} transition-colors duration-300`},d.createElement("div",{className:"flex justify-between items-center mb-2"},d.createElement("h4",{className:`font-medium pr-2 border-r-4 ${u?"text-indigo-300 border-indigo-600":"text-indigo-700 border-indigo-400"} transition-colors duration-300`},"   :"),T&&!i&&d.createElement("div",{className:"flex items-center"},d.createElement("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-indigo-500 mr-2"}),d.createElement("span",{className:"text-xs text-indigo-500"}," ..."))),d.createElement("div",{className:"flex flex-wrap gap-2 max-h-40 overflow-y-auto p-1"},!T&&h.length>0?h.slice(0,b?25:10).map((R,D)=>d.createElement("div",{key:`street-${D}`,className:`flex items-center rounded-full px-3 py-1 shadow-sm hover:shadow-md transition-all duration-200 ${u?"bg-gray-700/80 border-gray-600 text-gray-200":"bg-indigo-50/80 border border-indigo-100"}`},d.createElement("span",{className:"mr-1"},R))):T?null:d.createElement("div",{className:`w-full text-center py-2 ${u?"text-gray-400":"text-gray-500"}`},"     .")),!T&&h.length>10&&d.createElement("button",{type:"button",onClick:()=>w(!b),className:`mt-2 focus:outline-none transition-colors duration-200 border-b ${u?"text-indigo-400 hover:text-indigo-300 border-gray-700 hover:border-indigo-400":"text-indigo-500 hover:text-indigo-700 border-indigo-200 hover:border-indigo-500"}`},b?" ":" ")),d.createElement("div",{className:`p-4 rounded-md shadow-sm border mt-4 ${u?"bg-gray-800 border-gray-700":"bg-gradient-to-r from-blue-50 to-indigo-100 border-indigo-200"} transition-colors duration-300`},d.createElement("div",{className:"flex justify-between items-center mb-2"},d.createElement("h4",{className:`font-medium pr-2 border-r-4 ${u?"text-indigo-300 border-indigo-600":"text-indigo-700 border-indigo-400"} transition-colors duration-300`},"   :"),T&&!i&&d.createElement("div",{className:"flex items-center"},d.createElement("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-indigo-500 mr-2"}),d.createElement("span",{className:"text-xs text-indigo-500"}," ..."))),d.createElement("div",{className:"flex flex-wrap gap-2 max-h-40 overflow-y-auto p-1"},!T&&v.length>0?v.slice(0,C?25:5).map((R,D)=>d.createElement("div",{key:`mosque-${D}`,className:`flex items-center rounded-full px-3 py-1 shadow-sm hover:shadow-md transition-all duration-200 ${u?"bg-gray-700/80 border-gray-600 text-gray-200":"bg-green-50/80 border border-green-100"}`},d.createElement("span",{className:"mr-1"},R))):T?null:d.createElement("div",{className:`w-full text-center py-2 ${u?"text-gray-400":"text-gray-500"}`},"     .")),!T&&v.length>5&&d.createElement("button",{type:"button",onClick:()=>S(!C),className:`mt-2 focus:outline-none transition-colors duration-200 border-b ${u?"text-indigo-400 hover:text-indigo-300 border-gray-700 hover:border-indigo-400":"text-indigo-500 hover:text-indigo-700 border-indigo-200 hover:border-indigo-500"}`},C?" ":" ")),d.createElement("div",{className:`p-4 rounded-md shadow-sm border mt-4 ${u?"bg-gray-800 border-gray-700":"bg-gradient-to-r from-blue-50 to-indigo-100 border-indigo-200"} transition-colors duration-300`},d.createElement("div",{className:"flex justify-between items-center mb-2"},d.createElement("h4",{className:`font-medium pr-2 border-r-4 ${u?"text-indigo-300 border-indigo-600":"text-indigo-700 border-indigo-400"} transition-colors duration-300`},"     :"),T&&!i&&d.createElement("div",{className:"flex items-center"},d.createElement("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-indigo-500 mr-2"}),d.createElement("span",{className:"text-xs text-indigo-500"}," ..."))),d.createElement("div",{className:"flex flex-wrap gap-2 max-h-40 overflow-y-auto p-1"},!T&&p.length>0?p.slice(0,E?25:5).map((R,D)=>d.createElement("div",{key:`hospital-${D}`,className:`flex items-center rounded-full px-3 py-1 shadow-sm hover:shadow-md transition-all duration-200 ${u?"bg-gray-700/80 border-gray-600 text-gray-200":"bg-red-50/80 border border-red-100"}`},d.createElement("span",{className:"mr-1"},R))):T?null:d.createElement("div",{className:`w-full text-center py-2 ${u?"text-gray-400":"text-gray-500"}`},"     .")),!T&&p.length>5&&d.createElement("button",{type:"button",onClick:()=>N(!E),className:`mt-2 focus:outline-none transition-colors duration-200 border-b ${u?"text-indigo-400 hover:text-indigo-300 border-gray-700 hover:border-indigo-400":"text-indigo-500 hover:text-indigo-700 border-indigo-200 hover:border-indigo-500"}`},E?" ":" ")))},MK=({location:t,workRadius:e,isEditing:n,onLocationChange:r,onRadiusChange:s,streetsInWorkRange:i=[],hospitalsInWorkRange:o=[],mosquesInWorkRange:a=[],neighborhoodsInWorkRange:l=[]})=>{const c=We(u=>u.darkMode);return d.createElement(pt,{className:`p-6 mb-6 ${c?"bg-gray-800 text-gray-200 border-gray-700":"bg-gradient-to-br from-blue-50 to-indigo-100 border-indigo-200"} shadow-md border transition-colors duration-300`},d.createElement("h2",{className:`text-xl font-bold mb-4 ${c?"text-indigo-300":"text-indigo-800"} relative inline-block transition-colors duration-300`},d.createElement("span",{className:"relative z-10"},"  "),d.createElement("span",{className:`absolute bottom-0 left-0 right-0 h-2 ${c?"bg-indigo-500":"bg-indigo-300"} opacity-40 transform -rotate-1 z-0`})),n?d.createElement(DYe,{location:t,setLocation:r,radius:e,setRadius:s,height:"300px",isEditing:!0,showRadius:!0,streetsInWorkRange:i,hospitalsInWorkRange:o,mosquesInWorkRange:a,neighborhoodsInWorkRange:l}):d.createElement("div",{className:`mt-4 ${c?"text-gray-300":"text-gray-700"}`},d.createElement("div",{className:"flex items-center mb-3"},d.createElement("div",{className:`flex items-center ${c?"text-indigo-300":"text-indigo-600"}`},d.createElement("span",{className:"ml-2 font-bold"}," :"),d.createElement("span",null,e," "))),i&&i.length>0&&d.createElement("div",{className:"mb-3"},d.createElement("h3",{className:`text-base font-bold mb-2 ${c?"text-indigo-300":"text-indigo-700"}`},"   :"),d.createElement("div",{className:"flex flex-wrap gap-2 max-h-40 overflow-y-auto p-1"},i.slice(0,20).map((u,h)=>d.createElement("span",{key:h,className:`px-3 py-1 rounded-full text-sm ${c?"bg-gray-700 text-gray-200":"bg-white text-gray-800 border border-indigo-200"}`},u)),i.length>20&&d.createElement("span",{className:`text-sm ${c?"text-indigo-300":"text-indigo-600"}`},"+",i.length-20,"  "))),o&&o.length>0&&d.createElement("div",{className:"mb-3"},d.createElement("h3",{className:`text-base font-bold mb-2 ${c?"text-indigo-300":"text-indigo-700"}`},"    :"),d.createElement("div",{className:"flex flex-wrap gap-2 max-h-40 overflow-y-auto p-1"},o.slice(0,20).map((u,h)=>d.createElement("span",{key:h,className:`px-3 py-1 rounded-full text-sm ${c?"bg-gray-700 text-gray-200":"bg-red-50 text-gray-800 border border-red-200"}`},u)),o.length>20&&d.createElement("span",{className:`text-sm ${c?"text-indigo-300":"text-indigo-600"}`},"+",o.length-20,"  "))),a&&a.length>0&&d.createElement("div",null,d.createElement("h3",{className:`text-base font-bold mb-2 ${c?"text-indigo-300":"text-indigo-700"}`},"   :"),d.createElement("div",{className:"flex flex-wrap gap-2 max-h-40 overflow-y-auto p-1"},a.slice(0,20).map((u,h)=>d.createElement("span",{key:h,className:`px-3 py-1 rounded-full text-sm ${c?"bg-gray-700 text-gray-200":"bg-green-50 text-gray-800 border border-green-200"}`},u)),a.length>20&&d.createElement("span",{className:`text-sm ${c?"text-indigo-300":"text-indigo-600"}`},"+",a.length-20,"  "))),i.length===0&&o.length===0&&a.length===0&&d.createElement("div",{className:"text-center py-4"},d.createElement("p",{className:`${c?"text-gray-400":"text-gray-500"}`},"        "))))},OYe=({craftsman:t,darkMode:e})=>d.createElement(pt,{className:`p-6 mb-6 ${e?"bg-gray-800 text-gray-200":"bg-gradient-to-br from-blue-50 to-indigo-100"} shadow-md transition-colors duration-300`},d.createElement("h2",{className:`text-xl font-bold mb-4 ${e?"text-indigo-300":"text-indigo-800"} relative inline-block transition-colors duration-300`},d.createElement("span",{className:"relative z-10"},""),d.createElement("span",{className:`absolute bottom-0 left-0 right-0 h-2 ${e?"bg-indigo-500":"bg-indigo-300"} opacity-40 transform -rotate-1 z-0`})),d.createElement("div",{className:"space-y-4"},t.professions&&t.professions.map((n,r)=>{const s=[],o=[{id:1,name:"",specializations:[" "," "," "]},{id:2,name:"",specializations:[" "," ","  "]},{id:3,name:"",specializations:[" "," "," "]},{id:4,name:"",specializations:[" "," "," "]},{id:5,name:" ",specializations:[" "," "," "]},{id:6,name:"",specializations:[" "," "," "]},{id:7,name:"",specializations:[" "," "," "]},{id:8,name:"",specializations:[" ",""," "]}].find(a=>a.name===n);return o&&t.specializations.forEach(a=>{o.specializations.includes(a)&&s.push(a)}),d.createElement("div",{key:r,className:"flex flex-col"},d.createElement("div",{className:`font-medium ${e?"text-indigo-300":"text-indigo-700"}`},n),d.createElement("div",{className:"mr-4 text-sm"},s.length>0?s.join(", "):" "))}))),LYe=({reviews:t,darkMode:e})=>{const[n,r]=A.useState([]),[s,i]=A.useState(!1),o=s?t:t.slice(0,3),a=u=>{n.includes(u)?r(n.filter(h=>h!==u)):r([...n,u])},l=u=>new Date(u).toLocaleDateString("ar-SY"),c=({rating:u})=>d.createElement("div",{className:"flex"},[1,2,3,4,5].map(h=>d.createElement(Yn,{key:h,size:16,className:`${h<=u?`${e?"text-yellow-400 fill-yellow-400":"text-yellow-500 fill-yellow-500"}`:`${e?"text-gray-600":"text-gray-300"}`}`})));return d.createElement("div",{className:"space-y-4"},o.map(u=>{const h=n.includes(u.id);return d.createElement("div",{key:u.id,className:`border-b ${e?"border-gray-700":""} pb-4`},d.createElement("div",{className:"flex items-start"},d.createElement("div",{className:"w-10 h-10 rounded-full ml-3 bg-indigo-200 flex items-center justify-center"},d.createElement(Xf,{size:20,className:"text-indigo-700"})),d.createElement("div",{className:"flex-1"},d.createElement("div",{className:"flex items-center mb-1"},d.createElement("h4",{className:`font-bold ml-2 ${e?"text-gray-200":""}`},""),d.createElement("div",{className:"flex items-center"},d.createElement(c,{rating:u.overallRating}),d.createElement("span",{className:"mr-2 text-sm"},u.overallRating,"/5"))),d.createElement("div",{className:"flex items-center text-sm mb-2"},d.createElement(Pa,{size:14,className:"ml-1"}),d.createElement("span",{className:`${e?"text-gray-400":"text-gray-500"}`},l(u.createdAt))),d.createElement("p",{className:`${e?"text-gray-300":"text-gray-700"} mb-2`},u.comment),h&&d.createElement("div",{className:`mt-3 p-3 rounded-md ${e?"bg-gray-700":"bg-white/80"}`},d.createElement("div",{className:"grid grid-cols-2 gap-2 text-sm"},d.createElement("div",{className:"flex items-center"},d.createElement("span",{className:`ml-2 ${e?"text-gray-400":"text-gray-600"}`}," :"),d.createElement(c,{rating:u.qualityRating})),d.createElement("div",{className:"flex items-center"},d.createElement("span",{className:`ml-2 ${e?"text-gray-400":"text-gray-600"}`}," :"),d.createElement(c,{rating:u.punctualityRating})),d.createElement("div",{className:"flex items-center"},d.createElement("span",{className:`ml-2 ${e?"text-gray-400":"text-gray-600"}`},"  :"),d.createElement(c,{rating:u.priceRating})),d.createElement("div",{className:"flex items-center"},d.createElement("span",{className:`ml-2 ${e?"text-gray-400":"text-gray-600"}`},":"),d.createElement(c,{rating:u.communicationRating})))),u.images&&u.images.length>0&&d.createElement("div",{className:"mt-3 grid grid-cols-3 gap-2"},u.images.map((m,p)=>d.createElement("div",{key:p,className:"h-20 rounded-md overflow-hidden"},d.createElement("img",{src:m,alt:`  ${p+1}`,className:"w-full h-full object-cover"})))),d.createElement("button",{onClick:()=>a(u.id),className:`mt-2 text-sm flex items-center ${e?"text-indigo-400":"text-indigo-600"} hover:underline`},h?d.createElement(d.Fragment,null,d.createElement(NC,{size:16,className:"ml-1"})," "):d.createElement(d.Fragment,null,d.createElement(fg,{size:16,className:"ml-1"})," ")))))}),t.length>3&&d.createElement("div",{className:"text-center mt-4"},d.createElement(Oe,{variant:"secondary",onClick:()=>i(!s),className:"text-sm"},s?d.createElement(d.Fragment,null,d.createElement(NC,{size:16,className:"ml-1"})," "):d.createElement(d.Fragment,null,d.createElement(fg,{size:16,className:"ml-1"}),"    (",t.length-3,")"))))},MYe=({craftsmanId:t})=>{const e=We(l=>l.darkMode),n=My(l=>l.reviews),[r,s]=A.useState([]),[i,o]=A.useState({quality:0,punctuality:0,price:0,communication:0,overall:0});A.useEffect(()=>{const l=Number(t),c=n.filter(u=>u.craftsmanId===l);if(s(c),c.length>0){const u=c.reduce((v,x)=>v+x.qualityRating,0)/c.length,h=c.reduce((v,x)=>v+x.punctualityRating,0)/c.length,m=c.reduce((v,x)=>v+x.priceRating,0)/c.length,p=c.reduce((v,x)=>v+x.communicationRating,0)/c.length,y=c.reduce((v,x)=>v+x.overallRating,0)/c.length;o({quality:u.toFixed(1),punctuality:h.toFixed(1),price:m.toFixed(1),communication:p.toFixed(1),overall:y.toFixed(1)})}},[t,n]);const a=({label:l,rating:c,count:u,total:h})=>{const m=h>0?u/h*100:0;return d.createElement("div",{className:"flex items-center mb-1"},d.createElement("span",{className:"w-28 text-sm"},l),d.createElement("div",{className:`flex-1 h-2 ${e?"bg-gray-600":"bg-gray-200"} rounded-full mx-2 transition-colors duration-300`},d.createElement("div",{className:`h-full ${e?"bg-indigo-500":"bg-indigo-400"} rounded-full transition-colors duration-300`,style:{width:`${m}%`}})),d.createElement("span",{className:`text-sm ${e?"text-gray-300":""}`},c))};return d.createElement(pt,{className:`p-6 ${e?"bg-gray-800 text-gray-200":"bg-gradient-to-br from-blue-50 to-indigo-100"} shadow-md transition-colors duration-300`},d.createElement("h2",{className:`text-xl font-bold mb-4 ${e?"text-indigo-300":"text-indigo-800"} relative inline-block transition-colors duration-300`},d.createElement("span",{className:"relative z-10"}," "),d.createElement("span",{className:`absolute bottom-0 left-0 right-0 h-2 ${e?"bg-indigo-500":"bg-indigo-300"} opacity-40 transform -rotate-1 z-0`})),r.length>0?d.createElement(d.Fragment,null,d.createElement("div",{className:"mb-6"},d.createElement("div",{className:"flex items-center mb-2"},d.createElement("div",{className:"flex items-center ml-4"},d.createElement(Yn,{size:24,className:`${e?"text-yellow-400 fill-yellow-400":"text-yellow-500 fill-yellow-500"}`}),d.createElement("span",{className:"mr-1 text-2xl font-bold"},i.overall)),d.createElement("span",{className:`${e?"text-indigo-400":"text-indigo-500"} transition-colors duration-300`},"(",r.length," )")),d.createElement("div",{className:"mt-4 mb-6"},d.createElement(a,{label:" ",rating:i.quality,count:parseFloat(i.quality)*r.length,total:5*r.length}),d.createElement(a,{label:" ",rating:i.punctuality,count:parseFloat(i.punctuality)*r.length,total:5*r.length}),d.createElement(a,{label:"  ",rating:i.price,count:parseFloat(i.price)*r.length,total:5*r.length}),d.createElement(a,{label:"",rating:i.communication,count:parseFloat(i.communication)*r.length,total:5*r.length}))),d.createElement(LYe,{reviews:r,darkMode:e})):d.createElement("div",{className:"text-center py-8"},d.createElement("div",{className:`mb-4 ${e?"text-gray-300":"text-gray-600"}`},d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 mx-auto mb-4 opacity-50",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},d.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})),d.createElement("h3",{className:`text-xl font-bold mb-2 ${e?"text-indigo-300":"text-indigo-700"}`},"   "),d.createElement("p",{className:`${e?"text-gray-400":"text-gray-500"} max-w-md mx-auto`},"      .            ."))))},zYe=({reviews:t,darkMode:e})=>d.createElement(pt,{className:`p-6 ${e?"bg-gray-800 text-gray-200":"bg-gradient-to-br from-blue-50 to-indigo-100"} shadow-md transition-colors duration-300`},d.createElement("h2",{className:`text-xl font-bold mb-4 ${e?"text-indigo-300":"text-indigo-800"} relative inline-block transition-colors duration-300`},d.createElement("span",{className:"relative z-10"},""),d.createElement("span",{className:`absolute bottom-0 left-0 right-0 h-2 ${e?"bg-indigo-500":"bg-indigo-300"} opacity-40 transform -rotate-1 z-0`})),t.length>0?d.createElement(MYe,{reviews:t}):d.createElement("p",{className:`text-center p-3 rounded-md border ${e?"text-indigo-400 bg-gray-700 border-gray-600":"text-indigo-500 bg-indigo-50 border-indigo-100"} transition-colors duration-300`},"   ")),FYe=({darkMode:t,bookingData:e,bookingErrors:n,onClose:r,onInputChange:s,onSubmit:i})=>d.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[100] p-4"},d.createElement(At.div,{className:`${t?"bg-gray-800":"bg-white"} rounded-lg shadow-lg w-full max-w-md transition-colors duration-300`,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1}},d.createElement("div",{className:`p-6 rounded-lg ${t?"bg-gray-800 text-gray-200":"bg-gradient-to-br from-blue-50 to-indigo-100"} shadow-inner transition-colors duration-300 border ${t?"border-gray-700":"border-indigo-200"}`},d.createElement("div",{className:"flex justify-between items-center mb-4 "},d.createElement("h2",{className:`text-xl font-bold ${t?"text-indigo-300":"text-indigo-800"} relative inline-block transition-colors duration-300`},d.createElement("span",{className:"relative z-10"}," "),d.createElement("span",{className:`absolute bottom-0 left-0 right-0 h-2 ${t?"bg-indigo-500":"bg-indigo-300"} opacity-40 transform -rotate-1 z-0`})),d.createElement("button",{onClick:r,className:`${t?"text-indigo-400 hover:text-indigo-300":"text-indigo-500 hover:text-indigo-700"} transition-colors duration-200`},d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},d.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})))),d.createElement("div",{className:`p-4 mb-4 rounded-md ${t?"bg-indigo-900/30 border border-indigo-800":"bg-indigo-50 border border-indigo-100"}`},d.createElement("p",{className:`text-sm ${t?"text-indigo-300":"text-indigo-700"}`},d.createElement("span",{className:"font-bold"},":"),"        .       .")),d.createElement("form",{onSubmit:i},d.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"},d.createElement("div",null,d.createElement("label",{className:`block ${t?"text-indigo-300":"text-indigo-800"} font-medium mb-2 transition-colors duration-300`},"  ",d.createElement("span",{className:"text-red-500"},"*")),d.createElement("input",{type:"date",name:"startDate",value:e.startDate,onChange:s,className:`input w-full ${t?"bg-gray-700 border-gray-600 text-gray-200 focus:border-indigo-400 focus:ring-indigo-400":"border-indigo-200 focus:border-indigo-500 focus:ring-indigo-200"} focus:ring focus:ring-opacity-50 rounded-md shadow-sm ${n.startDate?"border-red-500 focus:ring-red-500":""}`,min:new Date().toISOString().split("T")[0],required:!0}),n.startDate&&d.createElement("p",{className:"text-red-500 text-sm mt-1"},n.startDate)),d.createElement("div",null,d.createElement("label",{className:`block ${t?"text-indigo-300":"text-indigo-800"} font-medium mb-2 transition-colors duration-300`},"  ",d.createElement("span",{className:"text-red-500"},"*")),d.createElement("input",{type:"date",name:"endDate",value:e.endDate,onChange:s,className:`input w-full ${t?"bg-gray-700 border-gray-600 text-gray-200 focus:border-indigo-400 focus:ring-indigo-400":"border-indigo-200 focus:border-indigo-500 focus:ring-indigo-200"} focus:ring focus:ring-opacity-50 rounded-md shadow-sm ${n.endDate?"border-red-500 focus:ring-red-500":""}`,min:e.startDate||new Date().toISOString().split("T")[0],required:!0}),n.endDate&&d.createElement("p",{className:"text-red-500 text-sm mt-1"},n.endDate))),d.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"},d.createElement("div",null,d.createElement("label",{className:`block ${t?"text-indigo-300":"text-indigo-800"} font-medium mb-2 transition-colors duration-300`},"  ",d.createElement("span",{className:"text-red-500"},"*")),d.createElement("input",{type:"time",name:"startTime",value:e.startTime,onChange:s,className:`input w-full ${t?"bg-gray-700 border-gray-600 text-gray-200 focus:border-indigo-400 focus:ring-indigo-400":"border-indigo-200 focus:border-indigo-500 focus:ring-indigo-200"} focus:ring focus:ring-opacity-50 rounded-md shadow-sm ${n.startTime?"border-red-500 focus:ring-red-500":""}`,required:!0}),n.startTime&&d.createElement("p",{className:"text-red-500 text-sm mt-1"},n.startTime)),d.createElement("div",null,d.createElement("label",{className:`block ${t?"text-indigo-300":"text-indigo-800"} font-medium mb-2 transition-colors duration-300`},"  ",d.createElement("span",{className:"text-red-500"},"*")),d.createElement("input",{type:"time",name:"endTime",value:e.endTime,onChange:s,className:`input w-full ${t?"bg-gray-700 border-gray-600 text-gray-200 focus:border-indigo-400 focus:ring-indigo-400":"border-indigo-200 focus:border-indigo-500 focus:ring-indigo-200"} focus:ring focus:ring-opacity-50 rounded-md shadow-sm ${n.endTime?"border-red-500 focus:ring-red-500":""}`,required:!0}),n.endTime&&d.createElement("p",{className:"text-red-500 text-sm mt-1"},n.endTime))),d.createElement("div",{className:"mb-4 "},d.createElement("label",{className:`block ${t?"text-indigo-300":"text-indigo-800"} font-medium mb-2 transition-colors duration-300`},"  ",d.createElement("span",{className:"text-red-500"},"*")),d.createElement("textarea",{name:"description",value:e.description,onChange:s,placeholder:"      ...",className:`input min-h-[100px] ${t?"bg-gray-700 border-gray-600 text-gray-200 focus:border-indigo-400 focus:ring-indigo-400":"border-indigo-200 focus:border-indigo-500 focus:ring-indigo-200"} focus:ring focus:ring-opacity-50 rounded-md shadow-sm ${n.description?"border-red-500 focus:ring-red-500":""}`,required:!0}),n.description&&d.createElement("p",{className:"text-red-500 text-sm mt-1"},n.description)),d.createElement("div",{className:"flex justify-between mt-6"},d.createElement(Oe,{type:"submit",variant:"primary",className:`text-white flex items-center justify-center gap-2 shadow-md hover:shadow-lg transition-all duration-200 relative overflow-hidden group py-3 px-6 ${t?"bg-gradient-to-r from-indigo-700 to-purple-800 hover:from-indigo-800 hover:to-purple-900":"bg-gradient-to-r from-blue-500 to-indigo-500 hover:from-blue-600 hover:to-indigo-600"}`},d.createElement("span",{className:"relative z-10 flex items-center"},d.createElement(Pa,{size:18,className:"ml-1"})," "),d.createElement("span",{className:"absolute inset-0 bg-white opacity-20 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-700"})),d.createElement(Oe,{type:"button",variant:"secondary",onClick:r,className:`text-white flex items-center justify-center gap-2 shadow-md hover:shadow-lg transition-all duration-200 relative overflow-hidden group py-3 px-6 ${t?"bg-gradient-to-r from-red-600 to-red-800 hover:from-red-700 hover:to-red-900":"bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700"}`},d.createElement("span",{className:"relative z-10 flex items-center"},d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 ml-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},d.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})),""),d.createElement("span",{className:"absolute inset-0 bg-white opacity-20 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-700"}))))))),BYe=t=>!t||t.length===0?0:t.reduce((n,r)=>{if(r.qualityRating&&r.timelinessRating&&r.priceRating&&r.communicationRating){const s=(r.qualityRating+r.timelinessRating+r.priceRating+r.communicationRating)/4;return n+s}return n+(r.rating||0)},0)/t.length,VYe=()=>{const{id:t}=gB(),e=Lr(),n=We(M=>M.darkMode),r=Dt(M=>M.user),s=Lg(M=>M.craftsmen),i=Lg(M=>M.fetchCraftsman),o=xm(M=>M.createBooking),a=My(M=>M.getCraftsmanReviews),[l,c]=A.useState(null),[u,h]=A.useState(!0),[m,p]=A.useState(null),[y,v]=A.useState([]),[x,b]=A.useState(0),[w,E]=A.useState(!1),[N,C]=A.useState({startDate:"",endDate:"",startTime:"",endTime:"",description:""}),[S,T]=A.useState({}),[I,P]=A.useState(!1),[R,D]=A.useState(!1);A.useEffect(()=>{(async()=>{try{h(!0),p(null);let U=s.find(V=>V.id===t||V._id===t);if(U||(U=await i(t)),!U)throw new Error("    ");console.log("Original image data:",{image:U.image,user:U.user,userImage:U.user?U.user.image:null,userProfilePicture:U.user?U.user.profilePicture:null,profilePicture:U.profilePicture}),!U.image||U.image===""||U.user&&(!U.user.profilePicture||U.user.profilePicture==="")?U.image="/img/user-avatar.svg":U.image.startsWith("/uploads/")&&(U.image=`https://jobscope-8t58.onrender.com${U.image}`),console.log("Final image path:",U.image),!U.phone&&U.user&&U.user.phone&&(U.phone=U.user.phone),console.log("Craftsman data loaded:",U),c(U),h(!1)}catch(U){console.error("Error loading craftsman:",U),p(U.message||"     "),h(!1)}})()},[t,s,i]),A.useEffect(()=>{if(l&&l.id){const M=a(l.id);v(M||[])}},[l,a]),A.useEffect(()=>{if(y.length>0){const M=BYe(y);b(M)}},[y]);const B=M=>{const{name:U,value:V}=M.target;C(ne=>({...ne,[U]:V})),S[U]&&T(ne=>({...ne,[U]:""}))},Z=()=>{const M={},U=new Date().toISOString().split("T")[0];return N.startDate?N.startDate<U&&(M.startDate="     "):M.startDate="   ",N.endDate?N.endDate<N.startDate&&(M.endDate="       "):M.endDate="   ",N.startTime||(M.startTime="   "),N.endTime?N.startDate===N.endDate&&N.endTime<=N.startTime&&(M.endTime="       "):M.endTime="   ",N.description.trim()?N.description.trim().length<10&&(M.description="    10   "):M.description="   ",M},z=async M=>{if(M.preventDefault(),!r){e("/login",{state:{from:`/craftsman/${t}`}});return}const U=Z();if(Object.keys(U).length>0){T(U);return}try{D(!0),await o({craftsmanId:l.id,userId:r.id,startDate:N.startDate,endDate:N.endDate,startTime:N.startTime,endTime:N.endTime,description:N.description,status:"pending"}),P(!0),C({startDate:"",endDate:"",startTime:"",endTime:"",description:""}),E(!1),setTimeout(()=>{P(!1)},3e3)}catch(V){console.error("Error creating booking:",V),T({general:V.message||"    "})}finally{D(!1)}},q=()=>{Dt.getState().logout(),e("/logout-redirect")};return u?d.createElement("div",{className:`min-h-screen flex items-center justify-center ${n?"bg-gray-900 text-white":"bg-gradient-to-br from-blue-50 to-indigo-100 text-black"} transition-colors duration-300`},d.createElement(CYe,{darkMode:n})):m||!l?d.createElement("div",{className:`min-h-screen flex items-center justify-center ${n?"bg-gray-900 text-white":"bg-gradient-to-br from-blue-50 to-indigo-100 text-black"} transition-colors duration-300`},d.createElement(_Ye,{error:m,darkMode:n})):d.createElement(ds,{user:r,onLogout:q},d.createElement("div",{className:"container mx-auto px-4 py-8"},I&&d.createElement("div",{className:`fixed top-4 left-1/2 transform -translate-x-1/2 z-50 p-4 rounded-md shadow-lg ${n?"bg-green-900/90":"bg-green-100"} ${n?"text-green-200":"text-green-700"} text-center transition-colors duration-300 max-w-md w-full`},d.createElement("h3",{className:"font-bold mb-1"},"    !"),d.createElement("p",null,"       .")),d.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6"},d.createElement("div",{className:"md:col-span-1"},d.createElement(SYe,{craftsman:l,darkMode:n,onBookingClick:()=>E(!0)}),d.createElement(TYe,{craftsman:l,darkMode:n})),d.createElement("div",{className:"md:col-span-2"},d.createElement($Ye,{craftsman:l,darkMode:n}),d.createElement(IYe,{craftsman:l,darkMode:n}),d.createElement(MK,{location:l.location,workRadius:l.workRadius,isEditing:!1,streetsInWorkRange:l.streetsInWorkRange||[],hospitalsInWorkRange:l.hospitalsInWorkRange||[],mosquesInWorkRange:l.mosquesInWorkRange||[]}),d.createElement(OYe,{craftsman:l,darkMode:n}),d.createElement(zYe,{reviews:y,darkMode:n}))),w&&d.createElement(FYe,{darkMode:n,bookingData:N,bookingErrors:S,onClose:()=>E(!1),onInputChange:B,onSubmit:z})))},dF=t=>{if(!t)return!1;const e=new Date,n=e.getHours(),r=e.getMinutes(),s=n*60+r,o=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"][e.getDay()],a=t[o];if(!a||!a.isWorking)return!1;const l=a.from.split(":"),c=a.to.split(":"),u=parseInt(l[0])*60+parseInt(l[1]),h=parseInt(c[0])*60+parseInt(c[1]);return s>=u&&s<=h},hF=t=>{if(!t)return"";const[e,n]=t.split(":");let r=parseInt(e);const s=r>=12?"":"";return r=r%12,r=r||12,`${r}:${n} ${s}`},zK=t=>{if(!t)return" ";const e={saturday:"",sunday:"",monday:"",tuesday:"",wednesday:"",thursday:"",friday:""},n=Object.entries(t).filter(([r,s])=>s.isWorking).map(([r,s])=>e[r]);return n.length===0?" ":n.length===7?" ":n.join(" ")},FK=t=>{if(!t)return" ";const e=Object.values(t).find(n=>n.isWorking);return e?`${hF(e.from)} - ${hF(e.to)}`:" "},jYe=({user:t,userType:e})=>{const n=We(a=>a.darkMode),[r,s]=A.useState(!1),[i,o]=A.useState(new Date);return A.useEffect(()=>{t&&t.workingHours&&s(dF(t.workingHours));const a=setInterval(()=>{o(new Date),t&&t.workingHours&&s(dF(t.workingHours))},6e4);return()=>clearInterval(a)},[t]),d.createElement(pt,{className:`overflow-hidden ${n?"bg-gray-800 text-gray-200 border-gray-700":"bg-gradient-to-br from-blue-50 to-indigo-100 border-indigo-200"} shadow-lg border transition-colors duration-300`},d.createElement("div",{className:"h-96 overflow-hidden"},d.createElement(Ud,{src:t.image,alt:t.name,className:"w-full h-full object-cover",placeholderClassName:"w-full h-full bg-gray-200 animate-pulse",onError:()=>console.log("Error loading profile image:",t.image)})),d.createElement("div",{className:"p-4"},d.createElement("h1",{className:`text-2xl font-bold mb-1 ${n?"text-indigo-300":"text-indigo-800"} transition-colors duration-300`},t.name),e==="craftsman"&&d.createElement(d.Fragment,null,d.createElement("div",{className:"text-indigo-600 mb-4"},t.professions&&t.specializations?d.createElement("div",{className:"space-y-2"},t.professions.map((a,l)=>{const c=[],h=[{id:1,name:"",specializations:[" "," ","  "]},{id:2,name:"",specializations:[" "," "," "]},{id:3,name:"",specializations:[" "," "," "]},{id:4,name:"",specializations:[" "," "," "]},{id:5,name:" ",specializations:[" "," "," "]},{id:6,name:"",specializations:[" "," "," "]},{id:7,name:"",specializations:[" "," "," "]},{id:8,name:"",specializations:[" ",""," "]}].find(m=>m.name===a);return h&&t.specializations.forEach(m=>{h.specializations.includes(m)&&c.push(m)}),d.createElement("div",{key:l,className:"flex flex-col"},d.createElement("div",{className:"font-medium text-indigo-700"},a),d.createElement("div",{className:"mr-4 text-sm"},c.length>0?c.join(", "):" "))})):d.createElement("p",{className:"font-medium"},t.profession," - ",t.specialization)),d.createElement("div",{className:"flex items-center mb-4"},d.createElement(Yn,{size:20,className:"text-yellow-500 fill-yellow-500"}),d.createElement("span",{className:"mr-1 text-lg"},t.rating||0),d.createElement("span",{className:"mr-2 text-indigo-500"},"(",t.reviewCount||0," )")),d.createElement("div",{className:"flex items-center mb-4"},d.createElement(Ux,{size:20,className:"text-indigo-500"}),d.createElement("span",{className:"mr-1 text-indigo-600"}," : ",t.workRadius," ")),d.createElement("div",{className:"space-y-3 mb-4"},d.createElement("div",{className:"flex items-center"},d.createElement("span",{className:`px-3 py-1 rounded-full text-sm font-medium shadow-sm transition-all duration-200 ${r?"bg-gradient-to-r from-green-100 to-green-200 text-green-800 border border-green-300":"bg-gradient-to-r from-red-100 to-red-200 text-red-800 border border-red-300"}`},r?" ":"  ")),t.workingHours&&d.createElement("div",{className:"flex items-center"},d.createElement(Pa,{size:18,className:`ml-2 ${n?"text-indigo-300":"text-indigo-600"}`}),d.createElement("div",{className:`text-sm ${n?"text-gray-300":"text-gray-700"}`},d.createElement("span",{className:"font-medium ml-1"}," :"),d.createElement("span",null,zK(t.workingHours)))),t.workingHours&&d.createElement("div",{className:"flex items-center"},d.createElement(jx,{size:18,className:`ml-2 ${n?"text-indigo-300":"text-indigo-600"}`}),d.createElement("div",{className:`text-sm ${n?"text-gray-300":"text-gray-700"}`},d.createElement("span",{className:"font-medium ml-1"}," :"),d.createElement("span",null,FK(t.workingHours))))))))},UYe=({user:t})=>{const e=We(n=>n.darkMode);return d.createElement(pt,{className:`p-4 shadow-md border transition-colors duration-300 ${e?"bg-gray-800 text-gray-200 border-gray-700":"bg-gradient-to-br from-blue-50 to-indigo-100 border-indigo-200"}`},d.createElement("h2",{className:`text-xl font-bold mb-4 relative inline-block ${e?"text-indigo-300":"text-indigo-800"} transition-colors duration-300`},d.createElement("span",{className:"relative z-10"}," "),d.createElement("span",{className:`absolute bottom-0 left-0 right-0 h-2 ${e?"bg-indigo-500":"bg-indigo-300"} opacity-40 transform -rotate-1 z-0`})),d.createElement("div",{className:"space-y-4"},t.userType==="craftsman"&&d.createElement("div",{className:"mb-4"},d.createElement("div",{className:"flex items-center mb-2"},d.createElement(VT,{size:18,className:`${e?"text-indigo-400":"text-indigo-500"} ml-2 transition-colors duration-300`}),d.createElement("span",{className:`font-medium ${e?"text-indigo-300":"text-indigo-700"} transition-colors duration-300`}," ")),d.createElement("div",{className:"mr-6 mt-2"},t.professions&&t.professions.length>0?d.createElement("div",{className:"space-y-2"},t.professions.map((n,r)=>{let s=[];return t.specializations&&t.specializations.length>0&&(s=t.specializations),d.createElement("div",{key:r,className:"flex flex-col"},d.createElement("div",{className:`font-medium ${e?"text-indigo-300":"text-indigo-700"}`},n),d.createElement("div",{className:"mr-4 text-sm"},s.length>0?s.join(", "):"  "))})):t.profession?d.createElement("div",{className:"flex flex-col"},d.createElement("div",{className:`font-medium ${e?"text-indigo-300":"text-indigo-700"}`},t.profession),t.specialization&&d.createElement("div",{className:"mr-4 text-sm"},t.specialization)):d.createElement("div",{className:"text-sm text-gray-500"},"   "))),d.createElement("div",{className:"flex items-center"},d.createElement(vf,{size:18,className:`${e?"text-indigo-400":"text-indigo-500"} ml-2 transition-colors duration-300`}),d.createElement("span",{className:`${e?"text-indigo-300":"text-indigo-700"} transition-colors duration-300`},t.phone)),t.email&&d.createElement("div",{className:"flex items-center"},d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-5 w-5 ${e?"text-indigo-400":"text-indigo-500"} ml-2 transition-colors duration-300`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},d.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})),d.createElement("span",{className:`${e?"text-indigo-300":"text-indigo-700"} transition-colors duration-300`},t.email))))},HYe=({bio:t,isEditing:e,onBioChange:n})=>{const r=We(s=>s.darkMode);return d.createElement(pt,{className:`p-6 mb-6 ${r?"bg-gray-800 text-gray-200 border-gray-700":"bg-gradient-to-br from-blue-50 to-indigo-100 border-indigo-200"} shadow-md border transition-colors duration-300`},d.createElement("h2",{className:`text-xl font-bold mb-4 ${r?"text-indigo-300":"text-indigo-800"} relative inline-block transition-colors duration-300`},d.createElement("span",{className:"relative z-10"}," "),d.createElement("span",{className:`absolute bottom-0 left-0 right-0 h-2 ${r?"bg-indigo-500":"bg-indigo-300"} opacity-40 transform -rotate-1 z-0`})),e?d.createElement("textarea",{value:t,onChange:s=>n(s.target.value),className:"input min-h-[120px] w-full border-indigo-200 focus:border-indigo-500 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 rounded-md shadow-sm",placeholder:"    ..."}):d.createElement("p",{className:`${r?"text-indigo-300":"text-indigo-700"} leading-relaxed transition-colors duration-300`},t||"    ."))},GYe=({gallery:t=[],isEditing:e,onAddImage:n,onRemoveImage:r})=>{const s=We(l=>l.darkMode),i=d.useRef(null),o=()=>{i.current.click()},a=l=>{const c=l.target.files;if(c&&c.length>0&&n){const u=Array.from(c),h=[];let m=0;u.forEach(p=>{const y=new FileReader;y.onloadend=()=>{h.push(y.result),m++,m===u.length&&n(h)},y.readAsDataURL(p)})}};return d.createElement(pt,{className:`p-6 mb-6 ${s?"bg-gray-800 text-gray-200 border-gray-700":"bg-gradient-to-br from-blue-50 to-indigo-100 border-indigo-200"} shadow-md border transition-colors duration-300`},d.createElement("div",{className:"flex justify-between items-center mb-4"},d.createElement("h2",{className:`text-xl font-bold ${s?"text-indigo-300":"text-indigo-800"} relative inline-block transition-colors duration-300`},d.createElement("span",{className:"relative z-10"}," "),d.createElement("span",{className:`absolute bottom-0 left-0 right-0 h-2 ${s?"bg-indigo-500":"bg-indigo-300"} opacity-40 transform -rotate-1 z-0`})),e&&d.createElement(d.Fragment,null,d.createElement("input",{type:"file",ref:i,onChange:a,accept:"image/*",multiple:!0,className:"hidden"}),d.createElement(Oe,{variant:"secondary",onClick:o,className:`text-sm text-white flex items-center justify-center gap-2 shadow-md hover:shadow-lg transition-all duration-200 relative overflow-hidden group py-2 px-4 rounded-md ${s?"bg-gradient-to-r from-indigo-700 to-purple-800 hover:from-indigo-800 hover:to-purple-900":"bg-gradient-to-r from-blue-500 to-indigo-500 hover:from-blue-600 hover:to-indigo-600"}`},d.createElement("span",{className:"relative z-10 font-bold text-white"}," "),d.createElement("span",{className:"absolute inset-0 bg-white opacity-20 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-700"})))),t.length>0?d.createElement("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4"},t.map((l,c)=>d.createElement(At.div,{key:c,whileHover:{scale:1.05},className:"relative h-40 rounded-lg overflow-hidden"},d.createElement(Ud,{src:l,alt:` ${c+1}`,className:"w-full h-full object-cover",placeholderClassName:"w-full h-full bg-gray-200 animate-pulse"}),e&&d.createElement("button",{onClick:()=>r(c),className:"absolute top-2 left-2 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-full w-6 h-6 flex items-center justify-center shadow-md hover:shadow-lg transition-all duration-200"},"")))):d.createElement("p",{className:`text-center p-3 rounded-md inline-block ${s?"text-indigo-300 bg-indigo-900 border-indigo-700":"text-indigo-500 bg-indigo-50 border-indigo-100"} transition-colors duration-300`},"    "))},WYe=({workingHours:t,isEditing:e,onWorkingHoursChange:n,darkMode:r})=>{const s={saturday:"",sunday:"",monday:"",tuesday:"",wednesday:"",thursday:"",friday:""},[i,o]=A.useState({from:"09:00",to:"17:00"});A.useEffect(()=>{const c=Object.values(t||{}).find(u=>u==null?void 0:u.isWorking);c&&o({from:c.from||"09:00",to:c.to||"17:00"})},[t]);const a=c=>{var h;if(!n)return;const u={...t,[c]:{...t[c],isWorking:!((h=t[c])!=null&&h.isWorking),from:i.from,to:i.to}};n(u)},l=(c,u)=>{if(!n)return;o({...i,[c]:u});const h={...t};Object.keys(h).forEach(m=>{var p;(p=h[m])!=null&&p.isWorking&&(h[m]={...h[m],[c]:u})}),n(h)};return d.createElement(pt,{className:`p-6 mb-6 ${r?"bg-gray-800 text-gray-200":"bg-gradient-to-br from-blue-50 to-indigo-100"} shadow-md transition-colors duration-300`},d.createElement("h2",{className:`text-xl font-bold mb-4 ${r?"text-indigo-300":"text-indigo-800"} relative inline-block transition-colors duration-300`},d.createElement("span",{className:"relative z-10"}," "),d.createElement("span",{className:`absolute bottom-0 left-0 right-0 h-2 ${r?"bg-indigo-500":"bg-indigo-300"} opacity-40 transform -rotate-1 z-0`})),e?d.createElement("div",{className:"mt-4"},d.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},d.createElement("div",{className:`p-4 rounded-lg shadow-sm ${r?"bg-gray-700":"bg-white"}`},d.createElement("div",{className:"flex justify-between items-center mb-3"},d.createElement("h4",{className:`font-medium ${r?"text-indigo-300":"text-indigo-600"}`}," "),d.createElement("div",{className:"flex gap-2"},d.createElement("button",{type:"button",onClick:()=>{const c={...t};Object.keys(s).forEach(u=>{c[u]={...c[u],isWorking:!0,from:i.from,to:i.to}}),n(c)},className:`text-xs px-2 py-1 rounded-md ${r?"bg-indigo-700 text-white hover:bg-indigo-600":"bg-indigo-100 text-indigo-700 hover:bg-indigo-200"} transition-colors duration-200`}," "),d.createElement("button",{type:"button",onClick:()=>{const c={...t};Object.keys(s).forEach(u=>{c[u]={...c[u],isWorking:!1}}),n(c)},className:`text-xs px-2 py-1 rounded-md ${r?"bg-gray-700 text-white hover:bg-gray-600":"bg-gray-100 text-gray-700 hover:bg-gray-200"} transition-colors duration-200`},"  "))),Object.entries(s).map(([c,u])=>{var h;return d.createElement("div",{key:c,className:"flex items-center mb-3"},d.createElement("input",{type:"checkbox",id:`edit-working-${c}`,checked:((h=t[c])==null?void 0:h.isWorking)||!1,onChange:()=>a(c),className:"w-5 h-5 accent-indigo-600 ml-2"}),d.createElement("label",{htmlFor:`edit-working-${c}`,className:`${r?"text-gray-300":"text-gray-700"} cursor-pointer`},u))})),d.createElement("div",{className:`p-4 rounded-lg shadow-sm ${r?"bg-gray-700":"bg-white"}`},d.createElement("h4",{className:`font-medium mb-3 ${r?"text-indigo-300":"text-indigo-600"}`}," "),Object.values(t||{}).some(c=>c==null?void 0:c.isWorking)?d.createElement("div",{className:"mb-3"},d.createElement("p",{className:`text-sm mb-3 ${r?"text-gray-300":"text-gray-600"}`},"      "),d.createElement("div",{className:"flex items-center gap-2"},d.createElement("div",{className:"flex items-center"},d.createElement("span",{className:`ml-2 ${r?"text-gray-400":"text-gray-600"}`},""),d.createElement("input",{type:"time",value:i.from,onChange:c=>l("from",c.target.value),className:`p-1 rounded border ${r?"bg-gray-600 border-gray-500 text-gray-200":"bg-white border-gray-300"}`})),d.createElement("div",{className:"flex items-center"},d.createElement("span",{className:`ml-2 ${r?"text-gray-400":"text-gray-600"}`},""),d.createElement("input",{type:"time",value:i.to,onChange:c=>l("to",c.target.value),className:`p-1 rounded border ${r?"bg-gray-600 border-gray-500 text-gray-200":"bg-white border-gray-300"}`}))),d.createElement("div",{className:"mt-4"},d.createElement("h5",{className:`text-sm font-medium mb-2 ${r?"text-gray-300":"text-gray-600"}`},"  :"),d.createElement("div",{className:"flex flex-wrap gap-2"},Object.entries(s).map(([c,u])=>{var h;return((h=t[c])==null?void 0:h.isWorking)&&d.createElement("span",{key:`selected-${c}`,className:`px-2 py-1 rounded-full text-xs ${r?"bg-indigo-700 text-gray-200":"bg-indigo-100 text-indigo-800"}`},u)})))):d.createElement("p",{className:`text-center py-4 ${r?"text-gray-400":"text-gray-500"}`},"    "))),d.createElement("div",{className:`mt-4 p-3 rounded-md ${r?"bg-gray-700":"bg-indigo-50"}`},d.createElement("p",{className:`text-sm ${r?"text-gray-300":"text-indigo-700"}`},d.createElement("span",{className:"font-bold"},":"),"             ."))):d.createElement("div",{className:"space-y-3"},d.createElement("div",{className:"flex items-center"},d.createElement(Pa,{size:20,className:`ml-2 ${r?"text-indigo-300":"text-indigo-600"}`}),d.createElement("div",{className:`${r?"text-gray-300":"text-gray-700"}`},d.createElement("span",{className:"font-medium ml-1"}," :"),d.createElement("span",null,zK(t)))),d.createElement("div",{className:"flex items-center"},d.createElement(jx,{size:20,className:`ml-2 ${r?"text-indigo-300":"text-indigo-600"}`}),d.createElement("div",{className:`${r?"text-gray-300":"text-gray-700"}`},d.createElement("span",{className:"font-medium ml-1"}," :"),d.createElement("span",null,FK(t))))))},qYe=()=>{const t=Dt(R=>R.user),e=Dt(R=>R.userType),n=Dt(R=>R.updateUser),r=Dt(R=>R.logout),s=We(R=>R.darkMode),[i,o]=A.useState(!1),[a,l]=A.useState(null),[c,u]=A.useState(!1),[h,m]=A.useState({});if(A.useEffect(()=>{if(t){const R={...t};e==="craftsman"&&(R.professions||(R.profession?R.professions=[R.profession]:R.professions=[]),R.specializations||(R.specialization?R.specializations=[R.specialization]:R.specializations=[])),l(R)}},[t,e]),!t||!a)return d.createElement(wm,null);const p=R=>{const{name:D,value:B}=R.target;l({...a,[D]:B})},y=(R,D)=>{l({...a,[R]:D})},v=R=>{l({...a,bio:R})},x=R=>{l({...a,location:R})},b=R=>{l({...a,workRadius:R})},w=R=>{l({...a,workingHours:R})},E=()=>{l({...a,available:!a.available})},N=R=>{const D=Array.isArray(R)?R:[R];l({...a,gallery:[...a.gallery||[],...D]})},C=async R=>{const D=R.target.files[0];if(D)try{const B=new FormData;B.append("profileImage",D);const Z=new FileReader;Z.onloadend=()=>{l({...a,image:Z.result})},Z.readAsDataURL(D);const q=await(await gv(()=>Promise.resolve().then(()=>cF),void 0)).userService.uploadProfileImage(B);if(console.log("Image upload response:",q),q&&q.imageUrl){const{SERVER_URL:M}=await gv(()=>Promise.resolve().then(()=>vWe),void 0),U=`${M}${q.imageUrl}`;console.log("Full image URL:",U),l({...a,image:U,profilePicture:U})}}catch(B){console.error("Error uploading profile image:",B)}},S=R=>{const D=[...a.gallery||[]];D.splice(R,1),l({...a,gallery:D})},T=()=>{const R={};let D=!0,B=null;return(!a.name||a.name.trim()==="")&&(R.name=" ",B=B||"name",D=!1),!a.email||a.email.trim()===""?(R.email="  ",B=B||"email",D=!1):/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.email)||(R.email="    ",B=B||"email",D=!1),(!a.phone||a.phone.trim()==="")&&(R.phone="  ",B=B||"phone",D=!1),e==="craftsman"&&((!a.professions||a.professions.length===0)&&(R.professions="     ",B=B||"professions",D=!1),(!a.specializations||a.specializations.length===0)&&(R.specializations="     ",B=B||B==="professions"?"professions":"specializations",D=!1)),m(R),!D&&B&&setTimeout(()=>{const Z=document.querySelector(`[name="${B}"]`);if(Z)Z.scrollIntoView({behavior:"smooth",block:"center"}),Z.focus(),Z.classList.add("error-flash"),setTimeout(()=>{Z.classList.remove("error-flash")},2e3);else if(B==="professions"||B==="specializations"){const z=document.querySelector(".profession-selector");z&&z.scrollIntoView({behavior:"smooth",block:"center"})}},100),D},I=async()=>{if(T()){u(!0);try{const R={...a};e==="craftsman"&&(R.profession&&delete R.profession,R.specialization&&delete R.specialization),R.image&&R.image!==t.image&&(R.profilePicture=R.image),await(await gv(()=>Promise.resolve().then(()=>cF),void 0)).userService.updateProfile(R),n(R),o(!1),m({})}catch(R){console.error("Error saving changes:",R)}finally{u(!1)}}},P=()=>{l({...t}),o(!1),m({})};return d.createElement(ds,{user:t,onLogout:r},d.createElement("div",{className:`min-h-screen py-8 ${s?"bg-gradient-to-b from-gray-900 to-gray-800":"bg-gradient-to-br from-blue-50 to-indigo-100"} transition-colors duration-300`},d.createElement("div",{className:"container mx-auto px-4"},d.createElement("div",{className:"flex justify-between items-center mb-6"},d.createElement("h1",{className:`text-3xl font-bold ${s?"text-indigo-300":"text-indigo-800"} relative inline-block transition-colors duration-300`},d.createElement("span",{className:"relative z-10"}," "),d.createElement("span",{className:`absolute bottom-0 left-0 right-0 h-3 ${s?"bg-indigo-500":"bg-indigo-300"} opacity-40 transform -rotate-1 z-0`})),i?d.createElement("div",{className:"flex gap-2"},d.createElement(Oe,{variant:"secondary",onClick:P,disabled:c,className:`transition-all duration-200 shadow-sm hover:shadow-md py-2 px-4 relative overflow-hidden group ${s?"border-gray-700 text-indigo-300 hover:bg-gray-700":"border-indigo-200 text-indigo-600 hover:bg-indigo-50"} ${c?"opacity-50 cursor-not-allowed":""}`},d.createElement("span",{className:"relative z-10 font-bold"},""),d.createElement("span",{className:`absolute inset-0 ${s?"bg-gray-600":"bg-indigo-50"} opacity-0 transform -skew-x-12 -translate-x-full group-hover:translate-x-full group-hover:opacity-100 transition-all duration-700`})),d.createElement(wc,{variant:"primary",onClick:I,isLoading:c,loadingText:"  ...",className:`text-white flex items-center justify-center gap-2 shadow-md hover:shadow-lg transition-all duration-200 relative overflow-hidden group py-2 px-4 ${s?"bg-gradient-to-r from-indigo-700 to-purple-800 hover:from-indigo-800 hover:to-purple-900":"bg-gradient-to-r from-blue-500 to-indigo-500 hover:from-blue-600 hover:to-indigo-600"}`},d.createElement("span",{className:"relative z-10 font-bold text-white"}," "),d.createElement("span",{className:"absolute inset-0 bg-white opacity-20 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-700"}))):d.createElement(Oe,{variant:"primary",onClick:()=>o(!0),className:`text-white flex items-center justify-center gap-2 shadow-md hover:shadow-lg transition-all duration-200 relative overflow-hidden group py-2 px-4 ${s?"bg-gradient-to-r from-indigo-700 to-purple-800 hover:from-indigo-800 hover:to-purple-900":"bg-gradient-to-r from-blue-500 to-indigo-500 hover:from-blue-600 hover:to-indigo-600"}`},d.createElement("span",{className:"relative z-10 font-bold text-white"}," "),d.createElement("span",{className:"absolute inset-0 bg-white opacity-20 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-700"}))),d.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6"},d.createElement("div",{className:"md:col-span-1"},d.createElement(jYe,{user:a,userType:e}),i&&e==="craftsman"&&d.createElement("div",{className:"mt-4"},d.createElement(Oe,{variant:a.available?"primary":"secondary",fullWidth:!0,onClick:E,className:a.available?`text-white flex items-center justify-center gap-2 shadow-md hover:shadow-lg transition-all duration-200 relative overflow-hidden group py-2 px-4 ${s?"bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800":"bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700"}`:`flex items-center justify-center gap-2 shadow-md hover:shadow-lg transition-all duration-200 relative overflow-hidden group py-2 px-4 ${s?"bg-gray-800 border-gray-700 text-red-400 hover:bg-gray-700":"bg-white border border-red-300 text-red-700 hover:bg-gray-100"}`},d.createElement("span",{className:"relative z-10 font-bold"},a.available?" ":"  "),d.createElement("span",{className:"absolute inset-0 bg-white opacity-20 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-700"}))),d.createElement("div",{className:"mt-4"},d.createElement(UYe,{user:a})),i&&d.createElement(At.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"mt-4"},d.createElement("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-100 rounded-lg shadow-lg p-4 border border-indigo-200"},d.createElement("h3",{className:"font-bold text-lg mb-4 text-indigo-800 relative inline-block"},d.createElement("span",{className:"relative z-10"},"  "),d.createElement("span",{className:`absolute bottom-0 left-0 right-0 h-2 ${s?"bg-indigo-500":"bg-indigo-300"} opacity-40 transform -rotate-1 z-0`})),d.createElement("div",{className:"mb-6"},d.createElement("label",{className:"block text-indigo-700 font-medium mb-2"}," "),d.createElement("div",{className:"flex items-center"},d.createElement("div",{className:"w-24 h-24 bg-gradient-to-br from-indigo-50 to-blue-100 rounded-full overflow-hidden ml-4 border-2 border-indigo-200 shadow-md"},d.createElement(Ud,{src:a.image,alt:a.name,className:"w-full h-full object-cover",placeholderClassName:"w-full h-full bg-gray-200 animate-pulse"})),d.createElement("div",null,d.createElement("input",{type:"file",id:"profileImage",accept:"image/*",onChange:C,className:"hidden"}),d.createElement("label",{htmlFor:"profileImage",className:`cursor-pointer text-white flex items-center justify-center gap-2 shadow-md hover:shadow-lg transition-all duration-200 relative overflow-hidden group py-2 px-4 rounded-md mb-2 ${s?"bg-gradient-to-r from-indigo-700 to-purple-800 hover:from-indigo-800 hover:to-purple-900":"bg-gradient-to-r from-blue-500 to-indigo-500 hover:from-blue-600 hover:to-indigo-600"}`},d.createElement("span",{className:"relative z-10 font-bold text-white"}," "),d.createElement("span",{className:"absolute inset-0 bg-white opacity-20 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-700"})),d.createElement("p",{className:"text-indigo-500 text-sm"},"     ")))),d.createElement(yr,{label:" ",name:"name",value:a.name,onChange:p,error:h.name,required:!0}),d.createElement(yr,{label:" ",name:"phone",value:a.phone,onChange:p,error:h.phone,required:!0}),d.createElement(yr,{label:" ",name:"email",value:a.email,onChange:p,error:h.email,required:!0}),e==="craftsman"&&d.createElement(NK,{professions:a.professions||[],specializations:a.specializations||[],onChange:y,errors:h})))),d.createElement("div",{className:"md:col-span-2"},e==="craftsman"&&d.createElement(d.Fragment,null,d.createElement(HYe,{bio:a.bio,isEditing:i,onBioChange:v}),d.createElement(GYe,{gallery:a.gallery,isEditing:i,onAddImage:N,onRemoveImage:S}),d.createElement(MK,{location:a.location,workRadius:a.workRadius,isEditing:i,onLocationChange:x,onRadiusChange:b,streetsInWorkRange:a.streetsInWorkRange||[],hospitalsInWorkRange:a.hospitalsInWorkRange||[],mosquesInWorkRange:a.mosquesInWorkRange||[]}),d.createElement(WYe,{workingHours:a.workingHours||{saturday:{isWorking:!1,from:"09:00",to:"17:00"},sunday:{isWorking:!1,from:"09:00",to:"17:00"},monday:{isWorking:!1,from:"09:00",to:"17:00"},tuesday:{isWorking:!1,from:"09:00",to:"17:00"},wednesday:{isWorking:!1,from:"09:00",to:"17:00"},thursday:{isWorking:!1,from:"09:00",to:"17:00"},friday:{isWorking:!1,from:"09:00",to:"17:00"}},isEditing:i,onWorkingHoursChange:w,darkMode:s})),d.createElement("div",{className:`p-6 mb-6 rounded-lg shadow-md ${s?"bg-gray-800 text-gray-200":"bg-gradient-to-br from-blue-50 to-indigo-100"} transition-colors duration-300`},d.createElement("h2",{className:`text-xl font-bold mb-4 ${s?"text-indigo-300":"text-indigo-800"} relative inline-block transition-colors duration-300`},d.createElement("span",{className:"relative z-10"},""),d.createElement("span",{className:`absolute bottom-0 left-0 right-0 h-2 ${s?"bg-indigo-500":"bg-indigo-300"} opacity-40 transform -rotate-1 z-0`})),d.createElement("p",{className:`${s?"text-indigo-400":"text-indigo-600"} mb-4 transition-colors duration-300`},e==="client"?"        ":"        "),d.createElement(at,{to:"/bookings"},d.createElement(Oe,{variant:"primary",className:`text-white flex items-center justify-center gap-2 shadow-md hover:shadow-lg transition-all duration-200 relative overflow-hidden group py-2 px-4 ${s?"bg-gradient-to-r from-indigo-700 to-purple-800 hover:from-indigo-800 hover:to-purple-900":"bg-gradient-to-r from-blue-500 to-indigo-500 hover:from-blue-600 hover:to-indigo-600"}`},d.createElement("span",{className:"relative z-10 font-bold text-white"},"  "),d.createElement("span",{className:"absolute inset-0 bg-white opacity-20 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-700"})))))))))},KYe=()=>{const t=Dt(C=>C.user),e=Dt(C=>C.logout),n=mg(C=>C.language),r=mg(C=>C.setLanguage),[s,i]=A.useState(!0),o=We(C=>C.darkMode),a=We(C=>C.toggleDarkMode),l=m8[n],[c,u]=A.useState(!1),[h,m]=A.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[p,y]=A.useState({}),v=C=>{r(C.target.value)},x=()=>{i(!s)},b=()=>{a()},w=C=>{const{name:S,value:T}=C.target;m({...h,[S]:T}),p[S]&&y({...p,[S]:""})},E=()=>{let C=!0;const S={};return h.currentPassword||(S.currentPassword=l.currentPasswordRequired,C=!1),h.newPassword?h.newPassword.length<8&&(S.newPassword=l.passwordMinLength,C=!1):(S.newPassword=l.newPasswordRequired,C=!1),h.confirmPassword?h.newPassword!==h.confirmPassword&&(S.confirmPassword=l.passwordsNotMatch,C=!1):(S.confirmPassword=l.confirmPasswordRequired,C=!1),y(S),C},N=C=>{C.preventDefault(),E()&&(u(!1),m({currentPassword:"",newPassword:"",confirmPassword:""}),alert(l.passwordChangeSuccess))};return t?d.createElement(ds,{user:t,onLogout:e},d.createElement("div",{className:`${o?"bg-gray-900 text-white":"bg-gradient-to-br from-blue-50 to-indigo-100 text-black"} min-h-screen py-12 transition-colors duration-300`},d.createElement("div",{className:"container mx-auto px-4"},d.createElement(At.h1,{className:"text-4xl font-bold mb-8 relative inline-block",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5}},d.createElement("span",{className:"relative z-10"},l.pageTitle),d.createElement("span",{className:"absolute bottom-0 left-0 right-0 h-3 bg-indigo-500 opacity-30 transform -rotate-1 z-0"})),d.createElement(At.div,{className:"grid grid-cols-1 md:grid-cols-2 gap-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2}},d.createElement(pt,{className:`p-6 ${o?"bg-gray-800 text-gray-200":"bg-green-50"} shadow-md hover:shadow-lg transition-all duration-300`},d.createElement("div",{className:"flex items-center gap-3 mb-4"},d.createElement("div",{className:`w-10 h-10 rounded-full ${o?"bg-indigo-900 text-indigo-300":"bg-indigo-100 text-indigo-600"} flex items-center justify-center`},d.createElement(Xie,{size:20})),d.createElement("h2",{className:"text-xl font-bold"},l.languageTitle)),d.createElement("div",{className:"mb-4"},d.createElement("label",{className:"block text-gray-700 font-medium mb-2"},l.chooseLanguage),d.createElement("select",{value:n,onChange:v,className:"input"},d.createElement("option",{value:"ar"},""),d.createElement("option",{value:"en"},"English"))),d.createElement("p",{className:`${o?"text-gray-400":"text-gray-500"} text-sm`},l.languageChangeNote)),d.createElement(pt,{className:`p-6 ${o?"bg-gray-800 text-gray-200":"bg-blue-50"} shadow-md hover:shadow-lg transition-all duration-300`},d.createElement("div",{className:"flex items-center gap-3 mb-4"},d.createElement("div",{className:`w-10 h-10 rounded-full ${o?"bg-indigo-900 text-indigo-300":"bg-indigo-100 text-indigo-600"} flex items-center justify-center`},d.createElement(i0,{size:20})),d.createElement("h2",{className:"text-xl font-bold"},l.notificationsTitle)),d.createElement("div",{className:"flex items-center justify-between mb-4"},d.createElement("span",{className:o?"text-gray-300":"text-gray-700"},l.enableNotifications),d.createElement("label",{className:"relative inline-flex items-center cursor-pointer"},d.createElement("input",{type:"checkbox",checked:s,onChange:x,className:"sr-only peer"}),d.createElement("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-indigo-300/20 rounded-full peer peer-checked:after:translate-x-[0.4rem] peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:right-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"}))),d.createElement("p",{className:`${o?"text-gray-400":"text-gray-500"} text-sm`},l.notificationsNote)),d.createElement(pt,{className:`p-6 ${o?"bg-gray-800 text-gray-200":"bg-purple-50"} shadow-md hover:shadow-lg transition-all duration-300`},d.createElement("div",{className:"flex items-center gap-3 mb-4"},d.createElement("div",{className:`w-10 h-10 rounded-full ${o?"bg-indigo-900 text-indigo-300":"bg-indigo-100 text-indigo-600"} flex items-center justify-center`},d.createElement(WT,{size:20})),d.createElement("h2",{className:"text-xl font-bold"},l.appearanceTitle)),d.createElement("div",{className:"flex items-center justify-between mb-4"},d.createElement("span",{className:o?"text-gray-300":"text-gray-700"},l.darkMode),d.createElement("label",{className:"relative inline-flex items-center cursor-pointer"},d.createElement("input",{type:"checkbox",checked:o,onChange:b,className:"sr-only peer"}),d.createElement("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-indigo-300/20 rounded-full peer peer-checked:after:translate-x-[0.4rem] peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:right-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"}))),d.createElement("p",{className:`${o?"text-gray-400":"text-gray-500"} text-sm`},l.appearanceNote)),d.createElement(pt,{className:`p-6 ${o?"bg-gray-800 text-gray-200":"bg-indigo-50"} shadow-md hover:shadow-lg transition-all duration-300`},d.createElement("div",{className:"flex items-center gap-3 mb-4"},d.createElement("div",{className:`w-10 h-10 rounded-full ${o?"bg-indigo-900 text-indigo-300":"bg-indigo-100 text-indigo-600"} flex items-center justify-center`},d.createElement(Ev,{size:20})),d.createElement("h2",{className:"text-xl font-bold"},l.securityTitle)),d.createElement("div",{className:"mb-4"},d.createElement(Oe,{variant:"primary",className:"bg-gradient-to-r from-indigo-600 to-indigo-800 hover:from-indigo-700 hover:to-indigo-900 text-white flex items-center justify-center gap-2 shadow-md hover:shadow-lg transition-all duration-200 relative overflow-hidden group text-lg py-3 px-6",onClick:()=>u(!0)},d.createElement("span",{className:"relative z-10 flex items-center justify-center gap-2"},d.createElement(Ev,{size:18}),l.changePassword),d.createElement("span",{className:"absolute inset-0 bg-white opacity-20 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-700"}))),d.createElement("div",{className:"mb-4"},d.createElement(Oe,{variant:"primary",className:"bg-gradient-to-r from-red-500 to-red-700 hover:from-red-600 hover:to-red-800 text-white flex items-center justify-center gap-2 shadow-md hover:shadow-lg transition-all duration-200 relative overflow-hidden group text-lg py-3 px-6",onClick:e},d.createElement("span",{className:"relative z-10 flex items-center justify-center gap-2"},d.createElement(GT,{size:18}),l.logout),d.createElement("span",{className:"absolute inset-0 bg-white opacity-20 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-700"}))),d.createElement("p",{className:`${o?"text-gray-400":"text-gray-500"} text-sm`},l.securityNote)),d.createElement(pt,{className:`p-6 ${o?"bg-gray-800 text-gray-200":"bg-red-50"} shadow-md hover:shadow-lg transition-all duration-300 md:col-span-2`},d.createElement("div",{className:"flex items-center gap-3 mb-4"},d.createElement("div",{className:`w-10 h-10 rounded-full ${o?"bg-red-900 text-red-300":"bg-red-100 text-red-600"} flex items-center justify-center`},d.createElement(k1,{size:20})),d.createElement("h2",{className:"text-xl font-bold"},l.accountSettingsTitle)),d.createElement("div",{className:"mb-4"},d.createElement(Oe,{variant:"primary",className:"bg-gradient-to-r from-red-500 to-red-700 hover:from-red-600 hover:to-red-800 text-white flex items-center justify-center gap-2 shadow-md hover:shadow-lg transition-all duration-200 relative overflow-hidden group text-lg py-3 px-6"},d.createElement("span",{className:"relative z-10 flex items-center justify-center gap-2"},d.createElement(k1,{size:18}),l.deleteAccount),d.createElement("span",{className:"absolute inset-0 bg-white opacity-20 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-700"}))),d.createElement("p",{className:`${o?"text-gray-400":"text-gray-500"} text-sm`},l.deleteAccountWarning))))),c&&d.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[100] p-4"},d.createElement(At.div,{className:`${o?"bg-gray-800 text-white":"bg-white"} rounded-lg shadow-lg w-full max-w-md`,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1}},d.createElement("div",{className:"p-6"},d.createElement("div",{className:"flex justify-between items-center mb-4"},d.createElement("h2",{className:"text-xl font-bold"},l.passwordModalTitle),d.createElement("button",{onClick:()=>u(!1),className:"text-gray-500 hover:text-gray-700"},d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},d.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})))),d.createElement("form",{onSubmit:N},d.createElement("div",{className:"mb-4"},d.createElement("label",{className:"block text-gray-700 font-medium mb-2"},l.currentPassword," ",d.createElement("span",{className:"text-red-500"},"*")),d.createElement("input",{type:"password",name:"currentPassword",value:h.currentPassword,onChange:w,className:`input ${p.currentPassword?"border-red-500 focus:ring-red-500":""}`,required:!0}),p.currentPassword&&d.createElement("p",{className:"text-red-500 text-sm mt-1"},p.currentPassword)),d.createElement("div",{className:"mb-4"},d.createElement("label",{className:"block text-gray-700 font-medium mb-2"},l.newPassword," ",d.createElement("span",{className:"text-red-500"},"*")),d.createElement("input",{type:"password",name:"newPassword",value:h.newPassword,onChange:w,className:`input ${p.newPassword?"border-red-500 focus:ring-red-500":""}`,required:!0}),p.newPassword&&d.createElement("p",{className:"text-red-500 text-sm mt-1"},p.newPassword)),d.createElement("div",{className:"mb-4"},d.createElement("label",{className:"block text-gray-700 font-medium mb-2"},l.confirmNewPassword," ",d.createElement("span",{className:"text-red-500"},"*")),d.createElement("input",{type:"password",name:"confirmPassword",value:h.confirmPassword,onChange:w,className:`input ${p.confirmPassword?"border-red-500 focus:ring-red-500":""}`,required:!0}),p.confirmPassword&&d.createElement("p",{className:"text-red-500 text-sm mt-1"},p.confirmPassword)),d.createElement("div",{className:"flex justify-end gap-2"},d.createElement(Oe,{type:"button",variant:"outline",className:"border-gray-300 text-gray-700 hover:bg-gray-50 flex items-center justify-center gap-2 shadow-md hover:shadow-lg transition-all duration-200 relative overflow-hidden group py-2 px-4",onClick:()=>u(!1)},d.createElement("span",{className:"relative z-10"},l.cancel),d.createElement("span",{className:"absolute inset-0 bg-gray-200 opacity-0 transform -skew-x-12 -translate-x-full group-hover:translate-x-full group-hover:opacity-20 transition-all duration-700"})),d.createElement(Oe,{type:"submit",variant:"primary",className:"bg-gradient-to-r from-indigo-600 to-indigo-800 hover:from-indigo-700 hover:to-indigo-900 text-white flex items-center justify-center gap-2 shadow-md hover:shadow-lg transition-all duration-200 relative overflow-hidden group py-2 px-4"},d.createElement("span",{className:"relative z-10 flex items-center justify-center gap-2"},d.createElement(Ev,{size:16}),l.changePassword),d.createElement("span",{className:"absolute inset-0 bg-white opacity-20 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-700"})))))))):d.createElement(wm,null)},ZYe=({onSubmit:t,onCancel:e})=>{const n=We(b=>b.darkMode),[r,s]=A.useState({qualityRating:5,punctualityRating:5,priceRating:5,communicationRating:5,overallRating:5,comment:"",images:[]}),[i,o]=A.useState({}),[a,l]=A.useState([]),c=b=>{const{qualityRating:w,punctualityRating:E,priceRating:N,communicationRating:C}=b;return Math.round((w+E+N+C)/4)},u=(b,w)=>{const E={...r,[b]:w};b!=="overallRating"&&(E.overallRating=c(E)),s(E)},h=b=>{s({...r,comment:b.target.value}),i.comment&&o({...i,comment:""})},m=b=>{const w=Array.from(b.target.files);if(w.length===0)return;if(a.length+w.length>5){o({...i,images:"  5   "});return}const N=[...a],C=[...r.images];w.forEach(S=>{if(S.size>5*1024*1024){o({...i,images:"       5 "});return}const T=new FileReader;T.onload=I=>{N.push(I.target.result),l(N)},T.readAsDataURL(S),C.push(S)}),s({...r,images:C}),o({...i,images:""})},p=b=>{const w=[...a],E=[...r.images];w.splice(b,1),E.splice(b,1),l(w),s({...r,images:E})},y=()=>{const b={};let w=!0;return r.comment?r.comment.length<10&&(b.comment="    10   ",w=!1):(b.comment=" ",w=!1),o(b),w},v=b=>{b.preventDefault(),y()&&t({...r,images:a})},x=({criterion:b,label:w,value:E})=>d.createElement("div",{className:"mb-4"},d.createElement("label",{className:`block font-medium mb-2 ${n?"text-gray-300":"text-gray-700"} transition-colors duration-300`},w," ",d.createElement("span",{className:"text-red-500"},"*")),d.createElement("div",{className:"flex items-center"},[1,2,3,4,5].map(N=>d.createElement("button",{key:N,type:"button",onClick:()=>u(b,N),className:"ml-1 focus:outline-none"},d.createElement(Yn,{size:28,className:`${N<=E?`${n?"text-yellow-400 fill-yellow-400":"text-yellow-500 fill-yellow-500"}`:`${n?"text-gray-600":"text-gray-300"}`}`}))),d.createElement("span",{className:`mr-2 font-bold ${n?"text-gray-200":""}`},E,"/5")));return d.createElement("form",{onSubmit:v,className:"space-y-4"},d.createElement("h3",{className:`text-lg font-bold mb-4 ${n?"text-indigo-300":"text-indigo-700"} transition-colors duration-300`}," "),d.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},d.createElement(x,{criterion:"qualityRating",label:" ",value:r.qualityRating}),d.createElement(x,{criterion:"punctualityRating",label:" ",value:r.punctualityRating}),d.createElement(x,{criterion:"priceRating",label:"  ",value:r.priceRating}),d.createElement(x,{criterion:"communicationRating",label:"",value:r.communicationRating})),d.createElement("div",{className:"border-t border-b py-4 my-4"},d.createElement(x,{criterion:"overallRating",label:" ",value:r.overallRating})),d.createElement("div",{className:"mb-4"},d.createElement("label",{className:`block font-medium mb-2 ${n?"text-gray-300":"text-gray-700"} transition-colors duration-300`}," ",d.createElement("span",{className:"text-red-500"},"*")),d.createElement("textarea",{value:r.comment,onChange:h,placeholder:"  ...",className:`input min-h-[100px] w-full ${n?"bg-gray-700 border-gray-600 text-white":""} ${i.comment?"border-red-500 focus:ring-red-500":""}`,required:!0}),i.comment&&d.createElement("p",{className:"text-red-500 text-sm mt-1"},i.comment)),d.createElement("div",{className:"mb-4"},d.createElement("label",{className:`block font-medium mb-2 ${n?"text-gray-300":"text-gray-700"} transition-colors duration-300`},"   ()"),d.createElement("div",{className:`border-2 border-dashed rounded-md p-4 text-center ${n?"border-gray-600 hover:border-gray-500":"border-gray-300 hover:border-gray-400"} transition-colors duration-300`},d.createElement("input",{type:"file",id:"image-upload",className:"hidden",accept:"image/*",multiple:!0,onChange:m}),d.createElement("label",{htmlFor:"image-upload",className:"cursor-pointer flex flex-col items-center justify-center"},d.createElement(d8,{size:32,className:`mb-2 ${n?"text-gray-400":"text-gray-500"}`}),d.createElement("p",{className:`${n?"text-gray-300":"text-gray-700"} transition-colors duration-300`},"  "),d.createElement("p",{className:`text-sm ${n?"text-gray-400":"text-gray-500"} transition-colors duration-300`}," : 5    5   "))),i.images&&d.createElement("p",{className:"text-red-500 text-sm mt-1"},i.images),a.length>0&&d.createElement("div",{className:"mt-4 grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-2"},a.map((b,w)=>d.createElement("div",{key:w,className:"relative rounded-md overflow-hidden h-24"},d.createElement("img",{src:b,alt:` ${w+1}`,className:"w-full h-full object-cover"}),d.createElement("button",{type:"button",onClick:()=>p(w),className:`absolute top-1 left-1 rounded-full p-1 ${n?"bg-gray-800 text-white":"bg-white text-gray-700"}`},d.createElement(fo,{size:16})))))),d.createElement("div",{className:"flex justify-end space-x-2 space-x-reverse"},d.createElement(Oe,{type:"button",variant:"secondary",onClick:e,className:"ml-2"},""),d.createElement(Oe,{type:"submit",variant:"primary"}," ")))},XYe=()=>{const{id:t}=gB(),e=Lr(),n=Dt(T=>T.user),r=Dt(T=>T.userType),s=Dt(T=>T.logout),i=We(T=>T.darkMode),o=T=>{const[I,P]=T.split(":"),R=parseInt(I,10),D=R>=12?"":"";return`${R%12||12}:${P} ${D}`},{getBookingById:a,updateBookingStatus:l,addReview:c}=xm(),u=My(T=>T.getReviewById),[h,m]=A.useState(null),[p,y]=A.useState(!1),[v,x]=A.useState(null),b=T=>{if(!T||T.status!=="pending")return!1;const I=new Date(`${T.date}T${T.time}`);return new Date>I};A.useEffect(()=>{if(t)try{const T=parseInt(t),I=a(T);if(I){if(console.log("Booking found:",I),b(I)?(console.log(`La reserva #${I.id} ha expirado. Cancelando automticamente.`),l(I.id,"cancelled"),m({...I,status:"cancelled"})):m(I),I.reviewId){const P=u(I.reviewId);P?(console.log("Review found:",P),x(P)):console.log("Review not found with ID:",I.reviewId)}}else console.log("Booking not found with ID:",T)}catch(T){console.error("Error loading booking:",T)}},[t,a,u,l]);const w=T=>{l(parseInt(t),T),m({...h,status:T})},E=T=>{try{const I=parseInt(t),P=c(I,T);P?(console.log("Evaluacin aadida correctamente:",P),y(!1),x(P),m({...h,reviewId:P.id,status:"completed"})):(console.error("No se pudo aadir la evaluacin"),alert("Hubo un problema al aadir la evaluacin. Por favor, intntalo de nuevo."))}catch(I){console.error("Error al enviar la evaluacin:",I),alert("Hubo un error al enviar la evaluacin. Por favor, intntalo de nuevo.")}};if(!n)return d.createElement(wm,null);if(!h){const T=We(I=>I.darkMode);return d.createElement(ds,{user:n,onLogout:s},d.createElement("div",{className:`min-h-screen py-16 ${T?"bg-gray-900":"bg-gradient-to-br from-blue-50 to-indigo-100"} transition-colors duration-300`},d.createElement("div",{className:"container mx-auto px-4 py-12 text-center"},d.createElement("div",{className:`max-w-md mx-auto p-8 rounded-lg shadow-lg ${T?"bg-gray-800":"bg-white/90"} transition-colors duration-300`},d.createElement("div",{className:"mb-6"},d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-20 w-20 mx-auto mb-4 ${T?"text-indigo-400":"text-indigo-500"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},d.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))),d.createElement("h2",{className:`text-2xl font-bold mb-4 ${T?"text-indigo-300":"text-indigo-800"} relative inline-block transition-colors duration-300`},d.createElement("span",{className:"relative z-10"},"    "),d.createElement("span",{className:`absolute bottom-0 left-0 right-0 h-2 ${T?"bg-indigo-500":"bg-indigo-300"} opacity-40 transform -rotate-1 z-0`})),d.createElement("p",{className:`mb-6 ${T?"text-gray-300":"text-gray-600"}`},"     .        ."),d.createElement(Oe,{variant:"primary",onClick:()=>e("/bookings"),className:`text-white flex items-center justify-center gap-2 shadow-md hover:shadow-lg transition-all duration-200 relative overflow-hidden group py-2 px-6 mx-auto ${T?"bg-gradient-to-r from-indigo-700 to-purple-800 hover:from-indigo-800 hover:to-purple-900":"bg-gradient-to-r from-blue-500 to-indigo-500 hover:from-blue-600 hover:to-indigo-600"}`},d.createElement("span",{className:"relative z-10 flex items-center"},d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 ml-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},d.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})),"   "),d.createElement("span",{className:"absolute inset-0 bg-white opacity-20 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-700"}))))))}const N=r==="client",C=r==="craftsman",S=N?h.craftsmanName:h.clientName;return d.createElement(ds,{user:n,onLogout:s},d.createElement("div",{className:`min-h-screen py-8 ${i?"bg-gray-900":"bg-gradient-to-br from-blue-50 to-indigo-100"} transition-colors duration-300`},d.createElement("div",{className:"container mx-auto px-4"},d.createElement("div",{className:"flex justify-between items-center mb-8"},d.createElement("h1",{className:`text-3xl font-bold mb-2 ${i?"text-indigo-300":"text-indigo-800"} relative inline-block transition-colors duration-300`},d.createElement("span",{className:"relative z-10"}," "),d.createElement("span",{className:`absolute bottom-0 left-0 right-0 h-2 ${i?"bg-indigo-500":"bg-indigo-300"} opacity-40 transform -rotate-1 z-0`})),d.createElement(Oe,{variant:"secondary",onClick:()=>e("/profile/my"),className:`text-white flex items-center justify-center gap-2 shadow-md hover:shadow-lg transition-all duration-200 relative overflow-hidden group py-2 px-4 ${i?"bg-gradient-to-r from-indigo-700 to-purple-800 hover:from-indigo-800 hover:to-purple-900":"bg-gradient-to-r from-blue-500 to-indigo-500 hover:from-blue-600 hover:to-indigo-600"}`},d.createElement("span",{className:"relative z-10"},"   "),d.createElement("span",{className:"absolute inset-0 bg-white opacity-20 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-700"}))),d.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6"},d.createElement("div",{className:"md:col-span-2"},d.createElement(pt,{className:`p-6 mb-6 overflow-hidden ${i?"bg-gray-800 text-gray-200":"bg-gradient-to-br from-blue-50 to-indigo-100"} shadow-lg transition-colors duration-300`},d.createElement("h2",{className:`text-xl font-bold mb-4 ${i?"text-indigo-300":"text-indigo-800"} relative inline-block transition-colors duration-300`},d.createElement("span",{className:"relative z-10"}," "),d.createElement("span",{className:`absolute bottom-0 left-0 right-0 h-2 ${i?"bg-indigo-500":"bg-indigo-300"} opacity-40 transform -rotate-1 z-0`})),d.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6"},d.createElement("div",{className:`px-3 py-2 rounded-md shadow-sm ${i?"bg-gray-700/80 border border-gray-600":"bg-white/80 border border-indigo-100"} transition-colors duration-300`},d.createElement("div",{className:"flex items-center"},d.createElement(Pa,{size:20,className:`${i?"text-indigo-400":"text-indigo-500"} ml-2`}),d.createElement("div",null,d.createElement("p",{className:`text-sm ${i?"text-indigo-300":"text-indigo-500"} transition-colors duration-300`},""),d.createElement("p",{className:`font-medium ${i?"text-indigo-200":"text-indigo-700"} transition-colors duration-300`},new Date(h.date).toLocaleDateString("ar-SY"))))),d.createElement("div",{className:`px-3 py-2 rounded-md shadow-sm ${i?"bg-gray-700/80 border border-gray-600":"bg-white/80 border border-indigo-100"} transition-colors duration-300`},d.createElement("div",{className:"flex items-center"},d.createElement(jx,{size:20,className:`${i?"text-indigo-400":"text-indigo-500"} ml-2`}),d.createElement("div",null,d.createElement("p",{className:`text-sm ${i?"text-indigo-300":"text-indigo-500"} transition-colors duration-300`},""),d.createElement("p",{className:`font-medium ${i?"text-indigo-200":"text-indigo-700"} transition-colors duration-300`},o(h.time))))),d.createElement("div",{className:`px-3 py-2 rounded-md shadow-sm ${i?"bg-gray-700/80 border border-gray-600":"bg-white/80 border border-indigo-100"} transition-colors duration-300`},d.createElement("div",{className:"flex items-center"},d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-5 w-5 ${i?"text-indigo-400":"text-indigo-500"} ml-2`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},d.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})),d.createElement("div",null,d.createElement("p",{className:`text-sm ${i?"text-indigo-300":"text-indigo-500"} transition-colors duration-300`},N?"":""),d.createElement("p",{className:`font-medium ${i?"text-indigo-200":"text-indigo-700"} transition-colors duration-300`},S)))),d.createElement("div",{className:`px-3 py-2 rounded-md shadow-sm ${i?"bg-gray-700/80 border border-gray-600":"bg-white/80 border border-indigo-100"} transition-colors duration-300`},d.createElement("div",{className:"flex items-center"},d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-5 w-5 ${i?"text-indigo-400":"text-indigo-500"} ml-2`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},d.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})),d.createElement("div",null,d.createElement("p",{className:`text-sm ${i?"text-indigo-300":"text-indigo-500"} transition-colors duration-300`},""),d.createElement("p",{className:`font-medium ${h.status==="completed"?i?"text-green-400":"text-green-600":h.status==="pending"?i?"text-yellow-400":"text-yellow-600":i?"text-red-400":"text-red-600"} transition-colors duration-300`},h.status==="completed"?"":h.status==="pending"?" ":""))))),d.createElement("div",{className:"mb-6"},d.createElement("h3",{className:`font-bold mb-2 ${i?"text-indigo-300":"text-indigo-700"} transition-colors duration-300 flex items-center`},d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 ml-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},d.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"}))," "),d.createElement("div",{className:`p-3 rounded-md shadow-sm ${i?"bg-gray-700/80 border border-gray-600 text-gray-300":"bg-white/80 border border-indigo-100 text-gray-700"} transition-colors duration-300 max-h-40 overflow-y-auto`},d.createElement("p",{className:"leading-relaxed break-words"},h.description))),h.status==="pending"&&d.createElement("div",{className:"flex flex-wrap gap-2"},C&&d.createElement(Oe,{variant:"primary",onClick:()=>w("completed"),className:`text-white flex items-center justify-center gap-2 shadow-md hover:shadow-lg transition-all duration-200 relative overflow-hidden group py-2 px-4 ${i?"bg-gradient-to-r from-green-600 to-emerald-700 hover:from-green-700 hover:to-emerald-800":"bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700"}`},d.createElement("span",{className:"relative z-10 flex items-center"},d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 ml-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},d.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})),"  "),d.createElement("span",{className:"absolute inset-0 bg-white opacity-20 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-700"})),d.createElement(Oe,{variant:"outline",onClick:()=>w("cancelled"),className:`flex items-center justify-center gap-2 shadow-md hover:shadow-lg transition-all duration-200 relative overflow-hidden group py-2 px-4 ${i?"bg-gradient-to-r from-red-600 to-rose-700 hover:from-red-700 hover:to-rose-800 text-white":"bg-gradient-to-r from-red-500 to-rose-600 hover:from-red-600 hover:to-rose-700 text-white"}`},d.createElement("span",{className:"relative z-10 flex items-center"},d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 ml-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},d.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}))," "),d.createElement("span",{className:"absolute inset-0 bg-white opacity-20 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-700"}))),h.status==="completed"&&N&&!h.reviewId&&d.createElement(Oe,{variant:"primary",onClick:()=>y(!0),className:`text-white flex items-center justify-center gap-2 shadow-md hover:shadow-lg transition-all duration-200 relative overflow-hidden group py-2 px-4 ${i?"bg-gradient-to-r from-indigo-700 to-purple-800 hover:from-indigo-800 hover:to-purple-900":"bg-gradient-to-r from-blue-500 to-indigo-500 hover:from-blue-600 hover:to-indigo-600"}`},d.createElement("span",{className:"relative z-10 flex items-center"},d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 ml-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},d.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"}))," "),d.createElement("span",{className:"absolute inset-0 bg-white opacity-20 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-700"})),h.status==="completed"&&N&&h.reviewId&&d.createElement("div",{className:`mt-4 p-3 rounded-md ${i?"bg-green-800/30":"bg-green-100"} border ${i?"border-green-700":"border-green-300"} shadow-sm`},d.createElement("p",{className:`text-sm ${i?"text-green-400":"text-green-700"} flex items-center`},d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 ml-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},d.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})),"    "))),v&&d.createElement(pt,{className:`p-6 overflow-hidden ${i?"bg-gray-800 text-gray-200":"bg-gradient-to-br from-blue-50 to-indigo-100"} shadow-lg transition-colors duration-300`},d.createElement("h2",{className:`text-xl font-bold mb-4 ${i?"text-indigo-300":"text-indigo-800"} relative inline-block transition-colors duration-300`},d.createElement("span",{className:"relative z-10"},""),d.createElement("span",{className:`absolute bottom-0 left-0 right-0 h-2 ${i?"bg-indigo-500":"bg-indigo-300"} opacity-40 transform -rotate-1 z-0`})),d.createElement("div",{className:"flex items-center mb-4"},d.createElement("div",{className:"flex ml-2"},[1,2,3,4,5].map(T=>d.createElement(Yn,{key:T,size:20,className:`${T<=v.overallRating?`${i?"text-yellow-400 fill-yellow-400":"text-yellow-500 fill-yellow-500"}`:`${i?"text-gray-600":"text-gray-300"}`} transition-colors duration-300`}))),d.createElement("span",{className:`font-bold ${i?"text-yellow-400":"text-yellow-600"} transition-colors duration-300`},v.overallRating,"/5")),d.createElement("div",{className:"grid grid-cols-2 gap-4 mb-4"},d.createElement("div",{className:`flex flex-col p-3 rounded-md shadow-sm ${i?"bg-gray-700/80 border border-gray-600":"bg-white/80 border border-indigo-100"} transition-colors duration-300`},d.createElement("span",{className:`text-sm font-medium ${i?"text-indigo-300":"text-indigo-600"} transition-colors duration-300 mb-1`}," "),d.createElement("div",{className:"flex items-center"},d.createElement("div",{className:"flex"},[1,2,3,4,5].map(T=>d.createElement(Yn,{key:T,size:16,className:`${T<=v.qualityRating?`${i?"text-yellow-400 fill-yellow-400":"text-yellow-500 fill-yellow-500"}`:`${i?"text-gray-600":"text-gray-300"}`} transition-colors duration-300`}))),d.createElement("span",{className:"mr-1 text-sm font-medium"},v.qualityRating,"/5"))),d.createElement("div",{className:`flex flex-col p-3 rounded-md shadow-sm ${i?"bg-gray-700/80 border border-gray-600":"bg-white/80 border border-indigo-100"} transition-colors duration-300`},d.createElement("span",{className:`text-sm font-medium ${i?"text-indigo-300":"text-indigo-600"} transition-colors duration-300 mb-1`}," "),d.createElement("div",{className:"flex items-center"},d.createElement("div",{className:"flex"},[1,2,3,4,5].map(T=>d.createElement(Yn,{key:T,size:16,className:`${T<=v.punctualityRating?`${i?"text-yellow-400 fill-yellow-400":"text-yellow-500 fill-yellow-500"}`:`${i?"text-gray-600":"text-gray-300"}`} transition-colors duration-300`}))),d.createElement("span",{className:"mr-1 text-sm font-medium"},v.punctualityRating,"/5"))),d.createElement("div",{className:`flex flex-col p-3 rounded-md shadow-sm ${i?"bg-gray-700/80 border border-gray-600":"bg-white/80 border border-indigo-100"} transition-colors duration-300`},d.createElement("span",{className:`text-sm font-medium ${i?"text-indigo-300":"text-indigo-600"} transition-colors duration-300 mb-1`},"  "),d.createElement("div",{className:"flex items-center"},d.createElement("div",{className:"flex"},[1,2,3,4,5].map(T=>d.createElement(Yn,{key:T,size:16,className:`${T<=v.priceRating?`${i?"text-yellow-400 fill-yellow-400":"text-yellow-500 fill-yellow-500"}`:`${i?"text-gray-600":"text-gray-300"}`} transition-colors duration-300`}))),d.createElement("span",{className:"mr-1 text-sm font-medium"},v.priceRating,"/5"))),d.createElement("div",{className:`flex flex-col p-3 rounded-md shadow-sm ${i?"bg-gray-700/80 border border-gray-600":"bg-white/80 border border-indigo-100"} transition-colors duration-300`},d.createElement("span",{className:`text-sm font-medium ${i?"text-indigo-300":"text-indigo-600"} transition-colors duration-300 mb-1`},""),d.createElement("div",{className:"flex items-center"},d.createElement("div",{className:"flex"},[1,2,3,4,5].map(T=>d.createElement(Yn,{key:T,size:16,className:`${T<=v.communicationRating?`${i?"text-yellow-400 fill-yellow-400":"text-yellow-500 fill-yellow-500"}`:`${i?"text-gray-600":"text-gray-300"}`} transition-colors duration-300`}))),d.createElement("span",{className:"mr-1 text-sm font-medium"},v.communicationRating,"/5")))),d.createElement("div",{className:`p-4 rounded-md shadow-sm ${i?"bg-gray-700/80 border border-gray-600":"bg-white/80 border border-indigo-100"} transition-colors duration-300 mt-4`},d.createElement("div",{className:"flex items-center mb-2"},d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-5 w-5 ml-2 ${i?"text-indigo-400":"text-indigo-500"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},d.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})),d.createElement("span",{className:`font-medium ${i?"text-indigo-300":"text-indigo-700"} transition-colors duration-300`}," ")),d.createElement("p",{className:`${i?"text-gray-300":"text-gray-700"} leading-relaxed transition-colors duration-300 mb-3 pr-2 border-r-2 ${i?"border-indigo-500/30":"border-indigo-300/50"}`},v.comment),d.createElement("div",{className:"flex items-center justify-end"},d.createElement(Pa,{size:14,className:`ml-1 ${i?"text-gray-400":"text-gray-500"}`}),d.createElement("p",{className:`text-sm ${i?"text-gray-400":"text-gray-500"} transition-colors duration-300`},new Date(v.createdAt).toLocaleDateString("ar-SY")))),v.images&&v.images.length>0&&d.createElement("div",{className:`mt-4 p-4 rounded-md shadow-sm ${i?"bg-gray-700/80 border border-gray-600":"bg-white/80 border border-indigo-100"} transition-colors duration-300`},d.createElement("h3",{className:`font-bold mb-3 ${i?"text-indigo-300":"text-indigo-700"} transition-colors duration-300`},d.createElement("div",{className:"flex items-center"},d.createElement(Qie,{size:18,className:`ml-1 ${i?"text-indigo-400":"text-indigo-500"}`}),"  ")),d.createElement("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3"},v.images.map((T,I)=>d.createElement("div",{key:I,className:"rounded-md overflow-hidden h-24 shadow-md hover:shadow-lg transition-all duration-300 transform hover:scale-105"},d.createElement("img",{src:T,alt:` ${I+1}`,className:"w-full h-full object-cover"}))))))),d.createElement("div",{className:"md:col-span-1"},d.createElement(pt,{className:`p-6 overflow-hidden ${i?"bg-gray-800 text-gray-200":"bg-gradient-to-br from-blue-50 to-indigo-100"} shadow-lg transition-colors duration-300`},d.createElement("h2",{className:`text-xl font-bold mb-4 ${i?"text-indigo-300":"text-indigo-800"} relative inline-block transition-colors duration-300`},d.createElement("span",{className:"relative z-10"}," "),d.createElement("span",{className:`absolute bottom-0 left-0 right-0 h-2 ${i?"bg-indigo-500":"bg-indigo-300"} opacity-40 transform -rotate-1 z-0`})),d.createElement("div",{className:`mb-4 p-3 rounded-md shadow-sm ${i?"bg-gray-700/80 border border-gray-600":"bg-white/80 border border-indigo-100"} transition-colors duration-300`},d.createElement("h3",{className:`font-bold mb-2 ${i?"text-indigo-300":"text-indigo-700"} transition-colors duration-300 flex items-center`},d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-5 w-5 ml-1 ${i?"text-indigo-400":"text-indigo-500"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},d.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})),N?"":""),d.createElement("p",{className:`mb-1 ${i?"text-indigo-200":"text-indigo-800"} font-medium transition-colors duration-300`},S),d.createElement("p",{className:`mb-4 flex items-center ${i?"text-gray-400":"text-gray-600"} transition-colors duration-300`},d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 ml-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},d.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})),N?h.craftsmanPhone:h.clientPhone),d.createElement("div",{className:"grid grid-cols-2 gap-2"},d.createElement(Oe,{variant:"primary",className:`text-white flex items-center justify-center gap-2 shadow-md hover:shadow-lg transition-all duration-200 relative overflow-hidden group py-2 ${i?"bg-gradient-to-r from-green-600 to-emerald-700 hover:from-green-700 hover:to-emerald-800":"bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700"}`,onClick:()=>window.open(`tel:${N?h.craftsmanPhone:h.clientPhone}`)},d.createElement("span",{className:"relative z-10 flex items-center"},d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 ml-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},d.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})),""),d.createElement("span",{className:"absolute inset-0 bg-white opacity-20 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-700"})),d.createElement(Oe,{variant:"secondary",className:`text-white flex items-center justify-center gap-2 shadow-md hover:shadow-lg transition-all duration-200 relative overflow-hidden group py-2 ${i?"bg-gradient-to-r from-indigo-700 to-purple-800 hover:from-indigo-800 hover:to-purple-900":"bg-gradient-to-r from-blue-500 to-indigo-500 hover:from-blue-600 hover:to-indigo-600"}`,onClick:()=>window.open(`sms:${N?h.craftsmanPhone:h.clientPhone}`)},d.createElement("span",{className:"relative z-10 flex items-center"},d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 ml-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},d.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"}))," "),d.createElement("span",{className:"absolute inset-0 bg-white opacity-20 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-700"})))),d.createElement("div",{className:`mt-4 p-3 rounded-md shadow-sm ${i?"bg-gray-700/80 border border-gray-600":"bg-white/80 border border-indigo-100"} transition-colors duration-300`},d.createElement("h3",{className:`font-bold mb-2 ${i?"text-indigo-300":"text-indigo-700"} transition-colors duration-300 flex items-center`},d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-5 w-5 ml-1 ${i?"text-indigo-400":"text-indigo-500"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},d.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})),""),d.createElement("div",{className:`p-2 rounded-md ${i?"bg-indigo-900/30":"bg-indigo-100/70"} transition-colors duration-300`},d.createElement("p",{className:`text-sm ${i?"text-gray-300":"text-gray-700"} transition-colors duration-300 leading-relaxed`},"   .           .")))))))),p&&d.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-[100] p-4 backdrop-blur-sm"},d.createElement(At.div,{className:`${i?"bg-gradient-to-br from-gray-800 to-gray-900 text-gray-200":"bg-gradient-to-br from-white to-indigo-50"} rounded-lg shadow-xl w-full max-w-2xl transition-colors duration-300 border ${i?"border-indigo-800/30":"border-indigo-200"}`,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1}},d.createElement("div",{className:"p-6"},d.createElement("div",{className:"flex justify-between items-center mb-6"},d.createElement("h2",{className:`text-xl font-bold ${i?"text-indigo-300":"text-indigo-800"} relative inline-block transition-colors duration-300`},d.createElement("span",{className:"relative z-10"}," "),d.createElement("span",{className:`absolute bottom-0 left-0 right-0 h-2 ${i?"bg-indigo-500":"bg-indigo-300"} opacity-40 transform -rotate-1 z-0`})),d.createElement("button",{onClick:()=>y(!1),className:`${i?"text-gray-400 hover:text-gray-300":"text-gray-500 hover:text-gray-700"} transition-colors duration-300 p-1 rounded-full hover:bg-gray-100/10`},d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},d.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})))),d.createElement(ZYe,{onSubmit:E,onCancel:()=>y(!1)})))))},YYe=()=>{Lr();const t=Dt(P=>P.user),e=Dt(P=>P.userType),n=Dt(P=>P.logout),r=We(P=>P.darkMode),{getUserBookings:s,updateBookingStatus:i}=xm(),[o,a]=A.useState([]),[l,c]=A.useState("all"),[u,h]=A.useState(null),[m,p]=A.useState(!1),[y,v]=A.useState(1),[x,b]=A.useState(5),w=P=>{const[R,D]=P.split(":"),B=parseInt(R,10),Z=B>=12?"":"";return`${B%12||12}:${D} ${Z}`},E=P=>{if(P.status!=="pending")return!1;const R=new Date(`${P.date}T${P.time}`);return new Date>R},N=P=>{let R=!1;return P.forEach(D=>{E(D)&&(console.log(`Cancelando automticamente la reserva #${D.id} por expiracin de tiempo`),i(D.id,"cancelled"),R=!0)}),R};if(A.useEffect(()=>{if(t){const P=s(t.id,e);if(N(P)){const D=s(t.id,e);a(D)}else a(P)}},[t,e,s,i]),!t)return d.createElement(wm,null);const C=o.filter(P=>l==="all"?!0:P.status===l),S=Math.ceil(C.length/x),T=C.slice((y-1)*x,y*x);A.useEffect(()=>{y>S&&S>0&&v(1)},[l,S,y]);const I=P=>{v(P),window.scrollTo({top:0,behavior:"smooth"})};return d.createElement(ds,{user:t,onLogout:n},d.createElement("div",{className:`min-h-screen py-8 ${r?"bg-gray-900":"bg-gradient-to-br from-blue-50 to-indigo-100"} transition-colors duration-300`},d.createElement("div",{className:"container mx-auto px-4"},d.createElement("div",{className:"mb-8"},d.createElement("h1",{className:`text-3xl font-bold mb-2 ${r?"text-indigo-300":"text-indigo-800"} relative inline-block transition-colors duration-300`},d.createElement("span",{className:"relative z-10"},""),d.createElement("span",{className:`absolute bottom-0 left-0 right-0 h-2 ${r?"bg-indigo-500":"bg-indigo-300"} opacity-40 transform -rotate-1 z-0`})),d.createElement("p",{className:`${r?"text-indigo-400":"text-indigo-600"} transition-colors duration-300`},e==="client"?"    ":"    ")),d.createElement("div",{className:"mb-6 flex flex-wrap justify-between"},d.createElement("div",{className:"flex flex-wrap gap-2"},d.createElement("button",{onClick:()=>c("all"),className:`px-4 py-2 rounded-md transition-all duration-200 ${l==="all"?`bg-gradient-to-r ${r?"from-indigo-700 to-purple-800":"from-blue-500 to-indigo-500"} text-white shadow-md`:`${r?"bg-gray-800 text-indigo-300 hover:bg-gray-700":"bg-white text-indigo-700 hover:bg-indigo-50"}`}`}," (",o.length,")"),d.createElement("button",{onClick:()=>c("pending"),className:`px-4 py-2 rounded-md transition-all duration-200 ${l==="pending"?`bg-gradient-to-r ${r?"from-yellow-600 to-amber-700":"from-yellow-400 to-amber-500"} text-white shadow-md`:`${r?"bg-gray-800 text-yellow-400 hover:bg-gray-700":"bg-white text-yellow-700 hover:bg-yellow-50"}`}`},"  (",o.filter(P=>P.status==="pending").length,")"),d.createElement("button",{onClick:()=>c("completed"),className:`px-4 py-2 rounded-md transition-all duration-200 ${l==="completed"?`bg-gradient-to-r ${r?"from-green-600 to-emerald-700":"from-green-500 to-emerald-600"} text-white shadow-md`:`${r?"bg-gray-800 text-green-400 hover:bg-gray-700":"bg-white text-green-700 hover:bg-green-50"}`}`}," (",o.filter(P=>P.status==="completed").length,")"),d.createElement("button",{onClick:()=>c("cancelled"),className:`px-4 py-2 rounded-md transition-all duration-200 ${l==="cancelled"?`bg-gradient-to-r ${r?"from-red-600 to-rose-700":"from-red-500 to-rose-600"} text-white shadow-md`:`${r?"bg-gray-800 text-red-400 hover:bg-gray-700":"bg-white text-red-700 hover:bg-red-50"}`}`}," (",o.filter(P=>P.status==="cancelled").length,")")),C.length>5&&d.createElement("div",{className:`flex items-center gap-2 ${r?"text-gray-300":"text-gray-700"}`},d.createElement("span",{className:"text-sm"},"   :"),d.createElement("select",{value:x,onChange:P=>{b(Number(P.target.value)),v(1)},className:`rounded-md border px-2 py-1 text-sm ${r?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-700"}`},d.createElement("option",{value:5},"5"),d.createElement("option",{value:10},"10"),d.createElement("option",{value:15},"15"),d.createElement("option",{value:20},"20")))),C.length>0?d.createElement("div",{className:"space-y-4"},T.map(P=>d.createElement(At.div,{key:P.id,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3}},d.createElement(pt,{className:`p-6 ${r?"bg-gray-800 text-gray-200":"bg-gradient-to-br from-blue-50 to-indigo-100"} shadow-md hover:shadow-lg transition-all duration-300`},d.createElement("div",{className:"flex flex-col md:flex-row justify-between items-start gap-4"},d.createElement("div",{className:"flex-1 w-full overflow-hidden"},d.createElement("div",{className:"flex items-center mb-2"},d.createElement("h3",{className:`text-xl font-bold ${r?"text-indigo-300":"text-indigo-800"} ml-2 transition-colors duration-300`},e==="client"?P.craftsmanName:P.clientName),d.createElement("span",{className:`px-3 py-1 rounded-full text-sm font-medium shadow-sm ${P.status==="completed"?"bg-gradient-to-r from-green-100 to-green-200 text-green-800 border border-green-300":P.status==="pending"?"bg-gradient-to-r from-yellow-100 to-yellow-200 text-yellow-800 border border-yellow-300":"bg-gradient-to-r from-red-100 to-red-200 text-red-800 border border-red-300"}`},P.status==="completed"?"":P.status==="pending"?" ":"")),d.createElement("div",{className:"mb-4 flex flex-wrap gap-4"},d.createElement("div",{className:`px-3 py-2 rounded-md shadow-sm ${r?"bg-gray-700/80 border border-gray-600":"bg-white/80 border border-indigo-100"} transition-colors duration-300`},d.createElement("span",{className:`block text-sm ${r?"text-indigo-300":"text-indigo-500"} transition-colors duration-300`},""),d.createElement("span",{className:`font-medium ${r?"text-indigo-200":"text-indigo-700"} transition-colors duration-300`},P.endDate?`${new Date(P.date).toLocaleDateString("ar-SY")} - ${new Date(P.endDate).toLocaleDateString("ar-SY")}`:new Date(P.date).toLocaleDateString("ar-SY"))),d.createElement("div",{className:`px-3 py-2 rounded-md shadow-sm ${r?"bg-gray-700/80 border border-gray-600":"bg-white/80 border border-indigo-100"} transition-colors duration-300`},d.createElement("span",{className:`block text-sm ${r?"text-indigo-300":"text-indigo-500"} transition-colors duration-300`},""),d.createElement("span",{className:`font-medium ${r?"text-indigo-200":"text-indigo-700"} transition-colors duration-300`},P.endTime?`${w(P.time)} - ${w(P.endTime)}`:w(P.time))),d.createElement("div",{className:`px-3 py-2 rounded-md shadow-sm ${r?"bg-gray-700/80 border border-gray-600":"bg-white/80 border border-indigo-100"} transition-colors duration-300`},d.createElement("span",{className:`block text-sm ${r?"text-indigo-300":"text-indigo-500"} transition-colors duration-300`},"  "),d.createElement("span",{className:`font-medium ${r?"text-indigo-200":"text-indigo-700"} transition-colors duration-300`},new Date(P.createdAt).toLocaleDateString("ar-SY")))),d.createElement("div",{className:`p-3 rounded-md shadow-sm mb-4 ${r?"bg-gray-700/80 border border-gray-600":"bg-white/80 border border-indigo-100"} transition-colors duration-300`},d.createElement("span",{className:`block text-sm mb-1 ${r?"text-indigo-300":"text-indigo-500"} transition-colors duration-300`}," "),d.createElement("div",{className:"max-h-24 overflow-y-auto"},d.createElement("p",{className:`${r?"text-indigo-200":"text-indigo-700"} transition-colors duration-300 break-words`},P.description))),P.review&&d.createElement("div",{className:`p-3 rounded-md shadow-sm ${r?"bg-yellow-900/30 border border-yellow-800":"bg-yellow-50 border border-yellow-200"} transition-colors duration-300`},d.createElement("span",{className:`block text-sm mb-1 ${r?"text-yellow-400":"text-yellow-700"} transition-colors duration-300`},""),d.createElement("div",{className:"flex items-center mb-1"},[1,2,3,4,5].map(R=>d.createElement("svg",{key:R,xmlns:"http://www.w3.org/2000/svg",className:`h-4 w-4 ${R<=P.review.rating?"text-yellow-500 fill-yellow-500":"text-gray-300"}`,viewBox:"0 0 24 24",stroke:"currentColor"},d.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"}))),d.createElement("span",{className:`mr-2 ${r?"text-indigo-300":"text-indigo-700"} transition-colors duration-300`},P.review.rating,"/5")),d.createElement("p",{className:`${r?"text-indigo-200":"text-indigo-700"} transition-colors duration-300`},P.review.comment))),d.createElement("div",{className:"md:self-center mt-2 md:mt-0"},d.createElement(Oe,{variant:"primary",className:`text-white flex items-center justify-center gap-2 shadow-md hover:shadow-lg transition-all duration-200 relative overflow-hidden group py-2 px-4 ${r?"bg-gradient-to-r from-indigo-700 to-purple-800 hover:from-indigo-800 hover:to-purple-900":"bg-gradient-to-r from-blue-500 to-indigo-500 hover:from-blue-600 hover:to-indigo-600"}`,onClick:()=>{h(P),p(!0)}},d.createElement("span",{className:"relative z-10"}," "),d.createElement("span",{className:"absolute inset-0 bg-white opacity-20 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-700"}))))))),S>1&&d.createElement("div",{className:"mt-8 flex flex-col items-center"},d.createElement("div",{className:`mb-3 text-sm ${r?"text-gray-300":"text-gray-600"}`}," ",(y-1)*x+1," "," ",Math.min(y*x,C.length)," ","  ",C.length," "),d.createElement("div",{className:`flex items-center gap-2 rounded-lg p-2 ${r?"bg-gray-800":"bg-white"} shadow-md`},d.createElement("button",{onClick:()=>I(y-1),disabled:y===1,className:`w-10 h-10 flex items-center justify-center rounded-md transition-colors ${y===1?`${r?"bg-gray-700 text-gray-500":"bg-gray-100 text-gray-400"} cursor-not-allowed`:`${r?"bg-gray-700 text-white hover:bg-gray-600":"bg-indigo-100 text-indigo-700 hover:bg-indigo-200"}`}`,"aria-label":" "},d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},d.createElement("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"}))),Array.from({length:Math.min(5,S)},(P,R)=>{let D;return S<=5||y<=3?D=R+1:y>=S-2?D=S-4+R:D=y-2+R,d.createElement("button",{key:D,onClick:()=>I(D),className:`w-10 h-10 flex items-center justify-center rounded-md transition-colors ${y===D?`${r?"bg-indigo-600 text-white":"bg-indigo-500 text-white"}`:`${r?"bg-gray-700 text-white hover:bg-gray-600":"bg-indigo-100 text-indigo-700 hover:bg-indigo-200"}`}`,"aria-label":` ${D}`,"aria-current":y===D?"page":void 0},D)}),d.createElement("button",{onClick:()=>I(y+1),disabled:y===S,className:`w-10 h-10 flex items-center justify-center rounded-md transition-colors ${y===S?`${r?"bg-gray-700 text-gray-500":"bg-gray-100 text-gray-400"} cursor-not-allowed`:`${r?"bg-gray-700 text-white hover:bg-gray-600":"bg-indigo-100 text-indigo-700 hover:bg-indigo-200"}`}`,"aria-label":" "},d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 transform rotate-180",viewBox:"0 0 20 20",fill:"currentColor"},d.createElement("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})))))):d.createElement(pt,{className:`p-6 text-center ${r?"bg-gray-800 text-gray-200":"bg-gradient-to-br from-blue-50 to-indigo-100"} shadow-md transition-colors duration-300`},d.createElement("p",{className:`${r?"text-indigo-400":"text-indigo-600"} mb-4 transition-colors duration-300`},l==="all"?"     ":l==="pending"?"    ":l==="completed"?"   ":"   "),l==="all"&&e==="client"&&d.createElement(at,{to:"/search"},d.createElement(Oe,{variant:"primary",className:`text-white flex items-center justify-center gap-2 shadow-md hover:shadow-lg transition-all duration-200  relative overflow-hidden group py-2 px-4 ${r?"bg-gradient-to-r from-indigo-700 to-purple-800 hover:from-indigo-800 hover:to-purple-900":"bg-gradient-to-r from-blue-500 to-indigo-500 hover:from-blue-600 hover:to-indigo-600"}`},d.createElement("span",{className:"relative z-10"},"  "),d.createElement("span",{className:"absolute inset-0 bg-white opacity-20 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-700"})))))),m&&u&&d.createElement(LK,{booking:u,onClose:()=>{p(!1),h(null);const P=s(t.id,e);a(P)},userType:e}))},JYe=()=>{const t=Lr(),e=Dt(N=>N.user),n=Dt(N=>N.logout),r=We(N=>N.darkMode),{notifications:s,markAsRead:i,markAllAsRead:o,deleteNotification:a,clearAllNotifications:l}=Lu(),[c,u]=A.useState("all"),[h,m]=A.useState(1),p=10;if(!e)return d.createElement(wm,null);const y=s.filter(N=>{if(c==="all")return!0;if(c==="unread")return!N.read;switch(c){case"bookings":return[Os.BOOKING_CREATED,Os.BOOKING_ACCEPTED,Os.BOOKING_REJECTED,Os.BOOKING_COMPLETED,Os.BOOKING_CANCELLED].includes(N.type);case"reviews":return N.type===Os.REVIEW_RECEIVED;case"system":return N.type===Os.SYSTEM;default:return!0}}),v=Math.ceil(y.length/p),x=y.slice((h-1)*p,h*p),b=N=>{switch(N){case"check-circle":return d.createElement(E1,{size:18,className:"text-green-500"});case"x-circle":return d.createElement(jT,{size:18,className:"text-red-500"});case"check-square":return d.createElement(a8,{size:18,className:"text-green-500"});case"x-square":return d.createElement(c8,{size:18,className:"text-red-500"});case"clipboard-list":return d.createElement(UT,{size:18,className:"text-indigo-500"});case"clipboard-check":return d.createElement(s8,{size:18,className:"text-indigo-500"});case"star":return d.createElement(Yn,{size:18,className:"text-yellow-500"});default:return d.createElement(i0,{size:18,className:"text-indigo-500"})}},w=N=>new Date(N).toLocaleDateString("ar-SY",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}),E=N=>{var C;i(N.id),(C=N.data)!=null&&C.bookingId&&t(`/booking/${N.data.bookingId}`)};return d.createElement(ds,{user:e,onLogout:n},d.createElement("div",{className:`min-h-screen py-8 ${r?"bg-gray-900":"bg-gradient-to-br from-blue-50 to-indigo-100"} transition-colors duration-300`},d.createElement("div",{className:"container mx-auto px-4"},d.createElement("div",{className:"mb-8"},d.createElement("h1",{className:`text-3xl font-bold mb-2 ${r?"text-indigo-300":"text-indigo-800"} relative inline-block transition-colors duration-300`},d.createElement("span",{className:"relative z-10"},""),d.createElement("span",{className:`absolute bottom-0 left-0 right-0 h-2 ${r?"bg-indigo-500":"bg-indigo-300"} opacity-40 transform -rotate-1 z-0`})),d.createElement("p",{className:`${r?"text-indigo-400":"text-indigo-600"} transition-colors duration-300`},"     ")),d.createElement("div",{className:"mb-6 flex flex-wrap gap-2"},d.createElement("button",{onClick:()=>{u("all"),m(1)},className:`px-4 py-2 rounded-md transition-all duration-200 ${c==="all"?`bg-gradient-to-r ${r?"from-indigo-700 to-purple-800":"from-blue-500 to-indigo-500"} text-white shadow-md`:`${r?"bg-gray-800 text-indigo-300 hover:bg-gray-700":"bg-white text-indigo-700 hover:bg-indigo-50"}`}`}," (",s.length,")"),d.createElement("button",{onClick:()=>{u("unread"),m(1)},className:`px-4 py-2 rounded-md transition-all duration-200 ${c==="unread"?`bg-gradient-to-r ${r?"from-blue-700 to-indigo-800":"from-blue-500 to-indigo-500"} text-white shadow-md`:`${r?"bg-gray-800 text-blue-300 hover:bg-gray-700":"bg-white text-blue-700 hover:bg-blue-50"}`}`},"  (",s.filter(N=>!N.read).length,")"),d.createElement("button",{onClick:()=>{u("bookings"),m(1)},className:`px-4 py-2 rounded-md transition-all duration-200 ${c==="bookings"?`bg-gradient-to-r ${r?"from-indigo-700 to-blue-800":"from-indigo-500 to-blue-500"} text-white shadow-md`:`${r?"bg-gray-800 text-indigo-300 hover:bg-gray-700":"bg-white text-indigo-700 hover:bg-indigo-50"}`}`},""),d.createElement("button",{onClick:()=>{u("reviews"),m(1)},className:`px-4 py-2 rounded-md transition-all duration-200 ${c==="reviews"?`bg-gradient-to-r ${r?"from-yellow-700 to-amber-800":"from-yellow-500 to-amber-500"} text-white shadow-md`:`${r?"bg-gray-800 text-yellow-300 hover:bg-gray-700":"bg-white text-yellow-700 hover:bg-yellow-50"}`}`},""),d.createElement("button",{onClick:()=>{u("system"),m(1)},className:`px-4 py-2 rounded-md transition-all duration-200 ${c==="system"?`bg-gradient-to-r ${r?"from-indigo-600 to-indigo-800":"from-indigo-500 to-indigo-800"} text-white shadow-md`:`${r?"bg-gray-800 text-purple-300 hover:bg-indigo-900/30":"bg-white text-purple-700 hover:bg-indigo-100"}`}`},""),s.length>0&&d.createElement("button",{onClick:()=>{window.confirm("      ")&&l()},className:"flex items-center gap-1 text-white hover:text-white transition-all duration-200 hover:scale-105 transform border border-transparent bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 px-3 py-2 rounded-md relative overflow-hidden group shadow-md hover:shadow-lg mr-auto"},d.createElement("span",{className:"relative z-10 flex items-center gap-1"},d.createElement(k1,{size:18}),d.createElement("span",null," ")),d.createElement("span",{className:"absolute inset-0 bg-white opacity-20 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-700"}))),y.length>0?d.createElement("div",{className:"space-y-4"},x.map(N=>d.createElement(At.div,{key:N.id,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3}},d.createElement(pt,{className:`p-4 ${N.read?r?"bg-gray-800 text-gray-200":"bg-white":r?"bg-gray-700 text-gray-200 border-r-4 border-indigo-500":"bg-blue-50 border-r-4 border-indigo-500"} shadow-md hover:shadow-lg transition-all duration-300`},d.createElement("div",{className:"flex justify-between"},d.createElement("div",{className:"flex-1 cursor-pointer",onClick:()=>E(N)},d.createElement("div",{className:"flex items-start"},d.createElement("div",{className:"ml-3 mt-1"},b(N.icon)),d.createElement("div",null,d.createElement("h3",{className:`font-bold ${r?"text-indigo-300":"text-indigo-800"} transition-colors duration-300`},N.title),d.createElement("p",{className:`${r?"text-gray-300":"text-gray-700"} transition-colors duration-300 mb-2`},N.message),d.createElement("p",{className:`text-xs ${r?"text-gray-400":"text-gray-500"} transition-colors duration-300`},w(N.timestamp))))),d.createElement("div",{className:"flex items-start space-x-2"},!N.read&&d.createElement("button",{onClick:()=>i(N.id),className:`p-2 rounded-full ${r?"hover:bg-gray-700 text-gray-300":"hover:bg-gray-100 text-gray-600"} transition-colors`,title:" "},d.createElement(E1,{size:18})),d.createElement("button",{onClick:()=>a(N.id),className:`p-2 rounded-full ${r?"hover:bg-red-900/50 text-gray-300 hover:text-red-400":"hover:bg-red-100 text-gray-600 hover:text-red-600"} transition-all duration-200 group`,title:""},d.createElement(k1,{size:18,className:"transition-transform group-hover:scale-110"}))))))),v>1&&d.createElement("div",{className:"mt-6 flex justify-center"},d.createElement("div",{className:`flex items-center gap-2 rounded-lg p-2 ${r?"bg-gray-800":"bg-white"} shadow-md`},d.createElement("button",{onClick:()=>m(N=>Math.max(N-1,1)),disabled:h===1,className:`w-10 h-10 flex items-center justify-center rounded-md transition-colors ${h===1?`${r?"bg-gray-700 text-gray-500":"bg-gray-100 text-gray-400"} cursor-not-allowed`:`${r?"bg-gray-700 text-white hover:bg-gray-600":"bg-indigo-100 text-indigo-700 hover:bg-indigo-200"}`}`,"aria-label":" "},d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},d.createElement("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"}))),Array.from({length:Math.min(5,v)},(N,C)=>{let S;return v<=5||h<=3?S=C+1:h>=v-2?S=v-4+C:S=h-2+C,d.createElement("button",{key:S,onClick:()=>m(S),className:`w-10 h-10 flex items-center justify-center rounded-md transition-colors ${h===S?`${r?"bg-indigo-600 text-white":"bg-indigo-500 text-white"}`:`${r?"bg-gray-700 text-white hover:bg-gray-600":"bg-indigo-100 text-indigo-700 hover:bg-indigo-200"}`}`,"aria-label":` ${S}`,"aria-current":h===S?"page":void 0},S)}),d.createElement("button",{onClick:()=>m(N=>Math.min(N+1,v)),disabled:h===v,className:`w-10 h-10 flex items-center justify-center rounded-md transition-colors ${h===v?`${r?"bg-gray-700 text-gray-500":"bg-gray-100 text-gray-400"} cursor-not-allowed`:`${r?"bg-gray-700 text-white hover:bg-gray-600":"bg-indigo-100 text-indigo-700 hover:bg-indigo-200"}`}`,"aria-label":" "},d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 transform rotate-180",viewBox:"0 0 20 20",fill:"currentColor"},d.createElement("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})))))):d.createElement(pt,{className:`p-6 text-center ${r?"bg-gray-800 text-gray-200":"bg-white"} shadow-md transition-colors duration-300`},d.createElement("p",{className:`${r?"text-indigo-400":"text-indigo-600"} mb-4 transition-colors duration-300`},"  "," ",c!=="all"?"  ":"")))))},QYe=()=>{const t=Dt(l=>l.user),e=Dt(l=>l.logout),[n,r]=A.useState([{id:1,name:" ",profession:"",specialization:" ",date:"2023-05-15",status:"pending"},{id:2,name:" ",profession:"",specialization:" ",date:"2023-05-16",status:"pending"},{id:3,name:" ",profession:" ",specialization:" ",date:"2023-05-17",status:"pending"}]),[s,i]=A.useState({totalCraftsmen:156,totalClients:342,totalBookings:523,pendingBookings:48,completedBookings:475,totalReviews:412,averageRating:4.7}),o=l=>{r(n.map(c=>c.id===l?{...c,status:"approved"}:c))},a=l=>{r(n.map(c=>c.id===l?{...c,status:"rejected"}:c))};return d.createElement(ds,{user:t,onLogout:e},d.createElement("div",{className:"bg-gray-50 min-h-screen py-8"},d.createElement("div",{className:"container mx-auto px-4"},d.createElement("h1",{className:"text-3xl font-bold mb-6"},"  "),d.createElement("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8"},d.createElement(pt,{className:"p-4 bg-primary text-white"},d.createElement("h3",{className:"text-lg font-bold mb-1"}," "),d.createElement("p",{className:"text-3xl font-bold"},s.totalCraftsmen)),d.createElement(pt,{className:"p-4 bg-secondary text-white"},d.createElement("h3",{className:"text-lg font-bold mb-1"}," "),d.createElement("p",{className:"text-3xl font-bold"},s.totalClients)),d.createElement(pt,{className:"p-4 bg-accent text-primary"},d.createElement("h3",{className:"text-lg font-bold mb-1"}," "),d.createElement("p",{className:"text-3xl font-bold"},s.totalBookings)),d.createElement(pt,{className:"p-4 bg-gray-800 text-white"},d.createElement("h3",{className:"text-lg font-bold mb-1"}," "),d.createElement("p",{className:"text-3xl font-bold"},s.averageRating,"/5"))),d.createElement(pt,{className:"p-6 mb-8"},d.createElement("h2",{className:"text-xl font-bold mb-4"},"  "),n.length>0?d.createElement("div",{className:"overflow-x-auto"},d.createElement("table",{className:"w-full"},d.createElement("thead",null,d.createElement("tr",{className:"bg-gray-100"},d.createElement("th",{className:"py-2 px-4 text-right"},""),d.createElement("th",{className:"py-2 px-4 text-right"},""),d.createElement("th",{className:"py-2 px-4 text-right"},""),d.createElement("th",{className:"py-2 px-4 text-right"}," "),d.createElement("th",{className:"py-2 px-4 text-right"},""),d.createElement("th",{className:"py-2 px-4 text-right"},""))),d.createElement("tbody",null,n.map(l=>d.createElement("tr",{key:l.id,className:"border-b"},d.createElement("td",{className:"py-3 px-4"},l.name),d.createElement("td",{className:"py-3 px-4"},l.profession),d.createElement("td",{className:"py-3 px-4"},l.specialization),d.createElement("td",{className:"py-3 px-4"},new Date(l.date).toLocaleDateString("ar-SY")),d.createElement("td",{className:"py-3 px-4"},d.createElement("span",{className:`px-2 py-1 rounded-full text-xs ${l.status==="approved"?"bg-green-100 text-green-800":l.status==="rejected"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`},l.status==="approved"?" ":l.status==="rejected"?" ":" ")),d.createElement("td",{className:"py-3 px-4"},l.status==="pending"&&d.createElement("div",{className:"flex gap-2"},d.createElement(Oe,{variant:"primary",className:"text-xs py-1 px-2",onClick:()=>o(l.id)},""),d.createElement(Oe,{variant:"outline",className:"text-xs py-1 px-2 text-red-500 border-red-500 hover:bg-red-50",onClick:()=>a(l.id)},"")))))))):d.createElement("p",{className:"text-gray-500 text-center"},"   ")),d.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},d.createElement(pt,{className:"p-6"},d.createElement("h2",{className:"text-xl font-bold mb-4"}," "),d.createElement("div",{className:"h-64 flex items-center justify-center"},d.createElement("div",{className:"w-full max-w-xs"},d.createElement("div",{className:"mb-4"},d.createElement("div",{className:"flex justify-between mb-1"},d.createElement("span",null," "),d.createElement("span",null,s.pendingBookings)),d.createElement("div",{className:"h-2 bg-gray-200 rounded-full"},d.createElement("div",{className:"h-full bg-yellow-500 rounded-full",style:{width:`${s.pendingBookings/s.totalBookings*100}%`}}))),d.createElement("div",{className:"mb-4"},d.createElement("div",{className:"flex justify-between mb-1"},d.createElement("span",null,""),d.createElement("span",null,s.completedBookings)),d.createElement("div",{className:"h-2 bg-gray-200 rounded-full"},d.createElement("div",{className:"h-full bg-green-500 rounded-full",style:{width:`${s.completedBookings/s.totalBookings*100}%`}}))),d.createElement("div",null,d.createElement("div",{className:"flex justify-between mb-1"},d.createElement("span",null,""),d.createElement("span",null,s.totalReviews)),d.createElement("div",{className:"h-2 bg-gray-200 rounded-full"},d.createElement("div",{className:"h-full bg-accent rounded-full",style:{width:`${s.totalReviews/s.totalBookings*100}%`}})))))),d.createElement(pt,{className:"p-6"},d.createElement("h2",{className:"text-xl font-bold mb-4"}," "),d.createElement("div",{className:"h-64 flex items-center justify-center"},d.createElement("div",{className:"w-full max-w-xs"},d.createElement("div",{className:"mb-4"},d.createElement("div",{className:"flex justify-between mb-1"},d.createElement("span",null,""),d.createElement("span",null,"32%")),d.createElement("div",{className:"h-2 bg-gray-200 rounded-full"},d.createElement("div",{className:"h-full bg-blue-500 rounded-full",style:{width:"32%"}}))),d.createElement("div",{className:"mb-4"},d.createElement("div",{className:"flex justify-between mb-1"},d.createElement("span",null,""),d.createElement("span",null,"24%")),d.createElement("div",{className:"h-2 bg-gray-200 rounded-full"},d.createElement("div",{className:"h-full bg-green-500 rounded-full",style:{width:"24%"}}))),d.createElement("div",{className:"mb-4"},d.createElement("div",{className:"flex justify-between mb-1"},d.createElement("span",null,""),d.createElement("span",null,"18%")),d.createElement("div",{className:"h-2 bg-gray-200 rounded-full"},d.createElement("div",{className:"h-full bg-yellow-500 rounded-full",style:{width:"18%"}}))),d.createElement("div",{className:"mb-4"},d.createElement("div",{className:"flex justify-between mb-1"},d.createElement("span",null,""),d.createElement("span",null,"15%")),d.createElement("div",{className:"h-2 bg-gray-200 rounded-full"},d.createElement("div",{className:"h-full bg-red-500 rounded-full",style:{width:"15%"}}))),d.createElement("div",null,d.createElement("div",{className:"flex justify-between mb-1"},d.createElement("span",null,""),d.createElement("span",null,"11%")),d.createElement("div",{className:"h-2 bg-gray-200 rounded-full"},d.createElement("div",{className:"h-full bg-purple-500 rounded-full",style:{width:"11%"}}))))))))))},fF={id:1,username:"admin",name:" ",email:"admin@jobscope.com",role:"admin",permissions:["manage_users","manage_craftsmen","manage_bookings","manage_content"],image:"https://randomuser.me/api/portraits/men/10.jpg"},$A=Fl(Xc(t=>({admin:null,isAuthenticated:!1,loading:!1,error:null,loginAdmin:async e=>{t({loading:!0,error:null});try{if(await new Promise(n=>setTimeout(n,1e3)),e.username==="admin"&&e.password==="admin123"){const n={admin:fF,isAuthenticated:!0,loading:!1,error:null};return e.rememberMe||(sessionStorage.setItem("admin-session",JSON.stringify({admin:fF,isAuthenticated:!0})),localStorage.removeItem("admin-storage")),t(n),!0}else return t({loading:!1,error:"      "}),!1}catch(n){return t({loading:!1,error:n.message||"    "}),!1}},logoutAdmin:()=>{sessionStorage.removeItem("admin-session"),localStorage.removeItem("admin-storage"),t({admin:null,isAuthenticated:!1})},resetError:()=>{t({error:null})},updateAdminProfile:e=>{t(r=>({admin:{...r.admin,...e}}));const n=sessionStorage.getItem("admin-session");if(n){const r=JSON.parse(n);sessionStorage.setItem("admin-session",JSON.stringify({...r,admin:{...r.admin,...e}}))}return!0}}),{name:"admin-storage",partialize:t=>({admin:t.admin,isAuthenticated:t.isAuthenticated})})),eJe=()=>{const t=Lr(),{error:e,resetError:n}=$A(),r=We(y=>y.darkMode),[s,i]=A.useState({username:"",password:""}),[o,a]=A.useState(!1),[l,c]=A.useState({});A.useEffect(()=>{Gr.isAdminLoggedIn()&&t("/admin/dashboard")},[t]),A.useEffect(()=>{n()},[n]);const u=y=>{const{name:v,value:x}=y.target;i({...s,[v]:x}),l[v]&&c({...l,[v]:""})},h=()=>{let y=!0;const v={};return s.username||(v.username="  ",y=!1),s.password||(v.password="  ",y=!1),c(v),y},m=async y=>{if(y.preventDefault(),h())try{await Gr.adminLogin({username:s.username,password:s.password,rememberMe:o}),t("/admin/dashboard")}catch(v){c({general:v.message||"    "})}},p=y=>{a(y.target.checked)};return d.createElement(ds,{hideFooter:!0,hideHeader:!0},d.createElement("div",{className:`min-h-screen py-12 ${r?"bg-gray-900":"bg-gradient-to-br from-blue-50 to-indigo-100"} transition-colors duration-300`},d.createElement("style",{dangerouslySetInnerHTML:{__html:`
          @keyframes pulse {
            0% {
              box-shadow: 0 0 0 0 rgba(99, 102, 241, 0.4);
            }
            70% {
              box-shadow: 0 0 0 10px rgba(99, 102, 241, 0);
            }
            100% {
              box-shadow: 0 0 0 0 rgba(99, 102, 241, 0);
            }
          }
        `}}),d.createElement("div",{className:"container mx-auto px-4"},d.createElement(At.div,{className:`max-w-lg mx-auto rounded-lg shadow-xl overflow-hidden border-2 ${r?"bg-gray-800 border-gray-700":"bg-white border-indigo-200"} transition-colors duration-300`,initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{duration:.5,ease:"easeOut"}},d.createElement("div",{className:"p-6"},d.createElement("h2",{className:`text-2xl font-bold text-center mb-4 ${r?"text-indigo-300":"text-indigo-800"} relative transition-colors duration-300`},d.createElement("span",{className:"relative z-10"},"  JobScope"),d.createElement("span",{className:`absolute bottom-0 left-0 right-0 h-3 ${r?"bg-indigo-500":"bg-indigo-300"} opacity-40 transform -rotate-1 z-0`})),d.createElement("p",{className:`text-center mb-6 ${r?"text-gray-300":"text-gray-600"}`},"    "),(e||l.general)&&d.createElement("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded"},e||l.general),d.createElement("form",{onSubmit:m},d.createElement(yr,{label:" ",type:"text",name:"username",value:s.username,onChange:u,placeholder:"  ",error:l.username,required:!0,className:"text-base py-2 border-indigo-200 focus:border-indigo-500 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 mb-3"}),d.createElement(yr,{label:" ",type:"password",name:"password",value:s.password,onChange:u,placeholder:"  ",error:l.password,required:!0,className:"text-base py-2 border-indigo-200 focus:border-indigo-500 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"}),d.createElement("div",{className:"flex items-center mt-4"},d.createElement("input",{type:"checkbox",id:"rememberMe",checked:o,onChange:p,className:`h-4 w-4 ${r?"bg-gray-700 border-gray-600 text-indigo-500":"bg-white border-indigo-300 text-indigo-600"} rounded focus:ring-indigo-500 focus:ring-offset-0`}),d.createElement("label",{htmlFor:"rememberMe",className:`mr-2 text-sm ${r?"text-gray-300":"text-gray-700"}`},"")),d.createElement(Oe,{type:"submit",variant:"primary",fullWidth:!0,className:`mt-4 ${r?"bg-gradient-to-r from-[#3730A3] to-[#4238C8] hover:from-[#322e92] hover:to-[#3b32b4]":"bg-gradient-to-r from-[#4238C8] to-[#3730A3] hover:from-[#3b32b4] hover:to-[#322e92]"} text-white transition-all duration-200 shadow-md hover:shadow-lg text-base py-2 relative overflow-hidden group`,style:{animation:"pulse 2s infinite"}},d.createElement("span",{className:"relative z-10"}," "),d.createElement("span",{className:"absolute inset-0 bg-white opacity-20 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-700"}))),d.createElement("div",{className:"mt-6 text-center"},d.createElement("p",{className:`text-sm ${r?"text-gray-400":"text-gray-600"}`},"     "),d.createElement(at,{to:"/",className:`mt-2 inline-block text-sm ${r?"text-indigo-400":"text-indigo-600"} hover:underline`},"   ")))))))},tJe=({admin:t,onLogout:e})=>{const n=We(s=>s.darkMode),r=We(s=>s.toggleDarkMode);return d.createElement("div",{className:`py-4 px-6 ${n?"bg-gray-800 border-b border-gray-700":"bg-gradient-to-r from-indigo-900 to-blue-900 text-white"} shadow-md transition-colors duration-300`},d.createElement("div",{className:"container mx-auto"},d.createElement("div",{className:"flex justify-between items-center"},d.createElement("div",{className:"flex items-center"},d.createElement("h1",{className:"text-2xl font-bold ml-2"},"  "),d.createElement("div",{className:"flex items-center gap-4"},d.createElement(at,{to:"/",className:"flex items-center text-2xl font-bold relative group"},d.createElement("div",null,d.createElement("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-yellow-400 to-orange-500"},"Job"),d.createElement("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-indigo-400 to-blue-500"},"Scope"),d.createElement("span",{className:"absolute -bottom-1 left-0 w-0 h-0.5 bg-gradient-to-r from-yellow-400 to-blue-500 transition-all duration-300 group-hover:w-full"}))))),d.createElement("div",{className:"flex items-center gap-4"},d.createElement("div",{className:"flex items-center bg-white/10 rounded-full px-3 py-1"},d.createElement("img",{src:t.image,alt:t.name,className:"w-8 h-8 rounded-full border-2 border-indigo-300 ml-2"}),d.createElement("span",{className:"font-medium"},t.name)),d.createElement("button",{onClick:r,className:`p-2 rounded-full ${n?"bg-gray-700 text-yellow-300 hover:bg-gray-600":"bg-indigo-800 text-yellow-300 hover:bg-indigo-700"} transition-colors duration-200 flex items-center justify-center`,"aria-label":n?"  ":"  "},n?d.createElement(u8,{size:18,className:"text-yellow-300"}):d.createElement(WT,{size:18,className:"text-yellow-300"})),d.createElement(Oe,{variant:"primary",className:"flex items-center bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 text-white transition-all duration-200 shadow-md hover:shadow-lg relative overflow-hidden group",onClick:e},d.createElement("span",{className:"relative z-10 flex items-center"},d.createElement(GT,{size:16,className:"ml-2"})," "),d.createElement("span",{className:"absolute inset-0 bg-white opacity-20 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-700"})),d.createElement(at,{to:"/"},d.createElement(Oe,{className:`${n?"bg-gradient-to-r from-[#3730A3] to-[#4238C8] hover:from-[#322e92] hover:to-[#3b32b4]":"bg-gradient-to-r from-[#4238C8] to-[#3730A3] hover:from-[#3b32b6] hover:to-[#322e92]"} text-white transition-all duration-200 shadow-md hover:shadow-lg relative overflow-hidden group`},d.createElement("span",{className:"relative z-10 flex items-center"},d.createElement(HT,{size:16,className:"ml-2"}),""),d.createElement("span",{className:"absolute inset-0 bg-white opacity-20 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-700"})))))))},nJe=({dashboardSections:t,activeTab:e,setActiveTab:n,admin:r})=>{const s=We(i=>i.darkMode);return d.createElement("div",{className:`w-full md:w-64 ${s?"bg-gradient-to-br from-gray-800 to-indigo-900/90 border border-gray-700":"bg-gradient-to-br from-indigo-50/90 to-indigo-200/80 border border-indigo-200"} rounded-lg shadow-md transition-colors duration-300 p-4`},d.createElement("div",{className:`mb-6 p-4 rounded-lg ${s?"bg-gradient-to-r from-indigo-900/30 to-indigo-800/30":"bg-gradient-to-r from-white/80 to-indigo-100/60"} border ${s?"border-indigo-800/50":"border-indigo-200"}`},d.createElement("div",{className:"flex flex-col items-center text-center"},d.createElement("img",{src:r==null?void 0:r.image,alt:r==null?void 0:r.name,className:"w-20 h-20 rounded-full border-2 border-indigo-300 mb-2"}),d.createElement("h3",{className:`font-bold text-lg ${s?"text-white":"text-indigo-800"}`},r==null?void 0:r.name),d.createElement("p",{className:`text-sm ${s?"text-gray-300":"text-gray-600"} mb-3`},(r==null?void 0:r.email)||"admin@jobscope.com"),d.createElement("button",{className:`w-full flex items-center justify-center p-2 rounded-md text-sm ${s?"bg-gradient-to-r from-[#3730A3]/80 to-[#4238C8]/80 text-white hover:from-[#322e92]/80 hover:to-[#3b32b4]/80 border border-indigo-800":"bg-gradient-to-r from-[#4238C8]/90 to-[#3730A3]/90 text-white hover:from-[#3b32b4]/90 hover:to-[#322e92]/90 border border-indigo-300"} transition-colors duration-200 mb-2 relative overflow-hidden group`,onClick:()=>n("profile")},d.createElement("span",{className:"relative z-10 flex items-center justify-center"},d.createElement(Xf,{size:16,className:"ml-2"}),"  "),d.createElement("span",{className:"absolute inset-0 bg-white opacity-10 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-700"})),d.createElement("button",{className:`w-full flex items-center justify-center p-2 rounded-md text-sm ${s?"bg-gradient-to-r from-[#3730A3]/80 to-[#4238C8]/80 text-white hover:from-[#322e92]/80 hover:to-[#3b32b4]/80 border border-indigo-800":"bg-gradient-to-r from-[#4238C8]/90 to-[#3730A3]/90 text-white hover:from-[#3b32b4]/90 hover:to-[#322e92]/90 border border-indigo-300"} transition-colors duration-200 relative overflow-hidden group`,onClick:()=>n("edit-profile")},d.createElement("span",{className:"relative z-10 flex items-center justify-center"},d.createElement(l8,{size:16,className:"ml-2"})," "),d.createElement("span",{className:"absolute inset-0 bg-white opacity-10 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-700"})))),d.createElement("h2",{className:`text-lg font-bold mb-4 ${s?"text-indigo-300":"text-indigo-700"}`}," "),d.createElement("nav",null,d.createElement("ul",{className:"space-y-2"},t.map(i=>d.createElement("li",{key:i.id},d.createElement("button",{className:`w-full flex items-center p-3 rounded-md transition-colors duration-200 ${e===i.id?s?"bg-gradient-to-r from-[#3730A3]/80 to-[#4238C8]/80 text-white border border-indigo-700":"bg-gradient-to-r from-[#4238C8]/90 to-[#3730A3]/90 text-white border border-indigo-300":s?"text-gray-300 hover:bg-gray-700/70":"text-gray-700 hover:bg-indigo-50/50"} relative overflow-hidden group`,onClick:()=>n(i.id)},d.createElement("span",{className:"relative z-10 flex items-center"},d.createElement("span",{className:"ml-3"},i.icon),i.label),e===i.id&&d.createElement("span",{className:"absolute inset-0 bg-white opacity-10 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-700"})))))))},rJe=()=>{const t=We(e=>e.darkMode);return d.createElement("div",null,d.createElement("div",{className:"flex justify-between items-center mb-6"},d.createElement("h3",{className:`text-xl font-bold ${t?"text-indigo-300":"text-indigo-800"} relative`},d.createElement("span",{className:"relative z-10"}," "),d.createElement("span",{className:`absolute bottom-0 left-0 right-0 h-2 ${t?"bg-indigo-500":"bg-indigo-300"} opacity-40 transform -rotate-1 z-0`})),d.createElement(Oe,{variant:"primary",className:`${t?"bg-gradient-to-r from-[#3730A3] to-[#4238C8] hover:from-[#322e92] hover:to-[#3b32b4]":"bg-gradient-to-r from-[#4238C8] to-[#3730A3] hover:from-[#3b32b4] hover:to-[#322e92]"} text-white transition-all duration-200 shadow-md hover:shadow-lg relative overflow-hidden group`},d.createElement("span",{className:"relative z-10"},"  "),d.createElement("span",{className:"absolute inset-0 bg-white opacity-20 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-700"}))),d.createElement("div",{className:`mb-6 p-4 rounded-lg ${t?"bg-gray-700":"bg-gradient-to-r from-indigo-50 to-blue-50"} border ${t?"border-gray-600":"border-indigo-100"}`},d.createElement("div",{className:"flex justify-between items-center mb-4"},d.createElement("h4",{className:`font-bold ${t?"text-white":"text-indigo-700"}`}," ")),d.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4"},d.createElement("div",{className:`p-4 rounded-lg ${t?"bg-gray-800":"bg-gradient-to-br from-white to-indigo-50/50"} border ${t?"border-gray-700":"border-indigo-100"} shadow-sm`},d.createElement("p",{className:"text-gray-500 text-sm mb-1"}," "),d.createElement("p",{className:`text-2xl font-bold ${t?"text-indigo-300":"text-indigo-600"}`},"1,245")),d.createElement("div",{className:`p-4 rounded-lg ${t?"bg-gray-800":"bg-gradient-to-br from-white to-blue-50/50"} border ${t?"border-gray-700":"border-blue-100"} shadow-sm`},d.createElement("p",{className:"text-gray-500 text-sm mb-1"}," "),d.createElement("p",{className:`text-2xl font-bold ${t?"text-indigo-300":"text-indigo-600"}`},"876")),d.createElement("div",{className:`p-4 rounded-lg ${t?"bg-gray-800":"bg-gradient-to-br from-white to-indigo-50/50"} border ${t?"border-gray-700":"border-indigo-100"} shadow-sm`},d.createElement("p",{className:"text-gray-500 text-sm mb-1"},"  ( )"),d.createElement("p",{className:`text-2xl font-bold ${t?"text-indigo-300":"text-indigo-600"}`},"42")))),d.createElement("div",{className:`p-4 rounded-lg ${t?"bg-gray-700":"bg-gradient-to-br from-white to-blue-50"} border ${t?"border-gray-600":"border-blue-100"} shadow-md`},d.createElement("p",{className:`mb-4 ${t?"text-gray-300":"text-gray-600"}`},"      ."),d.createElement("div",{className:`p-4 rounded-lg ${t?"bg-indigo-900/30 border border-indigo-800":"bg-gradient-to-r from-indigo-50 to-blue-50 border border-indigo-100"}`},d.createElement("p",{className:`${t?"text-indigo-300":"text-indigo-700"}`},"   .      ."))))},sJe=()=>{const t=We(e=>e.darkMode);return d.createElement("div",null,d.createElement("div",{className:"flex justify-between items-center mb-6"},d.createElement("h3",{className:`text-xl font-bold ${t?"text-indigo-300":"text-indigo-800"} relative`},d.createElement("span",{className:"relative z-10"}," "),d.createElement("span",{className:`absolute bottom-0 left-0 right-0 h-2 ${t?"bg-indigo-500":"bg-indigo-300"} opacity-40 transform -rotate-1 z-0`})),d.createElement(Oe,{variant:"primary",className:`${t?"bg-gradient-to-r from-[#3730A3] to-[#4238C8] hover:from-[#322e92] hover:to-[#3b32b4]":"bg-gradient-to-r from-[#4238C8] to-[#3730A3] hover:from-[#3b32b4] hover:to-[#322e92]"} text-white transition-all duration-200 shadow-md hover:shadow-lg relative overflow-hidden group`},d.createElement("span",{className:"relative z-10"},"  "),d.createElement("span",{className:"absolute inset-0 bg-white opacity-20 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-700"}))),d.createElement("div",{className:`mb-6 p-4 rounded-lg ${t?"bg-gray-700":"bg-indigo-50"}`},d.createElement("div",{className:"flex justify-between items-center mb-4"},d.createElement("h4",{className:`font-bold ${t?"text-white":"text-indigo-700"}`}," ")),d.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4"},d.createElement("div",{className:`p-4 rounded-lg ${t?"bg-gray-800":"bg-white"} shadow-sm`},d.createElement("p",{className:"text-gray-500 text-sm mb-1"}," "),d.createElement("p",{className:`text-2xl font-bold ${t?"text-indigo-300":"text-indigo-600"}`},"369")),d.createElement("div",{className:`p-4 rounded-lg ${t?"bg-gray-800":"bg-white"} shadow-sm`},d.createElement("p",{className:"text-gray-500 text-sm mb-1"}," "),d.createElement("p",{className:`text-2xl font-bold ${t?"text-indigo-300":"text-indigo-600"}`},"284")),d.createElement("div",{className:`p-4 rounded-lg ${t?"bg-gray-800":"bg-white"} shadow-sm`},d.createElement("p",{className:"text-gray-500 text-sm mb-1"}," "),d.createElement("p",{className:`text-2xl font-bold ${t?"text-indigo-300":"text-indigo-600"}`},"4.7")))),d.createElement("div",{className:`p-4 rounded-lg ${t?"bg-gray-700":"bg-white"} border ${t?"border-gray-600":"border-gray-200"}`},d.createElement("p",{className:`mb-4 ${t?"text-gray-300":"text-gray-600"}`},"       ."),d.createElement("div",{className:`p-4 rounded-lg ${t?"bg-indigo-900/30 border border-indigo-800":"bg-indigo-50 border border-indigo-100"}`},d.createElement("p",{className:`${t?"text-indigo-300":"text-indigo-700"}`},"   .      ."))))},iJe=()=>{const t=We(e=>e.darkMode);return d.createElement("div",null,d.createElement("div",{className:"flex justify-between items-center mb-6"},d.createElement("h3",{className:`text-xl font-bold ${t?"text-indigo-300":"text-indigo-800"} relative`},d.createElement("span",{className:"relative z-10"}," "),d.createElement("span",{className:`absolute bottom-0 left-0 right-0 h-2 ${t?"bg-indigo-500":"bg-indigo-300"} opacity-40 transform -rotate-1 z-0`}))),d.createElement("div",{className:`mb-6 p-4 rounded-lg ${t?"bg-gray-700":"bg-indigo-50"}`},d.createElement("div",{className:"flex justify-between items-center mb-4"},d.createElement("h4",{className:`font-bold ${t?"text-white":"text-indigo-700"}`}," ")),d.createElement("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4"},d.createElement("div",{className:`p-4 rounded-lg ${t?"bg-gray-800":"bg-white"} shadow-sm`},d.createElement("p",{className:"text-gray-500 text-sm mb-1"}," "),d.createElement("p",{className:`text-2xl font-bold ${t?"text-indigo-300":"text-indigo-600"}`},"5,247")),d.createElement("div",{className:`p-4 rounded-lg ${t?"bg-gray-800":"bg-white"} shadow-sm`},d.createElement("p",{className:"text-gray-500 text-sm mb-1"},"  "),d.createElement("p",{className:`text-2xl font-bold ${t?"text-yellow-300":"text-yellow-600"}`},"124")),d.createElement("div",{className:`p-4 rounded-lg ${t?"bg-gray-800":"bg-white"} shadow-sm`},d.createElement("p",{className:"text-gray-500 text-sm mb-1"}," "),d.createElement("p",{className:`text-2xl font-bold ${t?"text-green-300":"text-green-600"}`},"4,892")),d.createElement("div",{className:`p-4 rounded-lg ${t?"bg-gray-800":"bg-white"} shadow-sm`},d.createElement("p",{className:"text-gray-500 text-sm mb-1"}," "),d.createElement("p",{className:`text-2xl font-bold ${t?"text-red-300":"text-red-600"}`},"231")))),d.createElement("div",{className:`p-4 rounded-lg ${t?"bg-gray-700":"bg-white"} border ${t?"border-gray-600":"border-gray-200"}`},d.createElement("p",{className:`mb-4 ${t?"text-gray-300":"text-gray-600"}`},"       ."),d.createElement("div",{className:`p-4 rounded-lg ${t?"bg-indigo-900/30 border border-indigo-800":"bg-indigo-50 border border-indigo-100"}`},d.createElement("p",{className:`${t?"text-indigo-300":"text-indigo-700"}`},"   .      ."))))},oJe=()=>{const t=We(e=>e.darkMode);return d.createElement("div",null,d.createElement("div",{className:"flex justify-between items-center mb-6"},d.createElement("h3",{className:`text-xl font-bold ${t?"text-indigo-300":"text-indigo-800"} relative`},d.createElement("span",{className:"relative z-10"}," "),d.createElement("span",{className:`absolute bottom-0 left-0 right-0 h-2 ${t?"bg-indigo-500":"bg-indigo-300"} opacity-40 transform -rotate-1 z-0`})),d.createElement(Oe,{variant:"primary",className:`${t?"bg-gradient-to-r from-[#3730A3] to-[#4238C8] hover:from-[#322e92] hover:to-[#3b32b4]":"bg-gradient-to-r from-[#4238C8] to-[#3730A3] hover:from-[#3b32b4] hover:to-[#322e92]"} text-white transition-all duration-200 shadow-md hover:shadow-lg relative overflow-hidden group`},d.createElement("span",{className:"relative z-10"},"  "),d.createElement("span",{className:"absolute inset-0 bg-white opacity-20 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-700"}))),d.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6"},d.createElement("div",{className:`p-4 rounded-lg ${t?"bg-gray-700":"bg-gradient-to-br from-white to-indigo-100/40"} border ${t?"border-gray-600":"border-indigo-200"} shadow-md`},d.createElement("h4",{className:`font-bold mb-3 ${t?"text-indigo-300":"text-indigo-700"}`},""),d.createElement("p",{className:`mb-4 ${t?"text-gray-300":"text-gray-600"}`},"     ."),d.createElement(Oe,{variant:"primary",className:`${t?"bg-gradient-to-r from-[#3730A3] to-[#4238C8] hover:from-[#322e92] hover:to-[#3b32b4]":"bg-gradient-to-r from-[#4238C8] to-[#3730A3] hover:from-[#3b32b4] hover:to-[#322e92]"} text-white transition-all duration-200 shadow-sm hover:shadow-md relative overflow-hidden group`},d.createElement("span",{className:"relative z-10"}," "),d.createElement("span",{className:"absolute inset-0 bg-white opacity-20 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-700"}))),d.createElement("div",{className:`p-4 rounded-lg ${t?"bg-gray-700":"bg-gradient-to-br from-white to-indigo-100/40"} border ${t?"border-gray-600":"border-indigo-200"} shadow-md`},d.createElement("h4",{className:`font-bold mb-3 ${t?"text-indigo-300":"text-indigo-700"}`}," "),d.createElement("p",{className:`mb-4 ${t?"text-gray-300":"text-gray-600"}`},"    ."),d.createElement(Oe,{variant:"primary",className:`${t?"bg-gradient-to-r from-[#3730A3] to-[#4238C8] hover:from-[#322e92] hover:to-[#3b32b4]":"bg-gradient-to-r from-[#4238C8] to-[#3730A3] hover:from-[#3b32b4] hover:to-[#322e92]"} text-white transition-all duration-200 shadow-sm hover:shadow-md relative overflow-hidden group`},d.createElement("span",{className:"relative z-10"},"  "),d.createElement("span",{className:"absolute inset-0 bg-white opacity-20 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-700"})))),d.createElement("div",{className:`p-4 rounded-lg ${t?"bg-gray-700":"bg-gradient-to-br from-white to-indigo-100/40"} border ${t?"border-gray-600":"border-indigo-200"} shadow-md`},d.createElement("p",{className:`mb-4 ${t?"text-gray-300":"text-gray-600"}`},"      ."),d.createElement("div",{className:`p-4 rounded-lg ${t?"bg-indigo-900/30 border border-indigo-800":"bg-gradient-to-r from-indigo-50/70 to-indigo-100/50 border border-indigo-200"}`},d.createElement("p",{className:`${t?"text-indigo-300":"text-indigo-700"}`},"   .      ."))))},aJe=Fl(Xc(t=>({siteSettings:{siteName:"JobScope",siteDescription:"     ",siteEmail:"info@jobscope.com",siteLogo:"/img/Favicon/favicon-96x96.png",sitePhone:"+963 912 345 678",siteAddress:" ",siteWorkingHours:"24/7"},updateSiteSettings:e=>t(n=>({siteSettings:{...n.siteSettings,...e}})),updateSingleSetting:(e,n)=>t(r=>({siteSettings:{...r.siteSettings,[e]:n}}))}),{name:"site-settings-storage"})),lJe=()=>{const t=We(p=>p.darkMode),[e,n]=A.useState(!1),{siteSettings:r,updateSiteSettings:s}=aJe(),[i,o]=A.useState({...r}),a=A.useRef(null),[l,c]=A.useState(null);d.useEffect(()=>{e&&(o({...r}),c(null))},[e,r]);const u=p=>{const{name:y,value:v}=p.target;o(x=>({...x,[y]:v}))},h=p=>{const y=p.target.files[0];if(y){const v=URL.createObjectURL(y);c(v);const x=new FileReader;x.onloadend=()=>{o(b=>({...b,siteLogo:x.result}))},x.readAsDataURL(y)}},m=p=>{p.preventDefault(),s(i),n(!1),alert("    !")};return d.createElement("div",null,d.createElement("div",{className:"flex justify-between items-center mb-6"},d.createElement("h3",{className:`text-xl font-bold ${t?"text-indigo-300":"text-indigo-800"} relative`},d.createElement("span",{className:"relative z-10"}," "),d.createElement("span",{className:`absolute bottom-0 left-0 right-0 h-2 ${t?"bg-indigo-500":"bg-indigo-300"} opacity-40 transform -rotate-1 z-0`}))),d.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6"},d.createElement("div",{className:`p-4 rounded-lg ${t?"bg-gray-700":"bg-gradient-to-br from-white to-indigo-100/40"} border ${t?"border-gray-600":"border-indigo-200"} shadow-md`},d.createElement("h4",{className:`font-bold mb-3 ${t?"text-indigo-300":"text-indigo-700"}`}," "),d.createElement("p",{className:`mb-4 ${t?"text-gray-300":"text-gray-600"}`},"       ."),d.createElement(Oe,{variant:"primary",className:`${t?"bg-gradient-to-r from-[#3730A3] to-[#4238C8] hover:from-[#322e92] hover:to-[#3b32b4]":"bg-gradient-to-r from-[#4238C8] to-[#3730A3] hover:from-[#3b32b4] hover:to-[#322e92]"} text-white transition-all duration-200 shadow-sm hover:shadow-md relative overflow-hidden group`,onClick:()=>n(!0)},d.createElement("span",{className:"relative z-10"}," "),d.createElement("span",{className:"absolute inset-0 bg-white opacity-20 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-700"}))),d.createElement("div",{className:`p-4 rounded-lg ${t?"bg-gray-700":"bg-gradient-to-br from-white to-indigo-100/40"} border ${t?"border-gray-600":"border-indigo-200"} shadow-md`},d.createElement("h4",{className:`font-bold mb-3 ${t?"text-indigo-300":"text-indigo-700"}`}," "),d.createElement("p",{className:`mb-4 ${t?"text-gray-300":"text-gray-600"}`},"    ."),d.createElement(Oe,{variant:"primary",className:`${t?"bg-gradient-to-r from-[#3730A3] to-[#4238C8] hover:from-[#322e92] hover:to-[#3b32b4]":"bg-gradient-to-r from-[#4238C8] to-[#3730A3] hover:from-[#3b32b4] hover:to-[#322e92]"} text-white transition-all duration-200 shadow-sm hover:shadow-md relative overflow-hidden group`},d.createElement("span",{className:"relative z-10"}," "),d.createElement("span",{className:"absolute inset-0 bg-white opacity-20 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-700"})))),d.createElement("div",{className:`p-4 rounded-lg ${t?"bg-gray-700":"bg-gradient-to-br from-white to-indigo-100/40"} border ${t?"border-gray-600":"border-indigo-200"} shadow-md`},d.createElement("p",{className:`mb-4 ${t?"text-gray-300":"text-gray-600"}`},"     ."),d.createElement("div",{className:`p-4 rounded-lg ${t?"bg-indigo-900/30 border border-indigo-800":"bg-gradient-to-r from-indigo-50/70 to-indigo-100/50 border border-indigo-200"}`},d.createElement("p",{className:`${t?"text-indigo-300":"text-indigo-700"}`},"   .      ."))),e&&d.createElement("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4"},d.createElement("div",{className:`relative w-full max-w-2xl max-h-[90vh] overflow-y-auto rounded-lg shadow-xl ${t?"bg-gray-800 border border-gray-700":"bg-white border border-indigo-200"} p-6`},d.createElement("div",{className:"flex justify-between items-center mb-6"},d.createElement("h3",{className:`text-xl font-bold ${t?"text-indigo-300":"text-indigo-800"}`},"  "),d.createElement("button",{className:`p-1 rounded-full ${t?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-100 text-gray-700 hover:bg-gray-200"} transition-colors`,onClick:()=>n(!1)},d.createElement(fo,{size:20}))),d.createElement("form",{onSubmit:m},d.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6"},d.createElement("div",null,d.createElement("label",{className:`block mb-2 text-sm font-medium ${t?"text-gray-300":"text-gray-700"}`}," "),d.createElement("input",{type:"text",name:"siteName",value:i.siteName,onChange:u,className:`w-full p-2 rounded-md ${t?"bg-gray-700 border border-gray-600 text-white":"bg-white border border-gray-300 text-gray-900"} focus:ring-2 focus:ring-indigo-500 focus:border-transparent`,required:!0})),d.createElement("div",null,d.createElement("label",{className:`block mb-2 text-sm font-medium ${t?"text-gray-300":"text-gray-700"}`}," "),d.createElement("input",{type:"email",name:"siteEmail",value:i.siteEmail,onChange:u,className:`w-full p-2 rounded-md ${t?"bg-gray-700 border border-gray-600 text-white":"bg-white border border-gray-300 text-gray-900"} focus:ring-2 focus:ring-indigo-500 focus:border-transparent`,required:!0})),d.createElement("div",null,d.createElement("label",{className:`block mb-2 text-sm font-medium ${t?"text-gray-300":"text-gray-700"}`}," "),d.createElement("input",{type:"text",name:"sitePhone",value:i.sitePhone,onChange:u,className:`w-full p-2 rounded-md ${t?"bg-gray-700 border border-gray-600 text-white":"bg-white border border-gray-300 text-gray-900"} focus:ring-2 focus:ring-indigo-500 focus:border-transparent`})),d.createElement("div",null,d.createElement("label",{className:`block mb-2 text-sm font-medium ${t?"text-gray-300":"text-gray-700"}`},""),d.createElement("input",{type:"text",name:"siteAddress",value:i.siteAddress,onChange:u,className:`w-full p-2 rounded-md ${t?"bg-gray-700 border border-gray-600 text-white":"bg-white border border-gray-300 text-gray-900"} focus:ring-2 focus:ring-indigo-500 focus:border-transparent`})),d.createElement("div",null,d.createElement("label",{className:`block mb-2 text-sm font-medium ${t?"text-gray-300":"text-gray-700"}`}," "),d.createElement("input",{type:"text",name:"siteWorkingHours",value:i.siteWorkingHours,onChange:u,className:`w-full p-2 rounded-md ${t?"bg-gray-700 border border-gray-600 text-white":"bg-white border border-gray-300 text-gray-900"} focus:ring-2 focus:ring-indigo-500 focus:border-transparent`})),d.createElement("div",null,d.createElement("label",{className:`block mb-2 text-sm font-medium ${t?"text-gray-300":"text-gray-700"}`}," "),d.createElement("div",{className:"space-y-2"},d.createElement("div",{className:"flex items-center justify-center p-2 border rounded-md bg-gray-50 dark:bg-gray-800"},d.createElement("img",{src:l||i.siteLogo,alt:" ",className:"max-h-20 max-w-full"})),d.createElement("div",{className:"flex space-x-2 space-x-reverse"},d.createElement("input",{type:"file",accept:"image/*",ref:a,onChange:h,className:"hidden",id:"logo-upload"}),d.createElement(Oe,{type:"button",variant:"outline",className:`${t?"border-indigo-600 text-indigo-300 hover:bg-indigo-900/30":"border-indigo-500 text-indigo-600 hover:bg-indigo-50"} transition-colors flex items-center`,onClick:()=>a.current.click()},d.createElement(d8,{size:16,className:"ml-2"})," "),d.createElement("input",{type:"text",name:"siteLogo",value:i.siteLogo,onChange:u,placeholder:"   ",className:`flex-1 p-2 rounded-md ${t?"bg-gray-700 border border-gray-600 text-white":"bg-white border border-gray-300 text-gray-900"} focus:ring-2 focus:ring-indigo-500 focus:border-transparent`}))))),d.createElement("div",{className:"mb-4"},d.createElement("label",{className:`block mb-2 text-sm font-medium ${t?"text-gray-300":"text-gray-700"}`}," "),d.createElement("textarea",{name:"siteDescription",value:i.siteDescription,onChange:u,rows:"3",className:`w-full p-2 rounded-md ${t?"bg-gray-700 border border-gray-600 text-white":"bg-white border border-gray-300 text-gray-900"} focus:ring-2 focus:ring-indigo-500 focus:border-transparent`})),d.createElement("div",{className:"flex justify-end space-x-2 space-x-reverse"},d.createElement(Oe,{type:"button",variant:"outline",className:`${t?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-100"} transition-colors`,onClick:()=>n(!1)},""),d.createElement(Oe,{type:"submit",variant:"primary",className:`${t?"bg-gradient-to-r from-[#3730A3] to-[#4238C8] hover:from-[#322e92] hover:to-[#3b32b4]":"bg-gradient-to-r from-[#4238C8] to-[#3730A3] hover:from-[#3b32b4] hover:to-[#322e92]"} text-white transition-all duration-200 relative overflow-hidden group`},d.createElement("span",{className:"relative z-10"}," "),d.createElement("span",{className:"absolute inset-0 bg-white opacity-20 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-700"})))))))},cJe=({admin:t})=>{const e=We(n=>n.darkMode);return d.createElement("div",null,d.createElement("div",{className:"flex justify-between items-center mb-6"},d.createElement("h3",{className:`text-xl font-bold ${e?"text-indigo-300":"text-indigo-800"} relative`},d.createElement("span",{className:"relative z-10"}," "),d.createElement("span",{className:`absolute bottom-0 left-0 right-0 h-2 ${e?"bg-indigo-500":"bg-indigo-300"} opacity-40 transform -rotate-1 z-0`}))),d.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6"},d.createElement("div",{className:`col-span-1 p-6 rounded-lg ${e?"bg-gray-700":"bg-gradient-to-br from-white to-indigo-100/40"} border ${e?"border-gray-600":"border-indigo-200"} shadow-md`},d.createElement("div",{className:"flex flex-col items-center text-center"},d.createElement("img",{src:t.image,alt:t.name,className:"w-32 h-32 rounded-full border-4 border-indigo-300 mb-4"}),d.createElement("h3",{className:`text-xl font-bold ${e?"text-white":"text-indigo-800"} mb-1`},t.name),d.createElement("p",{className:`text-sm ${e?"text-gray-300":"text-gray-600"} mb-4`},t.role),d.createElement("div",{className:`w-full p-2 rounded-md ${e?"bg-gray-800":"bg-gradient-to-r from-indigo-50/70 to-indigo-100/50"} text-center mb-2 border ${e?"border-gray-700":"border-indigo-200"}`},d.createElement("p",{className:`text-sm ${e?"text-gray-300":"text-gray-600"}`}," "),d.createElement("p",{className:`font-medium ${e?"text-indigo-300":"text-indigo-700"}`},t.email||"admin@jobscope.com")),d.createElement("div",{className:`w-full p-2 rounded-md ${e?"bg-gray-800":"bg-gradient-to-r from-indigo-50/70 to-indigo-100/50"} text-center border ${e?"border-gray-700":"border-indigo-200"}`},d.createElement("p",{className:`text-sm ${e?"text-gray-300":"text-gray-600"}`}," "),d.createElement("p",{className:`font-medium ${e?"text-indigo-300":"text-indigo-700"}`},t.phone||"+963 912 345 678")),d.createElement("div",{className:"mt-4"},d.createElement(Oe,{variant:"primary",className:`${e?"bg-gradient-to-r from-[#3730A3] to-[#4238C8] hover:from-[#322e92] hover:to-[#3b32b4]":"bg-gradient-to-r from-[#4238C8] to-[#3730A3] hover:from-[#3b32b4] hover:to-[#322e92]"} text-white transition-all duration-200 shadow-sm hover:shadow-md relative overflow-hidden group w-full`},d.createElement("span",{className:"relative z-10"}," "),d.createElement("span",{className:"absolute inset-0 bg-white opacity-20 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-700"}))))),d.createElement("div",{className:`col-span-2 p-6 rounded-lg ${e?"bg-gray-700":"bg-gradient-to-br from-white to-indigo-100/40"} border ${e?"border-gray-600":"border-indigo-200"} shadow-md`},d.createElement("h4",{className:`text-lg font-bold mb-4 ${e?"text-indigo-300":"text-indigo-700"} border-b ${e?"border-gray-600":"border-gray-200"} pb-2`}," "),d.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6"},d.createElement("div",null,d.createElement("p",{className:`text-sm ${e?"text-gray-300":"text-gray-600"} mb-1`}," "),d.createElement("p",{className:`font-medium ${e?"text-white":"text-gray-800"}`},t.joinDate||"01/01/2023")),d.createElement("div",null,d.createElement("p",{className:`text-sm ${e?"text-gray-300":"text-gray-600"} mb-1`},"  "),d.createElement("p",{className:`font-medium ${e?"text-white":"text-gray-800"}`},t.lastLogin||" 10:30 ")),d.createElement("div",null,d.createElement("p",{className:`text-sm ${e?"text-gray-300":"text-gray-600"} mb-1`},""),d.createElement("p",{className:`font-medium ${e?"text-white":"text-gray-800"}`},t.permissions||"  ( )")),d.createElement("div",null)),d.createElement("h4",{className:`text-lg font-bold mb-4 ${e?"text-indigo-300":"text-indigo-700"} border-b ${e?"border-gray-600":"border-gray-200"} pb-2`}," "),d.createElement("div",{className:"space-y-3"},[{action:" ",time:" 10:30 "},{action:"  ",time:" 2:45 "},{action:"  ",time:"2023/04/20 11:15 "}].map((n,r)=>d.createElement("div",{key:r,className:`p-2 rounded-md ${e?"bg-gray-800":"bg-gradient-to-r from-indigo-50/70 to-indigo-100/50"} border ${e?"border-gray-700":"border-indigo-200/70"} flex justify-between items-center`},d.createElement("p",{className:`${e?"text-gray-300":"text-gray-700"}`},n.action),d.createElement("p",{className:`text-sm ${e?"text-gray-400":"text-gray-500"}`},n.time)))))))},uJe=({admin:t})=>{const e=We(x=>x.darkMode),n=$A(x=>x.updateAdminProfile),[r,s]=A.useState(""),[i,o]=A.useState(""),[a,l]=A.useState({name:(t==null?void 0:t.name)||"",email:(t==null?void 0:t.email)||"admin@jobscope.com",phone:(t==null?void 0:t.phone)||"",password:"",confirmPassword:"",image:(t==null?void 0:t.image)||""}),[c,u]=A.useState(!1),[h,m]=A.useState(!1),p=x=>{const{name:b,value:w}=x.target;l(E=>({...E,[b]:w}))},y=x=>{if(x.preventDefault(),s(""),o(""),!a.name||a.name.trim()===""){o(" "),setTimeout(()=>{const w=document.querySelector('input[name="name"]');w&&(w.scrollIntoView({behavior:"smooth",block:"center"}),w.focus(),w.classList.add("error-flash"),setTimeout(()=>{w.classList.remove("error-flash")},2e3))},100);return}if(!a.email||a.email.trim()===""){o("  "),setTimeout(()=>{const w=document.querySelector('input[name="email"]');w&&(w.scrollIntoView({behavior:"smooth",block:"center"}),w.focus(),w.classList.add("error-flash"),setTimeout(()=>{w.classList.remove("error-flash")},2e3))},100);return}else if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.email)){o("    "),setTimeout(()=>{const w=document.querySelector('input[name="email"]');w&&(w.scrollIntoView({behavior:"smooth",block:"center"}),w.focus(),w.classList.add("error-flash"),setTimeout(()=>{w.classList.remove("error-flash")},2e3))},100);return}if(a.password&&a.password!==a.confirmPassword){o("   "),setTimeout(()=>{const w=document.querySelector('input[name="confirmPassword"]');w&&(w.scrollIntoView({behavior:"smooth",block:"center"}),w.focus(),w.classList.add("error-flash"),setTimeout(()=>{w.classList.remove("error-flash")},2e3))},100);return}const b={name:a.name,email:a.email,image:a.image};a.phone&&(b.phone=a.phone);try{n(b),s("   "),l(w=>({...w,password:"",confirmPassword:""}))}catch{o("    ")}},v=x=>{const b=x.target.files[0];if(b){const w=new FileReader;w.onloadend=()=>{l(E=>({...E,image:w.result}))},w.readAsDataURL(b)}};return d.createElement("div",null,d.createElement("div",{className:"flex justify-between items-center mb-6"},d.createElement("h3",{className:`text-xl font-bold ${e?"text-indigo-300":"text-indigo-800"} relative`},d.createElement("span",{className:"relative z-10"},"  "),d.createElement("span",{className:`absolute bottom-0 left-0 right-0 h-2 ${e?"bg-indigo-500":"bg-indigo-300"} opacity-40 transform -rotate-1 z-0`}))),d.createElement("div",{className:`p-6 rounded-lg ${e?"bg-gray-700":"bg-gradient-to-br from-white to-indigo-50"} border ${e?"border-gray-600":"border-indigo-100"} shadow-md`},d.createElement("form",{onSubmit:y,className:"grid grid-cols-1 md:grid-cols-3 gap-6"},d.createElement("div",{className:"col-span-1 flex flex-col items-center"},d.createElement("div",{className:"mb-4 relative"},d.createElement("img",{src:a.image,alt:a.name,className:"w-32 h-32 rounded-full border-4 border-indigo-300 object-cover"}),d.createElement("label",{htmlFor:"image-upload",className:`absolute bottom-0 right-0 p-2 rounded-full ${e?"bg-gray-800":"bg-gradient-to-br from-white to-blue-50"} border ${e?"border-gray-700":"border-indigo-200"} shadow-md cursor-pointer hover:bg-indigo-100 transition-colors duration-200`},d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-5 w-5 ${e?"text-indigo-300":"text-indigo-600"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},d.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),d.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"}))),d.createElement("input",{type:"file",id:"image-upload",accept:"image/*",className:"hidden",onChange:v})),d.createElement("p",{className:`text-sm ${e?"text-gray-300":"text-gray-600"} mb-2 text-center`},"     ")),d.createElement("div",{className:"col-span-2 space-y-4"},d.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},d.createElement(yr,{label:"",type:"text",name:"name",value:a.name,onChange:p,required:!0,className:`w-full p-2 rounded-md ${e?"bg-gray-800 border-gray-700 text-white":"bg-white border-gray-300 text-gray-800"} focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-colors duration-200`}),d.createElement(yr,{label:" ",type:"email",name:"email",value:a.email,onChange:p,required:!0,className:`w-full p-2 rounded-md ${e?"bg-gray-800 border-gray-700 text-white":"bg-white border-gray-300 text-gray-800"} focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-colors duration-200`}),d.createElement(yr,{label:" ",type:"tel",name:"phone",value:a.phone,onChange:p,className:`w-full p-2 rounded-md ${e?"bg-gray-800 border-gray-700 text-white":"bg-white border-gray-300 text-gray-800"} focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-colors duration-200`})),d.createElement("div",{className:`p-4 rounded-md ${e?"bg-gray-800":"bg-gradient-to-r from-indigo-50 to-blue-50"} border ${e?"border-gray-700":"border-indigo-100"} mb-4`},d.createElement("h4",{className:`font-bold mb-3 ${e?"text-indigo-300":"text-indigo-700"}`},"  "),d.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},d.createElement("div",{className:"relative"},d.createElement(yr,{label:"  ",type:c?"text":"password",name:"password",value:a.password,onChange:p,className:`w-full p-2 rounded-md ${e?"bg-gray-700 border-gray-600 text-white":"bg-gradient-to-r from-white to-blue-50/50 border-blue-200 text-gray-800"} focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-colors duration-200 pl-10`}),d.createElement("button",{type:"button",className:`absolute left-3 top-1/2 transform -translate-y-1/2 mt-2 p-1 rounded-full ${e?"text-gray-400 hover:text-gray-300":"text-gray-500 hover:text-gray-700"} focus:outline-none transition-colors duration-200`,onClick:()=>u(!c),tabIndex:"-1"},c?d.createElement(CC,{size:18}):d.createElement(_C,{size:18}))),d.createElement("div",{className:"relative"},d.createElement(yr,{label:"  ",type:h?"text":"password",name:"confirmPassword",value:a.confirmPassword,onChange:p,className:`w-full p-2 rounded-md ${e?"bg-gray-700 border-gray-600 text-white":"bg-gradient-to-r from-white to-indigo-50/50 border-indigo-200 text-gray-800"} focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-colors duration-200 pl-10`}),d.createElement("button",{type:"button",className:`absolute left-3 top-1/2 transform -translate-y-1/2 mt-2 p-1 rounded-full ${e?"text-gray-400 hover:text-gray-300":"text-gray-500 hover:text-gray-700"} focus:outline-none transition-colors duration-200`,onClick:()=>m(!h),tabIndex:"-1"},h?d.createElement(CC,{size:18}):d.createElement(_C,{size:18})))),d.createElement("p",{className:`text-xs mt-2 ${e?"text-gray-400":"text-gray-500"}`},"          ")),r&&d.createElement("div",{className:"mb-4 p-3 rounded-md bg-green-100 border border-green-300 text-green-700"},r),i&&d.createElement("div",{className:"mb-4 p-3 rounded-md bg-red-100 border border-red-300 text-red-700"},i),d.createElement("div",{className:"flex justify-end"},d.createElement(Oe,{type:"submit",variant:"primary",className:`${e?"bg-gradient-to-r from-[#3730A3] to-[#4238C8] hover:from-[#322e92] hover:to-[#3b32b4]":"bg-gradient-to-r from-[#4238C8] to-[#3730A3] hover:from-[#3b32b4] hover:to-[#322e92]"} text-white transition-all duration-200 shadow-md hover:shadow-lg relative overflow-hidden group`},d.createElement("span",{className:"relative z-10"}," "),d.createElement("span",{className:"absolute inset-0 bg-white opacity-20 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-700"})))))))},dJe=()=>{const t=Lr(),{admin:e,isAuthenticated:n,logoutAdmin:r}=$A(),s=We(u=>u.darkMode),[i,o]=A.useState("users");A.useEffect(()=>{n||t("/admin/login")},[n,t]);const a=[{id:"users",label:" ",icon:d.createElement(Aoe,{size:20})},{id:"craftsmen",label:" ",icon:d.createElement(VT,{size:20})},{id:"bookings",label:" ",icon:d.createElement(Pa,{size:20})},{id:"content",label:" ",icon:d.createElement(i8,{size:20})},{id:"settings",label:" ",icon:d.createElement(qT,{size:20})}],l=()=>{r(),t("/admin/login")},c=()=>{switch(i){case"users":return d.createElement(rJe,null);case"craftsmen":return d.createElement(sJe,null);case"bookings":return d.createElement(iJe,null);case"content":return d.createElement(oJe,null);case"settings":return d.createElement(lJe,null);case"profile":return d.createElement(cJe,{admin:e});case"edit-profile":return d.createElement(uJe,{admin:e});default:return null}};return!n||!e?null:d.createElement(ds,{hideHeader:!0},d.createElement("div",{className:`min-h-screen ${s?"bg-gray-900 text-gray-100":"bg-gradient-to-br from-blue-50 to-indigo-100 text-gray-800"} transition-colors duration-300`},d.createElement(tJe,{admin:e,onLogout:l}),d.createElement("div",{className:"container mx-auto py-6 px-4"},d.createElement("div",{className:"flex flex-col md:flex-row gap-6"},d.createElement(nJe,{dashboardSections:a,activeTab:i,setActiveTab:o,admin:e}),d.createElement(At.div,{className:`flex-1 ${s?"bg-gray-800 border border-gray-700":"bg-gradient-to-br from-indigo-50 to-indigo-50/60 border border-indigo-100"} rounded-lg shadow-md transition-colors duration-300 p-6`,key:i,initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.3}},c())))))},hJe=()=>Gr.isAdminLoggedIn()?d.createElement(qQ,null):d.createElement(WQ,{to:"/admin/login",replace:!0}),fJe=()=>{const t=Lr(),e=We(s=>s.darkMode),n=Dt(s=>s.user),r=Dt(s=>s.logout);return A.useEffect(()=>{window.scrollTo(0,0),n&&(r(),console.log("        ")),Gr.isLoggedIn()&&(Gr.logout(),console.log("    authService")),localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("tokenExpiry"),sessionStorage.clear(),setTimeout(()=>{console.log("   ")},100)},[n,r]),d.createElement(ds,{user:null,onLogout:()=>{}},d.createElement("div",{className:`min-h-screen ${e?"bg-gray-900":"bg-gradient-to-br from-blue-50 to-indigo-100"} py-20 transition-colors duration-300`},d.createElement("style",{dangerouslySetInnerHTML:{__html:`
          @keyframes pulse {
            0% {
              box-shadow: 0 0 0 0 rgba(99, 102, 241, 0.4);
            }
            70% {
              box-shadow: 0 0 0 10px rgba(99, 102, 241, 0);
            }
            100% {
              box-shadow: 0 0 0 0 rgba(99, 102, 241, 0);
            }
          }
        `}}),d.createElement("div",{className:"container mx-auto px-4"},d.createElement(At.div,{className:`max-w-xl mx-auto rounded-lg shadow-xl overflow-hidden border-2 ${e?"bg-gray-800 border-gray-700":"bg-white border-indigo-200"} transition-colors duration-300`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,ease:"easeOut"}},d.createElement("div",{className:"p-8"},d.createElement("h2",{className:`text-3xl font-bold text-center mb-8 ${e?"text-indigo-300":"text-indigo-800"} relative transition-colors duration-300`},d.createElement("span",{className:"relative z-10"},"  "),d.createElement("span",{className:`absolute bottom-0 left-0 right-0 h-2 ${e?"bg-indigo-500":"bg-indigo-300"} opacity-40 transform -rotate-1 z-0`})),d.createElement("p",{className:`text-center mb-8 text-lg ${e?"text-indigo-400":"text-indigo-600"} transition-colors duration-300`},"      "),d.createElement("div",{className:"flex flex-col gap-3"},d.createElement(Oe,{variant:"primary",onClick:()=>t("/login"),className:`text-white transition-all duration-200 shadow-md hover:shadow-lg w-full text-lg py-3 relative overflow-hidden group ${e?"bg-gradient-to-r from-indigo-700 to-purple-800 hover:from-indigo-800 hover:to-purple-900":"bg-gradient-to-r from-blue-500 to-indigo-500 hover:from-blue-600 hover:to-indigo-600"}`,style:{animation:"pulse 2s infinite"}},d.createElement("span",{className:"relative z-10 font-bold text-white"}," "),d.createElement("span",{className:"absolute inset-0 bg-white opacity-20 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-700"})),d.createElement(Oe,{variant:"outline",onClick:()=>t("/"),className:`transition-all duration-200 shadow-sm hover:shadow-md w-full text-lg py-3 relative overflow-hidden group ${e?"border-gray-700 text-indigo-300 hover:bg-gray-700":"border-indigo-200 text-indigo-600 hover:bg-indigo-50"}`},d.createElement("span",{className:"relative z-10 font-bold"},"   "),d.createElement("span",{className:`absolute inset-0 ${e?"bg-gray-600":"bg-indigo-50"} opacity-0 transform -skew-x-12 -translate-x-full group-hover:translate-x-full group-hover:opacity-100 transition-all duration-700`}))))))))};function mJe(){const t=We(e=>e.darkMode);return A.useEffect(()=>{t?document.body.classList.add("dark-mode"):document.body.classList.remove("dark-mode")},[t]),d.createElement("div",{className:`min-h-screen font-sans ${t?"bg-gray-900 text-white":"bg-gradient-to-br from-blue-50 to-indigo-100 text-black"} transition-colors duration-300`},d.createElement(ZQ,null,d.createElement(jr,{path:"/",element:d.createElement(joe,null)}),d.createElement(jr,{path:"/login",element:d.createElement(BXe,null)}),d.createElement(jr,{path:"/register/craftsman",element:d.createElement(cYe,null)}),d.createElement(jr,{path:"/register/client",element:d.createElement(dYe,null)}),d.createElement(jr,{path:"/home",element:d.createElement(pYe,null)}),d.createElement(jr,{path:"/search",element:d.createElement(NYe,null)}),d.createElement(jr,{path:"/profile/craftsman/:id",element:d.createElement(VYe,null)}),d.createElement(jr,{path:"/profile/my",element:d.createElement(qYe,null)}),d.createElement(jr,{path:"/settings",element:d.createElement(KYe,null)}),d.createElement(jr,{path:"/booking/:id",element:d.createElement(XYe,null)}),d.createElement(jr,{path:"/bookings",element:d.createElement(YYe,null)}),d.createElement(jr,{path:"/notifications",element:d.createElement(JYe,null)}),d.createElement(jr,{path:"/logout-redirect",element:d.createElement(fJe,null)}),d.createElement(jr,{path:"/admin/login",element:d.createElement(eJe,null)}),d.createElement(jr,{path:"/admin",element:d.createElement(QYe,null)}),d.createElement(jr,{element:d.createElement(hJe,null)},d.createElement(jr,{path:"/admin/dashboard",element:d.createElement(dJe,null)}))))}const pJe=({children:t})=>{const e=mg(n=>n.language);return A.useEffect(()=>{const n=document.documentElement;e==="en"?(n.setAttribute("lang","en"),n.setAttribute("dir","ltr")):(n.setAttribute("lang","ar"),n.setAttribute("dir","rtl"))},[e]),d.createElement(d.Fragment,null,t)};HJ.createRoot(document.getElementById("root")).render(d.createElement(d.StrictMode,null,d.createElement(Aee,{clientId:"79461320705-ru94lkf71prenrqpv9v9pnvnlvndcseb.apps.googleusercontent.com"},d.createElement(xee,null,d.createElement(pJe,null,d.createElement(mJe,null))))));
//# sourceMappingURL=index-b8fd181b.js.map
